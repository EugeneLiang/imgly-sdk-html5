require=(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require=="function"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error("Cannot find module '"+o+"'");throw f.code="MODULE_NOT_FOUND",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require=="function"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({"./index.js":[function(require,module,exports){
(function (global){
"use strict";

var _interopRequire = function (obj) { return obj && obj.__esModule ? obj["default"] : obj; };

/*!
 * Copyright (c) 2013-2014 9elements GmbH
 *
 * Released under Attribution-NonCommercial 3.0 Unported
 * http://creativecommons.org/licenses/by-nc/3.0/
 *
 * For commercial use, please contact us at contact@9elements.com
 */

var ImglyKit = _interopRequire(require("./src/js/imglykit"));

/* istanbul ignore next */
(function () {
  if (typeof window !== "undefined") {
    window.ImglyKit = ImglyKit;
  } else if (typeof module !== "undefined") {
    module.exports = ImglyKit;
  } else if (typeof global !== "undefined") {
    global.ImglyKit = ImglyKit;
  }
})();

}).call(this,typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {})
},{"./src/js/imglykit":"/Users/sash/development/js/imglykit-rewrite/src/js/imglykit.js"}],"/Users/sash/development/js/imglykit-rewrite/node_modules/bluebird/js/main/any.js":[function(require,module,exports){
"use strict";
module.exports = function(Promise) {
var SomePromiseArray = Promise._SomePromiseArray;
function any(promises) {
    var ret = new SomePromiseArray(promises);
    var promise = ret.promise();
    if (promise.isRejected()) {
        return promise;
    }
    ret.setHowMany(1);
    ret.setUnwrap();
    ret.init();
    return promise;
}

Promise.any = function (promises) {
    return any(promises);
};

Promise.prototype.any = function () {
    return any(this);
};

};

},{}],"/Users/sash/development/js/imglykit-rewrite/node_modules/bluebird/js/main/async.js":[function(require,module,exports){
(function (process){
"use strict";
var firstLineError;
try {throw new Error(); } catch (e) {firstLineError = e;}
var schedule = require("./schedule.js");
var Queue = require("./queue.js");
var _process = typeof process !== "undefined" ? process : undefined;

function Async() {
    this._isTickUsed = false;
    this._lateQueue = new Queue(16);
    this._normalQueue = new Queue(16);
    var self = this;
    this.drainQueues = function () {
        self._drainQueues();
    };
    this._schedule =
        schedule.isStatic ? schedule(this.drainQueues) : schedule;
}

Async.prototype.haveItemsQueued = function () {
    return this._normalQueue.length() > 0;
};

Async.prototype._withDomain = function(fn) {
    if (_process !== undefined &&
        _process.domain != null &&
        !fn.domain) {
        fn = _process.domain.bind(fn);
    }
    return fn;
};

Async.prototype.throwLater = function(fn, arg) {
    if (arguments.length === 1) {
        arg = fn;
        fn = function () { throw arg; };
    }
    fn = this._withDomain(fn);
    if (typeof setTimeout !== "undefined") {
        setTimeout(function() {
            fn(arg);
        }, 0);
    } else try {
        this._schedule(function() {
            fn(arg);
        });
    } catch (e) {
        throw new Error("No async scheduler available\u000a\u000a    See http://goo.gl/m3OTXk\u000a");
    }
};

Async.prototype.invokeLater = function (fn, receiver, arg) {
    fn = this._withDomain(fn);
    this._lateQueue.push(fn, receiver, arg);
    this._queueTick();
};

Async.prototype.invokeFirst = function (fn, receiver, arg) {
    fn = this._withDomain(fn);
    this._normalQueue.unshift(fn, receiver, arg);
    this._queueTick();
};

Async.prototype.invoke = function (fn, receiver, arg) {
    fn = this._withDomain(fn);
    this._normalQueue.push(fn, receiver, arg);
    this._queueTick();
};

Async.prototype.settlePromises = function(promise) {
    this._normalQueue._pushOne(promise);
    this._queueTick();
};

Async.prototype._drainQueue = function(queue) {
    while (queue.length() > 0) {
        var fn = queue.shift();
        if (typeof fn !== "function") {
            fn._settlePromises();
            continue;
        }
        var receiver = queue.shift();
        var arg = queue.shift();
        fn.call(receiver, arg);
    }
};

Async.prototype._drainQueues = function () {
    this._drainQueue(this._normalQueue);
    this._reset();
    this._drainQueue(this._lateQueue);
};

Async.prototype._queueTick = function () {
    if (!this._isTickUsed) {
        this._isTickUsed = true;
        this._schedule(this.drainQueues);
    }
};

Async.prototype._reset = function () {
    this._isTickUsed = false;
};

module.exports = new Async();
module.exports.firstLineError = firstLineError;

}).call(this,require('_process'))
},{"./queue.js":"/Users/sash/development/js/imglykit-rewrite/node_modules/bluebird/js/main/queue.js","./schedule.js":"/Users/sash/development/js/imglykit-rewrite/node_modules/bluebird/js/main/schedule.js","_process":"/Users/sash/development/js/imglykit-rewrite/node_modules/browserify/node_modules/process/browser.js"}],"/Users/sash/development/js/imglykit-rewrite/node_modules/bluebird/js/main/bluebird.js":[function(require,module,exports){
"use strict";
var old;
if (typeof Promise !== "undefined") old = Promise;
function noConflict() {
    try { if (Promise === bluebird) Promise = old; }
    catch (e) {}
    return bluebird;
}
var bluebird = require("./promise.js")();
bluebird.noConflict = noConflict;
module.exports = bluebird;

},{"./promise.js":"/Users/sash/development/js/imglykit-rewrite/node_modules/bluebird/js/main/promise.js"}],"/Users/sash/development/js/imglykit-rewrite/node_modules/bluebird/js/main/call_get.js":[function(require,module,exports){
"use strict";
var cr = Object.create;
if (cr) {
    var callerCache = cr(null);
    var getterCache = cr(null);
    callerCache[" size"] = getterCache[" size"] = 0;
}

module.exports = function(Promise) {
var util = require("./util.js");
var canEvaluate = util.canEvaluate;
var isIdentifier = util.isIdentifier;

function makeMethodCaller (methodName) {
    return new Function("obj", "                                             \n\
        'use strict'                                                         \n\
        var len = this.length;                                               \n\
        switch(len) {                                                        \n\
            case 1: return obj.methodName(this[0]);                          \n\
            case 2: return obj.methodName(this[0], this[1]);                 \n\
            case 3: return obj.methodName(this[0], this[1], this[2]);        \n\
            case 0: return obj.methodName();                                 \n\
            default: return obj.methodName.apply(obj, this);                 \n\
        }                                                                    \n\
        ".replace(/methodName/g, methodName));
}

function makeGetter (propertyName) {
    return new Function("obj", "                                             \n\
        'use strict';                                                        \n\
        return obj.propertyName;                                             \n\
        ".replace("propertyName", propertyName));
}

function getCompiled(name, compiler, cache) {
    var ret = cache[name];
    if (typeof ret !== "function") {
        if (!isIdentifier(name)) {
            return null;
        }
        ret = compiler(name);
        cache[name] = ret;
        cache[" size"]++;
        if (cache[" size"] > 512) {
            var keys = Object.keys(cache);
            for (var i = 0; i < 256; ++i) delete cache[keys[i]];
            cache[" size"] = keys.length - 256;
        }
    }
    return ret;
}

function getMethodCaller(name) {
    return getCompiled(name, makeMethodCaller, callerCache);
}

function getGetter(name) {
    return getCompiled(name, makeGetter, getterCache);
}

function caller(obj) {
    return obj[this.pop()].apply(obj, this);
}
Promise.prototype.call = function (methodName) {
    var $_len = arguments.length;var args = new Array($_len - 1); for(var $_i = 1; $_i < $_len; ++$_i) {args[$_i - 1] = arguments[$_i];}
    if (canEvaluate) {
        var maybeCaller = getMethodCaller(methodName);
        if (maybeCaller !== null) {
            return this._then(
                maybeCaller, undefined, undefined, args, undefined);
        }
    }
    args.push(methodName);
    return this._then(caller, undefined, undefined, args, undefined);
};

function namedGetter(obj) {
    return obj[this];
}
function indexedGetter(obj) {
    var index = +this;
    if (index < 0) index = Math.max(0, index + obj.length);
    return obj[index];
}
Promise.prototype.get = function (propertyName) {
    var isIndex = (typeof propertyName === "number");
    var getter;
    if (!isIndex) {
        if (canEvaluate) {
            var maybeGetter = getGetter(propertyName);
            getter = maybeGetter !== null ? maybeGetter : namedGetter;
        } else {
            getter = namedGetter;
        }
    } else {
        getter = indexedGetter;
    }
    return this._then(getter, undefined, undefined, propertyName, undefined);
};
};

},{"./util.js":"/Users/sash/development/js/imglykit-rewrite/node_modules/bluebird/js/main/util.js"}],"/Users/sash/development/js/imglykit-rewrite/node_modules/bluebird/js/main/cancel.js":[function(require,module,exports){
"use strict";
module.exports = function(Promise, INTERNAL) {
var errors = require("./errors.js");
var async = require("./async.js");
var CancellationError = errors.CancellationError;

Promise.prototype._cancel = function (reason) {
    if (!this.isCancellable()) return this;
    var parent;
    var promiseToReject = this;
    while ((parent = promiseToReject._cancellationParent) !== undefined &&
        parent.isCancellable()) {
        promiseToReject = parent;
    }
    this._unsetCancellable();
    var trace = errors.ensureErrorObject(reason);
    promiseToReject._attachExtraTrace(trace);
    promiseToReject._target()._rejectUnchecked(reason, trace);
};

Promise.prototype.cancel = function (reason) {
    if (!this.isCancellable()) return this;
    if (reason === undefined) reason = new CancellationError();
    async.invokeLater(this._cancel, this, reason);
    return this;
};

Promise.prototype.cancellable = function () {
    if (this._cancellable()) return this;
    this._setCancellable();
    this._cancellationParent = undefined;
    return this;
};

Promise.prototype.uncancellable = function () {
    var ret = new Promise(INTERNAL);
    ret._propagateFrom(this, 4);
    ret._follow(this);
    ret._unsetCancellable();
    return ret;
};

Promise.prototype.fork = function (didFulfill, didReject, didProgress) {
    var ret = this._then(didFulfill, didReject, didProgress,
                         undefined, undefined);

    ret._setCancellable();
    ret._cancellationParent = undefined;
    return ret;
};
};

},{"./async.js":"/Users/sash/development/js/imglykit-rewrite/node_modules/bluebird/js/main/async.js","./errors.js":"/Users/sash/development/js/imglykit-rewrite/node_modules/bluebird/js/main/errors.js"}],"/Users/sash/development/js/imglykit-rewrite/node_modules/bluebird/js/main/captured_trace.js":[function(require,module,exports){
(function (process){
"use strict";
module.exports = function() {
var async = require("./async.js");
var inherits = require("./util.js").inherits;
var bluebirdFramePattern = /[\\\/]bluebird[\\\/]js[\\\/](main|debug|zalgo)/;
var stackFramePattern = null;
var formatStack = null;

function CapturedTrace(parent) {
    this._parent = parent;
    var length = this._length = 1 + (parent === undefined ? 0 : parent._length);
    captureStackTrace(this, CapturedTrace);
    if (length > 32) this.uncycle();
}
inherits(CapturedTrace, Error);

CapturedTrace.prototype.uncycle = function() {
    var length = this._length;
    if (length < 2) return;
    var nodes = [];
    var stackToIndex = {};

    for (var i = 0, node = this; node !== undefined; ++i) {
        nodes.push(node);
        node = node._parent;
    }
    length = this._length = i;
    for (var i = length - 1; i >= 0; --i) {
        var stack = nodes[i].stack;
        if (stackToIndex[stack] === undefined) {
            stackToIndex[stack] = i;
        }
    }
    for (var i = 0; i < length; ++i) {
        var currentStack = nodes[i].stack;
        var index = stackToIndex[currentStack];
        if (index !== undefined && index !== i) {
            if (index > 0) {
                nodes[index - 1]._parent = undefined;
                nodes[index - 1]._length = 1;
            }
            nodes[i]._parent = undefined;
            nodes[i]._length = 1;
            var cycleEdgeNode = i > 0 ? nodes[i - 1] : this;

            if (index < length - 1) {
                cycleEdgeNode._parent = nodes[index + 1];
                cycleEdgeNode._parent.uncycle();
                cycleEdgeNode._length =
                    cycleEdgeNode._parent._length + 1;
            } else {
                cycleEdgeNode._parent = undefined;
                cycleEdgeNode._length = 1;
            }
            var currentChildLength = cycleEdgeNode._length + 1;
            for (var j = i - 2; j >= 0; --j) {
                nodes[j]._length = currentChildLength;
                currentChildLength++;
            }
            return;
        }
    }
};

CapturedTrace.prototype.parent = function() {
    return this._parent;
};

CapturedTrace.prototype.hasParent = function() {
    return this._parent !== undefined;
};

CapturedTrace.prototype.attachExtraTrace = function(error) {
    if (error.__stackCleaned__) return;
    this.uncycle();
    var trace = this;
    var stack = CapturedTrace.cleanStack(error, false);
    var headerLineCount = 1;
    var combinedTraces = 1;
    do {
        stack = trace.combine(stack);
        combinedTraces++;
    } while ((trace = trace.parent()) != null);

    stack = unProtectNewlines(stack);

    if (stack.length <= headerLineCount) {
        error.stack = "(No stack trace)";
    } else {
        error.stack = stack.join("\n");
    }
};

CapturedTrace.prototype.combine = function(current) {
    var prev = clean(this.stack.split("\n"), 0);
    var currentLastIndex = current.length - 1;
    var currentLastLine = current[currentLastIndex];
    var commonRootMeetPoint = -1;
    for (var i = prev.length - 1; i >= 0; --i) {
        if (prev[i] === currentLastLine) {
            commonRootMeetPoint = i;
            break;
        }
    }

    for (var i = commonRootMeetPoint; i >= 0; --i) {
        var line = prev[i];
        if (current[currentLastIndex] === line) {
            current.pop();
            currentLastIndex--;
        } else {
            break;
        }
    }

    if (current[current.length - 1] !== "From previous event:") {
        current.push("From previous event:");
    }
    return current.concat(prev);
};

function protectErrorMessageNewlines (stack) {
    for (var i = 0; i < stack.length; ++i) {
        var line = stack[i];
        if ("    (No stack trace)" === line || stackFramePattern.test(line)) {
            break;
        }
    }

    if (i <= 1) return 1;

    var errorMessageLines = [];
    for (var j = 0; j < i; ++j) {
        errorMessageLines.push(stack.shift());
    }
    stack.unshift(errorMessageLines.join("\u0002\u0000\u0001"));
    return i;
}

function unProtectNewlines(stack) {
    if (stack.length > 0) {
        stack[0] = stack[0].split("\u0002\u0000\u0001").join("\n");
        if (stack[stack.length - 1] === "From previous event:") {
            stack.pop();
        }
    }
    return stack;
}

function clean(stack, initialIndex) {
    var ret = stack.slice(0, initialIndex);
    for (var i = initialIndex; i < stack.length; ++i) {
        var line = stack[i];
        var isTraceLine = stackFramePattern.test(line) ||
            "    (No stack trace)" === line;
        var isInternalFrame = isTraceLine && shouldIgnore(line);
        if (isTraceLine && !isInternalFrame) {
            ret.push(line);
        }
    }
    return ret;
}

CapturedTrace.cleanStack = function(error, shouldUnProtectNewlines) {
    if (error.__stackCleaned__) return;
    error.__stackCleaned__ = true;
    var stack = error.stack;
    stack = typeof stack === "string"
        ? stack.split("\n")
        : [error.toString(), "    (No stack trace)"];
    var initialIndex = protectErrorMessageNewlines(stack);
    stack = clean(stack, initialIndex);
    if (shouldUnProtectNewlines) stack = unProtectNewlines(stack);
    error.stack = stack.join("\n");
    return stack;
};

CapturedTrace.formatAndLogError = function(error, title) {
    if (typeof console === "object") {
        var message;
        if (typeof error === "object" || typeof error === "function") {
            var stack = error.stack;
            message = title + formatStack(stack, error);
        } else {
            message = title + String(error);
        }
        if (typeof console.warn === "function" ||
            typeof console.warn === "object") {
            console.warn(message);
        } else if (typeof console.log === "function" ||
            typeof console.log === "object") {
            console.log(message);
        }
    }
};

CapturedTrace.unhandledRejection = function (reason) {
    CapturedTrace.formatAndLogError(reason, "^--- With additional stack trace: ");
};

CapturedTrace.isSupported = function () {
    return typeof captureStackTrace === "function";
};

CapturedTrace.fireRejectionEvent =
function(name, localHandler, reason, promise) {
    var localEventFired = false;
    try {
        if (typeof localHandler === "function") {
            localEventFired = true;
            if (name === "rejectionHandled") {
                localHandler(promise);
            } else {
                localHandler(reason, promise);
            }
        }
    } catch (e) {
        async.throwLater(e);
    }

    var globalEventFired = false;
    try {
        globalEventFired = fireGlobalEvent(name, reason, promise);
    } catch (e) {
        globalEventFired = true;
        async.throwLater(e);
    }

    if (!globalEventFired && !localEventFired &&
        name === "unhandledRejection") {
        CapturedTrace.formatAndLogError(reason, "Possibly unhandled ");
    }
};

function formatNonError(obj) {
    var str;
    if (typeof obj === "function") {
        str = "[function " +
            (obj.name || "anonymous") +
            "]";
    } else {
        str = obj.toString();
        var ruselessToString = /\[object [a-zA-Z0-9$_]+\]/;
        if (ruselessToString.test(str)) {
            try {
                var newStr = JSON.stringify(obj);
                str = newStr;
            }
            catch(e) {

            }
        }
        if (str.length === 0) {
            str = "(empty array)";
        }
    }
    return ("(<" + snip(str) + ">, no stack trace)");
}

function snip(str) {
    var maxChars = 41;
    if (str.length < maxChars) {
        return str;
    }
    return str.substr(0, maxChars - 3) + "...";
}

var shouldIgnore = function() { return false; };
var parseLineInfoRegex = /[\/<\(]([^:\/]+):(\d+):(?:\d+)\)?\s*$/;
function parseLineInfo(line) {
    var matches = line.match(parseLineInfoRegex);
    if (matches) {
        return {
            fileName: matches[1],
            line: parseInt(matches[2], 10)
        };
    }
}
CapturedTrace.setBounds = function(firstLineError, lastLineError) {
    if (!CapturedTrace.isSupported()) return;
    var firstStackLines = firstLineError.stack.split("\n");
    var lastStackLines = lastLineError.stack.split("\n");
    var firstIndex = -1;
    var lastIndex = -1;
    var firstFileName;
    var lastFileName;
    for (var i = 0; i < firstStackLines.length; ++i) {
        var result = parseLineInfo(firstStackLines[i]);
        if (result) {
            firstFileName = result.fileName;
            firstIndex = result.line;
            break;
        }
    }
    for (var i = 0; i < lastStackLines.length; ++i) {
        var result = parseLineInfo(lastStackLines[i]);
        if (result) {
            lastFileName = result.fileName;
            lastIndex = result.line;
            break;
        }
    }
    if (firstIndex < 0 || lastIndex < 0 || !firstFileName || !lastFileName ||
        firstFileName !== lastFileName || firstIndex >= lastIndex) {
        return;
    }

    shouldIgnore = function(line) {
        if (bluebirdFramePattern.test(line)) return true;
        var info = parseLineInfo(line);
        if (info) {
            if (info.fileName === firstFileName &&
                (firstIndex <= info.line && info.line <= lastIndex)) {
                return true;
            }
        }
        return false;
    };
};

var captureStackTrace = (function stackDetection() {
    var v8stackFramePattern = /^\s*at\s*/;
    var v8stackFormatter = function(stack, error) {
        if (typeof stack === "string") return stack;

        if (error.name !== undefined &&
            error.message !== undefined) {
            return error.name + ". " + error.message;
        }
        return formatNonError(error);
    };

    if (typeof Error.stackTraceLimit === "number" &&
        typeof Error.captureStackTrace === "function") {
        stackFramePattern = v8stackFramePattern;
        formatStack = v8stackFormatter;
        var captureStackTrace = Error.captureStackTrace;

        shouldIgnore = function(line) {
            return bluebirdFramePattern.test(line);
        };
        return function(receiver, ignoreUntil) {
            captureStackTrace(receiver, ignoreUntil);
        };
    }
    var err = new Error();

    if (typeof err.stack === "string" &&
        typeof "".startsWith === "function" &&
        (err.stack.startsWith("stackDetection@")) &&
        stackDetection.name === "stackDetection") {

        stackFramePattern = /@/;
        var rline = /[@\n]/;

        formatStack = function(stack, error) {
            if (typeof stack === "string") {
                return (error.name + ". " + error.message + "\n" + stack);
            }

            if (error.name !== undefined &&
                error.message !== undefined) {
                return error.name + ". " + error.message;
            }
            return formatNonError(error);
        };

        return function captureStackTrace(o) {
            var stack = new Error().stack;
            var split = stack.split(rline);
            var len = split.length;
            var ret = "";
            for (var i = 0; i < len; i += 2) {
                ret += split[i];
                ret += "@";
                ret += split[i + 1];
                ret += "\n";
            }
            o.stack = ret;
        };
    }

    var hasStackAfterThrow;
    try { throw new Error(); }
    catch(e) {
        hasStackAfterThrow = ("stack" in e);
    }
    if (!("stack" in err) && hasStackAfterThrow) {
        stackFramePattern = v8stackFramePattern;
        formatStack = v8stackFormatter;
        return function captureStackTrace(o) {
            try { throw new Error(); }
            catch(e) { o.stack = e.stack; }
        };
    }

    formatStack = function(stack, error) {
        if (typeof stack === "string") return stack;

        if ((typeof error === "object" ||
            typeof error === "function") &&
            error.name !== undefined &&
            error.message !== undefined) {
            return error.name + ". " + error.message;
        }
        return formatNonError(error);
    };

    return null;

})();

var fireGlobalEvent = (function() {
    if (typeof process !== "undefined" &&
        typeof process.version === "string" &&
        typeof window === "undefined") {
        return function(name, reason, promise) {
            if (name === "rejectionHandled") {
                return process.emit(name, promise);
            } else {
                return process.emit(name, reason, promise);
            }
        };
    } else {
        var toWindowMethodNameMap = {};
        toWindowMethodNameMap["unhandledRejection"] = ("on" +
            "unhandledRejection").toLowerCase();
        toWindowMethodNameMap["rejectionHandled"] = ("on" +
            "rejectionHandled").toLowerCase();

        return function(name, reason, promise) {
            var methodName = toWindowMethodNameMap[name];
            var method = window[methodName];
            if (!method) return false;
            if (name === "rejectionHandled") {
                method.call(window, promise);
            } else {
                method.call(window, reason, promise);
            }
            return true;
        };
    }
})();

return CapturedTrace;
};

}).call(this,require('_process'))
},{"./async.js":"/Users/sash/development/js/imglykit-rewrite/node_modules/bluebird/js/main/async.js","./util.js":"/Users/sash/development/js/imglykit-rewrite/node_modules/bluebird/js/main/util.js","_process":"/Users/sash/development/js/imglykit-rewrite/node_modules/browserify/node_modules/process/browser.js"}],"/Users/sash/development/js/imglykit-rewrite/node_modules/bluebird/js/main/catch_filter.js":[function(require,module,exports){
"use strict";
module.exports = function(NEXT_FILTER) {
var util = require("./util.js");
var errors = require("./errors.js");
var tryCatch1 = util.tryCatch1;
var errorObj = util.errorObj;
var keys = require("./es5.js").keys;
var TypeError = errors.TypeError;

function CatchFilter(instances, callback, promise) {
    this._instances = instances;
    this._callback = callback;
    this._promise = promise;
}

function safePredicate(predicate, e) {
    var safeObject = {};
    var retfilter = tryCatch1(predicate, safeObject, e);

    if (retfilter === errorObj) return retfilter;

    var safeKeys = keys(safeObject);
    if (safeKeys.length) {
        errorObj.e = new TypeError("Catch filter must inherit from Error or be a simple predicate function\u000a\u000a    See http://goo.gl/o84o68\u000a");
        return errorObj;
    }
    return retfilter;
}

CatchFilter.prototype.doFilter = function (e) {
    var cb = this._callback;
    var promise = this._promise;
    var boundTo = promise._boundTo;
    for (var i = 0, len = this._instances.length; i < len; ++i) {
        var item = this._instances[i];
        var itemIsErrorType = item === Error ||
            (item != null && item.prototype instanceof Error);

        if (itemIsErrorType && e instanceof item) {
            var ret = tryCatch1(cb, boundTo, e);
            if (ret === errorObj) {
                NEXT_FILTER.e = ret.e;
                return NEXT_FILTER;
            }
            return ret;
        } else if (typeof item === "function" && !itemIsErrorType) {
            var shouldHandle = safePredicate(item, e);
            if (shouldHandle === errorObj) {
                var trace = errors.canAttachTrace(errorObj.e)
                    ? errorObj.e
                    : new Error(util.toString(errorObj.e));
                this._promise._attachExtraTrace(trace);
                e = errorObj.e;
                break;
            } else if (shouldHandle) {
                var ret = tryCatch1(cb, boundTo, e);
                if (ret === errorObj) {
                    NEXT_FILTER.e = ret.e;
                    return NEXT_FILTER;
                }
                return ret;
            }
        }
    }
    NEXT_FILTER.e = e;
    return NEXT_FILTER;
};

return CatchFilter;
};

},{"./errors.js":"/Users/sash/development/js/imglykit-rewrite/node_modules/bluebird/js/main/errors.js","./es5.js":"/Users/sash/development/js/imglykit-rewrite/node_modules/bluebird/js/main/es5.js","./util.js":"/Users/sash/development/js/imglykit-rewrite/node_modules/bluebird/js/main/util.js"}],"/Users/sash/development/js/imglykit-rewrite/node_modules/bluebird/js/main/direct_resolve.js":[function(require,module,exports){
"use strict";
var util = require("./util.js");
var isPrimitive = util.isPrimitive;
var wrapsPrimitiveReceiver = util.wrapsPrimitiveReceiver;

module.exports = function(Promise) {
var returner = function () {
    return this;
};
var thrower = function () {
    throw this;
};

var wrapper = function (value, action) {
    if (action === 1) {
        return function () {
            throw value;
        };
    } else if (action === 2) {
        return function () {
            return value;
        };
    }
};


Promise.prototype["return"] =
Promise.prototype.thenReturn = function (value) {
    if (wrapsPrimitiveReceiver && isPrimitive(value)) {
        return this._then(
            wrapper(value, 2),
            undefined,
            undefined,
            undefined,
            undefined
       );
    }
    return this._then(returner, undefined, undefined, value, undefined);
};

Promise.prototype["throw"] =
Promise.prototype.thenThrow = function (reason) {
    if (wrapsPrimitiveReceiver && isPrimitive(reason)) {
        return this._then(
            wrapper(reason, 1),
            undefined,
            undefined,
            undefined,
            undefined
       );
    }
    return this._then(thrower, undefined, undefined, reason, undefined);
};
};

},{"./util.js":"/Users/sash/development/js/imglykit-rewrite/node_modules/bluebird/js/main/util.js"}],"/Users/sash/development/js/imglykit-rewrite/node_modules/bluebird/js/main/each.js":[function(require,module,exports){
"use strict";
module.exports = function(Promise, INTERNAL) {
var PromiseReduce = Promise.reduce;

Promise.prototype.each = function (fn) {
    return PromiseReduce(this, fn, null, INTERNAL);
};

Promise.each = function (promises, fn) {
    return PromiseReduce(promises, fn, null, INTERNAL);
};
};

},{}],"/Users/sash/development/js/imglykit-rewrite/node_modules/bluebird/js/main/errors.js":[function(require,module,exports){
"use strict";
var Objectfreeze = require("./es5.js").freeze;
var propertyIsWritable = require("./es5.js").propertyIsWritable;
var util = require("./util.js");
var inherits = util.inherits;
var notEnumerableProp = util.notEnumerableProp;

function markAsOriginatingFromRejection(e) {
    try {
        notEnumerableProp(e, "isOperational", true);
    }
    catch(ignore) {}
}

function originatesFromRejection(e) {
    if (e == null) return false;
    return ((e instanceof OperationalError) ||
        e["isOperational"] === true);
}

function isError(obj) {
    return obj instanceof Error;
}

function canAttachTrace(obj) {
    return isError(obj) && propertyIsWritable(obj, "stack");
}

function subError(nameProperty, defaultMessage) {
    function SubError(message) {
        if (!(this instanceof SubError)) return new SubError(message);
        notEnumerableProp(this, "message",
            typeof message === "string" ? message : defaultMessage);
        notEnumerableProp(this, "name", nameProperty);
        if (Error.captureStackTrace) {
            Error.captureStackTrace(this, this.constructor);
        }
    }
    inherits(SubError, Error);
    return SubError;
}

var _TypeError, _RangeError;
var CancellationError = subError("CancellationError", "cancellation error");
var TimeoutError = subError("TimeoutError", "timeout error");
var AggregateError = subError("AggregateError", "aggregate error");
try {
    _TypeError = TypeError;
    _RangeError = RangeError;
} catch(e) {
    _TypeError = subError("TypeError", "type error");
    _RangeError = subError("RangeError", "range error");
}

var methods = ("join pop push shift unshift slice filter forEach some " +
    "every map indexOf lastIndexOf reduce reduceRight sort reverse").split(" ");

for (var i = 0; i < methods.length; ++i) {
    if (typeof Array.prototype[methods[i]] === "function") {
        AggregateError.prototype[methods[i]] = Array.prototype[methods[i]];
    }
}

AggregateError.prototype.length = 0;
AggregateError.prototype["isOperational"] = true;
var level = 0;
AggregateError.prototype.toString = function() {
    var indent = Array(level * 4 + 1).join(" ");
    var ret = "\n" + indent + "AggregateError of:" + "\n";
    level++;
    indent = Array(level * 4 + 1).join(" ");
    for (var i = 0; i < this.length; ++i) {
        var str = this[i] === this ? "[Circular AggregateError]" : this[i] + "";
        var lines = str.split("\n");
        for (var j = 0; j < lines.length; ++j) {
            lines[j] = indent + lines[j];
        }
        str = lines.join("\n");
        ret += str + "\n";
    }
    level--;
    return ret;
};

function OperationalError(message) {
    notEnumerableProp(this, "name", "OperationalError");
    notEnumerableProp(this, "message", message);
    this.cause = message;
    this["isOperational"] = true;

    if (message instanceof Error) {
        notEnumerableProp(this, "message", message.message);
        notEnumerableProp(this, "stack", message.stack);
    } else if (Error.captureStackTrace) {
        Error.captureStackTrace(this, this.constructor);
    }

}
inherits(OperationalError, Error);

var key = "__BluebirdErrorTypes__";
var errorTypes = Error[key];
if (!errorTypes) {
    errorTypes = Objectfreeze({
        CancellationError: CancellationError,
        TimeoutError: TimeoutError,
        OperationalError: OperationalError,
        RejectionError: OperationalError,
        AggregateError: AggregateError
    });
    notEnumerableProp(Error, key, errorTypes);
}

var ensureErrorObject = (function() {
    if (!("stack" in new Error())) {
        return function(value) {
            if (canAttachTrace(value)) return value;
            try {throw new Error(util.toString(value));}
            catch(err) {return err;}
        };
    } else {
        return function(value) {
            if (canAttachTrace(value)) return value;
            return new Error(util.toString(value));
        };
    }
})();

module.exports = {
    Error: Error,
    TypeError: _TypeError,
    RangeError: _RangeError,
    CancellationError: errorTypes.CancellationError,
    OperationalError: errorTypes.OperationalError,
    TimeoutError: errorTypes.TimeoutError,
    AggregateError: errorTypes.AggregateError,
    originatesFromRejection: originatesFromRejection,
    markAsOriginatingFromRejection: markAsOriginatingFromRejection,
    canAttachTrace: canAttachTrace,
    ensureErrorObject: ensureErrorObject
};

},{"./es5.js":"/Users/sash/development/js/imglykit-rewrite/node_modules/bluebird/js/main/es5.js","./util.js":"/Users/sash/development/js/imglykit-rewrite/node_modules/bluebird/js/main/util.js"}],"/Users/sash/development/js/imglykit-rewrite/node_modules/bluebird/js/main/errors_api_rejection.js":[function(require,module,exports){
"use strict";
module.exports = function(Promise) {
var TypeError = require("./errors.js").TypeError;

function apiRejection(msg) {
    var error = new TypeError(msg);
    var ret = Promise.reject(error);
    var parent = ret._peekContext();
    if (parent != null) {
        parent.attachExtraTrace(error);
    }
    return ret;
}

return apiRejection;
};

},{"./errors.js":"/Users/sash/development/js/imglykit-rewrite/node_modules/bluebird/js/main/errors.js"}],"/Users/sash/development/js/imglykit-rewrite/node_modules/bluebird/js/main/es5.js":[function(require,module,exports){
var isES5 = (function(){
    "use strict";
    return this === undefined;
})();

if (isES5) {
    module.exports = {
        freeze: Object.freeze,
        defineProperty: Object.defineProperty,
        keys: Object.keys,
        getPrototypeOf: Object.getPrototypeOf,
        isArray: Array.isArray,
        isES5: isES5,
        propertyIsWritable: function(obj, prop) {
            var descriptor = Object.getOwnPropertyDescriptor(obj, prop);
            return !!(!descriptor || descriptor.writable || descriptor.set);
        }
    };
} else {
    var has = {}.hasOwnProperty;
    var str = {}.toString;
    var proto = {}.constructor.prototype;

    var ObjectKeys = function (o) {
        var ret = [];
        for (var key in o) {
            if (has.call(o, key)) {
                ret.push(key);
            }
        }
        return ret;
    };

    var ObjectDefineProperty = function (o, key, desc) {
        o[key] = desc.value;
        return o;
    };

    var ObjectFreeze = function (obj) {
        return obj;
    };

    var ObjectGetPrototypeOf = function (obj) {
        try {
            return Object(obj).constructor.prototype;
        }
        catch (e) {
            return proto;
        }
    };

    var ArrayIsArray = function (obj) {
        try {
            return str.call(obj) === "[object Array]";
        }
        catch(e) {
            return false;
        }
    };

    module.exports = {
        isArray: ArrayIsArray,
        keys: ObjectKeys,
        defineProperty: ObjectDefineProperty,
        freeze: ObjectFreeze,
        getPrototypeOf: ObjectGetPrototypeOf,
        isES5: isES5,
        propertyIsWritable: function() {
            return true;
        }
    };
}

},{}],"/Users/sash/development/js/imglykit-rewrite/node_modules/bluebird/js/main/filter.js":[function(require,module,exports){
"use strict";
module.exports = function(Promise, INTERNAL) {
var PromiseMap = Promise.map;

Promise.prototype.filter = function (fn, options) {
    return PromiseMap(this, fn, options, INTERNAL);
};

Promise.filter = function (promises, fn, options) {
    return PromiseMap(promises, fn, options, INTERNAL);
};
};

},{}],"/Users/sash/development/js/imglykit-rewrite/node_modules/bluebird/js/main/finally.js":[function(require,module,exports){
"use strict";
module.exports = function(Promise, NEXT_FILTER, tryConvertToPromise) {
var util = require("./util.js");
var wrapsPrimitiveReceiver = util.wrapsPrimitiveReceiver;
var isPrimitive = util.isPrimitive;
var thrower = util.thrower;

function returnThis() {
    return this;
}
function throwThis() {
    throw this;
}
function return$(r) {
    return function() {
        return r;
    };
}
function throw$(r) {
    return function() {
        throw r;
    };
}
function promisedFinally(ret, reasonOrValue, isFulfilled) {
    var then;
    if (wrapsPrimitiveReceiver && isPrimitive(reasonOrValue)) {
        then = isFulfilled ? return$(reasonOrValue) : throw$(reasonOrValue);
    } else {
        then = isFulfilled ? returnThis : throwThis;
    }
    return ret._then(then, thrower, undefined, reasonOrValue, undefined);
}

function finallyHandler(reasonOrValue) {
    var promise = this.promise;
    var handler = this.handler;

    var ret = promise._isBound()
                    ? handler.call(promise._boundTo)
                    : handler();

    if (ret !== undefined) {
        var maybePromise = tryConvertToPromise(ret, undefined);
        if (maybePromise instanceof Promise) {
            maybePromise = maybePromise._target();
            return promisedFinally(maybePromise, reasonOrValue,
                                    promise.isFulfilled());
        }
    }

    if (promise.isRejected()) {
        NEXT_FILTER.e = reasonOrValue;
        return NEXT_FILTER;
    } else {
        return reasonOrValue;
    }
}

function tapHandler(value) {
    var promise = this.promise;
    var handler = this.handler;

    var ret = promise._isBound()
                    ? handler.call(promise._boundTo, value)
                    : handler(value);

    if (ret !== undefined) {
        var maybePromise = tryConvertToPromise(ret, undefined);
        if (maybePromise instanceof Promise) {
            maybePromise = maybePromise._target();
            return promisedFinally(maybePromise, value, true);
        }
    }
    return value;
}

Promise.prototype._passThroughHandler = function (handler, isFinally) {
    if (typeof handler !== "function") return this.then();

    var promiseAndHandler = {
        promise: this,
        handler: handler
    };

    return this._then(
            isFinally ? finallyHandler : tapHandler,
            isFinally ? finallyHandler : undefined, undefined,
            promiseAndHandler, undefined);
};

Promise.prototype.lastly =
Promise.prototype["finally"] = function (handler) {
    return this._passThroughHandler(handler, true);
};

Promise.prototype.tap = function (handler) {
    return this._passThroughHandler(handler, false);
};
};

},{"./util.js":"/Users/sash/development/js/imglykit-rewrite/node_modules/bluebird/js/main/util.js"}],"/Users/sash/development/js/imglykit-rewrite/node_modules/bluebird/js/main/generators.js":[function(require,module,exports){
"use strict";
module.exports = function(Promise,
                          apiRejection,
                          INTERNAL,
                          tryConvertToPromise) {
var errors = require("./errors.js");
var TypeError = errors.TypeError;
var deprecated = require("./util.js").deprecated;
var util = require("./util.js");
var errorObj = util.errorObj;
var tryCatch1 = util.tryCatch1;
var yieldHandlers = [];

function promiseFromYieldHandler(value, yieldHandlers, traceParent) {
    var _errorObj = errorObj;
    var _Promise = Promise;
    var len = yieldHandlers.length;
    for (var i = 0; i < len; ++i) {
        traceParent._pushContext();
        var result = tryCatch1(yieldHandlers[i], undefined, value);
        traceParent._popContext();
        if (result === _errorObj) {
            return _Promise.reject(_errorObj.e);
        }
        var maybePromise = tryConvertToPromise(result, traceParent);
        if (maybePromise instanceof _Promise) return maybePromise;
    }
    return null;
}

function PromiseSpawn(generatorFunction, receiver, yieldHandler, stack) {
    var promise = this._promise = new Promise(INTERNAL);
    promise._captureStackTrace();
    this._stack = stack;
    this._generatorFunction = generatorFunction;
    this._receiver = receiver;
    this._generator = undefined;
    this._yieldHandlers = typeof yieldHandler === "function"
        ? [yieldHandler].concat(yieldHandlers)
        : yieldHandlers;
}

PromiseSpawn.prototype.promise = function () {
    return this._promise;
};

PromiseSpawn.prototype._run = function () {
    this._generator = this._generatorFunction.call(this._receiver);
    this._receiver =
        this._generatorFunction = undefined;
    this._next(undefined);
};

PromiseSpawn.prototype._continue = function (result) {
    if (result === errorObj) {
        this._generator = undefined;
        var trace = errors.canAttachTrace(result.e)
            ? result.e : new Error(util.toString(result.e));
        this._promise._attachExtraTrace(trace);
        this._promise._reject(result.e, trace);
        return;
    }

    var value = result.value;
    if (result.done === true) {
        this._generator = undefined;
        if (!this._promise._tryFollow(value)) {
            this._promise._fulfill(value);
        }
    } else {
        var maybePromise = tryConvertToPromise(value, this._promise);
        if (!(maybePromise instanceof Promise)) {
            maybePromise =
                promiseFromYieldHandler(maybePromise,
                                        this._yieldHandlers,
                                        this._promise);
            if (maybePromise === null) {
                this._throw(
                    new TypeError(
                        "A value %s was yielded that could not be treated as a promise\u000a\u000a    See http://goo.gl/4Y4pDk\u000a\u000a".replace("%s", value) +
                        "From coroutine:\u000a" +
                        this._stack.split("\n").slice(1, -7).join("\n")
                    )
                );
                return;
            }
        }
        maybePromise._then(
            this._next,
            this._throw,
            undefined,
            this,
            null
       );
    }
};

PromiseSpawn.prototype._throw = function (reason) {
    if (errors.canAttachTrace(reason))
        this._promise._attachExtraTrace(reason);
    this._promise._pushContext();
    var result = tryCatch1(this._generator["throw"], this._generator, reason);
    this._promise._popContext();
    this._continue(result);
};

PromiseSpawn.prototype._next = function (value) {
    this._promise._pushContext();
    var result = tryCatch1(this._generator.next, this._generator, value);
    this._promise._popContext();
    this._continue(result);
};

Promise.coroutine = function (generatorFunction, options) {
    if (typeof generatorFunction !== "function") {
        throw new TypeError("generatorFunction must be a function\u000a\u000a    See http://goo.gl/6Vqhm0\u000a");
    }
    var yieldHandler = Object(options).yieldHandler;
    var PromiseSpawn$ = PromiseSpawn;
    var stack = new Error().stack;
    return function () {
        var generator = generatorFunction.apply(this, arguments);
        var spawn = new PromiseSpawn$(undefined, undefined, yieldHandler,
                                      stack);
        spawn._generator = generator;
        spawn._next(undefined);
        return spawn.promise();
    };
};

Promise.coroutine.addYieldHandler = function(fn) {
    if (typeof fn !== "function") throw new TypeError("fn must be a function\u000a\u000a    See http://goo.gl/916lJJ\u000a");
    yieldHandlers.push(fn);
};

Promise.spawn = function (generatorFunction) {
    deprecated("Promise.spawn is deprecated. Use Promise.coroutine instead.");
    if (typeof generatorFunction !== "function") {
        return apiRejection("generatorFunction must be a function\u000a\u000a    See http://goo.gl/6Vqhm0\u000a");
    }
    var spawn = new PromiseSpawn(generatorFunction, this);
    var ret = spawn.promise();
    spawn._run(Promise.spawn);
    return ret;
};
};

},{"./errors.js":"/Users/sash/development/js/imglykit-rewrite/node_modules/bluebird/js/main/errors.js","./util.js":"/Users/sash/development/js/imglykit-rewrite/node_modules/bluebird/js/main/util.js"}],"/Users/sash/development/js/imglykit-rewrite/node_modules/bluebird/js/main/join.js":[function(require,module,exports){
"use strict";
module.exports =
function(Promise, PromiseArray, tryConvertToPromise, INTERNAL) {
var util = require("./util.js");
var canEvaluate = util.canEvaluate;
var tryCatch1 = util.tryCatch1;
var errorObj = util.errorObj;
var errors = require("./errors.js");

if (canEvaluate) {
    var thenCallback = function(i) {
        return new Function("value", "holder", "                             \n\
            'use strict';                                                    \n\
            holder.pIndex = value;                                           \n\
            holder.checkFulfillment(this);                                   \n\
            ".replace(/Index/g, i));
    };

    var caller = function(count) {
        var values = [];
        for (var i = 1; i <= count; ++i) values.push("holder.p" + i);
        return new Function("holder", "                                      \n\
            'use strict';                                                    \n\
            var callback = holder.fn;                                        \n\
            return callback(values);                                         \n\
            ".replace(/values/g, values.join(", ")));
    };
    var thenCallbacks = [];
    var callers = [undefined];
    for (var i = 1; i <= 5; ++i) {
        thenCallbacks.push(thenCallback(i));
        callers.push(caller(i));
    }

    var Holder = function(total, fn) {
        this.p1 = this.p2 = this.p3 = this.p4 = this.p5 = null;
        this.fn = fn;
        this.total = total;
        this.now = 0;
    };

    Holder.prototype.callers = callers;
    Holder.prototype.checkFulfillment = function(promise) {
        var now = this.now;
        now++;
        var total = this.total;
        if (now >= total) {
            var handler = this.callers[total];
            promise._pushContext();
            var ret = tryCatch1(handler, undefined, this);
            promise._popContext();
            if (ret === errorObj) {
                var reason = ret.e;
                var trace = errors.ensureErrorObject(reason);
                promise._attachExtraTrace(trace);
                promise._rejectUnchecked(reason,
                    trace === reason ? undefined : trace);
            } else if (!promise._tryFollow(ret)) {
                promise._fulfillUnchecked(ret);
            }
        } else {
            this.now = now;
        }
    };
}

function reject(reason) {
    this._reject(reason);
}

Promise.join = function () {
    var last = arguments.length - 1;
    var fn;
    if (last > 0 && typeof arguments[last] === "function") {
        fn = arguments[last];
        if (last < 6 && canEvaluate) {
            var ret = new Promise(INTERNAL);
            ret._captureStackTrace();
            var holder = new Holder(last, fn);
            var callbacks = thenCallbacks;
            for (var i = 0; i < last; ++i) {
                var maybePromise = tryConvertToPromise(arguments[i], undefined);
                if (maybePromise instanceof Promise) {
                    maybePromise = maybePromise._target();
                    if (maybePromise._isPending()) {
                        maybePromise._then(callbacks[i], reject,
                                           undefined, ret, holder);
                    } else if (maybePromise._isFulfilled()) {
                        callbacks[i].call(ret,
                                          maybePromise._value(), holder);
                    } else {
                        ret._reject(maybePromise._reason());
                        maybePromise._unsetRejectionIsUnhandled();
                    }
                } else {
                    callbacks[i].call(ret, maybePromise, holder);
                }
            }
            return ret;
        }
    }
    var $_len = arguments.length;var args = new Array($_len); for(var $_i = 0; $_i < $_len; ++$_i) {args[$_i] = arguments[$_i];}
    var ret = new PromiseArray(args).promise();
    return fn !== undefined ? ret.spread(fn) : ret;
};

};

},{"./errors.js":"/Users/sash/development/js/imglykit-rewrite/node_modules/bluebird/js/main/errors.js","./util.js":"/Users/sash/development/js/imglykit-rewrite/node_modules/bluebird/js/main/util.js"}],"/Users/sash/development/js/imglykit-rewrite/node_modules/bluebird/js/main/map.js":[function(require,module,exports){
"use strict";
module.exports = function(Promise,
                          PromiseArray,
                          apiRejection,
                          tryConvertToPromise,
                          INTERNAL) {
var util = require("./util.js");
var tryCatch3 = util.tryCatch3;
var errorObj = util.errorObj;
var PENDING = {};
var EMPTY_ARRAY = [];

function MappingPromiseArray(promises, fn, limit, _filter) {
    this.constructor$(promises);
    this._promise._setIsSpreadable();
    this._promise._captureStackTrace();
    this._callback = fn;
    this._preservedValues = _filter === INTERNAL
        ? new Array(this.length())
        : null;
    this._limit = limit;
    this._inFlight = 0;
    this._queue = limit >= 1 ? [] : EMPTY_ARRAY;
    this._init$(undefined, -2);
}
util.inherits(MappingPromiseArray, PromiseArray);

MappingPromiseArray.prototype._init = function () {};

MappingPromiseArray.prototype._promiseFulfilled = function (value, index) {
    var values = this._values;
    var length = this.length();
    var preservedValues = this._preservedValues;
    var limit = this._limit;
    if (values[index] === PENDING) {
        values[index] = value;
        if (limit >= 1) {
            this._inFlight--;
            this._drainQueue();
            if (this._isResolved()) return;
        }
    } else {
        if (limit >= 1 && this._inFlight >= limit) {
            values[index] = value;
            this._queue.push(index);
            return;
        }
        if (preservedValues !== null) preservedValues[index] = value;

        var callback = this._callback;
        var receiver = this._promise._boundTo;
        this._promise._pushContext();
        var ret = tryCatch3(callback, receiver, value, index, length);
        this._promise._popContext();
        if (ret === errorObj) return this._reject(ret.e);

        var maybePromise = tryConvertToPromise(ret, this._promise);
        if (maybePromise instanceof Promise) {
            maybePromise = maybePromise._target();
            if (maybePromise._isPending()) {
                if (limit >= 1) this._inFlight++;
                values[index] = PENDING;
                return maybePromise._proxyPromiseArray(this, index);
            } else if (maybePromise._isFulfilled()) {
                ret = maybePromise._value();
            } else {
                maybePromise._unsetRejectionIsUnhandled();
                return this._reject(maybePromise._reason());
            }
        }
        values[index] = ret;
    }
    var totalResolved = ++this._totalResolved;
    if (totalResolved >= length) {
        if (preservedValues !== null) {
            this._filter(values, preservedValues);
        } else {
            this._resolve(values);
        }

    }
};

MappingPromiseArray.prototype._drainQueue = function () {
    var queue = this._queue;
    var limit = this._limit;
    var values = this._values;
    while (queue.length > 0 && this._inFlight < limit) {
        if (this._isResolved()) return;
        var index = queue.pop();
        this._promiseFulfilled(values[index], index);
    }
};

MappingPromiseArray.prototype._filter = function (booleans, values) {
    var len = values.length;
    var ret = new Array(len);
    var j = 0;
    for (var i = 0; i < len; ++i) {
        if (booleans[i]) ret[j++] = values[i];
    }
    ret.length = j;
    this._resolve(ret);
};

MappingPromiseArray.prototype.preservedValues = function () {
    return this._preservedValues;
};

function map(promises, fn, options, _filter) {
    var limit = typeof options === "object" && options !== null
        ? options.concurrency
        : 0;
    limit = typeof limit === "number" &&
        isFinite(limit) && limit >= 1 ? limit : 0;
    return new MappingPromiseArray(promises, fn, limit, _filter);
}

Promise.prototype.map = function (fn, options) {
    if (typeof fn !== "function") return apiRejection("fn must be a function\u000a\u000a    See http://goo.gl/916lJJ\u000a");

    return map(this, fn, options, null).promise();
};

Promise.map = function (promises, fn, options, _filter) {
    if (typeof fn !== "function") return apiRejection("fn must be a function\u000a\u000a    See http://goo.gl/916lJJ\u000a");
    return map(promises, fn, options, _filter).promise();
};


};

},{"./util.js":"/Users/sash/development/js/imglykit-rewrite/node_modules/bluebird/js/main/util.js"}],"/Users/sash/development/js/imglykit-rewrite/node_modules/bluebird/js/main/nodeify.js":[function(require,module,exports){
"use strict";
module.exports = function(Promise) {
var util = require("./util.js");
var async = require("./async.js");
var tryCatch2 = util.tryCatch2;
var tryCatch1 = util.tryCatch1;
var errorObj = util.errorObj;

function spreadAdapter(val, nodeback) {
    var promise = this;
    if (!util.isArray(val)) return successAdapter.call(promise, val, nodeback);
    var ret = util.tryCatchApply(nodeback,
                                 [null].concat(val), promise._boundTo);
    if (ret === errorObj) {
        async.throwLater(ret.e);
    }
}

function successAdapter(val, nodeback) {
    var promise = this;
    var receiver = promise._boundTo;
    var ret = val === undefined
        ? tryCatch1(nodeback, receiver, null)
        : tryCatch2(nodeback, receiver, null, val);
    if (ret === errorObj) {
        async.throwLater(ret.e);
    }
}
function errorAdapter(reason, nodeback) {
    var promise = this;
    if (!reason) {
        var target = promise._target();
        var newReason = target._getCarriedStackTrace();
        newReason.cause = reason;
        reason = newReason;
    }
    var ret = tryCatch1(nodeback, promise._boundTo, reason);
    if (ret === errorObj) {
        async.throwLater(ret.e);
    }
}

Promise.prototype.nodeify = function (nodeback, options) {
    if (typeof nodeback == "function") {
        var adapter = successAdapter;
        if (options !== undefined && Object(options).spread) {
            adapter = spreadAdapter;
        }
        this._then(
            adapter,
            errorAdapter,
            undefined,
            this,
            nodeback
        );
    }
    return this;
};
};

},{"./async.js":"/Users/sash/development/js/imglykit-rewrite/node_modules/bluebird/js/main/async.js","./util.js":"/Users/sash/development/js/imglykit-rewrite/node_modules/bluebird/js/main/util.js"}],"/Users/sash/development/js/imglykit-rewrite/node_modules/bluebird/js/main/progress.js":[function(require,module,exports){
"use strict";
module.exports = function(Promise, PromiseArray) {
var util = require("./util.js");
var async = require("./async.js");
var errors = require("./errors.js");
var tryCatch1 = util.tryCatch1;
var errorObj = util.errorObj;

Promise.prototype.progressed = function (handler) {
    return this._then(undefined, undefined, handler, undefined, undefined);
};

Promise.prototype._progress = function (progressValue) {
    if (this._isFollowingOrFulfilledOrRejected()) return;
    this._target()._progressUnchecked(progressValue);

};

Promise.prototype._progressHandlerAt = function (index) {
    return index === 0
        ? this._progressHandler0
        : this[(index << 2) + index - 5 + 2];
};

Promise.prototype._doProgressWith = function (progression) {
    var progressValue = progression.value;
    var handler = progression.handler;
    var promise = progression.promise;
    var receiver = progression.receiver;

    var ret = tryCatch1(handler, receiver, progressValue);
    if (ret === errorObj) {
        if (ret.e != null &&
            ret.e.name !== "StopProgressPropagation") {
            var trace = errors.canAttachTrace(ret.e)
                ? ret.e : new Error(util.toString(ret.e));
            promise._attachExtraTrace(trace);
            promise._progress(ret.e);
        }
    } else if (ret instanceof Promise) {
        ret._then(promise._progress, null, null, promise, undefined);
    } else {
        promise._progress(ret);
    }
};


Promise.prototype._progressUnchecked = function (progressValue) {
    var len = this._length();
    var progress = this._progress;
    for (var i = 0; i < len; i++) {
        var handler = this._progressHandlerAt(i);
        var promise = this._promiseAt(i);
        if (!(promise instanceof Promise)) {
            var receiver = this._receiverAt(i);
            if (typeof handler === "function") {
                handler.call(receiver, progressValue, promise);
            } else if (receiver instanceof PromiseArray &&
                       !receiver._isResolved()) {
                receiver._promiseProgressed(progressValue, promise);
            }
            continue;
        }

        if (typeof handler === "function") {
            async.invoke(this._doProgressWith, this, {
                handler: handler,
                promise: promise,
                receiver: this._receiverAt(i),
                value: progressValue
            });
        } else {
            async.invoke(progress, promise, progressValue);
        }
    }
};
};

},{"./async.js":"/Users/sash/development/js/imglykit-rewrite/node_modules/bluebird/js/main/async.js","./errors.js":"/Users/sash/development/js/imglykit-rewrite/node_modules/bluebird/js/main/errors.js","./util.js":"/Users/sash/development/js/imglykit-rewrite/node_modules/bluebird/js/main/util.js"}],"/Users/sash/development/js/imglykit-rewrite/node_modules/bluebird/js/main/promise.js":[function(require,module,exports){
(function (process){
"use strict";
module.exports = function() {
var makeSelfResolutionError = function () {
    return new TypeError("circular promise resolution chain\u000a\u000a    See http://goo.gl/LhFpo0\u000a");
};
var reflect = function() {
    return new Promise.PromiseInspection(this._target());
};
var util = require("./util.js");
var async = require("./async.js");
var errors = require("./errors.js");
var INTERNAL = function(){};
var APPLY = {};
var NEXT_FILTER = {e: null};
var apiRejection = require("./errors_api_rejection")(Promise);
var tryConvertToPromise = require("./thenables.js")(Promise, INTERNAL);
var PromiseArray =
    require("./promise_array.js")(Promise, INTERNAL,
                                    tryConvertToPromise, apiRejection);
var CapturedTrace = require("./captured_trace.js")();
var CatchFilter = require("./catch_filter.js")(NEXT_FILTER);
var PromiseResolver = require("./promise_resolver.js");
var isArray = util.isArray;
var errorObj = util.errorObj;
var tryCatch0 = util.tryCatch0;
var tryCatch1 = util.tryCatch1;
var tryCatch2 = util.tryCatch2;
var tryCatchApply = util.tryCatchApply;
var RangeError = errors.RangeError;
var TypeError = errors.TypeError;
var CancellationError = errors.CancellationError;
var TimeoutError = errors.TimeoutError;
var OperationalError = errors.OperationalError;
var originatesFromRejection = errors.originatesFromRejection;
var markAsOriginatingFromRejection = errors.markAsOriginatingFromRejection;
var canAttachTrace = errors.canAttachTrace;
var unhandledRejectionHandled;
var possiblyUnhandledRejection;

var debugging = false || !!(
    typeof process !== "undefined" &&
    typeof process.execPath === "string" &&
    typeof process.env === "object" &&
    (process.env["BLUEBIRD_DEBUG"] ||
        process.env["NODE_ENV"] === "development")
);
function Promise(resolver) {
    if (typeof resolver !== "function") {
        throw new TypeError("the promise constructor requires a resolver function\u000a\u000a    See http://goo.gl/EC22Yn\u000a");
    }
    if (this.constructor !== Promise) {
        throw new TypeError("the promise constructor cannot be invoked directly\u000a\u000a    See http://goo.gl/KsIlge\u000a");
    }
    this._bitField = 0;
    this._fulfillmentHandler0 = undefined;
    this._rejectionHandler0 = undefined;
    this._progressHandler0 = undefined;
    this._promise0 = undefined;
    this._receiver0 = undefined;
    this._settledValue = undefined;
    this._boundTo = undefined;
    if (resolver !== INTERNAL) this._resolveFromResolver(resolver);
}

Promise.prototype.bind = function (thisArg) {
    var maybePromise = tryConvertToPromise(thisArg, this);
    var ret = new Promise(INTERNAL);
    ret._propagateFrom(this, 1);
    var target = this._target();
    if (maybePromise instanceof Promise) {
        target._then(INTERNAL, ret._reject, ret._progress, ret, null);
        maybePromise._then(function(thisArg) {
            if (ret._isPending()) {
                ret._setBoundTo(thisArg);
                ret._follow(target);
            }
        }, ret._reject, ret._progress, ret, null);
    } else {
        ret._setBoundTo(thisArg);
        ret._follow(target);
    }

    return ret;
};

Promise.prototype.toString = function () {
    return "[object Promise]";
};

Promise.prototype.caught = Promise.prototype["catch"] = function (fn) {
    var len = arguments.length;
    if (len > 1) {
        var catchInstances = new Array(len - 1),
            j = 0, i;
        for (i = 0; i < len - 1; ++i) {
            var item = arguments[i];
            if (typeof item === "function") {
                catchInstances[j++] = item;
            } else {
                var error = new TypeError("Catch filter must inherit from Error or be a simple predicate function\u000a\u000a    See http://goo.gl/o84o68\u000a");
                this._attachExtraTrace(error);
                return Promise.reject(error);
            }
        }
        catchInstances.length = j;
        fn = arguments[i];
        var catchFilter = new CatchFilter(catchInstances, fn, this);
        return this._then(undefined, catchFilter.doFilter, undefined,
            catchFilter, undefined);
    }
    return this._then(undefined, fn, undefined, undefined, undefined);
};

Promise.prototype.reflect = function () {
    return this._then(reflect, reflect, undefined, this, undefined);
};

Promise.prototype.then = function (didFulfill, didReject, didProgress) {
    return this._then(didFulfill, didReject, didProgress,
        undefined, undefined);
};


Promise.prototype.done = function (didFulfill, didReject, didProgress) {
    var promise = this._then(didFulfill, didReject, didProgress,
        undefined, undefined);
    promise._setIsFinal();
};

Promise.prototype.spread = function (didFulfill, didReject) {
    var followee = this._target();
    var target = followee._isSpreadable()
        ? (followee === this ? this : this.then())
        : this.all();
    return target._then(didFulfill, didReject, undefined, APPLY, undefined);
};

Promise.prototype.isCancellable = function () {
    return !this.isResolved() &&
        this._cancellable();
};

Promise.prototype.toJSON = function () {
    var ret = {
        isFulfilled: false,
        isRejected: false,
        fulfillmentValue: undefined,
        rejectionReason: undefined
    };
    if (this.isFulfilled()) {
        ret.fulfillmentValue = this.value();
        ret.isFulfilled = true;
    } else if (this.isRejected()) {
        ret.rejectionReason = this.reason();
        ret.isRejected = true;
    }
    return ret;
};

Promise.prototype.all = function () {
    var ret = new PromiseArray(this).promise();
    ret._setIsSpreadable();
    return ret;
};

Promise.prototype.error = function (fn) {
    return this.caught(originatesFromRejection, fn);
};

Promise.is = function (val) {
    return val instanceof Promise;
};

Promise.all = function (promises) {
    var ret = new PromiseArray(promises).promise();
    ret._setIsSpreadable();
    return ret;
};

Promise.method = function (fn) {
    if (typeof fn !== "function") {
        throw new TypeError("fn must be a function\u000a\u000a    See http://goo.gl/916lJJ\u000a");
    }
    return function () {
        var ret = new Promise(INTERNAL);
        ret._captureStackTrace();
        var value;
        ret._pushContext();
        switch(arguments.length) {
        case 0: value = tryCatch0(fn, this); break;
        case 1: value = tryCatch1(fn, this, arguments[0]); break;
        case 2: value = tryCatch2(fn, this, arguments[0], arguments[1]); break;
        default:
            var $_len = arguments.length;var args = new Array($_len); for(var $_i = 0; $_i < $_len; ++$_i) {args[$_i] = arguments[$_i];}
            value = tryCatchApply(fn, args, this); break;
        }
        ret._popContext();
        ret._resolveFromSyncValue(value);
        return ret;
    };
};

Promise.attempt = Promise["try"] = function (fn, args, ctx) {
    if (typeof fn !== "function") {
        return apiRejection("fn must be a function\u000a\u000a    See http://goo.gl/916lJJ\u000a");
    }
    var ret = new Promise(INTERNAL);
    ret._captureStackTrace();
    ret._pushContext();
    var value = isArray(args)
        ? tryCatchApply(fn, args, ctx)
        : tryCatch1(fn, ctx, args);
    ret._popContext();
    ret._resolveFromSyncValue(value);
    return ret;
};

Promise.defer = Promise.pending = function () {
    var promise = new Promise(INTERNAL);
    return new PromiseResolver(promise);
};

Promise.bind = function (thisArg) {
    var maybePromise = tryConvertToPromise(thisArg, undefined);
    var ret = new Promise(INTERNAL);

    if (maybePromise instanceof Promise) {
        maybePromise._then(function(thisArg) {
            ret._setBoundTo(thisArg);
            ret._fulfill(undefined);
        }, ret._reject, ret._progress, ret, null);
    } else {
        ret._setBoundTo(thisArg);
        ret._setFulfilled();
    }
    return ret;
};

Promise.cast = function (obj) {
    var ret = tryConvertToPromise(obj, undefined);
    if (!(ret instanceof Promise)) {
        var val = ret;
        ret = new Promise(INTERNAL);
        ret._setFulfilled();
        ret._settledValue = val;
        ret._cleanValues();
    }
    return ret;
};

Promise.resolve = Promise.fulfilled = Promise.cast;

Promise.reject = Promise.rejected = function (reason) {
    var ret = new Promise(INTERNAL);
    ret._captureStackTrace();
    markAsOriginatingFromRejection(reason);
    var hasStack = canAttachTrace(reason) && typeof reason.stack === "string";
    var trace = errors.ensureErrorObject(reason);
    ret._attachExtraTrace(reason, hasStack);
    ret._rejectUnchecked(reason, trace === reason ? undefined : trace);
    return ret;
};

Promise.onPossiblyUnhandledRejection = function (fn) {
    possiblyUnhandledRejection = typeof fn === "function" ? fn : undefined;
};

Promise.onUnhandledRejectionHandled = function (fn) {
    unhandledRejectionHandled = typeof fn === "function" ? fn : undefined;
};

Promise.longStackTraces = function () {
    if (async.haveItemsQueued() &&
        debugging === false
   ) {
        throw new Error("cannot enable long stack traces after promises have been created\u000a\u000a    See http://goo.gl/DT1qyG\u000a");
    }
    debugging = CapturedTrace.isSupported();
};

Promise.hasLongStackTraces = function () {
    return debugging && CapturedTrace.isSupported();
};

Promise.setScheduler = function(fn) {
    if (typeof fn !== "function") throw new TypeError("fn must be a function\u000a\u000a    See http://goo.gl/916lJJ\u000a");
    async._schedule = fn;
};

Promise.prototype._then = function (
    didFulfill,
    didReject,
    didProgress,
    receiver,
    internalData
) {
    var haveInternalData = internalData !== undefined;
    var ret = haveInternalData ? internalData : new Promise(INTERNAL);

    if (!haveInternalData) {
        ret._propagateFrom(this, 4 | 1);
        ret._captureStackTrace();
    }

    var target = this._target();
    if (target !== this) {
        if (receiver === undefined) receiver = this._boundTo;
        if (!haveInternalData) ret._setIsMigrated();
    }

    var callbackIndex =
        target._addCallbacks(didFulfill, didReject, didProgress, ret, receiver);

    if (target._isResolved() && !target._isSettlePromisesQueued()) {
        async.invoke(
            target._settlePromiseAtPostResolution, target, callbackIndex);
    }

    return ret;
};

Promise.prototype._settlePromiseAtPostResolution = function (index) {
    if (this._isRejectionUnhandled()) this._unsetRejectionIsUnhandled();
    this._settlePromiseAt(index);
};

Promise.prototype._length = function () {
    return this._bitField & 131071;
};

Promise.prototype._isFollowingOrFulfilledOrRejected = function () {
    return (this._bitField & 939524096) > 0;
};

Promise.prototype._isFollowing = function () {
    return (this._bitField & 536870912) === 536870912;
};

Promise.prototype._setLength = function (len) {
    this._bitField = (this._bitField & -131072) |
        (len & 131071);
};

Promise.prototype._setFulfilled = function () {
    this._bitField = this._bitField | 268435456;
};

Promise.prototype._setRejected = function () {
    this._bitField = this._bitField | 134217728;
};

Promise.prototype._setFollowing = function () {
    this._bitField = this._bitField | 536870912;
};

Promise.prototype._setIsFinal = function () {
    this._bitField = this._bitField | 33554432;
};

Promise.prototype._isFinal = function () {
    return (this._bitField & 33554432) > 0;
};

Promise.prototype._cancellable = function () {
    return (this._bitField & 67108864) > 0;
};

Promise.prototype._setCancellable = function () {
    this._bitField = this._bitField | 67108864;
};

Promise.prototype._unsetCancellable = function () {
    this._bitField = this._bitField & (~67108864);
};

Promise.prototype._setRejectionIsUnhandled = function () {
    this._bitField = this._bitField | 2097152;
};

Promise.prototype._unsetRejectionIsUnhandled = function () {
    this._bitField = this._bitField & (~2097152);
    if (this._isUnhandledRejectionNotified()) {
        this._unsetUnhandledRejectionIsNotified();
        this._notifyUnhandledRejectionIsHandled();
    }
};

Promise.prototype._isRejectionUnhandled = function () {
    return (this._bitField & 2097152) > 0;
};

Promise.prototype._isSpreadable = function () {
    return (this._bitField & 131072) > 0;
};

Promise.prototype._setIsSpreadable = function () {
    this._bitField = this._bitField | 131072;
};

Promise.prototype._setIsMigrated = function () {
    this._bitField = this._bitField | 4194304;
};

Promise.prototype._unsetIsMigrated = function () {
    this._bitField = this._bitField & (~4194304);
};

Promise.prototype._isMigrated = function () {
    return (this._bitField & 4194304) > 0;
};

Promise.prototype._setUnhandledRejectionIsNotified = function () {
    this._bitField = this._bitField | 524288;
};

Promise.prototype._unsetUnhandledRejectionIsNotified = function () {
    this._bitField = this._bitField & (~524288);
};

Promise.prototype._isUnhandledRejectionNotified = function () {
    return (this._bitField & 524288) > 0;
};

Promise.prototype._setCarriedStackTrace = function (capturedTrace) {
    this._bitField = this._bitField | 1048576;
    this._fulfillmentHandler0 = capturedTrace;
};

Promise.prototype._isCarryingStackTrace = function () {
    return (this._bitField & 1048576) > 0;
};

Promise.prototype._getCarriedStackTrace = function () {
    return this._isCarryingStackTrace()
        ? this._fulfillmentHandler0
        : undefined;
};

Promise.prototype._receiverAt = function (index) {
    var ret = index === 0
        ? this._receiver0
        : this[
            index * 5 - 5 + 4];
    if (this._isBound() && ret === undefined) {
        return this._boundTo;
    }
    return ret;
};

Promise.prototype._promiseAt = function (index) {
    return index === 0
        ? this._promise0
        : this[index * 5 - 5 + 3];
};

Promise.prototype._fulfillmentHandlerAt = function (index) {
    return index === 0
        ? this._fulfillmentHandler0
        : this[index * 5 - 5 + 0];
};

Promise.prototype._rejectionHandlerAt = function (index) {
    return index === 0
        ? this._rejectionHandler0
        : this[index * 5 - 5 + 1];
};

Promise.prototype._migrateCallbacks = function (
    fulfill,
    reject,
    progress,
    promise,
    receiver
) {
    if (promise instanceof Promise) promise._setIsMigrated();
    this._addCallbacks(fulfill, reject, progress, promise, receiver);
};

Promise.prototype._addCallbacks = function (
    fulfill,
    reject,
    progress,
    promise,
    receiver
) {
    var index = this._length();

    if (index >= 131071 - 5) {
        index = 0;
        this._setLength(0);
    }

    if (index === 0) {
        this._promise0 = promise;
        if (receiver !== undefined) this._receiver0 = receiver;
        if (typeof fulfill === "function" && !this._isCarryingStackTrace())
            this._fulfillmentHandler0 = fulfill;
        if (typeof reject === "function") this._rejectionHandler0 = reject;
        if (typeof progress === "function") this._progressHandler0 = progress;
    } else {
        var base = index * 5 - 5;
        this[base + 3] = promise;
        this[base + 4] = receiver;
        if (typeof fulfill === "function")
            this[base + 0] = fulfill;
        if (typeof reject === "function")
            this[base + 1] = reject;
        if (typeof progress === "function")
            this[base + 2] = progress;
    }
    this._setLength(index + 1);
    return index;
};

Promise.prototype._setProxyHandlers = function (receiver, promiseSlotValue) {
    var index = this._length();

    if (index >= 131071 - 5) {
        index = 0;
        this._setLength(0);
    }
    if (index === 0) {
        this._promise0 = promiseSlotValue;
        this._receiver0 = receiver;
    } else {
        var base = index * 5 - 5;
        this[base + 3] = promiseSlotValue;
        this[base + 4] = receiver;
    }
    this._setLength(index + 1);
};

Promise.prototype._proxyPromiseArray = function (promiseArray, index) {
    this._setProxyHandlers(promiseArray, index);
};

Promise.prototype._setBoundTo = function (obj) {
    if (obj !== undefined) {
        this._bitField = this._bitField | 8388608;
        this._boundTo = obj;
    } else {
        this._bitField = this._bitField & (~8388608);
    }
};

Promise.prototype._isBound = function () {
    return (this._bitField & 8388608) === 8388608;
};

Promise.prototype._resolveFromResolver = function (resolver) {
    var promise = this;
    var synchronous = true;

    this._captureStackTrace();
    this._pushContext();
    var r = tryCatch2(resolver, undefined, function(value) {
        if (promise._tryFollow(value)) {
            return;
        }
        promise._fulfill(value);
    }, function (reason) {
        markAsOriginatingFromRejection(reason);
        var trace = errors.ensureErrorObject(reason);
        var hasStack = canAttachTrace(reason) &&
            typeof trace.stack === "string";
        promise._attachExtraTrace(trace, synchronous ? hasStack : false);
        promise._reject(reason, trace === reason ? undefined : trace);
    });
    synchronous = false;
    this._popContext();

    if (r !== undefined && r === errorObj) {
        var reason = r.e;
        var hasStack = canAttachTrace(reason) &&
            typeof reason.stack === "string";
        var trace = errors.ensureErrorObject(reason);
        promise._attachExtraTrace(reason, hasStack);
        promise._reject(reason, trace === reason ? undefined : trace);
    }
};

Promise.prototype._settlePromiseFromHandler = function (
    handler, receiver, value, promise
) {
    if (promise._isRejected()) return;
    promise._pushContext();
    var x;
    if (receiver === APPLY && !this._isRejected()) {
        x = tryCatchApply(handler, value, this._boundTo);
    } else {
        x = tryCatch1(handler, receiver, value);
    }
    promise._popContext();

    if (x === errorObj || x === promise || x === NEXT_FILTER) {
        var err = x === promise
                    ? makeSelfResolutionError()
                    : x.e;
        var trace = canAttachTrace(err) ? err : new Error(util.toString(err));
        if (x !== NEXT_FILTER) promise._attachExtraTrace(trace);
        promise._rejectUnchecked(err, trace);
    } else {
        x = tryConvertToPromise(x, promise);
        if (x instanceof Promise) {
            x = x._target();
            if (x._isRejected() &&
                !x._isCarryingStackTrace() &&
                !canAttachTrace(x._reason())) {
                var trace = new Error(util.toString(x._reason()));
                promise._attachExtraTrace(trace);
                x._setCarriedStackTrace(trace);
            }
            promise._follow(x);
        } else {
            promise._fulfillUnchecked(x);
        }
    }
};

Promise.prototype._target = function() {
    var ret = this;
    while (ret._isFollowing()) ret = ret._followee();
    return ret;
};

Promise.prototype._followee = function() {
    return this._rejectionHandler0;
};

Promise.prototype._setFollowee = function(promise) {
    this._rejectionHandler0 = promise;
};

Promise.prototype._follow = function (promise) {
    if (promise._isPending()) {
        var len = this._length();
        for (var i = 0; i < len; ++i) {
            promise._migrateCallbacks(
                this._fulfillmentHandlerAt(i),
                this._rejectionHandlerAt(i),
                this._progressHandlerAt(i),
                this._promiseAt(i),
                this._receiverAt(i)
            );
        }
        this._setFollowing();
        this._setLength(0);
        this._setFollowee(promise);
        this._propagateFrom(promise, 1);
    } else if (promise._isFulfilled()) {
        this._fulfillUnchecked(promise._value());
    } else {
        this._rejectUnchecked(promise._reason(),
            promise._getCarriedStackTrace());
    }
    if (promise._isRejectionUnhandled()) promise._unsetRejectionIsUnhandled();
};

Promise.prototype._tryFollow = function (value) {
    if (this._isFollowingOrFulfilledOrRejected() ||
        value === this) {
        return false;
    }
    var maybePromise = tryConvertToPromise(value, this);
    if (!(maybePromise instanceof Promise)) {
        return false;
    }
    this._follow(maybePromise._target());
    return true;
};

Promise.prototype._captureStackTrace = function () {
    if (debugging) {
        this._trace = new CapturedTrace(this._peekContext());
    }
    return this;
};

Promise.prototype._canAttachTrace = function(error) {
    return debugging && canAttachTrace(error);
};

Promise.prototype._attachExtraTraceIgnoreSelf = function (error) {
    if (this._canAttachTrace(error) && this._trace._parent !== undefined) {
        this._trace._parent.attachExtraTrace(error);
    }
};

Promise.prototype._attachExtraTrace = function (error, ignoreSelf) {
    if (debugging && canAttachTrace(error)) {
        var trace = this._trace;
        if (trace !== undefined) {
            if (ignoreSelf) trace = trace._parent;
        }
        if (trace !== undefined) {
            trace.attachExtraTrace(error);
        } else {
            CapturedTrace.cleanStack(error, true);
        }
    }
};

Promise.prototype._cleanValues = function () {
    if (this._cancellable()) {
        this._cancellationParent = undefined;
    }
};

Promise.prototype._propagateFrom = function (parent, flags) {
    if ((flags & 1) > 0 && parent._cancellable()) {
        this._setCancellable();
        this._cancellationParent = parent;
    }
    if ((flags & 4) > 0) {
        this._setBoundTo(parent._boundTo);
    }
};

Promise.prototype._fulfill = function (value) {
    if (this._isFollowingOrFulfilledOrRejected()) return;
    this._fulfillUnchecked(value);
};

Promise.prototype._reject = function (reason, carriedStackTrace) {
    if (this._isFollowingOrFulfilledOrRejected()) return;
    this._rejectUnchecked(reason, carriedStackTrace);
};

Promise.prototype._settlePromiseAt = function (index) {
    var promise = this._promiseAt(index);
    var isPromise = promise instanceof Promise;

    if (isPromise && promise._isMigrated()) {
        promise._unsetIsMigrated();
        return async.invoke(this._settlePromiseAt, this, index);
    }
    var handler = this._isFulfilled()
        ? this._fulfillmentHandlerAt(index)
        : this._rejectionHandlerAt(index);

    var carriedStackTrace =
        this._isCarryingStackTrace() ? this._getCarriedStackTrace() : undefined;
    var value = this._settledValue;
    var receiver = this._receiverAt(index);


    this._clearCallbackDataAtIndex(index);

    if (typeof handler === "function") {
        if (!isPromise) {
            handler.call(receiver, value, promise);
        } else {
            this._settlePromiseFromHandler(handler, receiver, value, promise);
        }
    } else if (receiver instanceof PromiseArray) {
        if (!receiver._isResolved()) {
            if (this._isFulfilled()) {
                receiver._promiseFulfilled(value, promise);
            }
            else {
                receiver._promiseRejected(value, promise);
            }
        }
    } else if (isPromise) {
        if (this._isFulfilled()) {
            promise._fulfill(value);
        } else {
            promise._reject(value, carriedStackTrace);
        }
    }

    if (index >= 4 && (index & 31) === 4)
        async.invokeLater(this._setLength, this, 0);
};

Promise.prototype._clearCallbackDataAtIndex = function(index) {
    if (index === 0) {
        if (!this._isCarryingStackTrace()) {
            this._fulfillmentHandler0 = undefined;
        }
        this._rejectionHandler0 =
        this._progressHandler0 =
        this._receiver0 =
        this._promise0 = undefined;
    } else {
        var base = index * 5 - 5;
        this[base + 3] =
        this[base + 4] =
        this[base + 0] =
        this[base + 1] =
        this[base + 2] = undefined;
    }
};

Promise.prototype._isSettlePromisesQueued = function () {
    return (this._bitField &
            -1073741824) === -1073741824;
};

Promise.prototype._setSettlePromisesQueued = function () {
    this._bitField = this._bitField | -1073741824;
};

Promise.prototype._unsetSettlePromisesQueued = function () {
    this._bitField = this._bitField & (~-1073741824);
};

Promise.prototype._queueSettlePromises = function() {
    if (!this._isSettlePromisesQueued()) {
        async.settlePromises(this);
        this._setSettlePromisesQueued();
    }
};

Promise.prototype._fulfillUnchecked = function (value) {
    if (value === this) {
        var err = makeSelfResolutionError();
        this._attachExtraTrace(err);
        return this._rejectUnchecked(err, undefined);
    }
    this._setFulfilled();
    this._settledValue = value;
    this._cleanValues();

    if (this._length() > 0) {
        this._queueSettlePromises();
    }
};

Promise.prototype._rejectUncheckedCheckError = function (reason) {
    var trace = errors.ensureErrorObject(reason);
    this._rejectUnchecked(reason, trace === reason ? undefined : trace);
};

Promise.prototype._rejectUnchecked = function (reason, trace) {
    if (reason === this) {
        var err = makeSelfResolutionError();
        this._attachExtraTrace(err);
        return this._rejectUnchecked(err);
    }
    this._setRejected();
    this._settledValue = reason;
    this._cleanValues();

    if (this._isFinal()) {
        async.throwLater(function(e) {
            if ("stack" in e) {
                async.invokeFirst(
                    CapturedTrace.unhandledRejection, undefined, e);
            }
            throw e;
        }, trace === undefined ? reason : trace);
        return;
    }

    if (trace !== undefined && trace !== reason) {
        this._setCarriedStackTrace(trace);
    }

    if (this._length() > 0) {
        this._queueSettlePromises();
    } else {
        this._ensurePossibleRejectionHandled();
    }
};

Promise.prototype._settlePromises = function () {
    this._unsetSettlePromisesQueued();
    var len = this._length();
    for (var i = 0; i < len; i++) {
        this._settlePromiseAt(i);
    }
};

Promise.prototype._ensurePossibleRejectionHandled = function () {
    this._setRejectionIsUnhandled();
    async.invokeLater(this._notifyUnhandledRejection, this, undefined);
};

Promise.prototype._notifyUnhandledRejectionIsHandled = function () {
    CapturedTrace.fireRejectionEvent("rejectionHandled",
                                  unhandledRejectionHandled, undefined, this);
};

Promise.prototype._notifyUnhandledRejection = function () {
    if (this._isRejectionUnhandled()) {
        var reason = this._getCarriedStackTrace() || this._settledValue;
        this._setUnhandledRejectionIsNotified();
        CapturedTrace.fireRejectionEvent("unhandledRejection",
                                      possiblyUnhandledRejection, reason, this);
    }
};

var contextStack = [];
function Context() {
    this._trace = new CapturedTrace(peekContext());
}
Context.prototype._pushContext = function () {
    if (!debugging) return;
    contextStack.push(this._trace);
};

Context.prototype._popContext = function () {
    if (!debugging) return;
    contextStack.pop();
};

 /*jshint unused:false*/
function createContext() {
    if (debugging) return new Context();
}

function peekContext() {
    var lastIndex = contextStack.length - 1;
    if (lastIndex >= 0) {
        return contextStack[lastIndex];
    }
    return undefined;
}

Promise.prototype._peekContext = peekContext;
Promise.prototype._pushContext = Context.prototype._pushContext;
Promise.prototype._popContext = Context.prototype._popContext;

Promise.prototype._resolveFromSyncValue = function (value) {
    if (value === errorObj) {
        this._setRejected();
        var reason = value.e;
        this._settledValue = reason;
        this._cleanValues();
        this._attachExtraTrace(reason);
        this._ensurePossibleRejectionHandled();
    } else {
        var maybePromise = tryConvertToPromise(value, this);
        if (maybePromise instanceof Promise) {
            maybePromise = maybePromise._target();
            this._follow(maybePromise);
        } else {
            this._setFulfilled();
            this._settledValue = value;
            this._cleanValues();
        }
    }
};



if (!CapturedTrace.isSupported()) {
    Promise.longStackTraces = function(){};
    debugging = false;
}

Promise._makeSelfResolutionError = makeSelfResolutionError;
require("./finally.js")(Promise, NEXT_FILTER, tryConvertToPromise);
require("./direct_resolve.js")(Promise);
require("./synchronous_inspection.js")(Promise);
require("./join.js")(Promise, PromiseArray, tryConvertToPromise, INTERNAL);
Promise.RangeError = RangeError;
Promise.CancellationError = CancellationError;
Promise.TimeoutError = TimeoutError;
Promise.TypeError = TypeError;
Promise.OperationalError = OperationalError;
Promise.RejectionError = OperationalError;
Promise.AggregateError = errors.AggregateError;

util.toFastProperties(Promise);
util.toFastProperties(Promise.prototype);
Promise.Promise = Promise;
CapturedTrace.setBounds(async.firstLineError, util.lastLineError);
require('./nodeify.js')(Promise);
require('./using.js')(Promise, apiRejection, tryConvertToPromise, createContext);
require('./generators.js')(Promise, apiRejection, INTERNAL, tryConvertToPromise);
require('./map.js')(Promise, PromiseArray, apiRejection, tryConvertToPromise, INTERNAL);
require('./cancel.js')(Promise, INTERNAL);
require('./promisify.js')(Promise, INTERNAL);
require('./props.js')(Promise, PromiseArray, tryConvertToPromise);
require('./race.js')(Promise, INTERNAL, tryConvertToPromise);
require('./reduce.js')(Promise, PromiseArray, apiRejection, tryConvertToPromise, INTERNAL);
require('./settle.js')(Promise, PromiseArray);
require('./call_get.js')(Promise);
require('./some.js')(Promise, PromiseArray, apiRejection);
require('./progress.js')(Promise, PromiseArray);
require('./any.js')(Promise);
require('./each.js')(Promise, INTERNAL);
require('./timers.js')(Promise, INTERNAL, tryConvertToPromise);
require('./filter.js')(Promise, INTERNAL);

Promise.prototype = Promise.prototype;
return Promise;

};

}).call(this,require('_process'))
},{"./any.js":"/Users/sash/development/js/imglykit-rewrite/node_modules/bluebird/js/main/any.js","./async.js":"/Users/sash/development/js/imglykit-rewrite/node_modules/bluebird/js/main/async.js","./call_get.js":"/Users/sash/development/js/imglykit-rewrite/node_modules/bluebird/js/main/call_get.js","./cancel.js":"/Users/sash/development/js/imglykit-rewrite/node_modules/bluebird/js/main/cancel.js","./captured_trace.js":"/Users/sash/development/js/imglykit-rewrite/node_modules/bluebird/js/main/captured_trace.js","./catch_filter.js":"/Users/sash/development/js/imglykit-rewrite/node_modules/bluebird/js/main/catch_filter.js","./direct_resolve.js":"/Users/sash/development/js/imglykit-rewrite/node_modules/bluebird/js/main/direct_resolve.js","./each.js":"/Users/sash/development/js/imglykit-rewrite/node_modules/bluebird/js/main/each.js","./errors.js":"/Users/sash/development/js/imglykit-rewrite/node_modules/bluebird/js/main/errors.js","./errors_api_rejection":"/Users/sash/development/js/imglykit-rewrite/node_modules/bluebird/js/main/errors_api_rejection.js","./filter.js":"/Users/sash/development/js/imglykit-rewrite/node_modules/bluebird/js/main/filter.js","./finally.js":"/Users/sash/development/js/imglykit-rewrite/node_modules/bluebird/js/main/finally.js","./generators.js":"/Users/sash/development/js/imglykit-rewrite/node_modules/bluebird/js/main/generators.js","./join.js":"/Users/sash/development/js/imglykit-rewrite/node_modules/bluebird/js/main/join.js","./map.js":"/Users/sash/development/js/imglykit-rewrite/node_modules/bluebird/js/main/map.js","./nodeify.js":"/Users/sash/development/js/imglykit-rewrite/node_modules/bluebird/js/main/nodeify.js","./progress.js":"/Users/sash/development/js/imglykit-rewrite/node_modules/bluebird/js/main/progress.js","./promise_array.js":"/Users/sash/development/js/imglykit-rewrite/node_modules/bluebird/js/main/promise_array.js","./promise_resolver.js":"/Users/sash/development/js/imglykit-rewrite/node_modules/bluebird/js/main/promise_resolver.js","./promisify.js":"/Users/sash/development/js/imglykit-rewrite/node_modules/bluebird/js/main/promisify.js","./props.js":"/Users/sash/development/js/imglykit-rewrite/node_modules/bluebird/js/main/props.js","./race.js":"/Users/sash/development/js/imglykit-rewrite/node_modules/bluebird/js/main/race.js","./reduce.js":"/Users/sash/development/js/imglykit-rewrite/node_modules/bluebird/js/main/reduce.js","./settle.js":"/Users/sash/development/js/imglykit-rewrite/node_modules/bluebird/js/main/settle.js","./some.js":"/Users/sash/development/js/imglykit-rewrite/node_modules/bluebird/js/main/some.js","./synchronous_inspection.js":"/Users/sash/development/js/imglykit-rewrite/node_modules/bluebird/js/main/synchronous_inspection.js","./thenables.js":"/Users/sash/development/js/imglykit-rewrite/node_modules/bluebird/js/main/thenables.js","./timers.js":"/Users/sash/development/js/imglykit-rewrite/node_modules/bluebird/js/main/timers.js","./using.js":"/Users/sash/development/js/imglykit-rewrite/node_modules/bluebird/js/main/using.js","./util.js":"/Users/sash/development/js/imglykit-rewrite/node_modules/bluebird/js/main/util.js","_process":"/Users/sash/development/js/imglykit-rewrite/node_modules/browserify/node_modules/process/browser.js"}],"/Users/sash/development/js/imglykit-rewrite/node_modules/bluebird/js/main/promise_array.js":[function(require,module,exports){
"use strict";
module.exports = function(Promise, INTERNAL, tryConvertToPromise,
    apiRejection) {
var util = require("./util.js");
var errors = require("./errors.js");
var isArray = util.isArray;

function toResolutionValue(val) {
    switch(val) {
    case -1: return undefined;
    case -2: return [];
    case -3: return {};
    }
}

function PromiseArray(values) {
    var promise = this._promise = new Promise(INTERNAL);
    var parent;
    if (values instanceof Promise) {
        parent = values;
        promise._propagateFrom(parent, 1 | 4);
    }
    this._values = values;
    this._length = 0;
    this._totalResolved = 0;
    this._init(undefined, -2);
}
PromiseArray.prototype.length = function () {
    return this._length;
};

PromiseArray.prototype.promise = function () {
    return this._promise;
};

PromiseArray.prototype._init = function init(_, resolveValueIfEmpty) {

    var values = tryConvertToPromise(this._values, undefined);
    if (values instanceof Promise) {
        values._setBoundTo(this._promise._boundTo);
        values = values._target();
        this._values = values;
        if (values._isFulfilled()) {
            values = values._value();
            if (!isArray(values)) {
                var err = new Promise.TypeError("expecting an array, a promise or a thenable\u000a\u000a    See http://goo.gl/s8MMhc\u000a");
                this.__hardReject__(err);
                return;
            }
        } else if (values._isPending()) {
            values._then(
                init,
                this._reject,
                undefined,
                this,
                resolveValueIfEmpty
           );
            return;
        } else {
            values._unsetRejectionIsUnhandled();
            this._reject(values._reason());
            return;
        }
    } else if (!isArray(values)) {
        this._promise._follow(apiRejection("expecting an array, a promise or a thenable\u000a\u000a    See http://goo.gl/s8MMhc\u000a"));
        return;
    }

    if (values.length === 0) {
        if (resolveValueIfEmpty === -5) {
            this._resolveEmptyArray();
        }
        else {
            this._resolve(toResolutionValue(resolveValueIfEmpty));
        }
        return;
    }
    var len = this.getActualLength(values.length);
    this._length = len;
    this._values = this.shouldCopyValues() ? new Array(len) : this._values;
    var promise = this._promise;
    for (var i = 0; i < len; ++i) {
        var isResolved = this._isResolved();
        var maybePromise = tryConvertToPromise(values[i], promise);
        if (maybePromise instanceof Promise) {
            maybePromise = maybePromise._target();
            if (isResolved) {
                maybePromise._unsetRejectionIsUnhandled();
            } else if (maybePromise._isPending()) {
                maybePromise._proxyPromiseArray(this, i);
            } else if (maybePromise._isFulfilled()) {
                this._promiseFulfilled(maybePromise._value(), i);
            } else {
                maybePromise._unsetRejectionIsUnhandled();
                this._promiseRejected(maybePromise._reason(), i);
            }
        } else if (!isResolved) {
            this._promiseFulfilled(maybePromise, i);
        }
    }
};

PromiseArray.prototype._isResolved = function () {
    return this._values === null;
};

PromiseArray.prototype._resolve = function (value) {
    this._values = null;
    this._promise._fulfill(value);
};

PromiseArray.prototype.__hardReject__ =
PromiseArray.prototype._reject = function (reason) {
    this._values = null;
    var trace = errors.ensureErrorObject(reason);
    this._promise._attachExtraTrace(trace);
    this._promise._reject(reason, trace);
};

PromiseArray.prototype._promiseProgressed = function (progressValue, index) {
    this._promise._progress({
        index: index,
        value: progressValue
    });
};


PromiseArray.prototype._promiseFulfilled = function (value, index) {
    this._values[index] = value;
    var totalResolved = ++this._totalResolved;
    if (totalResolved >= this._length) {
        this._resolve(this._values);
    }
};

PromiseArray.prototype._promiseRejected = function (reason, index) {
    this._totalResolved++;
    this._reject(reason);
};

PromiseArray.prototype.shouldCopyValues = function () {
    return true;
};

PromiseArray.prototype.getActualLength = function (len) {
    return len;
};

return PromiseArray;
};

},{"./errors.js":"/Users/sash/development/js/imglykit-rewrite/node_modules/bluebird/js/main/errors.js","./util.js":"/Users/sash/development/js/imglykit-rewrite/node_modules/bluebird/js/main/util.js"}],"/Users/sash/development/js/imglykit-rewrite/node_modules/bluebird/js/main/promise_resolver.js":[function(require,module,exports){
"use strict";
var util = require("./util.js");
var maybeWrapAsError = util.maybeWrapAsError;
var errors = require("./errors.js");
var TimeoutError = errors.TimeoutError;
var OperationalError = errors.OperationalError;
var async = require("./async.js");
var haveGetters = util.haveGetters;
var es5 = require("./es5.js");

function isUntypedError(obj) {
    return obj instanceof Error &&
        es5.getPrototypeOf(obj) === Error.prototype;
}

var rErrorKey = /^(?:name|message|stack|cause)$/;
function wrapAsOperationalError(obj) {
    var ret;
    if (isUntypedError(obj)) {
        ret = new OperationalError(obj);
        ret.name = obj.name;
        ret.message = obj.message;
        ret.stack = obj.stack;
        var keys = es5.keys(obj);
        for (var i = 0; i < keys.length; ++i) {
            var key = keys[i];
            if (!rErrorKey.test(key)) {
                ret[key] = obj[key];
            }
        }
        return ret;
    }
    errors.markAsOriginatingFromRejection(obj);
    return obj;
}

function nodebackForPromise(promise) {
    return function(err, value) {
        if (promise === null) return;

        if (err) {
            var wrapped = wrapAsOperationalError(maybeWrapAsError(err));
            promise._attachExtraTrace(wrapped);
            promise._reject(wrapped);
        } else if (arguments.length > 2) {
            var $_len = arguments.length;var args = new Array($_len - 1); for(var $_i = 1; $_i < $_len; ++$_i) {args[$_i - 1] = arguments[$_i];}
            promise._fulfill(args);
        } else {
            promise._fulfill(value);
        }

        promise = null;
    };
}


var PromiseResolver;
if (!haveGetters) {
    PromiseResolver = function (promise) {
        this.promise = promise;
        this.asCallback = nodebackForPromise(promise);
        this.callback = this.asCallback;
    };
}
else {
    PromiseResolver = function (promise) {
        this.promise = promise;
    };
}
if (haveGetters) {
    var prop = {
        get: function() {
            return nodebackForPromise(this.promise);
        }
    };
    es5.defineProperty(PromiseResolver.prototype, "asCallback", prop);
    es5.defineProperty(PromiseResolver.prototype, "callback", prop);
}

PromiseResolver._nodebackForPromise = nodebackForPromise;

PromiseResolver.prototype.toString = function () {
    return "[object PromiseResolver]";
};

PromiseResolver.prototype.resolve =
PromiseResolver.prototype.fulfill = function (value) {
    if (!(this instanceof PromiseResolver)) {
        throw new TypeError("Illegal invocation, resolver resolve/reject must be called within a resolver context. Consider using the promise constructor instead.\u000a\u000a    See http://goo.gl/sdkXL9\u000a");
    }

    var promise = this.promise;
    if (promise._tryFollow(value)) {
        return;
    }
    async.invoke(promise._fulfill, promise, value);
};

PromiseResolver.prototype.reject = function (reason) {
    if (!(this instanceof PromiseResolver)) {
        throw new TypeError("Illegal invocation, resolver resolve/reject must be called within a resolver context. Consider using the promise constructor instead.\u000a\u000a    See http://goo.gl/sdkXL9\u000a");
    }

    var promise = this.promise;
    errors.markAsOriginatingFromRejection(reason);
    var trace = errors.ensureErrorObject(reason);
    async.invoke(promise._reject, promise, reason);
    if (trace !== reason) {
        async.invoke(this._setCarriedStackTrace, this, trace);
    }
};

PromiseResolver.prototype.progress = function (value) {
    if (!(this instanceof PromiseResolver)) {
        throw new TypeError("Illegal invocation, resolver resolve/reject must be called within a resolver context. Consider using the promise constructor instead.\u000a\u000a    See http://goo.gl/sdkXL9\u000a");
    }
    async.invoke(this.promise._progress, this.promise, value);
};

PromiseResolver.prototype.cancel = function () {
    async.invoke(this.promise.cancel, this.promise, undefined);
};

PromiseResolver.prototype.timeout = function () {
    this.reject(new TimeoutError("timeout"));
};

PromiseResolver.prototype.isResolved = function () {
    return this.promise.isResolved();
};

PromiseResolver.prototype.toJSON = function () {
    return this.promise.toJSON();
};

PromiseResolver.prototype._setCarriedStackTrace = function (trace) {
    if (this.promise.isRejected()) {
        this.promise._setCarriedStackTrace(trace);
    }
};

module.exports = PromiseResolver;

},{"./async.js":"/Users/sash/development/js/imglykit-rewrite/node_modules/bluebird/js/main/async.js","./errors.js":"/Users/sash/development/js/imglykit-rewrite/node_modules/bluebird/js/main/errors.js","./es5.js":"/Users/sash/development/js/imglykit-rewrite/node_modules/bluebird/js/main/es5.js","./util.js":"/Users/sash/development/js/imglykit-rewrite/node_modules/bluebird/js/main/util.js"}],"/Users/sash/development/js/imglykit-rewrite/node_modules/bluebird/js/main/promisify.js":[function(require,module,exports){
"use strict";
module.exports = function(Promise, INTERNAL) {
var THIS = {};
var util = require("./util.js");
var nodebackForPromise = require("./promise_resolver.js")
    ._nodebackForPromise;
var withAppended = util.withAppended;
var maybeWrapAsError = util.maybeWrapAsError;
var canEvaluate = util.canEvaluate;
var TypeError = require("./errors").TypeError;
var defaultSuffix = "Async";
var defaultFilter = function(name, func) {
    return util.isIdentifier(name) &&
        name.charAt(0) !== "_" &&
        !util.isClass(func);
};
var defaultPromisified = {__isPromisified__: true};


function escapeIdentRegex(str) {
    return str.replace(/([$])/, "\\$");
}

function isPromisified(fn) {
    try {
        return fn.__isPromisified__ === true;
    }
    catch (e) {
        return false;
    }
}

function hasPromisified(obj, key, suffix) {
    var val = util.getDataPropertyOrDefault(obj, key + suffix,
                                            defaultPromisified);
    return val ? isPromisified(val) : false;
}
function checkValid(ret, suffix, suffixRegexp) {
    for (var i = 0; i < ret.length; i += 2) {
        var key = ret[i];
        if (suffixRegexp.test(key)) {
            var keyWithoutAsyncSuffix = key.replace(suffixRegexp, "");
            for (var j = 0; j < ret.length; j += 2) {
                if (ret[j] === keyWithoutAsyncSuffix) {
                    throw new TypeError("Cannot promisify an API that has normal methods with '%s'-suffix\u000a\u000a    See http://goo.gl/iWrZbw\u000a"
                        .replace("%s", suffix));
                }
            }
        }
    }
}

function promisifiableMethods(obj, suffix, suffixRegexp, filter) {
    var keys = util.inheritedDataKeys(obj);
    var ret = [];
    for (var i = 0; i < keys.length; ++i) {
        var key = keys[i];
        var value = obj[key];
        var passesDefaultFilter = filter === defaultFilter
            ? true : defaultFilter(key, value, obj);
        if (typeof value === "function" &&
            !isPromisified(value) &&
            !hasPromisified(obj, key, suffix) &&
            filter(key, value, obj, passesDefaultFilter)) {
            ret.push(key, value);
        }
    }
    checkValid(ret, suffix, suffixRegexp);
    return ret;
}

function switchCaseArgumentOrder(likelyArgumentCount) {
    var ret = [likelyArgumentCount];
    var min = Math.max(0, likelyArgumentCount - 1 - 5);
    for(var i = likelyArgumentCount - 1; i >= min; --i) {
        if (i === likelyArgumentCount) continue;
        ret.push(i);
    }
    for(var i = likelyArgumentCount + 1; i <= 5; ++i) {
        ret.push(i);
    }
    return ret;
}

function argumentSequence(argumentCount) {
    return util.filledRange(argumentCount, "arguments[", "]");
}

function parameterDeclaration(parameterCount) {
    return util.filledRange(parameterCount, "_arg", "");
}

function parameterCount(fn) {
    if (typeof fn.length === "number") {
        return Math.max(Math.min(fn.length, 1023 + 1), 0);
    }
    return 0;
}

function generatePropertyAccess(key) {
    if (util.isIdentifier(key)) {
        return "." + key;
    }
    else return "['" + key.replace(/(['\\])/g, "\\$1") + "']";
}

function makeNodePromisifiedEval(callback, receiver, originalName, fn, suffix) {
    var newParameterCount = Math.max(0, parameterCount(fn) - 1);
    var argumentOrder = switchCaseArgumentOrder(newParameterCount);
    var callbackName =
        (typeof originalName === "string" && util.isIdentifier(originalName)
            ? originalName + suffix
            : "promisified");

    function generateCallForArgumentCount(count) {
        var args = argumentSequence(count).join(", ");
        var comma = count > 0 ? ", " : "";
        var ret;
        if (typeof callback === "string") {
            ret = "                                                          \n\
                this.method({{args}}, fn);                                   \n\
                break;                                                       \n\
            ".replace(".method", generatePropertyAccess(callback));
        } else if (receiver === THIS) {
            ret =  "                                                         \n\
                callback.call(this, {{args}}, fn);                           \n\
                break;                                                       \n\
            ";
        } else if (receiver !== undefined) {
            ret =  "                                                         \n\
                callback.call(receiver, {{args}}, fn);                       \n\
                break;                                                       \n\
            ";
        } else {
            ret =  "                                                         \n\
                callback({{args}}, fn);                                      \n\
                break;                                                       \n\
            ";
        }
        return ret.replace("{{args}}", args).replace(", ", comma);
    }

    function generateArgumentSwitchCase() {
        var ret = "";
        for(var i = 0; i < argumentOrder.length; ++i) {
            ret += "case " + argumentOrder[i] +":" +
                generateCallForArgumentCount(argumentOrder[i]);
        }
        var codeForCall;
        if (typeof callback === "string") {
            codeForCall = "                                                  \n\
                this.property.apply(this, args);                             \n\
            "
                .replace(".property", generatePropertyAccess(callback));
        } else if (receiver === THIS) {
            codeForCall = "                                                  \n\
                callback.apply(this, args);                                  \n\
            ";
        } else {
            codeForCall = "                                                  \n\
                callback.apply(receiver, args);                              \n\
            ";
        }

        ret += "                                                             \n\
        default:                                                             \n\
            var args = new Array(len + 1);                                   \n\
            var i = 0;                                                       \n\
            for (var i = 0; i < len; ++i) {                                  \n\
               args[i] = arguments[i];                                       \n\
            }                                                                \n\
            args[i] = fn;                                                    \n\
            [CodeForCall]                                                    \n\
            break;                                                           \n\
        ".replace("[CodeForCall]", codeForCall);
        return ret;
    }

    return new Function("Promise",
                        "callback",
                        "receiver",
                        "withAppended",
                        "maybeWrapAsError",
                        "nodebackForPromise",
                        "INTERNAL","                                         \n\
        var ret = function (Parameters) {                        \n\
            'use strict';                                                    \n\
            var len = arguments.length;                                      \n\
            var promise = new Promise(INTERNAL);                             \n\
            promise._captureStackTrace();                                    \n\
            promise._setIsSpreadable();                                      \n\
            var fn = nodebackForPromise(promise);                            \n\
            try {                                                            \n\
                switch(len) {                                                \n\
                    [CodeForSwitchCase]                                      \n\
                }                                                            \n\
            } catch (e) {                                                    \n\
                var wrapped = maybeWrapAsError(e);                           \n\
                promise._attachExtraTrace(wrapped);                          \n\
                promise._reject(wrapped);                                    \n\
            }                                                                \n\
            return promise;                                                  \n\
        };                                                                   \n\
        ret.__isPromisified__ = true;                                        \n\
        return ret;                                                          \n\
        "
        .replace("FunctionName", callbackName)
        .replace("Parameters", parameterDeclaration(newParameterCount))
        .replace("[CodeForSwitchCase]", generateArgumentSwitchCase()))(
            Promise,
            callback,
            receiver,
            withAppended,
            maybeWrapAsError,
            nodebackForPromise,
            INTERNAL
        );
}

function makeNodePromisifiedClosure(callback, receiver) {
    function promisified() {
        var _receiver = receiver;
        if (receiver === THIS) _receiver = this;
        if (typeof callback === "string") {
            callback = _receiver[callback];
        }
        var promise = new Promise(INTERNAL);
        promise._captureStackTrace();
        promise._setIsSpreadable();
        var fn = nodebackForPromise(promise);
        try {
            callback.apply(_receiver, withAppended(arguments, fn));
        } catch(e) {
            var wrapped = maybeWrapAsError(e);
            promise._attachExtraTrace(wrapped);
            promise._reject(wrapped);
        }
        return promise;
    }
    promisified.__isPromisified__ = true;
    return promisified;
}

var makeNodePromisified = canEvaluate
    ? makeNodePromisifiedEval
    : makeNodePromisifiedClosure;

function promisifyAll(obj, suffix, filter, promisifier) {
    var suffixRegexp = new RegExp(escapeIdentRegex(suffix) + "$");
    var methods =
        promisifiableMethods(obj, suffix, suffixRegexp, filter);

    for (var i = 0, len = methods.length; i < len; i+= 2) {
        var key = methods[i];
        var fn = methods[i+1];
        var promisifiedKey = key + suffix;
        obj[promisifiedKey] = promisifier === makeNodePromisified
                ? makeNodePromisified(key, THIS, key, fn, suffix)
                : promisifier(fn, function() {
                    return makeNodePromisified(key, THIS, key, fn, suffix);
                });
    }
    util.toFastProperties(obj);
    return obj;
}

function promisify(callback, receiver) {
    return makeNodePromisified(callback, receiver, undefined, callback);
}

Promise.promisify = function (fn, receiver) {
    if (typeof fn !== "function") {
        throw new TypeError("fn must be a function\u000a\u000a    See http://goo.gl/916lJJ\u000a");
    }
    if (isPromisified(fn)) {
        return fn;
    }
    return promisify(fn, arguments.length < 2 ? THIS : receiver);
};

Promise.promisifyAll = function (target, options) {
    if (typeof target !== "function" && typeof target !== "object") {
        throw new TypeError("the target of promisifyAll must be an object or a function\u000a\u000a    See http://goo.gl/9ITlV0\u000a");
    }
    options = Object(options);
    var suffix = options.suffix;
    if (typeof suffix !== "string") suffix = defaultSuffix;
    var filter = options.filter;
    if (typeof filter !== "function") filter = defaultFilter;
    var promisifier = options.promisifier;
    if (typeof promisifier !== "function") promisifier = makeNodePromisified;

    if (!util.isIdentifier(suffix)) {
        throw new RangeError("suffix must be a valid identifier\u000a\u000a    See http://goo.gl/8FZo5V\u000a");
    }

    var keys = util.inheritedDataKeys(target, {includeHidden: true});
    for (var i = 0; i < keys.length; ++i) {
        var value = target[keys[i]];
        if (keys[i] !== "constructor" &&
            util.isClass(value)) {
            promisifyAll(value.prototype, suffix, filter, promisifier);
            promisifyAll(value, suffix, filter, promisifier);
        }
    }

    return promisifyAll(target, suffix, filter, promisifier);
};
};


},{"./errors":"/Users/sash/development/js/imglykit-rewrite/node_modules/bluebird/js/main/errors.js","./promise_resolver.js":"/Users/sash/development/js/imglykit-rewrite/node_modules/bluebird/js/main/promise_resolver.js","./util.js":"/Users/sash/development/js/imglykit-rewrite/node_modules/bluebird/js/main/util.js"}],"/Users/sash/development/js/imglykit-rewrite/node_modules/bluebird/js/main/props.js":[function(require,module,exports){
"use strict";
module.exports = function(Promise, PromiseArray, tryConvertToPromise) {
var util = require("./util.js");
var apiRejection = require("./errors_api_rejection")(Promise);
var isObject = util.isObject;
var es5 = require("./es5.js");

function PropertiesPromiseArray(obj) {
    var keys = es5.keys(obj);
    var len = keys.length;
    var values = new Array(len * 2);
    for (var i = 0; i < len; ++i) {
        var key = keys[i];
        values[i] = obj[key];
        values[i + len] = key;
    }
    this.constructor$(values);
}
util.inherits(PropertiesPromiseArray, PromiseArray);

PropertiesPromiseArray.prototype._init = function () {
    this._init$(undefined, -3) ;
};

PropertiesPromiseArray.prototype._promiseFulfilled = function (value, index) {
    this._values[index] = value;
    var totalResolved = ++this._totalResolved;
    if (totalResolved >= this._length) {
        var val = {};
        var keyOffset = this.length();
        for (var i = 0, len = this.length(); i < len; ++i) {
            val[this._values[i + keyOffset]] = this._values[i];
        }
        this._resolve(val);
    }
};

PropertiesPromiseArray.prototype._promiseProgressed = function (value, index) {
    this._promise._progress({
        key: this._values[index + this.length()],
        value: value
    });
};

PropertiesPromiseArray.prototype.shouldCopyValues = function () {
    return false;
};

PropertiesPromiseArray.prototype.getActualLength = function (len) {
    return len >> 1;
};

function props(promises) {
    var ret;
    var castValue = tryConvertToPromise(promises, undefined);

    if (!isObject(castValue)) {
        return apiRejection("cannot await properties of a non-object\u000a\u000a    See http://goo.gl/OsFKC8\u000a");
    } else if (castValue instanceof Promise) {
        ret = castValue._then(
            Promise.props, undefined, undefined, undefined, undefined);
    } else {
        ret = new PropertiesPromiseArray(castValue).promise();
    }

    if (castValue instanceof Promise) {
        ret._propagateFrom(castValue, 4);
    }
    return ret;
}

Promise.prototype.props = function () {
    return props(this);
};

Promise.props = function (promises) {
    return props(promises);
};
};

},{"./errors_api_rejection":"/Users/sash/development/js/imglykit-rewrite/node_modules/bluebird/js/main/errors_api_rejection.js","./es5.js":"/Users/sash/development/js/imglykit-rewrite/node_modules/bluebird/js/main/es5.js","./util.js":"/Users/sash/development/js/imglykit-rewrite/node_modules/bluebird/js/main/util.js"}],"/Users/sash/development/js/imglykit-rewrite/node_modules/bluebird/js/main/queue.js":[function(require,module,exports){
"use strict";
function arrayMove(src, srcIndex, dst, dstIndex, len) {
    for (var j = 0; j < len; ++j) {
        dst[j + dstIndex] = src[j + srcIndex];
        src[j + srcIndex] = void 0;
    }
}

function Queue(capacity) {
    this._capacity = capacity;
    this._length = 0;
    this._front = 0;
}

Queue.prototype._willBeOverCapacity = function (size) {
    return this._capacity < size;
};

Queue.prototype._pushOne = function (arg) {
    var length = this.length();
    this._checkCapacity(length + 1);
    var i = (this._front + length) & (this._capacity - 1);
    this[i] = arg;
    this._length = length + 1;
};

Queue.prototype._unshiftOne = function(value) {
    var capacity = this._capacity;
    this._checkCapacity(this.length() + 1);
    var front = this._front;
    var i = (((( front - 1 ) &
                    ( capacity - 1) ) ^ capacity ) - capacity );
    this[i] = value;
    this._front = i;
    this._length = this.length() + 1;
};

Queue.prototype.unshift = function(fn, receiver, arg) {
    this._unshiftOne(arg);
    this._unshiftOne(receiver);
    this._unshiftOne(fn);
};

Queue.prototype.push = function (fn, receiver, arg) {
    var length = this.length() + 3;
    if (this._willBeOverCapacity(length)) {
        this._pushOne(fn);
        this._pushOne(receiver);
        this._pushOne(arg);
        return;
    }
    var j = this._front + length - 3;
    this._checkCapacity(length);
    var wrapMask = this._capacity - 1;
    this[(j + 0) & wrapMask] = fn;
    this[(j + 1) & wrapMask] = receiver;
    this[(j + 2) & wrapMask] = arg;
    this._length = length;
};

Queue.prototype.shift = function () {
    var front = this._front,
        ret = this[front];

    this[front] = undefined;
    this._front = (front + 1) & (this._capacity - 1);
    this._length--;
    return ret;
};

Queue.prototype.length = function () {
    return this._length;
};

Queue.prototype._checkCapacity = function (size) {
    if (this._capacity < size) {
        this._resizeTo(this._capacity << 1);
    }
};

Queue.prototype._resizeTo = function (capacity) {
    var oldCapacity = this._capacity;
    this._capacity = capacity;
    var front = this._front;
    var length = this._length;
    if (front + length > oldCapacity) {
        var moveItemsCount = (front + length) & (oldCapacity - 1);
        arrayMove(this, 0, this, oldCapacity, moveItemsCount);
    }
};

module.exports = Queue;

},{}],"/Users/sash/development/js/imglykit-rewrite/node_modules/bluebird/js/main/race.js":[function(require,module,exports){
"use strict";
module.exports = function(Promise, INTERNAL, tryConvertToPromise) {
var apiRejection = require("./errors_api_rejection.js")(Promise);
var isArray = require("./util.js").isArray;

var raceLater = function (promise) {
    return promise.then(function(array) {
        return race(array, promise);
    });
};

function race(promises, parent) {
    var maybePromise = tryConvertToPromise(promises, undefined);

    if (maybePromise instanceof Promise) {
        return raceLater(maybePromise);
    } else if (!isArray(promises)) {
        return apiRejection("expecting an array, a promise or a thenable\u000a\u000a    See http://goo.gl/s8MMhc\u000a");
    }

    var ret = new Promise(INTERNAL);
    if (parent !== undefined) {
        ret._propagateFrom(parent, 4 | 1);
    }
    var fulfill = ret._fulfill;
    var reject = ret._reject;
    for (var i = 0, len = promises.length; i < len; ++i) {
        var val = promises[i];

        if (val === undefined && !(i in promises)) {
            continue;
        }

        Promise.cast(val)._then(fulfill, reject, undefined, ret, null);
    }
    return ret;
}

Promise.race = function (promises) {
    return race(promises, undefined);
};

Promise.prototype.race = function () {
    return race(this, undefined);
};

};

},{"./errors_api_rejection.js":"/Users/sash/development/js/imglykit-rewrite/node_modules/bluebird/js/main/errors_api_rejection.js","./util.js":"/Users/sash/development/js/imglykit-rewrite/node_modules/bluebird/js/main/util.js"}],"/Users/sash/development/js/imglykit-rewrite/node_modules/bluebird/js/main/reduce.js":[function(require,module,exports){
"use strict";
module.exports = function(Promise,
                          PromiseArray,
                          apiRejection,
                          tryConvertToPromise,
                          INTERNAL) {
var util = require("./util.js");
var tryCatch4 = util.tryCatch4;
var tryCatch3 = util.tryCatch3;
var errorObj = util.errorObj;
function ReductionPromiseArray(promises, fn, accum, _each) {
    this.constructor$(promises);
    this._promise._captureStackTrace();
    this._preservedValues = _each === INTERNAL ? [] : null;
    this._zerothIsAccum = (accum === undefined);
    this._gotAccum = false;
    this._reducingIndex = (this._zerothIsAccum ? 1 : 0);
    this._valuesPhase = undefined;

    var maybePromise = tryConvertToPromise(accum, undefined);
    var rejected = false;
    var isPromise = maybePromise instanceof Promise;
    if (isPromise) {
        maybePromise = maybePromise._target();
        if (maybePromise._isPending()) {
            maybePromise._proxyPromiseArray(this, -1);
        } else if (maybePromise._isFulfilled()) {
            accum = maybePromise._value();
            this._gotAccum = true;
        } else {
            maybePromise._unsetRejectionIsUnhandled();
            this._reject(maybePromise._reason());
            rejected = true;
        }
    }
    if (!(isPromise || this._zerothIsAccum)) this._gotAccum = true;
    this._callback = fn;
    this._accum = accum;
    if (!rejected) this._init$(undefined, -5);
}
util.inherits(ReductionPromiseArray, PromiseArray);

ReductionPromiseArray.prototype._init = function () {};

ReductionPromiseArray.prototype._resolveEmptyArray = function () {
    if (this._gotAccum || this._zerothIsAccum) {
        this._resolve(this._preservedValues !== null
                        ? [] : this._accum);
    }
};

ReductionPromiseArray.prototype._promiseFulfilled = function (value, index) {
    var values = this._values;
    values[index] = value;
    var length = this.length();
    var preservedValues = this._preservedValues;
    var isEach = preservedValues !== null;
    var gotAccum = this._gotAccum;
    var valuesPhase = this._valuesPhase;
    var valuesPhaseIndex;
    if (!valuesPhase) {
        valuesPhase = this._valuesPhase = Array(length);
        for (valuesPhaseIndex=0; valuesPhaseIndex<length; ++valuesPhaseIndex) {
            valuesPhase[valuesPhaseIndex] = 0;
        }
    }
    valuesPhaseIndex = valuesPhase[index];

    if (index === 0 && this._zerothIsAccum) {
        if (!gotAccum) {
            this._accum = value;
            this._gotAccum = gotAccum = true;
        }
        valuesPhase[index] = ((valuesPhaseIndex === 0)
            ? 1 : 2);
    } else if (index === -1) {
        if (!gotAccum) {
            this._accum = value;
            this._gotAccum = gotAccum = true;
        }
    } else {
        if (valuesPhaseIndex === 0) {
            valuesPhase[index] = 1;
        }
        else {
            valuesPhase[index] = 2;
            if (gotAccum) {
                this._accum = value;
            }
        }
    }
    if (!gotAccum) return;

    var callback = this._callback;
    var receiver = this._promise._boundTo;
    var ret;

    for (var i = this._reducingIndex; i < length; ++i) {
        valuesPhaseIndex = valuesPhase[i];
        if (valuesPhaseIndex === 2) {
            this._reducingIndex = i + 1;
            continue;
        }
        if (valuesPhaseIndex !== 1) return;
        value = values[i];
        if (value instanceof Promise) {
            value = value._target();
            if (value._isFulfilled()) {
                value = value._value();
            } else if (value._isPending()) {
                return;
            } else {
                value._unsetRejectionIsUnhandled();
                return this._reject(value._reason());
            }
        }

        this._promise._pushContext();
        if (isEach) {
            preservedValues.push(value);
            ret = tryCatch3(callback, receiver, value, i, length);
        }
        else {
            ret = tryCatch4(callback, receiver, this._accum, value, i, length);
        }
        this._promise._popContext();

        if (ret === errorObj) return this._reject(ret.e);

        var maybePromise = tryConvertToPromise(ret, this._promise);
        if (maybePromise instanceof Promise) {
            maybePromise = maybePromise._target();
            if (maybePromise._isPending()) {
                valuesPhase[i] = 4;
                return maybePromise._proxyPromiseArray(this, i);
            } else if (maybePromise._isFulfilled()) {
                ret = maybePromise._value();
            } else {
                maybePromise._unsetRejectionIsUnhandled();
                return this._reject(maybePromise._reason());
            }
        }

        this._reducingIndex = i + 1;
        this._accum = ret;
    }

    if (this._reducingIndex < length) return;
    this._resolve(isEach ? preservedValues : this._accum);
};

function reduce(promises, fn, initialValue, _each) {
    if (typeof fn !== "function") return apiRejection("fn must be a function\u000a\u000a    See http://goo.gl/916lJJ\u000a");
    var array = new ReductionPromiseArray(promises, fn, initialValue, _each);
    return array.promise();
}

Promise.prototype.reduce = function (fn, initialValue) {
    return reduce(this, fn, initialValue, null);
};

Promise.reduce = function (promises, fn, initialValue, _each) {
    return reduce(promises, fn, initialValue, _each);
};
};

},{"./util.js":"/Users/sash/development/js/imglykit-rewrite/node_modules/bluebird/js/main/util.js"}],"/Users/sash/development/js/imglykit-rewrite/node_modules/bluebird/js/main/schedule.js":[function(require,module,exports){
(function (process){
"use strict";
var schedule;
if (typeof process === "object" && typeof process.version === "string") {
    schedule = parseInt(process.version.split(".")[1], 10) > 10
        ? setImmediate : process.nextTick;
}
else if (typeof MutationObserver !== "undefined") {
    schedule = function(fn) {
        var div = document.createElement("div");
        var observer = new MutationObserver(fn);
        observer.observe(div, {attributes: true});
        return function() { div.classList.toggle("foo"); };
    };
    schedule.isStatic = true;
}
else if (typeof setTimeout !== "undefined") {
    schedule = function (fn) {
        setTimeout(fn, 0);
    };
}
else {
    schedule = function() {
        throw new Error("No async scheduler available\u000a\u000a    See http://goo.gl/m3OTXk\u000a");
    };
}
module.exports = schedule;

}).call(this,require('_process'))
},{"_process":"/Users/sash/development/js/imglykit-rewrite/node_modules/browserify/node_modules/process/browser.js"}],"/Users/sash/development/js/imglykit-rewrite/node_modules/bluebird/js/main/settle.js":[function(require,module,exports){
"use strict";
module.exports =
    function(Promise, PromiseArray) {
var PromiseInspection = Promise.PromiseInspection;
var util = require("./util.js");

function SettledPromiseArray(values) {
    this.constructor$(values);
    this._promise._setIsSpreadable();
}
util.inherits(SettledPromiseArray, PromiseArray);

SettledPromiseArray.prototype._promiseResolved = function (index, inspection) {
    this._values[index] = inspection;
    var totalResolved = ++this._totalResolved;
    if (totalResolved >= this._length) {
        this._resolve(this._values);
    }
};

SettledPromiseArray.prototype._promiseFulfilled = function (value, index) {
    var ret = new PromiseInspection();
    ret._bitField = 268435456;
    ret._settledValue = value;
    this._promiseResolved(index, ret);
};
SettledPromiseArray.prototype._promiseRejected = function (reason, index) {
    var ret = new PromiseInspection();
    ret._bitField = 134217728;
    ret._settledValue = reason;
    this._promiseResolved(index, ret);
};

Promise.settle = function (promises) {
    return new SettledPromiseArray(promises).promise();
};

Promise.prototype.settle = function () {
    return new SettledPromiseArray(this).promise();
};
};

},{"./util.js":"/Users/sash/development/js/imglykit-rewrite/node_modules/bluebird/js/main/util.js"}],"/Users/sash/development/js/imglykit-rewrite/node_modules/bluebird/js/main/some.js":[function(require,module,exports){
"use strict";
module.exports =
function(Promise, PromiseArray, apiRejection) {
var util = require("./util.js");
var RangeError = require("./errors.js").RangeError;
var AggregateError = require("./errors.js").AggregateError;
var isArray = util.isArray;


function SomePromiseArray(values) {
    this.constructor$(values);
    this._howMany = 0;
    this._unwrap = false;
    this._initialized = false;
}
util.inherits(SomePromiseArray, PromiseArray);

SomePromiseArray.prototype._init = function () {
    if (!this._initialized) {
        return;
    }
    this._promise._setIsSpreadable();
    if (this._howMany === 0) {
        this._resolve([]);
        return;
    }
    this._init$(undefined, -5);
    var isArrayResolved = isArray(this._values);
    if (!this._isResolved() &&
        isArrayResolved &&
        this._howMany > this._canPossiblyFulfill()) {
        this._reject(this._getRangeError(this.length()));
    }
};

SomePromiseArray.prototype.init = function () {
    this._initialized = true;
    this._init();
};

SomePromiseArray.prototype.setUnwrap = function () {
    this._unwrap = true;
};

SomePromiseArray.prototype.howMany = function () {
    return this._howMany;
};

SomePromiseArray.prototype.setHowMany = function (count) {
    if (this._isResolved()) return;
    this._howMany = count;
};

SomePromiseArray.prototype._promiseFulfilled = function (value) {
    this._addFulfilled(value);
    if (this._fulfilled() === this.howMany()) {
        this._values.length = this.howMany();
        if (this.howMany() === 1 && this._unwrap) {
            this._resolve(this._values[0]);
        } else {
            this._resolve(this._values);
        }
    }

};
SomePromiseArray.prototype._promiseRejected = function (reason) {
    this._addRejected(reason);
    if (this.howMany() > this._canPossiblyFulfill()) {
        var e = new AggregateError();
        for (var i = this.length(); i < this._values.length; ++i) {
            e.push(this._values[i]);
        }
        this._reject(e);
    }
};

SomePromiseArray.prototype._fulfilled = function () {
    return this._totalResolved;
};

SomePromiseArray.prototype._rejected = function () {
    return this._values.length - this.length();
};

SomePromiseArray.prototype._addRejected = function (reason) {
    this._values.push(reason);
};

SomePromiseArray.prototype._addFulfilled = function (value) {
    this._values[this._totalResolved++] = value;
};

SomePromiseArray.prototype._canPossiblyFulfill = function () {
    return this.length() - this._rejected();
};

SomePromiseArray.prototype._getRangeError = function (count) {
    var message = "Input array must contain at least " +
            this._howMany + " items but contains only " + count + " items";
    return new RangeError(message);
};

SomePromiseArray.prototype._resolveEmptyArray = function () {
    this._reject(this._getRangeError(0));
};

function some(promises, howMany) {
    if ((howMany | 0) !== howMany || howMany < 0) {
        return apiRejection("expecting a positive integer\u000a\u000a    See http://goo.gl/1wAmHx\u000a");
    }
    var ret = new SomePromiseArray(promises);
    var promise = ret.promise();
    if (promise.isRejected()) {
        return promise;
    }
    ret.setHowMany(howMany);
    ret.init();
    return promise;
}

Promise.some = function (promises, howMany) {
    return some(promises, howMany);
};

Promise.prototype.some = function (howMany) {
    return some(this, howMany);
};

Promise._SomePromiseArray = SomePromiseArray;
};

},{"./errors.js":"/Users/sash/development/js/imglykit-rewrite/node_modules/bluebird/js/main/errors.js","./util.js":"/Users/sash/development/js/imglykit-rewrite/node_modules/bluebird/js/main/util.js"}],"/Users/sash/development/js/imglykit-rewrite/node_modules/bluebird/js/main/synchronous_inspection.js":[function(require,module,exports){
"use strict";
module.exports = function(Promise) {
function PromiseInspection(promise) {
    if (promise !== undefined) {
        promise = promise._target();
        this._bitField = promise._bitField;
        this._settledValue = promise._isResolved()
            ? promise._settledValue
            : undefined;
    }
    else {
        this._bitField = 0;
        this._settledValue = undefined;
    }
}

PromiseInspection.prototype.value = function () {
    if (!this.isFulfilled()) {
        throw new TypeError("cannot get fulfillment value of a non-fulfilled promise\u000a\u000a    See http://goo.gl/hc1DLj\u000a");
    }
    return this._settledValue;
};

PromiseInspection.prototype.error =
PromiseInspection.prototype.reason = function () {
    if (!this.isRejected()) {
        throw new TypeError("cannot get rejection reason of a non-rejected promise\u000a\u000a    See http://goo.gl/hPuiwB\u000a");
    }
    return this._settledValue;
};

PromiseInspection.prototype.isFulfilled =
Promise.prototype._isFulfilled = function () {
    return (this._bitField & 268435456) > 0;
};

PromiseInspection.prototype.isRejected =
Promise.prototype._isRejected = function () {
    return (this._bitField & 134217728) > 0;
};

PromiseInspection.prototype.isPending =
Promise.prototype._isPending = function () {
    return (this._bitField & 402653184) === 0;
};

PromiseInspection.prototype.isResolved =
Promise.prototype._isResolved = function () {
    return (this._bitField & 402653184) > 0;
};

Promise.prototype.isPending = function() {
    return this._target()._isPending();
};

Promise.prototype.isRejected = function() {
    return this._target()._isRejected();
};

Promise.prototype.isFulfilled = function() {
    return this._target()._isFulfilled();
};

Promise.prototype.isResolved = function() {
    return this._target()._isResolved();
};

Promise.prototype._value = function() {
    return this._settledValue;
};

Promise.prototype._reason = function() {
    return this._settledValue;
};

Promise.prototype.value = function() {
    var target = this._target();
    if (!target.isFulfilled()) {
        throw new TypeError("cannot get fulfillment value of a non-fulfilled promise\u000a\u000a    See http://goo.gl/hc1DLj\u000a");
    }
    return target._settledValue;
};

Promise.prototype.reason = function() {
    var target = this._target();
    if (!target.isRejected()) {
        throw new TypeError("cannot get rejection reason of a non-rejected promise\u000a\u000a    See http://goo.gl/hPuiwB\u000a");
    }
    return target._settledValue;
};


Promise.PromiseInspection = PromiseInspection;
};

},{}],"/Users/sash/development/js/imglykit-rewrite/node_modules/bluebird/js/main/thenables.js":[function(require,module,exports){
"use strict";
module.exports = function(Promise, INTERNAL) {
var util = require("./util.js");
var canAttachTrace = require("./errors.js").canAttachTrace;
var errorObj = util.errorObj;
var isObject = util.isObject;

function getThen(obj) {
    try {
        return obj.then;
    }
    catch(e) {
        errorObj.e = e;
        return errorObj;
    }
}

function tryConvertToPromise(obj, traceParent) {
    if (isObject(obj)) {
        if (obj instanceof Promise) {
            return obj;
        }
        else if (isAnyBluebirdPromise(obj)) {
            var ret = new Promise(INTERNAL);
            obj._then(
                ret._fulfillUnchecked,
                ret._rejectUncheckedCheckError,
                ret._progressUnchecked,
                ret,
                null
            );
            return ret;
        }
        var then = getThen(obj);
        if (then === errorObj) {
            if (traceParent !== undefined && canAttachTrace(then.e)) {
                traceParent._attachExtraTrace(then.e);
            }
            return Promise.reject(then.e);
        } else if (typeof then === "function") {
            return doThenable(obj, then, traceParent);
        }
    }
    return obj;
}

var hasProp = {}.hasOwnProperty;
function isAnyBluebirdPromise(obj) {
    return hasProp.call(obj, "_promise0");
}

function doThenable(x, then, traceParent) {
    var resolver = Promise.defer();
    var called = false;
    try {
        then.call(
            x,
            resolveFromThenable,
            rejectFromThenable,
            progressFromThenable
        );
    } catch(e) {
        if (!called) {
            called = true;
            var trace = canAttachTrace(e) ? e : new Error(util.toString(e));
            if (traceParent !== undefined) {
                traceParent._attachExtraTrace(trace);
            }
            resolver.promise._reject(e, trace);
        }
    }
    return resolver.promise;

    function resolveFromThenable(y) {
        if (called) return;
        called = true;

        if (x === y) {
            var e = Promise._makeSelfResolutionError();
            if (traceParent !== undefined) {
                traceParent._attachExtraTrace(e);
            }
            resolver.promise._reject(e, undefined);
            return;
        }
        resolver.resolve(y);
    }

    function rejectFromThenable(r) {
        if (called) return;
        called = true;
        var trace = canAttachTrace(r) ? r : new Error(util.toString(r));
        if (traceParent !== undefined) {
            traceParent._attachExtraTrace(trace);
        }
        resolver.promise._reject(r, trace);
    }

    function progressFromThenable(v) {
        if (called) return;
        var promise = resolver.promise;
        if (typeof promise._progress === "function") {
            promise._progress(v);
        }
    }
}

return tryConvertToPromise;
};

},{"./errors.js":"/Users/sash/development/js/imglykit-rewrite/node_modules/bluebird/js/main/errors.js","./util.js":"/Users/sash/development/js/imglykit-rewrite/node_modules/bluebird/js/main/util.js"}],"/Users/sash/development/js/imglykit-rewrite/node_modules/bluebird/js/main/timers.js":[function(require,module,exports){
"use strict";
module.exports = function(Promise, INTERNAL, tryConvertToPromise) {
var errors = require("./errors.js");
var TimeoutError = Promise.TimeoutError;

var afterTimeout = function (promise, message) {
    if (!promise.isPending()) return;
    if (typeof message !== "string") {
        message = "operation timed out";
    }
    var err = new TimeoutError(message);
    errors.markAsOriginatingFromRejection(err);
    promise._attachExtraTrace(err);
    promise._cancel(err);
};

var afterDelay = function (value, promise) {
    promise._fulfill(value);
};

var delay = Promise.delay = function (value, ms) {
    if (ms === undefined) {
        ms = value;
        value = undefined;
    }
    ms = +ms;
    var maybePromise = tryConvertToPromise(value, undefined);
    var promise = new Promise(INTERNAL);

    if (maybePromise instanceof Promise) {
        promise._propagateFrom(maybePromise, 4 | 1);
        promise._follow(maybePromise._target());
        return promise.then(function(value) {
            return Promise.delay(value, ms);
        });
    } else {
        setTimeout(function delayTimeout() {
            afterDelay(value, promise);
        }, ms);
    }
    return promise;
};

Promise.prototype.delay = function (ms) {
    return delay(this, ms);
};

function successClear(value) {
    var handle = this;
    if (handle instanceof Number) handle = +handle;
    clearTimeout(handle);
    return value;
}

function failureClear(reason) {
    var handle = this;
    if (handle instanceof Number) handle = +handle;
    clearTimeout(handle);
    throw reason;
}

Promise.prototype.timeout = function (ms, message) {
    var target = this._target();
    ms = +ms;
    var ret = new Promise(INTERNAL).cancellable();
    ret._propagateFrom(this, 4 | 1);
    ret._follow(target);
    var handle = setTimeout(function timeoutTimeout() {
        afterTimeout(ret, message);
    }, ms);
    return ret._then(successClear, failureClear, undefined, handle, undefined);
};

};

},{"./errors.js":"/Users/sash/development/js/imglykit-rewrite/node_modules/bluebird/js/main/errors.js"}],"/Users/sash/development/js/imglykit-rewrite/node_modules/bluebird/js/main/using.js":[function(require,module,exports){
"use strict";
module.exports = function (Promise, apiRejection, tryConvertToPromise,
    createContext) {
    var TypeError = require("./errors.js").TypeError;
    var inherits = require("./util.js").inherits;
    var PromiseInspection = Promise.PromiseInspection;

    function inspectionMapper(inspections) {
        var len = inspections.length;
        for (var i = 0; i < len; ++i) {
            var inspection = inspections[i];
            if (inspection.isRejected()) {
                return Promise.reject(inspection.error());
            }
            inspections[i] = inspection._settledValue;
        }
        return inspections;
    }

    function thrower(e) {
        setTimeout(function(){throw e;}, 0);
    }

    function castPreservingDisposable(thenable) {
        var maybePromise = tryConvertToPromise(thenable, undefined);
        if (maybePromise !== thenable &&
            typeof thenable._isDisposable === "function" &&
            typeof thenable._getDisposer === "function" &&
            thenable._isDisposable()) {
            maybePromise._setDisposable(thenable._getDisposer());
        }
        return maybePromise;
    }
    function dispose(resources, inspection) {
        var i = 0;
        var len = resources.length;
        var ret = Promise.defer();
        function iterator() {
            if (i >= len) return ret.resolve();
            var maybePromise = castPreservingDisposable(resources[i++]);
            if (maybePromise instanceof Promise &&
                maybePromise._isDisposable()) {
                try {
                    maybePromise = tryConvertToPromise(
                        maybePromise._getDisposer().tryDispose(inspection),
                        undefined);
                } catch (e) {
                    return thrower(e);
                }
                if (maybePromise instanceof Promise) {
                    return maybePromise._then(iterator, thrower,
                                              null, null, null);
                }
            }
            iterator();
        }
        iterator();
        return ret.promise;
    }

    function disposerSuccess(value) {
        var inspection = new PromiseInspection();
        inspection._settledValue = value;
        inspection._bitField = 268435456;
        return dispose(this, inspection).thenReturn(value);
    }

    function disposerFail(reason) {
        var inspection = new PromiseInspection();
        inspection._settledValue = reason;
        inspection._bitField = 134217728;
        return dispose(this, inspection).thenThrow(reason);
    }

    function Disposer(data, promise, context) {
        this._data = data;
        this._promise = promise;
        this._context = context;
    }

    Disposer.prototype.data = function () {
        return this._data;
    };

    Disposer.prototype.promise = function () {
        return this._promise;
    };

    Disposer.prototype.resource = function () {
        if (this.promise().isFulfilled()) {
            return this.promise().value();
        }
        return null;
    };

    Disposer.prototype.tryDispose = function(inspection) {
        var resource = this.resource();
        var context = this._context;
        if (context !== undefined) context._pushContext();
        var ret = resource !== null
            ? this.doDispose(resource, inspection) : null;
        if (context !== undefined) context._popContext();
        this._promise._unsetDisposable();
        this._data = null;
        return ret;
    };

    Disposer.isDisposer = function (d) {
        return (d != null &&
                typeof d.resource === "function" &&
                typeof d.tryDispose === "function");
    };

    function FunctionDisposer(fn, promise) {
        this.constructor$(fn, promise);
    }
    inherits(FunctionDisposer, Disposer);

    FunctionDisposer.prototype.doDispose = function (resource, inspection) {
        var fn = this.data();
        return fn.call(resource, resource, inspection);
    };

    function maybeUnwrapDisposer(value) {
        if (Disposer.isDisposer(value)) {
            this.resources[this.index]._setDisposable(value);
            return value.promise();
        }
        return value;
    }

    Promise.using = function () {
        var len = arguments.length;
        if (len < 2) return apiRejection(
                        "you must pass at least 2 arguments to Promise.using");
        var fn = arguments[len - 1];
        if (typeof fn !== "function") return apiRejection("fn must be a function\u000a\u000a    See http://goo.gl/916lJJ\u000a");
        len--;
        var resources = new Array(len);
        for (var i = 0; i < len; ++i) {
            var resource = arguments[i];
            if (Disposer.isDisposer(resource)) {
                var disposer = resource;
                resource = resource.promise();
                resource._setDisposable(disposer);
            } else {
                var maybePromise = tryConvertToPromise(resource, undefined);
                if (maybePromise instanceof Promise) {
                    resource =
                        maybePromise._then(maybeUnwrapDisposer, null, null, {
                            resources: resources,
                            index: i
                    }, undefined);
                }
            }
            resources[i] = resource;
        }

        var promise = Promise.settle(resources)
            .then(inspectionMapper)
            .then(function(vals) {
                promise._pushContext();
                var ret;
                try {
                    ret = fn.apply(undefined, vals);
                } finally {
                    promise._popContext();
                }
                return ret;
            })
            ._then(
                disposerSuccess, disposerFail, undefined, resources, undefined);
        return promise;
    };

    Promise.prototype._setDisposable = function (disposer) {
        this._bitField = this._bitField | 262144;
        this._disposer = disposer;
    };

    Promise.prototype._isDisposable = function () {
        return (this._bitField & 262144) > 0;
    };

    Promise.prototype._getDisposer = function () {
        return this._disposer;
    };

    Promise.prototype._unsetDisposable = function () {
        this._bitField = this._bitField & (~262144);
        this._disposer = undefined;
    };

    Promise.prototype.disposer = function (fn) {
        if (typeof fn === "function") {
            return new FunctionDisposer(fn, this, createContext());
        }
        throw new TypeError();
    };

};

},{"./errors.js":"/Users/sash/development/js/imglykit-rewrite/node_modules/bluebird/js/main/errors.js","./util.js":"/Users/sash/development/js/imglykit-rewrite/node_modules/bluebird/js/main/util.js"}],"/Users/sash/development/js/imglykit-rewrite/node_modules/bluebird/js/main/util.js":[function(require,module,exports){
"use strict";
var es5 = require("./es5.js");
var haveGetters = (function(){
    try {
        var o = {};
        es5.defineProperty(o, "f", {
            get: function () {
                return 3;
            }
        });
        return o.f === 3;
    }
    catch (e) {
        return false;
    }

})();
var canEvaluate = typeof navigator == "undefined";
var errorObj = {e: {}};
function tryCatch0(fn, receiver) {
    try { return fn.call(receiver); }
    catch (e) {
        errorObj.e = e;
        return errorObj;
    }
}

function tryCatch1(fn, receiver, arg) {
    try { return fn.call(receiver, arg); }
    catch (e) {
        errorObj.e = e;
        return errorObj;
    }
}

function tryCatch2(fn, receiver, arg, arg2) {
    try { return fn.call(receiver, arg, arg2); }
    catch (e) {
        errorObj.e = e;
        return errorObj;
    }
}

function tryCatch3(fn, receiver, arg, arg2, arg3) {
    try { return fn.call(receiver, arg, arg2, arg3); }
    catch (e) {
        errorObj.e = e;
        return errorObj;
    }
}

function tryCatch4(fn, receiver, arg, arg2, arg3, arg4) {
    try { return fn.call(receiver, arg, arg2, arg3, arg4); }
    catch (e) {
        errorObj.e = e;
        return errorObj;
    }
}

function tryCatchApply(fn, args, receiver) {
    try { return fn.apply(receiver, args); }
    catch (e) {
        errorObj.e = e;
        return errorObj;
    }
}

var inherits = function(Child, Parent) {
    var hasProp = {}.hasOwnProperty;

    function T() {
        this.constructor = Child;
        this.constructor$ = Parent;
        for (var propertyName in Parent.prototype) {
            if (hasProp.call(Parent.prototype, propertyName) &&
                propertyName.charAt(propertyName.length-1) !== "$"
           ) {
                this[propertyName + "$"] = Parent.prototype[propertyName];
            }
        }
    }
    T.prototype = Parent.prototype;
    Child.prototype = new T();
    return Child.prototype;
};

function asString(val) {
    return typeof val === "string" ? val : ("" + val);
}

function isPrimitive(val) {
    return val == null || val === true || val === false ||
        typeof val === "string" || typeof val === "number";

}

function isObject(value) {
    return !isPrimitive(value);
}

function maybeWrapAsError(maybeError) {
    if (!isPrimitive(maybeError)) return maybeError;

    return new Error(asString(maybeError));
}

function withAppended(target, appendee) {
    var len = target.length;
    var ret = new Array(len + 1);
    var i;
    for (i = 0; i < len; ++i) {
        ret[i] = target[i];
    }
    ret[i] = appendee;
    return ret;
}

function getDataPropertyOrDefault(obj, key, defaultValue) {
    if (es5.isES5) {
        var desc = Object.getOwnPropertyDescriptor(obj, key);
        if (desc != null) {
            return desc.get == null && desc.set == null
                    ? desc.value
                    : defaultValue;
        }
    } else {
        return {}.hasOwnProperty.call(obj, key) ? obj[key] : undefined;
    }
}

function notEnumerableProp(obj, name, value) {
    if (isPrimitive(obj)) return obj;
    var descriptor = {
        value: value,
        configurable: true,
        enumerable: false,
        writable: true
    };
    es5.defineProperty(obj, name, descriptor);
    return obj;
}


var wrapsPrimitiveReceiver = (function() {
    return this !== "string";
}).call("string");

function thrower(r) {
    throw r;
}

var inheritedDataKeys = (function() {
    if (es5.isES5) {
        return function(obj, opts) {
            var ret = [];
            var visitedKeys = Object.create(null);
            var getKeys = Object(opts).includeHidden
                ? Object.getOwnPropertyNames
                : Object.keys;
            while (obj != null) {
                var keys;
                try {
                    keys = getKeys(obj);
                } catch (e) {
                    return ret;
                }
                for (var i = 0; i < keys.length; ++i) {
                    var key = keys[i];
                    if (visitedKeys[key]) continue;
                    visitedKeys[key] = true;
                    var desc = Object.getOwnPropertyDescriptor(obj, key);
                    if (desc != null && desc.get == null && desc.set == null) {
                        ret.push(key);
                    }
                }
                obj = es5.getPrototypeOf(obj);
            }
            return ret;
        };
    } else {
        return function(obj) {
            var ret = [];
            /*jshint forin:false */
            for (var key in obj) {
                ret.push(key);
            }
            return ret;
        };
    }

})();

function isClass(fn) {
    try {
        if (typeof fn === "function") {
            var keys = es5.keys(fn.prototype);
            return keys.length > 0 &&
                   !(keys.length === 1 && keys[0] === "constructor");
        }
        return false;
    } catch (e) {
        return false;
    }
}

function toFastProperties(obj) {
    /*jshint -W027*/
    function f() {}
    f.prototype = obj;
    return f;
    eval(obj);
}

var rident = /^[a-z$_][a-z$_0-9]*$/i;
function isIdentifier(str) {
    return rident.test(str);
}

function filledRange(count, prefix, suffix) {
    var ret = new Array(count);
    for(var i = 0; i < count; ++i) {
        ret[i] = prefix + i + suffix;
    }
    return ret;
}

function safeToString(obj) {
    try {
        return obj + "";
    } catch (e) {
        return "[no string representation]";
    }
}

var ret = {
    isClass: isClass,
    isIdentifier: isIdentifier,
    inheritedDataKeys: inheritedDataKeys,
    getDataPropertyOrDefault: getDataPropertyOrDefault,
    thrower: thrower,
    isArray: es5.isArray,
    haveGetters: haveGetters,
    notEnumerableProp: notEnumerableProp,
    isPrimitive: isPrimitive,
    isObject: isObject,
    canEvaluate: canEvaluate,
    errorObj: errorObj,
    tryCatch0: tryCatch0,
    tryCatch1: tryCatch1,
    tryCatch2: tryCatch2,
    tryCatch3: tryCatch3,
    tryCatch4: tryCatch4,
    tryCatchApply: tryCatchApply,
    inherits: inherits,
    withAppended: withAppended,
    asString: asString,
    maybeWrapAsError: maybeWrapAsError,
    wrapsPrimitiveReceiver: wrapsPrimitiveReceiver,
    toFastProperties: toFastProperties,
    filledRange: filledRange,
    toString: safeToString
};
try {throw new Error(); } catch (e) {ret.lastLineError = e;}
module.exports = ret;

},{"./es5.js":"/Users/sash/development/js/imglykit-rewrite/node_modules/bluebird/js/main/es5.js"}],"/Users/sash/development/js/imglykit-rewrite/node_modules/browserify/lib/_empty.js":[function(require,module,exports){

},{}],"/Users/sash/development/js/imglykit-rewrite/node_modules/browserify/node_modules/path-browserify/index.js":[function(require,module,exports){
(function (process){
// Copyright Joyent, Inc. and other Node contributors.
//
// Permission is hereby granted, free of charge, to any person obtaining a
// copy of this software and associated documentation files (the
// "Software"), to deal in the Software without restriction, including
// without limitation the rights to use, copy, modify, merge, publish,
// distribute, sublicense, and/or sell copies of the Software, and to permit
// persons to whom the Software is furnished to do so, subject to the
// following conditions:
//
// The above copyright notice and this permission notice shall be included
// in all copies or substantial portions of the Software.
//
// THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS
// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF
// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN
// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,
// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR
// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE
// USE OR OTHER DEALINGS IN THE SOFTWARE.

// resolves . and .. elements in a path array with directory names there
// must be no slashes, empty elements, or device names (c:\) in the array
// (so also no leading and trailing slashes - it does not distinguish
// relative and absolute paths)
function normalizeArray(parts, allowAboveRoot) {
  // if the path tries to go above the root, `up` ends up > 0
  var up = 0;
  for (var i = parts.length - 1; i >= 0; i--) {
    var last = parts[i];
    if (last === '.') {
      parts.splice(i, 1);
    } else if (last === '..') {
      parts.splice(i, 1);
      up++;
    } else if (up) {
      parts.splice(i, 1);
      up--;
    }
  }

  // if the path is allowed to go above the root, restore leading ..s
  if (allowAboveRoot) {
    for (; up--; up) {
      parts.unshift('..');
    }
  }

  return parts;
}

// Split a filename into [root, dir, basename, ext], unix version
// 'root' is just a slash, or nothing.
var splitPathRe =
    /^(\/?|)([\s\S]*?)((?:\.{1,2}|[^\/]+?|)(\.[^.\/]*|))(?:[\/]*)$/;
var splitPath = function(filename) {
  return splitPathRe.exec(filename).slice(1);
};

// path.resolve([from ...], to)
// posix version
exports.resolve = function() {
  var resolvedPath = '',
      resolvedAbsolute = false;

  for (var i = arguments.length - 1; i >= -1 && !resolvedAbsolute; i--) {
    var path = (i >= 0) ? arguments[i] : process.cwd();

    // Skip empty and invalid entries
    if (typeof path !== 'string') {
      throw new TypeError('Arguments to path.resolve must be strings');
    } else if (!path) {
      continue;
    }

    resolvedPath = path + '/' + resolvedPath;
    resolvedAbsolute = path.charAt(0) === '/';
  }

  // At this point the path should be resolved to a full absolute path, but
  // handle relative paths to be safe (might happen when process.cwd() fails)

  // Normalize the path
  resolvedPath = normalizeArray(filter(resolvedPath.split('/'), function(p) {
    return !!p;
  }), !resolvedAbsolute).join('/');

  return ((resolvedAbsolute ? '/' : '') + resolvedPath) || '.';
};

// path.normalize(path)
// posix version
exports.normalize = function(path) {
  var isAbsolute = exports.isAbsolute(path),
      trailingSlash = substr(path, -1) === '/';

  // Normalize the path
  path = normalizeArray(filter(path.split('/'), function(p) {
    return !!p;
  }), !isAbsolute).join('/');

  if (!path && !isAbsolute) {
    path = '.';
  }
  if (path && trailingSlash) {
    path += '/';
  }

  return (isAbsolute ? '/' : '') + path;
};

// posix version
exports.isAbsolute = function(path) {
  return path.charAt(0) === '/';
};

// posix version
exports.join = function() {
  var paths = Array.prototype.slice.call(arguments, 0);
  return exports.normalize(filter(paths, function(p, index) {
    if (typeof p !== 'string') {
      throw new TypeError('Arguments to path.join must be strings');
    }
    return p;
  }).join('/'));
};


// path.relative(from, to)
// posix version
exports.relative = function(from, to) {
  from = exports.resolve(from).substr(1);
  to = exports.resolve(to).substr(1);

  function trim(arr) {
    var start = 0;
    for (; start < arr.length; start++) {
      if (arr[start] !== '') break;
    }

    var end = arr.length - 1;
    for (; end >= 0; end--) {
      if (arr[end] !== '') break;
    }

    if (start > end) return [];
    return arr.slice(start, end - start + 1);
  }

  var fromParts = trim(from.split('/'));
  var toParts = trim(to.split('/'));

  var length = Math.min(fromParts.length, toParts.length);
  var samePartsLength = length;
  for (var i = 0; i < length; i++) {
    if (fromParts[i] !== toParts[i]) {
      samePartsLength = i;
      break;
    }
  }

  var outputParts = [];
  for (var i = samePartsLength; i < fromParts.length; i++) {
    outputParts.push('..');
  }

  outputParts = outputParts.concat(toParts.slice(samePartsLength));

  return outputParts.join('/');
};

exports.sep = '/';
exports.delimiter = ':';

exports.dirname = function(path) {
  var result = splitPath(path),
      root = result[0],
      dir = result[1];

  if (!root && !dir) {
    // No dirname whatsoever
    return '.';
  }

  if (dir) {
    // It has a dirname, strip trailing slash
    dir = dir.substr(0, dir.length - 1);
  }

  return root + dir;
};


exports.basename = function(path, ext) {
  var f = splitPath(path)[2];
  // TODO: make this comparison case-insensitive on windows?
  if (ext && f.substr(-1 * ext.length) === ext) {
    f = f.substr(0, f.length - ext.length);
  }
  return f;
};


exports.extname = function(path) {
  return splitPath(path)[3];
};

function filter (xs, f) {
    if (xs.filter) return xs.filter(f);
    var res = [];
    for (var i = 0; i < xs.length; i++) {
        if (f(xs[i], i, xs)) res.push(xs[i]);
    }
    return res;
}

// String.prototype.substr - negative index don't work in IE8
var substr = 'ab'.substr(-1) === 'b'
    ? function (str, start, len) { return str.substr(start, len) }
    : function (str, start, len) {
        if (start < 0) start = str.length + start;
        return str.substr(start, len);
    }
;

}).call(this,require('_process'))
},{"_process":"/Users/sash/development/js/imglykit-rewrite/node_modules/browserify/node_modules/process/browser.js"}],"/Users/sash/development/js/imglykit-rewrite/node_modules/browserify/node_modules/process/browser.js":[function(require,module,exports){
// shim for using process in browser

var process = module.exports = {};

process.nextTick = (function () {
    var canSetImmediate = typeof window !== 'undefined'
    && window.setImmediate;
    var canMutationObserver = typeof window !== 'undefined'
    && window.MutationObserver;
    var canPost = typeof window !== 'undefined'
    && window.postMessage && window.addEventListener
    ;

    if (canSetImmediate) {
        return function (f) { return window.setImmediate(f) };
    }

    var queue = [];

    if (canMutationObserver) {
        var hiddenDiv = document.createElement("div");
        var observer = new MutationObserver(function () {
            var queueList = queue.slice();
            queue.length = 0;
            queueList.forEach(function (fn) {
                fn();
            });
        });

        observer.observe(hiddenDiv, { attributes: true });

        return function nextTick(fn) {
            if (!queue.length) {
                hiddenDiv.setAttribute('yes', 'no');
            }
            queue.push(fn);
        };
    }

    if (canPost) {
        window.addEventListener('message', function (ev) {
            var source = ev.source;
            if ((source === window || source === null) && ev.data === 'process-tick') {
                ev.stopPropagation();
                if (queue.length > 0) {
                    var fn = queue.shift();
                    fn();
                }
            }
        }, true);

        return function nextTick(fn) {
            queue.push(fn);
            window.postMessage('process-tick', '*');
        };
    }

    return function nextTick(fn) {
        setTimeout(fn, 0);
    };
})();

process.title = 'browser';
process.browser = true;
process.env = {};
process.argv = [];

function noop() {}

process.on = noop;
process.addListener = noop;
process.once = noop;
process.off = noop;
process.removeListener = noop;
process.removeAllListeners = noop;
process.emit = noop;

process.binding = function (name) {
    throw new Error('process.binding is not supported');
};

// TODO(shtylman)
process.cwd = function () { return '/' };
process.chdir = function (dir) {
    throw new Error('process.chdir is not supported');
};

},{}],"/Users/sash/development/js/imglykit-rewrite/node_modules/dot/doT.js":[function(require,module,exports){
// doT.js
// 2011-2014, Laura Doktorova, https://github.com/olado/doT
// Licensed under the MIT license.

(function() {
	"use strict";

	var doT = {
		version: "1.0.3",
		templateSettings: {
			evaluate:    /\{\{([\s\S]+?(\}?)+)\}\}/g,
			interpolate: /\{\{=([\s\S]+?)\}\}/g,
			encode:      /\{\{!([\s\S]+?)\}\}/g,
			use:         /\{\{#([\s\S]+?)\}\}/g,
			useParams:   /(^|[^\w$])def(?:\.|\[[\'\"])([\w$\.]+)(?:[\'\"]\])?\s*\:\s*([\w$\.]+|\"[^\"]+\"|\'[^\']+\'|\{[^\}]+\})/g,
			define:      /\{\{##\s*([\w\.$]+)\s*(\:|=)([\s\S]+?)#\}\}/g,
			defineParams:/^\s*([\w$]+):([\s\S]+)/,
			conditional: /\{\{\?(\?)?\s*([\s\S]*?)\s*\}\}/g,
			iterate:     /\{\{~\s*(?:\}\}|([\s\S]+?)\s*\:\s*([\w$]+)\s*(?:\:\s*([\w$]+))?\s*\}\})/g,
			varname:	"it",
			strip:		true,
			append:		true,
			selfcontained: false,
			doNotSkipEncoded: false
		},
		template: undefined, //fn, compile template
		compile:  undefined  //fn, for express
	}, _globals;

	doT.encodeHTMLSource = function(doNotSkipEncoded) {
		var encodeHTMLRules = { "&": "&#38;", "<": "&#60;", ">": "&#62;", '"': "&#34;", "'": "&#39;", "/": "&#47;" },
			matchHTML = doNotSkipEncoded ? /[&<>"'\/]/g : /&(?!#?\w+;)|<|>|"|'|\//g;
		return function(code) {
			return code ? code.toString().replace(matchHTML, function(m) {return encodeHTMLRules[m] || m;}) : "";
		};
	};

	_globals = (function(){ return this || (0,eval)("this"); }());

	if (typeof module !== "undefined" && module.exports) {
		module.exports = doT;
	} else if (typeof define === "function" && define.amd) {
		define(function(){return doT;});
	} else {
		_globals.doT = doT;
	}

	var startend = {
		append: { start: "'+(",      end: ")+'",      startencode: "'+encodeHTML(" },
		split:  { start: "';out+=(", end: ");out+='", startencode: "';out+=encodeHTML(" }
	}, skip = /$^/;

	function resolveDefs(c, block, def) {
		return ((typeof block === "string") ? block : block.toString())
		.replace(c.define || skip, function(m, code, assign, value) {
			if (code.indexOf("def.") === 0) {
				code = code.substring(4);
			}
			if (!(code in def)) {
				if (assign === ":") {
					if (c.defineParams) value.replace(c.defineParams, function(m, param, v) {
						def[code] = {arg: param, text: v};
					});
					if (!(code in def)) def[code]= value;
				} else {
					new Function("def", "def['"+code+"']=" + value)(def);
				}
			}
			return "";
		})
		.replace(c.use || skip, function(m, code) {
			if (c.useParams) code = code.replace(c.useParams, function(m, s, d, param) {
				if (def[d] && def[d].arg && param) {
					var rw = (d+":"+param).replace(/'|\\/g, "_");
					def.__exp = def.__exp || {};
					def.__exp[rw] = def[d].text.replace(new RegExp("(^|[^\\w$])" + def[d].arg + "([^\\w$])", "g"), "$1" + param + "$2");
					return s + "def.__exp['"+rw+"']";
				}
			});
			var v = new Function("def", "return " + code)(def);
			return v ? resolveDefs(c, v, def) : v;
		});
	}

	function unescape(code) {
		return code.replace(/\\('|\\)/g, "$1").replace(/[\r\t\n]/g, " ");
	}

	doT.template = function(tmpl, c, def) {
		c = c || doT.templateSettings;
		var cse = c.append ? startend.append : startend.split, needhtmlencode, sid = 0, indv,
			str  = (c.use || c.define) ? resolveDefs(c, tmpl, def || {}) : tmpl;

		str = ("var out='" + (c.strip ? str.replace(/(^|\r|\n)\t* +| +\t*(\r|\n|$)/g," ")
					.replace(/\r|\n|\t|\/\*[\s\S]*?\*\//g,""): str)
			.replace(/'|\\/g, "\\$&")
			.replace(c.interpolate || skip, function(m, code) {
				return cse.start + unescape(code) + cse.end;
			})
			.replace(c.encode || skip, function(m, code) {
				needhtmlencode = true;
				return cse.startencode + unescape(code) + cse.end;
			})
			.replace(c.conditional || skip, function(m, elsecase, code) {
				return elsecase ?
					(code ? "';}else if(" + unescape(code) + "){out+='" : "';}else{out+='") :
					(code ? "';if(" + unescape(code) + "){out+='" : "';}out+='");
			})
			.replace(c.iterate || skip, function(m, iterate, vname, iname) {
				if (!iterate) return "';} } out+='";
				sid+=1; indv=iname || "i"+sid; iterate=unescape(iterate);
				return "';var arr"+sid+"="+iterate+";if(arr"+sid+"){var "+vname+","+indv+"=-1,l"+sid+"=arr"+sid+".length-1;while("+indv+"<l"+sid+"){"
					+vname+"=arr"+sid+"["+indv+"+=1];out+='";
			})
			.replace(c.evaluate || skip, function(m, code) {
				return "';" + unescape(code) + "out+='";
			})
			+ "';return out;")
			.replace(/\n/g, "\\n").replace(/\t/g, '\\t').replace(/\r/g, "\\r")
			.replace(/(\s|;|\}|^|\{)out\+='';/g, '$1').replace(/\+''/g, "");
			//.replace(/(\s|;|\}|^|\{)out\+=''\+/g,'$1out+=');

		if (needhtmlencode) {
			if (!c.selfcontained && _globals && !_globals._encodeHTML) _globals._encodeHTML = doT.encodeHTMLSource(c.doNotSkipEncoded);
			str = "var encodeHTML = typeof _encodeHTML !== 'undefined' ? _encodeHTML : ("
				+ doT.encodeHTMLSource.toString() + "(" + (c.doNotSkipEncoded || '') + "));"
				+ str;
		}
		try {
			return new Function(c.varname, str);
		} catch (e) {
			if (typeof console !== "undefined") console.log("Could not create a template function: " + str);
			throw e;
		}
	};

	doT.compile = function(tmpl, def) {
		return doT.template(tmpl, null, def);
	};
}());

},{}],"/Users/sash/development/js/imglykit-rewrite/node_modules/dot/index.js":[function(require,module,exports){
/* doT + auto-compilation of doT templates
 *
 * 2012, Laura Doktorova, https://github.com/olado/doT
 * Licensed under the MIT license
 *
 * Compiles .def, .dot, .jst files found under the specified path.
 * It ignores sub-directories.
 * Template files can have multiple extensions at the same time.
 * Files with .def extension can be included in other files via {{#def.name}}
 * Files with .dot extension are compiled into functions with the same name and
 * can be accessed as renderer.filename
 * Files with .jst extension are compiled into .js files. Produced .js file can be
 * loaded as a commonJS, AMD module, or just installed into a global variable
 * (default is set to window.render).
 * All inline defines defined in the .jst file are
 * compiled into separate functions and are available via _render.filename.definename
 *
 * Basic usage:
 * var dots = require("dot").process({path: "./views"});
 * dots.mytemplate({foo:"hello world"});
 *
 * The above snippet will:
 * 1. Compile all templates in views folder (.dot, .def, .jst)
 * 2. Place .js files compiled from .jst templates into the same folder.
 *    These files can be used with require, i.e. require("./views/mytemplate").
 * 3. Return an object with functions compiled from .dot templates as its properties.
 * 4. Render mytemplate template.
 */

var fs = require("fs"),
	doT = module.exports = require("./doT");

doT.process = function(options) {
	//path, destination, global, rendermodule, templateSettings
	return new InstallDots(options).compileAll();
};

function InstallDots(o) {
	this.__path 		= o.path || "./";
	if (this.__path[this.__path.length-1] !== '/') this.__path += '/';
	this.__destination	= o.destination || this.__path;
	if (this.__destination[this.__destination.length-1] !== '/') this.__destination += '/';
	this.__global		= o.global || "window.render";
	this.__rendermodule	= o.rendermodule || {};
	this.__settings 	= o.templateSettings ? copy(o.templateSettings, copy(doT.templateSettings)) : undefined;
	this.__includes		= {};
}

InstallDots.prototype.compileToFile = function(path, template, def) {
	def = def || {};
	var modulename = path.substring(path.lastIndexOf("/")+1, path.lastIndexOf("."))
		, defs = copy(this.__includes, copy(def))
		, settings = this.__settings || doT.templateSettings
		, compileoptions = copy(settings)
		, defaultcompiled = doT.template(template, settings, defs)
		, exports = []
		, compiled = ""
		, fn;

	for (var property in defs) {
		if (defs[property] !== def[property] && defs[property] !== this.__includes[property]) {
			fn = undefined;
			if (typeof defs[property] === 'string') {
				fn = doT.template(defs[property], settings, defs);
			} else if (typeof defs[property] === 'function') {
				fn = defs[property];
			} else if (defs[property].arg) {
				compileoptions.varname = defs[property].arg;
				fn = doT.template(defs[property].text, compileoptions, defs);
			}
			if (fn) {
				compiled += fn.toString().replace('anonymous', property);
				exports.push(property);
			}
		}
	}
	compiled += defaultcompiled.toString().replace('anonymous', modulename);
	fs.writeFileSync(path, "(function(){" + compiled
		+ "var itself=" + modulename + ", _encodeHTML=(" + doT.encodeHTMLSource.toString() + "(" + (settings.doNotSkipEncoded || '') + "));"
		+ addexports(exports)
		+ "if(typeof module!=='undefined' && module.exports) module.exports=itself;else if(typeof define==='function')define(function(){return itself;});else {"
		+ this.__global + "=" + this.__global + "||{};" + this.__global + "['" + modulename + "']=itself;}}());");
};

function addexports(exports) {
	for (var ret ='', i=0; i< exports.length; i++) {
		ret += "itself." + exports[i]+ "=" + exports[i]+";";
	}
	return ret;
}

function copy(o, to) {
	to = to || {};
	for (var property in o) {
		to[property] = o[property];
	}
	return to;
}

function readdata(path) {
	var data = fs.readFileSync(path);
	if (data) return data.toString();
	console.log("problems with " + path);
}

InstallDots.prototype.compilePath = function(path) {
	var data = readdata(path);
	if (data) {
		return doT.template(data,
					this.__settings || doT.templateSettings,
					copy(this.__includes));
	}
};

InstallDots.prototype.compileAll = function() {
	console.log("Compiling all doT templates...");

	var defFolder = this.__path,
		sources = fs.readdirSync(defFolder),
		k, l, name;

	for( k = 0, l = sources.length; k < l; k++) {
		name = sources[k];
		if (/\.def(\.dot|\.jst)?$/.test(name)) {
			console.log("Loaded def " + name);
			this.__includes[name.substring(0, name.indexOf('.'))] = readdata(defFolder + name);
		}
	}

	for( k = 0, l = sources.length; k < l; k++) {
		name = sources[k];
		if (/\.dot(\.def|\.jst)?$/.test(name)) {
			console.log("Compiling " + name + " to function");
			this.__rendermodule[name.substring(0, name.indexOf('.'))] = this.compilePath(defFolder + name);
		}
		if (/\.jst(\.dot|\.def)?$/.test(name)) {
			console.log("Compiling " + name + " to file");
			this.compileToFile(this.__destination + name.substring(0, name.indexOf('.')) + '.js',
					readdata(defFolder + name));
		}
	}
	return this.__rendermodule;
};

},{"./doT":"/Users/sash/development/js/imglykit-rewrite/node_modules/dot/doT.js","fs":"/Users/sash/development/js/imglykit-rewrite/node_modules/browserify/lib/_empty.js"}],"/Users/sash/development/js/imglykit-rewrite/node_modules/es6-symbol/index.js":[function(require,module,exports){
'use strict';

module.exports = require('./is-implemented')() ? Symbol : require('./polyfill');

},{"./is-implemented":"/Users/sash/development/js/imglykit-rewrite/node_modules/es6-symbol/is-implemented.js","./polyfill":"/Users/sash/development/js/imglykit-rewrite/node_modules/es6-symbol/polyfill.js"}],"/Users/sash/development/js/imglykit-rewrite/node_modules/es6-symbol/is-implemented.js":[function(require,module,exports){
'use strict';

module.exports = function () {
	var symbol;
	if (typeof Symbol !== 'function') return false;
	symbol = Symbol('test symbol');
	try { String(symbol); } catch (e) { return false; }
	if (typeof Symbol.iterator === 'symbol') return true;

	// Return 'true' for polyfills
	if (typeof Symbol.isConcatSpreadable !== 'object') return false;
	if (typeof Symbol.isRegExp !== 'object') return false;
	if (typeof Symbol.iterator !== 'object') return false;
	if (typeof Symbol.toPrimitive !== 'object') return false;
	if (typeof Symbol.toStringTag !== 'object') return false;
	if (typeof Symbol.unscopables !== 'object') return false;

	return true;
};

},{}],"/Users/sash/development/js/imglykit-rewrite/node_modules/es6-symbol/node_modules/d/index.js":[function(require,module,exports){
'use strict';

var assign        = require('es5-ext/object/assign')
  , normalizeOpts = require('es5-ext/object/normalize-options')
  , isCallable    = require('es5-ext/object/is-callable')
  , contains      = require('es5-ext/string/#/contains')

  , d;

d = module.exports = function (dscr, value/*, options*/) {
	var c, e, w, options, desc;
	if ((arguments.length < 2) || (typeof dscr !== 'string')) {
		options = value;
		value = dscr;
		dscr = null;
	} else {
		options = arguments[2];
	}
	if (dscr == null) {
		c = w = true;
		e = false;
	} else {
		c = contains.call(dscr, 'c');
		e = contains.call(dscr, 'e');
		w = contains.call(dscr, 'w');
	}

	desc = { value: value, configurable: c, enumerable: e, writable: w };
	return !options ? desc : assign(normalizeOpts(options), desc);
};

d.gs = function (dscr, get, set/*, options*/) {
	var c, e, options, desc;
	if (typeof dscr !== 'string') {
		options = set;
		set = get;
		get = dscr;
		dscr = null;
	} else {
		options = arguments[3];
	}
	if (get == null) {
		get = undefined;
	} else if (!isCallable(get)) {
		options = get;
		get = set = undefined;
	} else if (set == null) {
		set = undefined;
	} else if (!isCallable(set)) {
		options = set;
		set = undefined;
	}
	if (dscr == null) {
		c = true;
		e = false;
	} else {
		c = contains.call(dscr, 'c');
		e = contains.call(dscr, 'e');
	}

	desc = { get: get, set: set, configurable: c, enumerable: e };
	return !options ? desc : assign(normalizeOpts(options), desc);
};

},{"es5-ext/object/assign":"/Users/sash/development/js/imglykit-rewrite/node_modules/es6-symbol/node_modules/es5-ext/object/assign/index.js","es5-ext/object/is-callable":"/Users/sash/development/js/imglykit-rewrite/node_modules/es6-symbol/node_modules/es5-ext/object/is-callable.js","es5-ext/object/normalize-options":"/Users/sash/development/js/imglykit-rewrite/node_modules/es6-symbol/node_modules/es5-ext/object/normalize-options.js","es5-ext/string/#/contains":"/Users/sash/development/js/imglykit-rewrite/node_modules/es6-symbol/node_modules/es5-ext/string/#/contains/index.js"}],"/Users/sash/development/js/imglykit-rewrite/node_modules/es6-symbol/node_modules/es5-ext/object/assign/index.js":[function(require,module,exports){
'use strict';

module.exports = require('./is-implemented')()
	? Object.assign
	: require('./shim');

},{"./is-implemented":"/Users/sash/development/js/imglykit-rewrite/node_modules/es6-symbol/node_modules/es5-ext/object/assign/is-implemented.js","./shim":"/Users/sash/development/js/imglykit-rewrite/node_modules/es6-symbol/node_modules/es5-ext/object/assign/shim.js"}],"/Users/sash/development/js/imglykit-rewrite/node_modules/es6-symbol/node_modules/es5-ext/object/assign/is-implemented.js":[function(require,module,exports){
'use strict';

module.exports = function () {
	var assign = Object.assign, obj;
	if (typeof assign !== 'function') return false;
	obj = { foo: 'raz' };
	assign(obj, { bar: 'dwa' }, { trzy: 'trzy' });
	return (obj.foo + obj.bar + obj.trzy) === 'razdwatrzy';
};

},{}],"/Users/sash/development/js/imglykit-rewrite/node_modules/es6-symbol/node_modules/es5-ext/object/assign/shim.js":[function(require,module,exports){
'use strict';

var keys  = require('../keys')
  , value = require('../valid-value')

  , max = Math.max;

module.exports = function (dest, src/*, …srcn*/) {
	var error, i, l = max(arguments.length, 2), assign;
	dest = Object(value(dest));
	assign = function (key) {
		try { dest[key] = src[key]; } catch (e) {
			if (!error) error = e;
		}
	};
	for (i = 1; i < l; ++i) {
		src = arguments[i];
		keys(src).forEach(assign);
	}
	if (error !== undefined) throw error;
	return dest;
};

},{"../keys":"/Users/sash/development/js/imglykit-rewrite/node_modules/es6-symbol/node_modules/es5-ext/object/keys/index.js","../valid-value":"/Users/sash/development/js/imglykit-rewrite/node_modules/es6-symbol/node_modules/es5-ext/object/valid-value.js"}],"/Users/sash/development/js/imglykit-rewrite/node_modules/es6-symbol/node_modules/es5-ext/object/is-callable.js":[function(require,module,exports){
// Deprecated

'use strict';

module.exports = function (obj) { return typeof obj === 'function'; };

},{}],"/Users/sash/development/js/imglykit-rewrite/node_modules/es6-symbol/node_modules/es5-ext/object/keys/index.js":[function(require,module,exports){
'use strict';

module.exports = require('./is-implemented')()
	? Object.keys
	: require('./shim');

},{"./is-implemented":"/Users/sash/development/js/imglykit-rewrite/node_modules/es6-symbol/node_modules/es5-ext/object/keys/is-implemented.js","./shim":"/Users/sash/development/js/imglykit-rewrite/node_modules/es6-symbol/node_modules/es5-ext/object/keys/shim.js"}],"/Users/sash/development/js/imglykit-rewrite/node_modules/es6-symbol/node_modules/es5-ext/object/keys/is-implemented.js":[function(require,module,exports){
'use strict';

module.exports = function () {
	try {
		Object.keys('primitive');
		return true;
	} catch (e) { return false; }
};

},{}],"/Users/sash/development/js/imglykit-rewrite/node_modules/es6-symbol/node_modules/es5-ext/object/keys/shim.js":[function(require,module,exports){
'use strict';

var keys = Object.keys;

module.exports = function (object) {
	return keys(object == null ? object : Object(object));
};

},{}],"/Users/sash/development/js/imglykit-rewrite/node_modules/es6-symbol/node_modules/es5-ext/object/normalize-options.js":[function(require,module,exports){
'use strict';

var assign = require('./assign')

  , forEach = Array.prototype.forEach
  , create = Object.create, getPrototypeOf = Object.getPrototypeOf

  , process;

process = function (src, obj) {
	var proto = getPrototypeOf(src);
	return assign(proto ? process(proto, obj) : obj, src);
};

module.exports = function (options/*, …options*/) {
	var result = create(null);
	forEach.call(arguments, function (options) {
		if (options == null) return;
		process(Object(options), result);
	});
	return result;
};

},{"./assign":"/Users/sash/development/js/imglykit-rewrite/node_modules/es6-symbol/node_modules/es5-ext/object/assign/index.js"}],"/Users/sash/development/js/imglykit-rewrite/node_modules/es6-symbol/node_modules/es5-ext/object/valid-value.js":[function(require,module,exports){
'use strict';

module.exports = function (value) {
	if (value == null) throw new TypeError("Cannot use null or undefined");
	return value;
};

},{}],"/Users/sash/development/js/imglykit-rewrite/node_modules/es6-symbol/node_modules/es5-ext/string/#/contains/index.js":[function(require,module,exports){
'use strict';

module.exports = require('./is-implemented')()
	? String.prototype.contains
	: require('./shim');

},{"./is-implemented":"/Users/sash/development/js/imglykit-rewrite/node_modules/es6-symbol/node_modules/es5-ext/string/#/contains/is-implemented.js","./shim":"/Users/sash/development/js/imglykit-rewrite/node_modules/es6-symbol/node_modules/es5-ext/string/#/contains/shim.js"}],"/Users/sash/development/js/imglykit-rewrite/node_modules/es6-symbol/node_modules/es5-ext/string/#/contains/is-implemented.js":[function(require,module,exports){
'use strict';

var str = 'razdwatrzy';

module.exports = function () {
	if (typeof str.contains !== 'function') return false;
	return ((str.contains('dwa') === true) && (str.contains('foo') === false));
};

},{}],"/Users/sash/development/js/imglykit-rewrite/node_modules/es6-symbol/node_modules/es5-ext/string/#/contains/shim.js":[function(require,module,exports){
'use strict';

var indexOf = String.prototype.indexOf;

module.exports = function (searchString/*, position*/) {
	return indexOf.call(this, searchString, arguments[1]) > -1;
};

},{}],"/Users/sash/development/js/imglykit-rewrite/node_modules/es6-symbol/polyfill.js":[function(require,module,exports){
'use strict';

var d = require('d')

  , create = Object.create, defineProperties = Object.defineProperties
  , generateName, Symbol;

generateName = (function () {
	var created = create(null);
	return function (desc) {
		var postfix = 0;
		while (created[desc + (postfix || '')]) ++postfix;
		desc += (postfix || '');
		created[desc] = true;
		return '@@' + desc;
	};
}());

module.exports = Symbol = function (description) {
	var symbol;
	if (this instanceof Symbol) {
		throw new TypeError('TypeError: Symbol is not a constructor');
	}
	symbol = create(Symbol.prototype);
	description = (description === undefined ? '' : String(description));
	return defineProperties(symbol, {
		__description__: d('', description),
		__name__: d('', generateName(description))
	});
};

Object.defineProperties(Symbol, {
	create: d('', Symbol('create')),
	hasInstance: d('', Symbol('hasInstance')),
	isConcatSpreadable: d('', Symbol('isConcatSpreadable')),
	isRegExp: d('', Symbol('isRegExp')),
	iterator: d('', Symbol('iterator')),
	toPrimitive: d('', Symbol('toPrimitive')),
	toStringTag: d('', Symbol('toStringTag')),
	unscopables: d('', Symbol('unscopables'))
});

defineProperties(Symbol.prototype, {
	properToString: d(function () {
		return 'Symbol (' + this.__description__ + ')';
	}),
	toString: d('', function () { return this.__name__; })
});
Object.defineProperty(Symbol.prototype, Symbol.toPrimitive, d('',
	function (hint) {
		throw new TypeError("Conversion of symbol objects is not allowed");
	}));
Object.defineProperty(Symbol.prototype, Symbol.toStringTag, d('c', 'Symbol'));

},{"d":"/Users/sash/development/js/imglykit-rewrite/node_modules/es6-symbol/node_modules/d/index.js"}],"/Users/sash/development/js/imglykit-rewrite/src/js/constants.js":[function(require,module,exports){
"use strict";

/*!
 * Copyright (c) 2013-2015 9elements GmbH
 *
 * Released under Attribution-NonCommercial 3.0 Unported
 * http://creativecommons.org/licenses/by-nc/3.0/
 *
 * For commercial use, please contact us at contact@9elements.com
 */

/**
 * The available render types
 * @enum {string}
 * @alias ImglyKit.RenderType
 */
var RenderType = exports.RenderType = {
  IMAGE: "image",
  DATAURL: "data-url"
};

/**
 * The available output image formats
 * @enum {string}
 * @alias ImglyKit.ImageFormat
 */
var ImageFormat = exports.ImageFormat = {
  PNG: "image/png",
  JPEG: "image/jpeg"
};
Object.defineProperty(exports, "__esModule", {
  value: true
});

},{}],"/Users/sash/development/js/imglykit-rewrite/src/js/imglykit.js":[function(require,module,exports){
"use strict";

var _interopRequire = function (obj) { return obj && obj.__esModule ? obj["default"] : obj; };

var _prototypeProperties = function (child, staticProps, instanceProps) { if (staticProps) Object.defineProperties(child, staticProps); if (instanceProps) Object.defineProperties(child.prototype, instanceProps); };

var _classCallCheck = function (instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } };

/*!
 * Copyright (c) 2013-2015 9elements GmbH
 *
 * Released under Attribution-NonCommercial 3.0 Unported
 * http://creativecommons.org/licenses/by-nc/3.0/
 *
 * For commercial use, please contact us at contact@9elements.com
 */

var _ = _interopRequire(require("lodash"));

var bluebird = _interopRequire(require("bluebird"));

var RenderImage = _interopRequire(require("./lib/render-image"));

var ImageExporter = _interopRequire(require("./lib/image-exporter"));

var _constants = require("./constants");

var RenderType = _constants.RenderType;
var ImageFormat = _constants.ImageFormat;

var Utils = _interopRequire(require("./lib/utils"));

// Default UIs

var NightUI = _interopRequire(require("./ui/night/ui"));

// Don't catch errors
bluebird.onPossiblyUnhandledRejection(function (error) {
  throw error;
});

/**
 * @class
 * @param {Object} options
 * @param {HTMLElement} [options.container] - Specifies where the UI should be
 *                                          added to. If none is given, the UI
 *                                          will automatically be disabled.
 * @param {Image} options.image - The source image
 */

var ImglyKit = (function () {
  function ImglyKit(options) {
    _classCallCheck(this, ImglyKit);

    // `options` is required
    if (typeof options === "undefined") throw new Error("No options given.");

    // Set default options
    options = _.defaults(options, {
      assetsUrl: "assets",
      container: null,
      ui: true,
      renderOnWindowResize: false
    });

    /**
     * @type {Object}
     * @private
     */
    this._options = options;

    /**
     * The stack of {@link Operation} instances that will be used
     * to render the final Image
     * @type {Array.<ImglyKit.Operation>}
     */
    this.operationsStack = [];

    /**
     * The registered UI types that can be selected via the `ui` option
     * @type {Object.<String, UI>}
     * @private
     */
    this._registeredUIs = {};

    // Register the default UIs
    this._registerUIs();

    /**
     * The registered operations
     * @type {Object.<String, ImglyKit.Operation>}
     */
    this._registeredOperations = {};

    // Register the default operations
    this._registerOperations();

    if (this._options.ui) {
      this._initUI();
      if (this._options.renderOnWindowResize) {
        this._handleWindowResize();
      }
    }
  }

  _prototypeProperties(ImglyKit, null, {
    render: {

      /**
       * Renders the image
       * @param  {ImglyKit.RenderType} [renderType=ImglyKit.RenderType.DATA_URL] - The output type
       * @param  {ImglyKit.ImageFormat} [imageFormat=ImglyKit.ImageFormat.PNG] - The output image format
       * @param  {string} [dimensions] - The final dimensions of the image
       * @return {Promise}
       */

      value: function render(renderType, imageFormat, dimensions) {
        // `options.image` is required
        if (typeof this._options.image === "undefined") throw new Error("`options.image` is undefined.");

        var settings = ImageExporter.validateSettings(renderType, imageFormat);

        renderType = settings.renderType;
        imageFormat = settings.imageFormat;

        // Create a RenderImage
        var renderImage = new RenderImage(this._options.image, this.operationsStack, dimensions, this._options.renderer);

        // Set all operations to dirty, since we have another webgl renderer
        var _iteratorNormalCompletion = true;
        var _didIteratorError = false;
        var _iteratorError = undefined;

        try {
          for (var _iterator = this.operationsStack[Symbol.iterator](), _step; !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = true) {
            var operation = _step.value;

            operation.dirty = true;
          }
        } catch (err) {
          _didIteratorError = true;
          _iteratorError = err;
        } finally {
          try {
            if (!_iteratorNormalCompletion && _iterator["return"]) {
              _iterator["return"]();
            }
          } finally {
            if (_didIteratorError) {
              throw _iteratorError;
            }
          }
        }

        // Initiate image rendering
        return renderImage.render().then(function () {
          var canvas = renderImage.getRenderer().getCanvas();
          return ImageExporter["export"](canvas, renderType, imageFormat);
        });
      },
      writable: true,
      configurable: true
    },
    reset: {

      /**
       * Resets all custom and selected operations
       */

      value: function reset() {},
      writable: true,
      configurable: true
    },
    getAssetPath: {

      /**
       * Returns the asset path for the given filename
       * @param  {String} asset
       * @return {String}
       */

      value: function getAssetPath(asset) {
        var isBrowser = typeof window !== "undefined";
        if (isBrowser) {
          /* istanbul ignore next */
          return this._options.assetsUrl + "/" + asset;
        } else {
          var path = require("path");
          return path.resolve(this._options.assetsUrl, asset);
        }
      },
      writable: true,
      configurable: true
    },
    _handleWindowResize: {

      /**
       * If `options.renderOnWindowResize` is set to true, this function
       * will re-render the canvas with a slight delay so that it won't
       * cause lagging of the resize
       * @private
       */

      value: function _handleWindowResize() {
        var _this = this;

        var timer = null;
        window.addEventListener("resize", function () {
          if (timer !== null) {
            clearTimeout(timer);
          }

          timer = setTimeout(function () {
            timer = null;
            _this.ui.render();
          }, 300);
        });
      },
      writable: true,
      configurable: true
    },
    _registerUIs: {

      /**
       * Registers all default UIs
       * @private
       */

      value: function _registerUIs() {
        this.registerUI(NightUI);
      },
      writable: true,
      configurable: true
    },
    _registerOperations: {

      /**
       * Registers all default operations
       * @private
       */

      value: function _registerOperations() {
        for (var operationName in ImglyKit.Operations) {
          this.registerOperation(ImglyKit.Operations[operationName]);
        }
      },
      writable: true,
      configurable: true
    },
    registerOperation: {

      /**
       * Registers the given operation
       * @param {ImglyKit.Operation} operation - The operation class
       */

      value: function registerOperation(operation) {
        this._registeredOperations[operation.prototype.identifier] = operation;
      },
      writable: true,
      configurable: true
    },
    registerUI: {

      /**
       * Registers the given UI
       * @param {UI} ui
       */

      value: function registerUI(ui) {
        this._registeredUIs[ui.prototype.identifier] = ui;
      },
      writable: true,
      configurable: true
    },
    _initUI: {

      /**
       * Initializes the UI
       * @private
       */
      /* istanbul ignore next */

      value: function _initUI() {
        var UI;

        if (this._options.ui === true) {
          // Select the first UI by default
          UI = Utils.values(this._registeredUIs)[0];
        } else {
          // Select the UI with the given identifier
          UI = this._registeredUIs[this._options.ui];
        }

        // Check if UI exists
        if (typeof UI === "undefined") {
          throw new Error("ImglyKit: Unknown UI: " + this._options.ui);
        }

        /**
         * @type {ImglyKit.UI}
         */
        this.ui = new UI(this, this._options);
      },
      writable: true,
      configurable: true
    },
    registeredOperations: {
      get: function () {
        return this._registeredOperations;
      },
      configurable: true
    },
    run: {
      value: function run() {
        if (typeof this.ui !== "undefined") {
          this.ui.run();
        }
      },
      writable: true,
      configurable: true
    }
  });

  return ImglyKit;
})();

/**
 * The current version of the SDK
 * @name ImglyKit.version
 * @internal Keep in sync with package.json
 */
ImglyKit.version = "0.0.1";

// Exposed classes
ImglyKit.RenderImage = RenderImage;
ImglyKit.Color = require("./lib/color");
ImglyKit.Operation = require("./operations/operation");
ImglyKit.Operations = {};
ImglyKit.Operations.FiltersOperation = require("./operations/filters-operation");
ImglyKit.Operations.CropOperation = require("./operations/crop-operation");
ImglyKit.Operations.RotationOperation = require("./operations/rotation-operation");
ImglyKit.Operations.SaturationOperation = require("./operations/saturation-operation");
ImglyKit.Operations.ContrastOperation = require("./operations/contrast-operation");
ImglyKit.Operations.BrightnessOperation = require("./operations/brightness-operation");
ImglyKit.Operations.FlipOperation = require("./operations/flip-operation");
ImglyKit.Operations.TiltShiftOperation = require("./operations/tilt-shift-operation");
ImglyKit.Operations.RadialBlurOperation = require("./operations/radial-blur-operation");
ImglyKit.Operations.TextOperation = require("./operations/text-operation");
ImglyKit.Operations.StickersOperation = require("./operations/stickers-operation");
ImglyKit.Operations.FramesOperation = require("./operations/frames-operation");

ImglyKit.Filters = {};
ImglyKit.Filters.A15 = require("./operations/filters/a15-filter");
ImglyKit.Filters.Breeze = require("./operations/filters/breeze-filter");

// Exposed constants
ImglyKit.RenderType = RenderType;
ImglyKit.ImageFormat = ImageFormat;
ImglyKit.Vector2 = require("./lib/math/vector2");

module.exports = ImglyKit;

},{"./constants":"/Users/sash/development/js/imglykit-rewrite/src/js/constants.js","./lib/color":"/Users/sash/development/js/imglykit-rewrite/src/js/lib/color.js","./lib/image-exporter":"/Users/sash/development/js/imglykit-rewrite/src/js/lib/image-exporter.js","./lib/math/vector2":"/Users/sash/development/js/imglykit-rewrite/src/js/lib/math/vector2.js","./lib/render-image":"/Users/sash/development/js/imglykit-rewrite/src/js/lib/render-image.js","./lib/utils":"/Users/sash/development/js/imglykit-rewrite/src/js/lib/utils.js","./operations/brightness-operation":"/Users/sash/development/js/imglykit-rewrite/src/js/operations/brightness-operation.js","./operations/contrast-operation":"/Users/sash/development/js/imglykit-rewrite/src/js/operations/contrast-operation.js","./operations/crop-operation":"/Users/sash/development/js/imglykit-rewrite/src/js/operations/crop-operation.js","./operations/filters-operation":"/Users/sash/development/js/imglykit-rewrite/src/js/operations/filters-operation.js","./operations/filters/a15-filter":"/Users/sash/development/js/imglykit-rewrite/src/js/operations/filters/a15-filter.js","./operations/filters/breeze-filter":"/Users/sash/development/js/imglykit-rewrite/src/js/operations/filters/breeze-filter.js","./operations/flip-operation":"/Users/sash/development/js/imglykit-rewrite/src/js/operations/flip-operation.js","./operations/frames-operation":"/Users/sash/development/js/imglykit-rewrite/src/js/operations/frames-operation.js","./operations/operation":"/Users/sash/development/js/imglykit-rewrite/src/js/operations/operation.js","./operations/radial-blur-operation":"/Users/sash/development/js/imglykit-rewrite/src/js/operations/radial-blur-operation.js","./operations/rotation-operation":"/Users/sash/development/js/imglykit-rewrite/src/js/operations/rotation-operation.js","./operations/saturation-operation":"/Users/sash/development/js/imglykit-rewrite/src/js/operations/saturation-operation.js","./operations/stickers-operation":"/Users/sash/development/js/imglykit-rewrite/src/js/operations/stickers-operation.js","./operations/text-operation":"/Users/sash/development/js/imglykit-rewrite/src/js/operations/text-operation.js","./operations/tilt-shift-operation":"/Users/sash/development/js/imglykit-rewrite/src/js/operations/tilt-shift-operation.js","./ui/night/ui":"/Users/sash/development/js/imglykit-rewrite/src/js/ui/night/ui.js","bluebird":"/Users/sash/development/js/imglykit-rewrite/node_modules/bluebird/js/main/bluebird.js","lodash":"lodash","path":"/Users/sash/development/js/imglykit-rewrite/node_modules/browserify/node_modules/path-browserify/index.js"}],"/Users/sash/development/js/imglykit-rewrite/src/js/lib/color.js":[function(require,module,exports){
"use strict";

var _prototypeProperties = function (child, staticProps, instanceProps) { if (staticProps) Object.defineProperties(child, staticProps); if (instanceProps) Object.defineProperties(child.prototype, instanceProps); };

var _classCallCheck = function (instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } };

/*!
 * Copyright (c) 2013-2015 9elements GmbH
 *
 * Released under Attribution-NonCommercial 3.0 Unported
 * http://creativecommons.org/licenses/by-nc/3.0/
 *
 * For commercial use, please contact us at contact@9elements.com
 */

/**
 * Represents a color
 * @class
 * @alias ImglyKit.Color
 * @param {Number} r
 * @param {Number} g
 * @param {Number} b
 * @param {Number} [a]
 * @private
 */

var Color = (function () {
  function Color(r, g, b, a) {
    _classCallCheck(this, Color);

    if (typeof a === "undefined") a = 1;

    this.r = r;
    this.g = g;
    this.b = b;
    this.a = a;
  }

  _prototypeProperties(Color, null, {
    toRGBA: {

      /**
       * Returns an rgba() representation of this color
       * @return {String}
       */

      value: function toRGBA() {
        var colors = [Math.round(this.r * 255), Math.round(this.g * 255), Math.round(this.b * 255), this.a];
        return "rgba(" + colors.join(",") + ")";
      },
      writable: true,
      configurable: true
    },
    toHex: {

      /**
       * Returns a hex representation of this color
       * @return {String}
       */

      value: function toHex() {
        var components = [this._componentToHex(Math.round(this.r * 255)), this._componentToHex(Math.round(this.g * 255)), this._componentToHex(Math.round(this.b * 255))];
        return "#" + components.join("");
      },
      writable: true,
      configurable: true
    },
    toGLColor: {

      /**
       * Returns an array with 4 values (0...1)
       * @return {Array.<Number>}
       */

      value: function toGLColor() {
        return [this.r, this.g, this.b, this.a];
      },
      writable: true,
      configurable: true
    },
    toRGBGLColor: {

      /**
       * Returns an array with 3 values (0...1)
       * @return {Array.<Number>}
       */

      value: function toRGBGLColor() {
        return [this.r, this.g, this.b];
      },
      writable: true,
      configurable: true
    },
    toHSV: {

      /**
       * Converts the RGB value to HSV
       * @return {Array.<Number>}
       */

      value: function toHSV() {
        var max = Math.max(this.r, this.g, this.b);
        var min = Math.min(this.r, this.g, this.b);
        var h = undefined,
            s = undefined,
            v = max;
        var d = max - min;
        s = max === 0 ? 0 : d / max;

        if (max == min) {
          h = 0; // achromatic
        } else {
          switch (max) {
            case this.r:
              h = (this.g - this.b) / d + (this.g < this.b ? 6 : 0);
              break;
            case this.g:
              h = (this.b - this.r) / d + 2;
              break;
            case this.b:
              h = (this.r - this.g) / d + 4;
              break;
          }
          h /= 6;
        }

        return [h, s, v];
      },
      writable: true,
      configurable: true
    },
    fromHSV: {

      /**
       * Sets the RGB values of this color to match the given HSV values
       * @param {Number} h
       * @param {Number} s
       * @param {Number} v
       */

      value: function fromHSV(h, s, v) {
        var _ref = this;

        var r = _ref.r;
        var g = _ref.g;
        var b = _ref.b;

        var i = Math.floor(h * 6);
        var f = h * 6 - i;
        var p = v * (1 - s);
        var q = v * (1 - f * s);
        var t = v * (1 - (1 - f) * s);

        switch (i % 6) {
          case 0:
            r = v, g = t, b = p;break;
          case 1:
            r = q, g = v, b = p;break;
          case 2:
            r = p, g = v, b = t;break;
          case 3:
            r = p, g = q, b = v;break;
          case 4:
            r = t, g = p, b = v;break;
          case 5:
            r = v, g = p, b = q;break;
        }

        this.r = r;
        this.g = g;
        this.b = b;
      },
      writable: true,
      configurable: true
    },
    clone: {

      /**
       * Returns a clone of the current color
       * @return {Color}
       */

      value: function clone() {
        return new Color(this.r, this.g, this.b, this.a);
      },
      writable: true,
      configurable: true
    },
    _componentToHex: {

      /**
       * Returns the given number as hex
       * @param  {Number} component
       * @return {String}
       * @private
       */

      value: function _componentToHex(component) {
        var hex = component.toString(16);
        return hex.length == 1 ? "0" + hex : hex;
      },
      writable: true,
      configurable: true
    },
    toString: {

      /**
       * Returns the string representation of this color
       * @returns {String}
       */

      value: function toString() {
        return "Color(" + this.r + "," + this.g + "," + this.b + "," + this.a + ")";
      },
      writable: true,
      configurable: true
    }
  });

  return Color;
})();

module.exports = Color;

},{}],"/Users/sash/development/js/imglykit-rewrite/src/js/lib/event-emitter.js":[function(require,module,exports){
"use strict";

var _prototypeProperties = function (child, staticProps, instanceProps) { if (staticProps) Object.defineProperties(child, staticProps); if (instanceProps) Object.defineProperties(child.prototype, instanceProps); };

var _classCallCheck = function (instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } };

/**
 * EventEmitter (ES6) from:
 * https://gist.github.com/bloodyowl/41b1de3388c626796eca
 */

var DEFAULT_MAX_LISTENERS = 12;

function error(message) {
  for (var _len = arguments.length, args = Array(_len > 1 ? _len - 1 : 0), _key = 1; _key < _len; _key++) {
    args[_key - 1] = arguments[_key];
  }

  console.error.apply(console, [message].concat(args));
  console.trace();
}

var EventEmitter = (function () {
  function EventEmitter() {
    _classCallCheck(this, EventEmitter);

    this._maxListeners = DEFAULT_MAX_LISTENERS;
    this._events = {};
  }

  _prototypeProperties(EventEmitter, null, {
    on: {
      value: function on(type, listener) {
        if (typeof listener != "function") {
          throw new TypeError();
        }

        var listeners = this._events[type] || (this._events[type] = []);
        if (listeners.indexOf(listener) != -1) {
          return this;
        }
        listeners.push(listener);

        if (listeners.length > this._maxListeners) {
          error("possible memory leak, added %i %s listeners, " + "use EventEmitter#setMaxListeners(number) if you " + "want to increase the limit (%i now)", listeners.length, type, this._maxListeners);
        }
        return this;
      },
      writable: true,
      configurable: true
    },
    once: {
      value: function once(type, listener) {
        var eventsInstance = this;
        function onceCallback() {
          eventsInstance.off(type, onceCallback);
          listener.apply(null, arguments);
        }
        return this.on(type, onceCallback);
      },
      writable: true,
      configurable: true
    },
    off: {
      value: function off(type) {
        for (var _len = arguments.length, args = Array(_len > 1 ? _len - 1 : 0), _key = 1; _key < _len; _key++) {
          args[_key - 1] = arguments[_key];
        }

        if (args.length === 0) {
          this._events[type] = null;
        }

        var listener = arguments[1];
        if (typeof listener != "function") {
          throw new TypeError();
        }

        var listeners = this._events[type];
        if (!listeners || !listeners.length) {
          return this;
        }

        var indexOfListener = listeners.indexOf(listener);
        if (indexOfListener == -1) {
          return this;
        }

        listeners.splice(indexOfListener, 1);
        return this;
      },
      writable: true,
      configurable: true
    },
    emit: {
      value: function emit(type) {
        for (var _len = arguments.length, args = Array(_len > 1 ? _len - 1 : 0), _key = 1; _key < _len; _key++) {
          args[_key - 1] = arguments[_key];
        }

        var listeners = this._events[type];
        if (!listeners || !listeners.length) {
          return false;
        }

        listeners.forEach(function (fn) {
          return fn.apply(null, args);
        });

        return true;
      },
      writable: true,
      configurable: true
    },
    setMaxListeners: {
      value: function setMaxListeners(newMaxListeners) {
        if (parseInt(newMaxListeners) !== newMaxListeners) {
          throw new TypeError();
        }

        this._maxListeners = newMaxListeners;
      },
      writable: true,
      configurable: true
    }
  });

  return EventEmitter;
})();

module.exports = EventEmitter;

},{}],"/Users/sash/development/js/imglykit-rewrite/src/js/lib/extend.js":[function(require,module,exports){
"use strict";

/*!
 * Copyright (c) 2013-2015 9elements GmbH
 *
 * Released under Attribution-NonCommercial 3.0 Unported
 * http://creativecommons.org/licenses/by-nc/3.0/
 *
 * For commercial use, please contact us at contact@9elements.com
 */

/**
 * Helper function to correctly set up the prototype chain
 * Based on the backbone.js extend function:
 * https://github.com/jashkenas/backbone/blob/master/backbone.js
 * @param  {Object} prototypeProperties
 * @param  {Object} classProperties
 * @return {Object}
 */
module.exports = function (prototypeProperties, classProperties) {
  /*jshint validthis:true*/
  var parent = this;
  var child;

  // The constructor function for the new subclass is either defined by you
  // (the "constructor" property in your `extend` definition), or defaulted
  // by us to simply call the parent's constructor.
  if (prototypeProperties && prototypeProperties.hasOwnProperty("constructor")) {
    child = prototypeProperties.constructor;
  } else {
    child = function () {
      return parent.apply(this, arguments);
    };
  }

  // Add static properties to the constructor function, if supplied.
  var key;
  for (key in parent) {
    child[key] = parent[key];
  }
  if (typeof classProperties !== "undefined") {
    for (key in classProperties) {
      child[key] = classProperties[key];
    }
  }

  // Set the prototype chain to inherit from `parent`, without calling
  // `parent`'s constructor function.
  var Surrogate = function Surrogate() {
    this.constructor = child;
  };
  Surrogate.prototype = parent.prototype;
  child.prototype = new Surrogate();

  // Add prototype properties (instance properties) to the subclass,
  // if supplied.
  if (prototypeProperties) {
    for (key in prototypeProperties) {
      child.prototype[key] = prototypeProperties[key];
    }
  }

  // Set a convenience property in case the parent's prototype is needed
  // later.
  child.__super__ = parent.prototype;

  return child;
};

},{}],"/Users/sash/development/js/imglykit-rewrite/src/js/lib/image-dimensions.js":[function(require,module,exports){
"use strict";

var _prototypeProperties = function (child, staticProps, instanceProps) { if (staticProps) Object.defineProperties(child, staticProps); if (instanceProps) Object.defineProperties(child.prototype, instanceProps); };

var _classCallCheck = function (instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } };

/*!
 * Copyright (c) 2013-2015 9elements GmbH
 *
 * Released under Attribution-NonCommercial 3.0 Unported
 * http://creativecommons.org/licenses/by-nc/3.0/
 *
 * For commercial use, please contact us at contact@9elements.com
 */

/**
 * Parses the dimensions string and provides calculation functions
 * @class
 * @alias ImglyKit.ImageDimensions
 * @param {string} dimensions
 * @private
 */

var ImageDimensions = (function () {
  function ImageDimensions(dimensions) {
    _classCallCheck(this, ImageDimensions);

    /**
     * The available dimension modifiers
     * @type {Object}
     * @private
     */
    this._modifiers = {
      FIXED: "!"
    };

    /**
     * @type {string}
     * @private
     */
    this._dimensionsString = dimensions;

    /**
     * An object that represents the parsed dimensions string
     * @type {Object}
     */
    this._rules = this._parse();

    this._validateRules();
  }

  _prototypeProperties(ImageDimensions, null, {
    _parse: {

      /**
       * Parses the dimensions string
       * @private
       */

      value: function _parse() {
        if (typeof this._dimensionsString === "undefined") {
          return null;
        }

        var match = this._dimensionsString.match(/^([0-9]+)?x([0-9]+)?([\!])?$/i);
        if (!match) {
          throw new Error("Invalid size option: " + this._dimensionsString);
        }

        return {
          x: isNaN(match[1]) ? null : parseInt(match[1]),
          y: isNaN(match[2]) ? null : parseInt(match[2]),
          modifier: match[3]
        };
      },
      writable: true,
      configurable: true
    },
    _validateRules: {

      /**
       * Validates the rules
       * @private
       */

      value: function _validateRules() {
        if (this._rules === null) {
          return;
        }var xAvailable = this._rules.x !== null;
        var yAvailable = this._rules.y !== null;

        if (this._rules.modifier === this._modifiers.FIXED && !(xAvailable && yAvailable)) {
          throw new Error("Both `x` and `y` have to be set when using the fixed (!) modifier.");
        }

        if (!xAvailable && !yAvailable) {
          throw new Error("Neither `x` nor `y` are given.");
        }
      },
      writable: true,
      configurable: true
    },
    calculateFinalDimensions: {

      /**
       * Calculates the final dimensions using the dimensions string and the
       * given initial dimensions
       * @param  {Vector2} initialDimensions
       * @return {Vector2}
       */

      value: function calculateFinalDimensions(initialDimensions) {
        var dimensions = initialDimensions.clone(),
            ratio;

        if (this._rules === null) {
          return dimensions;
        } /* istanbul ignore else */
        if (this._rules.modifier === this._modifiers.FIXED) {
          // Fixed dimensions
          dimensions.set(this._rules.x, this._rules.y);
        } else if (this._rules.x !== null && this._rules.y !== null) {
          // Both x and y given, resize to fit
          ratio = Math.min(this._rules.x / dimensions.x, this._rules.y / dimensions.y);
          dimensions.multiply(ratio);
        } else if (this._rules.x !== null) {
          // Fixed x, y by ratio
          ratio = initialDimensions.y / initialDimensions.x;
          dimensions.x = this._rules.x;
          dimensions.y = dimensions.x * ratio;
        } else if (this._rules.y !== null) {
          // Fixed y, x by ratio
          ratio = initialDimensions.x / initialDimensions.y;
          dimensions.y = this._rules.y;
          dimensions.x = dimensions.y * ratio;
        }

        return dimensions;
      },
      writable: true,
      configurable: true
    }
  });

  return ImageDimensions;
})();

module.exports = ImageDimensions;

},{}],"/Users/sash/development/js/imglykit-rewrite/src/js/lib/image-exporter.js":[function(require,module,exports){
"use strict";

var _interopRequire = function (obj) { return obj && obj.__esModule ? obj["default"] : obj; };

var _prototypeProperties = function (child, staticProps, instanceProps) { if (staticProps) Object.defineProperties(child, staticProps); if (instanceProps) Object.defineProperties(child.prototype, instanceProps); };

var _classCallCheck = function (instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } };

/*!
 * Copyright (c) 2013-2015 9elements GmbH
 *
 * Released under Attribution-NonCommercial 3.0 Unported
 * http://creativecommons.org/licenses/by-nc/3.0/
 *
 * For commercial use, please contact us at contact@9elements.com
 */

var _constants = require("../constants");

var RenderType = _constants.RenderType;
var ImageFormat = _constants.ImageFormat;

var Utils = _interopRequire(require("./utils"));

/**
 * @class
 * @alias ImglyKit.ImageExporter
 * @private
 */

var ImageExporter = (function () {
  function ImageExporter() {
    _classCallCheck(this, ImageExporter);
  }

  _prototypeProperties(ImageExporter, {
    validateSettings: {
      value: function validateSettings(renderType, imageFormat) {
        var settings = {
          renderType: renderType,
          imageFormat: imageFormat
        };

        // Validate RenderType
        if (typeof settings.renderType !== "undefined" && settings.renderType !== null && Utils.values(RenderType).indexOf(settings.renderType) === -1) {
          throw new Error("Invalid render type: " + settings.renderType);
        } else if (typeof renderType === "undefined") {
          settings.renderType = RenderType.DATA_URL;
        }

        // Validate ImageFormat
        if (typeof settings.imageFormat !== "undefined" && settings.imageFormat !== null && Utils.values(ImageFormat).indexOf(settings.imageFormat) === -1) {
          throw new Error("Invalid image format: " + settings.imageFormat);
        } else if (typeof imageFormat === "undefined") {
          settings.imageFormat = ImageFormat.PNG;
        }

        return settings;
      },
      writable: true,
      configurable: true
    },
    "export": {

      /**
       * Exports the image from the given canvas with the given options
       * @param  {Canvas} canvas
       * @param  {ImglyKit.RenderType} renderType
       * @param  {ImglyKit.ImageFormat} imageFormat
       * @return {string|image}
       */

      value: function _export(canvas, renderType, imageFormat) {
        var result = canvas.toDataURL(imageFormat);
        if (renderType == RenderType.IMAGE) {
          var image;

          /* istanbul ignore else  */
          if (typeof window === "undefined") {
            // Not a browser environment
            var CanvasImage = require("canvas").Image;
            image = new CanvasImage();
          } else {
            image = new Image();
          }

          image.src = result;
          result = image;
        }
        return result;
      },
      writable: true,
      configurable: true
    }
  });

  return ImageExporter;
})();

module.exports = ImageExporter;

},{"../constants":"/Users/sash/development/js/imglykit-rewrite/src/js/constants.js","./utils":"/Users/sash/development/js/imglykit-rewrite/src/js/lib/utils.js","canvas":"canvas"}],"/Users/sash/development/js/imglykit-rewrite/src/js/lib/math/vector2.js":[function(require,module,exports){
"use strict";

var _prototypeProperties = function (child, staticProps, instanceProps) { if (staticProps) Object.defineProperties(child, staticProps); if (instanceProps) Object.defineProperties(child.prototype, instanceProps); };

var _classCallCheck = function (instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } };

/*!
 * Copyright (c) 2013-2015 9elements GmbH
 *
 * Released under Attribution-NonCommercial 3.0 Unported
 * http://creativecommons.org/licenses/by-nc/3.0/
 *
 * For commercial use, please contact us at contact@9elements.com
 */

/**
 * Represents a 2-dimensional vector while providing math functions to
 * modify / clone the vector. Fully chainable.
 * @class
 * @alias ImglyKit.Vector2
 * @param {number} x
 * @param {number} y
 * @private
 */

var Vector2 = (function () {
  function Vector2(x, y) {
    _classCallCheck(this, Vector2);

    this.x = x;
    this.y = y;
    if (typeof this.x === "undefined") {
      this.x = 0;
    }
    if (typeof this.y === "undefined") {
      this.y = 0;
    }
  }

  _prototypeProperties(Vector2, null, {
    set: {

      /**
       * Sets the given values
       * @param {number} x
       * @param {number} y
       * @return {Vector2}
       */

      value: function set(x, y) {
        this.x = x;
        this.y = y;
        return this;
      },
      writable: true,
      configurable: true
    },
    clone: {

      /**
       * Creates a clone of this vector
       * @return {Vector2}
       */

      value: function clone() {
        return new Vector2(this.x, this.y);
      },
      writable: true,
      configurable: true
    },
    copy: {

      /**
       * Copies the values of the given vector
       * @param  {Vector2} other
       * @return {Vector2}
       */

      value: function copy(other) {
        this.x = other.x;
        this.y = other.y;
        return this;
      },
      writable: true,
      configurable: true
    },
    clamp: {

      /**
       * Clamps this vector with the given Vector2 / number
       * @param  {(number|Vector2)} minimum
       * @param  {(number|Vector2)} maximum
       * @return {Vector2}
       */

      value: function clamp(minimum, maximum) {
        var minimumSet = minimum !== null && typeof minimum !== "undefined";
        var maximumSet = maximum !== null && typeof maximum !== "undefined";

        /* istanbul ignore else  */
        if (!(minimum instanceof Vector2) && minimumSet) {
          minimum = new Vector2(minimum, minimum);
        }
        /* istanbul ignore else  */
        if (!(maximum instanceof Vector2) && maximumSet) {
          maximum = new Vector2(maximum, maximum);
        }

        if (minimumSet) {
          this.x = Math.max(minimum.x, this.x);
          this.y = Math.max(minimum.y, this.y);
        }

        if (maximumSet) {
          this.x = Math.min(maximum.x, this.x);
          this.y = Math.min(maximum.y, this.y);
        }
        return this;
      },
      writable: true,
      configurable: true
    },
    divide: {

      /**
       * Divides this vector by the given Vector2 / number
       * @param  {(number|Vector2)} divisor
       * @param  {number} [y]
       * @return {Vector2}
       */

      value: function divide(divisor, y) {
        if (divisor instanceof Vector2) {
          this.x /= divisor.x;
          this.y /= divisor.y;
        } else {
          this.x /= divisor;
          this.y /= typeof y === "undefined" ? divisor : y;
        }
        return this;
      },
      writable: true,
      configurable: true
    },
    subtract: {

      /**
       * Subtracts the given Vector2 / number from this vector
       * @param  {(number|Vector2)} subtrahend
       * @param  {number} [y]
       * @return {Vector2}
       */

      value: function subtract(subtrahend, y) {
        if (subtrahend instanceof Vector2) {
          this.x -= subtrahend.x;
          this.y -= subtrahend.y;
        } else {
          this.x -= subtrahend;
          this.y -= typeof y === "undefined" ? subtrahend : y;
        }
        return this;
      },
      writable: true,
      configurable: true
    },
    multiply: {

      /**
       * Multiplies the given Vector2 / number with this vector
       * @param  {(number|Vector2)} subtrahend
       * @param  {number} [y]
       * @return {Vector2}
       */

      value: function multiply(factor, y) {
        if (factor instanceof Vector2) {
          this.x *= factor.x;
          this.y *= factor.y;
        } else {
          this.x *= factor;
          this.y *= typeof y === "undefined" ? factor : y;
        }
        return this;
      },
      writable: true,
      configurable: true
    },
    add: {

      /**
       * Adds the given Vector2 / numbers to this vector
       * @param {(number|Vector2)} addend
       * @param {number} [y]
       */

      value: function add(addend, y) {
        if (addend instanceof Vector2) {
          this.x += addend.x;
          this.y += addend.y;
        } else {
          this.x += addend;
          this.y += typeof y === "undefined" ? addend : y;
        }
        return this;
      },
      writable: true,
      configurable: true
    },
    equals: {

      /**
       * Checks whether the x and y value are the same as the given ones
       * @param  {(number|Vector2)} vec
       * @param  {number} y
       * @return {boolean}
       */

      value: function equals(vec, y) {
        if (vec instanceof Vector2) {
          return vec.x === this.x && vec.y === this.y;
        } else {
          return vec === this.x && y === this.y;
        }
      },
      writable: true,
      configurable: true
    },
    flip: {

      /**
       * Flips the x and y values of this vector
       * @return {Vector2}
       */

      value: function flip() {
        var tempX = this.x;
        this.x = this.y;
        this.y = tempX;
        return this;
      },
      writable: true,
      configurable: true
    },
    toString: {

      /**
       * Returns a string representation of this vector
       * @return {String}
       */

      value: function toString() {
        return "Vector2({ x: " + this.x + ", y: " + this.y + " })";
      },
      writable: true,
      configurable: true
    }
  });

  return Vector2;
})();

module.exports = Vector2;

},{}],"/Users/sash/development/js/imglykit-rewrite/src/js/lib/render-image.js":[function(require,module,exports){
"use strict";

var _interopRequire = function (obj) { return obj && obj.__esModule ? obj["default"] : obj; };

var _prototypeProperties = function (child, staticProps, instanceProps) { if (staticProps) Object.defineProperties(child, staticProps); if (instanceProps) Object.defineProperties(child.prototype, instanceProps); };

var _classCallCheck = function (instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } };

/*!
 * Copyright (c) 2013-2015 9elements GmbH
 *
 * Released under Attribution-NonCommercial 3.0 Unported
 * http://creativecommons.org/licenses/by-nc/3.0/
 *
 * For commercial use, please contact us at contact@9elements.com
 */

var bluebird = _interopRequire(require("bluebird"));

var ImageDimensions = _interopRequire(require("./image-dimensions"));

var Vector2 = _interopRequire(require("./math/vector2"));

var CanvasRenderer = _interopRequire(require("../renderers/canvas-renderer"));

var WebGLRenderer = _interopRequire(require("../renderers/webgl-renderer"));

/**
 * Handles the image rendering process
 * @class
 * @alias ImglyKit.RenderImage
 * @param {Image} image
 * @param {Array.<ImglyKit.Operation>} operationsStack
 * @param {string} dimensions
 * @param {string} preferredRenderer
 * @private
 */

var RenderImage = (function () {
  function RenderImage(image, operationsStack, dimensions, preferredRenderer) {
    _classCallCheck(this, RenderImage);

    /**
     * @type {Object}
     * @private
     */
    this._options = {
      preferredRenderer: preferredRenderer
    };

    /**
     * @type {Boolean}
     * @private
     * @default false
     */
    this._webglEnabled = false;

    /**
     * @type {Renderer}
     * @private
     */
    this._renderer = null;

    /**
     * @type {Image}
     * @private
     */
    this._image = image;

    /**
     * @type {Array.<ImglyKit.Operation>}
     * @private
     */
    this._stack = operationsStack;

    /**
     * @type {ImglyKit.ImageDimensions}
     * @private
     */
    this._dimensions = new ImageDimensions(dimensions);

    /**
     * @type {Vector2}
     * @private
     */
    this._initialDimensions = new Vector2(this._image.width, this._image.height);

    this._initRenderer();
  }

  _prototypeProperties(RenderImage, null, {
    _initRenderer: {

      /**
       * Creates a renderer (canvas or webgl, depending on support)
       * @return {Promise}
       * @private
       */

      value: function _initRenderer() {
        /* istanbul ignore if */
        if (WebGLRenderer.isSupported() && this._options.preferredRenderer !== "canvas") {
          this._renderer = new WebGLRenderer(this._initialDimensions);
          this._webglEnabled = true;
        } else if (CanvasRenderer.isSupported()) {
          this._renderer = new CanvasRenderer(this._initialDimensions);
          this._webglEnabled = false;
        }

        /* istanbul ignore if */
        if (this._renderer === null) {
          throw new Error("Neither Canvas nor WebGL renderer are supported.");
        }

        this._renderer.drawImage(this._image);
      },
      writable: true,
      configurable: true
    },
    render: {

      /**
       * Renders the image
       * @return {Promise}
       */

      value: function render() {
        var self = this;
        return bluebird.map(this._stack, function (operation) {
          return operation.validateSettings();
        }).then(function () {
          return bluebird.map(self._stack, function (operation) {
            return operation.render(self._renderer);
          }, { concurrency: 1 }).then(function () {
            return self._renderer.renderFinal();
          });
        }).then(function () {
          var initialSize = self._renderer.getSize();
          var finalDimensions = self._dimensions.calculateFinalDimensions(initialSize);

          if (finalDimensions.equals(initialSize)) {
            // No need to resize
            return;
          }

          return self._renderer.resizeTo(finalDimensions);
        });
      },
      writable: true,
      configurable: true
    },
    getRenderer: {

      /**
       * Returns the renderer
       * @return {Renderer}
       */

      value: function getRenderer() {
        return this._renderer;
      },
      writable: true,
      configurable: true
    }
  });

  return RenderImage;
})();

module.exports = RenderImage;

},{"../renderers/canvas-renderer":"/Users/sash/development/js/imglykit-rewrite/src/js/renderers/canvas-renderer.js","../renderers/webgl-renderer":"/Users/sash/development/js/imglykit-rewrite/src/js/renderers/webgl-renderer.js","./image-dimensions":"/Users/sash/development/js/imglykit-rewrite/src/js/lib/image-dimensions.js","./math/vector2":"/Users/sash/development/js/imglykit-rewrite/src/js/lib/math/vector2.js","bluebird":"/Users/sash/development/js/imglykit-rewrite/node_modules/bluebird/js/main/bluebird.js"}],"/Users/sash/development/js/imglykit-rewrite/src/js/lib/utils.js":[function(require,module,exports){
"use strict";

var _interopRequire = function (obj) { return obj && obj.__esModule ? obj["default"] : obj; };

var _prototypeProperties = function (child, staticProps, instanceProps) { if (staticProps) Object.defineProperties(child, staticProps); if (instanceProps) Object.defineProperties(child.prototype, instanceProps); };

var _classCallCheck = function (instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } };

/*!
 * Copyright (c) 2013-2015 9elements GmbH
 *
 * Released under Attribution-NonCommercial 3.0 Unported
 * http://creativecommons.org/licenses/by-nc/3.0/
 *
 * For commercial use, please contact us at contact@9elements.com
 */

var Vector2 = _interopRequire(require("./math/vector2"));

/**
 * Provides utility functions for internal use
 * @class
 * @alias ImglyKit.Utils
 * @private
 */

var Utils = (function () {
  function Utils() {
    _classCallCheck(this, Utils);
  }

  _prototypeProperties(Utils, {
    isArray: {

      /**
       * Checks if the given object is an Array
       * @param  {Object}  object
       * @return {Boolean}
       */

      value: function isArray(object) {
        return Object.prototype.toString.call(object) === "[object Array]";
      },
      writable: true,
      configurable: true
    },
    select: {

      /**
       * Returns the items selected by the given selector
       * @param  {Array} items
       * @param  {ImglyKit~Selector} selector - The selector
       * @return {Array} The selected items
       */

      value: function select(items, selector) {
        if (selector === null) {
          return items;
        }

        // Turn string parameter into an array
        if (typeof selector === "string") {
          selector = selector.split(",").map(function (identifier) {
            return identifier.trim();
          });
        }

        // Turn array parameter into an object with `only`
        if (Utils.isArray(selector)) {
          selector = { only: selector };
        }

        if (typeof selector.only !== "undefined") {
          // Select only the given identifiers
          return items.filter(function (item) {
            return selector.only.indexOf(item) !== -1;
          });
        } else if (typeof selector.except !== "undefined") {
          // Select all but the given identifiers
          return items.filter(function (item) {
            return selector.except.indexOf(item) === -1;
          });
        }

        throw new Error("Utils#select failed to filter items.");
      },
      writable: true,
      configurable: true
    },
    values: {

      /**
       * Returns the given object's values as an array
       * @param {Object} object
       * @returns {Array<*>}
       */

      value: (function (_values) {
        var _valuesWrapper = function values(_x) {
          return _values.apply(this, arguments);
        };

        _valuesWrapper.toString = function () {
          return _values.toString();
        };

        return _valuesWrapper;
      })(function (object) {
        var values = [];
        for (var key in object) {
          values.push(object[key]);
        }
        return values;
      }),
      writable: true,
      configurable: true
    },
    isDOMElement: {

      /**
       * Checks if the given object is a DOM element
       * @param  {Object}  o
       * @return {Boolean}
       */
      /* istanbul ignore next */

      value: function isDOMElement(o) {
        return typeof HTMLElement === "object" ? o instanceof HTMLElement : o && typeof o === "object" && o !== null && o.nodeType === 1 && typeof o.nodeName === "string";
      },
      writable: true,
      configurable: true
    },
    getEventPosition: {

      /**
       * Gets the x and y position for the given event.
       * @param {Event} e
       * @return {Vector2}
       */

      value: function getEventPosition(e) {
        var x = e.pageX;
        var y = e.pageY;
        if (e.type.indexOf("touch") !== -1) {
          x = e.touches[0].pageX;
          y = e.touches[0].pageY;
        }
        return new Vector2(x, y);
      },
      writable: true,
      configurable: true
    }
  });

  return Utils;
})();

module.exports = Utils;

},{"./math/vector2":"/Users/sash/development/js/imglykit-rewrite/src/js/lib/math/vector2.js"}],"/Users/sash/development/js/imglykit-rewrite/src/js/operations/brightness-operation.js":[function(require,module,exports){
"use strict";

var _interopRequire = function (obj) { return obj && obj.__esModule ? obj["default"] : obj; };

var _prototypeProperties = function (child, staticProps, instanceProps) { if (staticProps) Object.defineProperties(child, staticProps); if (instanceProps) Object.defineProperties(child.prototype, instanceProps); };

var _get = function get(object, property, receiver) { var desc = Object.getOwnPropertyDescriptor(object, property); if (desc === undefined) { var parent = Object.getPrototypeOf(object); if (parent === null) { return undefined; } else { return get(parent, property, receiver); } } else if ("value" in desc && desc.writable) { return desc.value; } else { var getter = desc.get; if (getter === undefined) { return undefined; } return getter.call(receiver); } };

var _inherits = function (subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) subClass.__proto__ = superClass; };

var _classCallCheck = function (instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } };

/*!
 * Copyright (c) 2013-2015 9elements GmbH
 *
 * Released under Attribution-NonCommercial 3.0 Unported
 * http://creativecommons.org/licenses/by-nc/3.0/
 *
 * For commercial use, please contact us at contact@9elements.com
 */

var Operation = _interopRequire(require("./operation"));

var PrimitivesStack = _interopRequire(require("./filters/primitives-stack"));

var BrightnessPrimitive = _interopRequire(require("./filters/primitives/brightness"));

/**
 * @class
 * @alias ImglyKit.Operations.BrightnessOperation
 * @extends ImglyKit.Operation
 */

var BrightnessOperation = (function (Operation) {
  function BrightnessOperation() {
    for (var _len = arguments.length, args = Array(_len), _key = 0; _key < _len; _key++) {
      args[_key] = arguments[_key];
    }

    _classCallCheck(this, BrightnessOperation);

    this.availableOptions = {
      brightness: { type: "number", "default": 0 }
    };

    _get(Object.getPrototypeOf(BrightnessOperation.prototype), "constructor", this).apply(this, args);
  }

  _inherits(BrightnessOperation, Operation);

  _prototypeProperties(BrightnessOperation, null, {
    identifier: {

      /**
       * A unique string that identifies this operation. Can be used to select
       * operations.
       * @type {String}
       */

      get: function () {
        return "brightness";
      },
      configurable: true
    },
    _renderWebGL: {

      /**
       * Renders the brightness using WebGL
       * @param  {WebGLRenderer} renderer
       * @override
       */

      value: function _renderWebGL(renderer) {
        this._render(renderer);
      },
      writable: true,
      configurable: true
    },
    _renderCanvas: {

      /**
       * Renders the brightness using Canvas2D
       * @param {CanvasRenderer} renderer
       * @override
       */

      value: function _renderCanvas(renderer) {
        this._render(renderer);
      },
      writable: true,
      configurable: true
    },
    _render: {

      /**
       * Renders the brightness (all renderers supported)
       * @param {Renderer} renderer
       * @private
       */

      value: function _render(renderer) {
        var stack = new PrimitivesStack();

        stack.add(new BrightnessPrimitive({
          brightness: this._options.brightness
        }));

        stack.render(renderer);
      },
      writable: true,
      configurable: true
    }
  });

  return BrightnessOperation;
})(Operation);

module.exports = BrightnessOperation;

},{"./filters/primitives-stack":"/Users/sash/development/js/imglykit-rewrite/src/js/operations/filters/primitives-stack.js","./filters/primitives/brightness":"/Users/sash/development/js/imglykit-rewrite/src/js/operations/filters/primitives/brightness.js","./operation":"/Users/sash/development/js/imglykit-rewrite/src/js/operations/operation.js"}],"/Users/sash/development/js/imglykit-rewrite/src/js/operations/contrast-operation.js":[function(require,module,exports){
"use strict";

var _interopRequire = function (obj) { return obj && obj.__esModule ? obj["default"] : obj; };

var _prototypeProperties = function (child, staticProps, instanceProps) { if (staticProps) Object.defineProperties(child, staticProps); if (instanceProps) Object.defineProperties(child.prototype, instanceProps); };

var _get = function get(object, property, receiver) { var desc = Object.getOwnPropertyDescriptor(object, property); if (desc === undefined) { var parent = Object.getPrototypeOf(object); if (parent === null) { return undefined; } else { return get(parent, property, receiver); } } else if ("value" in desc && desc.writable) { return desc.value; } else { var getter = desc.get; if (getter === undefined) { return undefined; } return getter.call(receiver); } };

var _inherits = function (subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) subClass.__proto__ = superClass; };

var _classCallCheck = function (instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } };

/*!
 * Copyright (c) 2013-2015 9elements GmbH
 *
 * Released under Attribution-NonCommercial 3.0 Unported
 * http://creativecommons.org/licenses/by-nc/3.0/
 *
 * For commercial use, please contact us at contact@9elements.com
 */

var Operation = _interopRequire(require("./operation"));

var PrimitivesStack = _interopRequire(require("./filters/primitives-stack"));

var ContrastPrimitive = _interopRequire(require("./filters/primitives/contrast"));

/**
 * @class
 * @alias ImglyKit.Operations.ContrastOperation
 * @extends ImglyKit.Operation
 */

var ContrastOperation = (function (Operation) {
  function ContrastOperation() {
    for (var _len = arguments.length, args = Array(_len), _key = 0; _key < _len; _key++) {
      args[_key] = arguments[_key];
    }

    _classCallCheck(this, ContrastOperation);

    this.availableOptions = {
      contrast: { type: "number", "default": 1 }
    };

    _get(Object.getPrototypeOf(ContrastOperation.prototype), "constructor", this).apply(this, args);
  }

  _inherits(ContrastOperation, Operation);

  _prototypeProperties(ContrastOperation, null, {
    identifier: {

      /**
       * A unique string that identifies this operation. Can be used to select
       * operations.
       * @type {String}
       */

      get: function () {
        return "contrast";
      },
      configurable: true
    },
    _renderWebGL: {

      /**
       * Renders the contrast using WebGL
       * @param  {WebGLRenderer} renderer
       * @override
       */

      value: function _renderWebGL(renderer) {
        this._render(renderer);
      },
      writable: true,
      configurable: true
    },
    _renderCanvas: {

      /**
       * Renders the contrast using Canvas2D
       * @param {CanvasRenderer} renderer
       * @override
       */

      value: function _renderCanvas(renderer) {
        this._render(renderer);
      },
      writable: true,
      configurable: true
    },
    _render: {

      /**
       * Renders the contrast (all renderers supported)
       * @param  {Renderer} renderer
       * @private
       */

      value: function _render(renderer) {
        var stack = new PrimitivesStack();

        stack.add(new ContrastPrimitive({
          contrast: this._options.contrast
        }));

        stack.render(renderer);
      },
      writable: true,
      configurable: true
    }
  });

  return ContrastOperation;
})(Operation);

module.exports = ContrastOperation;

},{"./filters/primitives-stack":"/Users/sash/development/js/imglykit-rewrite/src/js/operations/filters/primitives-stack.js","./filters/primitives/contrast":"/Users/sash/development/js/imglykit-rewrite/src/js/operations/filters/primitives/contrast.js","./operation":"/Users/sash/development/js/imglykit-rewrite/src/js/operations/operation.js"}],"/Users/sash/development/js/imglykit-rewrite/src/js/operations/crop-operation.js":[function(require,module,exports){
"use strict";

var _interopRequire = function (obj) { return obj && obj.__esModule ? obj["default"] : obj; };

var _prototypeProperties = function (child, staticProps, instanceProps) { if (staticProps) Object.defineProperties(child, staticProps); if (instanceProps) Object.defineProperties(child.prototype, instanceProps); };

var _get = function get(object, property, receiver) { var desc = Object.getOwnPropertyDescriptor(object, property); if (desc === undefined) { var parent = Object.getPrototypeOf(object); if (parent === null) { return undefined; } else { return get(parent, property, receiver); } } else if ("value" in desc && desc.writable) { return desc.value; } else { var getter = desc.get; if (getter === undefined) { return undefined; } return getter.call(receiver); } };

var _inherits = function (subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) subClass.__proto__ = superClass; };

var _classCallCheck = function (instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } };

/*!
 * Copyright (c) 2013-2015 9elements GmbH
 *
 * Released under Attribution-NonCommercial 3.0 Unported
 * http://creativecommons.org/licenses/by-nc/3.0/
 *
 * For commercial use, please contact us at contact@9elements.com
 */

var Operation = _interopRequire(require("./operation"));

var Vector2 = _interopRequire(require("../lib/math/vector2"));

/**
 * An operation that can crop out a part of the image
 *
 * @class
 * @alias ImglyKit.Operations.CropOperation
 * @extends ImglyKit.Operation
 */

var CropOperation = (function (Operation) {
  function CropOperation() {
    for (var _len = arguments.length, args = Array(_len), _key = 0; _key < _len; _key++) {
      args[_key] = arguments[_key];
    }

    _classCallCheck(this, CropOperation);

    this.availableOptions = {
      start: { type: "vector2", required: true, "default": new Vector2(0, 0) },
      end: { type: "vector2", required: true, "default": new Vector2(1, 1) }
    };

    /**
     * The fragment shader used for this operation
     */
    this.fragmentShader = "\n      precision mediump float;\n      uniform sampler2D u_image;\n      varying vec2 v_texCoord;\n      uniform vec2 u_cropStart;\n      uniform vec2 u_cropEnd;\n\n      void main() {\n        vec2 size = u_cropEnd - u_cropStart;\n        gl_FragColor = texture2D(u_image, v_texCoord * size + u_cropStart);\n      }\n    ";

    _get(Object.getPrototypeOf(CropOperation.prototype), "constructor", this).apply(this, args);
  }

  _inherits(CropOperation, Operation);

  _prototypeProperties(CropOperation, null, {
    identifier: {

      /**
       * A unique string that identifies this operation. Can be used to select
       * operations.
       * @type {String}
       */

      get: function () {
        return "crop";
      },
      configurable: true
    },
    _renderWebGL: {

      /**
       * Rotates and crops the image using WebGL
       * @param  {WebGLRenderer} renderer
       * @override
       * @private
       */
      /* istanbul ignore next */

      value: function _renderWebGL(renderer) {
        var canvas = renderer.getCanvas();
        var canvasSize = new Vector2(canvas.width, canvas.height);

        var start = this._options.start.clone();
        var end = this._options.end.clone();

        if (this._options.numberFormat === "absolute") {
          start.divide(canvasSize);
          end.divide(canvasSize);
        }

        // 0..1 > 1..0 on y-axis
        var originalStartY = start.y;
        start.y = 1 - end.y;
        end.y = 1 - originalStartY;

        // The new size
        var newDimensions = this.getNewDimensions(renderer);

        // Resize the canvas
        canvas.width = newDimensions.x;
        canvas.height = newDimensions.y;

        // Run the cropping shader
        renderer.runShader(null, this.fragmentShader, {
          uniforms: {
            u_cropStart: { type: "2f", value: [start.x, start.y] },
            u_cropEnd: { type: "2f", value: [end.x, end.y] }
          }
        });
      },
      writable: true,
      configurable: true
    },
    _renderCanvas: {

      /**
       * Crops the image using Canvas
       * @param {CanvasRenderer} renderer
       * @override
       * @private
       */

      value: function _renderCanvas(renderer) {
        var canvas = renderer.getCanvas();
        var dimensions = new Vector2(canvas.width, canvas.height);

        var newDimensions = this.getNewDimensions(renderer);

        // Create a temporary canvas to draw to
        var newCanvas = renderer.createCanvas();
        newCanvas.width = newDimensions.x;
        newCanvas.height = newDimensions.y;
        var newContext = newCanvas.getContext("2d");

        // The upper left corner of the cropped area on the original image
        var startPosition = this._options.start.clone();

        if (this._options.numberFormat === "relative") {
          startPosition.multiply(dimensions);
        }

        // Draw the source canvas onto the new one
        newContext.drawImage(canvas, startPosition.x, startPosition.y, // source x, y
        newDimensions.x, newDimensions.y, // source dimensions
        0, 0, // destination x, y
        newDimensions.x, newDimensions.y // destination dimensions
        );

        // Set the new canvas
        renderer.setCanvas(newCanvas);
      },
      writable: true,
      configurable: true
    },
    getNewDimensions: {

      /**
       * Gets the new dimensions
       * @param {Renderer} renderer
       * @param {Vector2} [dimensions]
       * @return {Vector2}
       */

      value: function getNewDimensions(renderer, dimensions) {
        var canvas = renderer.getCanvas();
        dimensions = dimensions || new Vector2(canvas.width, canvas.height);

        var newDimensions = this._options.end.clone().subtract(this._options.start);

        if (this._options.numberFormat === "relative") {
          newDimensions.multiply(dimensions);
        }

        return newDimensions;
      },
      writable: true,
      configurable: true
    }
  });

  return CropOperation;
})(Operation);

module.exports = CropOperation;

},{"../lib/math/vector2":"/Users/sash/development/js/imglykit-rewrite/src/js/lib/math/vector2.js","./operation":"/Users/sash/development/js/imglykit-rewrite/src/js/operations/operation.js"}],"/Users/sash/development/js/imglykit-rewrite/src/js/operations/filters-operation.js":[function(require,module,exports){
"use strict";

var _interopRequire = function (obj) { return obj && obj.__esModule ? obj["default"] : obj; };

var _prototypeProperties = function (child, staticProps, instanceProps) { if (staticProps) Object.defineProperties(child, staticProps); if (instanceProps) Object.defineProperties(child.prototype, instanceProps); };

var _get = function get(object, property, receiver) { var desc = Object.getOwnPropertyDescriptor(object, property); if (desc === undefined) { var parent = Object.getPrototypeOf(object); if (parent === null) { return undefined; } else { return get(parent, property, receiver); } } else if ("value" in desc && desc.writable) { return desc.value; } else { var getter = desc.get; if (getter === undefined) { return undefined; } return getter.call(receiver); } };

var _inherits = function (subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) subClass.__proto__ = superClass; };

var _classCallCheck = function (instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } };

/*!
 * Copyright (c) 2013-2015 9elements GmbH
 *
 * Released under Attribution-NonCommercial 3.0 Unported
 * http://creativecommons.org/licenses/by-nc/3.0/
 *
 * For commercial use, please contact us at contact@9elements.com
 */

var Operation = _interopRequire(require("./operation"));

var IdentityFilter = _interopRequire(require("./filters/identity-filter"));

/**
 * An operation that can apply a selected filter
 *
 * @class
 * @alias ImglyKit.Operations.FiltersOperation
 * @extends ImglyKit.Operation
 */

var FiltersOperation = (function (Operation) {
  function FiltersOperation() {
    for (var _len = arguments.length, args = Array(_len), _key = 0; _key < _len; _key++) {
      args[_key] = arguments[_key];
    }

    _classCallCheck(this, FiltersOperation);

    this.availableOptions = {
      filter: { type: "object", "default": IdentityFilter,
        setter: function setter(Filter) {
          this._selectedFilter = new Filter();
          return Filter;
        }
      }
    };

    _get(Object.getPrototypeOf(FiltersOperation.prototype), "constructor", this).apply(this, args);
  }

  _inherits(FiltersOperation, Operation);

  _prototypeProperties(FiltersOperation, null, {
    identifier: {

      /**
       * A unique string that identifies this operation. Can be used to select
       * operations.
       * @type {String}
       */

      get: function () {
        return "filters";
      },
      configurable: true
    },
    _renderWebGL: {

      /**
       * Renders the filter using WebGL
       * @param  {WebGLRenderer} renderer
       * @override
       */

      value: function _renderWebGL(renderer) {
        this._render(renderer);
      },
      writable: true,
      configurable: true
    },
    _renderCanvas: {

      /**
       * Renders the filter using Canvas2D
       * @param {CanvasRenderer} renderer
       * @override
       */

      value: function _renderCanvas(renderer) {
        this._render(renderer);
      },
      writable: true,
      configurable: true
    },
    _render: {

      /**
       * Renders the filter (all renderers supported)
       * @param {Renderer} renderer
       * @private
       */

      value: function _render(renderer) {
        this._selectedFilter.render(renderer);
      },
      writable: true,
      configurable: true
    }
  });

  return FiltersOperation;
})(Operation);

module.exports = FiltersOperation;

},{"./filters/identity-filter":"/Users/sash/development/js/imglykit-rewrite/src/js/operations/filters/identity-filter.js","./operation":"/Users/sash/development/js/imglykit-rewrite/src/js/operations/operation.js"}],"/Users/sash/development/js/imglykit-rewrite/src/js/operations/filters/a15-filter.js":[function(require,module,exports){
"use strict";

var _interopRequire = function (obj) { return obj && obj.__esModule ? obj["default"] : obj; };

var _prototypeProperties = function (child, staticProps, instanceProps) { if (staticProps) Object.defineProperties(child, staticProps); if (instanceProps) Object.defineProperties(child.prototype, instanceProps); };

var _inherits = function (subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) subClass.__proto__ = superClass; };

var _classCallCheck = function (instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } };

/*!
 * Copyright (c) 2013-2015 9elements GmbH
 *
 * Released under Attribution-NonCommercial 3.0 Unported
 * http://creativecommons.org/licenses/by-nc/3.0/
 *
 * For commercial use, please contact us at contact@9elements.com
 */

var Filter = _interopRequire(require("./filter"));

/**
 * A15 Filter
 * @class
 * @alias ImglyKit.Filters.A15Filter
 * @extends {ImglyKit.Filter}
 */

var A15Filter = (function (Filter) {
  function A15Filter() {
    _classCallCheck(this, A15Filter);

    if (Filter != null) {
      Filter.apply(this, arguments);
    }
  }

  _inherits(A15Filter, Filter);

  _prototypeProperties(A15Filter, {
    identifier: {
      /**
       * A unique string that identifies this operation. Can be used to select
       * the active filter.
       * @type {String}
       */

      get: function () {
        return "a15";
      },
      configurable: true
    }
  }, {
    render: {

      /**
       * Renders the filter
       * @param  {Renderer} renderer
       * @return {Promise}
       */

      value: function render(renderer) {
        var stack = new Filter.PrimitivesStack();

        stack.add(new Filter.Primitives.Contrast({
          contrast: 0.63
        }));

        stack.add(new Filter.Primitives.Brightness({
          brightness: 0.12
        }));

        stack.add(new Filter.Primitives.ToneCurve({
          rgbControlPoints: {
            red: [[0, 38], [94, 94], [148, 142], [175, 187], [255, 255]],
            green: [[0, 0], [77, 53], [171, 190], [255, 255]],
            blue: [[0, 10], [48, 85], [174, 228], [255, 255]]
          }
        }));

        stack.render(renderer);
      },
      writable: true,
      configurable: true
    }
  });

  return A15Filter;
})(Filter);

module.exports = A15Filter;

},{"./filter":"/Users/sash/development/js/imglykit-rewrite/src/js/operations/filters/filter.js"}],"/Users/sash/development/js/imglykit-rewrite/src/js/operations/filters/breeze-filter.js":[function(require,module,exports){
"use strict";

var _interopRequire = function (obj) { return obj && obj.__esModule ? obj["default"] : obj; };

var _prototypeProperties = function (child, staticProps, instanceProps) { if (staticProps) Object.defineProperties(child, staticProps); if (instanceProps) Object.defineProperties(child.prototype, instanceProps); };

var _inherits = function (subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) subClass.__proto__ = superClass; };

var _classCallCheck = function (instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } };

/*!
 * Copyright (c) 2013-2015 9elements GmbH
 *
 * Released under Attribution-NonCommercial 3.0 Unported
 * http://creativecommons.org/licenses/by-nc/3.0/
 *
 * For commercial use, please contact us at contact@9elements.com
 */

var Filter = _interopRequire(require("./filter"));

/**
 * Breeze Filter
 * @class
 * @alias ImglyKit.Filters.BreezeFilter
 * @extends {ImglyKit.Filter}
 */

var BreezeFilter = (function (Filter) {
  function BreezeFilter() {
    _classCallCheck(this, BreezeFilter);

    if (Filter != null) {
      Filter.apply(this, arguments);
    }
  }

  _inherits(BreezeFilter, Filter);

  _prototypeProperties(BreezeFilter, {
    identifier: {

      /**
       * A unique string that identifies this operation. Can be used to select
       * the active filter.
       * @type {String}
       */

      get: function () {
        return "breeze";
      },
      configurable: true
    }
  }, {
    render: {

      /**
       * Renders the filter
       * @param  {Renderer} renderer
       * @return {Promise}
       */

      value: function render(renderer) {
        var stack = new Filter.PrimitivesStack();

        // Desaturation
        stack.add(new Filter.Primitives.Desaturation({
          desaturation: 0.5
        }));

        // Tone curve
        stack.add(new Filter.Primitives.ToneCurve({
          rgbControlPoints: {
            red: [[0, 0], [170, 170], [212, 219], [234, 242], [255, 255]],
            green: [[0, 0], [170, 168], [234, 231], [255, 255]],
            blue: [[0, 0], [170, 170], [212, 208], [255, 255]]
          }
        }));

        stack.render(renderer);
      },
      writable: true,
      configurable: true
    }
  });

  return BreezeFilter;
})(Filter);

module.exports = BreezeFilter;

},{"./filter":"/Users/sash/development/js/imglykit-rewrite/src/js/operations/filters/filter.js"}],"/Users/sash/development/js/imglykit-rewrite/src/js/operations/filters/bw-filter.js":[function(require,module,exports){
"use strict";

var _interopRequire = function (obj) { return obj && obj.__esModule ? obj["default"] : obj; };

var _prototypeProperties = function (child, staticProps, instanceProps) { if (staticProps) Object.defineProperties(child, staticProps); if (instanceProps) Object.defineProperties(child.prototype, instanceProps); };

var _inherits = function (subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) subClass.__proto__ = superClass; };

var _classCallCheck = function (instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } };

/*!
 * Copyright (c) 2013-2015 9elements GmbH
 *
 * Released under Attribution-NonCommercial 3.0 Unported
 * http://creativecommons.org/licenses/by-nc/3.0/
 *
 * For commercial use, please contact us at contact@9elements.com
 */

var Filter = _interopRequire(require("./filter"));

/**
 * BW Filter
 * @class
 * @alias ImglyKit.Filters.BWFilter
 * @extends {ImglyKit.Filter}
 */

var BWFilter = (function (Filter) {
  function BWFilter() {
    _classCallCheck(this, BWFilter);

    if (Filter != null) {
      Filter.apply(this, arguments);
    }
  }

  _inherits(BWFilter, Filter);

  _prototypeProperties(BWFilter, {
    identifier: {
      /**
       * A unique string that identifies this operation. Can be used to select
       * the active filter.
       * @type {String}
       */

      get: function () {
        return "bw";
      },
      configurable: true
    }
  }, {
    render: {

      /**
       * Renders the filter
       * @param  {Renderer} renderer
       * @return {Promise}
       */

      value: function render(renderer) {
        var stack = new Filter.PrimitivesStack();

        stack.add(new Filter.Primitives.Grayscale());

        stack.render(renderer);
      },
      writable: true,
      configurable: true
    }
  });

  return BWFilter;
})(Filter);

module.exports = BWFilter;

},{"./filter":"/Users/sash/development/js/imglykit-rewrite/src/js/operations/filters/filter.js"}],"/Users/sash/development/js/imglykit-rewrite/src/js/operations/filters/bwhard-filter.js":[function(require,module,exports){
"use strict";

var _interopRequire = function (obj) { return obj && obj.__esModule ? obj["default"] : obj; };

var _prototypeProperties = function (child, staticProps, instanceProps) { if (staticProps) Object.defineProperties(child, staticProps); if (instanceProps) Object.defineProperties(child.prototype, instanceProps); };

var _inherits = function (subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) subClass.__proto__ = superClass; };

var _classCallCheck = function (instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } };

/*!
 * Copyright (c) 2013-2015 9elements GmbH
 *
 * Released under Attribution-NonCommercial 3.0 Unported
 * http://creativecommons.org/licenses/by-nc/3.0/
 *
 * For commercial use, please contact us at contact@9elements.com
 */

var Filter = _interopRequire(require("./filter"));

/**
 * BWHard Filter
 * @class
 * @alias ImglyKit.Filters.BWHardFilter
 * @extends {ImglyKit.Filter}
 */

var BWHardFilter = (function (Filter) {
  function BWHardFilter() {
    _classCallCheck(this, BWHardFilter);

    if (Filter != null) {
      Filter.apply(this, arguments);
    }
  }

  _inherits(BWHardFilter, Filter);

  _prototypeProperties(BWHardFilter, {
    identifier: {
      /**
       * A unique string that identifies this operation. Can be used to select
       * the active filter.
       * @type {String}
       */

      get: function () {
        return "bwhard";
      },
      configurable: true
    }
  }, {
    render: {

      /**
       * Renders the filter
       * @param  {Renderer} renderer
       * @return {Promise}
       */

      value: function render(renderer) {
        var stack = new Filter.PrimitivesStack();

        stack.add(new Filter.Primitives.Grayscale());
        stack.add(new Filter.Primitives.Contrast({
          contrast: 1.5
        }));

        stack.render(renderer);
      },
      writable: true,
      configurable: true
    }
  });

  return BWHardFilter;
})(Filter);

module.exports = BWHardFilter;

},{"./filter":"/Users/sash/development/js/imglykit-rewrite/src/js/operations/filters/filter.js"}],"/Users/sash/development/js/imglykit-rewrite/src/js/operations/filters/celsius-filter.js":[function(require,module,exports){
"use strict";

var _interopRequire = function (obj) { return obj && obj.__esModule ? obj["default"] : obj; };

var _prototypeProperties = function (child, staticProps, instanceProps) { if (staticProps) Object.defineProperties(child, staticProps); if (instanceProps) Object.defineProperties(child.prototype, instanceProps); };

var _inherits = function (subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) subClass.__proto__ = superClass; };

var _classCallCheck = function (instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } };

/*!
 * Copyright (c) 2013-2015 9elements GmbH
 *
 * Released under Attribution-NonCommercial 3.0 Unported
 * http://creativecommons.org/licenses/by-nc/3.0/
 *
 * For commercial use, please contact us at contact@9elements.com
 */

var Filter = _interopRequire(require("./filter"));

/**
 * Celsius Filter
 * @class
 * @alias ImglyKit.Filters.CelsiusFilter
 * @extends {ImglyKit.Filter}
 */

var CelsiusFilter = (function (Filter) {
  function CelsiusFilter() {
    _classCallCheck(this, CelsiusFilter);

    if (Filter != null) {
      Filter.apply(this, arguments);
    }
  }

  _inherits(CelsiusFilter, Filter);

  _prototypeProperties(CelsiusFilter, {
    identifier: {
      /**
       * A unique string that identifies this operation. Can be used to select
       * the active filter.
       * @type {String}
       */

      get: function () {
        return "celsius";
      },
      configurable: true
    }
  }, {
    render: {

      /**
       * Renders the filter
       * @param  {Renderer} renderer
       * @return {Promise}
       */

      value: function render(renderer) {
        var stack = new Filter.PrimitivesStack();

        stack.add(new Filter.Primitives.ToneCurve({
          rgbControlPoints: {
            red: [[0, 69], [55, 110], [202, 230], [255, 255]],
            green: [[0, 44], [89, 93], [185, 141], [255, 189]],
            blue: [[0, 76], [39, 82], [218, 138], [255, 171]]
          }
        }));

        stack.render(renderer);
      },
      writable: true,
      configurable: true
    }
  });

  return CelsiusFilter;
})(Filter);

module.exports = CelsiusFilter;

},{"./filter":"/Users/sash/development/js/imglykit-rewrite/src/js/operations/filters/filter.js"}],"/Users/sash/development/js/imglykit-rewrite/src/js/operations/filters/chest-filter.js":[function(require,module,exports){
"use strict";

var _interopRequire = function (obj) { return obj && obj.__esModule ? obj["default"] : obj; };

var _prototypeProperties = function (child, staticProps, instanceProps) { if (staticProps) Object.defineProperties(child, staticProps); if (instanceProps) Object.defineProperties(child.prototype, instanceProps); };

var _inherits = function (subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) subClass.__proto__ = superClass; };

var _classCallCheck = function (instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } };

/*!
 * Copyright (c) 2013-2015 9elements GmbH
 *
 * Released under Attribution-NonCommercial 3.0 Unported
 * http://creativecommons.org/licenses/by-nc/3.0/
 *
 * For commercial use, please contact us at contact@9elements.com
 */

var Filter = _interopRequire(require("./filter"));

/**
 * Chest Filter
 * @class
 * @alias ImglyKit.Filters.ChestFilter
 * @extends {ImglyKit.Filter}
 */

var ChestFilter = (function (Filter) {
  function ChestFilter() {
    _classCallCheck(this, ChestFilter);

    if (Filter != null) {
      Filter.apply(this, arguments);
    }
  }

  _inherits(ChestFilter, Filter);

  _prototypeProperties(ChestFilter, {
    identifier: {
      /**
       * A unique string that identifies this operation. Can be used to select
       * the active filter.
       * @type {String}
       */

      get: function () {
        return "chest";
      },
      configurable: true
    }
  }, {
    render: {

      /**
       * Renders the filter
       * @param  {Renderer} renderer
       * @return {Promise}
       */

      value: function render(renderer) {
        var stack = new Filter.PrimitivesStack();

        // Tone curve
        stack.add(new Filter.Primitives.ToneCurve({
          rgbControlPoints: {
            red: [[0, 0], [44, 44], [124, 143], [221, 204], [255, 255]],
            green: [[0, 0], [130, 127], [213, 199], [255, 255]],
            blue: [[0, 0], [51, 52], [219, 204], [255, 255]]
          }
        }));

        stack.render(renderer);
      },
      writable: true,
      configurable: true
    }
  });

  return ChestFilter;
})(Filter);

module.exports = ChestFilter;

},{"./filter":"/Users/sash/development/js/imglykit-rewrite/src/js/operations/filters/filter.js"}],"/Users/sash/development/js/imglykit-rewrite/src/js/operations/filters/filter.js":[function(require,module,exports){
"use strict";

var _prototypeProperties = function (child, staticProps, instanceProps) { if (staticProps) Object.defineProperties(child, staticProps); if (instanceProps) Object.defineProperties(child.prototype, instanceProps); };

var _classCallCheck = function (instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } };

/*!
 * Copyright (c) 2013-2015 9elements GmbH
 *
 * Released under Attribution-NonCommercial 3.0 Unported
 * http://creativecommons.org/licenses/by-nc/3.0/
 *
 * For commercial use, please contact us at contact@9elements.com
 */

/**
 * Base class for filters. Extendable via {@link ImglyKit.Filter#extend}
 * @class
 * @alias ImglyKit.Filter
 */

var Filter = (function () {
  function Filter() {
    _classCallCheck(this, Filter);
  }

  _prototypeProperties(Filter, {
    identifier: {
      /**
       * A unique string that identifies this operation. Can be used to select
       * the active filter.
       * @type {String}
       */

      get: function () {
        return null;
      },
      configurable: true
    }
  }, {
    render: {

      /**
       * Renders the filter
       * @param  {Renderer} renderer
       * @return {Promise}
       */

      value: function render(renderer) {
        /* istanbul ignore next */
        throw new Error("Filter#render is abstract and not implemented in inherited class.");
      },
      writable: true,
      configurable: true
    }
  });

  return Filter;
})();

/**
 * To create an {@link ImglyKit.Filter} class of your own, call this
 * method and provide instance properties and functions.
 * @function
 */
Filter.extend = require("../../lib/extend");

// Exposed classes
Filter.PrimitivesStack = require("./primitives-stack");
Filter.Primitives = {};
Filter.Primitives.Saturation = require("./primitives/saturation");
Filter.Primitives.LookupTable = require("./primitives/lookup-table");
Filter.Primitives.ToneCurve = require("./primitives/tone-curve");
Filter.Primitives.SoftColorOverlay = require("./primitives/soft-color-overlay");
Filter.Primitives.Desaturation = require("./primitives/desaturation");
Filter.Primitives.X400 = require("./primitives/x400");
Filter.Primitives.Grayscale = require("./primitives/grayscale");
Filter.Primitives.Contrast = require("./primitives/contrast");
Filter.Primitives.Glow = require("./primitives/glow");
Filter.Primitives.Gobblin = require("./primitives/gobblin");
Filter.Primitives.Brightness = require("./primitives/brightness");

module.exports = Filter;
/* jshint unused: false */

},{"../../lib/extend":"/Users/sash/development/js/imglykit-rewrite/src/js/lib/extend.js","./primitives-stack":"/Users/sash/development/js/imglykit-rewrite/src/js/operations/filters/primitives-stack.js","./primitives/brightness":"/Users/sash/development/js/imglykit-rewrite/src/js/operations/filters/primitives/brightness.js","./primitives/contrast":"/Users/sash/development/js/imglykit-rewrite/src/js/operations/filters/primitives/contrast.js","./primitives/desaturation":"/Users/sash/development/js/imglykit-rewrite/src/js/operations/filters/primitives/desaturation.js","./primitives/glow":"/Users/sash/development/js/imglykit-rewrite/src/js/operations/filters/primitives/glow.js","./primitives/gobblin":"/Users/sash/development/js/imglykit-rewrite/src/js/operations/filters/primitives/gobblin.js","./primitives/grayscale":"/Users/sash/development/js/imglykit-rewrite/src/js/operations/filters/primitives/grayscale.js","./primitives/lookup-table":"/Users/sash/development/js/imglykit-rewrite/src/js/operations/filters/primitives/lookup-table.js","./primitives/saturation":"/Users/sash/development/js/imglykit-rewrite/src/js/operations/filters/primitives/saturation.js","./primitives/soft-color-overlay":"/Users/sash/development/js/imglykit-rewrite/src/js/operations/filters/primitives/soft-color-overlay.js","./primitives/tone-curve":"/Users/sash/development/js/imglykit-rewrite/src/js/operations/filters/primitives/tone-curve.js","./primitives/x400":"/Users/sash/development/js/imglykit-rewrite/src/js/operations/filters/primitives/x400.js"}],"/Users/sash/development/js/imglykit-rewrite/src/js/operations/filters/fixie-filter.js":[function(require,module,exports){
"use strict";

var _interopRequire = function (obj) { return obj && obj.__esModule ? obj["default"] : obj; };

var _prototypeProperties = function (child, staticProps, instanceProps) { if (staticProps) Object.defineProperties(child, staticProps); if (instanceProps) Object.defineProperties(child.prototype, instanceProps); };

var _inherits = function (subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) subClass.__proto__ = superClass; };

var _classCallCheck = function (instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } };

/*!
 * Copyright (c) 2013-2015 9elements GmbH
 *
 * Released under Attribution-NonCommercial 3.0 Unported
 * http://creativecommons.org/licenses/by-nc/3.0/
 *
 * For commercial use, please contact us at contact@9elements.com
 */

var Filter = _interopRequire(require("./filter"));

/**
 * Fixie Filter
 * @class
 * @alias ImglyKit.Filters.FixieFilter
 * @extends {ImglyKit.Filter}
 */

var FixieFilter = (function (Filter) {
  function FixieFilter() {
    _classCallCheck(this, FixieFilter);

    if (Filter != null) {
      Filter.apply(this, arguments);
    }
  }

  _inherits(FixieFilter, Filter);

  _prototypeProperties(FixieFilter, {
    identifier: {
      /**
       * A unique string that identifies this operation. Can be used to select
       * the active filter.
       * @type {String}
       */

      get: function () {
        return "fixie";
      },
      configurable: true
    }
  }, {
    render: {

      /**
       * Renders the filter
       * @param  {Renderer} renderer
       * @return {Promise}
       */

      value: function render(renderer) {
        var stack = new Filter.PrimitivesStack();

        // Tone curve
        stack.add(new Filter.Primitives.ToneCurve({
          rgbControlPoints: {
            red: [[0, 0], [44, 28], [63, 48], [128, 132], [235, 248], [255, 255]],
            green: [[0, 0], [20, 10], [60, 45], [190, 209], [211, 231], [255, 255]],
            blue: [[0, 31], [41, 62], [150, 142], [234, 212], [255, 224]]
          }
        }));

        stack.render(renderer);
      },
      writable: true,
      configurable: true
    }
  });

  return FixieFilter;
})(Filter);

module.exports = FixieFilter;

},{"./filter":"/Users/sash/development/js/imglykit-rewrite/src/js/operations/filters/filter.js"}],"/Users/sash/development/js/imglykit-rewrite/src/js/operations/filters/food-filter.js":[function(require,module,exports){
"use strict";

var _interopRequire = function (obj) { return obj && obj.__esModule ? obj["default"] : obj; };

var _prototypeProperties = function (child, staticProps, instanceProps) { if (staticProps) Object.defineProperties(child, staticProps); if (instanceProps) Object.defineProperties(child.prototype, instanceProps); };

var _inherits = function (subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) subClass.__proto__ = superClass; };

var _classCallCheck = function (instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } };

/*!
 * Copyright (c) 2013-2015 9elements GmbH
 *
 * Released under Attribution-NonCommercial 3.0 Unported
 * http://creativecommons.org/licenses/by-nc/3.0/
 *
 * For commercial use, please contact us at contact@9elements.com
 */

var Filter = _interopRequire(require("./filter"));

/**
 * Food Filter
 * @class
 * @alias ImglyKit.Filters.FoodFilter
 * @extends {ImglyKit.Filter}
 */

var FoodFilter = (function (Filter) {
  function FoodFilter() {
    _classCallCheck(this, FoodFilter);

    if (Filter != null) {
      Filter.apply(this, arguments);
    }
  }

  _inherits(FoodFilter, Filter);

  _prototypeProperties(FoodFilter, {
    identifier: {
      /**
       * A unique string that identifies this operation. Can be used to select
       * the active filter.
       * @type {String}
       */

      get: function () {
        return "food";
      },
      configurable: true
    }
  }, {
    render: {

      /**
       * Renders the filter
       * @param  {Renderer} renderer
       * @return {Promise}
       */

      value: function render(renderer) {
        var stack = new Filter.PrimitivesStack();

        stack.add(new Filter.Primitives.Saturation({
          saturation: 1.35
        }));

        stack.add(new Filter.Primitives.Contrast({
          contrast: 1.1
        }));

        stack.render(renderer);
      },
      writable: true,
      configurable: true
    }
  });

  return FoodFilter;
})(Filter);

module.exports = FoodFilter;

},{"./filter":"/Users/sash/development/js/imglykit-rewrite/src/js/operations/filters/filter.js"}],"/Users/sash/development/js/imglykit-rewrite/src/js/operations/filters/fridge-filter.js":[function(require,module,exports){
"use strict";

var _interopRequire = function (obj) { return obj && obj.__esModule ? obj["default"] : obj; };

var _prototypeProperties = function (child, staticProps, instanceProps) { if (staticProps) Object.defineProperties(child, staticProps); if (instanceProps) Object.defineProperties(child.prototype, instanceProps); };

var _inherits = function (subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) subClass.__proto__ = superClass; };

var _classCallCheck = function (instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } };

/*!
 * Copyright (c) 2013-2015 9elements GmbH
 *
 * Released under Attribution-NonCommercial 3.0 Unported
 * http://creativecommons.org/licenses/by-nc/3.0/
 *
 * For commercial use, please contact us at contact@9elements.com
 */

var Filter = _interopRequire(require("./filter"));

/**
 * Fridge Filter
 * @class
 * @alias ImglyKit.Filters.FridgeFilter
 * @extends {ImglyKit.Filter}
 */

var FridgeFilter = (function (Filter) {
  function FridgeFilter() {
    _classCallCheck(this, FridgeFilter);

    if (Filter != null) {
      Filter.apply(this, arguments);
    }
  }

  _inherits(FridgeFilter, Filter);

  _prototypeProperties(FridgeFilter, {
    identifier: {
      /**
       * A unique string that identifies this operation. Can be used to select
       * the active filter.
       * @type {String}
       */

      get: function () {
        return "fridge";
      },
      configurable: true
    }
  }, {
    render: {

      /**
       * Renders the filter
       * @param  {Renderer} renderer
       * @return {Promise}
       */

      value: function render(renderer) {
        var stack = new Filter.PrimitivesStack();

        // Tone curve
        stack.add(new Filter.Primitives.ToneCurve({
          rgbControlPoints: {
            red: [[0, 9], [21, 11], [45, 24], [255, 220]],
            green: [[0, 12], [21, 21], [42, 42], [150, 150], [170, 173], [255, 210]],
            blue: [[0, 28], [43, 72], [128, 185], [255, 220]]
          }
        }));

        stack.render(renderer);
      },
      writable: true,
      configurable: true
    }
  });

  return FridgeFilter;
})(Filter);

module.exports = FridgeFilter;

},{"./filter":"/Users/sash/development/js/imglykit-rewrite/src/js/operations/filters/filter.js"}],"/Users/sash/development/js/imglykit-rewrite/src/js/operations/filters/front-filter.js":[function(require,module,exports){
"use strict";

var _interopRequire = function (obj) { return obj && obj.__esModule ? obj["default"] : obj; };

var _prototypeProperties = function (child, staticProps, instanceProps) { if (staticProps) Object.defineProperties(child, staticProps); if (instanceProps) Object.defineProperties(child.prototype, instanceProps); };

var _inherits = function (subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) subClass.__proto__ = superClass; };

var _classCallCheck = function (instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } };

/*!
 * Copyright (c) 2013-2015 9elements GmbH
 *
 * Released under Attribution-NonCommercial 3.0 Unported
 * http://creativecommons.org/licenses/by-nc/3.0/
 *
 * For commercial use, please contact us at contact@9elements.com
 */

var Filter = _interopRequire(require("./filter"));

/**
 * Front Filter
 * @class
 * @alias ImglyKit.Filters.FrontFilter
 * @extends {ImglyKit.Filter}
 */

var FrontFilter = (function (Filter) {
  function FrontFilter() {
    _classCallCheck(this, FrontFilter);

    if (Filter != null) {
      Filter.apply(this, arguments);
    }
  }

  _inherits(FrontFilter, Filter);

  _prototypeProperties(FrontFilter, {
    identifier: {
      /**
       * A unique string that identifies this operation. Can be used to select
       * the active filter.
       * @type {String}
       */

      get: function () {
        return "front";
      },
      configurable: true
    }
  }, {
    render: {

      /**
       * Renders the filter
       * @param  {Renderer} renderer
       * @return {Promise}
       */

      value: function render(renderer) {
        var stack = new Filter.PrimitivesStack();

        // Tone curve
        stack.add(new Filter.Primitives.ToneCurve({
          rgbControlPoints: {
            red: [[0, 65], [28, 67], [67, 113], [125, 183], [187, 217], [255, 229]],
            green: [[0, 52], [42, 59], [104, 134], [169, 209], [255, 240]],
            blue: [[0, 52], [65, 68], [93, 104], [150, 153], [255, 198]]
          }
        }));

        stack.render(renderer);
      },
      writable: true,
      configurable: true
    }
  });

  return FrontFilter;
})(Filter);

module.exports = FrontFilter;

},{"./filter":"/Users/sash/development/js/imglykit-rewrite/src/js/operations/filters/filter.js"}],"/Users/sash/development/js/imglykit-rewrite/src/js/operations/filters/glam-filter.js":[function(require,module,exports){
"use strict";

var _interopRequire = function (obj) { return obj && obj.__esModule ? obj["default"] : obj; };

var _prototypeProperties = function (child, staticProps, instanceProps) { if (staticProps) Object.defineProperties(child, staticProps); if (instanceProps) Object.defineProperties(child.prototype, instanceProps); };

var _inherits = function (subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) subClass.__proto__ = superClass; };

var _classCallCheck = function (instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } };

/*!
 * Copyright (c) 2013-2015 9elements GmbH
 *
 * Released under Attribution-NonCommercial 3.0 Unported
 * http://creativecommons.org/licenses/by-nc/3.0/
 *
 * For commercial use, please contact us at contact@9elements.com
 */

var Filter = _interopRequire(require("./filter"));

/**
 * Glam Filter
 * @class
 * @alias ImglyKit.Filters.GlamFilter
 * @extends {ImglyKit.Filter}
 */

var GlamFilter = (function (Filter) {
  function GlamFilter() {
    _classCallCheck(this, GlamFilter);

    if (Filter != null) {
      Filter.apply(this, arguments);
    }
  }

  _inherits(GlamFilter, Filter);

  _prototypeProperties(GlamFilter, {
    identifier: {
      /**
       * A unique string that identifies this operation. Can be used to select
       * the active filter.
       * @type {String}
       */

      get: function () {
        return "glam";
      },
      configurable: true
    }
  }, {
    render: {

      /**
       * Renders the filter
       * @param  {Renderer} renderer
       * @return {Promise}
       */

      value: function render(renderer) {
        var stack = new Filter.PrimitivesStack();

        stack.add(new Filter.Primitives.Contrast({
          contrast: 1.1
        }));

        stack.add(new Filter.Primitives.ToneCurve({
          rgbControlPoints: {
            red: [[0, 0], [94, 74], [181, 205], [255, 255]],
            green: [[0, 0], [127, 127], [255, 255]],
            blue: [[0, 0], [102, 73], [227, 213], [255, 255]]
          }
        }));

        stack.render(renderer);
      },
      writable: true,
      configurable: true
    }
  });

  return GlamFilter;
})(Filter);

module.exports = GlamFilter;

},{"./filter":"/Users/sash/development/js/imglykit-rewrite/src/js/operations/filters/filter.js"}],"/Users/sash/development/js/imglykit-rewrite/src/js/operations/filters/gobblin-filter.js":[function(require,module,exports){
"use strict";

var _interopRequire = function (obj) { return obj && obj.__esModule ? obj["default"] : obj; };

var _prototypeProperties = function (child, staticProps, instanceProps) { if (staticProps) Object.defineProperties(child, staticProps); if (instanceProps) Object.defineProperties(child.prototype, instanceProps); };

var _inherits = function (subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) subClass.__proto__ = superClass; };

var _classCallCheck = function (instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } };

/*!
 * Copyright (c) 2013-2015 9elements GmbH
 *
 * Released under Attribution-NonCommercial 3.0 Unported
 * http://creativecommons.org/licenses/by-nc/3.0/
 *
 * For commercial use, please contact us at contact@9elements.com
 */

var Filter = _interopRequire(require("./filter"));

/**
 * Gobblin Filter
 * @class
 * @alias ImglyKit.Filters.GobblinFilter
 * @extends {ImglyKit.Filter}
 */

var GobblinFilter = (function (Filter) {
  function GobblinFilter() {
    _classCallCheck(this, GobblinFilter);

    if (Filter != null) {
      Filter.apply(this, arguments);
    }
  }

  _inherits(GobblinFilter, Filter);

  _prototypeProperties(GobblinFilter, {
    identifier: {
      /**
       * A unique string that identifies this operation. Can be used to select
       * the active filter.
       * @type {String}
       */

      get: function () {
        return "gobblin";
      },
      configurable: true
    }
  }, {
    render: {

      /**
       * Renders the filter
       * @param  {Renderer} renderer
       * @return {Promise}
       */

      value: function render(renderer) {
        var stack = new Filter.PrimitivesStack();

        stack.add(new Filter.Primitives.Gobblin());

        stack.render(renderer);
      },
      writable: true,
      configurable: true
    }
  });

  return GobblinFilter;
})(Filter);

module.exports = GobblinFilter;

},{"./filter":"/Users/sash/development/js/imglykit-rewrite/src/js/operations/filters/filter.js"}],"/Users/sash/development/js/imglykit-rewrite/src/js/operations/filters/identity-filter.js":[function(require,module,exports){
"use strict";

var _interopRequire = function (obj) { return obj && obj.__esModule ? obj["default"] : obj; };

var _prototypeProperties = function (child, staticProps, instanceProps) { if (staticProps) Object.defineProperties(child, staticProps); if (instanceProps) Object.defineProperties(child.prototype, instanceProps); };

var _inherits = function (subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) subClass.__proto__ = superClass; };

var _classCallCheck = function (instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } };

/*!
 * Copyright (c) 2013-2015 9elements GmbH
 *
 * Released under Attribution-NonCommercial 3.0 Unported
 * http://creativecommons.org/licenses/by-nc/3.0/
 *
 * For commercial use, please contact us at contact@9elements.com
 */

var Filter = _interopRequire(require("./filter"));

/**
 * Identity Filter
 * @class
 * @alias ImglyKit.Filters.IdentityFilter
 * @extends {ImglyKit.Filter}
 */

var IdentityFilter = (function (Filter) {
  function IdentityFilter() {
    _classCallCheck(this, IdentityFilter);

    if (Filter != null) {
      Filter.apply(this, arguments);
    }
  }

  _inherits(IdentityFilter, Filter);

  _prototypeProperties(IdentityFilter, {
    identifier: {
      /**
       * A unique string that identifies this operation. Can be used to select
       * the active filter.
       * @type {String}
       */

      get: function () {
        return "identity";
      },
      configurable: true
    }
  }, {
    render: {

      /**
       * Renders the filter
       * @param  {Renderer} renderer
       * @return {Promise}
       */

      value: function render(renderer) {},
      writable: true,
      configurable: true
    }
  });

  return IdentityFilter;
})(Filter);

module.exports = IdentityFilter;

// This is the identity filter, it doesn't have any effect.

},{"./filter":"/Users/sash/development/js/imglykit-rewrite/src/js/operations/filters/filter.js"}],"/Users/sash/development/js/imglykit-rewrite/src/js/operations/filters/k1-filter.js":[function(require,module,exports){
"use strict";

var _interopRequire = function (obj) { return obj && obj.__esModule ? obj["default"] : obj; };

var _prototypeProperties = function (child, staticProps, instanceProps) { if (staticProps) Object.defineProperties(child, staticProps); if (instanceProps) Object.defineProperties(child.prototype, instanceProps); };

var _inherits = function (subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) subClass.__proto__ = superClass; };

var _classCallCheck = function (instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } };

/*!
 * Copyright (c) 2013-2015 9elements GmbH
 *
 * Released under Attribution-NonCommercial 3.0 Unported
 * http://creativecommons.org/licenses/by-nc/3.0/
 *
 * For commercial use, please contact us at contact@9elements.com
 */

var Filter = _interopRequire(require("./filter"));

/**
 * K1 Filter
 * @class
 * @alias ImglyKit.Filters.K1Filter
 * @extends {ImglyKit.Filter}
 */

var K1Filter = (function (Filter) {
  function K1Filter() {
    _classCallCheck(this, K1Filter);

    if (Filter != null) {
      Filter.apply(this, arguments);
    }
  }

  _inherits(K1Filter, Filter);

  _prototypeProperties(K1Filter, {
    identifier: {
      /**
       * A unique string that identifies this operation. Can be used to select
       * the active filter.
       * @type {String}
       */

      get: function () {
        return "k1";
      },
      configurable: true
    }
  }, {
    render: {

      /**
       * Renders the filter
       * @param  {Renderer} renderer
       * @return {Promise}
       */

      value: function render(renderer) {
        var stack = new Filter.PrimitivesStack();

        // Tone curve
        stack.add(new Filter.Primitives.ToneCurve({
          controlPoints: [[0, 0], [53, 32], [91, 80], [176, 205], [255, 255]]
        }));

        // Saturation
        stack.add(new Filter.Primitives.Saturation({
          saturation: 0.9
        }));

        stack.render(renderer);
      },
      writable: true,
      configurable: true
    }
  });

  return K1Filter;
})(Filter);

module.exports = K1Filter;

},{"./filter":"/Users/sash/development/js/imglykit-rewrite/src/js/operations/filters/filter.js"}],"/Users/sash/development/js/imglykit-rewrite/src/js/operations/filters/k2-filter.js":[function(require,module,exports){
"use strict";

var _interopRequire = function (obj) { return obj && obj.__esModule ? obj["default"] : obj; };

var _prototypeProperties = function (child, staticProps, instanceProps) { if (staticProps) Object.defineProperties(child, staticProps); if (instanceProps) Object.defineProperties(child.prototype, instanceProps); };

var _inherits = function (subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) subClass.__proto__ = superClass; };

var _classCallCheck = function (instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } };

/*!
 * Copyright (c) 2013-2015 9elements GmbH
 *
 * Released under Attribution-NonCommercial 3.0 Unported
 * http://creativecommons.org/licenses/by-nc/3.0/
 *
 * For commercial use, please contact us at contact@9elements.com
 */

var Filter = _interopRequire(require("./filter"));

var Color = _interopRequire(require("../../lib/color"));

/**
 * K2 Filter
 * @class
 * @alias ImglyKit.Filters.K2Filter
 * @extends {ImglyKit.Filter}
 */

var K2Filter = (function (Filter) {
  function K2Filter() {
    _classCallCheck(this, K2Filter);

    if (Filter != null) {
      Filter.apply(this, arguments);
    }
  }

  _inherits(K2Filter, Filter);

  _prototypeProperties(K2Filter, {
    identifier: {
      /**
       * A unique string that identifies this operation. Can be used to select
       * the active filter.
       * @type {String}
       */

      get: function () {
        return "k2";
      },
      configurable: true
    }
  }, {
    render: {

      /**
       * Renders the filter
       * @param  {Renderer} renderer
       * @return {Promise}
       */

      value: function render(renderer) {
        var stack = new Filter.PrimitivesStack();

        // Tone curve
        stack.add(new Filter.Primitives.ToneCurve({
          controlPoints: [[0, 0], [54, 33], [77, 82], [94, 103], [122, 126], [177, 193], [229, 232], [255, 255]]
        }));

        // Soft color overlay
        stack.add(new Filter.Primitives.SoftColorOverlay({
          color: new Color(40 / 255, 40 / 255, 40 / 255)
        }));

        stack.render(renderer);
      },
      writable: true,
      configurable: true
    }
  });

  return K2Filter;
})(Filter);

module.exports = K2Filter;

},{"../../lib/color":"/Users/sash/development/js/imglykit-rewrite/src/js/lib/color.js","./filter":"/Users/sash/development/js/imglykit-rewrite/src/js/operations/filters/filter.js"}],"/Users/sash/development/js/imglykit-rewrite/src/js/operations/filters/k6-filter.js":[function(require,module,exports){
"use strict";

var _interopRequire = function (obj) { return obj && obj.__esModule ? obj["default"] : obj; };

var _prototypeProperties = function (child, staticProps, instanceProps) { if (staticProps) Object.defineProperties(child, staticProps); if (instanceProps) Object.defineProperties(child.prototype, instanceProps); };

var _inherits = function (subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) subClass.__proto__ = superClass; };

var _classCallCheck = function (instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } };

/*!
 * Copyright (c) 2013-2015 9elements GmbH
 *
 * Released under Attribution-NonCommercial 3.0 Unported
 * http://creativecommons.org/licenses/by-nc/3.0/
 *
 * For commercial use, please contact us at contact@9elements.com
 */

var Filter = _interopRequire(require("./filter"));

/**
 * K6 Filter
 * @class
 * @alias ImglyKit.Filters.K6Filter
 * @extends {ImglyKit.Filter}
 */

var K6Filter = (function (Filter) {
  function K6Filter() {
    _classCallCheck(this, K6Filter);

    if (Filter != null) {
      Filter.apply(this, arguments);
    }
  }

  _inherits(K6Filter, Filter);

  _prototypeProperties(K6Filter, {
    identifier: {
      /**
       * A unique string that identifies this operation. Can be used to select
       * the active filter.
       * @type {String}
       */

      get: function () {
        return "k6";
      },
      configurable: true
    }
  }, {
    render: {

      /**
       * Renders the filter
       * @param  {Renderer} renderer
       * @return {Promise}
       */

      value: function render(renderer) {
        var stack = new Filter.PrimitivesStack();

        // Saturation
        stack.add(new Filter.Primitives.Saturation({
          saturation: 0.5
        }));

        stack.render(renderer);
      },
      writable: true,
      configurable: true
    }
  });

  return K6Filter;
})(Filter);

module.exports = K6Filter;

},{"./filter":"/Users/sash/development/js/imglykit-rewrite/src/js/operations/filters/filter.js"}],"/Users/sash/development/js/imglykit-rewrite/src/js/operations/filters/kdynamic-filter.js":[function(require,module,exports){
"use strict";

var _interopRequire = function (obj) { return obj && obj.__esModule ? obj["default"] : obj; };

var _prototypeProperties = function (child, staticProps, instanceProps) { if (staticProps) Object.defineProperties(child, staticProps); if (instanceProps) Object.defineProperties(child.prototype, instanceProps); };

var _inherits = function (subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) subClass.__proto__ = superClass; };

var _classCallCheck = function (instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } };

/*!
 * Copyright (c) 2013-2015 9elements GmbH
 *
 * Released under Attribution-NonCommercial 3.0 Unported
 * http://creativecommons.org/licenses/by-nc/3.0/
 *
 * For commercial use, please contact us at contact@9elements.com
 */

var Filter = _interopRequire(require("./filter"));

/**
 * KDynamic Filter
 * @class
 * @alias ImglyKit.Filters.KDynamicFilter
 * @extends {ImglyKit.Filter}
 */

var KDynamicFilter = (function (Filter) {
  function KDynamicFilter() {
    _classCallCheck(this, KDynamicFilter);

    if (Filter != null) {
      Filter.apply(this, arguments);
    }
  }

  _inherits(KDynamicFilter, Filter);

  _prototypeProperties(KDynamicFilter, {
    identifier: {
      /**
       * A unique string that identifies this operation. Can be used to select
       * the active filter.
       * @type {String}
       */

      get: function () {
        return "kdynamic";
      },
      configurable: true
    }
  }, {
    render: {

      /**
       * Renders the filter
       * @param  {Renderer} renderer
       * @return {Promise}
       */

      value: function render(renderer) {
        var stack = new Filter.PrimitivesStack();

        // Tone curve
        stack.add(new Filter.Primitives.ToneCurve({
          controlPoints: [[0, 0], [17, 27], [46, 69], [90, 112], [156, 200], [203, 243], [255, 255]]
        }));

        // Saturation
        stack.add(new Filter.Primitives.Saturation({
          saturation: 0.7
        }));

        stack.render(renderer);
      },
      writable: true,
      configurable: true
    }
  });

  return KDynamicFilter;
})(Filter);

module.exports = KDynamicFilter;

},{"./filter":"/Users/sash/development/js/imglykit-rewrite/src/js/operations/filters/filter.js"}],"/Users/sash/development/js/imglykit-rewrite/src/js/operations/filters/lenin-filter.js":[function(require,module,exports){
"use strict";

var _interopRequire = function (obj) { return obj && obj.__esModule ? obj["default"] : obj; };

var _prototypeProperties = function (child, staticProps, instanceProps) { if (staticProps) Object.defineProperties(child, staticProps); if (instanceProps) Object.defineProperties(child.prototype, instanceProps); };

var _inherits = function (subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) subClass.__proto__ = superClass; };

var _classCallCheck = function (instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } };

/*!
 * Copyright (c) 2013-2015 9elements GmbH
 *
 * Released under Attribution-NonCommercial 3.0 Unported
 * http://creativecommons.org/licenses/by-nc/3.0/
 *
 * For commercial use, please contact us at contact@9elements.com
 */

var Filter = _interopRequire(require("./filter"));

/**
 * Lenin Filter
 * @class
 * @alias ImglyKit.Filters.LeninFilter
 * @extends {ImglyKit.Filter}
 */

var LeninFilter = (function (Filter) {
  function LeninFilter() {
    _classCallCheck(this, LeninFilter);

    if (Filter != null) {
      Filter.apply(this, arguments);
    }
  }

  _inherits(LeninFilter, Filter);

  _prototypeProperties(LeninFilter, {
    identifier: {
      /**
       * A unique string that identifies this operation. Can be used to select
       * the active filter.
       * @type {String}
       */

      get: function () {
        return "lenin";
      },
      configurable: true
    }
  }, {
    render: {

      /**
       * Renders the filter
       * @param  {Renderer} renderer
       * @return {Promise}
       */

      value: function render(renderer) {
        var stack = new Filter.PrimitivesStack();

        // Desaturation
        stack.add(new Filter.Primitives.Desaturation({
          desaturation: 0.4
        }));

        // Tone curve
        stack.add(new Filter.Primitives.ToneCurve({
          rgbControlPoints: {
            red: [[0, 20], [40, 20], [106, 111], [129, 153], [190, 223], [255, 255]],
            green: [[0, 20], [40, 20], [62, 41], [106, 108], [132, 159], [203, 237], [255, 255]],
            blue: [[0, 40], [40, 40], [73, 60], [133, 160], [191, 297], [203, 237], [237, 239], [255, 255]]
          }
        }));

        stack.render(renderer);
      },
      writable: true,
      configurable: true
    }
  });

  return LeninFilter;
})(Filter);

module.exports = LeninFilter;

},{"./filter":"/Users/sash/development/js/imglykit-rewrite/src/js/operations/filters/filter.js"}],"/Users/sash/development/js/imglykit-rewrite/src/js/operations/filters/lomo-filter.js":[function(require,module,exports){
"use strict";

var _interopRequire = function (obj) { return obj && obj.__esModule ? obj["default"] : obj; };

var _prototypeProperties = function (child, staticProps, instanceProps) { if (staticProps) Object.defineProperties(child, staticProps); if (instanceProps) Object.defineProperties(child.prototype, instanceProps); };

var _inherits = function (subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) subClass.__proto__ = superClass; };

var _classCallCheck = function (instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } };

/*!
 * Copyright (c) 2013-2015 9elements GmbH
 *
 * Released under Attribution-NonCommercial 3.0 Unported
 * http://creativecommons.org/licenses/by-nc/3.0/
 *
 * For commercial use, please contact us at contact@9elements.com
 */

var Filter = _interopRequire(require("./filter"));

/**
 * Lomo Filter
 * @class
 * @alias ImglyKit.Filters.LomoFilter
 * @extends {ImglyKit.Filter}
 */

var LomoFilter = (function (Filter) {
  function LomoFilter() {
    _classCallCheck(this, LomoFilter);

    if (Filter != null) {
      Filter.apply(this, arguments);
    }
  }

  _inherits(LomoFilter, Filter);

  _prototypeProperties(LomoFilter, {
    identifier: {

      /**
       * A unique string that identifies this operation. Can be used to select
       * the active filter.
       * @type {String}
       */

      get: function () {
        return "lomo";
      },
      configurable: true
    }
  }, {
    render: {

      /**
       * Renders the filter
       * @param  {Renderer} renderer
       * @return {Promise}
       */

      value: function render(renderer) {
        var stack = new Filter.PrimitivesStack();

        stack.add(new Filter.Primitives.ToneCurve({
          controlPoints: [[0, 0], [87, 20], [131, 156], [183, 205], [255, 200]]
        }));

        stack.render(renderer);
      },
      writable: true,
      configurable: true
    }
  });

  return LomoFilter;
})(Filter);

module.exports = LomoFilter;

},{"./filter":"/Users/sash/development/js/imglykit-rewrite/src/js/operations/filters/filter.js"}],"/Users/sash/development/js/imglykit-rewrite/src/js/operations/filters/mellow-filter.js":[function(require,module,exports){
"use strict";

var _interopRequire = function (obj) { return obj && obj.__esModule ? obj["default"] : obj; };

var _prototypeProperties = function (child, staticProps, instanceProps) { if (staticProps) Object.defineProperties(child, staticProps); if (instanceProps) Object.defineProperties(child.prototype, instanceProps); };

var _inherits = function (subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) subClass.__proto__ = superClass; };

var _classCallCheck = function (instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } };

/*!
 * Copyright (c) 2013-2015 9elements GmbH
 *
 * Released under Attribution-NonCommercial 3.0 Unported
 * http://creativecommons.org/licenses/by-nc/3.0/
 *
 * For commercial use, please contact us at contact@9elements.com
 */

var Filter = _interopRequire(require("./filter"));

/**
 * Mellow Filter
 * @class
 * @alias ImglyKit.Filters.MellowFilter
 * @extends {ImglyKit.Filter}
 */

var MellowFilter = (function (Filter) {
  function MellowFilter() {
    _classCallCheck(this, MellowFilter);

    if (Filter != null) {
      Filter.apply(this, arguments);
    }
  }

  _inherits(MellowFilter, Filter);

  _prototypeProperties(MellowFilter, {
    identifier: {
      /**
       * A unique string that identifies this operation. Can be used to select
       * the active filter.
       * @type {String}
       */

      get: function () {
        return "mellow";
      },
      configurable: true
    }
  }, {
    render: {

      /**
       * Renders the filter
       * @param  {Renderer} renderer
       * @return {Promise}
       */

      value: function render(renderer) {
        var stack = new Filter.PrimitivesStack();

        stack.add(new Filter.Primitives.ToneCurve({
          rgbControlPoints: {
            red: [[0, 0], [41, 84], [87, 134], [255, 255]],
            green: [[0, 0], [255, 216]],
            blue: [[0, 0], [255, 131]]
          }
        }));

        stack.render(renderer);
      },
      writable: true,
      configurable: true
    }
  });

  return MellowFilter;
})(Filter);

module.exports = MellowFilter;

},{"./filter":"/Users/sash/development/js/imglykit-rewrite/src/js/operations/filters/filter.js"}],"/Users/sash/development/js/imglykit-rewrite/src/js/operations/filters/morning-filter.js":[function(require,module,exports){
"use strict";

var _interopRequire = function (obj) { return obj && obj.__esModule ? obj["default"] : obj; };

var _prototypeProperties = function (child, staticProps, instanceProps) { if (staticProps) Object.defineProperties(child, staticProps); if (instanceProps) Object.defineProperties(child.prototype, instanceProps); };

var _inherits = function (subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) subClass.__proto__ = superClass; };

var _classCallCheck = function (instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } };

/*!
 * Copyright (c) 2013-2015 9elements GmbH
 *
 * Released under Attribution-NonCommercial 3.0 Unported
 * http://creativecommons.org/licenses/by-nc/3.0/
 *
 * For commercial use, please contact us at contact@9elements.com
 */

var Filter = _interopRequire(require("./filter"));

/**
 * Morning Filter
 * @class
 * @alias ImglyKit.Filters.MorningFilter
 * @extends {ImglyKit.Filter}
 */

var MorningFilter = (function (Filter) {
  function MorningFilter() {
    _classCallCheck(this, MorningFilter);

    if (Filter != null) {
      Filter.apply(this, arguments);
    }
  }

  _inherits(MorningFilter, Filter);

  _prototypeProperties(MorningFilter, {
    identifier: {
      /**
       * A unique string that identifies this operation. Can be used to select
       * the active filter.
       * @type {String}
       */

      get: function () {
        return "morning";
      },
      configurable: true
    }
  }, {
    render: {

      /**
       * Renders the filter
       * @param  {Renderer} renderer
       * @return {Promise}
       */

      value: function render(renderer) {
        var stack = new Filter.PrimitivesStack();

        stack.add(new Filter.Primitives.ToneCurve({
          rgbControlPoints: {
            red: [[0, 40], [255, 230]],
            green: [[0, 10], [255, 225]],
            blue: [[0, 20], [255, 181]]
          }
        }));

        stack.add(new Filter.Primitives.Glow());

        stack.render(renderer);
      },
      writable: true,
      configurable: true
    }
  });

  return MorningFilter;
})(Filter);

module.exports = MorningFilter;

},{"./filter":"/Users/sash/development/js/imglykit-rewrite/src/js/operations/filters/filter.js"}],"/Users/sash/development/js/imglykit-rewrite/src/js/operations/filters/orchid-filter.js":[function(require,module,exports){
"use strict";

var _interopRequire = function (obj) { return obj && obj.__esModule ? obj["default"] : obj; };

var _prototypeProperties = function (child, staticProps, instanceProps) { if (staticProps) Object.defineProperties(child, staticProps); if (instanceProps) Object.defineProperties(child.prototype, instanceProps); };

var _inherits = function (subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) subClass.__proto__ = superClass; };

var _classCallCheck = function (instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } };

/*!
 * Copyright (c) 2013-2015 9elements GmbH
 *
 * Released under Attribution-NonCommercial 3.0 Unported
 * http://creativecommons.org/licenses/by-nc/3.0/
 *
 * For commercial use, please contact us at contact@9elements.com
 */

var Filter = _interopRequire(require("./filter"));

/**
 * Orchid Filter
 * @class
 * @alias ImglyKit.Filters.OrchidFilter
 * @extends {ImglyKit.Filter}
 */

var OrchidFilter = (function (Filter) {
  function OrchidFilter() {
    _classCallCheck(this, OrchidFilter);

    if (Filter != null) {
      Filter.apply(this, arguments);
    }
  }

  _inherits(OrchidFilter, Filter);

  _prototypeProperties(OrchidFilter, {
    identifier: {
      /**
       * A unique string that identifies this operation. Can be used to select
       * the active filter.
       * @type {String}
       */

      get: function () {
        return "orchid";
      },
      configurable: true
    }
  }, {
    render: {

      /**
       * Renders the filter
       * @param  {Renderer} renderer
       * @return {Promise}
       */

      value: function render(renderer) {
        var stack = new Filter.PrimitivesStack();

        // Tone curve
        stack.add(new Filter.Primitives.ToneCurve({
          rgbControlPoints: {
            red: [[0, 0], [115, 130], [195, 215], [255, 255]],
            green: [[0, 0], [148, 153], [172, 215], [255, 255]],
            blue: [[0, 46], [58, 75], [178, 205], [255, 255]]
          }
        }));

        // Tone curve
        stack.add(new Filter.Primitives.ToneCurve({
          controlPoints: [[0, 0], [117, 151], [189, 217], [255, 255]]
        }));

        // Desaturation
        stack.add(new Filter.Primitives.Desaturation({
          desaturation: 0.65
        }));

        stack.render(renderer);
      },
      writable: true,
      configurable: true
    }
  });

  return OrchidFilter;
})(Filter);

module.exports = OrchidFilter;

},{"./filter":"/Users/sash/development/js/imglykit-rewrite/src/js/operations/filters/filter.js"}],"/Users/sash/development/js/imglykit-rewrite/src/js/operations/filters/pola-filter.js":[function(require,module,exports){
"use strict";

var _interopRequire = function (obj) { return obj && obj.__esModule ? obj["default"] : obj; };

var _prototypeProperties = function (child, staticProps, instanceProps) { if (staticProps) Object.defineProperties(child, staticProps); if (instanceProps) Object.defineProperties(child.prototype, instanceProps); };

var _inherits = function (subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) subClass.__proto__ = superClass; };

var _classCallCheck = function (instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } };

/*!
 * Copyright (c) 2013-2015 9elements GmbH
 *
 * Released under Attribution-NonCommercial 3.0 Unported
 * http://creativecommons.org/licenses/by-nc/3.0/
 *
 * For commercial use, please contact us at contact@9elements.com
 */

var Filter = _interopRequire(require("./filter"));

/**
 * Pola Filter
 * @class
 * @alias ImglyKit.Filters.PolaFilter
 * @extends {ImglyKit.Filter}
 */

var PolaFilter = (function (Filter) {
  function PolaFilter() {
    _classCallCheck(this, PolaFilter);

    if (Filter != null) {
      Filter.apply(this, arguments);
    }
  }

  _inherits(PolaFilter, Filter);

  _prototypeProperties(PolaFilter, {
    identifier: {
      /**
       * A unique string that identifies this operation. Can be used to select
       * the active filter.
       * @type {String}
       */

      get: function () {
        return "pola";
      },
      configurable: true
    }
  }, {
    render: {

      /**
       * Renders the filter
       * @param  {Renderer} renderer
       * @return {Promise}
       */

      value: function render(renderer) {
        var stack = new Filter.PrimitivesStack();

        stack.add(new Filter.Primitives.ToneCurve({
          rgbControlPoints: {
            red: [[0, 0], [94, 74], [181, 205], [255, 255]],
            green: [[0, 0], [34, 34], [99, 76], [176, 190], [255, 255]],
            blue: [[0, 0], [102, 73], [227, 213], [255, 255]]
          }
        }));

        stack.add(new Filter.Primitives.Saturation({
          saturation: 0.8
        }));

        stack.add(new Filter.Primitives.Contrast({
          contrast: 1.5
        }));

        stack.render(renderer);
      },
      writable: true,
      configurable: true
    }
  });

  return PolaFilter;
})(Filter);

module.exports = PolaFilter;

},{"./filter":"/Users/sash/development/js/imglykit-rewrite/src/js/operations/filters/filter.js"}],"/Users/sash/development/js/imglykit-rewrite/src/js/operations/filters/pola669-filter.js":[function(require,module,exports){
"use strict";

var _interopRequire = function (obj) { return obj && obj.__esModule ? obj["default"] : obj; };

var _prototypeProperties = function (child, staticProps, instanceProps) { if (staticProps) Object.defineProperties(child, staticProps); if (instanceProps) Object.defineProperties(child.prototype, instanceProps); };

var _inherits = function (subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) subClass.__proto__ = superClass; };

var _classCallCheck = function (instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } };

/*!
 * Copyright (c) 2013-2015 9elements GmbH
 *
 * Released under Attribution-NonCommercial 3.0 Unported
 * http://creativecommons.org/licenses/by-nc/3.0/
 *
 * For commercial use, please contact us at contact@9elements.com
 */

var Filter = _interopRequire(require("./filter"));

/**
 * Pola669 Filter
 * @class
 * @alias ImglyKit.Filters.Pola669Filter
 * @extends {ImglyKit.Filter}
 */

var Pola669Filter = (function (Filter) {
  function Pola669Filter() {
    _classCallCheck(this, Pola669Filter);

    if (Filter != null) {
      Filter.apply(this, arguments);
    }
  }

  _inherits(Pola669Filter, Filter);

  _prototypeProperties(Pola669Filter, {
    identifier: {
      /**
       * A unique string that identifies this operation. Can be used to select
       * the active filter.
       * @type {String}
       */

      get: function () {
        return "pola669";
      },
      configurable: true
    }
  }, {
    render: {

      /**
       * Renders the filter
       * @param  {Renderer} renderer
       * @return {Promise}
       */

      value: function render(renderer) {
        var stack = new Filter.PrimitivesStack();

        stack.add(new Filter.Primitives.ToneCurve({
          rgbControlPoints: {
            red: [[0, 0], [56, 18], [196, 209], [255, 255]],
            green: [[0, 38], [71, 84], [255, 255]],
            blue: [[0, 0], [131, 133], [204, 211], [255, 255]]
          }
        }));

        stack.add(new Filter.Primitives.Saturation({
          saturation: 0.8
        }));

        stack.add(new Filter.Primitives.Contrast({
          contrast: 1.5
        }));

        stack.render(renderer);
      },
      writable: true,
      configurable: true
    }
  });

  return Pola669Filter;
})(Filter);

module.exports = Pola669Filter;

},{"./filter":"/Users/sash/development/js/imglykit-rewrite/src/js/operations/filters/filter.js"}],"/Users/sash/development/js/imglykit-rewrite/src/js/operations/filters/primitives-stack.js":[function(require,module,exports){
"use strict";

var _prototypeProperties = function (child, staticProps, instanceProps) { if (staticProps) Object.defineProperties(child, staticProps); if (instanceProps) Object.defineProperties(child.prototype, instanceProps); };

var _get = function get(object, property, receiver) { var desc = Object.getOwnPropertyDescriptor(object, property); if (desc === undefined) { var parent = Object.getPrototypeOf(object); if (parent === null) { return undefined; } else { return get(parent, property, receiver); } } else if ("value" in desc && desc.writable) { return desc.value; } else { var getter = desc.get; if (getter === undefined) { return undefined; } return getter.call(receiver); } };

var _classCallCheck = function (instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } };

/*!
 * Copyright (c) 2013-2015 9elements GmbH
 *
 * Released under Attribution-NonCommercial 3.0 Unported
 * http://creativecommons.org/licenses/by-nc/3.0/
 *
 * For commercial use, please contact us at contact@9elements.com
 */

/**
 * A helper class that can collect {@link Primitive} instances and render
 * the stack
 * @class
 * @alias ImglyKit.Filter.PrimitivesStack
 */

var PrimitivesStack = (function () {
  function PrimitivesStack() {
    for (var _len = arguments.length, args = Array(_len), _key = 0; _key < _len; _key++) {
      args[_key] = arguments[_key];
    }

    _classCallCheck(this, PrimitivesStack);

    _get(Object.getPrototypeOf(PrimitivesStack.prototype), "constructor", this).apply(this, args);

    /**
     * The stack of {@link ImglyKit.Filter.Primitive} instances
     * @type {Array}
     * @private
     */
    this._stack = [];
  }

  _prototypeProperties(PrimitivesStack, null, {
    add: {

      /**
       * Adds the given primitive to the stack
       * @param {ImglyKit.Filter.Primitive} primitive
       */

      value: function add(primitive) {
        this._stack.push(primitive);
      },
      writable: true,
      configurable: true
    },
    render: {

      /**
       * Renders the stack of primitives on the renderer
       * @param  {Renderer} renderer
       */

      value: function render(renderer) {
        for (var i = 0; i < this._stack.length; i++) {
          var primitive = this._stack[i];
          primitive.render(renderer);
        }
      },
      writable: true,
      configurable: true
    }
  });

  return PrimitivesStack;
})();

module.exports = PrimitivesStack;

},{}],"/Users/sash/development/js/imglykit-rewrite/src/js/operations/filters/primitives/brightness.js":[function(require,module,exports){
"use strict";

var _interopRequire = function (obj) { return obj && obj.__esModule ? obj["default"] : obj; };

var _prototypeProperties = function (child, staticProps, instanceProps) { if (staticProps) Object.defineProperties(child, staticProps); if (instanceProps) Object.defineProperties(child.prototype, instanceProps); };

var _get = function get(object, property, receiver) { var desc = Object.getOwnPropertyDescriptor(object, property); if (desc === undefined) { var parent = Object.getPrototypeOf(object); if (parent === null) { return undefined; } else { return get(parent, property, receiver); } } else if ("value" in desc && desc.writable) { return desc.value; } else { var getter = desc.get; if (getter === undefined) { return undefined; } return getter.call(receiver); } };

var _inherits = function (subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) subClass.__proto__ = superClass; };

var _classCallCheck = function (instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } };

/*!
 * Copyright (c) 2013-2015 9elements GmbH
 *
 * Released under Attribution-NonCommercial 3.0 Unported
 * http://creativecommons.org/licenses/by-nc/3.0/
 *
 * For commercial use, please contact us at contact@9elements.com
 */

var _ = _interopRequire(require("lodash"));

var Primitive = _interopRequire(require("./primitive"));

/**
 * Brightness primitive
 * @class
 * @alias ImglyKit.Filter.Primitives.Brightness
 * @extends {ImglyKit.Filter.Primitive}
 */

var Brightness = (function (Primitive) {
  function Brightness() {
    for (var _len = arguments.length, args = Array(_len), _key = 0; _key < _len; _key++) {
      args[_key] = arguments[_key];
    }

    _classCallCheck(this, Brightness);

    _get(Object.getPrototypeOf(Brightness.prototype), "constructor", this).apply(this, args);

    this._options = _.defaults(this._options, {
      brightness: 1
    });

    /**
     * The fragment shader for this primitive
     * @return {String}
     * @private
     */
    this._fragmentShader = "\n\n      precision mediump float;\n      varying vec2 v_texCoord;\n      uniform sampler2D u_image;\n      uniform float u_brightness;\n\n      void main() {\n        vec4 texColor = texture2D(u_image, v_texCoord);\n        gl_FragColor = vec4((texColor.rgb + vec3(u_brightness)), texColor.a);\n      }\n\n    ";
  }

  _inherits(Brightness, Primitive);

  _prototypeProperties(Brightness, null, {
    renderWebGL: {

      /**
       * Renders the primitive (WebGL)
       * @param  {WebGLRenderer} renderer
       */
      /* istanbul ignore next */

      value: function renderWebGL(renderer) {
        renderer.runShader(null, this._fragmentShader, {
          uniforms: {
            u_brightness: { type: "f", value: this._options.brightness }
          }
        });
      },
      writable: true,
      configurable: true
    },
    renderCanvas: {

      /**
       * Renders the primitive (Canvas)
       * @param  {CanvasRenderer} renderer
       */

      value: function renderCanvas(renderer) {
        var canvas = renderer.getCanvas();
        var imageData = renderer.getContext().getImageData(0, 0, canvas.width, canvas.height);
        var brightness = this._options.brightness;

        for (var x = 0; x < canvas.width; x++) {
          for (var y = 0; y < canvas.height; y++) {
            var index = (canvas.width * y + x) * 4;

            imageData.data[index] = imageData.data[index] + brightness * 255;
            imageData.data[index + 1] = imageData.data[index + 1] + brightness * 255;
            imageData.data[index + 2] = imageData.data[index + 2] + brightness * 255;
          }
        }

        renderer.getContext().putImageData(imageData, 0, 0);
      },
      writable: true,
      configurable: true
    }
  });

  return Brightness;
})(Primitive);

module.exports = Brightness;

},{"./primitive":"/Users/sash/development/js/imglykit-rewrite/src/js/operations/filters/primitives/primitive.js","lodash":"lodash"}],"/Users/sash/development/js/imglykit-rewrite/src/js/operations/filters/primitives/contrast.js":[function(require,module,exports){
"use strict";

var _interopRequire = function (obj) { return obj && obj.__esModule ? obj["default"] : obj; };

var _prototypeProperties = function (child, staticProps, instanceProps) { if (staticProps) Object.defineProperties(child, staticProps); if (instanceProps) Object.defineProperties(child.prototype, instanceProps); };

var _get = function get(object, property, receiver) { var desc = Object.getOwnPropertyDescriptor(object, property); if (desc === undefined) { var parent = Object.getPrototypeOf(object); if (parent === null) { return undefined; } else { return get(parent, property, receiver); } } else if ("value" in desc && desc.writable) { return desc.value; } else { var getter = desc.get; if (getter === undefined) { return undefined; } return getter.call(receiver); } };

var _inherits = function (subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) subClass.__proto__ = superClass; };

var _classCallCheck = function (instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } };

/*!
 * Copyright (c) 2013-2015 9elements GmbH
 *
 * Released under Attribution-NonCommercial 3.0 Unported
 * http://creativecommons.org/licenses/by-nc/3.0/
 *
 * For commercial use, please contact us at contact@9elements.com
 */

var _ = _interopRequire(require("lodash"));

var Primitive = _interopRequire(require("./primitive"));

/**
 * Contrast primitive
 * @class
 * @alias ImglyKit.Filter.Primitives.Contrast
 * @extends {ImglyKit.Filter.Primitive}
 */

var Contrast = (function (Primitive) {
  function Contrast() {
    for (var _len = arguments.length, args = Array(_len), _key = 0; _key < _len; _key++) {
      args[_key] = arguments[_key];
    }

    _classCallCheck(this, Contrast);

    _get(Object.getPrototypeOf(Contrast.prototype), "constructor", this).apply(this, args);

    this._options = _.defaults(this._options, {
      contrast: 1
    });

    /**
     * The fragment shader for this primitive
     * @return {String}
     * @private
     */
    this._fragmentShader = "\n\n      precision mediump float;\n      varying vec2 v_texCoord;\n      uniform sampler2D u_image;\n      uniform float u_contrast;\n\n      void main() {\n        vec4 texColor = texture2D(u_image, v_texCoord);\n        gl_FragColor = vec4(((texColor.rgb - vec3(0.5)) * u_contrast + vec3(0.5)), texColor.a);\n      }\n\n    ";
  }

  _inherits(Contrast, Primitive);

  _prototypeProperties(Contrast, null, {
    renderWebGL: {

      /**
       * Renders the primitive (WebGL)
       * @param  {WebGLRenderer} renderer
       */
      /* istanbul ignore next */

      value: function renderWebGL(renderer) {
        renderer.runShader(null, this._fragmentShader, {
          uniforms: {
            u_contrast: { type: "f", value: this._options.contrast }
          }
        });
      },
      writable: true,
      configurable: true
    },
    renderCanvas: {

      /**
       * Renders the primitive (Canvas)
       * @param  {CanvasRenderer} renderer
       */

      value: function renderCanvas(renderer) {
        var canvas = renderer.getCanvas();
        var imageData = renderer.getContext().getImageData(0, 0, canvas.width, canvas.height);
        var contrast = this._options.contrast;

        for (var x = 0; x < canvas.width; x++) {
          for (var y = 0; y < canvas.height; y++) {
            var index = (canvas.width * y + x) * 4;

            imageData.data[index] = (imageData.data[index] - 127) * contrast + 127;
            imageData.data[index + 1] = (imageData.data[index + 1] - 127) * contrast + 127;
            imageData.data[index + 2] = (imageData.data[index + 2] - 127) * contrast + 127;
          }
        }

        renderer.getContext().putImageData(imageData, 0, 0);
      },
      writable: true,
      configurable: true
    }
  });

  return Contrast;
})(Primitive);

module.exports = Contrast;

},{"./primitive":"/Users/sash/development/js/imglykit-rewrite/src/js/operations/filters/primitives/primitive.js","lodash":"lodash"}],"/Users/sash/development/js/imglykit-rewrite/src/js/operations/filters/primitives/desaturation.js":[function(require,module,exports){
"use strict";

var _interopRequire = function (obj) { return obj && obj.__esModule ? obj["default"] : obj; };

var _prototypeProperties = function (child, staticProps, instanceProps) { if (staticProps) Object.defineProperties(child, staticProps); if (instanceProps) Object.defineProperties(child.prototype, instanceProps); };

var _get = function get(object, property, receiver) { var desc = Object.getOwnPropertyDescriptor(object, property); if (desc === undefined) { var parent = Object.getPrototypeOf(object); if (parent === null) { return undefined; } else { return get(parent, property, receiver); } } else if ("value" in desc && desc.writable) { return desc.value; } else { var getter = desc.get; if (getter === undefined) { return undefined; } return getter.call(receiver); } };

var _inherits = function (subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) subClass.__proto__ = superClass; };

var _classCallCheck = function (instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } };

/*!
 * Copyright (c) 2013-2015 9elements GmbH
 *
 * Released under Attribution-NonCommercial 3.0 Unported
 * http://creativecommons.org/licenses/by-nc/3.0/
 *
 * For commercial use, please contact us at contact@9elements.com
 */

var _ = _interopRequire(require("lodash"));

var Primitive = _interopRequire(require("./primitive"));

/**
 * Desaturation primitive
 * @class
 * @alias ImglyKit.Filter.Primitives.Desaturation
 * @extends {ImglyKit.Filter.Primitive}
 */

var Desaturation = (function (Primitive) {
  function Desaturation() {
    for (var _len = arguments.length, args = Array(_len), _key = 0; _key < _len; _key++) {
      args[_key] = arguments[_key];
    }

    _classCallCheck(this, Desaturation);

    _get(Object.getPrototypeOf(Desaturation.prototype), "constructor", this).apply(this, args);

    this._options = _.defaults(this._options, {
      desaturation: 1
    });

    /**
     * The fragment shader for this primitive
     * @return {String}
     * @private
     */
    this._fragmentShader = "\n      precision mediump float;\n      varying vec2 v_texCoord;\n      uniform sampler2D u_image;\n      uniform float u_desaturation;\n\n      const vec3 luminanceWeighting = vec3(0.2125, 0.7154, 0.0721);\n\n      void main() {\n        vec3 texColor = texture2D(u_image, v_texCoord).xyz;\n        vec3 grayXfer = vec3(0.3, 0.59, 0.11);\n        vec3 gray = vec3(dot(grayXfer, texColor));\n        gl_FragColor = vec4(mix(texColor, gray, u_desaturation), 1.0);\n      }\n    ";
  }

  _inherits(Desaturation, Primitive);

  _prototypeProperties(Desaturation, null, {
    renderWebGL: {

      /**
       * Renders the primitive (WebGL)
       * @param  {WebGLRenderer} renderer
       * @return {Promise}
       */
      /* istanbul ignore next */

      value: function renderWebGL(renderer) {
        renderer.runShader(null, this._fragmentShader, {
          uniforms: {
            u_desaturation: { type: "f", value: this._options.desaturation }
          }
        });
      },
      writable: true,
      configurable: true
    },
    renderCanvas: {

      /**
       * Renders the primitive (Canvas)
       * @param  {CanvasRenderer} renderer
       */

      value: function renderCanvas(renderer) {
        var canvas = renderer.getCanvas();
        var imageData = renderer.getContext().getImageData(0, 0, canvas.width, canvas.height);
        var desaturation = this._options.desaturation;

        for (var x = 0; x < canvas.width; x++) {
          for (var y = 0; y < canvas.height; y++) {
            var index = (canvas.width * y + x) * 4;

            var luminance = imageData.data[index] * 0.3 + imageData.data[index + 1] * 0.59 + imageData.data[index + 2] * 0.11;
            imageData.data[index] = luminance * (1 - desaturation) + imageData.data[index] * desaturation;
            imageData.data[index + 1] = luminance * (1 - desaturation) + imageData.data[index + 1] * desaturation;
            imageData.data[index + 2] = luminance * (1 - desaturation) + imageData.data[index + 2] * desaturation;
          }
        }

        renderer.getContext().putImageData(imageData, 0, 0);
      },
      writable: true,
      configurable: true
    }
  });

  return Desaturation;
})(Primitive);

module.exports = Desaturation;

},{"./primitive":"/Users/sash/development/js/imglykit-rewrite/src/js/operations/filters/primitives/primitive.js","lodash":"lodash"}],"/Users/sash/development/js/imglykit-rewrite/src/js/operations/filters/primitives/glow.js":[function(require,module,exports){
"use strict";

var _interopRequire = function (obj) { return obj && obj.__esModule ? obj["default"] : obj; };

var _prototypeProperties = function (child, staticProps, instanceProps) { if (staticProps) Object.defineProperties(child, staticProps); if (instanceProps) Object.defineProperties(child.prototype, instanceProps); };

var _get = function get(object, property, receiver) { var desc = Object.getOwnPropertyDescriptor(object, property); if (desc === undefined) { var parent = Object.getPrototypeOf(object); if (parent === null) { return undefined; } else { return get(parent, property, receiver); } } else if ("value" in desc && desc.writable) { return desc.value; } else { var getter = desc.get; if (getter === undefined) { return undefined; } return getter.call(receiver); } };

var _inherits = function (subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) subClass.__proto__ = superClass; };

var _classCallCheck = function (instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } };

/*!
 * Copyright (c) 2013-2015 9elements GmbH
 *
 * Released under Attribution-NonCommercial 3.0 Unported
 * http://creativecommons.org/licenses/by-nc/3.0/
 *
 * For commercial use, please contact us at contact@9elements.com
 */

var _ = _interopRequire(require("lodash"));

var Primitive = _interopRequire(require("./primitive"));

var Color = _interopRequire(require("../../../lib/color"));

/**
 * Glow primitive
 * @class
 * @alias ImglyKit.Filter.Primitives.Glow
 * @extends {ImglyKit.Filter.Primitive}
 */

var Glow = (function (Primitive) {
  function Glow() {
    for (var _len = arguments.length, args = Array(_len), _key = 0; _key < _len; _key++) {
      args[_key] = arguments[_key];
    }

    _classCallCheck(this, Glow);

    _get(Object.getPrototypeOf(Glow.prototype), "constructor", this).apply(this, args);

    this._options = _.defaults(this._options, {
      color: new Color(1, 1, 1)
    });

    /**
     * The fragment shader for this primitive
     * @return {String}
     * @private
     */
    this._fragmentShader = "\n      precision mediump float;\n      varying vec2 v_texCoord;\n      uniform sampler2D u_image;\n\n      uniform vec3 u_color;\n\n      void main() {\n        vec3 texColor = texture2D(u_image, v_texCoord).rgb;\n\n        vec2 textureCoord = v_texCoord - vec2(0.5, 0.5);\n        textureCoord /= 0.75;\n\n        float d = 1.0 - dot(textureCoord, textureCoord);\n        d = clamp(d, 0.2, 1.0);\n        vec3 newColor = texColor * d * u_color.rgb;\n        gl_FragColor = vec4(vec3(newColor),1.0);\n      }\n    ";
  }

  _inherits(Glow, Primitive);

  _prototypeProperties(Glow, null, {
    renderWebGL: {

      /**
       * Renders the primitive (WebGL)
       * @param  {WebGLRenderer} renderer
       * @return {Promise}
       */
      /* istanbul ignore next */

      value: function renderWebGL(renderer) {
        renderer.runShader(null, this._fragmentShader, {
          uniforms: {
            u_color: { type: "3f", value: this._options.color.toRGBGLColor() }
          }
        });
      },
      writable: true,
      configurable: true
    },
    renderCanvas: {

      /**
       * Renders the primitive (Canvas)
       * @param  {CanvasRenderer} renderer
       * @return {Promise}
       */

      value: function renderCanvas(renderer) {
        var canvas = renderer.getCanvas();
        var imageData = renderer.getContext().getImageData(0, 0, canvas.width, canvas.height);
        var color = this._options.color;

        var d;
        for (var x = 0; x < canvas.width; x++) {
          for (var y = 0; y < canvas.height; y++) {
            var index = (canvas.width * y + x) * 4;

            var x01 = x / canvas.width;
            var y01 = y / canvas.height;

            var nx = (x01 - 0.5) / 0.75;
            var ny = (y01 - 0.5) / 0.75;

            var scalarX = nx * nx;
            var scalarY = ny * ny;
            d = 1 - (scalarX + scalarY);
            d = Math.min(Math.max(d, 0.1), 1);

            imageData.data[index] = imageData.data[index] * (d * color.r);
            imageData.data[index + 1] = imageData.data[index + 1] * (d * color.g);
            imageData.data[index + 2] = imageData.data[index + 2] * (d * color.b);
            imageData.data[index + 3] = 255;
          }
        }

        renderer.getContext().putImageData(imageData, 0, 0);
      },
      writable: true,
      configurable: true
    }
  });

  return Glow;
})(Primitive);

module.exports = Glow;

},{"../../../lib/color":"/Users/sash/development/js/imglykit-rewrite/src/js/lib/color.js","./primitive":"/Users/sash/development/js/imglykit-rewrite/src/js/operations/filters/primitives/primitive.js","lodash":"lodash"}],"/Users/sash/development/js/imglykit-rewrite/src/js/operations/filters/primitives/gobblin.js":[function(require,module,exports){
"use strict";

var _interopRequire = function (obj) { return obj && obj.__esModule ? obj["default"] : obj; };

var _prototypeProperties = function (child, staticProps, instanceProps) { if (staticProps) Object.defineProperties(child, staticProps); if (instanceProps) Object.defineProperties(child.prototype, instanceProps); };

var _get = function get(object, property, receiver) { var desc = Object.getOwnPropertyDescriptor(object, property); if (desc === undefined) { var parent = Object.getPrototypeOf(object); if (parent === null) { return undefined; } else { return get(parent, property, receiver); } } else if ("value" in desc && desc.writable) { return desc.value; } else { var getter = desc.get; if (getter === undefined) { return undefined; } return getter.call(receiver); } };

var _inherits = function (subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) subClass.__proto__ = superClass; };

var _classCallCheck = function (instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } };

/*!
 * Copyright (c) 2013-2015 9elements GmbH
 *
 * Released under Attribution-NonCommercial 3.0 Unported
 * http://creativecommons.org/licenses/by-nc/3.0/
 *
 * For commercial use, please contact us at contact@9elements.com
 */

var Primitive = _interopRequire(require("./primitive"));

/**
 * Gobblin primitive
 * @class
 * @alias ImglyKit.Filter.Primitives.Gobblin
 * @extends {ImglyKit.Filter.Primitive}
 */

var Gobblin = (function (Primitive) {
  function Gobblin() {
    for (var _len = arguments.length, args = Array(_len), _key = 0; _key < _len; _key++) {
      args[_key] = arguments[_key];
    }

    _classCallCheck(this, Gobblin);

    _get(Object.getPrototypeOf(Gobblin.prototype), "constructor", this).apply(this, args);

    /**
     * The fragment shader for this primitive
     * @return {String}
     * @private
     */
    this._fragmentShader = "\n      precision mediump float;\n      varying vec2 v_texCoord;\n      uniform sampler2D u_image;\n\n      void main() {\n        vec4 texColor = texture2D(u_image, v_texCoord);\n        texColor.b = texColor.g * 0.33;\n        texColor.r = texColor.r * 0.6;\n        texColor.b += texColor.r * 0.33;\n        texColor.g = texColor.g * 0.7;\n        gl_FragColor = texColor;\n      }\n    ";
  }

  _inherits(Gobblin, Primitive);

  _prototypeProperties(Gobblin, null, {
    renderWebGL: {

      /**
       * Renders the primitive (WebGL)
       * @param  {WebGLRenderer} renderer
       * @return {Promise}
       */
      /* istanbul ignore next */

      value: function renderWebGL(renderer) {
        renderer.runShader(null, this._fragmentShader);
      },
      writable: true,
      configurable: true
    },
    renderCanvas: {

      /**
       * Renders the primitive (Canvas)
       * @param  {CanvasRenderer} renderer
       */

      value: function renderCanvas(renderer) {
        var canvas = renderer.getCanvas();
        var imageData = renderer.getContext().getImageData(0, 0, canvas.width, canvas.height);

        for (var x = 0; x < canvas.width; x++) {
          for (var y = 0; y < canvas.height; y++) {
            var index = (canvas.width * y + x) * 4;

            imageData.data[index + 2] = imageData.data[index + 1] * 0.33;
            imageData.data[index] = imageData.data[index] * 0.6;
            imageData.data[index + 2] += imageData.data[index] * 0.33;
            imageData.data[index + 1] = imageData.data[index + 1] * 0.7;
            imageData.data[index + 3] = 255;
          }
        }

        renderer.getContext().putImageData(imageData, 0, 0);
      },
      writable: true,
      configurable: true
    }
  });

  return Gobblin;
})(Primitive);

module.exports = Gobblin;

},{"./primitive":"/Users/sash/development/js/imglykit-rewrite/src/js/operations/filters/primitives/primitive.js"}],"/Users/sash/development/js/imglykit-rewrite/src/js/operations/filters/primitives/grayscale.js":[function(require,module,exports){
"use strict";

var _interopRequire = function (obj) { return obj && obj.__esModule ? obj["default"] : obj; };

var _prototypeProperties = function (child, staticProps, instanceProps) { if (staticProps) Object.defineProperties(child, staticProps); if (instanceProps) Object.defineProperties(child.prototype, instanceProps); };

var _get = function get(object, property, receiver) { var desc = Object.getOwnPropertyDescriptor(object, property); if (desc === undefined) { var parent = Object.getPrototypeOf(object); if (parent === null) { return undefined; } else { return get(parent, property, receiver); } } else if ("value" in desc && desc.writable) { return desc.value; } else { var getter = desc.get; if (getter === undefined) { return undefined; } return getter.call(receiver); } };

var _inherits = function (subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) subClass.__proto__ = superClass; };

var _classCallCheck = function (instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } };

/*!
 * Copyright (c) 2013-2015 9elements GmbH
 *
 * Released under Attribution-NonCommercial 3.0 Unported
 * http://creativecommons.org/licenses/by-nc/3.0/
 *
 * For commercial use, please contact us at contact@9elements.com
 */

var Primitive = _interopRequire(require("./primitive"));

/**
 * Grayscale primitive
 * @class
 * @alias ImglyKit.Filter.Primitives.Grayscale
 * @extends {ImglyKit.Filter.Primitive}
 */

var Grayscale = (function (Primitive) {
  function Grayscale() {
    for (var _len = arguments.length, args = Array(_len), _key = 0; _key < _len; _key++) {
      args[_key] = arguments[_key];
    }

    _classCallCheck(this, Grayscale);

    _get(Object.getPrototypeOf(Grayscale.prototype), "constructor", this).apply(this, args);

    /**
     * The fragment shader for this primitive
     * @return {String}
     * @private
     */
    this._fragmentShader = "\n      precision mediump float;\n      varying vec2 v_texCoord;\n      uniform sampler2D u_image;\n      vec3 W = vec3(0.2125, 0.7154, 0.0721);\n\n      void main() {\n        vec3 texColor = texture2D(u_image, v_texCoord).rgb;\n        float luminance = dot(texColor, W);\n        gl_FragColor = vec4(vec3(luminance), 1.0);\n      }\n    ";
  }

  _inherits(Grayscale, Primitive);

  _prototypeProperties(Grayscale, null, {
    renderWebGL: {

      /**
       * Renders the primitive (WebGL)
       * @param  {WebGLRenderer} renderer
       * @return {Promise}
       */
      /* istanbul ignore next */

      value: function renderWebGL(renderer) {
        renderer.runShader(null, this._fragmentShader);
      },
      writable: true,
      configurable: true
    },
    renderCanvas: {

      /**
       * Renders the primitive (Canvas)
       * @param  {CanvasRenderer} renderer
       */

      value: function renderCanvas(renderer) {
        var canvas = renderer.getCanvas();
        var imageData = renderer.getContext().getImageData(0, 0, canvas.width, canvas.height);

        for (var x = 0; x < canvas.width; x++) {
          for (var y = 0; y < canvas.height; y++) {
            var index = (canvas.width * y + x) * 4;

            var luminance = imageData.data[index] * 0.2125 + imageData.data[index + 1] * 0.7154 + imageData.data[index + 2] * 0.0721;

            imageData.data[index] = luminance;
            imageData.data[index + 1] = luminance;
            imageData.data[index + 2] = luminance;
          }
        }

        renderer.getContext().putImageData(imageData, 0, 0);
      },
      writable: true,
      configurable: true
    }
  });

  return Grayscale;
})(Primitive);

module.exports = Grayscale;

},{"./primitive":"/Users/sash/development/js/imglykit-rewrite/src/js/operations/filters/primitives/primitive.js"}],"/Users/sash/development/js/imglykit-rewrite/src/js/operations/filters/primitives/lookup-table.js":[function(require,module,exports){
"use strict";

var _interopRequire = function (obj) { return obj && obj.__esModule ? obj["default"] : obj; };

var _prototypeProperties = function (child, staticProps, instanceProps) { if (staticProps) Object.defineProperties(child, staticProps); if (instanceProps) Object.defineProperties(child.prototype, instanceProps); };

var _inherits = function (subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) subClass.__proto__ = superClass; };

var _classCallCheck = function (instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } };

/*!
 * Copyright (c) 2013-2015 9elements GmbH
 *
 * Released under Attribution-NonCommercial 3.0 Unported
 * http://creativecommons.org/licenses/by-nc/3.0/
 *
 * For commercial use, please contact us at contact@9elements.com
 */

var Primitive = _interopRequire(require("./primitive"));

/**
 * Stores a 256 byte long lookup table in a 2d texture which will be
 * used to look up the corresponding value for each channel.
 * @class
 * @alias ImglyKit.Filter.Primitives.LookupTable
 * @extends {ImglyKit.Filter.Primitive}
 */

var LookupTable = (function (Primitive) {
  function LookupTable() {
    _classCallCheck(this, LookupTable);

    Primitive.apply(this, arguments);

    this._textureIndex = 3;

    /**
     * The fragment shader for this primitive
     * @return {String}
     * @private
     */
    this._fragmentShader = "\n      precision mediump float;\n      varying vec2 v_texCoord;\n      uniform sampler2D u_image;\n      uniform sampler2D u_lookupTable;\n\n      void main() {\n        vec4 texColor = texture2D(u_image, v_texCoord);\n        float r = texture2D(u_lookupTable, vec2(texColor.r, 0.0)).r;\n        float g = texture2D(u_lookupTable, vec2(texColor.g, 0.0)).g;\n        float b = texture2D(u_lookupTable, vec2(texColor.b, 0.0)).b;\n\n        gl_FragColor = vec4(r, g, b, texColor.a);\n      }\n    ";
  }

  _inherits(LookupTable, Primitive);

  _prototypeProperties(LookupTable, null, {
    renderWebGL: {

      /**
       * Renders the primitive (WebGL)
       * @param  {WebGLRenderer} renderer
       */
      /* istanbul ignore next */

      value: function renderWebGL(renderer) {
        this._updateTexture(renderer);

        renderer.runShader(null, this._fragmentShader, {
          uniforms: {
            u_lookupTable: { type: "i", value: 3 }
          }
        });
      },
      writable: true,
      configurable: true
    },
    renderCanvas: {

      /**
       * Renders the primitive (Canvas)
       * @param  {CanvasRenderer} renderer
       */

      value: function renderCanvas(renderer) {
        var canvas = renderer.getCanvas();
        var imageData = renderer.getContext().getImageData(0, 0, canvas.width, canvas.height);
        var table = this._options.data;

        for (var x = 0; x < canvas.width; x++) {
          for (var y = 0; y < canvas.height; y++) {
            var index = (canvas.width * y + x) * 4;

            var r = imageData.data[index];
            imageData.data[index] = table[r * 4];
            var g = imageData.data[index + 1];
            imageData.data[index + 1] = table[1 + g * 4];
            var b = imageData.data[index + 2];
            imageData.data[index + 2] = table[2 + b * 4];
          }
        }

        renderer.getContext().putImageData(imageData, 0, 0);
      },
      writable: true,
      configurable: true
    },
    _updateTexture: {

      /**
       * Updates the lookup table texture (WebGL only)
       * @private
       */
      /* istanbul ignore next */

      value: function _updateTexture(renderer) {
        var gl = renderer.getContext();

        if (typeof this._options.data === "undefined") {
          throw new Error("LookupTable: No data specified.");
        }

        var dataTypedArray = new Uint8Array(this._options.data);

        gl.activeTexture(gl.TEXTURE0 + this._textureIndex);
        if (!this._texture) {
          this._texture = gl.createTexture();
        }
        gl.bindTexture(gl.TEXTURE_2D, this._texture);

        gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MIN_FILTER, gl.LINEAR);
        gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MAG_FILTER, gl.LINEAR);
        gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_S, gl.CLAMP_TO_EDGE);
        gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_T, gl.CLAMP_TO_EDGE);

        gl.texImage2D(gl.TEXTURE_2D, 0, gl.RGBA, 256, 1, 0, gl.RGBA, gl.UNSIGNED_BYTE, dataTypedArray);
        gl.activeTexture(gl.TEXTURE0);
      },
      writable: true,
      configurable: true
    }
  });

  return LookupTable;
})(Primitive);

module.exports = LookupTable;

},{"./primitive":"/Users/sash/development/js/imglykit-rewrite/src/js/operations/filters/primitives/primitive.js"}],"/Users/sash/development/js/imglykit-rewrite/src/js/operations/filters/primitives/primitive.js":[function(require,module,exports){
"use strict";

var _prototypeProperties = function (child, staticProps, instanceProps) { if (staticProps) Object.defineProperties(child, staticProps); if (instanceProps) Object.defineProperties(child.prototype, instanceProps); };

var _classCallCheck = function (instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } };

/*!
 * Copyright (c) 2013-2015 9elements GmbH
 *
 * Released under Attribution-NonCommercial 3.0 Unported
 * http://creativecommons.org/licenses/by-nc/3.0/
 *
 * For commercial use, please contact us at contact@9elements.com
 */

/**
 * Base class for primitives. Extendable via {@link ImglyKit.Filter.Primitive#extend}
 * @class
 * @alias ImglyKit.Filter.Primitive
 */

var Primitive = (function () {
  function Primitive(options) {
    _classCallCheck(this, Primitive);

    options = options || {};

    this._options = options;
  }

  _prototypeProperties(Primitive, null, {
    render: {

      /**
       * Renders the primitive
       * @param  {Renderer} renderer
       * @return {Promise}
       */

      value: function render(renderer) {
        if (renderer.identifier === "webgl") {
          this.renderWebGL(renderer);
        } else {
          this.renderCanvas(renderer);
        }
      },
      writable: true,
      configurable: true
    },
    renderWebGL: {

      /**
       * Renders the primitive (WebGL)
       * @param  {CanvasRenderer} renderer
       */
      /* istanbul ignore next */

      value: function renderWebGL(renderer) {
        /* istanbul ignore next */
        throw new Error("Primitive#renderWebGL is abstract and not implemented in inherited class.");
      },
      writable: true,
      configurable: true
    },
    renderCanvas: {

      /**
       * Renders the primitive (Canvas2D)
       * @param  {CanvasRenderer} renderer
       */

      value: function renderCanvas(renderer) {
        /* istanbul ignore next */
        throw new Error("Primitive#renderCanvas is abstract and not implemented in inherited class.");
      },
      writable: true,
      configurable: true
    }
  });

  return Primitive;
})();

module.exports = Primitive;
/* jshint unused: false */

},{}],"/Users/sash/development/js/imglykit-rewrite/src/js/operations/filters/primitives/saturation.js":[function(require,module,exports){
"use strict";

var _interopRequire = function (obj) { return obj && obj.__esModule ? obj["default"] : obj; };

var _prototypeProperties = function (child, staticProps, instanceProps) { if (staticProps) Object.defineProperties(child, staticProps); if (instanceProps) Object.defineProperties(child.prototype, instanceProps); };

var _get = function get(object, property, receiver) { var desc = Object.getOwnPropertyDescriptor(object, property); if (desc === undefined) { var parent = Object.getPrototypeOf(object); if (parent === null) { return undefined; } else { return get(parent, property, receiver); } } else if ("value" in desc && desc.writable) { return desc.value; } else { var getter = desc.get; if (getter === undefined) { return undefined; } return getter.call(receiver); } };

var _inherits = function (subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) subClass.__proto__ = superClass; };

var _classCallCheck = function (instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } };

/*!
 * Copyright (c) 2013-2015 9elements GmbH
 *
 * Released under Attribution-NonCommercial 3.0 Unported
 * http://creativecommons.org/licenses/by-nc/3.0/
 *
 * For commercial use, please contact us at contact@9elements.com
 */

var _ = _interopRequire(require("lodash"));

var Primitive = _interopRequire(require("./primitive"));

/**
 * Saturation primitive
 * @class
 * @alias ImglyKit.Filter.Primitives.Saturation
 * @extends {ImglyKit.Filter.Primitive}
 */

var Saturation = (function (Primitive) {
  function Saturation() {
    for (var _len = arguments.length, args = Array(_len), _key = 0; _key < _len; _key++) {
      args[_key] = arguments[_key];
    }

    _classCallCheck(this, Saturation);

    _get(Object.getPrototypeOf(Saturation.prototype), "constructor", this).apply(this, args);

    this._options = _.defaults(this._options, {
      saturation: 0
    });

    /**
     * The fragment shader for this primitive
     * @return {String}
     * @private
     */
    this._fragmentShader = "\n      precision mediump float;\n      varying vec2 v_texCoord;\n      uniform sampler2D u_image;\n      uniform float u_saturation;\n\n      const vec3 luminanceWeighting = vec3(0.2125, 0.7154, 0.0721);\n\n      void main() {\n        vec4 texColor = texture2D(u_image, v_texCoord);\n        float luminance = dot(texColor.rgb, luminanceWeighting);\n\n        vec3 greyScaleColor = vec3(luminance);\n\n        gl_FragColor = vec4(mix(greyScaleColor, texColor.rgb, u_saturation), texColor.a);\n      }\n    ";
  }

  _inherits(Saturation, Primitive);

  _prototypeProperties(Saturation, null, {
    renderWebGL: {

      /**
       * Renders the primitive (WebGL)
       * @param  {WebGLRenderer} renderer
       */
      /* istanbul ignore next */

      value: function renderWebGL(renderer) {
        renderer.runShader(null, this._fragmentShader, {
          uniforms: {
            u_saturation: { type: "f", value: this._options.saturation }
          }
        });
      },
      writable: true,
      configurable: true
    },
    renderCanvas: {

      /**
       * Renders the primitive (Canvas)
       * @param  {CanvasRenderer} renderer
       * @return {Promise}
       */

      value: function renderCanvas(renderer) {
        var canvas = renderer.getCanvas();
        var imageData = renderer.getContext().getImageData(0, 0, canvas.width, canvas.height);
        var saturation = this._options.saturation;

        var d;
        for (var x = 0; x < canvas.width; x++) {
          for (var y = 0; y < canvas.height; y++) {
            var index = (canvas.width * y + x) * 4;

            var luminance = imageData.data[index] * 0.2125 + imageData.data[index + 1] * 0.7154 + imageData.data[index + 2] * 0.0721;
            imageData.data[index] = luminance * (1 - saturation) + imageData.data[index] * saturation;
            imageData.data[index + 1] = luminance * (1 - saturation) + imageData.data[index + 1] * saturation;
            imageData.data[index + 2] = luminance * (1 - saturation) + imageData.data[index + 2] * saturation;
          }
        }

        renderer.getContext().putImageData(imageData, 0, 0);
      },
      writable: true,
      configurable: true
    }
  });

  return Saturation;
})(Primitive);

module.exports = Saturation;

},{"./primitive":"/Users/sash/development/js/imglykit-rewrite/src/js/operations/filters/primitives/primitive.js","lodash":"lodash"}],"/Users/sash/development/js/imglykit-rewrite/src/js/operations/filters/primitives/soft-color-overlay.js":[function(require,module,exports){
"use strict";

var _interopRequire = function (obj) { return obj && obj.__esModule ? obj["default"] : obj; };

var _prototypeProperties = function (child, staticProps, instanceProps) { if (staticProps) Object.defineProperties(child, staticProps); if (instanceProps) Object.defineProperties(child.prototype, instanceProps); };

var _get = function get(object, property, receiver) { var desc = Object.getOwnPropertyDescriptor(object, property); if (desc === undefined) { var parent = Object.getPrototypeOf(object); if (parent === null) { return undefined; } else { return get(parent, property, receiver); } } else if ("value" in desc && desc.writable) { return desc.value; } else { var getter = desc.get; if (getter === undefined) { return undefined; } return getter.call(receiver); } };

var _inherits = function (subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) subClass.__proto__ = superClass; };

var _classCallCheck = function (instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } };

/*!
 * Copyright (c) 2013-2015 9elements GmbH
 *
 * Released under Attribution-NonCommercial 3.0 Unported
 * http://creativecommons.org/licenses/by-nc/3.0/
 *
 * For commercial use, please contact us at contact@9elements.com
 */

var _ = _interopRequire(require("lodash"));

var Primitive = _interopRequire(require("./primitive"));

var Color = _interopRequire(require("../../../lib/color"));

/**
 * SoftColorOverlay primitive
 * @class
 * @alias ImglyKit.Filter.Primitives.SoftColorOverlay
 * @extends {ImglyKit.Filter.Primitive}
 */

var SoftColorOverlay = (function (Primitive) {
  function SoftColorOverlay() {
    for (var _len = arguments.length, args = Array(_len), _key = 0; _key < _len; _key++) {
      args[_key] = arguments[_key];
    }

    _classCallCheck(this, SoftColorOverlay);

    _get(Object.getPrototypeOf(SoftColorOverlay.prototype), "constructor", this).apply(this, args);

    this._options = _.defaults(this._options, {
      color: new Color(1, 1, 1)
    });

    /**
     * The fragment shader for this primitive
     * @return {String}
     * @private
     */
    this._fragmentShader = "\n      precision mediump float;\n      varying vec2 v_texCoord;\n      uniform sampler2D u_image;\n      uniform vec3 u_overlay;\n\n      void main() {\n        vec4 texColor = texture2D(u_image, v_texCoord);\n        vec4 overlayVec4 = vec4(u_overlay, texColor.a);\n        gl_FragColor = max(overlayVec4, texColor);\n      }\n    ";
  }

  _inherits(SoftColorOverlay, Primitive);

  _prototypeProperties(SoftColorOverlay, null, {
    renderWebGL: {

      /**
       * Renders the primitive (WebGL)
       * @param  {WebGLRenderer} renderer
       */
      /* istanbul ignore next */

      value: function renderWebGL(renderer) {
        renderer.runShader(null, this._fragmentShader, {
          uniforms: {
            u_overlay: { type: "3f", value: this._options.color.toRGBGLColor() }
          }
        });
      },
      writable: true,
      configurable: true
    },
    renderCanvas: {

      /**
       * Renders the primitive (Canvas)
       * @param  {CanvasRenderer} renderer
       */

      value: function renderCanvas(renderer) {
        var canvas = renderer.getCanvas();
        var imageData = renderer.getContext().getImageData(0, 0, canvas.width, canvas.height);

        for (var x = 0; x < canvas.width; x++) {
          for (var y = 0; y < canvas.height; y++) {
            var index = (canvas.width * y + x) * 4;

            imageData.data[index] = Math.max(this._options.color.r, imageData.data[index]);
            imageData.data[index + 1] = Math.max(this._options.color.g, imageData.data[index + 1]);
            imageData.data[index + 2] = Math.max(this._options.color.b, imageData.data[index + 2]);
          }
        }

        renderer.getContext().putImageData(imageData, 0, 0);
      },
      writable: true,
      configurable: true
    }
  });

  return SoftColorOverlay;
})(Primitive);

module.exports = SoftColorOverlay;

},{"../../../lib/color":"/Users/sash/development/js/imglykit-rewrite/src/js/lib/color.js","./primitive":"/Users/sash/development/js/imglykit-rewrite/src/js/operations/filters/primitives/primitive.js","lodash":"lodash"}],"/Users/sash/development/js/imglykit-rewrite/src/js/operations/filters/primitives/tone-curve.js":[function(require,module,exports){
"use strict";

var _interopRequire = function (obj) { return obj && obj.__esModule ? obj["default"] : obj; };

var _prototypeProperties = function (child, staticProps, instanceProps) { if (staticProps) Object.defineProperties(child, staticProps); if (instanceProps) Object.defineProperties(child.prototype, instanceProps); };

var _get = function get(object, property, receiver) { var desc = Object.getOwnPropertyDescriptor(object, property); if (desc === undefined) { var parent = Object.getPrototypeOf(object); if (parent === null) { return undefined; } else { return get(parent, property, receiver); } } else if ("value" in desc && desc.writable) { return desc.value; } else { var getter = desc.get; if (getter === undefined) { return undefined; } return getter.call(receiver); } };

var _inherits = function (subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) subClass.__proto__ = superClass; };

var _classCallCheck = function (instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } };

/*!
 * Copyright (c) 2013-2015 9elements GmbH
 *
 * Released under Attribution-NonCommercial 3.0 Unported
 * http://creativecommons.org/licenses/by-nc/3.0/
 *
 * For commercial use, please contact us at contact@9elements.com
 */

var _ = _interopRequire(require("lodash"));

var LookupTable = _interopRequire(require("./lookup-table"));

/**
 * Tone curve primitive
 * @class
 * @alias ImglyKit.Filter.Primitives.ToneCurve
 * @extends {ImglyKit.Filter.Primitives.LookupTable}
 */

var ToneCurve = (function (LookupTable) {
  function ToneCurve() {
    for (var _len = arguments.length, args = Array(_len), _key = 0; _key < _len; _key++) {
      args[_key] = arguments[_key];
    }

    _classCallCheck(this, ToneCurve);

    _get(Object.getPrototypeOf(ToneCurve.prototype), "constructor", this).apply(this, args);

    this._options = _.defaults(this._options, {
      rgbControlPoints: {
        red: this._options.controlPoints,
        green: this._options.controlPoints,
        blue: this._options.controlPoints
      }
    });

    if (typeof this._options.rgbControlPoints !== "undefined") {
      this._updateLookupTable();
    }
  }

  _inherits(ToneCurve, LookupTable);

  _prototypeProperties(ToneCurve, null, {
    _updateLookupTable: {

      /**
       * Calculates the lookup table
       * @private
       */

      value: function _updateLookupTable() {
        var r = this._calculateSplineCurve(this._options.rgbControlPoints.red);
        var g = this._calculateSplineCurve(this._options.rgbControlPoints.green);
        var b = this._calculateSplineCurve(this._options.rgbControlPoints.blue);

        this._options.data = this._buildLookupTable(r, g, b);
      },
      writable: true,
      configurable: true
    },
    _buildLookupTable: {

      /**
       * Builds the lookup table
       * @param  {Array} r
       * @param  {Array} g
       * @param  {Array} b
       * @return {Array}
       * @private
       */

      value: function _buildLookupTable(r, g, b) {
        var data = [];

        for (var i = 0; i < 256; i++) {
          data.push(Math.min(Math.max(i + r[i], 0), 255));
          data.push(Math.min(Math.max(i + g[i], 0), 255));
          data.push(Math.min(Math.max(i + b[i], 0), 255));
          data.push(255);
        }

        return data;
      },
      writable: true,
      configurable: true
    },
    _calculateSplineCurve: {

      /**
       * Calculates the spline curve data for the given points
       * @param  {Array.<Array.<Number>>} points
       * @return {Array.<Number>}
       */

      value: function _calculateSplineCurve(points) {
        points = points.sort(function (a, b) {
          return a[0] > b[0];
        });

        var splinePoints = this._getSplineCurve(points);
        var firstSplinePoint = splinePoints[0];
        var i;

        if (firstSplinePoint[0] > 0) {
          for (i = 0; i < firstSplinePoint[0]; i++) {
            splinePoints.unshift([0, 0]);
          }
        }

        var preparedPoints = [];
        for (i = 0; i < splinePoints.length; i++) {
          var newPoint = splinePoints[i];
          var origPoint = [newPoint[0], newPoint[0]];

          var distance = Math.sqrt(Math.pow(origPoint[0] - newPoint[0], 2) + Math.pow(origPoint[1] - newPoint[1], 2));

          if (origPoint[1] > newPoint[1]) {
            distance = -distance;
          }

          preparedPoints.push(distance);
        }

        return preparedPoints;
      },
      writable: true,
      configurable: true
    },
    _getSplineCurve: {
      value: function _getSplineCurve(points) {
        var sdA = this._secondDerivative(points);

        var n = sdA.length;
        var sd = [];
        var i;

        for (i = 0; i < n; i++) {
          sd[i] = sdA[i];
        }

        var output = [];

        for (i = 0; i < n - 1; i++) {
          var cur = points[i];
          var next = points[i + 1];

          for (var x = cur[0]; x < next[0]; x++) {
            var t = (x - cur[0]) / (next[0] - cur[0]);

            var a = 1 - t;
            var b = t;
            var h = next[0] - cur[0];

            var y = a * cur[1] + b * next[1] + h * h / 6 * ((a * a * a - a) * sd[i] + (b * b * b - b) * sd[i + 1]);

            if (y > 255) {
              y = 255;
            } else if (y < 0) {
              y = 0;
            }

            output.push([x, y]);
          }
        }

        if (output.length === 255) {
          output.push(points[points.length - 1]);
        }

        return output;
      },
      writable: true,
      configurable: true
    },
    _secondDerivative: {
      value: function _secondDerivative(points) {
        var n = points.length;
        if (n <= 0 || n === 1) {
          return null;
        }

        var matrix = [];
        var result = [];
        var i, k;

        matrix[0] = [0, 1, 0];

        for (i = 1; i < n - 1; i++) {
          var P1 = points[i - 1];
          var P2 = points[i];
          var P3 = points[i + 1];

          matrix[i] = matrix[i] || [];
          matrix[i][0] = (P2[0] - P1[0]) / 6;
          matrix[i][1] = (P3[0] - P1[0]) / 3;
          matrix[i][2] = (P3[0] - P2[0]) / 6;
          result[i] = (P3[1] - P2[1]) / (P3[0] - P2[0]) - (P2[1] - P1[1]) / (P2[0] - P1[0]);
        }

        result[0] = 0;
        result[n - 1] = 0;

        matrix[n - 1] = [0, 1, 0];

        // Pass 1
        for (i = 1; i < n; i++) {
          k = matrix[1][0] / matrix[i - 1][1];
          matrix[i][1] -= k * matrix[i - 1][2];
          matrix[i][0] = 0;
          result[i] -= k * result[i - 1];
        }

        // Pass 2
        for (i = n - 2; i > 0; i--) {
          k = matrix[i][2] / matrix[i + 1][1];
          matrix[i][1] -= k * matrix[i + 1][0];
          matrix[i][2] = 0;
          result[i] -= k * result[i + 1];
        }

        var y2 = [];
        for (i = 0; i < n; i++) {
          y2[i] = result[i] / matrix[i][1];
        }

        return y2;
      },
      writable: true,
      configurable: true
    }
  });

  return ToneCurve;
})(LookupTable);

module.exports = ToneCurve;

},{"./lookup-table":"/Users/sash/development/js/imglykit-rewrite/src/js/operations/filters/primitives/lookup-table.js","lodash":"lodash"}],"/Users/sash/development/js/imglykit-rewrite/src/js/operations/filters/primitives/x400.js":[function(require,module,exports){
"use strict";

var _interopRequire = function (obj) { return obj && obj.__esModule ? obj["default"] : obj; };

var _prototypeProperties = function (child, staticProps, instanceProps) { if (staticProps) Object.defineProperties(child, staticProps); if (instanceProps) Object.defineProperties(child.prototype, instanceProps); };

var _get = function get(object, property, receiver) { var desc = Object.getOwnPropertyDescriptor(object, property); if (desc === undefined) { var parent = Object.getPrototypeOf(object); if (parent === null) { return undefined; } else { return get(parent, property, receiver); } } else if ("value" in desc && desc.writable) { return desc.value; } else { var getter = desc.get; if (getter === undefined) { return undefined; } return getter.call(receiver); } };

var _inherits = function (subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) subClass.__proto__ = superClass; };

var _classCallCheck = function (instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } };

/*!
 * Copyright (c) 2013-2015 9elements GmbH
 *
 * Released under Attribution-NonCommercial 3.0 Unported
 * http://creativecommons.org/licenses/by-nc/3.0/
 *
 * For commercial use, please contact us at contact@9elements.com
 */

var Primitive = _interopRequire(require("./primitive"));

/**
 * X400 primitive
 * @class
 * @alias ImglyKit.Filter.Primitives.X400
 * @extends {ImglyKit.Filter.Primitive}
 */

var X400 = (function (Primitive) {
  function X400() {
    for (var _len = arguments.length, args = Array(_len), _key = 0; _key < _len; _key++) {
      args[_key] = arguments[_key];
    }

    _classCallCheck(this, X400);

    _get(Object.getPrototypeOf(X400.prototype), "constructor", this).apply(this, args);

    /**
     * The fragment shader for this primitive
     * @return {String}
     * @private
     */
    this._fragmentShader = "\n      precision mediump float;\n      varying vec2 v_texCoord;\n      uniform sampler2D u_image;\n\n      void main() {\n        vec4 texColor = texture2D(u_image, v_texCoord);\n        float gray = texColor.r * 0.3 + texColor.g * 0.3 + texColor.b * 0.3;\n        gray -= 0.2;\n        gray = clamp(gray, 0.0, 1.0);\n        gray += 0.15;\n        gray *= 1.4;\n        gl_FragColor = vec4(vec3(gray), 1.0);\n      }\n    ";
  }

  _inherits(X400, Primitive);

  _prototypeProperties(X400, null, {
    renderWebGL: {

      /**
       * Renders the primitive (WebGL)
       * @param  {WebGLRenderer} renderer
       */
      /* istanbul ignore next */

      value: function renderWebGL(renderer) {
        renderer.runShader(null, this._fragmentShader);
      },
      writable: true,
      configurable: true
    },
    renderCanvas: {

      /**
       * Renders the primitive (Canvas)
       * @param  {CanvasRenderer} renderer
       */

      value: function renderCanvas(renderer) {
        var canvas = renderer.getCanvas();
        var imageData = renderer.getContext().getImageData(0, 0, canvas.width, canvas.height);

        for (var x = 0; x < canvas.width; x++) {
          for (var y = 0; y < canvas.height; y++) {
            var index = (canvas.width * y + x) * 4;

            var gray = imageData.data[index] / 255 * 0.3 + imageData.data[index + 1] / 255 * 0.3 + imageData.data[index + 2] / 255 * 0.3;
            gray -= 0.2;
            gray = Math.max(0, Math.min(1, gray));
            gray += 0.15;
            gray *= 1.4;

            gray *= 255;
            imageData.data[index] = gray;
            imageData.data[index + 1] = gray;
            imageData.data[index + 2] = gray;
          }
        }

        renderer.getContext().putImageData(imageData, 0, 0);
      },
      writable: true,
      configurable: true
    }
  });

  return X400;
})(Primitive);

module.exports = X400;

},{"./primitive":"/Users/sash/development/js/imglykit-rewrite/src/js/operations/filters/primitives/primitive.js"}],"/Users/sash/development/js/imglykit-rewrite/src/js/operations/filters/quozi-filter.js":[function(require,module,exports){
"use strict";

var _interopRequire = function (obj) { return obj && obj.__esModule ? obj["default"] : obj; };

var _prototypeProperties = function (child, staticProps, instanceProps) { if (staticProps) Object.defineProperties(child, staticProps); if (instanceProps) Object.defineProperties(child.prototype, instanceProps); };

var _inherits = function (subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) subClass.__proto__ = superClass; };

var _classCallCheck = function (instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } };

/*!
 * Copyright (c) 2013-2015 9elements GmbH
 *
 * Released under Attribution-NonCommercial 3.0 Unported
 * http://creativecommons.org/licenses/by-nc/3.0/
 *
 * For commercial use, please contact us at contact@9elements.com
 */

var Filter = _interopRequire(require("./filter"));

/**
 * Quozi Filter
 * @class
 * @alias ImglyKit.Filters.QuoziFilter
 * @extends {ImglyKit.Filter}
 */

var QuoziFilter = (function (Filter) {
  function QuoziFilter() {
    _classCallCheck(this, QuoziFilter);

    if (Filter != null) {
      Filter.apply(this, arguments);
    }
  }

  _inherits(QuoziFilter, Filter);

  _prototypeProperties(QuoziFilter, {
    identifier: {
      /**
       * A unique string that identifies this operation. Can be used to select
       * the active filter.
       * @type {String}
       */

      get: function () {
        return "quozi";
      },
      configurable: true
    }
  }, {
    render: {

      /**
       * Renders the filter
       * @param  {Renderer} renderer
       * @return {Promise}
       */

      value: function render(renderer) {
        var stack = new Filter.PrimitivesStack();

        // Desaturation
        stack.add(new Filter.Primitives.Desaturation({
          desaturation: 0.65
        }));

        // Tone curve
        stack.add(new Filter.Primitives.ToneCurve({
          rgbControlPoints: {
            red: [[0, 50], [40, 78], [118, 170], [181, 211], [255, 255]],
            green: [[0, 27], [28, 45], [109, 157], [157, 195], [179, 208], [206, 212], [255, 240]],
            blue: [[0, 50], [12, 55], [46, 103], [103, 162], [194, 182], [241, 201], [255, 219]]
          }
        }));

        stack.render(renderer);
      },
      writable: true,
      configurable: true
    }
  });

  return QuoziFilter;
})(Filter);

module.exports = QuoziFilter;

},{"./filter":"/Users/sash/development/js/imglykit-rewrite/src/js/operations/filters/filter.js"}],"/Users/sash/development/js/imglykit-rewrite/src/js/operations/filters/semired-filter.js":[function(require,module,exports){
"use strict";

var _interopRequire = function (obj) { return obj && obj.__esModule ? obj["default"] : obj; };

var _prototypeProperties = function (child, staticProps, instanceProps) { if (staticProps) Object.defineProperties(child, staticProps); if (instanceProps) Object.defineProperties(child.prototype, instanceProps); };

var _inherits = function (subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) subClass.__proto__ = superClass; };

var _classCallCheck = function (instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } };

/*!
 * Copyright (c) 2013-2015 9elements GmbH
 *
 * Released under Attribution-NonCommercial 3.0 Unported
 * http://creativecommons.org/licenses/by-nc/3.0/
 *
 * For commercial use, please contact us at contact@9elements.com
 */

var Filter = _interopRequire(require("./filter"));

/**
 * Semired Filter
 * @class
 * @alias ImglyKit.Filters.SemiredFilter
 * @extends {ImglyKit.Filter}
 */

var SemiredFilter = (function (Filter) {
  function SemiredFilter() {
    _classCallCheck(this, SemiredFilter);

    if (Filter != null) {
      Filter.apply(this, arguments);
    }
  }

  _inherits(SemiredFilter, Filter);

  _prototypeProperties(SemiredFilter, {
    identifier: {
      /**
       * A unique string that identifies this operation. Can be used to select
       * the active filter.
       * @type {String}
       */

      get: function () {
        return "semired";
      },
      configurable: true
    }
  }, {
    render: {

      /**
       * Renders the filter
       * @param  {Renderer} renderer
       * @return {Promise}
       */

      value: function render(renderer) {
        var stack = new Filter.PrimitivesStack();

        stack.add(new Filter.Primitives.ToneCurve({
          rgbControlPoints: {
            red: [[0, 129], [75, 153], [181, 227], [255, 255]],
            green: [[0, 8], [111, 85], [212, 158], [255, 226]],
            blue: [[0, 5], [75, 22], [193, 90], [255, 229]]
          }
        }));

        stack.add(new Filter.Primitives.Glow());

        stack.render(renderer);
      },
      writable: true,
      configurable: true
    }
  });

  return SemiredFilter;
})(Filter);

module.exports = SemiredFilter;

},{"./filter":"/Users/sash/development/js/imglykit-rewrite/src/js/operations/filters/filter.js"}],"/Users/sash/development/js/imglykit-rewrite/src/js/operations/filters/sunny-filter.js":[function(require,module,exports){
"use strict";

var _interopRequire = function (obj) { return obj && obj.__esModule ? obj["default"] : obj; };

var _prototypeProperties = function (child, staticProps, instanceProps) { if (staticProps) Object.defineProperties(child, staticProps); if (instanceProps) Object.defineProperties(child.prototype, instanceProps); };

var _inherits = function (subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) subClass.__proto__ = superClass; };

var _classCallCheck = function (instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } };

/*!
 * Copyright (c) 2013-2015 9elements GmbH
 *
 * Released under Attribution-NonCommercial 3.0 Unported
 * http://creativecommons.org/licenses/by-nc/3.0/
 *
 * For commercial use, please contact us at contact@9elements.com
 */

var Filter = _interopRequire(require("./filter"));

/**
 * Sunny Filter
 * @class
 * @alias ImglyKit.Filters.SunnyFilter
 * @extends {ImglyKit.Filter}
 */

var SunnyFilter = (function (Filter) {
  function SunnyFilter() {
    _classCallCheck(this, SunnyFilter);

    if (Filter != null) {
      Filter.apply(this, arguments);
    }
  }

  _inherits(SunnyFilter, Filter);

  _prototypeProperties(SunnyFilter, {
    identifier: {
      /**
       * A unique string that identifies this operation. Can be used to select
       * the active filter.
       * @type {String}
       */

      get: function () {
        return "sunny";
      },
      configurable: true
    }
  }, {
    render: {

      /**
       * Renders the filter
       * @param  {Renderer} renderer
       * @return {Promise}
       */

      value: function render(renderer) {
        var stack = new Filter.PrimitivesStack();

        stack.add(new Filter.Primitives.ToneCurve({
          rgbControlPoints: {
            red: [[0, 0], [62, 82], [141, 154], [255, 255]],
            green: [[0, 39], [56, 96], [192, 176], [255, 255]],
            blue: [[0, 0], [174, 99], [255, 235]]
          }
        }));

        stack.add(new Filter.Primitives.ToneCurve({
          controlPoints: [[0, 0], [55, 20], [158, 191], [255, 255]]
        }));

        stack.render(renderer);
      },
      writable: true,
      configurable: true
    }
  });

  return SunnyFilter;
})(Filter);

module.exports = SunnyFilter;

},{"./filter":"/Users/sash/development/js/imglykit-rewrite/src/js/operations/filters/filter.js"}],"/Users/sash/development/js/imglykit-rewrite/src/js/operations/filters/texas-filter.js":[function(require,module,exports){
"use strict";

var _interopRequire = function (obj) { return obj && obj.__esModule ? obj["default"] : obj; };

var _prototypeProperties = function (child, staticProps, instanceProps) { if (staticProps) Object.defineProperties(child, staticProps); if (instanceProps) Object.defineProperties(child.prototype, instanceProps); };

var _inherits = function (subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) subClass.__proto__ = superClass; };

var _classCallCheck = function (instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } };

/*!
 * Copyright (c) 2013-2015 9elements GmbH
 *
 * Released under Attribution-NonCommercial 3.0 Unported
 * http://creativecommons.org/licenses/by-nc/3.0/
 *
 * For commercial use, please contact us at contact@9elements.com
 */

var Filter = _interopRequire(require("./filter"));

/**
 * Texas Filter
 * @class
 * @alias ImglyKit.Filters.TexasFilter
 * @extends {ImglyKit.Filter}
 */

var TexasFilter = (function (Filter) {
  function TexasFilter() {
    _classCallCheck(this, TexasFilter);

    if (Filter != null) {
      Filter.apply(this, arguments);
    }
  }

  _inherits(TexasFilter, Filter);

  _prototypeProperties(TexasFilter, {
    identifier: {
      /**
       * A unique string that identifies this operation. Can be used to select
       * the active filter.
       * @type {String}
       */

      get: function () {
        return "texas";
      },
      configurable: true
    }
  }, {
    render: {

      /**
       * Renders the filter
       * @param  {Renderer} renderer
       * @return {Promise}
       */

      value: function render(renderer) {
        var stack = new Filter.PrimitivesStack();

        stack.add(new Filter.Primitives.ToneCurve({
          rgbControlPoints: {
            red: [[0, 72], [89, 99], [176, 212], [255, 237]],
            green: [[0, 49], [255, 192]],
            blue: [[0, 72], [255, 151]]
          }
        }));

        stack.render(renderer);
      },
      writable: true,
      configurable: true
    }
  });

  return TexasFilter;
})(Filter);

module.exports = TexasFilter;

},{"./filter":"/Users/sash/development/js/imglykit-rewrite/src/js/operations/filters/filter.js"}],"/Users/sash/development/js/imglykit-rewrite/src/js/operations/filters/x400-filter.js":[function(require,module,exports){
"use strict";

var _interopRequire = function (obj) { return obj && obj.__esModule ? obj["default"] : obj; };

var _prototypeProperties = function (child, staticProps, instanceProps) { if (staticProps) Object.defineProperties(child, staticProps); if (instanceProps) Object.defineProperties(child.prototype, instanceProps); };

var _inherits = function (subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) subClass.__proto__ = superClass; };

var _classCallCheck = function (instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } };

/*!
 * Copyright (c) 2013-2015 9elements GmbH
 *
 * Released under Attribution-NonCommercial 3.0 Unported
 * http://creativecommons.org/licenses/by-nc/3.0/
 *
 * For commercial use, please contact us at contact@9elements.com
 */

var Filter = _interopRequire(require("./filter"));

/**
 * X400 Filter
 * @class
 * @alias ImglyKit.Filters.X400Filter
 * @extends {ImglyKit.Filter}
 */

var X400Filter = (function (Filter) {
  function X400Filter() {
    _classCallCheck(this, X400Filter);

    if (Filter != null) {
      Filter.apply(this, arguments);
    }
  }

  _inherits(X400Filter, Filter);

  _prototypeProperties(X400Filter, {
    identifier: {
      /**
       * A unique string that identifies this operation. Can be used to select
       * the active filter.
       * @type {String}
       */

      get: function () {
        return "x400";
      },
      configurable: true
    }
  }, {
    render: {

      /**
       * Renders the filter
       * @param  {Renderer} renderer
       * @return {Promise}
       */

      value: function render(renderer) {
        var stack = new Filter.PrimitivesStack();

        stack.add(new Filter.Primitives.X400());

        stack.render(renderer);
      },
      writable: true,
      configurable: true
    }
  });

  return X400Filter;
})(Filter);

module.exports = X400Filter;

},{"./filter":"/Users/sash/development/js/imglykit-rewrite/src/js/operations/filters/filter.js"}],"/Users/sash/development/js/imglykit-rewrite/src/js/operations/flip-operation.js":[function(require,module,exports){
"use strict";

var _interopRequire = function (obj) { return obj && obj.__esModule ? obj["default"] : obj; };

var _prototypeProperties = function (child, staticProps, instanceProps) { if (staticProps) Object.defineProperties(child, staticProps); if (instanceProps) Object.defineProperties(child.prototype, instanceProps); };

var _get = function get(object, property, receiver) { var desc = Object.getOwnPropertyDescriptor(object, property); if (desc === undefined) { var parent = Object.getPrototypeOf(object); if (parent === null) { return undefined; } else { return get(parent, property, receiver); } } else if ("value" in desc && desc.writable) { return desc.value; } else { var getter = desc.get; if (getter === undefined) { return undefined; } return getter.call(receiver); } };

var _inherits = function (subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) subClass.__proto__ = superClass; };

var _classCallCheck = function (instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } };

/*!
 * Copyright (c) 2013-2015 9elements GmbH
 *
 * Released under Attribution-NonCommercial 3.0 Unported
 * http://creativecommons.org/licenses/by-nc/3.0/
 *
 * For commercial use, please contact us at contact@9elements.com
 */

var Operation = _interopRequire(require("./operation"));

/**
 * An operation that can flip the canvas
 *
 * @class
 * @alias ImglyKit.Operations.FlipOperation
 * @extends ImglyKit.Operation
 */

var FlipOperation = (function (Operation) {
  function FlipOperation() {
    for (var _len = arguments.length, args = Array(_len), _key = 0; _key < _len; _key++) {
      args[_key] = arguments[_key];
    }

    _classCallCheck(this, FlipOperation);

    this.availableOptions = {
      horizontal: { type: "boolean", "default": false },
      vertical: { type: "boolean", "default": false }
    };

    /**
     * The fragment shader used for this operation
     */
    this.fragmentShader = "\n      precision mediump float;\n      uniform sampler2D u_image;\n      varying vec2 v_texCoord;\n      uniform bool u_flipVertical;\n      uniform bool u_flipHorizontal;\n\n      void main() {\n        vec2 texCoord = vec2(v_texCoord);\n        if (u_flipVertical) {\n          texCoord.y = 1.0 - texCoord.y;\n        }\n        if (u_flipHorizontal) {\n          texCoord.x = 1.0 - texCoord.x;\n        }\n        gl_FragColor = texture2D(u_image, texCoord);\n      }\n    ";

    _get(Object.getPrototypeOf(FlipOperation.prototype), "constructor", this).apply(this, args);
  }

  _inherits(FlipOperation, Operation);

  _prototypeProperties(FlipOperation, null, {
    identifier: {

      /**
       * A unique string that identifies this operation. Can be used to select
       * operations.
       * @type {String}
       */

      get: function () {
        return "flip";
      },
      configurable: true
    },
    _renderWebGL: {

      /**
       * Crops this image using WebGL
       * @param  {WebGLRenderer} renderer
       */
      /* istanbul ignore next */

      value: function _renderWebGL(renderer) {
        renderer.runShader(null, this.fragmentShader, {
          uniforms: {
            u_flipVertical: { type: "f", value: this._options.vertical },
            u_flipHorizontal: { type: "f", value: this._options.horizontal }
          }
        });
      },
      writable: true,
      configurable: true
    },
    _renderCanvas: {

      /**
       * Crops the image using Canvas2D
       * @param  {CanvasRenderer} renderer
       */

      value: function _renderCanvas(renderer) {
        var canvas = renderer.getCanvas();
        var context = renderer.getContext();

        var scaleX = 1,
            scaleY = 1;
        var translateX = 0,
            translateY = 0;

        if (this._options.horizontal) {
          scaleX = -1;
          translateX = canvas.width;
        }

        if (this._options.vertical) {
          scaleY = -1;
          translateY = canvas.height;
        }

        // Save the current state
        context.save();

        // Apply the transformation
        context.translate(translateX, translateY);
        context.scale(scaleX, scaleY);

        // Create a temporary canvas so that we can draw the image
        // with the applied transformation
        var tempCanvas = renderer.cloneCanvas();
        context.drawImage(tempCanvas, 0, 0);

        // Restore old transformation
        context.restore();
      },
      writable: true,
      configurable: true
    }
  });

  return FlipOperation;
})(Operation);

module.exports = FlipOperation;

},{"./operation":"/Users/sash/development/js/imglykit-rewrite/src/js/operations/operation.js"}],"/Users/sash/development/js/imglykit-rewrite/src/js/operations/frames-operation.js":[function(require,module,exports){
"use strict";

var _interopRequire = function (obj) { return obj && obj.__esModule ? obj["default"] : obj; };

var _prototypeProperties = function (child, staticProps, instanceProps) { if (staticProps) Object.defineProperties(child, staticProps); if (instanceProps) Object.defineProperties(child.prototype, instanceProps); };

var _get = function get(object, property, receiver) { var desc = Object.getOwnPropertyDescriptor(object, property); if (desc === undefined) { var parent = Object.getPrototypeOf(object); if (parent === null) { return undefined; } else { return get(parent, property, receiver); } } else if ("value" in desc && desc.writable) { return desc.value; } else { var getter = desc.get; if (getter === undefined) { return undefined; } return getter.call(receiver); } };

var _inherits = function (subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) subClass.__proto__ = superClass; };

var _classCallCheck = function (instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } };

/*!
 * Copyright (c) 2013-2015 9elements GmbH
 *
 * Released under Attribution-NonCommercial 3.0 Unported
 * http://creativecommons.org/licenses/by-nc/3.0/
 *
 * For commercial use, please contact us at contact@9elements.com
 */

var Operation = _interopRequire(require("./operation"));

var Color = _interopRequire(require("../lib/color"));

/**
 * An operation that can frames on the canvas
 *
 * @class
 * @alias ImglyKit.Operations.FramesOperation
 * @extends ImglyKit.Operation
 */

var FramesOperation = (function (Operation) {
  function FramesOperation() {
    for (var _len = arguments.length, args = Array(_len), _key = 0; _key < _len; _key++) {
      args[_key] = arguments[_key];
    }

    _classCallCheck(this, FramesOperation);

    this.availableOptions = {
      color: { type: "color", "default": new Color(0, 0, 0, 1) },
      thickness: { type: "number", "default": 0.02 }
    };

    /**
     * The texture index used for the frame
     * @type {Number}
     * @private
     */
    this._textureIndex = 1;

    /**
     * The fragment shader used for this operation
     */
    this._fragmentShader = "\n      precision mediump float;\n      varying vec2 v_texCoord;\n      uniform sampler2D u_image;\n      uniform sampler2D u_frameImage;\n      uniform vec4 u_color;\n      uniform vec2 u_thickness;\n\n      void main() {\n        vec4 fragColor = texture2D(u_image, v_texCoord);\n        if (v_texCoord.x < u_thickness.x || v_texCoord.x > 1.0 - u_thickness.x ||\n          v_texCoord.y < u_thickness.y || v_texCoord.y > 1.0 - u_thickness.y) {\n            fragColor = mix(fragColor, u_color, u_color.a);\n          }\n\n        gl_FragColor = fragColor;\n      }\n    ";

    _get(Object.getPrototypeOf(FramesOperation.prototype), "constructor", this).apply(this, args);
  }

  _inherits(FramesOperation, Operation);

  _prototypeProperties(FramesOperation, null, {
    identifier: {

      /**
       * A unique string that identifies this operation. Can be used to select
       * operations.
       * @type {String}
       */

      get: function () {
        return "frames";
      },
      configurable: true
    },
    _renderWebGL: {

      /**
       * Crops this image using WebGL
       * @param  {WebGLRenderer} renderer
       * @private
       */
      /* istanbul ignore next */

      value: function _renderWebGL(renderer) {
        var canvas = renderer.getCanvas();

        var color = this._options.color;
        var thickness = this._options.thickness * canvas.height;
        var thicknessVec2 = [thickness / canvas.width, thickness / canvas.height];

        renderer.runShader(null, this._fragmentShader, {
          uniforms: {
            u_color: { type: "4f", value: color.toGLColor() },
            u_thickness: { type: "2f", value: thicknessVec2 }
          }
        });
      },
      writable: true,
      configurable: true
    },
    _renderCanvas: {

      /**
       * Crops the image using Canvas2D
       * @param  {CanvasRenderer} renderer
       * @private
       */

      value: function _renderCanvas(renderer) {
        var canvas = renderer.getCanvas();
        var context = renderer.getContext();

        var color = this._options.color;
        var thickness = this._options.thickness * canvas.height;

        context.save();
        context.beginPath();
        context.lineWidth = thickness * 2;
        context.strokeStyle = color.toRGBA();
        context.rect(0, 0, canvas.width, canvas.height);
        context.stroke();
        context.restore();
      },
      writable: true,
      configurable: true
    }
  });

  return FramesOperation;
})(Operation);

module.exports = FramesOperation;

},{"../lib/color":"/Users/sash/development/js/imglykit-rewrite/src/js/lib/color.js","./operation":"/Users/sash/development/js/imglykit-rewrite/src/js/operations/operation.js"}],"/Users/sash/development/js/imglykit-rewrite/src/js/operations/operation.js":[function(require,module,exports){
"use strict";

var _interopRequire = function (obj) { return obj && obj.__esModule ? obj["default"] : obj; };

var _prototypeProperties = function (child, staticProps, instanceProps) { if (staticProps) Object.defineProperties(child, staticProps); if (instanceProps) Object.defineProperties(child.prototype, instanceProps); };

var _get = function get(object, property, receiver) { var desc = Object.getOwnPropertyDescriptor(object, property); if (desc === undefined) { var parent = Object.getPrototypeOf(object); if (parent === null) { return undefined; } else { return get(parent, property, receiver); } } else if ("value" in desc && desc.writable) { return desc.value; } else { var getter = desc.get; if (getter === undefined) { return undefined; } return getter.call(receiver); } };

var _inherits = function (subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) subClass.__proto__ = superClass; };

var _classCallCheck = function (instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } };

/*!
 * Copyright (c) 2013-2015 9elements GmbH
 *
 * Released under Attribution-NonCommercial 3.0 Unported
 * http://creativecommons.org/licenses/by-nc/3.0/
 *
 * For commercial use, please contact us at contact@9elements.com
 */

var _ = _interopRequire(require("lodash"));

var Vector2 = _interopRequire(require("../lib/math/vector2"));

var Color = _interopRequire(require("../lib/color"));

var EventEmitter = _interopRequire(require("../lib/event-emitter"));

/**
 * Base class for Operations. Extendable via {@link ImglyKit.Operation#extend}.
 * @class
 * @alias ImglyKit.Operation
 */

var Operation = (function (EventEmitter) {
  function Operation(kit, options) {
    _classCallCheck(this, Operation);

    _get(Object.getPrototypeOf(Operation.prototype), "constructor", this).call(this);

    if (kit.constructor.name !== "ImglyKit") {
      throw new Error("Operation: First parameter for constructor has to be an ImglyKit instance.");
    }

    this._kit = kit;
    this.availableOptions = _.extend(this.availableOptions || {}, {
      numberFormat: { type: "string", "default": "relative", available: ["absolute", "relative"] }
    });
    this._dirty = true;

    this._uuid = "xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g, function (c) {
      var r = Math.random() * 16 | 0;
      var v = c == "x" ? r : r & 3 | 8;
      return v.toString(16);
    });

    this._initOptions(options || {});
  }

  _inherits(Operation, EventEmitter);

  _prototypeProperties(Operation, null, {
    identifier: {

      /**
       * A unique string that identifies this operation. Can be used to select
       * operations.
       * @type {String}
       */

      get: function () {
        return null;
      },
      configurable: true
    },
    validateSettings: {

      /**
       * Checks whether this Operation can be applied the way it is configured
       */

      value: function validateSettings() {
        var identifier = this.identifier;

        // Check for required options
        for (var optionName in this.availableOptions) {
          var optionConfig = this.availableOptions[optionName];
          if (optionConfig.required && typeof this._options[optionName] === "undefined") {
            throw new Error("Operation `" + identifier + "`: Option `" + optionName + "` is required.");
          }
        }
      },
      writable: true,
      configurable: true
    },
    render: {

      /**
       * Applies this operation
       * @param  {Renderer} renderer
       * @return {Promise}
       * @abstract
       */

      value: function render(renderer) {
        var renderFn = undefined;
        if (renderer.identifier === "webgl") {
          /* istanbul ignore next */
          renderFn = this._renderWebGL.bind(this);
        } else {
          renderFn = this._renderCanvas.bind(this);
        }

        // Handle caching
        if (this._dirty) {
          renderFn(renderer);
          renderer.cache(this._uuid);
          this._dirty = false;
        } else {
          renderer.drawCached(this._uuid);
        }
      },
      writable: true,
      configurable: true
    },
    _renderWebGL: {

      /**
       * Applies this operation using WebGL
       * @return {WebGLRenderer} renderer
       * @private
       */

      value: function _renderWebGL() {
        throw new Error("Operation#_renderWebGL is abstract and not implemented in inherited class.");
      },
      writable: true,
      configurable: true
    },
    _renderCanvas: {

      /**
       * Applies this operation using Canvas2D
       * @return {CanvasRenderer} renderer
       * @private
       */

      value: function _renderCanvas() {
        throw new Error("Operation#_renderCanvas is abstract and not implemented in inherited class.");
      },
      writable: true,
      configurable: true
    },
    _initOptions: {

      /**
       * Goes through the available options, sets _options defaults
       * @param {Object} userOptions
       * @private
       */

      value: function _initOptions(userOptions) {
        this._options = {};

        // Set defaults, create getters and setters
        var optionName, option, capitalized;
        var self = this;
        for (optionName in this.availableOptions) {
          capitalized = optionName.charAt(0).toUpperCase() + optionName.slice(1);
          option = this.availableOptions[optionName];

          // Create setter and getter
          (function (optionName, option) {
            self["set" + capitalized] = function (value) {
              if (typeof option.setter !== "undefined") {
                value = option.setter.call(this, value);
              }
              self._setOption(optionName, value);
            };

            // Default getter
            self["get" + capitalized] = function () {
              return self._getOption(optionName);
            };
          })(optionName, option);

          // Set default if available
          if (typeof option["default"] !== "undefined") {
            this["set" + capitalized](option["default"]);
          }
        }

        // Overwrite options with the ones given by user
        for (optionName in userOptions) {
          // Check if option is available
          if (typeof this.availableOptions[optionName] === "undefined") {
            throw new Error("Invalid option: " + optionName);
          }

          // Call setter
          capitalized = optionName.charAt(0).toUpperCase() + optionName.slice(1);
          this["set" + capitalized](userOptions[optionName]);
        }
      },
      writable: true,
      configurable: true
    },
    set: {

      /**
       * Sets the given options
       * @param {Object} options
       */

      value: function set(options) {
        for (var optionName in options) {
          this._setOption(optionName, options[optionName], false);
        }

        this.emit("update");
      },
      writable: true,
      configurable: true
    },
    _getOption: {

      /**
       * Returns the value for the given option
       * @param {String} optionName
       * @return {*}
       * @private
       */

      value: function _getOption(optionName) {
        return this._options[optionName];
      },
      writable: true,
      configurable: true
    },
    _setOption: {

      /**
       * Sets the value for the given option, validates it
       * @param {String} optionName
       * @param {*} value
       * @param {Boolean} update
       * @private
       */

      value: function _setOption(optionName, value) {
        var update = arguments[2] === undefined ? true : arguments[2];

        var optionConfig = this.availableOptions[optionName];
        var identifier = this.identifier;

        if (typeof optionConfig.validation !== "undefined") {
          optionConfig.validation(value);
        }

        switch (optionConfig.type) {
          // String options
          case "string":
            if (typeof value !== "string") {
              throw new Error("Operation `" + identifier + "`: Option `" + optionName + "` has to be a string.");
            }

            // String value restrictions
            var available = optionConfig.available;
            if (typeof available !== "undefined" && available.indexOf(value) === -1) {
              throw new Error("Operation `" + identifier + "`: Invalid value for `" + optionName + "` (valid values are: " + optionConfig.available.join(", ") + ")");
            }

            this._options[optionName] = value;
            break;

          // Number options
          case "number":
            if (typeof value !== "number") {
              throw new Error("Operation `" + identifier + "`: Option `" + optionName + "` has to be a number.");
            }

            this._options[optionName] = value;
            break;

          // Boolean options
          case "boolean":
            if (typeof value !== "boolean") {
              throw new Error("Operation `" + identifier + "`: Option `" + optionName + "` has to be a boolean.");
            }

            this._options[optionName] = value;
            break;

          // Vector2 options
          case "vector2":
            if (!(value instanceof Vector2)) {
              throw new Error("Operation `" + identifier + "`: Option `" + optionName + "` has to be an instance of ImglyKit.Vector2.");
            }

            this._options[optionName] = value.clone();

            break;

          // Color options
          case "color":
            if (!(value instanceof Color)) {
              throw new Error("Operation `" + identifier + "`: Option `" + optionName + "` has to be an instance of ImglyKit.Color.");
            }

            this._options[optionName] = value;
            break;

          // Object options
          case "object":
            this._options[optionName] = value;
            break;
        }

        this._dirty = true;
        if (update) {
          this.emit("update");
        }
      },
      writable: true,
      configurable: true
    },
    getNewDimensions: {

      /**
       * Gets the new dimensions
       * @param {Renderer} renderer
       * @param {Vector2} [dimensions]
       * @return {Vector2}
       * @private
       */

      value: function getNewDimensions(renderer, dimensions) {
        var canvas = renderer.getCanvas();
        dimensions = dimensions || new Vector2(canvas.width, canvas.height);

        return dimensions;
      },
      writable: true,
      configurable: true
    },
    dirty: {

      /**
       * Sets this operation to dirty, so that it will re-render next time
       * @param {Boolean} dirty = true
       */

      set: function (dirty) {
        this._dirty = dirty;
      },

      /**
       * Returns the dirty state
       * @type {Boolean}
       */
      get: function () {
        return this._dirty;
      },
      configurable: true
    }
  });

  return Operation;
})(EventEmitter);

/**
 * To create an {@link ImglyKit.Operation} class of your own, call this
 * method and provide instance properties and functions.
 * @function
 */

var extend = _interopRequire(require("../lib/extend"));

Operation.extend = extend;

module.exports = Operation;
/* jshint unused:false */
/* jshint -W083 */

},{"../lib/color":"/Users/sash/development/js/imglykit-rewrite/src/js/lib/color.js","../lib/event-emitter":"/Users/sash/development/js/imglykit-rewrite/src/js/lib/event-emitter.js","../lib/extend":"/Users/sash/development/js/imglykit-rewrite/src/js/lib/extend.js","../lib/math/vector2":"/Users/sash/development/js/imglykit-rewrite/src/js/lib/math/vector2.js","lodash":"lodash"}],"/Users/sash/development/js/imglykit-rewrite/src/js/operations/radial-blur-operation.js":[function(require,module,exports){
"use strict";

var _interopRequire = function (obj) { return obj && obj.__esModule ? obj["default"] : obj; };

var _prototypeProperties = function (child, staticProps, instanceProps) { if (staticProps) Object.defineProperties(child, staticProps); if (instanceProps) Object.defineProperties(child.prototype, instanceProps); };

var _set = function set(object, property, value, receiver) { var desc = Object.getOwnPropertyDescriptor(object, property); if (desc === undefined) { var parent = Object.getPrototypeOf(object); if (parent !== null) { return set(parent, property, value, receiver); } } else if ("value" in desc && desc.writable) { return desc.value = value; } else { var setter = desc.set; if (setter !== undefined) { return setter.call(receiver, value); } } };

var _get = function get(object, property, receiver) { var desc = Object.getOwnPropertyDescriptor(object, property); if (desc === undefined) { var parent = Object.getPrototypeOf(object); if (parent === null) { return undefined; } else { return get(parent, property, receiver); } } else if ("value" in desc && desc.writable) { return desc.value; } else { var getter = desc.get; if (getter === undefined) { return undefined; } return getter.call(receiver); } };

var _inherits = function (subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) subClass.__proto__ = superClass; };

var _classCallCheck = function (instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } };

/*!
 * Copyright (c) 2013-2015 9elements GmbH
 *
 * Released under Attribution-NonCommercial 3.0 Unported
 * http://creativecommons.org/licenses/by-nc/3.0/
 *
 * For commercial use, please contact us at contact@9elements.com
 */

var Operation = _interopRequire(require("./operation"));

var Vector2 = _interopRequire(require("../lib/math/vector2"));

var StackBlur = _interopRequire(require("../vendor/stack-blur"));

/**
 * An operation that can crop out a part of the image
 *
 * @class
 * @alias ImglyKit.Operations.RadialBlurOperation
 * @extends ImglyKit.Operation
 */

var RadialBlurOperation = (function (Operation) {
  function RadialBlurOperation() {
    for (var _len = arguments.length, args = Array(_len), _key = 0; _key < _len; _key++) {
      args[_key] = arguments[_key];
    }

    _classCallCheck(this, RadialBlurOperation);

    this.availableOptions = {
      position: { type: "vector2", "default": new Vector2(0.5, 0.5) },
      gradientRadius: { type: "number", "default": 50 },
      blurRadius: { type: "number", "default": 20 }
    };

    /**
     * The fragment shader used for this operation
     * @internal Based on evanw's glfx.js tilt shift shader:
     *           https://github.com/evanw/glfx.js/blob/master/src/filters/blur/tiltshift.js
     */
    this.fragmentShader = "\n      precision mediump float;\n      uniform sampler2D u_image;\n      uniform float blurRadius;\n      uniform float gradientRadius;\n      uniform vec2 position;\n      uniform vec2 delta;\n      uniform vec2 texSize;\n      varying vec2 v_texCoord;\n\n      float random(vec3 scale, float seed) {\n        return fract(sin(dot(gl_FragCoord.xyz + seed, scale)) * 43758.5453 + seed);\n      }\n\n      void main() {\n          vec4 color = vec4(0.0);\n          float total = 0.0;\n\n          float offset = random(vec3(12.9898, 78.233, 151.7182), 0.0);\n          float radius = smoothstep(0.0, 1.0, abs(distance(v_texCoord * texSize, position)) / (gradientRadius * 2.0)) * blurRadius;\n          for (float t = -30.0; t <= 30.0; t++) {\n              float percent = (t + offset - 0.5) / 30.0;\n              float weight = 1.0 - abs(percent);\n              vec4 sample = texture2D(u_image, v_texCoord + delta * percent * radius / texSize);\n\n              sample.rgb *= sample.a;\n\n              color += sample * weight;\n              total += weight;\n          }\n\n          gl_FragColor = color / total;\n          gl_FragColor.rgb /= gl_FragColor.a + 0.00001;\n      }\n    ";

    _get(Object.getPrototypeOf(RadialBlurOperation.prototype), "constructor", this).apply(this, args);

    this._cachedBlurredCanvas = null;
    this._lastBlurRadius = this._options.blurRadius;
    this._lastGradientRadius = this._options.gradientRadius;
  }

  _inherits(RadialBlurOperation, Operation);

  _prototypeProperties(RadialBlurOperation, null, {
    identifier: {

      /**
       * A unique string that identifies this operation. Can be used to select
       * operations.
       * @type {String}
       */

      get: function () {
        return "radial-blur";
      },
      configurable: true
    },
    _renderWebGL: {

      /**
       * Crops this image using WebGL
       * @param  {WebGLRenderer} renderer
       */
      /* istanbul ignore next */

      value: function _renderWebGL(renderer) {
        var canvas = renderer.getCanvas();
        var canvasSize = new Vector2(canvas.width, canvas.height);

        var position = this._options.position.clone();
        position.y = 1 - position.y;

        if (this._options.numberFormat === "relative") {
          position.multiply(canvasSize);
        }

        var uniforms = {
          blurRadius: { type: "f", value: this._options.blurRadius },
          gradientRadius: { type: "f", value: this._options.gradientRadius },
          position: { type: "2f", value: [position.x, position.y] },
          texSize: { type: "2f", value: [canvas.width, canvas.height] },
          delta: { type: "2f", value: [1, 1] }
        };

        // First pass
        renderer.runShader(null, this.fragmentShader, {
          uniforms: uniforms
        });

        // Update delta for second pass
        uniforms.delta.value = [-1, 1];

        renderer.runShader(null, this.fragmentShader, {
          uniforms: uniforms
        });
      },
      writable: true,
      configurable: true
    },
    _renderCanvas: {

      /**
       * Crops the image using Canvas2D
       * @param  {CanvasRenderer} renderer
       */

      value: function _renderCanvas(renderer) {
        var canvas = renderer.getCanvas();

        var blurRadiusChanged = this._options.blurRadius !== this._lastBlurRadius;
        var blurryCanvas = undefined;
        if (blurRadiusChanged || this._cachedBlurredCanvas === null) {
          // Blur and cache canvas
          blurryCanvas = this._blurCanvas(renderer);
          this._cachedBlurredCanvas = blurryCanvas;
          this._lastBlurRadius = this._options.blurRadius;
          this._lastGradientRadius = this._options.gradientRadius;
        } else {
          // Use cached canvas
          blurryCanvas = this._cachedBlurredCanvas;
        }

        var maskCanvas = this._createMask(renderer);

        this._applyMask(canvas, blurryCanvas, maskCanvas);
      },
      writable: true,
      configurable: true
    },
    _blurCanvas: {

      /**
       * Creates a blurred copy of the canvas
       * @param  {CanvasRenderer} renderer
       * @return {Canvas}
       * @private
       */

      value: function _blurCanvas(renderer) {
        var newCanvas = renderer.cloneCanvas();
        var blurryContext = newCanvas.getContext("2d");
        var blurryImageData = blurryContext.getImageData(0, 0, newCanvas.width, newCanvas.height);
        StackBlur.stackBlurCanvasRGBA(blurryImageData, 0, 0, newCanvas.width, newCanvas.height, this._options.blurRadius);
        blurryContext.putImageData(blurryImageData, 0, 0);

        return newCanvas;
      },
      writable: true,
      configurable: true
    },
    _createMask: {

      /**
       * Creates the mask canvas
       * @param  {CanvasRenderer} renderer
       * @return {Canvas}
       * @private
       */

      value: function _createMask(renderer) {
        var canvas = renderer.getCanvas();

        var canvasSize = new Vector2(canvas.width, canvas.height);
        var gradientRadius = this._options.gradientRadius;

        var maskCanvas = renderer.createCanvas(canvas.width, canvas.height);
        var maskContext = maskCanvas.getContext("2d");

        var position = this._options.position.clone();

        if (this._options.numberFormat === "relative") {
          position.multiply(canvasSize);
        }

        // Build gradient
        var gradient = maskContext.createRadialGradient(position.x, position.y, 0, position.x, position.y, gradientRadius);
        gradient.addColorStop(0, "#FFFFFF");
        gradient.addColorStop(1, "#000000");

        // Draw gradient
        maskContext.fillStyle = gradient;
        maskContext.fillRect(0, 0, canvas.width, canvas.height);

        return maskCanvas;
      },
      writable: true,
      configurable: true
    },
    _applyMask: {

      /**
       * Applies the blur and mask to the input canvas
       * @param  {Canvas} inputCanvas
       * @param  {Canvas} blurryCanvas
       * @param  {Canvas} maskCanvas
       * @private
       */

      value: function _applyMask(inputCanvas, blurryCanvas, maskCanvas) {
        var inputContext = inputCanvas.getContext("2d");
        var blurryContext = blurryCanvas.getContext("2d");
        var maskContext = maskCanvas.getContext("2d");

        var inputImageData = inputContext.getImageData(0, 0, inputCanvas.width, inputCanvas.height);
        var pixels = inputImageData.data;
        var blurryPixels = blurryContext.getImageData(0, 0, inputCanvas.width, inputCanvas.height).data;
        var maskPixels = maskContext.getImageData(0, 0, inputCanvas.width, inputCanvas.height).data;

        var index, alpha;
        for (var y = 0; y < inputCanvas.height; y++) {
          for (var x = 0; x < inputCanvas.width; x++) {
            index = (y * inputCanvas.width + x) * 4;
            alpha = maskPixels[index] / 255;

            pixels[index] = alpha * pixels[index] + (1 - alpha) * blurryPixels[index];
            pixels[index + 1] = alpha * pixels[index + 1] + (1 - alpha) * blurryPixels[index + 1];
            pixels[index + 2] = alpha * pixels[index + 2] + (1 - alpha) * blurryPixels[index + 2];
          }
        }

        inputContext.putImageData(inputImageData, 0, 0);
      },
      writable: true,
      configurable: true
    },
    dirty: {

      /**
       * Sets the dirty state of this operation
       * @param {Boolean} dirty
       * @comment Since blur operations do seperate caching of the
       *          blurred canvas, we need to invalidate the cache when the
       *          dirty state changes.
       */

      set: function (dirty) {
        _set(Object.getPrototypeOf(RadialBlurOperation.prototype), "dirty", dirty, this);
        this._cachedBlurredCanvas = null;
      },

      /**
       * Returns the dirty state
       * @type {Boolean}
       */
      get: function () {
        return _get(Object.getPrototypeOf(RadialBlurOperation.prototype), "dirty", this);
      },
      configurable: true
    }
  });

  return RadialBlurOperation;
})(Operation);

module.exports = RadialBlurOperation;

},{"../lib/math/vector2":"/Users/sash/development/js/imglykit-rewrite/src/js/lib/math/vector2.js","../vendor/stack-blur":"/Users/sash/development/js/imglykit-rewrite/src/js/vendor/stack-blur.js","./operation":"/Users/sash/development/js/imglykit-rewrite/src/js/operations/operation.js"}],"/Users/sash/development/js/imglykit-rewrite/src/js/operations/rotation-operation.js":[function(require,module,exports){
"use strict";

var _interopRequire = function (obj) { return obj && obj.__esModule ? obj["default"] : obj; };

var _prototypeProperties = function (child, staticProps, instanceProps) { if (staticProps) Object.defineProperties(child, staticProps); if (instanceProps) Object.defineProperties(child.prototype, instanceProps); };

var _get = function get(object, property, receiver) { var desc = Object.getOwnPropertyDescriptor(object, property); if (desc === undefined) { var parent = Object.getPrototypeOf(object); if (parent === null) { return undefined; } else { return get(parent, property, receiver); } } else if ("value" in desc && desc.writable) { return desc.value; } else { var getter = desc.get; if (getter === undefined) { return undefined; } return getter.call(receiver); } };

var _inherits = function (subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) subClass.__proto__ = superClass; };

var _classCallCheck = function (instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } };

/*!
 * Copyright (c) 2013-2015 9elements GmbH
 *
 * Released under Attribution-NonCommercial 3.0 Unported
 * http://creativecommons.org/licenses/by-nc/3.0/
 *
 * For commercial use, please contact us at contact@9elements.com
 */

var Operation = _interopRequire(require("./operation"));

var Vector2 = _interopRequire(require("../lib/math/vector2"));

/**
 * An operation that can crop out a part of the image and rotates it
 *
 * @class
 * @alias ImglyKit.Operations.RotationOperation
 * @extends ImglyKit.Operation
 */

var RotationOperation = (function (Operation) {
  function RotationOperation() {
    for (var _len = arguments.length, args = Array(_len), _key = 0; _key < _len; _key++) {
      args[_key] = arguments[_key];
    }

    _classCallCheck(this, RotationOperation);

    this.availableOptions = {
      degrees: { type: "number", "default": 0, validation: function validation(value) {
          if (value % 90 !== 0) {
            throw new Error("RotationOperation: `rotation` has to be a multiple of 90.");
          }
        } }
    };

    /**
     * The fragment shader used for this operation
     */
    this.vertexShader = "\n      attribute vec2 a_position;\n      attribute vec2 a_texCoord;\n      varying vec2 v_texCoord;\n      uniform mat3 u_matrix;\n\n      void main() {\n        gl_Position = vec4((u_matrix * vec3(a_position, 1)).xy, 0, 1);\n        v_texCoord = a_texCoord;\n      }\n    ";

    _get(Object.getPrototypeOf(RotationOperation.prototype), "constructor", this).apply(this, args);
  }

  _inherits(RotationOperation, Operation);

  _prototypeProperties(RotationOperation, null, {
    identifier: {

      /**
       * A unique string that identifies this operation. Can be used to select
       * operations.
       * @type {String}
       */

      get: function () {
        return "rotation";
      },
      configurable: true
    },
    _renderWebGL: {

      /**
       * Rotates the image using WebGL
       * @param  {WebGLRenderer} renderer
       */
      /* istanbul ignore next */

      value: function _renderWebGL(renderer) {
        var canvas = renderer.getCanvas();

        var actualDegrees = this._options.degrees % 360;

        // If we're not rotating by 180 degrees, we need to resize the canvas
        // and the texture
        if (actualDegrees % 180 !== 0) {
          var newDimensions = this.getNewDimensions(renderer);

          // Resize the canvas
          canvas.width = newDimensions.x;
          canvas.height = newDimensions.y;
        }

        // Build the rotation matrix
        var radians = actualDegrees * (Math.PI / 180);
        var c = Math.cos(radians);
        var s = Math.sin(radians);
        var rotationMatrix = [c, -s, 0, s, c, 0, 0, 0, 1];

        // Run the shader
        renderer.runShader(this.vertexShader, null, {
          uniforms: {
            u_matrix: { type: "mat3fv", value: rotationMatrix }
          }
        });
      },
      writable: true,
      configurable: true
    },
    _renderCanvas: {

      /**
       * Crops the image using Canvas2D
       * @param  {CanvasRenderer} renderer
       */

      value: function _renderCanvas(renderer) {
        var canvas = renderer.getCanvas();

        var actualDegrees = this._options.degrees % 360;
        var newDimensions = this.getNewDimensions(renderer);

        // Create a rotated canvas
        var newCanvas = renderer.createCanvas();
        newCanvas.width = newDimensions.x;
        newCanvas.height = newDimensions.y;
        var newContext = newCanvas.getContext("2d");

        newContext.save();

        // Translate the canvas
        newContext.translate(newCanvas.width / 2, newCanvas.height / 2);

        // Rotate the canvas
        newContext.rotate(actualDegrees * (Math.PI / 180));

        // Create a temporary canvas so that we can draw the image
        // with the applied transformation
        var tempCanvas = renderer.cloneCanvas();
        newContext.drawImage(tempCanvas, -canvas.width / 2, -canvas.height / 2);

        // Restore old transformation
        newContext.restore();

        renderer.setCanvas(newCanvas);
      },
      writable: true,
      configurable: true
    },
    getNewDimensions: {

      /**
       * Gets the new dimensions
       * @param {Renderer} renderer
       * @param {Vector2} [dimensions]
       * @return {Vector2}
       */

      value: function getNewDimensions(renderer, dimensions) {
        var canvas = renderer.getCanvas();
        dimensions = dimensions || new Vector2(canvas.width, canvas.height);

        var actualDegrees = this._options.degrees % 360;
        if (actualDegrees % 180 !== 0) {
          var tempX = dimensions.x;
          dimensions.x = dimensions.y;
          dimensions.y = tempX;
        }

        return dimensions;
      },
      writable: true,
      configurable: true
    }
  });

  return RotationOperation;
})(Operation);

module.exports = RotationOperation;

},{"../lib/math/vector2":"/Users/sash/development/js/imglykit-rewrite/src/js/lib/math/vector2.js","./operation":"/Users/sash/development/js/imglykit-rewrite/src/js/operations/operation.js"}],"/Users/sash/development/js/imglykit-rewrite/src/js/operations/saturation-operation.js":[function(require,module,exports){
"use strict";

var _interopRequire = function (obj) { return obj && obj.__esModule ? obj["default"] : obj; };

var _prototypeProperties = function (child, staticProps, instanceProps) { if (staticProps) Object.defineProperties(child, staticProps); if (instanceProps) Object.defineProperties(child.prototype, instanceProps); };

var _get = function get(object, property, receiver) { var desc = Object.getOwnPropertyDescriptor(object, property); if (desc === undefined) { var parent = Object.getPrototypeOf(object); if (parent === null) { return undefined; } else { return get(parent, property, receiver); } } else if ("value" in desc && desc.writable) { return desc.value; } else { var getter = desc.get; if (getter === undefined) { return undefined; } return getter.call(receiver); } };

var _inherits = function (subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) subClass.__proto__ = superClass; };

var _classCallCheck = function (instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } };

/*!
 * Copyright (c) 2013-2015 9elements GmbH
 *
 * Released under Attribution-NonCommercial 3.0 Unported
 * http://creativecommons.org/licenses/by-nc/3.0/
 *
 * For commercial use, please contact us at contact@9elements.com
 */

var Operation = _interopRequire(require("./operation"));

var PrimitivesStack = _interopRequire(require("./filters/primitives-stack"));

var SaturationPrimitive = _interopRequire(require("./filters/primitives/saturation"));

/**
 * @class
 * @alias ImglyKit.Operations.SaturationOperation
 * @extends ImglyKit.Operation
 */

var SaturationOperation = (function (Operation) {
  function SaturationOperation() {
    for (var _len = arguments.length, args = Array(_len), _key = 0; _key < _len; _key++) {
      args[_key] = arguments[_key];
    }

    _classCallCheck(this, SaturationOperation);

    this.availableOptions = {
      saturation: { type: "number", "default": 1 }
    };

    _get(Object.getPrototypeOf(SaturationOperation.prototype), "constructor", this).apply(this, args);
  }

  _inherits(SaturationOperation, Operation);

  _prototypeProperties(SaturationOperation, null, {
    identifier: {

      /**
       * A unique string that identifies this operation. Can be used to select
       * operations.
       * @type {String}
       */

      get: function () {
        return "saturation";
      },
      configurable: true
    },
    _renderWebGL: {

      /**
       * Renders the saturation using WebGL
       * @param  {WebGLRenderer} renderer
       * @override
       */

      value: function _renderWebGL(renderer) {
        this._render(renderer);
      },
      writable: true,
      configurable: true
    },
    _renderCanvas: {

      /**
       * Renders the saturation using Canvas2D
       * @param {CanvasRenderer} renderer
       * @override
       */

      value: function _renderCanvas(renderer) {
        this._render(renderer);
      },
      writable: true,
      configurable: true
    },
    _render: {

      /**
       * Renders the saturation (all renderers supported)
       * @param  {Renderer} renderer
       * @private
       */

      value: function _render(renderer) {
        var stack = new PrimitivesStack();

        stack.add(new SaturationPrimitive({
          saturation: this._options.saturation
        }));

        stack.render(renderer);
      },
      writable: true,
      configurable: true
    }
  });

  return SaturationOperation;
})(Operation);

module.exports = SaturationOperation;

},{"./filters/primitives-stack":"/Users/sash/development/js/imglykit-rewrite/src/js/operations/filters/primitives-stack.js","./filters/primitives/saturation":"/Users/sash/development/js/imglykit-rewrite/src/js/operations/filters/primitives/saturation.js","./operation":"/Users/sash/development/js/imglykit-rewrite/src/js/operations/operation.js"}],"/Users/sash/development/js/imglykit-rewrite/src/js/operations/stickers-operation.js":[function(require,module,exports){
"use strict";

var _interopRequire = function (obj) { return obj && obj.__esModule ? obj["default"] : obj; };

var _prototypeProperties = function (child, staticProps, instanceProps) { if (staticProps) Object.defineProperties(child, staticProps); if (instanceProps) Object.defineProperties(child.prototype, instanceProps); };

var _get = function get(object, property, receiver) { var desc = Object.getOwnPropertyDescriptor(object, property); if (desc === undefined) { var parent = Object.getPrototypeOf(object); if (parent === null) { return undefined; } else { return get(parent, property, receiver); } } else if ("value" in desc && desc.writable) { return desc.value; } else { var getter = desc.get; if (getter === undefined) { return undefined; } return getter.call(receiver); } };

var _inherits = function (subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) subClass.__proto__ = superClass; };

var _classCallCheck = function (instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } };

/*!
 * Copyright (c) 2013-2015 9elements GmbH
 *
 * Released under Attribution-NonCommercial 3.0 Unported
 * http://creativecommons.org/licenses/by-nc/3.0/
 *
 * For commercial use, please contact us at contact@9elements.com
 */

var Operation = _interopRequire(require("./operation"));

var Vector2 = _interopRequire(require("../lib/math/vector2"));

var Utils = _interopRequire(require("../lib/utils"));

var bluebird = _interopRequire(require("bluebird"));

/**
 * An operation that can draw text on the canvas
 *
 * @class
 * @alias ImglyKit.Operations.StickersOperation
 * @extends ImglyKit.Operation
 */

var StickersOperation = (function (Operation) {
  function StickersOperation() {
    for (var _len = arguments.length, args = Array(_len), _key = 0; _key < _len; _key++) {
      args[_key] = arguments[_key];
    }

    _classCallCheck(this, StickersOperation);

    this.availableOptions = {
      sticker: { type: "string", required: true },
      position: { type: "vector2", "default": new Vector2(0, 0) },
      size: { type: "vector2", "default": new Vector2(0, 0) }
    };

    /**
     * The texture index used for the sticker
     * @type {Number}
     * @private
     */
    this._textureIndex = 1;

    /**
     * The fragment shader used for this operation
     */
    this._fragmentShader = "\n      precision mediump float;\n      varying vec2 v_texCoord;\n      uniform sampler2D u_image;\n      uniform sampler2D u_stickerImage;\n      uniform vec2 u_position;\n      uniform vec2 u_size;\n\n      void main() {\n        vec4 color0 = texture2D(u_image, v_texCoord);\n        vec2 relative = (v_texCoord - u_position) / u_size;\n\n        if (relative.x >= 0.0 && relative.x <= 1.0 &&\n          relative.y >= 0.0 && relative.y <= 1.0) {\n\n            vec4 color1 = texture2D(u_stickerImage, relative);\n            gl_FragColor = vec4(mix(color0.rgb, color1.rgb, color1.a), 1.0);\n\n        } else {\n\n          gl_FragColor = color0;\n\n        }\n      }\n    ";

    this._loadedStickers = {};

    _get(Object.getPrototypeOf(StickersOperation.prototype), "constructor", this).apply(this, args);
  }

  _inherits(StickersOperation, Operation);

  _prototypeProperties(StickersOperation, null, {
    identifier: {

      /**
       * A unique string that identifies this operation. Can be used to select
       * operations.
       * @type {String}
       */

      get: function () {
        return "stickers";
      },
      configurable: true
    },
    render: {

      /**
       * Applies this operation
       * @param  {Renderer} renderer
       * @return {Promise}
       * @abstract
       */

      value: function render(renderer) {
        var self = this;
        return this._loadSticker().then(function (image) {
          if (renderer.identifier === "webgl") {
            /* istanbul ignore next */
            return self._renderWebGL(renderer, image);
          } else {
            return self._renderCanvas(renderer, image);
          }
        });
      },
      writable: true,
      configurable: true
    },
    _renderWebGL: {

      /**
       * Crops this image using WebGL
       * @param  {WebGLRenderer} renderer
       * @param  {Image} image
       * @private
       */
      /* istanbul ignore next */

      value: function _renderWebGL(renderer, image) {
        var canvas = renderer.getCanvas();
        var gl = renderer.getContext();

        var position = this._options.position.clone();
        var canvasSize = new Vector2(canvas.width, canvas.height);

        if (this._options.numberFormat === "absolute") {
          position.divide(canvasSize);
        }

        var size = new Vector2(image.width, image.height);
        if (typeof this._options.size !== "undefined") {
          size.copy(this._options.size);

          if (this._options.numberFormat === "relative") {
            size.multiply(canvasSize);
          }

          // Calculate image ratio, scale by width
          var ratio = image.height / image.width;
          size.y = size.x * ratio;
        }
        size.divide(canvasSize);

        position.y = 1 - position.y; // Invert y
        position.y -= size.y; // Fix y

        // Upload the texture
        gl.activeTexture(gl.TEXTURE0 + this._textureIndex);
        this._texture = gl.createTexture();
        gl.bindTexture(gl.TEXTURE_2D, this._texture);

        gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MIN_FILTER, gl.LINEAR);
        gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MAG_FILTER, gl.LINEAR);
        gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_S, gl.CLAMP_TO_EDGE);
        gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_T, gl.CLAMP_TO_EDGE);

        gl.texImage2D(gl.TEXTURE_2D, 0, gl.RGBA, gl.RGBA, gl.UNSIGNED_BYTE, image);
        gl.activeTexture(gl.TEXTURE0);

        // Execute the shader
        renderer.runShader(null, this._fragmentShader, {
          uniforms: {
            u_stickerImage: { type: "i", value: this._textureIndex },
            u_position: { type: "2f", value: [position.x, position.y] },
            u_size: { type: "2f", value: [size.x, size.y] }
          }
        });
      },
      writable: true,
      configurable: true
    },
    _renderCanvas: {

      /**
       * Crops the image using Canvas2D
       * @param  {CanvasRenderer} renderer
       * @param  {Image} image
       * @private
       */

      value: function _renderCanvas(renderer, image) {
        var canvas = renderer.getCanvas();
        var context = renderer.getContext();

        var canvasSize = new Vector2(canvas.width, canvas.height);
        var scaledPosition = this._options.position.clone();

        if (this._options.numberFormat === "relative") {
          scaledPosition.multiply(canvasSize);
        }

        var size = new Vector2(image.width, image.height);
        if (typeof this._options.size !== "undefined") {
          size.copy(this._options.size);

          if (this._options.numberFormat === "relative") {
            size.multiply(canvasSize);
          }
        }

        context.drawImage(image, 0, 0, image.width, image.height, scaledPosition.x, scaledPosition.y, size.x, size.y);
      },
      writable: true,
      configurable: true
    },
    _loadSticker: {

      /**
       * Loads the sticker
       * @return {Promise}
       * @private
       */

      value: function _loadSticker() {
        var isBrowser = typeof window !== "undefined";
        if (isBrowser) {
          return this._loadImageBrowser(this._options.sticker);
        } else {
          return this._loadImageNode(this._options.sticker);
        }
      },
      writable: true,
      configurable: true
    },
    _loadImageBrowser: {

      /**
       * Loads the given image using the browser's `Image` class
       * @param  {String} fileName
       * @return {Promise}
       * @private
       */

      value: function _loadImageBrowser(fileName) {
        var self = this;
        return new Promise(function (resolve, reject) {
          // Return preloaded sticker if available
          if (self._loadedStickers[fileName]) {
            return resolve(self._loadedStickers[fileName]);
          }

          var image = new Image();

          image.addEventListener("load", function () {
            self._loadedStickers[fileName] = image;
            resolve(image);
          });
          image.addEventListener("error", function () {
            reject(new Error("Could not load sticker: " + fileName));
          });

          image.src = self._kit.getAssetPath(fileName);
        });
      },
      writable: true,
      configurable: true
    },
    _loadImageNode: {

      /**
       * Loads the given image using node.js' `fs` and node-canvas `Image`
       * @param  {String} fileName
       * @return {Promise}
       * @private
       */

      value: function _loadImageNode(fileName) {
        var Canvas = require("canvas");
        

        var self = this;
        var image = new Canvas.Image();
        var path = self._kit.getAssetPath(fileName);

        return bluebird.promisify(fs.readFile)(path).then(function (buffer) {
          image.src = buffer;
          return image;
        });
      },
      writable: true,
      configurable: true
    },
    stickers: {

      /**
       * The registered stickers
       * @type {Object.<String,String>}
       */

      get: function () {
        return this._stickers;
      },
      configurable: true
    }
  });

  return StickersOperation;
})(Operation);

module.exports = StickersOperation;

},{"../lib/math/vector2":"/Users/sash/development/js/imglykit-rewrite/src/js/lib/math/vector2.js","../lib/utils":"/Users/sash/development/js/imglykit-rewrite/src/js/lib/utils.js","./operation":"/Users/sash/development/js/imglykit-rewrite/src/js/operations/operation.js","bluebird":"/Users/sash/development/js/imglykit-rewrite/node_modules/bluebird/js/main/bluebird.js","canvas":"canvas"}],"/Users/sash/development/js/imglykit-rewrite/src/js/operations/text-operation.js":[function(require,module,exports){
"use strict";

var _interopRequire = function (obj) { return obj && obj.__esModule ? obj["default"] : obj; };

var _prototypeProperties = function (child, staticProps, instanceProps) { if (staticProps) Object.defineProperties(child, staticProps); if (instanceProps) Object.defineProperties(child.prototype, instanceProps); };

var _get = function get(object, property, receiver) { var desc = Object.getOwnPropertyDescriptor(object, property); if (desc === undefined) { var parent = Object.getPrototypeOf(object); if (parent === null) { return undefined; } else { return get(parent, property, receiver); } } else if ("value" in desc && desc.writable) { return desc.value; } else { var getter = desc.get; if (getter === undefined) { return undefined; } return getter.call(receiver); } };

var _inherits = function (subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) subClass.__proto__ = superClass; };

var _classCallCheck = function (instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } };

/*!
 * Copyright (c) 2013-2015 9elements GmbH
 *
 * Released under Attribution-NonCommercial 3.0 Unported
 * http://creativecommons.org/licenses/by-nc/3.0/
 *
 * For commercial use, please contact us at contact@9elements.com
 */

var Operation = _interopRequire(require("./operation"));

var Vector2 = _interopRequire(require("../lib/math/vector2"));

var Color = _interopRequire(require("../lib/color"));

/**
 * An operation that can draw text on the canvas
 *
 * @class
 * @alias ImglyKit.Operations.TextOperation
 * @extends ImglyKit.Operation
 */

var TextOperation = (function (Operation) {
  function TextOperation() {
    for (var _len = arguments.length, args = Array(_len), _key = 0; _key < _len; _key++) {
      args[_key] = arguments[_key];
    }

    _classCallCheck(this, TextOperation);

    this.availableOptions = {
      fontSize: { type: "number", "default": 0.1 },
      lineHeight: { type: "number", "default": 1.1 },
      fontFamily: { type: "string", "default": "Times New Roman" },
      fontWeight: { type: "string", "default": "normal" },
      alignment: { type: "string", "default": "left", available: ["left", "center", "right"] },
      verticalAlignment: { type: "string", "default": "top", available: ["top", "center", "bottom"] },
      color: { type: "color", "default": new Color(1, 1, 1, 1) },
      backgroundColor: { type: "color", "default": new Color(0, 0, 0, 0) },
      position: { type: "vector2", "default": new Vector2(0, 0) },
      text: { type: "string", required: true },
      maxWidth: { type: "number", "default": 1 }
    };

    /**
     * The texture index used for the text
     * @type {Number}
     * @private
     */
    this._textureIndex = 1;

    /**
     * The fragment shader used for this operation
     */
    this._fragmentShader = "\n      precision mediump float;\n      varying vec2 v_texCoord;\n      uniform sampler2D u_image;\n      uniform sampler2D u_textImage;\n      uniform vec2 u_position;\n      uniform vec2 u_size;\n\n      void main() {\n        vec4 color0 = texture2D(u_image, v_texCoord);\n        vec2 relative = (v_texCoord - u_position) / u_size;\n\n        if (relative.x >= 0.0 && relative.x <= 1.0 &&\n          relative.y >= 0.0 && relative.y <= 1.0) {\n\n            vec4 color1 = texture2D(u_textImage, relative);\n            gl_FragColor = vec4(mix(color0.rgb, color1.rgb, color1.a), 1.0);\n\n        } else {\n\n          gl_FragColor = color0;\n\n        }\n      }\n    ";

    _get(Object.getPrototypeOf(TextOperation.prototype), "constructor", this).apply(this, args);
  }

  _inherits(TextOperation, Operation);

  _prototypeProperties(TextOperation, null, {
    identifier: {

      /**
       * A unique string that identifies this operation. Can be used to select
       * operations.
       * @type {String}
       */

      get: function () {
        return "text";
      },
      configurable: true
    },
    _renderWebGL: {

      /**
       * Crops this image using WebGL
       * @param  {WebGLRenderer} renderer
       */
      /* istanbul ignore next */

      value: function _renderWebGL(renderer) {
        var textCanvas = this._renderTextCanvas(renderer);

        var canvas = renderer.getCanvas();
        var gl = renderer.getContext();

        var position = this._options.position.clone();
        var canvasSize = new Vector2(canvas.width, canvas.height);
        var size = new Vector2(textCanvas.width, textCanvas.height).divide(canvasSize);

        if (this._options.numberFormat === "absolute") {
          position.divide(canvasSize);
        }

        position.y = 1 - position.y; // Invert y
        position.y -= size.y; // Fix y

        // Adjust vertical alignment
        if (this._options.verticalAlignment === "center") {
          position.y += size.y / 2;
        } else if (this._options.verticalAlignment === "bottom") {
          position.y += size.y;
        }

        // Adjust horizontal alignment
        if (this._options.alignment === "center") {
          position.x -= size.x / 2;
        } else if (this._options.alignment === "right") {
          position.x -= size.x;
        }

        // Upload the texture
        gl.activeTexture(gl.TEXTURE0 + this._textureIndex);
        this._texture = gl.createTexture();
        gl.bindTexture(gl.TEXTURE_2D, this._texture);

        gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MIN_FILTER, gl.LINEAR);
        gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MAG_FILTER, gl.LINEAR);
        gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_S, gl.CLAMP_TO_EDGE);
        gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_T, gl.CLAMP_TO_EDGE);

        gl.texImage2D(gl.TEXTURE_2D, 0, gl.RGBA, gl.RGBA, gl.UNSIGNED_BYTE, textCanvas);
        gl.activeTexture(gl.TEXTURE0);

        // Execute the shader
        renderer.runShader(null, this._fragmentShader, {
          uniforms: {
            u_textImage: { type: "i", value: this._textureIndex },
            u_position: { type: "2f", value: [position.x, position.y] },
            u_size: { type: "2f", value: [size.x, size.y] }
          }
        });
      },
      writable: true,
      configurable: true
    },
    _renderCanvas: {

      /**
       * Crops the image using Canvas2D
       * @param  {CanvasRenderer} renderer
       */

      value: function _renderCanvas(renderer) {
        var textCanvas = this._renderTextCanvas(renderer);

        var canvas = renderer.getCanvas();
        var context = renderer.getContext();

        var canvasSize = new Vector2(canvas.width, canvas.height);
        var scaledPosition = this._options.position.clone();

        if (this._options.numberFormat === "relative") {
          scaledPosition.multiply(canvasSize);
        }

        // Adjust vertical alignment
        if (this._options.verticalAlignment === "center") {
          scaledPosition.y -= textCanvas.height / 2;
        } else if (this._options.verticalAlignment === "bottom") {
          scaledPosition.y -= textCanvas.height;
        }

        // Adjust horizontal alignment
        if (this._options.alignment === "center") {
          scaledPosition.x -= textCanvas.width / 2;
        } else if (this._options.alignment === "right") {
          scaledPosition.x -= textCanvas.width;
        }

        context.drawImage(textCanvas, scaledPosition.x, scaledPosition.y);
      },
      writable: true,
      configurable: true
    },
    _renderTextCanvas: {

      /**
       * Renders the text canvas that will be used as a texture in WebGL
       * and as an image in canvas
       * @return {Canvas}
       * @private
       */

      value: function _renderTextCanvas(renderer) {
        var line = undefined,
            lineNum = undefined;
        var canvas = renderer.createCanvas();
        var context = canvas.getContext("2d");

        var outputCanvas = renderer.getCanvas();
        var canvasSize = new Vector2(outputCanvas.width, outputCanvas.height);

        var maxWidth = this._options.maxWidth;
        var actualFontSize = this._options.fontSize * canvasSize.y;
        var actualLineHeight = this._options.lineHeight * actualFontSize;

        if (this._options.numberFormat === "relative") {
          maxWidth *= renderer.getCanvas().width;
        }

        // Apply text options
        this._applyTextOptions(renderer, context);

        var boundingBox = new Vector2();

        var lines = this._options.text.split("\n");
        if (typeof maxWidth !== "undefined") {
          // Calculate the bounding box
          boundingBox.x = maxWidth;
          lines = this._buildOutputLines(context, maxWidth);
        } else {
          for (lineNum = 0; lineNum < lines.length; lineNum++) {
            line = lines[lineNum];
            boundingBox.x = Math.max(boundingBox.x, context.measureText(line).width);
          }
        }

        // Calculate boundingbox height
        boundingBox.y = actualLineHeight * lines.length;

        // Resize the canvas
        canvas.width = boundingBox.x;
        canvas.height = boundingBox.y;

        // Get the context again
        context = canvas.getContext("2d");

        // Render background color
        context.fillStyle = this._options.backgroundColor.toRGBA();
        context.fillRect(0, 0, canvas.width, canvas.height);

        // Apply text options
        this._applyTextOptions(renderer, context);

        // Draw lines
        for (lineNum = 0; lineNum < lines.length; lineNum++) {
          line = lines[lineNum];
          this._drawText(context, line, actualLineHeight * lineNum);
        }

        return canvas;
      },
      writable: true,
      configurable: true
    },
    _applyTextOptions: {

      /**
       * Applies the text options on the given context
       * @param  {Renderer} renderer
       * @param  {RenderingContext2D} context
       * @private
       */

      value: function _applyTextOptions(renderer, context) {
        var canvas = renderer.getCanvas();
        var canvasSize = new Vector2(canvas.width, canvas.height);
        var actualFontSize = this._options.fontSize * canvasSize.y;

        context.font = this._options.fontWeight + " " + actualFontSize + "px " + this._options.fontFamily;
        context.textBaseline = "top";
        context.textAlign = this._options.alignment;
        context.fillStyle = this._options.color.toRGBA();
      },
      writable: true,
      configurable: true
    },
    _buildOutputLines: {

      /**
       * Iterate over all lines and split them into multiple lines, depending
       * on the width they need
       * @param {RenderingContext2d} context
       * @param {Number} maxWidth
       * @return {Array.<string>}
       * @private
       */

      value: function _buildOutputLines(context, maxWidth) {
        var inputLines = this._options.text.split("\n");
        var outputLines = [];
        var currentChars = [];

        for (var lineNum = 0; lineNum < inputLines.length; lineNum++) {
          var inputLine = inputLines[lineNum];
          var lineChars = inputLine.split("");

          if (lineChars.length === 0) {
            outputLines.push("");
          }

          for (var charNum = 0; charNum < lineChars.length; charNum++) {
            var currentChar = lineChars[charNum];
            currentChars.push(currentChar);
            var currentLine = currentChars.join("");
            var lineWidth = context.measureText(currentLine).width;

            if (lineWidth > maxWidth && currentChars.length === 1) {
              outputLines.push(currentChars[0]);
              currentChars = [];
            } else if (lineWidth > maxWidth) {
              // Remove the last word
              var lastWord = currentChars.pop();

              // Add the line, clear the words
              outputLines.push(currentChars.join(""));
              currentChars = [];

              // Make sure to use the last word for the next line
              currentChars = [lastWord];
            } else if (charNum === lineChars.length - 1) {
              // Add the line, clear the words
              outputLines.push(currentChars.join(""));
              currentChars = [];
            }
          }

          // Line ended, but there's words left
          if (currentChars.length) {
            outputLines.push(currentChars.join(""));
            currentChars = [];
          }
        }
        return outputLines;
      },
      writable: true,
      configurable: true
    },
    _drawText: {

      /**
       * Draws the given line onto the given context at the given Y position
       * @param  {RenderingContext2D} context
       * @param  {String} text
       * @param  {Number} y
       * @private
       */

      value: function _drawText(context, text, y) {
        var canvas = context.canvas;
        if (this._options.alignment === "center") {
          context.fillText(text, canvas.width / 2, y);
        } else if (this._options.alignment === "left") {
          context.fillText(text, 0, y);
        } else if (this._options.alignment === "right") {
          context.fillText(text, canvas.width, y);
        }
      },
      writable: true,
      configurable: true
    }
  });

  return TextOperation;
})(Operation);

module.exports = TextOperation;

},{"../lib/color":"/Users/sash/development/js/imglykit-rewrite/src/js/lib/color.js","../lib/math/vector2":"/Users/sash/development/js/imglykit-rewrite/src/js/lib/math/vector2.js","./operation":"/Users/sash/development/js/imglykit-rewrite/src/js/operations/operation.js"}],"/Users/sash/development/js/imglykit-rewrite/src/js/operations/tilt-shift-operation.js":[function(require,module,exports){
"use strict";

var _interopRequire = function (obj) { return obj && obj.__esModule ? obj["default"] : obj; };

var _prototypeProperties = function (child, staticProps, instanceProps) { if (staticProps) Object.defineProperties(child, staticProps); if (instanceProps) Object.defineProperties(child.prototype, instanceProps); };

var _set = function set(object, property, value, receiver) { var desc = Object.getOwnPropertyDescriptor(object, property); if (desc === undefined) { var parent = Object.getPrototypeOf(object); if (parent !== null) { return set(parent, property, value, receiver); } } else if ("value" in desc && desc.writable) { return desc.value = value; } else { var setter = desc.set; if (setter !== undefined) { return setter.call(receiver, value); } } };

var _get = function get(object, property, receiver) { var desc = Object.getOwnPropertyDescriptor(object, property); if (desc === undefined) { var parent = Object.getPrototypeOf(object); if (parent === null) { return undefined; } else { return get(parent, property, receiver); } } else if ("value" in desc && desc.writable) { return desc.value; } else { var getter = desc.get; if (getter === undefined) { return undefined; } return getter.call(receiver); } };

var _inherits = function (subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) subClass.__proto__ = superClass; };

var _classCallCheck = function (instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } };

/*!
 * Copyright (c) 2013-2015 9elements GmbH
 *
 * Released under Attribution-NonCommercial 3.0 Unported
 * http://creativecommons.org/licenses/by-nc/3.0/
 *
 * For commercial use, please contact us at contact@9elements.com
 */

var Operation = _interopRequire(require("./operation"));

var Vector2 = _interopRequire(require("../lib/math/vector2"));

var StackBlur = _interopRequire(require("../vendor/stack-blur"));

/**
 * An operation that can crop out a part of the image
 *
 * @class
 * @alias ImglyKit.Operations.TiltShiftOperation
 * @extends ImglyKit.Operation
 */

var TiltShiftOperation = (function (Operation) {
  function TiltShiftOperation() {
    for (var _len = arguments.length, args = Array(_len), _key = 0; _key < _len; _key++) {
      args[_key] = arguments[_key];
    }

    _classCallCheck(this, TiltShiftOperation);

    this.availableOptions = {
      start: { type: "vector2", "default": new Vector2(0, 0.5) },
      end: { type: "vector2", "default": new Vector2(1, 0.5) },
      blurRadius: { type: "number", "default": 30 },
      gradientRadius: { type: "number", "default": 50 }
    };

    /**
     * The fragment shader used for this operation
     * @internal Based on evanw's glfx.js tilt shift shader:
     *           https://github.com/evanw/glfx.js/blob/master/src/filters/blur/tiltshift.js
     */
    this.fragmentShader = "\n      precision mediump float;\n      uniform sampler2D u_image;\n      uniform float blurRadius;\n      uniform float gradientRadius;\n      uniform vec2 start;\n      uniform vec2 end;\n      uniform vec2 delta;\n      uniform vec2 texSize;\n      varying vec2 v_texCoord;\n\n      float random(vec3 scale, float seed) {\n        return fract(sin(dot(gl_FragCoord.xyz + seed, scale)) * 43758.5453 + seed);\n      }\n\n      void main() {\n          vec4 color = vec4(0.0);\n          float total = 0.0;\n\n          float offset = random(vec3(12.9898, 78.233, 151.7182), 0.0);\n\n          vec2 normal = normalize(vec2(start.y - end.y, end.x - start.x));\n          float radius = smoothstep(0.0, 1.0, abs(dot(v_texCoord * texSize - start, normal)) / gradientRadius) * blurRadius;\n          for (float t = -30.0; t <= 30.0; t++) {\n              float percent = (t + offset - 0.5) / 30.0;\n              float weight = 1.0 - abs(percent);\n              vec4 sample = texture2D(u_image, v_texCoord + delta * percent * radius / texSize);\n\n              sample.rgb *= sample.a;\n\n              color += sample * weight;\n              total += weight;\n          }\n\n          gl_FragColor = color / total;\n          gl_FragColor.rgb /= gl_FragColor.a + 0.00001;\n      }\n    ";

    _get(Object.getPrototypeOf(TiltShiftOperation.prototype), "constructor", this).apply(this, args);

    this._cachedBlurredCanvas = null;
    this._lastBlurRadius = this._options.blurRadius;
    this._lastGradientRadius = this._options.gradientRadius;
  }

  _inherits(TiltShiftOperation, Operation);

  _prototypeProperties(TiltShiftOperation, null, {
    identifier: {

      /**
       * A unique string that identifies this operation. Can be used to select
       * operations.
       * @type {String}
       */

      get: function () {
        return "tilt-shift";
      },
      configurable: true
    },
    _renderWebGL: {

      /**
       * Crops this image using WebGL
       * @param  {WebGLRenderer} renderer
       */
      /* istanbul ignore next */

      value: function _renderWebGL(renderer) {
        var canvas = renderer.getCanvas();
        var canvasSize = new Vector2(canvas.width, canvas.height);

        var start = this._options.start.clone();
        var end = this._options.end.clone();

        if (this._options.numberFormat === "relative") {
          start.multiply(canvasSize);
          end.multiply(canvasSize);
        }

        start.y = canvasSize.y - start.y;
        end.y = canvasSize.y - end.y;

        var delta = end.clone().subtract(start);
        var d = Math.sqrt(delta.x * delta.x + delta.y * delta.y);

        var uniforms = {
          blurRadius: { type: "f", value: this._options.blurRadius },
          gradientRadius: { type: "f", value: this._options.gradientRadius },
          start: { type: "2f", value: [start.x, start.y] },
          end: { type: "2f", value: [end.x, end.y] },
          delta: { type: "2f", value: [delta.x / d, delta.y / d] },
          texSize: { type: "2f", value: [canvas.width, canvas.height] }
        };

        renderer.runShader(null, this.fragmentShader, {
          uniforms: uniforms
        });

        uniforms.delta.value = [-delta.y / d, delta.x / d];

        renderer.runShader(null, this.fragmentShader, {
          uniforms: uniforms
        });
      },
      writable: true,
      configurable: true
    },
    _renderCanvas: {

      /**
       * Crops the image using Canvas2D
       * @param  {CanvasRenderer} renderer
       */

      value: function _renderCanvas(renderer) {
        var canvas = renderer.getCanvas();

        var optionsChanged = this._options.blurRadius !== this._lastBlurRadius || this._options.gradientRadius !== this._lastGradientRadius;
        var blurryCanvas = undefined;
        if (optionsChanged || this._cachedBlurredCanvas === null) {
          // Blur and cache canvas
          blurryCanvas = this._blurCanvas(renderer);
          this._cachedBlurredCanvas = blurryCanvas;
          this._lastBlurRadius = this._options.blurRadius;
          this._lastGradientRadius = this._options.gradientRadius;
        } else {
          // Use cached canvas
          blurryCanvas = this._cachedBlurredCanvas;
        }

        var maskCanvas = this._createMask(renderer);

        this._applyMask(canvas, blurryCanvas, maskCanvas);
      },
      writable: true,
      configurable: true
    },
    _blurCanvas: {

      /**
       * Creates a blurred copy of the canvas
       * @param  {CanvasRenderer} renderer
       * @return {Canvas}
       * @private
       */

      value: function _blurCanvas(renderer) {
        var newCanvas = renderer.cloneCanvas();
        var blurryContext = newCanvas.getContext("2d");
        var blurryImageData = blurryContext.getImageData(0, 0, newCanvas.width, newCanvas.height);
        StackBlur.stackBlurCanvasRGBA(blurryImageData, 0, 0, newCanvas.width, newCanvas.height, this._options.blurRadius);
        blurryContext.putImageData(blurryImageData, 0, 0);

        return newCanvas;
      },
      writable: true,
      configurable: true
    },
    _createMask: {

      /**
       * Creates the mask canvas
       * @param  {CanvasRenderer} renderer
       * @return {Canvas}
       * @private
       */

      value: function _createMask(renderer) {
        var canvas = renderer.getCanvas();

        var canvasSize = new Vector2(canvas.width, canvas.height);
        var gradientRadius = this._options.gradientRadius;

        var maskCanvas = renderer.createCanvas(canvas.width, canvas.height);
        var maskContext = maskCanvas.getContext("2d");

        var start = this._options.start.clone();
        var end = this._options.end.clone();

        if (this._options.numberFormat === "relative") {
          start.multiply(canvasSize);
          end.multiply(canvasSize);
        }

        var dist = end.clone().subtract(start);
        var middle = start.clone().add(dist.clone().divide(2));

        var totalDist = Math.sqrt(Math.pow(dist.x, 2) + Math.pow(dist.y, 2));
        var factor = dist.clone().divide(totalDist);

        var gradientStart = middle.clone().add(gradientRadius * factor.y, -gradientRadius * factor.x);
        var gradientEnd = middle.clone().add(-gradientRadius * factor.y, gradientRadius * factor.x);

        // Build gradient
        var gradient = maskContext.createLinearGradient(gradientStart.x, gradientStart.y, gradientEnd.x, gradientEnd.y);
        gradient.addColorStop(0, "#000000");
        gradient.addColorStop(0.5, "#FFFFFF");
        gradient.addColorStop(1, "#000000");

        // Draw gradient
        maskContext.fillStyle = gradient;
        maskContext.fillRect(0, 0, canvas.width, canvas.height);

        return maskCanvas;
      },
      writable: true,
      configurable: true
    },
    _applyMask: {

      /**
       * Applies the blur and mask to the input canvas
       * @param  {Canvas} inputCanvas
       * @param  {Canvas} blurryCanvas
       * @param  {Canvas} maskCanvas
       * @private
       */

      value: function _applyMask(inputCanvas, blurryCanvas, maskCanvas) {
        var inputContext = inputCanvas.getContext("2d");
        var blurryContext = blurryCanvas.getContext("2d");
        var maskContext = maskCanvas.getContext("2d");

        var inputImageData = inputContext.getImageData(0, 0, inputCanvas.width, inputCanvas.height);
        var pixels = inputImageData.data;
        var blurryPixels = blurryContext.getImageData(0, 0, inputCanvas.width, inputCanvas.height).data;
        var maskPixels = maskContext.getImageData(0, 0, inputCanvas.width, inputCanvas.height).data;

        for (var i = 0; i < maskPixels.length; i++) {
          var alpha = maskPixels[i] / 255;
          pixels[i] = alpha * pixels[i] + (1 - alpha) * blurryPixels[i];
        }

        inputContext.putImageData(inputImageData, 0, 0);
      },
      writable: true,
      configurable: true
    },
    dirty: {

      /**
       * Sets the dirty state of this operation
       * @param {Boolean} dirty
       * @comment Since blur operations do seperate caching of the
       *          blurred canvas, we need to invalidate the cache when the
       *          dirty state changes.
       */

      set: function (dirty) {
        _set(Object.getPrototypeOf(TiltShiftOperation.prototype), "dirty", dirty, this);
        this._cachedBlurredCanvas = null;
      },

      /**
       * Returns the dirty state
       * @type {Boolean}
       */
      get: function () {
        return _get(Object.getPrototypeOf(TiltShiftOperation.prototype), "dirty", this);
      },
      configurable: true
    }
  });

  return TiltShiftOperation;
})(Operation);

module.exports = TiltShiftOperation;

},{"../lib/math/vector2":"/Users/sash/development/js/imglykit-rewrite/src/js/lib/math/vector2.js","../vendor/stack-blur":"/Users/sash/development/js/imglykit-rewrite/src/js/vendor/stack-blur.js","./operation":"/Users/sash/development/js/imglykit-rewrite/src/js/operations/operation.js"}],"/Users/sash/development/js/imglykit-rewrite/src/js/renderers/canvas-renderer.js":[function(require,module,exports){
"use strict";

var _interopRequire = function (obj) { return obj && obj.__esModule ? obj["default"] : obj; };

var _prototypeProperties = function (child, staticProps, instanceProps) { if (staticProps) Object.defineProperties(child, staticProps); if (instanceProps) Object.defineProperties(child.prototype, instanceProps); };

var _inherits = function (subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) subClass.__proto__ = superClass; };

var _classCallCheck = function (instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } };

/*!
 * Copyright (c) 2013-2015 9elements GmbH
 *
 * Released under Attribution-NonCommercial 3.0 Unported
 * http://creativecommons.org/licenses/by-nc/3.0/
 *
 * For commercial use, please contact us at contact@9elements.com
 */

var Renderer = _interopRequire(require("./renderer"));

var Vector2 = _interopRequire(require("../lib/math/vector2"));

/**
 * @class
 * @alias ImglyKit.CanvasRenderer
 * @extends {ImglyKit.Renderer}
 * @private
 */

var CanvasRenderer = (function (Renderer) {
  function CanvasRenderer() {
    _classCallCheck(this, CanvasRenderer);

    if (Renderer != null) {
      Renderer.apply(this, arguments);
    }
  }

  _inherits(CanvasRenderer, Renderer);

  _prototypeProperties(CanvasRenderer, {
    identifier: {
      /**
       * A unique string that identifies this renderer
       * @type {String}
       */

      get: function () {
        return "canvas";
      },
      configurable: true
    },
    isSupported: {

      /**
       * Checks whether this type of renderer is supported in the current environment
       * @abstract
       * @returns {boolean}
       */

      value: function isSupported() {
        var elem = this.prototype.createCanvas();
        return !!(elem.getContext && elem.getContext("2d"));
      },
      writable: true,
      configurable: true
    }
  }, {
    cache: {

      /**
       * Caches the current canvas content for the given identifier
       * @param {String} identifier
       */

      value: function cache(identifier) {
        this._cache[identifier] = {
          data: this._context.getImageData(0, 0, this._canvas.width, this._canvas.height),
          size: new Vector2(this._canvas.width, this._canvas.height)
        };
      },
      writable: true,
      configurable: true
    },
    drawCached: {

      /**
       * Draws the stored texture / image data for the given identifier
       * @param {String} identifier
       */

      value: function drawCached(identifier) {
        var _cache$identifier = this._cache[identifier];
        var data = _cache$identifier.data;
        var size = _cache$identifier.size;

        this._canvas.width = size.x;
        this._canvas.height = size.y;
        this._context.putImageData(data, 0, 0);
      },
      writable: true,
      configurable: true
    },
    _getContext: {

      /**
       * Gets the rendering context from the Canva
       * @return {RenderingContext}
       * @abstract
       */

      value: function _getContext() {
        /* istanbul ignore next */
        return this._canvas.getContext("2d");
      },
      writable: true,
      configurable: true
    },
    drawImage: {

      /**
       * Draws the given image on the canvas
       * @param  {Image} image
       */

      value: function drawImage(image) {
        this._context.drawImage(image, 0, 0, image.width, image.height, 0, 0, this._canvas.width, this._canvas.height);
      },
      writable: true,
      configurable: true
    },
    resizeTo: {

      /**
       * Resizes the current canvas picture to the given dimensions
       * @param  {Vector2} dimensions
       * @return {Promise}
       */

      value: function resizeTo(dimensions) {
        // Create a temporary canvas to draw to
        var newCanvas = this.createCanvas();
        newCanvas.width = dimensions.x;
        newCanvas.height = dimensions.y;
        var newContext = newCanvas.getContext("2d");

        // Draw the source canvas onto the new one
        newContext.drawImage(this._canvas, 0, 0, this._canvas.width, this._canvas.height, 0, 0, newCanvas.width, newCanvas.height);

        // Set the new canvas and context
        this.setCanvas(newCanvas);
      },
      writable: true,
      configurable: true
    },
    cloneCanvas: {

      /**
       * Returns a cloned version of the current canvas
       * @return {Canvas}
       */

      value: function cloneCanvas() {
        var canvas = this.createCanvas();
        var context = canvas.getContext("2d");

        // Resize the canvas
        canvas.width = this._canvas.width;
        canvas.height = this._canvas.height;

        // Draw the current canvas on the new one
        context.drawImage(this._canvas, 0, 0);

        return canvas;
      },
      writable: true,
      configurable: true
    }
  });

  return CanvasRenderer;
})(Renderer);

module.exports = CanvasRenderer;

},{"../lib/math/vector2":"/Users/sash/development/js/imglykit-rewrite/src/js/lib/math/vector2.js","./renderer":"/Users/sash/development/js/imglykit-rewrite/src/js/renderers/renderer.js"}],"/Users/sash/development/js/imglykit-rewrite/src/js/renderers/renderer.js":[function(require,module,exports){
"use strict";

var _interopRequire = function (obj) { return obj && obj.__esModule ? obj["default"] : obj; };

var _prototypeProperties = function (child, staticProps, instanceProps) { if (staticProps) Object.defineProperties(child, staticProps); if (instanceProps) Object.defineProperties(child.prototype, instanceProps); };

var _get = function get(object, property, receiver) { var desc = Object.getOwnPropertyDescriptor(object, property); if (desc === undefined) { var parent = Object.getPrototypeOf(object); if (parent === null) { return undefined; } else { return get(parent, property, receiver); } } else if ("value" in desc && desc.writable) { return desc.value; } else { var getter = desc.get; if (getter === undefined) { return undefined; } return getter.call(receiver); } };

var _inherits = function (subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) subClass.__proto__ = superClass; };

var _classCallCheck = function (instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } };

/*!
 * Copyright (c) 2013-2015 9elements GmbH
 *
 * Released under Attribution-NonCommercial 3.0 Unported
 * http://creativecommons.org/licenses/by-nc/3.0/
 *
 * For commercial use, please contact us at contact@9elements.com
 */

var Vector2 = _interopRequire(require("../lib/math/vector2"));

var EventEmitter = _interopRequire(require("../lib/event-emitter"));

/**
 * @class
 * @alias ImglyKit.Renderer
 * @param {Vector2} dimensions
 * @private
 */

var Renderer = (function (EventEmitter) {
  function Renderer(dimensions, canvas) {
    _classCallCheck(this, Renderer);

    _get(Object.getPrototypeOf(Renderer.prototype), "constructor", this).call(this);

    /**
     * @type {Canvas}
     * @private
     */
    this._canvas = canvas || this.createCanvas();

    if (!canvas) {
      this.setSize(dimensions);
    }

    /**
     * @type {RenderingContext}
     * @private
     */
    this._context = this._getContext();

    /**
     * The texture / image data cache
     * @type {Object.<String, *>}
     */
    this._cache = {};
  }

  _inherits(Renderer, EventEmitter);

  _prototypeProperties(Renderer, {
    isSupported: {

      /**
       * Checks whether this type of renderer is supported in the current environment
       * @abstract
       * @returns {boolean}
       */

      value: function isSupported() {
        /* istanbul ignore next */
        throw new Error("Renderer#isSupported is abstract and not implemented in inherited class.");
      },
      writable: true,
      configurable: true
    }
  }, {
    identifier: {

      /**
       * A unique string that identifies this renderer
       * @type {String}
       */

      get: function () {
        return null;
      },
      configurable: true
    },
    cache: {

      /**
       * Caches the current canvas content for the given identifier
       * @param {String} identifier
       */

      value: function cache(identifier) {},
      writable: true,
      configurable: true
    },
    drawCached: {

      /**
       * Draws the stored texture / image data for the given identifier
       * @param {String} identifier
       */

      value: function drawCached(identifier) {},
      writable: true,
      configurable: true
    },
    createCanvas: {

      /**
       * Creates a new canvas
       * @param {Number} [width]
       * @param {Number} [height]
       * @return {Canvas}
       * @private
       */

      value: function createCanvas(width, height) {
        var isBrowser = typeof window !== "undefined";
        var canvas;
        if (isBrowser) {
          /* istanbul ignore next */
          canvas = document.createElement("canvas");
        } else {
          var Canvas = require("canvas");
          canvas = new Canvas();
        }

        // Apply width
        if (typeof width !== "undefined") {
          canvas.width = width;
        }

        // Apply height
        if (typeof height !== "undefined") {
          canvas.height = height;
        }

        return canvas;
      },
      writable: true,
      configurable: true
    },
    getSize: {

      /**
       * Returns the current size of the canvas
       * @return {Vector2}
       */

      value: function getSize() {
        return new Vector2(this._canvas.width, this._canvas.height);
      },
      writable: true,
      configurable: true
    },
    setSize: {

      /**
       * Sets the canvas dimensions
       * @param {Vector2} dimensions
       */

      value: function setSize(dimensions) {
        this._canvas.width = dimensions.x;
        this._canvas.height = dimensions.y;
      },
      writable: true,
      configurable: true
    },
    _getContext: {

      /**
       * Gets the rendering context from the Canva
       * @return {RenderingContext}
       * @abstract
       */

      value: function _getContext() {
        /* istanbul ignore next */
        throw new Error("Renderer#_getContext is abstract and not implemented in inherited class.");
      },
      writable: true,
      configurable: true
    },
    resizeTo: {

      /**
       * Resizes the current canvas picture to the given dimensions
       * @param  {Vector2} dimensions
       * @return {Promise}
       * @abstract
       */

      value: function resizeTo(dimensions) {
        /* istanbul ignore next */
        throw new Error("Renderer#resizeTo is abstract and not implemented in inherited class.");
      },
      writable: true,
      configurable: true
    },
    drawImage: {

      /**
       * Draws the given image on the canvas
       * @param  {Image} image
       * @abstract
       */

      value: function drawImage(image) {
        /* istanbul ignore next */
        throw new Error("Renderer#drawImage is abstract and not implemented in inherited class.");
      },
      writable: true,
      configurable: true
    },
    renderFinal: {

      /**
       * Gets called after the stack has been rendered
       * @param  {Image} image
       */

      value: function renderFinal() {},
      writable: true,
      configurable: true
    },
    getCanvas: {

      /**
       * Returns the canvas
       * @return {Canvas}
       */

      value: function getCanvas() {
        return this._canvas;
      },
      writable: true,
      configurable: true
    },
    getContext: {

      /**
       * Returns the context
       * @return {RenderingContext}
       */

      value: function getContext() {
        return this._context;
      },
      writable: true,
      configurable: true
    },
    setCanvas: {

      /**
       * Sets the current canvas to the given one
       * @param {Canvas} canvas
       */

      value: function setCanvas(canvas) {
        this._canvas = canvas;
        this._context = this._getContext();

        this.emit("new-canvas", this._canvas);
      },
      writable: true,
      configurable: true
    },
    setContext: {

      /**
       * Sets the current context to the given one
       * @param {RenderingContext2D} context
       */

      value: function setContext(context) {
        this._context = context;
      },
      writable: true,
      configurable: true
    },
    reset: {

      /**
       * Resets the renderer
       */

      value: function reset() {},
      writable: true,
      configurable: true
    }
  });

  return Renderer;
})(EventEmitter);

module.exports = Renderer;
/*jshint unused:false */

},{"../lib/event-emitter":"/Users/sash/development/js/imglykit-rewrite/src/js/lib/event-emitter.js","../lib/math/vector2":"/Users/sash/development/js/imglykit-rewrite/src/js/lib/math/vector2.js","canvas":"canvas"}],"/Users/sash/development/js/imglykit-rewrite/src/js/renderers/webgl-renderer.js":[function(require,module,exports){
"use strict";

var _interopRequire = function (obj) { return obj && obj.__esModule ? obj["default"] : obj; };

var _prototypeProperties = function (child, staticProps, instanceProps) { if (staticProps) Object.defineProperties(child, staticProps); if (instanceProps) Object.defineProperties(child.prototype, instanceProps); };

var _get = function get(object, property, receiver) { var desc = Object.getOwnPropertyDescriptor(object, property); if (desc === undefined) { var parent = Object.getPrototypeOf(object); if (parent === null) { return undefined; } else { return get(parent, property, receiver); } } else if ("value" in desc && desc.writable) { return desc.value; } else { var getter = desc.get; if (getter === undefined) { return undefined; } return getter.call(receiver); } };

var _inherits = function (subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) subClass.__proto__ = superClass; };

var _classCallCheck = function (instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } };

/*!
 * Copyright (c) 2013-2015 9elements GmbH
 *
 * Released under Attribution-NonCommercial 3.0 Unported
 * http://creativecommons.org/licenses/by-nc/3.0/
 *
 * For commercial use, please contact us at contact@9elements.com
 */

var Renderer = _interopRequire(require("./renderer"));

var Symbol = _interopRequire(require("es6-symbol"));

var Vector2 = _interopRequire(require("../lib/math/vector2"));

/**
 * @class
 * @alias ImglyKit.WebGLRenderer
 * @extends {ImglyKit.Renderer}
 * @private
 */

var WebGLRenderer = (function (Renderer) {
  function WebGLRenderer() {
    for (var _len = arguments.length, args = Array(_len), _key = 0; _key < _len; _key++) {
      args[_key] = arguments[_key];
    }

    _classCallCheck(this, WebGLRenderer);

    _get(Object.getPrototypeOf(WebGLRenderer.prototype), "constructor", this).apply(this, args);

    this._defaultProgram = this.setupGLSLProgram();
    this.reset();
  }

  _inherits(WebGLRenderer, Renderer);

  _prototypeProperties(WebGLRenderer, {
    isSupported: {

      /**
       * Checks whether this type of renderer is supported in the current environment
       * @abstract
       * @returns {boolean}
       */

      value: function isSupported() {
        return !!(typeof window !== "undefined" && window.WebGLRenderingContext);
      },
      writable: true,
      configurable: true
    }
  }, {
    identifier: {

      /**
       * A unique string that identifies this renderer
       * @type {String}
       */

      get: function () {
        return "webgl";
      },
      configurable: true
    },
    cache: {

      /**
       * Caches the current canvas content for the given identifier
       * @param {String} identifier
       */

      value: function cache(identifier) {
        var size = new Vector2(this._canvas.width, this._canvas.height);

        // Re-use FBO and textures
        var fbo = undefined,
            texture = undefined,
            cacheObject = undefined;
        if (!this._cache[identifier]) {
          cacheObject = this._createFramebuffer();
        } else {
          cacheObject = this._cache[identifier];
        }

        // Extract FBO and texture
        fbo = cacheObject.fbo;
        texture = cacheObject.texture;

        // Resize output texture
        var gl = this._context;
        gl.useProgram(this._defaultProgram);

        // Resize cached texture
        gl.bindTexture(gl.TEXTURE_2D, texture);
        gl.texImage2D(gl.TEXTURE_2D, 0, gl.RGBA, size.x, size.y, 0, gl.RGBA, gl.UNSIGNED_BYTE, null);

        // Render to FBO
        gl.bindFramebuffer(gl.FRAMEBUFFER, fbo);
        gl.viewport(0, 0, size.x, size.y);

        // Use last fbo texture as input
        gl.bindTexture(gl.TEXTURE_2D, this._lastTexture);

        gl.drawArrays(gl.TRIANGLES, 0, 6);

        this._cache[identifier] = { fbo: fbo, texture: texture, size: size };
      },
      writable: true,
      configurable: true
    },
    _drawCachedFinal: {

      /**
       * Debugging method to draw a cached texture to the canvas instead
       * to an FBO
       * @private
       */

      value: function _drawCachedFinal(identifier) {
        var _cache$identifier = this._cache[identifier];
        var texture = _cache$identifier.texture;
        var size = _cache$identifier.size;

        var gl = this._context;
        gl.useProgram(this._defaultProgram);
        gl.bindFramebuffer(gl.FRAMEBUFFER, null);

        // Use the cached texture as input
        gl.bindTexture(gl.TEXTURE_2D, texture);

        // Resize the canvas
        this._canvas.width = size.x;
        this._canvas.height = size.y;

        gl.viewport(0, 0, size.x, size.y);

        // Draw the rectangle
        gl.drawArrays(gl.TRIANGLES, 0, 6);
      },
      writable: true,
      configurable: true
    },
    drawCached: {

      /**
       * Draws the stored texture / image data for the given identifier
       * @param {String} identifier
       */

      value: function drawCached(identifier) {
        var _cache$identifier = this._cache[identifier];
        var texture = _cache$identifier.texture;
        var size = _cache$identifier.size;

        var fbo = this.getCurrentFramebuffer();
        var currentTexture = this.getCurrentTexture();

        var gl = this._context;
        gl.useProgram(this._defaultProgram);

        // Resize the canvas
        this._canvas.width = size.x;
        this._canvas.height = size.y;

        // Resize all textures
        var _iteratorNormalCompletion = true;
        var _didIteratorError = false;
        var _iteratorError = undefined;

        try {
          for (var _iterator = this._textures[Symbol.iterator](), _step; !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = true) {
            var otherTexture = _step.value;

            gl.bindTexture(gl.TEXTURE_2D, otherTexture);
            gl.texImage2D(gl.TEXTURE_2D, 0, gl.RGBA, size.x, size.y, 0, gl.RGBA, gl.UNSIGNED_BYTE, null);
          }
        } catch (err) {
          _didIteratorError = true;
          _iteratorError = err;
        } finally {
          try {
            if (!_iteratorNormalCompletion && _iterator["return"]) {
              _iterator["return"]();
            }
          } finally {
            if (_didIteratorError) {
              throw _iteratorError;
            }
          }
        }

        // Select the current framebuffer to draw to
        gl.bindFramebuffer(gl.FRAMEBUFFER, fbo);

        // Resize the texture we're drawing to
        gl.bindTexture(gl.TEXTURE_2D, currentTexture);
        gl.texImage2D(gl.TEXTURE_2D, 0, gl.RGBA, size.x, size.y, 0, gl.RGBA, gl.UNSIGNED_BYTE, null);

        // Use the cached texture as input
        gl.bindTexture(gl.TEXTURE_2D, texture);

        gl.viewport(0, 0, size.x, size.y);

        // Draw the rectangle
        gl.drawArrays(gl.TRIANGLES, 0, 6);

        this.setLastTexture(currentTexture);
        this.selectNextBuffer();
      },
      writable: true,
      configurable: true
    },
    defaultVertexShader: {

      /**
       * The default vertex shader which just passes the texCoord to the
       * fragment shader.
       * @type {String}
       * @private
       */

      get: function () {
        var shader = "\n      attribute vec2 a_position;\n      attribute vec2 a_texCoord;\n      varying vec2 v_texCoord;\n\n      void main() {\n        gl_Position = vec4(a_position, 0, 1);\n        v_texCoord = a_texCoord;\n      }\n    ";
        return shader;
      },
      configurable: true
    },
    defaultFragmentShader: {

      /**
       * The default fragment shader which will just look up the colors from the
       * texture.
       * @type {String}
       * @private
       */

      get: function () {
        var shader = "\n      precision mediump float;\n      uniform sampler2D u_image;\n      varying vec2 v_texCoord;\n\n      void main() {\n        gl_FragColor = texture2D(u_image, v_texCoord);\n      }\n    ";
        return shader;
      },
      configurable: true
    },
    _getContext: {

      /**
       * Gets the rendering context from the Canvas
       * @return {RenderingContext}
       * @abstract
       */

      value: function _getContext() {
        /* istanbul ignore next */
        return this._canvas.getContext("webgl") || this._canvas.getContext("webgl-experimental");
      },
      writable: true,
      configurable: true
    },
    drawImage: {

      /**
       * Draws the given image on the canvas
       * @param  {Image} image
       */
      /* istanbul ignore next */

      value: function drawImage(image) {
        var gl = this._context;
        gl.useProgram(this._defaultProgram);

        // Create the texture
        var texture = this.createTexture();
        gl.pixelStorei(gl.UNPACK_FLIP_Y_WEBGL, true);
        this._inputTexture = texture;
        this.setLastTexture(texture);

        // Upload the image into the texture
        gl.texImage2D(gl.TEXTURE_2D, 0, gl.RGBA, gl.RGBA, gl.UNSIGNED_BYTE, image);

        // Draw the rectangle
        gl.drawArrays(gl.TRIANGLES, 0, 6);
      },
      writable: true,
      configurable: true
    },
    runShader: {

      /**
       * Runs the given shader
       * @param  {String} [vertexShader]
       * @param  {String} [fragmentShader]
       */
      /* istanbul ignore next */

      value: function runShader(vertexShader, fragmentShader, options) {
        if (typeof options === "undefined") options = {};
        if (typeof options.uniforms === "undefined") options.uniforms = {};

        var gl = this._context;
        var program = this.setupGLSLProgram(vertexShader, fragmentShader);
        gl.useProgram(program);

        var fbo = this.getCurrentFramebuffer();
        var currentTexture = this.getCurrentTexture();

        // Select the current framebuffer
        gl.bindFramebuffer(gl.FRAMEBUFFER, fbo);
        gl.viewport(0, 0, this._canvas.width, this._canvas.height);

        // Resize the texture to canvas size
        gl.bindTexture(gl.TEXTURE_2D, currentTexture);
        gl.texImage2D(gl.TEXTURE_2D, 0, gl.RGBA, this._canvas.width, this._canvas.height, 0, gl.RGBA, gl.UNSIGNED_BYTE, null);

        // Make sure we select the current texture
        gl.bindTexture(gl.TEXTURE_2D, this._lastTexture);

        // Set the uniforms
        for (var name in options.uniforms) {
          var location = gl.getUniformLocation(program, name);
          var uniform = options.uniforms[name];

          switch (uniform.type) {
            case "i":
            case "1i":
              gl.uniform1i(location, uniform.value);
              break;
            case "f":
            case "1f":
              gl.uniform1f(location, uniform.value);
              break;
            case "2f":
              gl.uniform2f(location, uniform.value[0], uniform.value[1]);
              break;
            case "3f":
              gl.uniform3f(location, uniform.value[0], uniform.value[1], uniform.value[2]);
              break;
            case "4f":
              gl.uniform4f(location, uniform.value[0], uniform.value[1], uniform.value[2], uniform.value[3]);
              break;
            case "2fv":
              gl.uniform2fv(location, uniform.value);
              break;
            case "mat3fv":
              gl.uniformMatrix3fv(location, false, uniform.value);
              break;
            default:
              throw new Error("Unknown uniform type: " + uniform.type);
          }
        }

        // Draw the rectangle
        gl.drawArrays(gl.TRIANGLES, 0, 6);

        this.setLastTexture(currentTexture);
        this.selectNextBuffer();
      },
      writable: true,
      configurable: true
    },
    renderFinal: {

      /**
       * Draws the last used buffer onto the canvas
       */
      /* istanbul ignore next */

      value: function renderFinal() {
        var gl = this._context;
        var program = this._defaultProgram;
        gl.useProgram(program);

        // Don't draw to framebuffer
        gl.bindFramebuffer(gl.FRAMEBUFFER, null);

        // Make sure the viewport size is correct
        gl.viewport(0, 0, this._canvas.width, this._canvas.height);

        // Select the last texture that has been rendered to
        gl.bindTexture(gl.TEXTURE_2D, this._lastTexture);

        // Draw the rectangle
        gl.drawArrays(gl.TRIANGLES, 0, 6);
      },
      writable: true,
      configurable: true
    },
    setupGLSLProgram: {

      /**
       * Sets up a GLSL program. Uses the default vertex and fragment shader
       * if none are given.
       * @param {String} [vertexShader]
       * @param {String} [fragmentShader]
       * @return {WebGLProgram}
       */
      /* istanbul ignore next */

      value: function setupGLSLProgram(vertexShader, fragmentShader) {
        var gl = this._context;
        var shaders = [];

        // Use default vertex shader
        vertexShader = this._createShader(gl.VERTEX_SHADER, vertexShader || WebGLRenderer.prototype.defaultVertexShader);
        shaders.push(vertexShader);

        // Use default fragment shader
        fragmentShader = this._createShader(gl.FRAGMENT_SHADER, fragmentShader || WebGLRenderer.prototype.defaultFragmentShader);
        shaders.push(fragmentShader);

        // Create the program
        var program = gl.createProgram();

        // Attach the shaders
        for (var i = 0; i < shaders.length; i++) {
          gl.attachShader(program, shaders[i]);
        }

        // Link the program
        gl.linkProgram(program);

        // Check linking status
        var linked = gl.getProgramParameter(program, gl.LINK_STATUS);
        if (!linked) {
          var lastError = gl.getProgramInfoLog(program);
          gl.deleteProgram(program);
          throw new Error("WebGL program linking error: " + lastError);
        }

        // Lookup texture coordinates location
        var positionLocation = gl.getAttribLocation(program, "a_position");
        var texCoordLocation = gl.getAttribLocation(program, "a_texCoord");

        // Provide texture coordinates
        var texCoordBuffer = gl.createBuffer();
        gl.bindBuffer(gl.ARRAY_BUFFER, texCoordBuffer);
        gl.bufferData(gl.ARRAY_BUFFER, new Float32Array([
        // First triangle
        0, 0, 1, 0, 0, 1,

        // Second triangle
        0, 1, 1, 0, 1, 1]), gl.STATIC_DRAW);
        gl.enableVertexAttribArray(texCoordLocation);
        gl.vertexAttribPointer(texCoordLocation, 2, gl.FLOAT, false, 0, 0);

        // Create a buffer for the rectangle positions
        var buffer = gl.createBuffer();
        gl.bindBuffer(gl.ARRAY_BUFFER, buffer);
        gl.enableVertexAttribArray(positionLocation);
        gl.vertexAttribPointer(positionLocation, 2, gl.FLOAT, false, 0, 0);
        gl.bufferData(gl.ARRAY_BUFFER, new Float32Array([
        // First triangle
        -1, -1, 1, -1, -1, 1,

        // Second triangle
        -1, 1, 1, -1, 1, 1]), gl.STATIC_DRAW);

        return program;
      },
      writable: true,
      configurable: true
    },
    _createShader: {

      /**
       * Creates a WebGL shader with the given type and source code
       * @param  {WebGLShaderType} shaderType
       * @param  {String} shaderSource
       * @return {WebGLShader}
       * @private
       */
      /* istanbul ignore next */

      value: function _createShader(shaderType, shaderSource) {
        var gl = this._context;

        // Create the shader and compile it
        var shader = gl.createShader(shaderType);
        gl.shaderSource(shader, shaderSource);
        gl.compileShader(shader);

        // Check compilation status
        var compiled = gl.getShaderParameter(shader, gl.COMPILE_STATUS);
        if (!compiled) {
          var lastError = gl.getShaderInfoLog(shader);
          gl.deleteShader(shader);
          throw new Error("WebGL shader compilation error: " + lastError);
        }

        return shader;
      },
      writable: true,
      configurable: true
    },
    createTexture: {

      /**
       * Creates an empty texture
       * @return {WebGLTexture}
       */
      /* istanbul ignore next */

      value: function createTexture() {
        var gl = this._context;
        var texture = gl.createTexture();

        gl.bindTexture(gl.TEXTURE_2D, texture);

        gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_S, gl.CLAMP_TO_EDGE);
        gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_T, gl.CLAMP_TO_EDGE);
        gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MIN_FILTER, gl.NEAREST);
        gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MAG_FILTER, gl.NEAREST);

        return texture;
      },
      writable: true,
      configurable: true
    },
    _createFramebuffers: {

      /**
       * Creates two textures and framebuffers that are used for the stack
       * rendering
       * @private
       */
      /* istanbul ignore next */

      value: function _createFramebuffers() {
        for (var i = 0; i < 2; i++) {
          var _createFramebuffer = this._createFramebuffer();

          var fbo = _createFramebuffer.fbo;
          var texture = _createFramebuffer.texture;

          this._textures.push(texture);
          this._framebuffers.push(fbo);
        }
      },
      writable: true,
      configurable: true
    },
    _createFramebuffer: {

      /**
       * Creates and returns a frame buffer and texture
       * @return {Object}
       * @private
       */

      value: function _createFramebuffer() {
        var gl = this._context;

        // Create texture
        var texture = this.createTexture();
        gl.texImage2D(gl.TEXTURE_2D, 0, gl.RGBA, this._canvas.width, this._canvas.height, 0, gl.RGBA, gl.UNSIGNED_BYTE, null);

        // Create framebuffer
        var fbo = gl.createFramebuffer();
        gl.bindFramebuffer(gl.FRAMEBUFFER, fbo);

        // Attach the texture
        gl.framebufferTexture2D(gl.FRAMEBUFFER, gl.COLOR_ATTACHMENT0, gl.TEXTURE_2D, texture, 0);

        return { fbo: fbo, texture: texture };
      },
      writable: true,
      configurable: true
    },
    resizeTo: {

      /**
       * Resizes the current canvas picture to the given dimensions
       * @param  {Vector2} dimensions
       * @todo Use a downsampling shader for smoother image resizing
       */
      /* istanbul ignore next */

      value: function resizeTo(dimensions) {
        var gl = this._context;

        // Resize the canvas
        this._canvas.width = dimensions.x;
        this._canvas.height = dimensions.y;

        // Update the viewport dimensions
        gl.viewport(0, 0, this._canvas.width, this._canvas.height);

        // Draw the rectangle
        gl.drawArrays(gl.TRIANGLES, 0, 6);
      },
      writable: true,
      configurable: true
    },
    getCurrentFramebuffer: {

      /**
       * Returns the current framebuffer
       * @return {WebGLFramebuffer}
       */

      value: function getCurrentFramebuffer() {
        return this._framebuffers[this._bufferIndex % 2];
      },
      writable: true,
      configurable: true
    },
    getCurrentTexture: {

      /**
       * Returns the current texture
       * @return {WebGLTexture}
       */

      value: function getCurrentTexture() {
        return this._textures[this._bufferIndex % 2];
      },
      writable: true,
      configurable: true
    },
    selectNextBuffer: {

      /**
       * Increases the buffer index
       */

      value: function selectNextBuffer() {
        this._bufferIndex++;
      },
      writable: true,
      configurable: true
    },
    getDefaultProgram: {

      /**
       * Returns the default program
       * @return {WebGLProgram}
       */

      value: function getDefaultProgram() {
        return this._defaultProgram;
      },
      writable: true,
      configurable: true
    },
    getLastTexture: {

      /**
       * Returns the last texture that has been drawn to
       * @return {WebGLTexture}
       */

      value: function getLastTexture() {
        return this._lastTexture;
      },
      writable: true,
      configurable: true
    },
    getTextures: {

      /**
       * Returns all textures
       * @return {Array.<WebGLTexture>}
       */

      value: function getTextures() {
        return this._textures;
      },
      writable: true,
      configurable: true
    },
    setLastTexture: {

      /**
       * Sets the last texture
       * @param {WebGLTexture} texture
       */

      value: function setLastTexture(texture) {
        this._lastTexture = texture;
      },
      writable: true,
      configurable: true
    },
    reset: {

      /**
       * Resets the renderer
       * @override
       */

      value: function reset() {
        this._lastTexture = null;
        this._textures = [];
        this._framebuffers = [];
        this._bufferIndex = 0;

        this._createFramebuffers();
        this.setLastTexture(this._inputTexture);
      },
      writable: true,
      configurable: true
    }
  });

  return WebGLRenderer;
})(Renderer);

module.exports = WebGLRenderer;

},{"../lib/math/vector2":"/Users/sash/development/js/imglykit-rewrite/src/js/lib/math/vector2.js","./renderer":"/Users/sash/development/js/imglykit-rewrite/src/js/renderers/renderer.js","es6-symbol":"/Users/sash/development/js/imglykit-rewrite/node_modules/es6-symbol/index.js"}],"/Users/sash/development/js/imglykit-rewrite/src/js/ui/base/helpers.js":[function(require,module,exports){
"use strict";

var _prototypeProperties = function (child, staticProps, instanceProps) { if (staticProps) Object.defineProperties(child, staticProps); if (instanceProps) Object.defineProperties(child.prototype, instanceProps); };

var _classCallCheck = function (instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } };

/*!
 * Copyright (c) 2013-2015 9elements GmbH
 *
 * Released under Attribution-NonCommercial 3.0 Unported
 * http://creativecommons.org/licenses/by-nc/3.0/
 *
 * For commercial use, please contact us at contact@9elements.com
 */

var Helpers = (function () {
  function Helpers(kit, ui, options) {
    _classCallCheck(this, Helpers);

    this._kit = kit;
    this._ui = ui;
    this._options = options;
  }

  _prototypeProperties(Helpers, null, {
    assetPath: {
      value: function assetPath(asset) {
        return this._options.assetsUrl + "/" + asset;
      },
      writable: true,
      configurable: true
    }
  });

  return Helpers;
})();

module.exports = Helpers;

},{}],"/Users/sash/development/js/imglykit-rewrite/src/js/ui/base/ui.js":[function(require,module,exports){
"use strict";

var _interopRequire = function (obj) { return obj && obj.__esModule ? obj["default"] : obj; };

var _prototypeProperties = function (child, staticProps, instanceProps) { if (staticProps) Object.defineProperties(child, staticProps); if (instanceProps) Object.defineProperties(child.prototype, instanceProps); };

var _classCallCheck = function (instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } };

/*!
 * Copyright (c) 2013-2015 9elements GmbH
 *
 * Released under Attribution-NonCommercial 3.0 Unported
 * http://creativecommons.org/licenses/by-nc/3.0/
 *
 * For commercial use, please contact us at contact@9elements.com
 */

var dot = _interopRequire(require("dot"));

var Utils = _interopRequire(require("../../lib/utils"));

var Helpers = _interopRequire(require("./helpers"));

var BaseUI = (function () {
  function BaseUI(kit, options) {
    _classCallCheck(this, BaseUI);

    this._kit = kit;
    this._options = options;
    this._operations = [];
    this._helpers = new Helpers(this.kit, this, options);
    this.selectOperations(null);
  }

  _prototypeProperties(BaseUI, null, {
    run: {

      /**
       * Prepares the UI for use
       */

      value: function run() {
        this._attach();
      },
      writable: true,
      configurable: true
    },
    _attach: {

      /**
       * Renders and attaches the UI HTML
       * @private
       */

      value: function _attach() {
        if (this._options.container === null) {
          throw new Error("BaseUI#attach: No container set.");
        }

        var html = this._render();
        this._options.container.innerHTML = html;

        // Container has to be position: relative
        this._options.container.style.position = "relative";
      },
      writable: true,
      configurable: true
    },
    _render: {

      /**
       * Renders the template
       * @private
       */

      value: function _render() {
        if (typeof this._template === "undefined") {
          throw new Error("BaseUI#_render: No template set.");
        }

        var renderFn = dot.template(this._template);
        return renderFn(this.context);
      },
      writable: true,
      configurable: true
    },
    selectOperations: {

      /**
       * Selects the enabled operations
       * @param {ImglyKit.Selector}
       */

      value: function selectOperations(selector) {
        var registeredOperations = this._kit.registeredOperations;

        var operationIdentifiers = Object.keys(registeredOperations);

        var selectedOperations = Utils.select(operationIdentifiers, selector);
        this._operations = selectedOperations.map(function (identifier) {
          return registeredOperations[identifier];
        });
      },
      writable: true,
      configurable: true
    },
    isOperationSelected: {

      /**
       * Checks whether the operation with the given identifier is selected
       * @param {String} identifier
       * @returns {Boolean}
       */

      value: function isOperationSelected(identifier) {
        var operationIdentifiers = this._operations.map(function (operation) {
          return operation.prototype.identifier;
        });
        return operationIdentifiers.indexOf(identifier) !== -1;
      },
      writable: true,
      configurable: true
    },
    context: {

      /**
       * The data that is passed to the template renderer
       * @type {Object}
       */

      get: function () {
        return {
          operations: this._operations,
          helpers: this._helpers
        };
      },
      configurable: true
    },
    container: {

      /**
       * The DOM container
       * @type {DOMElement}
       */

      get: function () {
        return this._options.container;
      },
      configurable: true
    },
    operations: {

      /**
       * The selected / active operations
       * @type {Array.<ImglyKit.Operation>}
       */

      get: function () {
        return this._operations;
      },
      configurable: true
    },
    options: {

      /**
       * The options
       * @type {Object}
       */

      get: function () {
        return this._options;
      },
      configurable: true
    },
    canvas: {

      /**
       * The canvas object
       * @type {Canvas}
       */

      get: function () {
        return this._canvas;
      },
      configurable: true
    },
    helpers: {

      /**
       * The helpers
       * @type {Helpers}
       */

      get: function () {
        return this._helpers;
      },
      configurable: true
    },
    image: {

      /**
       * The image
       * @type {Image}
       */

      get: function () {
        return this._options.image;
      },
      configurable: true
    }
  });

  return BaseUI;
})();

module.exports = BaseUI;

},{"../../lib/utils":"/Users/sash/development/js/imglykit-rewrite/src/js/lib/utils.js","./helpers":"/Users/sash/development/js/imglykit-rewrite/src/js/ui/base/helpers.js","dot":"/Users/sash/development/js/imglykit-rewrite/node_modules/dot/index.js"}],"/Users/sash/development/js/imglykit-rewrite/src/js/ui/night/controls/brightness.js":[function(require,module,exports){
"use strict";

var _interopRequire = function (obj) { return obj && obj.__esModule ? obj["default"] : obj; };

var _prototypeProperties = function (child, staticProps, instanceProps) { if (staticProps) Object.defineProperties(child, staticProps); if (instanceProps) Object.defineProperties(child.prototype, instanceProps); };

var _get = function get(object, property, receiver) { var desc = Object.getOwnPropertyDescriptor(object, property); if (desc === undefined) { var parent = Object.getPrototypeOf(object); if (parent === null) { return undefined; } else { return get(parent, property, receiver); } } else if ("value" in desc && desc.writable) { return desc.value; } else { var getter = desc.get; if (getter === undefined) { return undefined; } return getter.call(receiver); } };

var _inherits = function (subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) subClass.__proto__ = superClass; };

var _classCallCheck = function (instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } };

/*!
 * Copyright (c) 2013-2015 9elements GmbH
 *
 * Released under Attribution-NonCommercial 3.0 Unported
 * http://creativecommons.org/licenses/by-nc/3.0/
 *
 * For commercial use, please contact us at contact@9elements.com
 */

var Control = _interopRequire(require("./control"));

var Slider = _interopRequire(require("../lib/slider"));



var BrightnessControls = (function (Control) {
  function BrightnessControls() {
    _classCallCheck(this, BrightnessControls);

    if (Control != null) {
      Control.apply(this, arguments);
    }
  }

  _inherits(BrightnessControls, Control);

  _prototypeProperties(BrightnessControls, null, {
    identifier: {
      /**
       * A unique string that identifies this control.
       * @type {String}
       */

      get: function () {
        return "brightness";
      },
      configurable: true
    },
    init: {

      /**
       * The entry point for this control
       */

      value: function init() {
        this._operation = this._ui.operations.brightness;

        var controlsTemplate = "<div class=\"imglykit-controls-filters\">\n  <div class=\"imglykit-controls-button imglykit-controls-back\">\n    <img src=\"{{=it.helpers.assetPath('ui/night/buttons/back.png') }}\" />\n  </div>\n\n  <div>\n    {{#def.slider}}\n  </div>\n\n  <div class=\"imglykit-controls-button imglykit-controls-done\">\n    <img src=\"{{=it.helpers.assetPath('ui/night/buttons/done.png') }}\" />\n  </div>\n</div>\n";
        this._controlsTemplate = controlsTemplate;
        this._partialTemplates.push(Slider.template);
      },
      writable: true,
      configurable: true
    },
    _onEnter: {

      /**
       * Gets called when this control is activated
       * @override
       */

      value: function _onEnter() {
        _get(Object.getPrototypeOf(BrightnessControls.prototype), "_onEnter", this).call(this);

        var sliderElement = this._controls.querySelector(".imglykit-slider");
        this._slider = new Slider(sliderElement, {
          minValue: -1,
          maxValue: 1
        });
        this._slider.on("update", this._onUpdate.bind(this));

        // Initially set value
        var brightness = this._operation.getBrightness();
        this._initialBrightness = brightness;
        this._slider.setValue(brightness);

        this._initialIdentity = this._operation.isIdentity;
      },
      writable: true,
      configurable: true
    },
    _onBack: {

      /**
       * Gets called when the back button has been clicked
       * @override
       */

      value: function _onBack() {
        _get(Object.getPrototypeOf(BrightnessControls.prototype), "_onBack", this).call(this);
        this._operation.setBrightness(this._initialBrightness);
        this._ui.canvas.render();
      },
      writable: true,
      configurable: true
    },
    _onUpdate: {

      /**
       * Gets called when the value has been updated
       * @override
       */

      value: function _onUpdate(value) {
        this._operation.setBrightness(value);
        this._ui.canvas.render();
      },
      writable: true,
      configurable: true
    },
    _onDone: {

      /**
       * Gets called when the done button has been clicked
       * @override
       */

      value: function _onDone() {
        this._ui.addHistory(this._operation, {
          brightness: this._initialBrightness
        }, this._initialIdentity);
      },
      writable: true,
      configurable: true
    }
  });

  return BrightnessControls;
})(Control);

module.exports = BrightnessControls;

},{"../lib/slider":"/Users/sash/development/js/imglykit-rewrite/src/js/ui/night/lib/slider.js","./control":"/Users/sash/development/js/imglykit-rewrite/src/js/ui/night/controls/control.js"}],"/Users/sash/development/js/imglykit-rewrite/src/js/ui/night/controls/contrast.js":[function(require,module,exports){
"use strict";

var _interopRequire = function (obj) { return obj && obj.__esModule ? obj["default"] : obj; };

var _prototypeProperties = function (child, staticProps, instanceProps) { if (staticProps) Object.defineProperties(child, staticProps); if (instanceProps) Object.defineProperties(child.prototype, instanceProps); };

var _get = function get(object, property, receiver) { var desc = Object.getOwnPropertyDescriptor(object, property); if (desc === undefined) { var parent = Object.getPrototypeOf(object); if (parent === null) { return undefined; } else { return get(parent, property, receiver); } } else if ("value" in desc && desc.writable) { return desc.value; } else { var getter = desc.get; if (getter === undefined) { return undefined; } return getter.call(receiver); } };

var _inherits = function (subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) subClass.__proto__ = superClass; };

var _classCallCheck = function (instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } };

/*!
 * Copyright (c) 2013-2015 9elements GmbH
 *
 * Released under Attribution-NonCommercial 3.0 Unported
 * http://creativecommons.org/licenses/by-nc/3.0/
 *
 * For commercial use, please contact us at contact@9elements.com
 */

var Control = _interopRequire(require("./control"));

var Slider = _interopRequire(require("../lib/slider"));



var ContrastControls = (function (Control) {
  function ContrastControls() {
    _classCallCheck(this, ContrastControls);

    if (Control != null) {
      Control.apply(this, arguments);
    }
  }

  _inherits(ContrastControls, Control);

  _prototypeProperties(ContrastControls, null, {
    identifier: {
      /**
       * A unique string that identifies this control.
       * @type {String}
       */

      get: function () {
        return "contrast";
      },
      configurable: true
    },
    init: {

      /**
       * Entry point for this control
       */

      value: function init() {
        this._operation = this._ui.operations.contrast;

        var controlsTemplate = "<div class=\"imglykit-controls-filters\">\n  <div class=\"imglykit-controls-button imglykit-controls-back\">\n    <img src=\"{{=it.helpers.assetPath('ui/night/buttons/back.png') }}\" />\n  </div>\n\n  <div>\n    {{#def.slider}}\n  </div>\n\n  <div class=\"imglykit-controls-button imglykit-controls-done\">\n    <img src=\"{{=it.helpers.assetPath('ui/night/buttons/done.png') }}\" />\n  </div>\n</div>\n";
        this._controlsTemplate = controlsTemplate;
        this._partialTemplates.push(Slider.template);
      },
      writable: true,
      configurable: true
    },
    _onEnter: {

      /**
       * Gets called when this control is activated
       * @override
       */

      value: function _onEnter() {
        _get(Object.getPrototypeOf(ContrastControls.prototype), "_onEnter", this).call(this);

        var sliderElement = this._controls.querySelector(".imglykit-slider");
        this._slider = new Slider(sliderElement, {
          minValue: 0,
          maxValue: 2
        });
        this._slider.on("update", this._onUpdate.bind(this));

        // Initially set value
        var contrast = this._operation.getContrast();
        this._initialContrast = contrast;
        this._slider.setValue(contrast);

        this._initialIdentity = this._operation.isIdentity;
      },
      writable: true,
      configurable: true
    },
    _onBack: {

      /**
       * Gets called when the back button has been clicked
       * @override
       */

      value: function _onBack() {
        _get(Object.getPrototypeOf(ContrastControls.prototype), "_onBack", this).call(this);
        this._operation.setContrast(this._initialContrast);
        this._ui.canvas.render();
      },
      writable: true,
      configurable: true
    },
    _onUpdate: {

      /**
       * Gets called when the value has been updated
       * @override
       */

      value: function _onUpdate(value) {
        this._operation.setContrast(value);
        this._ui.canvas.render();
      },
      writable: true,
      configurable: true
    },
    _onDone: {

      /**
       * Gets called when the done button has been clicked
       * @override
       */

      value: function _onDone() {
        this._ui.addHistory(this._operation, {
          contrast: this._initialContrast
        }, this._initialIdentity);
      },
      writable: true,
      configurable: true
    }
  });

  return ContrastControls;
})(Control);

module.exports = ContrastControls;

},{"../lib/slider":"/Users/sash/development/js/imglykit-rewrite/src/js/ui/night/lib/slider.js","./control":"/Users/sash/development/js/imglykit-rewrite/src/js/ui/night/controls/control.js"}],"/Users/sash/development/js/imglykit-rewrite/src/js/ui/night/controls/control.js":[function(require,module,exports){
"use strict";

var _interopRequire = function (obj) { return obj && obj.__esModule ? obj["default"] : obj; };

var _prototypeProperties = function (child, staticProps, instanceProps) { if (staticProps) Object.defineProperties(child, staticProps); if (instanceProps) Object.defineProperties(child.prototype, instanceProps); };

var _get = function get(object, property, receiver) { var desc = Object.getOwnPropertyDescriptor(object, property); if (desc === undefined) { var parent = Object.getPrototypeOf(object); if (parent === null) { return undefined; } else { return get(parent, property, receiver); } } else if ("value" in desc && desc.writable) { return desc.value; } else { var getter = desc.get; if (getter === undefined) { return undefined; } return getter.call(receiver); } };

var _inherits = function (subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) subClass.__proto__ = superClass; };

var _classCallCheck = function (instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } };

/*!
 * Copyright (c) 2013-2015 9elements GmbH
 *
 * Released under Attribution-NonCommercial 3.0 Unported
 * http://creativecommons.org/licenses/by-nc/3.0/
 *
 * For commercial use, please contact us at contact@9elements.com
 */

var dot = _interopRequire(require("dot"));

var Helpers = _interopRequire(require("../../base/helpers"));

var EventEmitter = _interopRequire(require("../../../lib/event-emitter"));

var Control = (function (EventEmitter) {
  function Control(kit, ui, operation) {
    _classCallCheck(this, Control);

    _get(Object.getPrototypeOf(Control.prototype), "constructor", this).call(this);

    this._kit = kit;
    this._ui = ui;
    this._operation = operation;
    this._helpers = new Helpers(this._kit, this._ui, this._ui.options);
    this._partialTemplates = [];
    this._active = false;

    this.init();
  }

  _inherits(Control, EventEmitter);

  _prototypeProperties(Control, null, {
    identifier: {

      /**
       * A unique string that identifies this control.
       * @type {String}
       */

      get: function () {
        return null;
      },
      configurable: true
    },
    setContainers: {

      /**
       * Sets the containers that the control will be rendered to
       * @param {DOMElement} controlsContainer
       * @param {DOMElement} canvasControlsContainer
       */

      value: function setContainers(controlsContainer, canvasControlsContainer) {
        this._controlsContainer = controlsContainer;
        this._canvasControlsContainer = canvasControlsContainer;
      },
      writable: true,
      configurable: true
    },
    init: {

      /**
       * The entry point for this control
       */

      value: function init() {},
      writable: true,
      configurable: true
    },
    _renderAllControls: {

      /**
       * Renders the controls
       * @private
       */

      value: function _renderAllControls() {
        this._renderControls();
        this._renderCanvasControls();
      },
      writable: true,
      configurable: true
    },
    _renderControls: {

      /**
       * Renders the controls
       * @private
       */

      value: function _renderControls() {
        if (typeof this._controlsTemplate === "undefined") {
          throw new Error("Control#_renderOverviewControls: Control needs to define this._controlsTemplate.");
        }

        var template = this._partialTemplates.concat([this._controlsTemplate]).join("\r\n");

        // Render the template
        var renderFn = dot.template(template);
        var html = renderFn(this.context);

        if (typeof this._controls !== "undefined" && this._controls.parentNode !== null) {
          this._controls.parentNode.removeChild(this._controls);
        }

        // Create a wrapper
        this._controls = document.createElement("div");
        this._controls.innerHTML = html;

        // Append to DOM
        this._controlsContainer.appendChild(this._controls);
      },
      writable: true,
      configurable: true
    },
    _renderCanvasControls: {

      /**
       * Renders the canvas controls
       * @private
       */

      value: function _renderCanvasControls() {
        if (typeof this._canvasControlsTemplate === "undefined") {
          return; // Canvas controls are optional
        }

        var template = this._partialTemplates.concat([this._canvasControlsTemplate]).join("\r\n");

        // Render the template
        var renderFn = dot.template(template);
        var html = renderFn(this.context);

        // Create a wrapper
        this._canvasControls = document.createElement("div");
        this._canvasControls.innerHTML = html;

        // Append to DOM
        this._canvasControlsContainer.appendChild(this._canvasControls);
      },
      writable: true,
      configurable: true
    },
    _removeControls: {

      /**
       * Removes the controls from the DOM
       * @private
       */

      value: function _removeControls() {
        this._controls.parentNode.removeChild(this._controls);
        if (this._canvasControls) {
          this._canvasControls.parentNode.removeChild(this._canvasControls);
        }
      },
      writable: true,
      configurable: true
    },
    _handleBackAndDoneButtons: {
      value: function _handleBackAndDoneButtons() {
        // Back button
        var backButton = this._controls.querySelector(".imglykit-controls-back");
        backButton.addEventListener("click", this._onBackButtonClick.bind(this));

        // Done button
        var doneButton = this._controls.querySelector(".imglykit-controls-done");
        doneButton.addEventListener("click", this._onDoneButtonClick.bind(this));
      },
      writable: true,
      configurable: true
    },
    _onBackButtonClick: {

      /**
       * Gets called when the back button has been clicked
       * @private
       */

      value: function _onBackButtonClick() {
        this._onBack();
        this.emit("back");
      },
      writable: true,
      configurable: true
    },
    _onDoneButtonClick: {

      /**
       * Gets called when the done button has been clicked
       * @private
       */

      value: function _onDoneButtonClick() {
        this._onDone();
        this.emit("back");
      },
      writable: true,
      configurable: true
    },
    enter: {

      /**
       * Gets called when this control is activated
       * @internal Used by the SDK, don't override.
       */

      value: function enter() {
        this._active = true;

        this._ui.hideZoom();

        this._renderAllControls();
        this._handleBackAndDoneButtons();
        this._enableCanvasControls();
        this._onEnter();
      },
      writable: true,
      configurable: true
    },
    leave: {

      /**
       * Gets called when this control is deactivated
       * @internal Used by the SDK, don't override.
       */

      value: function leave() {
        this._active = false;

        this._ui.showZoom();

        this._removeControls();
        this._disableCanvasControls();
        this._onLeave();
      },
      writable: true,
      configurable: true
    },
    _enableCanvasControls: {
      value: function _enableCanvasControls() {
        this._canvasControlsContainer.classList.remove("imglykit-canvas-controls-disabled");
      },
      writable: true,
      configurable: true
    },
    _disableCanvasControls: {
      value: function _disableCanvasControls() {
        this._canvasControlsContainer.classList.add("imglykit-canvas-controls-disabled");
      },
      writable: true,
      configurable: true
    },
    _onEnter: {

      // Protected methods

      /**
       * Gets called when this control is activated.
       * @protected
       */

      value: function _onEnter() {},
      writable: true,
      configurable: true
    },
    _onLeave: {

      /**
       * Gets called when this control is deactivated
       * @protected
       */

      value: function _onLeave() {},
      writable: true,
      configurable: true
    },
    _onBack: {

      /**
       * Gets called when the back button has been clicked
       * @protected
       */

      value: function _onBack() {},
      writable: true,
      configurable: true
    },
    _onDone: {

      /**
       * Gets called when the done button has been clicked
       * @protected
       */

      value: function _onDone() {},
      writable: true,
      configurable: true
    },
    onZoom: {

      /**
       * Gets called when the zoom level has been changed while
       * this control is active
       */

      value: function onZoom() {},
      writable: true,
      configurable: true
    },
    context: {

      /**
       * The data that is available to the template
       * @type {Object}
       */

      get: function () {
        return {
          helpers: this._helpers
        };
      },
      configurable: true
    }
  });

  return Control;
})(EventEmitter);

module.exports = Control;

},{"../../../lib/event-emitter":"/Users/sash/development/js/imglykit-rewrite/src/js/lib/event-emitter.js","../../base/helpers":"/Users/sash/development/js/imglykit-rewrite/src/js/ui/base/helpers.js","dot":"/Users/sash/development/js/imglykit-rewrite/node_modules/dot/index.js"}],"/Users/sash/development/js/imglykit-rewrite/src/js/ui/night/controls/crop.js":[function(require,module,exports){
"use strict";

var _interopRequire = function (obj) { return obj && obj.__esModule ? obj["default"] : obj; };

var _prototypeProperties = function (child, staticProps, instanceProps) { if (staticProps) Object.defineProperties(child, staticProps); if (instanceProps) Object.defineProperties(child.prototype, instanceProps); };

var _get = function get(object, property, receiver) { var desc = Object.getOwnPropertyDescriptor(object, property); if (desc === undefined) { var parent = Object.getPrototypeOf(object); if (parent === null) { return undefined; } else { return get(parent, property, receiver); } } else if ("value" in desc && desc.writable) { return desc.value; } else { var getter = desc.get; if (getter === undefined) { return undefined; } return getter.call(receiver); } };

var _inherits = function (subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) subClass.__proto__ = superClass; };

var _classCallCheck = function (instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } };

/*!
 * Copyright (c) 2013-2015 9elements GmbH
 *
 * Released under Attribution-NonCommercial 3.0 Unported
 * http://creativecommons.org/licenses/by-nc/3.0/
 *
 * For commercial use, please contact us at contact@9elements.com
 */

var Symbol = _interopRequire(require("es6-symbol"));

var Control = _interopRequire(require("./control"));

var Vector2 = _interopRequire(require("../../../lib/math/vector2"));

var Utils = _interopRequire(require("../../../lib/utils"));



var CropControls = (function (Control) {
  function CropControls() {
    _classCallCheck(this, CropControls);

    if (Control != null) {
      Control.apply(this, arguments);
    }
  }

  _inherits(CropControls, Control);

  _prototypeProperties(CropControls, null, {
    identifier: {
      /**
       * A unique string that identifies this control.
       * @type {String}
       */

      get: function () {
        return "crop";
      },
      configurable: true
    },
    init: {

      /**
       * Entry point for this control
       */

      value: function init() {
        this._availableRatios = {};
        this._ratios = {};
        this._operation = this._ui.operations.crop;

        var controlsTemplate = "<div class=\"imglykit-controls-rotation\">\n  <div class=\"imglykit-controls-button imglykit-controls-back\">\n    <img src=\"{{=it.helpers.assetPath('ui/night/buttons/back.png') }}\" />\n  </div>\n\n  <div>\n    <ul class=\"imglykit-controls-list imgly-controls-list-with-buttons\">\n      {{ for(var identifier in it.ratios) { }}\n        {{ var ratio = it.ratios[identifier]; }}\n        {{ var enabled = ratio.selected; }}\n        <li data-identifier=\"{{= identifier}}\" data-ratio=\"{{= ratio.ratio}}\"{{? enabled}} data-selected{{?}}>\n          <img src=\"{{=it.helpers.assetPath('ui/night/crop/' + identifier + '.png')}}\" />\n        </li>\n      {{ } }}\n    </ul>\n  </div>\n\n  <div class=\"imglykit-controls-button imglykit-controls-done\">\n    <img src=\"{{=it.helpers.assetPath('ui/night/buttons/done.png') }}\" />\n  </div>\n</div>\n";
        this._controlsTemplate = controlsTemplate;

        var canvasControlsTemplate = "<div class=\"imglykit-canvas-crop-container\">\n  <div class=\"imglykit-canvas-crop-top\">\n    <div class=\"imglykit-canvas-crop-top-left\"></div>\n    <div class=\"imglykit-canvas-crop-top-center\"></div>\n    <div class=\"imglykit-canvas-crop-top-right\"></div>\n  </div>\n\n  <div class=\"imglykit-canvas-crop-center\">\n    <div class=\"imglykit-canvas-crop-center-left\"></div>\n    <div class=\"imglykit-canvas-crop-center-center\">\n      <div class=\"imglykit-canvas-crop-knobs\">\n        <div data-corner=\"top-left\"></div>\n        <div data-corner=\"top-right\"></div>\n        <div data-corner=\"bottom-left\"></div>\n        <div data-corner=\"bottom-right\"></div>\n      </div>\n    </div>\n    <div class=\"imglykit-canvas-crop-center-right\"></div>\n  </div>\n\n  <div class=\"imglykit-canvas-crop-bottom\">\n    <div class=\"imglykit-canvas-crop-bottom-left\"></div>\n    <div class=\"imglykit-canvas-crop-bottom-center\"></div>\n    <div class=\"imglykit-canvas-crop-bottom-right\"></div>\n  </div>\n</div>\n";
        this._canvasControlsTemplate = canvasControlsTemplate;

        this._defaultStart = new Vector2(0.1, 0.1);
        this._defaultEnd = new Vector2(0.9, 0.9);

        this._initialOptions = {
          start: this._operation.getStart(),
          end: this._operation.getEnd()
        };

        this._start = this._initialOptions.start || this._defaultStart;
        this._end = this._initialOptions.end || this._defaultEnd;

        // Minimum size in pixels
        this._minimumSize = new Vector2(50, 50);

        // Mouse event callbacks bound to the class context
        this._onKnobDown = this._onKnobDown.bind(this);
        this._onKnobDrag = this._onKnobDrag.bind(this);
        this._onKnobUp = this._onKnobUp.bind(this);
        this._onCenterDown = this._onCenterDown.bind(this);
        this._onCenterDrag = this._onCenterDrag.bind(this);
        this._onCenterUp = this._onCenterUp.bind(this);

        this._addDefaultRatios();

        // Select all ratios per default
        this.selectRatios(null);
      },
      writable: true,
      configurable: true
    },
    selectRatios: {

      /**
       * Selects the ratios
       * @param {Selector} selector
       */

      value: function selectRatios(selector) {
        this._ratios = {};

        var ratioIdentifiers = Object.keys(this._availableRatios);

        var selectedRatios = Utils.select(ratioIdentifiers, selector);
        var _iteratorNormalCompletion = true;
        var _didIteratorError = false;
        var _iteratorError = undefined;

        try {
          for (var _iterator = selectedRatios[Symbol.iterator](), _step; !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = true) {
            var identifier = _step.value;

            this._ratios[identifier] = this._availableRatios[identifier];
          }
        } catch (err) {
          _didIteratorError = true;
          _iteratorError = err;
        } finally {
          try {
            if (!_iteratorNormalCompletion && _iterator["return"]) {
              _iterator["return"]();
            }
          } finally {
            if (_didIteratorError) {
              throw _iteratorError;
            }
          }
        }

        if (this._active) {
          this._renderControls();
        }
      },
      writable: true,
      configurable: true
    },
    _addDefaultRatios: {

      /**
       * Adds the default ratios
       * @private
       */

      value: function _addDefaultRatios() {
        this.addRatio("custom", "*", true);
        this.addRatio("square", "1");
        this.addRatio("4-3", "1.33");
        this.addRatio("16-9", "1.77");
      },
      writable: true,
      configurable: true
    },
    addRatio: {

      /**
       * Adds a ratio with the given identifier
       * @param {String} identifier
       * @param {Number} ratio
       * @param {Boolean} selected
       */

      value: function addRatio(identifier, ratio, selected) {
        this._availableRatios[identifier] = { ratio: ratio, selected: selected };
      },
      writable: true,
      configurable: true
    },
    _onEnter: {

      /**
       * Gets called when this control is activated
       * @override
       */

      value: function _onEnter() {
        var _this = this;

        _get(Object.getPrototypeOf(CropControls.prototype), "_onEnter", this).call(this);

        this._initialZoomLevel = this._ui.canvas.zoomLevel;
        this._ui.canvas.zoomToFit(false);

        var prefix = ".imglykit-canvas-crop";
        var container = this._canvasControls;
        var knobsContainer = container.querySelector("" + prefix + "-knobs");

        // Store initial settings for "back" button
        this._initialStart = this._operation.getStart().clone();
        this._initialEnd = this._operation.getEnd().clone();
        this._initialIdentity = this._operation.isIdentity;

        // Make sure we see the whole input image
        this._operation.set({
          start: new Vector2(0, 0),
          end: new Vector2(1, 1)
        });

        // Find all 4 knobs
        this._knobs = {
          topLeft: knobsContainer.querySelector("[data-corner=top-left]"),
          topRight: knobsContainer.querySelector("[data-corner=top-right]"),
          bottomLeft: knobsContainer.querySelector("[data-corner=bottom-left]"),
          bottomRight: knobsContainer.querySelector("[data-corner=bottom-right]")
        };

        // Find the div areas that affect the displayed crop size
        this._areas = {
          topLeft: this._canvasControls.querySelector("" + prefix + "-top-left"),
          topCenter: this._canvasControls.querySelector("" + prefix + "-top-center"),
          centerLeft: this._canvasControls.querySelector("" + prefix + "-center-left"),
          centerCenter: this._canvasControls.querySelector("" + prefix + "-center-center")
        };

        this._handleControls();
        this._handleKnobs();
        this._handleCenter();

        // Resume the rendering
        this._ui.canvas.render().then(function () {
          _this._updateDOM();
        });
      },
      writable: true,
      configurable: true
    },
    _handleControls: {

      /**
       * Handles the ratio controls
       * @private
       */

      value: function _handleControls() {
        var _this = this;

        var listItems = this._controls.querySelectorAll("ul > li");
        this._ratioItems = Array.prototype.slice.call(listItems);

        var _iteratorNormalCompletion = true;
        var _didIteratorError = false;
        var _iteratorError = undefined;

        try {
          for (var _iterator = this._ratioItems[Symbol.iterator](), _step; !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = true) {
            var _item$dataset;

            (function () {
              var item = _step.value;
              _item$dataset = item.dataset;
              var selected = _item$dataset.selected;
              var ratio = _item$dataset.ratio;
              var identifier = _item$dataset.identifier;

              if (typeof selected !== "undefined" && _this._initialIdentity) {
                _this._setRatio(identifier, ratio, false);
                _this._selectRatio(item);
              }

              item.addEventListener("click", function (e) {
                e.preventDefault();
                _this._onRatioClick(item);
              });
            })();
          }
        } catch (err) {
          _didIteratorError = true;
          _iteratorError = err;
        } finally {
          try {
            if (!_iteratorNormalCompletion && _iterator["return"]) {
              _iterator["return"]();
            }
          } finally {
            if (_didIteratorError) {
              throw _iteratorError;
            }
          }
        }
      },
      writable: true,
      configurable: true
    },
    _onRatioClick: {

      /**
       * Gets called when the given ratio has been selected
       * @param {DOMElement} item
       * @private
       */

      value: function _onRatioClick(item) {
        this._unselectAllRatios();
        this._selectRatio(item);
      },
      writable: true,
      configurable: true
    },
    _unselectAllRatios: {

      /**
       * Unselects all ratio control items
       * @private
       */

      value: function _unselectAllRatios() {
        var _iteratorNormalCompletion = true;
        var _didIteratorError = false;
        var _iteratorError = undefined;

        try {
          for (var _iterator = this._ratioItems[Symbol.iterator](), _step; !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = true) {
            var item = _step.value;

            item.classList.remove("imglykit-controls-item-active");
          }
        } catch (err) {
          _didIteratorError = true;
          _iteratorError = err;
        } finally {
          try {
            if (!_iteratorNormalCompletion && _iterator["return"]) {
              _iterator["return"]();
            }
          } finally {
            if (_didIteratorError) {
              throw _iteratorError;
            }
          }
        }
      },
      writable: true,
      configurable: true
    },
    _selectRatio: {

      /**
       * Activates the given ratio control item
       * @param {DOMElement} item
       * @private
       */

      value: function _selectRatio(item) {
        item.classList.add("imglykit-controls-item-active");
        var _item$dataset = item.dataset;
        var ratio = _item$dataset.ratio;
        var identifier = _item$dataset.identifier;

        this._setRatio(identifier, ratio);
      },
      writable: true,
      configurable: true
    },
    _setRatio: {

      /**
       * Sets the given ratio
       * @param {String} identifier
       * @param {String} ratio
       * @param {Boolean} resize
       * @private
       */

      value: function _setRatio(identifier, ratio) {
        var resize = arguments[2] === undefined ? true : arguments[2];

        var canvasSize = this._ui.canvas.size;
        this._selectedRatio = identifier;

        if (ratio === "*") {
          this._ratio = null;
          this._start = new Vector2(0.1, 0.1);
          this._end = new Vector2(0.9, 0.9);
        } else {
          if (ratio === "original") {
            this._ratio = canvasSize.x / canvasSize.y;
          } else {
            ratio = parseFloat(ratio);
            this._ratio = ratio;
          }

          if (resize) {
            if (canvasSize.x / canvasSize.y <= this._ratio) {
              this._start.x = 0.1;
              this._end.x = 0.9;
              var height = 1 / canvasSize.y * (canvasSize.x / this._ratio * 0.8);
              this._start.y = (1 - height) / 2;
              this._end.y = 1 - this._start.y;
            } else {
              this._start.y = 0.1;
              this._end.y = 0.9;
              var width = 1 / canvasSize.x * (this._ratio * canvasSize.y * 0.8);
              this._start.x = (1 - width) / 2;
              this._end.x = 1 - this._start.x;
            }
          }
        }

        this._updateDOM();
      },
      writable: true,
      configurable: true
    },
    _updateDOM: {

      /**
       * Updates the cropping divs for the current operation settings
       * @private
       */

      value: function _updateDOM() {
        var canvasSize = this._ui.canvas.size;
        var startAbsolute = this._start.clone().multiply(canvasSize);
        var endAbsolute = this._end.clone().multiply(canvasSize);
        var size = endAbsolute.clone().subtract(startAbsolute);

        var top = Math.max(1, startAbsolute.y);
        var left = Math.max(1, startAbsolute.x);
        var width = Math.max(1, size.x);
        var height = Math.max(1, size.y);

        // widths are defined by top left and top center areas
        this._areas.topLeft.style.width = "" + left + "px";
        this._areas.topCenter.style.width = "" + width + "px";

        // heights are defined by top left and center left areas
        this._areas.topLeft.style.height = "" + top + "px";
        this._areas.centerLeft.style.height = "" + height + "px";
      },
      writable: true,
      configurable: true
    },
    _handleKnobs: {

      /**
       * Handles the knob dragging
       * @private
       */

      value: function _handleKnobs() {
        var _this = this;

        for (var identifier in this._knobs) {
          (function (identifier) {
            var knob = _this._knobs[identifier];
            knob.addEventListener("mousedown", function (e) {
              _this._onKnobDown(e, knob);
            });
            knob.addEventListener("touchstart", function (e) {
              _this._onKnobDown(e, knob);
            });
          })(identifier);
        }
      },
      writable: true,
      configurable: true
    },
    _onKnobDown: {

      /**
       * Gets called when the user presses a knob
       * @param {Event} e
       * @param {DOMElement} knob
       * @private
       */

      value: function _onKnobDown(e, knob) {
        e.preventDefault();
        e.stopPropagation();

        this._currentKnob = knob;
        this._initialMousePosition = Utils.getEventPosition(e);

        // Remember the current values
        this._startBeforeDrag = this._start.clone();
        this._endBeforeDrag = this._end.clone();

        document.addEventListener("mousemove", this._onKnobDrag);
        document.addEventListener("touchmove", this._onKnobDrag);
        document.addEventListener("mouseup", this._onKnobUp);
        document.addEventListener("touchend", this._onKnobUp);
      },
      writable: true,
      configurable: true
    },
    _onKnobDrag: {

      /**
       * Gets called whe the user drags a knob
       * @param {Event} e
       * @private
       */

      value: function _onKnobDrag(e) {
        e.preventDefault();

        var mousePosition = Utils.getEventPosition(e);
        var mouseDiff = mousePosition.subtract(this._initialMousePosition);
        var corner = this._currentKnob.dataset.corner;
        var canvasSize = this._ui.canvas.size;

        var absoluteStart = this._startBeforeDrag.clone().multiply(canvasSize);
        var absoluteEnd = this._endBeforeDrag.clone().multiply(canvasSize);
        var maxHeight = canvasSize.y;

        var width = undefined,
            height = undefined,
            maximum = undefined,
            minimum = undefined;

        switch (corner) {
          case "top-left":
            absoluteStart.add(mouseDiff);
            maximum = absoluteEnd.clone().subtract(this._minimumSize);
            absoluteStart.clamp(null, maximum);
            break;
          case "top-right":
            absoluteEnd.x += mouseDiff.x;
            absoluteStart.y += mouseDiff.y;
            absoluteEnd.x = Math.max(absoluteStart.x + this._minimumSize.x, absoluteEnd.x);
            absoluteStart.y = Math.min(absoluteEnd.y - this._minimumSize.y, absoluteStart.y);
            break;
          case "bottom-right":
            absoluteEnd.add(mouseDiff);
            minimum = absoluteStart.clone().add(this._minimumSize);
            absoluteEnd.clamp(minimum);
            maxHeight = canvasSize.y - absoluteStart.y;
            break;
          case "bottom-left":
            absoluteStart.x += mouseDiff.x;
            absoluteEnd.y += mouseDiff.y;
            absoluteStart.x = Math.min(absoluteEnd.x - this._minimumSize.x, absoluteStart.x);
            absoluteEnd.y = Math.max(absoluteStart.y + this._minimumSize.y, absoluteEnd.y);
            break;
        }

        this._start.copy(absoluteStart).divide(canvasSize);
        this._end.copy(absoluteEnd).divide(canvasSize);

        this._start.clamp(0, 1);
        this._end.clamp(0, 1);

        /**
         * Calculate boundaries
         */
        if (this._ratio !== null) {
          switch (corner) {
            case "top-left":
              width = (this._end.x - this._start.x) * canvasSize.x;
              height = width / this._ratio;
              this._start.y = this._end.y - height / canvasSize.y;

              if (this._start.y <= 0) {
                this._start.y = 0;
                height = (this._end.y - this._start.y) * canvasSize.y;
                width = height * this._ratio;
                this._start.x = this._end.x - width / canvasSize.x;
              }
              break;
            case "top-right":
              width = (this._end.x - this._start.x) * canvasSize.x;
              height = width / this._ratio;
              this._start.y = this._end.y - height / canvasSize.y;

              if (this._start.y <= 0) {
                this._start.y = 0;
                height = (this._end.y - this._start.y) * canvasSize.y;
                width = height * this._ratio;
                this._end.x = this._start.x + width / canvasSize.x;
              }
              break;
            case "bottom-right":
              width = (this._end.x - this._start.x) * canvasSize.x;
              height = width / this._ratio;
              this._end.y = this._start.y + height / canvasSize.y;

              // If boundaries are exceeded, calculate width by maximum height
              if (this._end.y >= 1) {
                this._end.y = 1;
                height = (this._end.y - this._start.y) * canvasSize.y;
                width = height * this._ratio;
                this._end.x = this._start.x + width / canvasSize.x;
              }
              break;
            case "bottom-left":
              width = (this._end.x - this._start.x) * canvasSize.x;
              height = width / this._ratio;
              this._end.y = this._start.y + height / canvasSize.y;

              if (this._end.y >= 1) {
                this._end.y = 1;
                height = (this._end.y - this._start.y) * canvasSize.y;
                width = height * this._ratio;
                this._start.x = this._end.x - width / canvasSize.x;
              }
              break;
          }
        }

        this._updateDOM();
      },
      writable: true,
      configurable: true
    },
    _onKnobUp: {

      /**
       * Gets called whe the user releases a knob
       * @param {Event} e
       * @private
       */

      value: function _onKnobUp(e) {
        this._currentKnob = null;
        document.removeEventListener("mousemove", this._onKnobDrag);
        document.removeEventListener("touchmove", this._onKnobDrag);
        document.removeEventListener("mouseup", this._onKnobUp);
        document.removeEventListener("touchend", this._onKnobUp);
      },
      writable: true,
      configurable: true
    },
    _handleCenter: {

      /**
       * Handles the center dragging
       * @private
       */

      value: function _handleCenter() {
        this._areas.centerCenter.addEventListener("mousedown", this._onCenterDown);
        this._areas.centerCenter.addEventListener("touchstart", this._onCenterDown);
      },
      writable: true,
      configurable: true
    },
    _onCenterDown: {

      /**
       * Gets called when the user presses the center area
       * @param {Event} e
       * @private
       */

      value: function _onCenterDown(e) {
        this._initialMousePosition = Utils.getEventPosition(e);

        // Remember the current values
        this._startBeforeDrag = this._start.clone();
        this._endBeforeDrag = this._end.clone();

        document.addEventListener("mousemove", this._onCenterDrag);
        document.addEventListener("touchmove", this._onCenterDrag);
        document.addEventListener("mouseup", this._onCenterUp);
        document.addEventListener("touchend", this._onCenterUp);
      },
      writable: true,
      configurable: true
    },
    _onCenterDrag: {

      /**
       * Gets called when the user presses the center area and moves his mouse
       * @param {Event} e
       * @private
       */

      value: function _onCenterDrag(e) {
        var mousePosition = Utils.getEventPosition(e);
        var mouseDiff = mousePosition.subtract(this._initialMousePosition);
        var canvasSize = this._ui.canvas.size;

        // Get the crop size
        var cropSize = this._endBeforeDrag.clone().subtract(this._startBeforeDrag);
        var absoluteCropSize = cropSize.clone().multiply(canvasSize);

        // Get the absolute initial values
        var absoluteStart = this._startBeforeDrag.clone().multiply(canvasSize);
        var absoluteEnd = this._endBeforeDrag.clone().multiply(canvasSize);

        // Add the mouse position difference
        absoluteStart.add(mouseDiff);

        // Clamp the value
        var maxStart = canvasSize.clone().subtract(absoluteCropSize);
        absoluteStart.clamp(new Vector2(0, 0), maxStart);

        // End position does not change (relative to start)
        absoluteEnd.copy(absoluteStart).add(absoluteCropSize);

        // Set the final values
        this._start.copy(absoluteStart).divide(canvasSize);
        this._end.copy(absoluteEnd).divide(canvasSize);

        this._updateDOM();
      },
      writable: true,
      configurable: true
    },
    _onCenterUp: {

      /**
       * Gets called when the user releases the center area
       * @param {Event} e
       * @private
       */

      value: function _onCenterUp(e) {
        document.removeEventListener("mousemove", this._onCenterDrag);
        document.removeEventListener("touchmove", this._onCenterDrag);
        document.removeEventListener("mouseup", this._onCenterUp);
        document.removeEventListener("touchend", this._onCenterUp);
      },
      writable: true,
      configurable: true
    },
    _onBack: {

      /**
       * Gets called when the back button has been clicked
       * @override
       */

      value: function _onBack() {
        this._ui.canvas.setZoomLevel(this._initialZoomLevel, false);
        this._operation.set({
          start: this._initialStart,
          end: this._initialEnd
        });
        this._ui.canvas.render();
      },
      writable: true,
      configurable: true
    },
    _onDone: {

      /**
       * Gets called when the done button has been clicked
       * @protected
       */

      value: function _onDone() {
        this._operation.set({
          start: this._start,
          end: this._end
        });
        this._ui.canvas.zoomToFit(true);

        this._ui.addHistory(this._operation, {
          start: this._initialStart.clone(),
          end: this._initialEnd.clone()
        }, this._initialIdentity);
      },
      writable: true,
      configurable: true
    },
    context: {

      /**
       * The data that is available to the template
       * @type {Object}
       * @override
       */

      get: function () {
        var context = _get(Object.getPrototypeOf(CropControls.prototype), "context", this);
        context.ratios = this._ratios;
        return context;
      },
      configurable: true
    },
    selectedRatio: {

      /**
       * The selected ratio identifier
       * @type {String}
       */

      get: function () {
        return this._selectedRatio;
      },
      configurable: true
    }
  });

  return CropControls;
})(Control);

module.exports = CropControls;

},{"../../../lib/math/vector2":"/Users/sash/development/js/imglykit-rewrite/src/js/lib/math/vector2.js","../../../lib/utils":"/Users/sash/development/js/imglykit-rewrite/src/js/lib/utils.js","./control":"/Users/sash/development/js/imglykit-rewrite/src/js/ui/night/controls/control.js","es6-symbol":"/Users/sash/development/js/imglykit-rewrite/node_modules/es6-symbol/index.js"}],"/Users/sash/development/js/imglykit-rewrite/src/js/ui/night/controls/filters.js":[function(require,module,exports){
"use strict";

var _interopRequire = function (obj) { return obj && obj.__esModule ? obj["default"] : obj; };

var _prototypeProperties = function (child, staticProps, instanceProps) { if (staticProps) Object.defineProperties(child, staticProps); if (instanceProps) Object.defineProperties(child.prototype, instanceProps); };

var _get = function get(object, property, receiver) { var desc = Object.getOwnPropertyDescriptor(object, property); if (desc === undefined) { var parent = Object.getPrototypeOf(object); if (parent === null) { return undefined; } else { return get(parent, property, receiver); } } else if ("value" in desc && desc.writable) { return desc.value; } else { var getter = desc.get; if (getter === undefined) { return undefined; } return getter.call(receiver); } };

var _inherits = function (subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) subClass.__proto__ = superClass; };

var _classCallCheck = function (instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } };

/*!
 * Copyright (c) 2013-2015 9elements GmbH
 *
 * Released under Attribution-NonCommercial 3.0 Unported
 * http://creativecommons.org/licenses/by-nc/3.0/
 *
 * For commercial use, please contact us at contact@9elements.com
 */

var Symbol = _interopRequire(require("es6-symbol"));

var Control = _interopRequire(require("./control"));

var Utils = _interopRequire(require("../../../lib/utils"));



var FiltersControls = (function (Control) {
  function FiltersControls() {
    _classCallCheck(this, FiltersControls);

    if (Control != null) {
      Control.apply(this, arguments);
    }
  }

  _inherits(FiltersControls, Control);

  _prototypeProperties(FiltersControls, null, {
    identifier: {
      /**
       * A unique string that identifies this control.
       * @type {String}
       */

      get: function () {
        return "filters";
      },
      configurable: true
    },
    init: {

      /**
       * Entry point for this control
       */

      value: function init() {
        this._operation = this._ui.operations.filters;

        var controlsTemplate = "<div class=\"imglykit-controls-filters\">\n  <div class=\"imglykit-controls-button imglykit-controls-back\">\n    <img src=\"{{=it.helpers.assetPath('ui/night/buttons/back.png') }}\" />\n  </div>\n\n  <div>\n    <ul class=\"imglykit-controls-list imgly-controls-list-with-buttons\">\n      {{ for(var identifier in it.filters) { }}\n        {{ var filter = it.filters[identifier]; }}\n        {{ var enabled = it.activeFilter.identifier === identifier; }}\n        {{? identifier !== \"identity\"}}\n        <li data-identifier=\"{{= identifier}}\"{{? enabled}} class=\"imglykit-controls-item-active\"{{?}}>\n          <img src=\"{{=it.helpers.assetPath('ui/night/filters/' + identifier + '.png')}}\" />\n        </li>\n        {{?}}\n      {{ } }}\n    </ul>\n  </div>\n\n  <div class=\"imglykit-controls-button imglykit-controls-done\">\n    <img src=\"{{=it.helpers.assetPath('ui/night/buttons/done.png') }}\" />\n  </div>\n</div>\n";
        this._controlsTemplate = controlsTemplate;

        this._availableFilters = {};
        this._filters = {};

        this._addDefaultFilters();

        // Select all filters per default
        this.selectFilters(null);
      },
      writable: true,
      configurable: true
    },
    _onEnter: {

      /**
       * Gets called when this control is activated
       * @override
       */

      value: function _onEnter() {
        var _this = this;

        this._initialFilter = this._operation.getFilter();
        this._initialIdentity = this._operation.isIdentity;

        var listItems = this._controls.querySelectorAll("li");
        this._listItems = Array.prototype.slice.call(listItems);

        // Listen to click events
        var _iteratorNormalCompletion = true;
        var _didIteratorError = false;
        var _iteratorError = undefined;

        try {
          for (var _iterator = this._listItems[Symbol.iterator](), _step; !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = true) {
            (function () {
              var listItem = _step.value;

              listItem.addEventListener("click", function () {
                _this._onListItemClick(listItem);
              });
            })();
          }
        } catch (err) {
          _didIteratorError = true;
          _iteratorError = err;
        } finally {
          try {
            if (!_iteratorNormalCompletion && _iterator["return"]) {
              _iterator["return"]();
            }
          } finally {
            if (_didIteratorError) {
              throw _iteratorError;
            }
          }
        }
      },
      writable: true,
      configurable: true
    },
    _onBack: {

      /**
       * Gets called when the user hits the back button
       * @override
       */

      value: function _onBack() {
        this._operation.setFilter(this._initialFilter);
        this._ui.canvas.render();
      },
      writable: true,
      configurable: true
    },
    _onDone: {

      /**
       * Gets called when the done button has been clicked
       * @override
       */

      value: function _onDone() {
        this._ui.addHistory(this._operation, {
          filter: this._initialFilter
        }, this._initialIdentity);
      },
      writable: true,
      configurable: true
    },
    _onListItemClick: {

      /**
       * Gets called when the user clicked a list item
       * @private
       */

      value: function _onListItemClick(item) {
        this._deactivateAllItems();

        var identifier = item.dataset.identifier;

        this._operation.setFilter(this._filters[identifier]);
        this._ui.canvas.render();

        item.classList.add("imglykit-controls-item-active");
      },
      writable: true,
      configurable: true
    },
    _deactivateAllItems: {

      /**
       * Deactivates all list items
       * @private
       */

      value: function _deactivateAllItems() {
        var _iteratorNormalCompletion = true;
        var _didIteratorError = false;
        var _iteratorError = undefined;

        try {
          for (var _iterator = this._listItems[Symbol.iterator](), _step; !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = true) {
            var listItem = _step.value;

            listItem.classList.remove("imglykit-controls-item-active");
          }
        } catch (err) {
          _didIteratorError = true;
          _iteratorError = err;
        } finally {
          try {
            if (!_iteratorNormalCompletion && _iterator["return"]) {
              _iterator["return"]();
            }
          } finally {
            if (_didIteratorError) {
              throw _iteratorError;
            }
          }
        }
      },
      writable: true,
      configurable: true
    },
    _addDefaultFilters: {

      /**
       * Registers all the known filters
       * @private
       */

      value: function _addDefaultFilters() {
        this.addFilter(require("../../../operations/filters/identity-filter"));
        this.addFilter(require("../../../operations/filters/k1-filter"));
        this.addFilter(require("../../../operations/filters/k2-filter"));
        this.addFilter(require("../../../operations/filters/k6-filter"));
        this.addFilter(require("../../../operations/filters/kdynamic-filter"));
        this.addFilter(require("../../../operations/filters/fridge-filter"));
        this.addFilter(require("../../../operations/filters/breeze-filter"));
        this.addFilter(require("../../../operations/filters/orchid-filter"));
        this.addFilter(require("../../../operations/filters/chest-filter"));
        this.addFilter(require("../../../operations/filters/front-filter"));
        this.addFilter(require("../../../operations/filters/fixie-filter"));
        this.addFilter(require("../../../operations/filters/x400-filter"));
        this.addFilter(require("../../../operations/filters/bw-filter"));
        this.addFilter(require("../../../operations/filters/bwhard-filter"));
        this.addFilter(require("../../../operations/filters/lenin-filter"));
        this.addFilter(require("../../../operations/filters/quozi-filter"));
        this.addFilter(require("../../../operations/filters/pola669-filter"));
        this.addFilter(require("../../../operations/filters/pola-filter"));
        this.addFilter(require("../../../operations/filters/food-filter"));
        this.addFilter(require("../../../operations/filters/glam-filter"));
        this.addFilter(require("../../../operations/filters/celsius-filter"));
        this.addFilter(require("../../../operations/filters/texas-filter"));
        this.addFilter(require("../../../operations/filters/morning-filter"));
        this.addFilter(require("../../../operations/filters/lomo-filter"));
        this.addFilter(require("../../../operations/filters/gobblin-filter"));
        this.addFilter(require("../../../operations/filters/mellow-filter"));
        this.addFilter(require("../../../operations/filters/sunny-filter"));
        this.addFilter(require("../../../operations/filters/a15-filter"));
        this.addFilter(require("../../../operations/filters/semired-filter"));
      },
      writable: true,
      configurable: true
    },
    addFilter: {

      /**
       * Registers the given filter
       * @param  {class} filter
       * @private
       */

      value: function addFilter(filter) {
        this._availableFilters[filter.identifier] = filter;
      },
      writable: true,
      configurable: true
    },
    selectFilters: {

      /**
       * Selects the filters
       * @param {Selector} selector
       */

      value: function selectFilters(selector) {
        this._filters = {};

        var filterIdentifiers = Object.keys(this._availableFilters);

        var selectedFilters = Utils.select(filterIdentifiers, selector);
        var _iteratorNormalCompletion = true;
        var _didIteratorError = false;
        var _iteratorError = undefined;

        try {
          for (var _iterator = selectedFilters[Symbol.iterator](), _step; !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = true) {
            var identifier = _step.value;

            this._filters[identifier] = this._availableFilters[identifier];
          }
        } catch (err) {
          _didIteratorError = true;
          _iteratorError = err;
        } finally {
          try {
            if (!_iteratorNormalCompletion && _iterator["return"]) {
              _iterator["return"]();
            }
          } finally {
            if (_didIteratorError) {
              throw _iteratorError;
            }
          }
        }

        if (this._active) {
          this._renderControls();
        }
      },
      writable: true,
      configurable: true
    },
    context: {

      /**
       * The data that is available to the template
       * @type {Object}
       * @override
       */

      get: function () {
        var context = _get(Object.getPrototypeOf(FiltersControls.prototype), "context", this);
        context.filters = this._filters;
        context.activeFilter = this._operation.getFilter();
        return context;
      },
      configurable: true
    }
  });

  return FiltersControls;
})(Control);

module.exports = FiltersControls;

},{"../../../lib/utils":"/Users/sash/development/js/imglykit-rewrite/src/js/lib/utils.js","../../../operations/filters/a15-filter":"/Users/sash/development/js/imglykit-rewrite/src/js/operations/filters/a15-filter.js","../../../operations/filters/breeze-filter":"/Users/sash/development/js/imglykit-rewrite/src/js/operations/filters/breeze-filter.js","../../../operations/filters/bw-filter":"/Users/sash/development/js/imglykit-rewrite/src/js/operations/filters/bw-filter.js","../../../operations/filters/bwhard-filter":"/Users/sash/development/js/imglykit-rewrite/src/js/operations/filters/bwhard-filter.js","../../../operations/filters/celsius-filter":"/Users/sash/development/js/imglykit-rewrite/src/js/operations/filters/celsius-filter.js","../../../operations/filters/chest-filter":"/Users/sash/development/js/imglykit-rewrite/src/js/operations/filters/chest-filter.js","../../../operations/filters/fixie-filter":"/Users/sash/development/js/imglykit-rewrite/src/js/operations/filters/fixie-filter.js","../../../operations/filters/food-filter":"/Users/sash/development/js/imglykit-rewrite/src/js/operations/filters/food-filter.js","../../../operations/filters/fridge-filter":"/Users/sash/development/js/imglykit-rewrite/src/js/operations/filters/fridge-filter.js","../../../operations/filters/front-filter":"/Users/sash/development/js/imglykit-rewrite/src/js/operations/filters/front-filter.js","../../../operations/filters/glam-filter":"/Users/sash/development/js/imglykit-rewrite/src/js/operations/filters/glam-filter.js","../../../operations/filters/gobblin-filter":"/Users/sash/development/js/imglykit-rewrite/src/js/operations/filters/gobblin-filter.js","../../../operations/filters/identity-filter":"/Users/sash/development/js/imglykit-rewrite/src/js/operations/filters/identity-filter.js","../../../operations/filters/k1-filter":"/Users/sash/development/js/imglykit-rewrite/src/js/operations/filters/k1-filter.js","../../../operations/filters/k2-filter":"/Users/sash/development/js/imglykit-rewrite/src/js/operations/filters/k2-filter.js","../../../operations/filters/k6-filter":"/Users/sash/development/js/imglykit-rewrite/src/js/operations/filters/k6-filter.js","../../../operations/filters/kdynamic-filter":"/Users/sash/development/js/imglykit-rewrite/src/js/operations/filters/kdynamic-filter.js","../../../operations/filters/lenin-filter":"/Users/sash/development/js/imglykit-rewrite/src/js/operations/filters/lenin-filter.js","../../../operations/filters/lomo-filter":"/Users/sash/development/js/imglykit-rewrite/src/js/operations/filters/lomo-filter.js","../../../operations/filters/mellow-filter":"/Users/sash/development/js/imglykit-rewrite/src/js/operations/filters/mellow-filter.js","../../../operations/filters/morning-filter":"/Users/sash/development/js/imglykit-rewrite/src/js/operations/filters/morning-filter.js","../../../operations/filters/orchid-filter":"/Users/sash/development/js/imglykit-rewrite/src/js/operations/filters/orchid-filter.js","../../../operations/filters/pola-filter":"/Users/sash/development/js/imglykit-rewrite/src/js/operations/filters/pola-filter.js","../../../operations/filters/pola669-filter":"/Users/sash/development/js/imglykit-rewrite/src/js/operations/filters/pola669-filter.js","../../../operations/filters/quozi-filter":"/Users/sash/development/js/imglykit-rewrite/src/js/operations/filters/quozi-filter.js","../../../operations/filters/semired-filter":"/Users/sash/development/js/imglykit-rewrite/src/js/operations/filters/semired-filter.js","../../../operations/filters/sunny-filter":"/Users/sash/development/js/imglykit-rewrite/src/js/operations/filters/sunny-filter.js","../../../operations/filters/texas-filter":"/Users/sash/development/js/imglykit-rewrite/src/js/operations/filters/texas-filter.js","../../../operations/filters/x400-filter":"/Users/sash/development/js/imglykit-rewrite/src/js/operations/filters/x400-filter.js","./control":"/Users/sash/development/js/imglykit-rewrite/src/js/ui/night/controls/control.js","es6-symbol":"/Users/sash/development/js/imglykit-rewrite/node_modules/es6-symbol/index.js"}],"/Users/sash/development/js/imglykit-rewrite/src/js/ui/night/controls/flip.js":[function(require,module,exports){
"use strict";

var _interopRequire = function (obj) { return obj && obj.__esModule ? obj["default"] : obj; };

var _prototypeProperties = function (child, staticProps, instanceProps) { if (staticProps) Object.defineProperties(child, staticProps); if (instanceProps) Object.defineProperties(child.prototype, instanceProps); };

var _inherits = function (subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) subClass.__proto__ = superClass; };

var _classCallCheck = function (instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } };

/*!
 * Copyright (c) 2013-2015 9elements GmbH
 *
 * Released under Attribution-NonCommercial 3.0 Unported
 * http://creativecommons.org/licenses/by-nc/3.0/
 *
 * For commercial use, please contact us at contact@9elements.com
 */

var Control = _interopRequire(require("./control"));

var Symbol = _interopRequire(require("es6-symbol"));



var FlipControls = (function (Control) {
  function FlipControls() {
    _classCallCheck(this, FlipControls);

    if (Control != null) {
      Control.apply(this, arguments);
    }
  }

  _inherits(FlipControls, Control);

  _prototypeProperties(FlipControls, null, {
    identifier: {
      /**
       * A unique string that identifies this control.
       * @type {String}
       */

      get: function () {
        return "flip";
      },
      configurable: true
    },
    init: {

      /**
       * Entry point for this control
       */

      value: function init() {
        this._operation = this._ui.operations.flip;

        var controlsTemplate = "<div class=\"imglykit-controls-rotation\">\n  <div class=\"imglykit-controls-button imglykit-controls-back\">\n    <img src=\"{{=it.helpers.assetPath('ui/night/buttons/back.png') }}\" />\n  </div>\n\n  <div>\n    <ul class=\"imglykit-controls-list imgly-controls-list-with-buttons\">\n      <li data-direction=\"horizontal\">\n        <img src=\"{{=it.helpers.assetPath('ui/night/flip/horizontal.png')}}\" />\n      </li>\n      <li data-direction=\"vertical\">\n        <img src=\"{{=it.helpers.assetPath('ui/night/flip/vertical.png')}}\" />\n      </li>\n    </ul>\n  </div>\n\n  <div class=\"imglykit-controls-button imglykit-controls-done\">\n    <img src=\"{{=it.helpers.assetPath('ui/night/buttons/done.png') }}\" />\n  </div>\n</div>\n";
        this._controlsTemplate = controlsTemplate;
      },
      writable: true,
      configurable: true
    },
    _onEnter: {

      /**
       * Gets called when this control is activated
       */

      value: function _onEnter() {
        var _this = this;

        this._initialHorizontal = this._operation.getHorizontal();
        this._initialVertical = this._operation.getVertical();
        this._initialIdentity = this._operation.isIdentity;

        var listItems = this._controls.querySelectorAll("li");
        this._listItems = Array.prototype.slice.call(listItems);

        // Listen to click events
        var _iteratorNormalCompletion = true;
        var _didIteratorError = false;
        var _iteratorError = undefined;

        try {
          for (var _iterator = this._listItems[Symbol.iterator](), _step; !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = true) {
            (function () {
              var listItem = _step.value;

              listItem.addEventListener("click", function () {
                _this._onListItemClick(listItem);
              });

              var direction = listItem.dataset.direction;

              if (direction === "horizontal" && _this._operation.getHorizontal()) {
                _this._toggleItem(listItem, true);
              } else if (direction === "vertical" && _this._operation.getVertical()) {
                _this._toggleItem(listItem, true);
              }
            })();
          }
        } catch (err) {
          _didIteratorError = true;
          _iteratorError = err;
        } finally {
          try {
            if (!_iteratorNormalCompletion && _iterator["return"]) {
              _iterator["return"]();
            }
          } finally {
            if (_didIteratorError) {
              throw _iteratorError;
            }
          }
        }
      },
      writable: true,
      configurable: true
    },
    _onListItemClick: {

      /**
       * Gets called when the user clicked a list item
       * @private
       */

      value: function _onListItemClick(item) {
        var direction = item.dataset.direction;

        var active = false;

        if (direction === "horizontal") {
          var currentHorizontal = this._operation.getHorizontal();
          this._operation.setHorizontal(!currentHorizontal);
          this._ui.canvas.render();
          active = !currentHorizontal;
        } else if (direction === "vertical") {
          var currentVertical = this._operation.getVertical();
          this._operation.setVertical(!currentVertical);
          this._ui.canvas.render();
          active = !currentVertical;
        }

        this._toggleItem(item, active);
      },
      writable: true,
      configurable: true
    },
    _toggleItem: {

      /**
       * Toggles the active state of the given item
       * @param {DOMElement} item
       * @param {Boolean} active
       * @private
       */

      value: function _toggleItem(item, active) {
        var activeClass = "imglykit-controls-item-active";
        if (active) {
          item.classList.add(activeClass);
        } else {
          item.classList.remove(activeClass);
        }
      },
      writable: true,
      configurable: true
    },
    _onBack: {

      /**
       * Gets called when the back button has been clicked
       * @override
       */

      value: function _onBack() {
        this._operation.setHorizontal(this._initialHorizontal);
        this._operation.setVertical(this._initialVertical);
        this._ui.canvas.render();
      },
      writable: true,
      configurable: true
    },
    _onDone: {

      /**
       * Gets called when the done button has been clicked
       * @override
       */

      value: function _onDone() {
        this._ui.addHistory(this._operation, {
          vertical: this._initialVertical,
          horizontal: this._initialHorizontal
        }, this._initialIdentity);
      },
      writable: true,
      configurable: true
    }
  });

  return FlipControls;
})(Control);

module.exports = FlipControls;

},{"./control":"/Users/sash/development/js/imglykit-rewrite/src/js/ui/night/controls/control.js","es6-symbol":"/Users/sash/development/js/imglykit-rewrite/node_modules/es6-symbol/index.js"}],"/Users/sash/development/js/imglykit-rewrite/src/js/ui/night/controls/frames.js":[function(require,module,exports){
"use strict";

var _interopRequire = function (obj) { return obj && obj.__esModule ? obj["default"] : obj; };

var _prototypeProperties = function (child, staticProps, instanceProps) { if (staticProps) Object.defineProperties(child, staticProps); if (instanceProps) Object.defineProperties(child.prototype, instanceProps); };

var _get = function get(object, property, receiver) { var desc = Object.getOwnPropertyDescriptor(object, property); if (desc === undefined) { var parent = Object.getPrototypeOf(object); if (parent === null) { return undefined; } else { return get(parent, property, receiver); } } else if ("value" in desc && desc.writable) { return desc.value; } else { var getter = desc.get; if (getter === undefined) { return undefined; } return getter.call(receiver); } };

var _inherits = function (subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) subClass.__proto__ = superClass; };

var _classCallCheck = function (instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } };

/*!
 * Copyright (c) 2013-2015 9elements GmbH
 *
 * Released under Attribution-NonCommercial 3.0 Unported
 * http://creativecommons.org/licenses/by-nc/3.0/
 *
 * For commercial use, please contact us at contact@9elements.com
 */

var Control = _interopRequire(require("./control"));

var SimpleSlider = _interopRequire(require("../lib/simple-slider"));

var ColorPicker = _interopRequire(require("../lib/color-picker"));



var FramesControls = (function (Control) {
  function FramesControls() {
    _classCallCheck(this, FramesControls);

    if (Control != null) {
      Control.apply(this, arguments);
    }
  }

  _inherits(FramesControls, Control);

  _prototypeProperties(FramesControls, null, {
    identifier: {
      /**
       * A unique string that identifies this control.
       * @type {String}
       */

      get: function () {
        return "frames";
      },
      configurable: true
    },
    init: {

      /**
       * Entry point for this control
       */

      value: function init() {
        this._operation = this._ui.operations.frames;

        var controlsTemplate = "<div class=\"imglykit-controls-filters\">\n  <div class=\"imglykit-controls-button imglykit-controls-back\">\n    <img src=\"{{=it.helpers.assetPath('ui/night/buttons/back.png') }}\" />\n  </div>\n\n  <div>\n    {{#def.simpleSlider}}\n  </div>\n\n  <div class=\"imglykit-controls-button\">\n    {{#def.colorpicker}}\n  </div>\n\n  <div class=\"imglykit-controls-button imglykit-controls-done\">\n    <img src=\"{{=it.helpers.assetPath('ui/night/buttons/done.png') }}\" />\n  </div>\n</div>\n";
        this._controlsTemplate = controlsTemplate;
        this._partialTemplates.push(SimpleSlider.template);
        this._partialTemplates.push(ColorPicker.template);
      },
      writable: true,
      configurable: true
    },
    _onEnter: {

      /**
       * Gets called when this control is activated
       * @override
       */

      value: function _onEnter() {
        _get(Object.getPrototypeOf(FramesControls.prototype), "_onEnter", this).call(this);

        // Remember initial identity state
        this._initialIdentity = this._operation.isIdentity;

        this._initialOptions = {
          thickness: this._operation.getThickness(),
          color: this._operation.getColor()
        };

        this._operation.isIdentity = false;
        this._ui.canvas.render();

        // Init slider
        var sliderElement = this._controls.querySelector(".imglykit-slider");
        this._slider = new SimpleSlider(sliderElement, {
          minValue: 0,
          maxValue: 0.5
        });
        this._slider.on("update", this._onThicknessUpdate.bind(this));
        this._slider.setValue(this._initialOptions.thickness);

        // Init colorpicker
        var colorPickerElement = this._controls.querySelector(".imglykit-color-picker");
        this._colorPicker = new ColorPicker(this._ui, colorPickerElement);
        this._colorPicker.on("update", this._onColorUpdate.bind(this));
        this._colorPicker.setValue(this._initialOptions.color);
      },
      writable: true,
      configurable: true
    },
    _onBack: {

      /**
       * Gets called when the back button has been clicked
       * @override
       */

      value: function _onBack() {
        if (!this._initialIdentity) {
          this._operation.set(this._initialOptions);
          this._ui.canvas.render();
        } else {
          this._operation.isIdentity = this._initialIdentity;
          this._ui.canvas.render();
        }
      },
      writable: true,
      configurable: true
    },
    _onThicknessUpdate: {

      /**
       * Gets called when the thickness has been changed
       * @override
       */

      value: function _onThicknessUpdate(value) {
        this._operation.setThickness(value);
        this._ui.canvas.render();
      },
      writable: true,
      configurable: true
    },
    _onColorUpdate: {

      /**
       * Gets called when the color has been changed
       * @override
       */

      value: function _onColorUpdate(value) {
        this._operation.setColor(value);
        this._ui.canvas.render();
      },
      writable: true,
      configurable: true
    },
    _onDone: {

      /**
       * Gets called when the done button has been clicked
       * @override
       */

      value: function _onDone() {
        this._ui.addHistory(this._operation, {
          color: this._initialOptions.color,
          thickness: this._initialOptions.thickness
        }, this._initialIdentity);
      },
      writable: true,
      configurable: true
    }
  });

  return FramesControls;
})(Control);

module.exports = FramesControls;

},{"../lib/color-picker":"/Users/sash/development/js/imglykit-rewrite/src/js/ui/night/lib/color-picker.js","../lib/simple-slider":"/Users/sash/development/js/imglykit-rewrite/src/js/ui/night/lib/simple-slider.js","./control":"/Users/sash/development/js/imglykit-rewrite/src/js/ui/night/controls/control.js"}],"/Users/sash/development/js/imglykit-rewrite/src/js/ui/night/controls/radial-blur.js":[function(require,module,exports){
"use strict";

var _interopRequire = function (obj) { return obj && obj.__esModule ? obj["default"] : obj; };

var _prototypeProperties = function (child, staticProps, instanceProps) { if (staticProps) Object.defineProperties(child, staticProps); if (instanceProps) Object.defineProperties(child.prototype, instanceProps); };

var _get = function get(object, property, receiver) { var desc = Object.getOwnPropertyDescriptor(object, property); if (desc === undefined) { var parent = Object.getPrototypeOf(object); if (parent === null) { return undefined; } else { return get(parent, property, receiver); } } else if ("value" in desc && desc.writable) { return desc.value; } else { var getter = desc.get; if (getter === undefined) { return undefined; } return getter.call(receiver); } };

var _inherits = function (subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) subClass.__proto__ = superClass; };

var _classCallCheck = function (instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } };

/*!
 * Copyright (c) 2013-2015 9elements GmbH
 *
 * Released under Attribution-NonCommercial 3.0 Unported
 * http://creativecommons.org/licenses/by-nc/3.0/
 *
 * For commercial use, please contact us at contact@9elements.com
 */

var Control = _interopRequire(require("./control"));

var Vector2 = _interopRequire(require("../../../lib/math/vector2"));

var Utils = _interopRequire(require("../../../lib/utils"));

var SimpleSlider = _interopRequire(require("../lib/simple-slider"));



var RadialBlurControls = (function (Control) {
  function RadialBlurControls() {
    _classCallCheck(this, RadialBlurControls);

    if (Control != null) {
      Control.apply(this, arguments);
    }
  }

  _inherits(RadialBlurControls, Control);

  _prototypeProperties(RadialBlurControls, null, {
    identifier: {
      /**
       * A unique string that identifies this control.
       * @type {String}
       */

      get: function () {
        return "radial-blur";
      },
      configurable: true
    },
    init: {

      /**
       * Entry point for this control
       */

      value: function init() {
        this._operation = this._ui.operations["radial-blur"];

        var controlsTemplate = "<div class=\"imglykit-controls-radial-blur\">\n  <div class=\"imglykit-controls-button imglykit-controls-back\">\n    <img src=\"{{=it.helpers.assetPath('ui/night/buttons/back.png') }}\" />\n  </div>\n\n  <div class=\"imglykit-controls-icon\">\n    <img src=\"{{=it.helpers.assetPath('ui/night/blur/blur.png')}}\" />\n  </div>\n\n  <div>\n    {{var sliderId = \"imglykit-blur-radius-slider\";}}\n    {{#def.simpleSlider}}\n  </div>\n\n  <div class=\"imglykit-controls-icon\">\n    <img src=\"{{=it.helpers.assetPath('ui/night/blur/radius.png')}}\" />\n  </div>\n\n  <div>\n    {{var sliderId = \"imglykit-gradient-radius-slider\";}}\n    {{#def.simpleSlider}}\n  </div>\n\n  <div class=\"imglykit-controls-button imglykit-controls-done\">\n    <img src=\"{{=it.helpers.assetPath('ui/night/buttons/done.png') }}\" />\n  </div>\n</div>\n";
        this._controlsTemplate = controlsTemplate;

        var canvasControlsTemplate = "<div class=\"imglykit-canvas-radial-blur-container\">\n  <div class=\"imglykit-canvas-radial-blur-dot\"></div>\n  <div class=\"imglykit-canvas-radial-blur-circle-container\">\n    <div class=\"imglykit-canvas-radial-blur-circle\"></div>\n  </div>\n</div>\n";
        this._canvasControlsTemplate = canvasControlsTemplate;

        this._partialTemplates.push(SimpleSlider.template);
      },
      writable: true,
      configurable: true
    },
    _onEnter: {

      /**
       * Gets called when this control is activated
       * @override
       */

      value: function _onEnter() {
        var _this = this;

        _get(Object.getPrototypeOf(RadialBlurControls.prototype), "_onEnter", this).call(this);

        // Remember initial identity state
        this._initialIdentity = this._operation.isIdentity;
        this._initialSettings = {
          position: this._operation.getPosition().clone(),
          gradientRadius: this._operation.getGradientRadius(),
          blurRadius: this._operation.getBlurRadius()
        };

        this._operation.isIdentity = false;

        // Mouse event callbacks bound to the class context
        this._onKnobDown = this._onKnobDown.bind(this);
        this._onKnobDrag = this._onKnobDrag.bind(this);
        this._onKnobUp = this._onKnobUp.bind(this);

        this._knob = this._canvasControls.querySelector(".imglykit-canvas-radial-blur-dot");
        this._circle = this._canvasControls.querySelector(".imglykit-canvas-radial-blur-circle");
        this._handleKnob();
        this._initSliders();

        this._ui.canvas.render().then(function () {
          _this._updateDOM();
        });
      },
      writable: true,
      configurable: true
    },
    _initSliders: {

      /**
       * Initializes the slider controls
       * @private
       */

      value: function _initSliders() {
        var canvasSize = this._ui.canvas.size;

        var blurRadiusSlider = this._controls.querySelector("#imglykit-blur-radius-slider");
        this._blurRadiusSlider = new SimpleSlider(blurRadiusSlider, {
          minValue: 0,
          maxValue: 40
        });
        this._blurRadiusSlider.on("update", this._onBlurRadiusUpdate.bind(this));
        this._blurRadiusSlider.setValue(this._initialSettings.blurRadius);

        var gradientRadiusSlider = this._controls.querySelector("#imglykit-gradient-radius-slider");
        this._gradientRadiusSlider = new SimpleSlider(gradientRadiusSlider, {
          minValue: 1,
          maxValue: Math.max(canvasSize.y, canvasSize.x)
        });
        this._gradientRadiusSlider.on("update", this._onGradientRadiusUpdate.bind(this));
        this._gradientRadiusSlider.setValue(this._initialSettings.gradientRadius);
      },
      writable: true,
      configurable: true
    },
    _onBlurRadiusUpdate: {

      /**
       * Gets called when the value of the blur radius slider has been updated
       * @param {Number} value
       * @private
       */

      value: function _onBlurRadiusUpdate(value) {
        this._operation.setBlurRadius(value);
        this._ui.canvas.render();
      },
      writable: true,
      configurable: true
    },
    _onGradientRadiusUpdate: {

      /**
       * Gets called when the value of the gradient radius slider has been updated
       * @param {Number} value
       * @private
       */

      value: function _onGradientRadiusUpdate(value) {
        this._operation.setGradientRadius(value);
        this._updateDOM();
        this._ui.canvas.render();
      },
      writable: true,
      configurable: true
    },
    _handleKnob: {

      /**
       * Handles the knob dragging
       * @private
       */

      value: function _handleKnob() {
        this._knob.addEventListener("mousedown", this._onKnobDown);
        this._knob.addEventListener("touchstart", this._onKnobDown);
      },
      writable: true,
      configurable: true
    },
    _onKnobDown: {

      /**
       * Gets called when the user starts dragging the knob
       * @param {Event} e
       * @private
       */

      value: function _onKnobDown(e) {
        e.preventDefault();

        this._initialMousePosition = Utils.getEventPosition(e);
        this._initialPosition = this._operation.getPosition().clone();

        document.addEventListener("mousemove", this._onKnobDrag);
        document.addEventListener("touchmove", this._onKnobDrag);

        document.addEventListener("mouseup", this._onKnobUp);
        document.addEventListener("touchend", this._onKnobUp);
      },
      writable: true,
      configurable: true
    },
    _onKnobDrag: {

      /**
       * Gets called while the user starts drags the knob
       * @param {Event} e
       * @private
       */

      value: function _onKnobDrag(e) {
        e.preventDefault();

        var canvasSize = this._ui.canvas.size;
        var mousePosition = Utils.getEventPosition(e);
        var diff = mousePosition.subtract(this._initialMousePosition);

        var newPosition = this._initialPosition.clone().multiply(canvasSize).add(diff).divide(canvasSize);

        this._operation.setPosition(newPosition);
        this._updateDOM();
        this._ui.canvas.render();
      },
      writable: true,
      configurable: true
    },
    _onKnobUp: {

      /**
       * Gets called when the user stops dragging the knob
       * @param {Event} e
       * @private
       */

      value: function _onKnobUp(e) {
        e.preventDefault();

        document.removeEventListener("mousemove", this._onKnobDrag);
        document.removeEventListener("touchmove", this._onKnobDrag);

        document.removeEventListener("mouseup", this._onKnobUp);
        document.removeEventListener("touchend", this._onKnobUp);
      },
      writable: true,
      configurable: true
    },
    _updateDOM: {

      /**
       * Updates the knob
       * @private
       */

      value: function _updateDOM() {
        var canvasSize = this._ui.canvas.size;
        var position = this._operation.getPosition().clone().multiply(canvasSize);
        position.clamp(new Vector2(0, 0), canvasSize);

        this._knob.style.left = "" + position.x + "px";
        this._knob.style.top = "" + position.y + "px";

        var circleSize = this._operation.getGradientRadius() * 2;
        this._circle.style.left = "" + position.x + "px";
        this._circle.style.top = "" + position.y + "px";
        this._circle.style.width = "" + circleSize + "px";
        this._circle.style.height = "" + circleSize + "px";
        this._circle.style.marginLeft = "-" + circleSize / 2 + "px";
        this._circle.style.marginTop = "-" + circleSize / 2 + "px";
      },
      writable: true,
      configurable: true
    },
    _onBack: {

      /**
       * Gets called when the back button has been clicked
       * @override
       */

      value: function _onBack() {
        if (!this._initialIdentity) {
          this._operation.set(this._initialSettings);
          this._ui.canvas.render();
        } else {
          this._operation.isIdentity = this._initialIdentity;
          this._ui.canvas.render();
        }
      },
      writable: true,
      configurable: true
    },
    _onDone: {

      /**
       * Gets called when the done button has been clicked
       * @override
       */

      value: function _onDone() {
        this._ui.addHistory(this._operation, {
          position: this._initialSettings.position.clone(),
          gradientRadius: this._initialSettings.gradientRadius,
          blurRadius: this._initialSettings.blurRadius
        }, this._initialIdentity);
      },
      writable: true,
      configurable: true
    }
  });

  return RadialBlurControls;
})(Control);

module.exports = RadialBlurControls;

},{"../../../lib/math/vector2":"/Users/sash/development/js/imglykit-rewrite/src/js/lib/math/vector2.js","../../../lib/utils":"/Users/sash/development/js/imglykit-rewrite/src/js/lib/utils.js","../lib/simple-slider":"/Users/sash/development/js/imglykit-rewrite/src/js/ui/night/lib/simple-slider.js","./control":"/Users/sash/development/js/imglykit-rewrite/src/js/ui/night/controls/control.js"}],"/Users/sash/development/js/imglykit-rewrite/src/js/ui/night/controls/rotation.js":[function(require,module,exports){
"use strict";

var _interopRequire = function (obj) { return obj && obj.__esModule ? obj["default"] : obj; };

var _prototypeProperties = function (child, staticProps, instanceProps) { if (staticProps) Object.defineProperties(child, staticProps); if (instanceProps) Object.defineProperties(child.prototype, instanceProps); };

var _inherits = function (subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) subClass.__proto__ = superClass; };

var _classCallCheck = function (instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } };

/*!
 * Copyright (c) 2013-2015 9elements GmbH
 *
 * Released under Attribution-NonCommercial 3.0 Unported
 * http://creativecommons.org/licenses/by-nc/3.0/
 *
 * For commercial use, please contact us at contact@9elements.com
 */

var Control = _interopRequire(require("./control"));

var Vector2 = _interopRequire(require("../../../lib/math/vector2"));

var Symbol = _interopRequire(require("es6-symbol"));



var RotationControls = (function (Control) {
  function RotationControls() {
    _classCallCheck(this, RotationControls);

    if (Control != null) {
      Control.apply(this, arguments);
    }
  }

  _inherits(RotationControls, Control);

  _prototypeProperties(RotationControls, null, {
    identifier: {
      /**
       * A unique string that identifies this control.
       * @type {String}
       */

      get: function () {
        return "rotation";
      },
      configurable: true
    },
    init: {

      /**
       * Entry point for this control
       */

      value: function init() {
        this._operation = this._ui.operations.rotation;
        this._cropOperation = this._ui.operations.crop;

        var controlsTemplate = "<div class=\"imglykit-controls-rotation\">\n  <div class=\"imglykit-controls-button imglykit-controls-back\">\n    <img src=\"{{=it.helpers.assetPath('ui/night/buttons/back.png') }}\" />\n  </div>\n\n  <div>\n    <ul class=\"imglykit-controls-list imgly-controls-list-with-buttons\">\n      <li data-degrees=\"-90\">\n        <img src=\"{{=it.helpers.assetPath('ui/night/rotation/left.png')}}\" />\n      </li>\n      <li data-degrees=\"90\">\n        <img src=\"{{=it.helpers.assetPath('ui/night/rotation/right.png')}}\" />\n      </li>\n    </ul>\n  </div>\n\n  <div class=\"imglykit-controls-button imglykit-controls-done\">\n    <img src=\"{{=it.helpers.assetPath('ui/night/buttons/done.png') }}\" />\n  </div>\n</div>\n";
        this._controlsTemplate = controlsTemplate;

        var canvasControlsTemplate = "<div class=\"imglykit-canvas-crop-container imglykit-canvas-crop-container-hidden\">\n  <div class=\"imglykit-canvas-crop-top\">\n    <div class=\"imglykit-canvas-crop-top-left\"></div>\n    <div class=\"imglykit-canvas-crop-top-center\"></div>\n    <div class=\"imglykit-canvas-crop-top-right\"></div>\n  </div>\n\n  <div class=\"imglykit-canvas-crop-center\">\n    <div class=\"imglykit-canvas-crop-center-left\"></div>\n    <div class=\"imglykit-canvas-crop-center-center imglykit-canvas-crop-center-center-nomove\">\n\n    </div>\n    <div class=\"imglykit-canvas-crop-center-right\"></div>\n  </div>\n\n  <div class=\"imglykit-canvas-crop-bottom\">\n    <div class=\"imglykit-canvas-crop-bottom-left\"></div>\n    <div class=\"imglykit-canvas-crop-bottom-center\"></div>\n    <div class=\"imglykit-canvas-crop-bottom-right\"></div>\n  </div>\n</div>\n";
        this._canvasControlsTemplate = canvasControlsTemplate;
      },
      writable: true,
      configurable: true
    },
    _onEnter: {

      /**
       * Gets called when this control is activated
       */

      value: function _onEnter() {
        var _this = this;

        this._initialZoomLevel = this._ui.canvas.zoomLevel;
        this._ui.canvas.zoomToFit(false);

        // Store initial settings for "back" and "done" buttons
        this._initialStart = this._cropOperation.getStart().clone();
        this._initialEnd = this._cropOperation.getEnd().clone();
        this._initialIdentity = this._operation.isIdentity;

        // Make sure we see the whole input image
        this._cropOperation.set({
          start: new Vector2(0, 0),
          end: new Vector2(1, 1)
        });

        this._initialDegrees = this._operation.getDegrees();

        var listItems = this._controls.querySelectorAll("li");
        this._listItems = Array.prototype.slice.call(listItems);

        // Listen to click events
        var _iteratorNormalCompletion = true;
        var _didIteratorError = false;
        var _iteratorError = undefined;

        try {
          for (var _iterator = this._listItems[Symbol.iterator](), _step; !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = true) {
            (function () {
              var listItem = _step.value;

              listItem.addEventListener("click", function () {
                _this._onListItemClick(listItem);
              });
            })();
          }
        } catch (err) {
          _didIteratorError = true;
          _iteratorError = err;
        } finally {
          try {
            if (!_iteratorNormalCompletion && _iterator["return"]) {
              _iterator["return"]();
            }
          } finally {
            if (_didIteratorError) {
              throw _iteratorError;
            }
          }
        }

        // Find the div areas that affect the displayed crop size
        var prefix = ".imglykit-canvas-crop";
        this._cropAreas = {
          topLeft: this._canvasControls.querySelector("" + prefix + "-top-left"),
          topCenter: this._canvasControls.querySelector("" + prefix + "-top-center"),
          centerLeft: this._canvasControls.querySelector("" + prefix + "-center-left"),
          centerCenter: this._canvasControls.querySelector("" + prefix + "-center-center")
        };

        // Resume the rendering
        this._ui.canvas.render().then(function () {
          _this._showCropContainer();
          _this._updateCropDOM();
        });
      },
      writable: true,
      configurable: true
    },
    _showCropContainer: {

      /**
       * Shows the crop container which is hidden initially to avoid flickering
       * when resizing after the rendering
       * @private
       */

      value: function _showCropContainer() {
        var container = this._canvasControls.querySelector(".imglykit-canvas-crop-container");
        container.classList.remove("imglykit-canvas-crop-container-hidden");
      },
      writable: true,
      configurable: true
    },
    _onListItemClick: {

      /**
       * Gets called when the given item has been clicked
       * @param {DOMObject} item
       * @private
       */

      value: function _onListItemClick(item) {
        var _this = this;

        var degrees = item.dataset.degrees;

        degrees = parseInt(degrees);

        var currentDegrees = this._operation.getDegrees();
        this._operation.setDegrees(currentDegrees + degrees);
        this._ui.canvas.zoomToFit().then(function () {
          _this._updateCropDOM();
        });
      },
      writable: true,
      configurable: true
    },
    onZoom: {

      /**
       * Gets called when the zoom level has been changed while
       * this control is active
       */

      value: function onZoom() {
        this._updateCropDOM();
      },
      writable: true,
      configurable: true
    },
    _updateCropDOM: {

      /**
       * Updates the cropping divs for the current operation settings
       * @private
       */

      value: function _updateCropDOM() {
        var start = this._initialStart.clone();
        var end = this._initialEnd.clone();
        var canvasSize = this._ui.canvas.size;

        var startAbsolute = start.multiply(canvasSize);
        var endAbsolute = end.multiply(canvasSize);
        var size = endAbsolute.clone().subtract(startAbsolute);

        var top = Math.max(1, startAbsolute.y);
        var left = Math.max(1, startAbsolute.x);
        var width = Math.max(1, size.x);
        var height = Math.max(1, size.y);

        // widths are defined by top left and top center areas
        this._cropAreas.topLeft.style.width = "" + left + "px";
        this._cropAreas.topCenter.style.width = "" + width + "px";

        // heights are defined by top left and center left areas
        this._cropAreas.topLeft.style.height = "" + top + "px";
        this._cropAreas.centerLeft.style.height = "" + height + "px";
      },
      writable: true,
      configurable: true
    },
    _onBack: {

      /**
       * Gets called when the back button has been clicked
       * @override
       */

      value: function _onBack() {
        this._operation.setDegrees(this._initialDegrees);
        this._cropOperation.set({
          start: this._initialStart,
          end: this._initialEnd
        });
        this._ui.canvas.render();
      },
      writable: true,
      configurable: true
    },
    _onDone: {

      /**
       * Gets called when the done button has been clicked
       * @override
       */

      value: function _onDone() {
        this._cropOperation.set({
          start: this._initialStart,
          end: this._initialEnd
        });
        this._ui.canvas.render();

        this._ui.addHistory(this._operation, {
          degrees: this._initialDegrees
        }, this._initialIdentity);
      },
      writable: true,
      configurable: true
    }
  });

  return RotationControls;
})(Control);

module.exports = RotationControls;

},{"../../../lib/math/vector2":"/Users/sash/development/js/imglykit-rewrite/src/js/lib/math/vector2.js","./control":"/Users/sash/development/js/imglykit-rewrite/src/js/ui/night/controls/control.js","es6-symbol":"/Users/sash/development/js/imglykit-rewrite/node_modules/es6-symbol/index.js"}],"/Users/sash/development/js/imglykit-rewrite/src/js/ui/night/controls/saturation.js":[function(require,module,exports){
"use strict";

var _interopRequire = function (obj) { return obj && obj.__esModule ? obj["default"] : obj; };

var _prototypeProperties = function (child, staticProps, instanceProps) { if (staticProps) Object.defineProperties(child, staticProps); if (instanceProps) Object.defineProperties(child.prototype, instanceProps); };

var _get = function get(object, property, receiver) { var desc = Object.getOwnPropertyDescriptor(object, property); if (desc === undefined) { var parent = Object.getPrototypeOf(object); if (parent === null) { return undefined; } else { return get(parent, property, receiver); } } else if ("value" in desc && desc.writable) { return desc.value; } else { var getter = desc.get; if (getter === undefined) { return undefined; } return getter.call(receiver); } };

var _inherits = function (subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) subClass.__proto__ = superClass; };

var _classCallCheck = function (instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } };

/*!
 * Copyright (c) 2013-2015 9elements GmbH
 *
 * Released under Attribution-NonCommercial 3.0 Unported
 * http://creativecommons.org/licenses/by-nc/3.0/
 *
 * For commercial use, please contact us at contact@9elements.com
 */

var Slider = _interopRequire(require("../lib/slider"));

var Control = _interopRequire(require("./control"));



var SaturationControls = (function (Control) {
  function SaturationControls() {
    _classCallCheck(this, SaturationControls);

    if (Control != null) {
      Control.apply(this, arguments);
    }
  }

  _inherits(SaturationControls, Control);

  _prototypeProperties(SaturationControls, null, {
    identifier: {
      /**
       * A unique string that identifies this control.
       * @type {String}
       */

      get: function () {
        return "saturation";
      },
      configurable: true
    },
    init: {

      /**
       * Entry point for this control
       */

      value: function init() {
        this._operation = this._ui.operations.saturation;

        var controlsTemplate = "<div class=\"imglykit-controls-filters\">\n  <div class=\"imglykit-controls-button imglykit-controls-back\">\n    <img src=\"{{=it.helpers.assetPath('ui/night/buttons/back.png') }}\" />\n  </div>\n\n  <div>\n    {{#def.slider}}\n  </div>\n\n  <div class=\"imglykit-controls-button imglykit-controls-done\">\n    <img src=\"{{=it.helpers.assetPath('ui/night/buttons/done.png') }}\" />\n  </div>\n</div>\n";
        this._controlsTemplate = controlsTemplate;
        this._partialTemplates.push(Slider.template);
      },
      writable: true,
      configurable: true
    },
    _onEnter: {

      /**
       * Gets called when this control is activated
       * @override
       */

      value: function _onEnter() {
        _get(Object.getPrototypeOf(SaturationControls.prototype), "_onEnter", this).call(this);

        var sliderElement = this._controls.querySelector(".imglykit-slider");
        this._slider = new Slider(sliderElement, {
          minValue: 0,
          maxValue: 2
        });
        this._slider.on("update", this._onUpdate.bind(this));

        // Initially set value
        var saturation = this._operation.getSaturation();
        this._initialSaturation = saturation;
        this._slider.setValue(saturation);

        this._initialIdentity = this._operation.isIdentity;
      },
      writable: true,
      configurable: true
    },
    _onBack: {

      /**
       * Gets called when the back button has been clicked
       * @override
       */

      value: function _onBack() {
        _get(Object.getPrototypeOf(SaturationControls.prototype), "_onBack", this).call(this);
        this._operation.setSaturation(this._initialSaturation);
        this._ui.canvas.render();
      },
      writable: true,
      configurable: true
    },
    _onUpdate: {

      /**
       * Gets called when the value has been updated
       * @override
       */

      value: function _onUpdate(value) {
        this._operation.setSaturation(value);
        this._ui.canvas.render();
      },
      writable: true,
      configurable: true
    },
    _onDone: {

      /**
       * Gets called when the done button has been clicked
       * @override
       */

      value: function _onDone() {
        this._ui.addHistory(this._operation, {
          saturation: this._initialSaturation
        }, this._initialIdentity);
      },
      writable: true,
      configurable: true
    }
  });

  return SaturationControls;
})(Control);

module.exports = SaturationControls;

},{"../lib/slider":"/Users/sash/development/js/imglykit-rewrite/src/js/ui/night/lib/slider.js","./control":"/Users/sash/development/js/imglykit-rewrite/src/js/ui/night/controls/control.js"}],"/Users/sash/development/js/imglykit-rewrite/src/js/ui/night/controls/stickers.js":[function(require,module,exports){
"use strict";

var _interopRequire = function (obj) { return obj && obj.__esModule ? obj["default"] : obj; };

var _prototypeProperties = function (child, staticProps, instanceProps) { if (staticProps) Object.defineProperties(child, staticProps); if (instanceProps) Object.defineProperties(child.prototype, instanceProps); };

var _get = function get(object, property, receiver) { var desc = Object.getOwnPropertyDescriptor(object, property); if (desc === undefined) { var parent = Object.getPrototypeOf(object); if (parent === null) { return undefined; } else { return get(parent, property, receiver); } } else if ("value" in desc && desc.writable) { return desc.value; } else { var getter = desc.get; if (getter === undefined) { return undefined; } return getter.call(receiver); } };

var _inherits = function (subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) subClass.__proto__ = superClass; };

var _classCallCheck = function (instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } };

/*!
 * Copyright (c) 2013-2015 9elements GmbH
 *
 * Released under Attribution-NonCommercial 3.0 Unported
 * http://creativecommons.org/licenses/by-nc/3.0/
 *
 * For commercial use, please contact us at contact@9elements.com
 */

var Control = _interopRequire(require("./control"));

var Vector2 = _interopRequire(require("../../../lib/math/vector2"));

var Utils = _interopRequire(require("../../../lib/utils"));

var Symbol = _interopRequire(require("es6-symbol"));



var StickersControl = (function (Control) {
  function StickersControl() {
    _classCallCheck(this, StickersControl);

    if (Control != null) {
      Control.apply(this, arguments);
    }
  }

  _inherits(StickersControl, Control);

  _prototypeProperties(StickersControl, null, {
    identifier: {
      /**
       * A unique string that identifies this control.
       * @type {String}
       */

      get: function () {
        return "stickers";
      },
      configurable: true
    },
    init: {

      /**
       * Entry point for this control
       */

      value: function init() {
        this._operation = this._ui.operations.stickers;

        var controlsTemplate = "<div class=\"imglykit-controls-stickers\">\n  <div class=\"imglykit-controls-button imglykit-controls-back\">\n    <img src=\"{{=it.helpers.assetPath('ui/night/buttons/back.png') }}\" />\n  </div>\n\n  <div>\n    <ul class=\"imglykit-controls-list imgly-controls-list-with-buttons\">\n      {{ for(var identifier in it.stickers) { }}\n        {{ var stickerPath = it.stickers[identifier]; }}\n        {{ var enabled = it.activeSticker === identifier; }}\n        <li data-identifier=\"{{= identifier}}\"{{? enabled}} class=\"imglykit-controls-item-active\"{{?}} style=\"background-image: url('{{=it.helpers.assetPath(stickerPath)}}');\">\n        </li>\n      {{ } }}\n    </ul>\n  </div>\n\n  <div class=\"imglykit-controls-button imglykit-controls-done\">\n    <img src=\"{{=it.helpers.assetPath('ui/night/buttons/done.png') }}\" />\n  </div>\n</div>\n";
        this._controlsTemplate = controlsTemplate;

        var canvasControlsTemplate = "<div class=\"imglykit-canvas-stickers-container\">\n  <div class=\"imglykit-canvas-stickers\">\n    <img class=\"imglykit-canvas-sticker-image\" />\n    <div class=\"imglykit-knob\"></div>\n  </div>\n</div>\n";
        this._canvasControlsTemplate = canvasControlsTemplate;

        /**
         * The registered stickers
         * @type {Object.<string, class>}
         */
        this._availableStickers = {};
        this._stickers = {};
        this._addDefaultStickers();
        this.selectStickers(null);
      },
      writable: true,
      configurable: true
    },
    _addDefaultStickers: {

      /**
       * Registers the default stickers
       * @private
       */

      value: function _addDefaultStickers() {
        this.addSticker("glasses-nerd", "stickers/sticker-glasses-nerd.png");
        this.addSticker("glasses-normal", "stickers/sticker-glasses-normal.png");
        this.addSticker("glasses-shutter-green", "stickers/sticker-glasses-shutter-green.png");
        this.addSticker("glasses-shutter-yellow", "stickers/sticker-glasses-shutter-yellow.png");
        this.addSticker("glasses-sun", "stickers/sticker-glasses-sun.png");
        this.addSticker("hat-cap", "stickers/sticker-hat-cap.png");
        this.addSticker("hat-cylinder", "stickers/sticker-hat-cylinder.png");
        this.addSticker("hat-party", "stickers/sticker-hat-party.png");
        this.addSticker("hat-sheriff", "stickers/sticker-hat-sheriff.png");
        this.addSticker("heart", "stickers/sticker-heart.png");
        this.addSticker("mustache-long", "stickers/sticker-mustache-long.png");
        this.addSticker("mustache1", "stickers/sticker-mustache1.png");
        this.addSticker("mustache2", "stickers/sticker-mustache2.png");
        this.addSticker("mustache3", "stickers/sticker-mustache3.png");
        this.addSticker("pipe", "stickers/sticker-pipe.png");
        this.addSticker("snowflake", "stickers/sticker-snowflake.png");
        this.addSticker("star", "stickers/sticker-star.png");
      },
      writable: true,
      configurable: true
    },
    addSticker: {

      /**
       * Registers the sticker with the given identifier and path
       * @private
       */

      value: function addSticker(identifier, path) {
        this._availableStickers[identifier] = path;
      },
      writable: true,
      configurable: true
    },
    selectStickers: {

      /**
       * Selects the stickers
       * @param {Selector} selector
       */

      value: function selectStickers(selector) {
        this._stickers = {};

        var stickerIdentifiers = Object.keys(this._availableStickers);

        var selectedStickers = Utils.select(stickerIdentifiers, selector);
        var _iteratorNormalCompletion = true;
        var _didIteratorError = false;
        var _iteratorError = undefined;

        try {
          for (var _iterator = selectedStickers[Symbol.iterator](), _step; !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = true) {
            var identifier = _step.value;

            this._stickers[identifier] = this._availableStickers[identifier];
          }
        } catch (err) {
          _didIteratorError = true;
          _iteratorError = err;
        } finally {
          try {
            if (!_iteratorNormalCompletion && _iterator["return"]) {
              _iterator["return"]();
            }
          } finally {
            if (_didIteratorError) {
              throw _iteratorError;
            }
          }
        }

        if (this._active) {
          this._renderControls();
        }
      },
      writable: true,
      configurable: true
    },
    _onEnter: {

      /**
       * Gets called when this control is activated
       * @override
       */

      value: function _onEnter() {
        var _this = this;

        this._initialIdentity = this._operation.isIdentity;
        this._initialSettings = {
          sticker: this._operation.getSticker(),
          position: this._operation.getPosition().clone(),
          size: this._operation.getSize().clone()
        };

        this._size = this._initialSettings.size.clone();
        this._position = this._initialSettings.position.clone();

        // Don't render an already existing sticker as long as
        // we're editing
        this._operation.isIdentity = true;

        // Remember zoom level and zoom to fit the canvas
        this._initialZoomLevel = this._ui.canvas.zoomLevel;
        this._ui.canvas.zoomToFit(false);

        // Find DOM elements
        this._container = this._canvasControls.querySelector(".imglykit-canvas-stickers");
        this._stickerImage = this._canvasControls.querySelector("img");
        this._stickerImage.addEventListener("load", function () {
          _this._stickerSize = new Vector2(_this._stickerImage.width, _this._stickerImage.height);
          _this._onStickerLoad();
        });
        this._knob = this._canvasControls.querySelector("div.imglykit-knob");

        // Mouse event callbacks bound to the class context
        this._onImageDown = this._onImageDown.bind(this);
        this._onImageDrag = this._onImageDrag.bind(this);
        this._onImageUp = this._onImageUp.bind(this);
        this._onKnobDown = this._onKnobDown.bind(this);
        this._onKnobDrag = this._onKnobDrag.bind(this);
        this._onKnobUp = this._onKnobUp.bind(this);

        this._ui.canvas.render().then(function () {
          var canvasSize = _this._ui.canvas.size;
          _this._size.multiply(canvasSize);
          _this._position.multiply(canvasSize);
          if (!_this._initialIdentity) {
            _this._applySettings();
          }
        });

        this._handleListItems();
        this._handleImage();
        this._handleKnob();
      },
      writable: true,
      configurable: true
    },
    _handleListItems: {

      /**
       * Handles the list item click events
       * @private
       */

      value: function _handleListItems() {
        var _this = this;

        var listItems = this._controls.querySelectorAll("li");
        this._listItems = Array.prototype.slice.call(listItems);

        // Listen to click events
        var i = 0;
        var _iteratorNormalCompletion = true;
        var _didIteratorError = false;
        var _iteratorError = undefined;

        try {
          for (var _iterator = this._listItems[Symbol.iterator](), _step; !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = true) {
            (function () {
              var listItem = _step.value;
              var identifier = listItem.dataset.identifier;

              listItem.addEventListener("click", function () {
                _this._onListItemClick(listItem);
              });

              if (_this._initialIdentity && i === 0 || !_this._initialIdentity && _this._stickers[identifier] === _this._initialSettings.sticker) {
                _this._onListItemClick(listItem);
              }
              i++;
            })();
          }
        } catch (err) {
          _didIteratorError = true;
          _iteratorError = err;
        } finally {
          try {
            if (!_iteratorNormalCompletion && _iterator["return"]) {
              _iterator["return"]();
            }
          } finally {
            if (_didIteratorError) {
              throw _iteratorError;
            }
          }
        }
      },
      writable: true,
      configurable: true
    },
    _applySettings: {

      /**
       * Resizes and positions the sticker according to the current settings
       * @private
       */

      value: function _applySettings() {
        var ratio = this._stickerSize.y / this._stickerSize.x;
        this._size.y = this._size.x * ratio;

        this._stickerImage.style.width = "" + this._size.x + "px";
        this._stickerImage.style.height = "" + this._size.y + "px";
        this._container.style.left = "" + this._position.x + "px";
        this._container.style.top = "" + this._position.y + "px";
      },
      writable: true,
      configurable: true
    },
    _onBack: {

      /**
       * Gets called when the user hits the back button
       * @override
       */

      value: function _onBack() {
        if (!this._initialIdentity) {
          this._operation.set(this._initialSettings);
          this._ui.canvas.render();
        } else {
          this._operation.isIdentity = this._initialIdentity;
          this._ui.canvas.render();
        }

        this._ui.canvas.setZoomLevel(this._initialZoomLevel, false);
      },
      writable: true,
      configurable: true
    },
    _onDone: {

      /**
       * Gets called when the done button has been clicked
       * @protected
       */

      value: function _onDone() {
        // Map the position and size options to 0...1 values
        var canvasSize = this._ui.canvas.size;
        var position = this._position.clone().divide(canvasSize);
        var size = this._size.clone().divide(canvasSize);

        this._ui.canvas.setZoomLevel(this._initialZoomLevel, false);

        this._operation.set({
          sticker: this._availableStickers[this._sticker],
          position: position,
          size: size
        });
        this._ui.canvas.render();

        this._ui.addHistory(this, {
          sticker: this._initialSettings.sticker,
          position: this._initialSettings.position.clone(),
          size: this._initialSettings.size.clone()
        }, this._initialIdentity);
      },
      writable: true,
      configurable: true
    },
    _handleKnob: {

      /**
       * Handles the knob dragging
       * @private
       */

      value: function _handleKnob() {
        this._knob.addEventListener("mousedown", this._onKnobDown);
        this._knob.addEventListener("touchstart", this._onKnobDown);
      },
      writable: true,
      configurable: true
    },
    _onKnobDown: {

      /**
       * Gets called when the user clicks the knob
       * @param {Event} e
       * @private
       */

      value: function _onKnobDown(e) {
        e.preventDefault();

        this._initialMousePosition = Utils.getEventPosition(e);
        this._initialSize = this._size.clone();

        document.addEventListener("mousemove", this._onKnobDrag);
        document.addEventListener("touchmove", this._onKnobDrag);

        document.addEventListener("mouseup", this._onKnobUp);
        document.addEventListener("touchend", this._onKnobUp);
      },
      writable: true,
      configurable: true
    },
    _onKnobDrag: {

      /**
       * Gets called when the user drags the knob
       * @param {Event} e
       * @private
       */

      value: function _onKnobDrag(e) {
        e.preventDefault();

        var mousePosition = Utils.getEventPosition(e);
        var diff = mousePosition.clone().subtract(this._initialMousePosition);

        var size = this._initialSize.clone();
        var ratio = this._stickerImage.height / this._stickerImage.width;
        size.x += diff.x;
        size.y = size.x * ratio;

        this._size.copy(size);

        this._applySettings();
      },
      writable: true,
      configurable: true
    },
    _onKnobUp: {

      /**
       * Gets called when the user releases the knob
       * @param {Event} e
       * @private
       */

      value: function _onKnobUp(e) {
        document.removeEventListener("mousemove", this._onKnobDrag);
        document.removeEventListener("touchmove", this._onKnobDrag);

        document.removeEventListener("mouseup", this._onKnobUp);
        document.removeEventListener("touchend", this._onKnobUp);
      },
      writable: true,
      configurable: true
    },
    _handleImage: {

      /**
       * Handles the image dragging
       * @private
       */

      value: function _handleImage() {
        this._stickerImage.addEventListener("mousedown", this._onImageDown);
        this._stickerImage.addEventListener("touchstart", this._onImageDown);
      },
      writable: true,
      configurable: true
    },
    _onImageDown: {

      /**
       * Gets called when the user clicks the image
       * @param {Event} e
       * @private
       */

      value: function _onImageDown(e) {
        e.preventDefault();

        this._initialMousePosition = Utils.getEventPosition(e);
        this._initialPosition = this._position.clone();

        document.addEventListener("mousemove", this._onImageDrag);
        document.addEventListener("touchmove", this._onImageDrag);

        document.addEventListener("mouseup", this._onImageUp);
        document.addEventListener("touchend", this._onImageUp);
      },
      writable: true,
      configurable: true
    },
    _onImageDrag: {

      /**
       * Gets called when the user drags the image
       * @param {Event} e
       * @private
       */

      value: function _onImageDrag(e) {
        e.preventDefault();

        var mousePosition = Utils.getEventPosition(e);
        var diff = mousePosition.clone().subtract(this._initialMousePosition);

        var position = this._initialPosition.clone();
        position.add(diff);

        this._position.copy(position);

        this._applySettings();
      },
      writable: true,
      configurable: true
    },
    _onImageUp: {

      /**
       * Gets called when the user releases the image
       * @param {Event} e
       * @private
       */

      value: function _onImageUp(e) {
        document.removeEventListener("mousemove", this._onImageDrag);
        document.removeEventListener("touchmove", this._onImageDrag);

        document.removeEventListener("mouseup", this._onImageUp);
        document.removeEventListener("touchend", this._onImageUp);
      },
      writable: true,
      configurable: true
    },
    _onStickerLoad: {

      /**
       * Gets called as soon as the sticker image has been loaded
       * @private
       */

      value: function _onStickerLoad() {
        this._size = new Vector2(this._stickerImage.width, this._stickerImage.height);

        if (typeof this._position === "undefined") {
          this._position = new Vector2(0, 0);
        }

        if (this._initialIdentity) {
          this._applySettings();
        }
      },
      writable: true,
      configurable: true
    },
    _onListItemClick: {

      /**
       * Gets called when the user clicked a list item
       * @private
       */

      value: function _onListItemClick(item) {
        this._deactivateAllItems();

        var identifier = item.dataset.identifier;

        var stickerPath = this._availableStickers[identifier];
        stickerPath = this._kit.getAssetPath(stickerPath);

        try {
          this._stickerImage.attributes.removeNamedItem("style");
        } catch (e) {}

        this._sticker = identifier;
        this._stickerImage.src = stickerPath;

        item.classList.add("imglykit-controls-item-active");
      },
      writable: true,
      configurable: true
    },
    _deactivateAllItems: {

      /**
       * Deactivates all list items
       * @private
       */

      value: function _deactivateAllItems() {
        var _iteratorNormalCompletion = true;
        var _didIteratorError = false;
        var _iteratorError = undefined;

        try {
          for (var _iterator = this._listItems[Symbol.iterator](), _step; !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = true) {
            var listItem = _step.value;

            listItem.classList.remove("imglykit-controls-item-active");
          }
        } catch (err) {
          _didIteratorError = true;
          _iteratorError = err;
        } finally {
          try {
            if (!_iteratorNormalCompletion && _iterator["return"]) {
              _iterator["return"]();
            }
          } finally {
            if (_didIteratorError) {
              throw _iteratorError;
            }
          }
        }
      },
      writable: true,
      configurable: true
    },
    context: {

      /**
       * The data that is available to the template
       * @type {Object}
       * @override
       */

      get: function () {
        var context = _get(Object.getPrototypeOf(StickersControl.prototype), "context", this);
        context.stickers = this._stickers;
        return context;
      },
      configurable: true
    }
  });

  return StickersControl;
})(Control);

module.exports = StickersControl;

},{"../../../lib/math/vector2":"/Users/sash/development/js/imglykit-rewrite/src/js/lib/math/vector2.js","../../../lib/utils":"/Users/sash/development/js/imglykit-rewrite/src/js/lib/utils.js","./control":"/Users/sash/development/js/imglykit-rewrite/src/js/ui/night/controls/control.js","es6-symbol":"/Users/sash/development/js/imglykit-rewrite/node_modules/es6-symbol/index.js"}],"/Users/sash/development/js/imglykit-rewrite/src/js/ui/night/controls/text.js":[function(require,module,exports){
"use strict";

var _interopRequire = function (obj) { return obj && obj.__esModule ? obj["default"] : obj; };

var _prototypeProperties = function (child, staticProps, instanceProps) { if (staticProps) Object.defineProperties(child, staticProps); if (instanceProps) Object.defineProperties(child.prototype, instanceProps); };

var _get = function get(object, property, receiver) { var desc = Object.getOwnPropertyDescriptor(object, property); if (desc === undefined) { var parent = Object.getPrototypeOf(object); if (parent === null) { return undefined; } else { return get(parent, property, receiver); } } else if ("value" in desc && desc.writable) { return desc.value; } else { var getter = desc.get; if (getter === undefined) { return undefined; } return getter.call(receiver); } };

var _inherits = function (subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) subClass.__proto__ = superClass; };

var _classCallCheck = function (instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } };

/*!
 * Copyright (c) 2013-2015 9elements GmbH
 *
 * Released under Attribution-NonCommercial 3.0 Unported
 * http://creativecommons.org/licenses/by-nc/3.0/
 *
 * For commercial use, please contact us at contact@9elements.com
 */

var Control = _interopRequire(require("./control"));

var ColorPicker = _interopRequire(require("../lib/color-picker"));

var Vector2 = _interopRequire(require("../../../lib/math/vector2"));

var Utils = _interopRequire(require("../../../lib/utils"));

var Symbol = _interopRequire(require("es6-symbol"));



var TextControl = (function (Control) {
  function TextControl() {
    _classCallCheck(this, TextControl);

    if (Control != null) {
      Control.apply(this, arguments);
    }
  }

  _inherits(TextControl, Control);

  _prototypeProperties(TextControl, null, {
    identifier: {
      /**
       * A unique string that identifies this control.
       * @type {String}
       */

      get: function () {
        return "text";
      },
      configurable: true
    },
    init: {

      /**
       * Entry point for this control
       */

      value: function init() {
        this._operation = this._ui.operations.text;

        var controlsTemplate = "<div class=\"imglykit-controls-text\">\n  <div class=\"imglykit-controls-button imglykit-controls-back\">\n    <img src=\"{{=it.helpers.assetPath('ui/night/buttons/back.png') }}\" />\n  </div>\n\n  <div>\n    <ul class=\"imglykit-controls-list imgly-controls-list-with-buttons\">\n      {{~it.fonts :value:index}}\n        <li data-name=\"{{= value.name}}\" data-weight=\"{{= value.weight}}\" style=\"font-family: {{= value.name}}; font-weight: {{= value.weight}}\">{{= value.name.substr(0, 2)}}</li>\n      {{~}}\n    </ul>\n  </div>\n\n  <div class=\"imglykit-controls-button\">\n    {{var colorpickerId = \"imglykit-text-foreground-color-picker\";}}\n    {{#def.colorpicker}}\n  </div>\n\n  <div class=\"imglykit-controls-button\">\n    {{var colorpickerId = \"imglykit-text-background-color-picker\";}}\n    {{#def.colorpicker}}\n  </div>\n\n  <div class=\"imglykit-controls-button imglykit-controls-done\">\n    <img src=\"{{=it.helpers.assetPath('ui/night/buttons/done.png') }}\" />\n  </div>\n</div>\n";
        this._controlsTemplate = controlsTemplate;

        var canvasControlsTemplate = "<div class=\"imglykit-canvas-text-container\">\n  <div class=\"imglykit-canvas-text\">\n    <div class=\"imglykit-crosshair\">\n      <img src=\"{{=it.helpers.assetPath('ui/night/crosshair.png')}}\" />\n    </div>\n    <div class=\"imglykit-canvas-text-textarea\">\n      <textarea></textarea>\n      <div class=\"imglykit-knob\"></div>\n    </div>\n  </div>\n</div>\n";
        this._canvasControlsTemplate = canvasControlsTemplate;

        this._partialTemplates.push(ColorPicker.template);

        this._fonts = [];
        this._addFonts();
      },
      writable: true,
      configurable: true
    },
    _onEnter: {

      /**
       * Gets called when this control is activated
       * @override
       */

      value: function _onEnter() {
        var _this = this;

        var canvasSize = this._ui.canvas.size;

        this._initialIdentity = this._operation.isIdentity;
        this._initialSettings = {
          lineHeight: this._operation.getLineHeight(),
          fontSize: this._operation.getFontSize(),
          fontFamily: this._operation.getFontFamily(),
          fontWeight: this._operation.getFontWeight(),
          color: this._operation.getColor(),
          position: this._operation.getPosition(),
          text: this._operation.getText() || "",
          maxWidth: this._operation.getMaxWidth(),
          backgroundColor: this._operation.getBackgroundColor()
        };

        this._settings = {
          lineHeight: this._initialSettings.lineHeight,
          fontSize: this._initialSettings.fontSize,
          fontFamily: this._initialSettings.fontFamily,
          fontWeight: this._initialSettings.fontWeight,
          color: this._initialSettings.color.clone(),
          position: this._initialSettings.position.clone().multiply(canvasSize),
          text: this._initialSettings.text,
          maxWidth: this._initialSettings.maxWidth * canvasSize.x,
          backgroundColor: this._initialSettings.backgroundColor.clone()
        };

        // Don't render an already existing text as long as
        // we're editing
        this._operation.isIdentity = true;

        // Remember zoom level and zoom to fit the canvas
        this._initialZoomLevel = this._ui.canvas.zoomLevel;

        this._container = this._canvasControls.querySelector(".imglykit-canvas-text");
        this._textarea = this._canvasControls.querySelector("textarea");
        this._textarea.focus();

        this._moveKnob = this._canvasControls.querySelector(".imglykit-crosshair");
        this._resizeKnob = this._canvasControls.querySelector(".imglykit-knob");

        // If the text has been edited before, subtract the knob width and padding
        if (!this._initialIdentity) {
          this._settings.position.x -= 2;
          this._settings.position.y -= 2;
        }

        this._onTextareaKeyUp = this._onTextareaKeyUp.bind(this);
        this._onResizeKnobDown = this._onResizeKnobDown.bind(this);
        this._onResizeKnobDrag = this._onResizeKnobDrag.bind(this);
        this._onResizeKnobUp = this._onResizeKnobUp.bind(this);
        this._onMoveKnobDown = this._onMoveKnobDown.bind(this);
        this._onMoveKnobDrag = this._onMoveKnobDrag.bind(this);
        this._onMoveKnobUp = this._onMoveKnobUp.bind(this);
        this._onForegroundColorUpdate = this._onForegroundColorUpdate.bind(this);
        this._onBackgroundColorUpdate = this._onBackgroundColorUpdate.bind(this);

        this._initColorPickers();
        this._handleListItems();
        this._handleTextarea();
        this._handleResizeKnob();
        this._handleMoveKnob();
        this._resizeTextarea();

        this._ui.canvas.zoomToFit().then(function () {
          _this._applySettings();
        });
      },
      writable: true,
      configurable: true
    },
    _initColorPickers: {

      /**
       * Initializes the color pickers
       * @private
       */

      value: function _initColorPickers() {
        var foregroundColorPicker = this._controls.querySelector("#imglykit-text-foreground-color-picker");
        this._foregroundColorPicker = new ColorPicker(this._ui, foregroundColorPicker);
        this._foregroundColorPicker.setValue(this._operation.getColor());
        this._foregroundColorPicker.on("update", this._onForegroundColorUpdate);

        var backgroundColorPicker = this._controls.querySelector("#imglykit-text-background-color-picker");
        this._backgroundColorPicker = new ColorPicker(this._ui, backgroundColorPicker);
        this._backgroundColorPicker.setValue(this._operation.getBackgroundColor());
        this._backgroundColorPicker.on("update", this._onBackgroundColorUpdate);
      },
      writable: true,
      configurable: true
    },
    _handleListItems: {

      /**
       * Handles the list item click events
       * @private
       */

      value: function _handleListItems() {
        var _this = this;

        var listItems = this._controls.querySelectorAll("li");
        this._listItems = Array.prototype.slice.call(listItems);

        // Listen to click events
        var i = 0;
        var _iteratorNormalCompletion = true;
        var _didIteratorError = false;
        var _iteratorError = undefined;

        try {
          for (var _iterator = this._listItems[Symbol.iterator](), _step; !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = true) {
            (function () {
              var listItem = _step.value;

              listItem.addEventListener("click", function () {
                _this._onListItemClick(listItem);
              });

              if (_this._initialIdentity && i === 0 || !_this._initialIdentity && name === _this._initialSettings.fontFamily) {
                _this._onListItemClick(listItem);
              }
              i++;
            })();
          }
        } catch (err) {
          _didIteratorError = true;
          _iteratorError = err;
        } finally {
          try {
            if (!_iteratorNormalCompletion && _iterator["return"]) {
              _iterator["return"]();
            }
          } finally {
            if (_didIteratorError) {
              throw _iteratorError;
            }
          }
        }
      },
      writable: true,
      configurable: true
    },
    _handleTextarea: {

      /**
       * Handles the text area key events
       * @private
       */

      value: function _handleTextarea() {
        this._textarea.addEventListener("keyup", this._onTextareaKeyUp);
      },
      writable: true,
      configurable: true
    },
    _onTextareaKeyUp: {

      /**
       * Gets called when the user releases a key inside the text area
       * @private
       */

      value: function _onTextareaKeyUp() {
        this._resizeTextarea();
        this._settings.text = this._textarea.value;
      },
      writable: true,
      configurable: true
    },
    _resizeTextarea: {

      /**
       * Resizes the text area to fit the text inside of it
       * @private
       */

      value: function _resizeTextarea() {
        var scrollTop = this._textarea.scrollTop;

        if (!scrollTop) {
          var _scrollHeight = undefined,
              height = undefined;
          do {
            _scrollHeight = this._textarea.scrollHeight;
            height = this._textarea.offsetHeight;
            this._textarea.style.height = "" + (height - 5) + "px";
          } while (_scrollHeight && _scrollHeight != this._textarea.scrollHeight);
        }

        var scrollHeight = this._textarea.scrollHeight;
        this._textarea.style.height = "" + (scrollHeight + 20) + "px";
      },
      writable: true,
      configurable: true
    },
    _handleMoveKnob: {

      /**
       * Handles the move knob dragging
       * @private
       */

      value: function _handleMoveKnob() {
        this._moveKnob.addEventListener("mousedown", this._onMoveKnobDown);
        this._moveKnob.addEventListener("touchstart", this._onMoveKnobDown);
      },
      writable: true,
      configurable: true
    },
    _onMoveKnobDown: {

      /**
       * Gets called when the user clicks the move knob
       * @private
       */

      value: function _onMoveKnobDown(e) {
        e.preventDefault();

        this._initialMousePosition = Utils.getEventPosition(e);
        this._initialPosition = this._settings.position.clone();

        document.addEventListener("mousemove", this._onMoveKnobDrag);
        document.addEventListener("touchmove", this._onMoveKnobDrag);

        document.addEventListener("mouseup", this._onMoveKnobUp);
        document.addEventListener("tochend", this._onMoveKnobUp);
      },
      writable: true,
      configurable: true
    },
    _onMoveKnobDrag: {

      /**
       * Gets called when the user drags the move knob
       * @private
       */

      value: function _onMoveKnobDrag(e) {
        e.preventDefault();

        var canvasSize = this._ui.canvas.size;

        var mousePosition = Utils.getEventPosition(e);
        var diff = mousePosition.clone().subtract(this._initialMousePosition);

        var minPosition = new Vector2(0, 0);
        var containerSize = new Vector2(this._container.offsetWidth, this._container.offsetHeight);
        var maxPosition = canvasSize.clone().subtract(containerSize);
        var position = this._initialPosition.clone().add(diff).clamp(minPosition, maxPosition);

        this._settings.position = position;

        this._container.style.left = "" + position.x + "px";
        this._container.style.top = "" + position.y + "px";
      },
      writable: true,
      configurable: true
    },
    _onMoveKnobUp: {

      /**
       * Gets called when the user releases the move knob
       * @private
       */

      value: function _onMoveKnobUp() {
        document.removeEventListener("mousemove", this._onMoveKnobDrag);
        document.removeEventListener("touchmove", this._onMoveKnobDrag);

        document.removeEventListener("mouseup", this._onMoveKnobUp);
        document.removeEventListener("touchend", this._onMoveKnobUp);
      },
      writable: true,
      configurable: true
    },
    _handleResizeKnob: {

      /**
       * Handles the resize knob dragging
       * @private
       */

      value: function _handleResizeKnob() {
        this._resizeKnob.addEventListener("mousedown", this._onResizeKnobDown);
        this._resizeKnob.addEventListener("touchstart", this._onResizeKnobDown);
      },
      writable: true,
      configurable: true
    },
    _onResizeKnobDown: {

      /**
       * Gets called when the user clicks the resize knob
       * @param {Event} e
       * @private
       */

      value: function _onResizeKnobDown(e) {
        e.preventDefault();

        this._initialMousePosition = Utils.getEventPosition(e);
        this._initialMaxWidth = this._settings.maxWidth;

        document.addEventListener("mousemove", this._onResizeKnobDrag);
        document.addEventListener("touchmove", this._onResizeKnobDrag);

        document.addEventListener("mouseup", this._onResizeKnobUp);
        document.addEventListener("touchend", this._onResizeKnobUp);
      },
      writable: true,
      configurable: true
    },
    _onResizeKnobDrag: {

      /**
       * Gets called when the user drags the resize knob
       * @param {Event} e
       * @private
       */

      value: function _onResizeKnobDrag(e) {
        e.preventDefault();

        var canvasSize = this._ui.canvas.size;
        var mousePosition = Utils.getEventPosition(e);
        var diff = mousePosition.subtract(this._initialMousePosition);

        var position = this._settings.position.clone();
        var maxWidthAllowed = canvasSize.x - position.x;

        var maxWidth = this._initialMaxWidth + diff.x;
        maxWidth = Math.max(100, Math.min(maxWidthAllowed, maxWidth));
        this._settings.maxWidth = maxWidth;
        this._textarea.style.width = "" + maxWidth + "px";

        this._resizeTextarea();
      },
      writable: true,
      configurable: true
    },
    _onResizeKnobUp: {

      /**
       * Gets called when the user releases the resize knob
       * @param {Event} e
       * @private
       */

      value: function _onResizeKnobUp(e) {
        document.removeEventListener("mousemove", this._onResizeKnobDrag);
        document.removeEventListener("touchmove", this._onResizeKnobDrag);

        document.removeEventListener("mouseup", this._onResizeKnobUp);
        document.removeEventListener("touchend", this._onResizeKnobUp);
      },
      writable: true,
      configurable: true
    },
    _onForegroundColorUpdate: {

      /**
       * Gets called when the user selects another color using
       * the color picker.
       * @param {Color} value
       * @private
       */

      value: function _onForegroundColorUpdate(value) {
        this._settings.color = value;
        this._applySettings();
      },
      writable: true,
      configurable: true
    },
    _onBackgroundColorUpdate: {

      /**
       * Gets called when the user selects another color using
       * the color picker.
       * @param {Color} value
       * @private
       */

      value: function _onBackgroundColorUpdate(value) {
        this._settings.backgroundColor = value;
        this._applySettings();
      },
      writable: true,
      configurable: true
    },
    _applySettings: {

      /**
       * Styles the textarea to represent the current settings
       * @private
       */

      value: function _applySettings() {
        var textarea = this._textarea;
        var settings = this._settings;

        var canvasSize = this._ui.canvas.size;
        var actualFontSize = settings.fontSize * canvasSize.y;

        this._container.style.left = "" + settings.position.x + "px";
        this._container.style.top = "" + settings.position.y + "px";

        textarea.value = settings.text;
        textarea.style.fontFamily = settings.fontFamily;
        textarea.style.fontSize = "" + actualFontSize + "px";
        textarea.style.fontWeight = settings.fontWeight;
        textarea.style.lineHeight = settings.lineHeight;
        textarea.style.color = settings.color.toRGBA();
        textarea.style.backgroundColor = settings.backgroundColor.toRGBA();
        textarea.style.width = "" + settings.maxWidth + "px";
      },
      writable: true,
      configurable: true
    },
    _onListItemClick: {

      /**
       * Gets called when the user clicked a list item
       * @private
       */

      value: function _onListItemClick(item) {
        this._deactivateAllItems();

        var _item$dataset = item.dataset;
        var name = _item$dataset.name;
        var weight = _item$dataset.weight;

        this._settings.fontFamily = name;
        this._settings.fontWeight = weight;

        this._applySettings();

        item.classList.add("imglykit-controls-item-active");
      },
      writable: true,
      configurable: true
    },
    _deactivateAllItems: {

      /**
       * Deactivates all list items
       * @private
       */

      value: function _deactivateAllItems() {
        var _iteratorNormalCompletion = true;
        var _didIteratorError = false;
        var _iteratorError = undefined;

        try {
          for (var _iterator = this._listItems[Symbol.iterator](), _step; !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = true) {
            var listItem = _step.value;

            listItem.classList.remove("imglykit-controls-item-active");
          }
        } catch (err) {
          _didIteratorError = true;
          _iteratorError = err;
        } finally {
          try {
            if (!_iteratorNormalCompletion && _iterator["return"]) {
              _iterator["return"]();
            }
          } finally {
            if (_didIteratorError) {
              throw _iteratorError;
            }
          }
        }
      },
      writable: true,
      configurable: true
    },
    _addFonts: {

      /**
       * Adds the default fonts
       * @private
       */

      value: function _addFonts() {
        this.addFont("Helvetica", "normal");
        this.addFont("Lucida Grande", "normal");
        this.addFont("Times New Roman", "normal");
      },
      writable: true,
      configurable: true
    },
    addFont: {

      /**
       * Adds a font with the given name and weight
       * @param {String} name
       * @param {String} weight
       */

      value: function addFont(name, weight) {
        this._fonts.push({ name: name, weight: weight });
      },
      writable: true,
      configurable: true
    },
    _onDone: {

      /**
       * Gets called when the done button has been clicked
       * @override
       */

      value: function _onDone() {
        var canvasSize = this._ui.canvas.size;
        var padding = new Vector2(2, 2);
        var position = this._settings.position.clone().add(padding).divide(canvasSize);

        this._ui.canvas.setZoomLevel(this._initialZoomLevel, false);

        this._operation.set({
          fontSize: this._settings.fontSize,
          fontFamily: this._settings.fontFamily,
          fontWeight: this._settings.fontWeight,
          color: this._settings.color,
          backgroundColor: this._settings.backgroundColor,
          position: position,
          text: this._settings.text,
          maxWidth: this._settings.maxWidth / canvasSize.x
        });
        this._ui.canvas.render();

        this._ui.addHistory(this, {
          fontFamily: this._initialSettings.fontFamily,
          fontWeight: this._initialSettings.fontWeight,
          color: this._initialSettings.color.clone(),
          backgroundColor: this._initialSettings.backgroundColor.clone(),
          position: this._initialSettings.position.clone(),
          text: this._initialSettings.text,
          maxWidth: this._initialSettings.maxWidth
        }, this._initialIdentity);
      },
      writable: true,
      configurable: true
    },
    _onBack: {

      /**
       * Gets called when the back button has been clicked
       * @override
       */

      value: function _onBack() {
        if (!this._initialIdentity) {
          this._operation.set(this._initialSettings);
        } else {
          this._operation.isIdentity = this._initialIdentity;
          this._ui.canvas.render();
        }

        this._ui.canvas.setZoomLevel(this._initialZoomLevel, false);
      },
      writable: true,
      configurable: true
    },
    context: {

      /**
       * The data that is available to the template
       * @type {Object}
       * @override
       */

      get: function () {
        var context = _get(Object.getPrototypeOf(TextControl.prototype), "context", this);
        context.fonts = this._fonts;
        return context;
      },
      configurable: true
    }
  });

  return TextControl;
})(Control);

module.exports = TextControl;

},{"../../../lib/math/vector2":"/Users/sash/development/js/imglykit-rewrite/src/js/lib/math/vector2.js","../../../lib/utils":"/Users/sash/development/js/imglykit-rewrite/src/js/lib/utils.js","../lib/color-picker":"/Users/sash/development/js/imglykit-rewrite/src/js/ui/night/lib/color-picker.js","./control":"/Users/sash/development/js/imglykit-rewrite/src/js/ui/night/controls/control.js","es6-symbol":"/Users/sash/development/js/imglykit-rewrite/node_modules/es6-symbol/index.js"}],"/Users/sash/development/js/imglykit-rewrite/src/js/ui/night/controls/tilt-shift.js":[function(require,module,exports){
"use strict";

var _interopRequire = function (obj) { return obj && obj.__esModule ? obj["default"] : obj; };

var _prototypeProperties = function (child, staticProps, instanceProps) { if (staticProps) Object.defineProperties(child, staticProps); if (instanceProps) Object.defineProperties(child.prototype, instanceProps); };

var _get = function get(object, property, receiver) { var desc = Object.getOwnPropertyDescriptor(object, property); if (desc === undefined) { var parent = Object.getPrototypeOf(object); if (parent === null) { return undefined; } else { return get(parent, property, receiver); } } else if ("value" in desc && desc.writable) { return desc.value; } else { var getter = desc.get; if (getter === undefined) { return undefined; } return getter.call(receiver); } };

var _inherits = function (subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) subClass.__proto__ = superClass; };

var _classCallCheck = function (instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } };

/*!
 * Copyright (c) 2013-2015 9elements GmbH
 *
 * Released under Attribution-NonCommercial 3.0 Unported
 * http://creativecommons.org/licenses/by-nc/3.0/
 *
 * For commercial use, please contact us at contact@9elements.com
 */

var Control = _interopRequire(require("./control"));

var Vector2 = _interopRequire(require("../../../lib/math/vector2"));

var Utils = _interopRequire(require("../../../lib/utils"));

var SimpleSlider = _interopRequire(require("../lib/simple-slider"));

var Symbol = _interopRequire(require("es6-symbol"));



var TiltShiftControls = (function (Control) {
  function TiltShiftControls() {
    _classCallCheck(this, TiltShiftControls);

    if (Control != null) {
      Control.apply(this, arguments);
    }
  }

  _inherits(TiltShiftControls, Control);

  _prototypeProperties(TiltShiftControls, null, {
    identifier: {
      /**
       * A unique string that identifies this control.
       * @type {String}
       */

      get: function () {
        return "tilt-shift";
      },
      configurable: true
    },
    init: {

      /**
       * Entry point for this control
       */

      value: function init() {
        this._operation = this._ui.operations["tilt-shift"];

        var controlsTemplate = "<div class=\"imglykit-controls-tilt-shift\">\n  <div class=\"imglykit-controls-button imglykit-controls-back\">\n    <img src=\"{{=it.helpers.assetPath('ui/night/buttons/back.png') }}\" />\n  </div>\n\n  <div class=\"imglykit-controls-icon\">\n    <img src=\"{{=it.helpers.assetPath('ui/night/blur/blur.png')}}\" />\n  </div>\n\n  <div>\n    {{var sliderId = \"imglykit-blur-radius-slider\";}}\n    {{#def.simpleSlider}}\n  </div>\n\n  <div class=\"imglykit-controls-icon\">\n    <img src=\"{{=it.helpers.assetPath('ui/night/blur/radius.png')}}\" />\n  </div>\n\n  <div>\n    {{var sliderId = \"imglykit-gradient-radius-slider\";}}\n    {{#def.simpleSlider}}\n  </div>\n\n  <div class=\"imglykit-controls-button imglykit-controls-done\">\n    <img src=\"{{=it.helpers.assetPath('ui/night/buttons/done.png') }}\" />\n  </div>\n</div>\n";
        this._controlsTemplate = controlsTemplate;

        var canvasControlsTemplate = "<div class=\"imglykit-canvas-tilt-shift-container\">\n  <div class=\"imglykit-canvas-tilt-shift-dot\" data-option=\"start\"></div>\n  <div class=\"imglykit-canvas-tilt-shift-dot\" data-option=\"end\"></div>\n</div>\n";
        this._canvasControlsTemplate = canvasControlsTemplate;

        this._partialTemplates.push(SimpleSlider.template);
        this._currentKnob = null;
      },
      writable: true,
      configurable: true
    },
    _onEnter: {

      /**
       * Gets called when this control is activated
       * @override
       */

      value: function _onEnter() {
        var _this = this;

        _get(Object.getPrototypeOf(TiltShiftControls.prototype), "_onEnter", this).call(this);

        // Remember initial identity state
        this._initialIdentity = this._operation.isIdentity;
        this._initialSettings = {
          start: this._operation.getStart().clone(),
          end: this._operation.getEnd().clone(),
          gradientRadius: this._operation.getGradientRadius(),
          blurRadius: this._operation.getBlurRadius()
        };

        this._operation.isIdentity = false;

        // Mouse event callbacks bound to the class context
        this._onKnobDown = this._onKnobDown.bind(this);
        this._onKnobDrag = this._onKnobDrag.bind(this);
        this._onKnobUp = this._onKnobUp.bind(this);

        var selector = ".imglykit-canvas-tilt-shift-dot";
        this._startKnob = this._canvasControls.querySelector("" + selector + "[data-option=\"start\"]");
        this._endKnob = this._canvasControls.querySelector("" + selector + "[data-option=\"end\"]");
        this._knobs = [this._startKnob, this._endKnob];

        this._handleKnobs();
        this._initSliders();

        this._ui.canvas.render().then(function () {
          _this._updateDOM();
        });
      },
      writable: true,
      configurable: true
    },
    _initSliders: {

      /**
       * Initializes the slider controls
       * @private
       */

      value: function _initSliders() {
        var canvasSize = this._ui.canvas.size;

        var blurRadiusSlider = this._controls.querySelector("#imglykit-blur-radius-slider");
        this._blurRadiusSlider = new SimpleSlider(blurRadiusSlider, {
          minValue: 0,
          maxValue: 40
        });
        this._blurRadiusSlider.on("update", this._onBlurRadiusUpdate.bind(this));
        this._blurRadiusSlider.setValue(this._initialSettings.blurRadius);

        var gradientRadiusSlider = this._controls.querySelector("#imglykit-gradient-radius-slider");
        this._gradientRadiusSlider = new SimpleSlider(gradientRadiusSlider, {
          minValue: 1,
          maxValue: Math.max(canvasSize.y, canvasSize.x)
        });
        this._gradientRadiusSlider.on("update", this._onGradientRadiusUpdate.bind(this));
        this._gradientRadiusSlider.setValue(this._initialSettings.gradientRadius);
      },
      writable: true,
      configurable: true
    },
    _onBlurRadiusUpdate: {

      /**
       * Gets called when the value of the blur radius slider has been updated
       * @param {Number} value
       * @private
       */

      value: function _onBlurRadiusUpdate(value) {
        this._operation.setBlurRadius(value);
        this._ui.canvas.render();
      },
      writable: true,
      configurable: true
    },
    _onGradientRadiusUpdate: {

      /**
       * Gets called when the value of the gradient radius slider has been updated
       * @param {Number} value
       * @private
       */

      value: function _onGradientRadiusUpdate(value) {
        this._operation.setGradientRadius(value);
        this._updateDOM();
        this._ui.canvas.render();
      },
      writable: true,
      configurable: true
    },
    _handleKnobs: {

      /**
       * Handles the knob dragging
       * @private
       */

      value: function _handleKnobs() {
        var _this = this;

        var _iteratorNormalCompletion = true;
        var _didIteratorError = false;
        var _iteratorError = undefined;

        try {
          for (var _iterator = this._knobs[Symbol.iterator](), _step; !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = true) {
            (function () {
              var knob = _step.value;

              knob.addEventListener("mousedown", function (e) {
                _this._onKnobDown(knob, e);
              });
              knob.addEventListener("touchstart", function (e) {
                _this._onKnobDown(knob, e);
              });
            })();
          }
        } catch (err) {
          _didIteratorError = true;
          _iteratorError = err;
        } finally {
          try {
            if (!_iteratorNormalCompletion && _iterator["return"]) {
              _iterator["return"]();
            }
          } finally {
            if (_didIteratorError) {
              throw _iteratorError;
            }
          }
        }
      },
      writable: true,
      configurable: true
    },
    _onKnobDown: {

      /**
       * Gets called when the user starts dragging the knob
       * @param {DOMElement} knob
       * @param {Event} e
       * @private
       */

      value: function _onKnobDown(knob, e) {
        e.preventDefault();

        this._currentKnob = knob;
        this._initialMousePosition = Utils.getEventPosition(e);

        var option = knob.dataset.option;

        var capitalized = option.charAt(0).toUpperCase() + option.slice(1);
        this._valueBeforeDrag = this._operation["get" + capitalized]();

        document.addEventListener("mousemove", this._onKnobDrag);
        document.addEventListener("touchmove", this._onKnobDrag);

        document.addEventListener("mouseup", this._onKnobUp);
        document.addEventListener("touchend", this._onKnobUp);
      },
      writable: true,
      configurable: true
    },
    _onKnobDrag: {

      /**
       * Gets called while the user starts drags the knob
       * @param {Event} e
       * @private
       */

      value: function _onKnobDrag(e) {
        e.preventDefault();

        var canvasSize = this._ui.canvas.size;
        var mousePosition = Utils.getEventPosition(e);
        var diff = mousePosition.subtract(this._initialMousePosition);

        var option = this._currentKnob.dataset.option;

        var capitalized = option.charAt(0).toUpperCase() + option.slice(1);

        var newPosition = this._valueBeforeDrag.clone().multiply(canvasSize).add(diff).divide(canvasSize);
        this._operation["set" + capitalized](newPosition);
        this._updateDOM();
        this._ui.canvas.render();
      },
      writable: true,
      configurable: true
    },
    _onKnobUp: {

      /**
       * Gets called when the user stops dragging the knob
       * @param {Event} e
       * @private
       */

      value: function _onKnobUp(e) {
        e.preventDefault();

        document.removeEventListener("mousemove", this._onKnobDrag);
        document.removeEventListener("touchmove", this._onKnobDrag);

        document.removeEventListener("mouseup", this._onKnobUp);
        document.removeEventListener("touchend", this._onKnobUp);
      },
      writable: true,
      configurable: true
    },
    _updateDOM: {

      /**
       * Updates the knob
       * @private
       */

      value: function _updateDOM() {
        var canvasSize = this._ui.canvas.size;
        var start = this._operation.getStart().clone().multiply(canvasSize);
        start.clamp(new Vector2(0, 0), canvasSize);

        this._startKnob.style.left = "" + start.x + "px";
        this._startKnob.style.top = "" + start.y + "px";

        var end = this._operation.getEnd().clone().multiply(canvasSize);
        end.clamp(new Vector2(0, 0), canvasSize);

        this._endKnob.style.left = "" + end.x + "px";
        this._endKnob.style.top = "" + end.y + "px";
      },
      writable: true,
      configurable: true
    },
    _onBack: {

      /**
       * Gets called when the back button has been clicked
       * @override
       */

      value: function _onBack() {
        if (!this._initialIdentity) {
          this._operation.set(this._initialSettings);
          this._ui.canvas.render();
        } else {
          this._operation.isIdentity = this._initialIdentity;
          this._ui.canvas.render();
        }
      },
      writable: true,
      configurable: true
    },
    _onDone: {

      /**
       * Gets called when the done button has been clicked
       * @override
       */

      value: function _onDone() {
        this._ui.addHistory(this._operation, {
          start: this._initialSettings.start.clone(),
          end: this._initialSettings.end.clone(),
          blurRadius: this._initialSettings.blurRadius,
          gradientRadius: this._initialSettings.gradientRadius
        }, this._initialIdentity);
      },
      writable: true,
      configurable: true
    }
  });

  return TiltShiftControls;
})(Control);

module.exports = TiltShiftControls;

},{"../../../lib/math/vector2":"/Users/sash/development/js/imglykit-rewrite/src/js/lib/math/vector2.js","../../../lib/utils":"/Users/sash/development/js/imglykit-rewrite/src/js/lib/utils.js","../lib/simple-slider":"/Users/sash/development/js/imglykit-rewrite/src/js/ui/night/lib/simple-slider.js","./control":"/Users/sash/development/js/imglykit-rewrite/src/js/ui/night/controls/control.js","es6-symbol":"/Users/sash/development/js/imglykit-rewrite/node_modules/es6-symbol/index.js"}],"/Users/sash/development/js/imglykit-rewrite/src/js/ui/night/lib/canvas.js":[function(require,module,exports){
"use strict";

var _interopRequire = function (obj) { return obj && obj.__esModule ? obj["default"] : obj; };

var _prototypeProperties = function (child, staticProps, instanceProps) { if (staticProps) Object.defineProperties(child, staticProps); if (instanceProps) Object.defineProperties(child.prototype, instanceProps); };

var _get = function get(object, property, receiver) { var desc = Object.getOwnPropertyDescriptor(object, property); if (desc === undefined) { var parent = Object.getPrototypeOf(object); if (parent === null) { return undefined; } else { return get(parent, property, receiver); } } else if ("value" in desc && desc.writable) { return desc.value; } else { var getter = desc.get; if (getter === undefined) { return undefined; } return getter.call(receiver); } };

var _inherits = function (subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) subClass.__proto__ = superClass; };

var _classCallCheck = function (instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } };

/*!
 * Copyright (c) 2013-2015 9elements GmbH
 *
 * Released under Attribution-NonCommercial 3.0 Unported
 * http://creativecommons.org/licenses/by-nc/3.0/
 *
 * For commercial use, please contact us at contact@9elements.com
 */

var bluebird = _interopRequire(require("bluebird"));

var WebGLRenderer = _interopRequire(require("../../../renderers/webgl-renderer"));

var CanvasRenderer = _interopRequire(require("../../../renderers/canvas-renderer"));

var Vector2 = _interopRequire(require("../../../lib/math/vector2"));

var EventEmitter = _interopRequire(require("../../../lib/event-emitter"));

var Symbol = _interopRequire(require("es6-symbol"));

var Canvas = (function (EventEmitter) {
  function Canvas(kit, ui, options) {
    _classCallCheck(this, Canvas);

    _get(Object.getPrototypeOf(Canvas.prototype), "constructor", this).call(this);

    this._kit = kit;
    this._ui = ui;
    this._options = options;

    var container = this._ui.container;

    this._canvasContainer = container.querySelector(".imglykit-canvas-container");
    this._canvasInnerContainer = container.querySelector(".imglykit-canvas-inner-container");
    this._canvas = this._canvasContainer.querySelector("canvas");
    this._image = this._options.image;
    this._roundZoomBy = 0.1;
    this._isFirstRender = true;

    // Mouse event callbacks bound to the class context
    this._dragOnMousedown = this._dragOnMousedown.bind(this);
    this._dragOnMousemove = this._dragOnMousemove.bind(this);
    this._dragOnMouseup = this._dragOnMouseup.bind(this);
  }

  _inherits(Canvas, EventEmitter);

  _prototypeProperties(Canvas, null, {
    run: {

      /**
       * Initializes the renderer, sets the zoom level and initially
       * renders the operations stack
       */

      value: function run() {
        this._initRenderer();

        // Calculate the initial zoom level
        this._zoomLevel = this._getInitialZoomLevel();
        this._initialZoomLevel = this._zoomLevel;
        this._isInitialZoom = true;
        this._size = null;

        this.render();
        this._centerCanvas();
        this._handleDrag();
      },
      writable: true,
      configurable: true
    },
    render: {

      /**
       * Renders the current operations stack
       */

      value: function render() {
        var _this = this;

        this._initialZoomLevel = this._getInitialZoomLevel();

        // Reset the zoom level to initial
        // Some operations change the texture resolution (e.g. rotation)
        // If we're on initial zoom level, we still want to make the canvas
        // fit into the container. Find the new initial zoom level and set it.
        if (this._isInitialZoom) {
          this.setZoomLevel(this._initialZoomLevel, false);
        }

        // Calculate the initial size
        var imageSize = new Vector2(this._image.width, this._image.height);
        var initialSize = imageSize.multiply(this._zoomLevel);
        this._setCanvasSize(initialSize);

        // Reset framebuffers
        this._renderer.reset();

        // On first render, draw the image to the input texture
        if (this._isFirstRender || this._renderer.constructor.identifier === "canvas") {
          this._renderer.drawImage(this._image);
          this._isFirstRender = false;
        }

        // Run the operations stack
        var stack = this._actualStack;
        this._updateStackDirtyStates(stack);

        return bluebird
        // Validate all settings
        .map(stack, function (operation) {
          return operation.validateSettings();
        })
        // Render the operations stack
        .then(function () {
          return bluebird.map(stack, function (operation) {
            return operation.render(_this._renderer);
          }, { concurrency: 1 });
        })
        // Render the final image
        .then(function () {
          return _this._renderer.renderFinal();
        })
        // Update the margins and boundaries
        .then(function () {
          _this._storeCanvasSize();
          _this._updateContainerSize();
          _this._updateCanvasMargins();
          _this._applyBoundaries();
        });
      },
      writable: true,
      configurable: true
    },
    zoomIn: {

      /**
       * Increase zoom level
       */

      value: function zoomIn() {
        this._isInitialZoom = false;

        var zoomLevel = Math.round(this._zoomLevel * 100);
        var roundZoomBy = Math.round(this._roundZoomBy * 100);
        var initialZoomLevel = Math.round(this._initialZoomLevel * 100);

        // Round up if needed
        if (zoomLevel % roundZoomBy !== 0) {
          zoomLevel = Math.ceil(zoomLevel / roundZoomBy) * roundZoomBy;
        } else {
          zoomLevel += roundZoomBy;
        }

        zoomLevel = Math.min(initialZoomLevel * 2, zoomLevel);
        return this.setZoomLevel(zoomLevel / 100);
      },
      writable: true,
      configurable: true
    },
    zoomOut: {

      /**
       * Decrease zoom level
       */

      value: function zoomOut() {
        this._isInitialZoom = false;

        var zoomLevel = Math.round(this._zoomLevel * 100);
        var roundZoomBy = Math.round(this._roundZoomBy * 100);
        var initialZoomLevel = Math.round(this._initialZoomLevel * 100);

        // Round up if needed
        if (zoomLevel % roundZoomBy !== 0) {
          zoomLevel = Math.floor(zoomLevel / roundZoomBy) * roundZoomBy;
        } else {
          zoomLevel -= roundZoomBy;
        }

        zoomLevel = Math.max(initialZoomLevel, zoomLevel);
        return this.setZoomLevel(zoomLevel / 100);
      },
      writable: true,
      configurable: true
    },
    _setCanvasSize: {

      /**
       * Resizes and positions the canvas
       * @param {Vector2} [size]
       * @private
       */

      value: function _setCanvasSize(size) {
        size = size || new Vector2(this._canvas.width, this._canvas.height);

        this._canvas.width = size.x;
        this._canvas.height = size.y;

        this._storeCanvasSize();
        this._updateContainerSize();
      },
      writable: true,
      configurable: true
    },
    _updateContainerSize: {

      /**
       * Updates the canvas container size
       * @private
       */

      value: function _updateContainerSize() {
        var size = this._size;
        this._canvasInnerContainer.style.width = "" + size.x + "px";
        this._canvasInnerContainer.style.height = "" + size.y + "px";
      },
      writable: true,
      configurable: true
    },
    _storeCanvasSize: {

      /**
       * Remembers the canvas size
       * @comment This was introduced because the canvas size was not always
       *          correct due to some race conditions. Now that promises work
       *          properly, do we still need this?
       * @private
       */

      value: function _storeCanvasSize() {
        this._size = new Vector2(this._canvas.width, this._canvas.height);
      },
      writable: true,
      configurable: true
    },
    _centerCanvas: {

      /**
       * Centers the canvas inside the container
       * @private
       */

      value: function _centerCanvas() {
        var position = this._maxSize.divide(2);

        this._canvasInnerContainer.style.left = "" + position.x + "px";
        this._canvasInnerContainer.style.top = "" + position.y + "px";

        this._updateCanvasMargins();
      },
      writable: true,
      configurable: true
    },
    _updateCanvasMargins: {

      /**
       * Updates the canvas margins so that they are the negative half width
       * and height of the canvas
       * @private
       */

      value: function _updateCanvasMargins() {
        var canvasSize = new Vector2(this._canvas.width, this._canvas.height);
        var margin = canvasSize.divide(2).multiply(-1);
        this._canvasInnerContainer.style.marginLeft = "" + margin.x + "px";
        this._canvasInnerContainer.style.marginTop = "" + margin.y + "px";
      },
      writable: true,
      configurable: true
    },
    setZoomLevel: {

      /**
       * Sets the zoom level, re-renders the canvas and
       * repositions it
       * @param {Number} zoomLevel
       * @param {Boolean} render
       * @private
       */

      value: function setZoomLevel(zoomLevel) {
        var _this = this;

        var render = arguments[1] === undefined ? true : arguments[1];

        this._zoomLevel = zoomLevel;
        if (render) {
          this.setAllOperationsToDirty();
          return this.render().then(function () {
            _this._updateCanvasMargins();
            _this._applyBoundaries();
            _this.emit("zoom"); // will be redirected to top controls
          });
        } else {
          this._updateCanvasMargins();
          this._applyBoundaries();
          this.emit("zoom"); // will be redirected to top controls
        }
      },
      writable: true,
      configurable: true
    },
    setAllOperationsToDirty: {

      /**
       * Sets all operations to dirty
       */

      value: function setAllOperationsToDirty() {
        var _iteratorNormalCompletion = true;
        var _didIteratorError = false;
        var _iteratorError = undefined;

        try {
          for (var _iterator = this._kit.operationsStack[Symbol.iterator](), _step; !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = true) {
            var operation = _step.value;

            operation.dirty = true;
          }
        } catch (err) {
          _didIteratorError = true;
          _iteratorError = err;
        } finally {
          try {
            if (!_iteratorNormalCompletion && _iterator["return"]) {
              _iterator["return"]();
            }
          } finally {
            if (_didIteratorError) {
              throw _iteratorError;
            }
          }
        }
      },
      writable: true,
      configurable: true
    },
    _getInitialZoomLevel: {

      /**
       * Gets the initial zoom level so that the image fits the maximum
       * canvas size
       * @private
       */

      value: function _getInitialZoomLevel() {
        var cropOperation = this._ui.operations.crop;
        var rotationOperation = this._ui.operations.rotation;
        var cropSize = cropOperation.getEnd().clone().subtract(cropOperation.getStart());

        if (cropOperation.isIdentity) {
          cropSize.set(1, 1);
        }

        var inputSize = new Vector2(this._image.width, this._image.height);
        var croppedSize = inputSize.clone().multiply(cropSize);

        // Has the image been rotated?
        if (rotationOperation && !rotationOperation.isIdentity && rotationOperation.getDegrees() % 180 !== 0) {
          var tempX = croppedSize.x;
          croppedSize.x = croppedSize.y;
          croppedSize.y = tempX;
        }

        var finalSize = this._resizeVectorToFit(croppedSize);

        // Rotate back to be able to find the final size
        if (rotationOperation && !rotationOperation.isIdentity && rotationOperation.getDegrees() % 180 !== 0) {
          var tempX = finalSize.x;
          finalSize.x = finalSize.y;
          finalSize.y = tempX;
        }

        var initialSize = finalSize.clone().divide(cropSize);
        return initialSize.x / inputSize.x;
      },
      writable: true,
      configurable: true
    },
    _resizeVectorToFit: {

      /**
       * Resizes the given two-dimensional vector so that it fits
       * the maximum size.
       * @private
       */

      value: function _resizeVectorToFit(size) {
        var maxSize = this._maxSize;
        var scale = Math.min(maxSize.x / size.x, maxSize.y / size.y);

        var newSize = size.clone().multiply(scale);

        return newSize;
      },
      writable: true,
      configurable: true
    },
    _initRenderer: {

      /**
       * Initializes the renderer
       * @private
       */

      value: function _initRenderer() {
        var _this = this;

        if (WebGLRenderer.isSupported() && this._options.renderer !== "canvas") {
          this._renderer = new WebGLRenderer(null, this._canvas);
          this._webglEnabled = true;
        } else if (CanvasRenderer.isSupported()) {
          this._renderer = new CanvasRenderer(null, this._canvas);
          this._webglEnabled = false;
        }

        if (this._renderer === null) {
          throw new Error("Neither Canvas nor WebGL renderer are supported.");
        }

        this._renderer.on("new-canvas", function (canvas) {
          _this._setCanvas(canvas);
        });
      },
      writable: true,
      configurable: true
    },
    _setCanvas: {

      /**
       * Replaces the canvas with the given canvas, updates margins etc
       * @param {DOMElement} canvas
       * @private
       */

      value: function _setCanvas(canvas) {
        var canvasParent = this._canvas.parentNode;
        canvasParent.removeChild(this._canvas);
        this._canvas = canvas;
        canvasParent.appendChild(this._canvas);

        this._updateCanvasMargins();
        this._applyBoundaries();
        this._updateContainerSize();
      },
      writable: true,
      configurable: true
    },
    _handleDrag: {

      /**
       * Handles the dragging
       * @private
       */

      value: function _handleDrag() {
        this._canvas.addEventListener("mousedown", this._dragOnMousedown);
        this._canvas.addEventListener("touchstart", this._dragOnMousedown);
      },
      writable: true,
      configurable: true
    },
    _dragOnMousedown: {

      /**
       * Gets called when the user started touching / clicking the canvas
       * @param {Event} e
       * @private
       */

      value: function _dragOnMousedown(e) {
        if (e.type === "mousedown" && e.button !== 0) {
          return;
        }e.preventDefault();

        var x = e.pageX,
            y = e.pageY;
        if (e.type === "touchstart") {
          x = e.touches[0].pageX;
          y = e.touches[0].pageY;
        }

        var canvasX = parseInt(this._canvasInnerContainer.style.left);
        var canvasY = parseInt(this._canvasInnerContainer.style.top);

        document.addEventListener("mousemove", this._dragOnMousemove);
        document.addEventListener("touchmove", this._dragOnMousemove);

        document.addEventListener("mouseup", this._dragOnMouseup);
        document.addEventListener("touchend", this._dragOnMouseup);

        // Remember initial position
        this._initialMousePosition = new Vector2(x, y);
        this._initialCanvasPosition = new Vector2(canvasX, canvasY);
      },
      writable: true,
      configurable: true
    },
    _dragOnMousemove: {

      /**
       * Gets called when the user drags the canvas
       * @param {Event} e
       * @private
       */

      value: function _dragOnMousemove(e) {
        e.preventDefault();

        var x = e.pageX,
            y = e.pageY;
        if (e.type === "touchmove") {
          x = e.touches[0].pageX;
          y = e.touches[0].pageY;
        }

        var newMousePosition = new Vector2(x, y);
        var mouseDiff = newMousePosition.clone().subtract(this._initialMousePosition);
        var newPosition = this._initialCanvasPosition.clone().add(mouseDiff);

        this._canvasInnerContainer.style.left = "" + newPosition.x + "px";
        this._canvasInnerContainer.style.top = "" + newPosition.y + "px";

        this._applyBoundaries();
      },
      writable: true,
      configurable: true
    },
    _applyBoundaries: {

      /**
       * Makes sure the canvas positions are within the boundaries
       * @private
       */

      value: function _applyBoundaries() {
        var x = parseInt(this._canvasInnerContainer.style.left);
        var y = parseInt(this._canvasInnerContainer.style.top);
        var canvasPosition = new Vector2(x, y);

        // Boundaries
        var boundaries = this._boundaries;
        canvasPosition.x = Math.min(boundaries.max.x, Math.max(boundaries.min.x, canvasPosition.x));
        canvasPosition.y = Math.min(boundaries.max.y, Math.max(boundaries.min.y, canvasPosition.y));

        this._canvasInnerContainer.style.left = "" + canvasPosition.x + "px";
        this._canvasInnerContainer.style.top = "" + canvasPosition.y + "px";
      },
      writable: true,
      configurable: true
    },
    _dragOnMouseup: {

      /**
       * Gets called when the user stopped dragging the canvsa
       * @param {Event} e
       * @private
       */

      value: function _dragOnMouseup(e) {
        e.preventDefault();

        document.removeEventListener("mousemove", this._dragOnMousemove);
        document.removeEventListener("touchmove", this._dragOnMousemove);

        document.removeEventListener("mouseup", this._dragOnMouseup);
        document.removeEventListener("touchend", this._dragOnMouseup);
      },
      writable: true,
      configurable: true
    },
    _boundaries: {

      /**
       * The position boundaries for the canvas inside the container
       * @type {Object.<Vector2>}
       * @private
       */

      get: function () {
        var canvasSize = new Vector2(this._canvas.width, this._canvas.height);
        var maxSize = this._maxSize;

        var diff = canvasSize.clone().subtract(maxSize).multiply(-1);

        var boundaries = {
          min: new Vector2(diff.x, diff.y),
          max: new Vector2(0, 0)
        };

        if (canvasSize.x < maxSize.x) {
          boundaries.min.x = diff.x / 2;
          boundaries.max.x = diff.x / 2;
        }

        if (canvasSize.y < maxSize.y) {
          boundaries.min.y = diff.y / 2;
          boundaries.max.y = diff.y / 2;
        }

        var halfCanvasSize = canvasSize.clone().divide(2);
        boundaries.min.add(halfCanvasSize);
        boundaries.max.add(halfCanvasSize);
        return boundaries;
      },
      configurable: true
    },
    _maxSize: {

      /**
       * The maximum canvas size
       * @private
       */

      get: function () {
        var computedStyle = getComputedStyle(this._canvasContainer);
        var size = new Vector2(this._canvasContainer.offsetWidth, this._canvasContainer.offsetHeight);

        var paddingX = parseInt(computedStyle.getPropertyValue("padding-left"));
        paddingX += parseInt(computedStyle.getPropertyValue("padding-right"));

        var paddingY = parseInt(computedStyle.getPropertyValue("padding-top"));
        paddingY += parseInt(computedStyle.getPropertyValue("padding-bottom"));

        size.x -= paddingX;
        size.y -= paddingY;

        var controlsHeight = this._ui._controlsContainer.offsetHeight;
        size.y -= controlsHeight;

        return size;
      },
      configurable: true
    },
    _actualStack: {

      /**
       * Filters the operation stack so that only the operations that are not
       * set to the default settings are used.
       * @private
       */

      get: function () {
        var stack = this._kit.operationsStack.filter(function (op) {
          return !op.isIdentity;
        });
        return stack;
      },
      configurable: true
    },
    _updateStackDirtyStates: {

      /**
       * Find the first dirty operation of the stack and sets all following
       * operations to dirty
       * @param {Array.<Operation>} stack
       * @private
       */

      value: function _updateStackDirtyStates(stack) {
        var dirtyFound = false;
        var _iteratorNormalCompletion = true;
        var _didIteratorError = false;
        var _iteratorError = undefined;

        try {
          for (var _iterator = stack[Symbol.iterator](), _step; !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = true) {
            var operation = _step.value;

            if (operation.dirty) {
              dirtyFound = true;
            }

            if (dirtyFound) {
              operation.dirty = true;
            }
          }
        } catch (err) {
          _didIteratorError = true;
          _iteratorError = err;
        } finally {
          try {
            if (!_iteratorNormalCompletion && _iterator["return"]) {
              _iterator["return"]();
            }
          } finally {
            if (_didIteratorError) {
              throw _iteratorError;
            }
          }
        }
      },
      writable: true,
      configurable: true
    },
    zoomToFit: {

      /**
       * Zooms the canvas so that it fits the container
       * @param {Boolean} render
       */

      value: function zoomToFit() {
        var render = arguments[0] === undefined ? true : arguments[0];

        var initialZoomLevel = this._getInitialZoomLevel();
        return this.setZoomLevel(initialZoomLevel, render);
      },
      writable: true,
      configurable: true
    },
    zoomLevel: {

      /**
       * The current zoom level
       * @type {Number}
       */

      get: function () {
        return this._zoomLevel;
      },
      configurable: true
    },
    size: {

      /**
       * The canvas size in pixels
       * @type {Vector2}
       */

      get: function () {
        return this._size;
      },
      configurable: true
    }
  });

  return Canvas;
})(EventEmitter);

module.exports = Canvas;

},{"../../../lib/event-emitter":"/Users/sash/development/js/imglykit-rewrite/src/js/lib/event-emitter.js","../../../lib/math/vector2":"/Users/sash/development/js/imglykit-rewrite/src/js/lib/math/vector2.js","../../../renderers/canvas-renderer":"/Users/sash/development/js/imglykit-rewrite/src/js/renderers/canvas-renderer.js","../../../renderers/webgl-renderer":"/Users/sash/development/js/imglykit-rewrite/src/js/renderers/webgl-renderer.js","bluebird":"/Users/sash/development/js/imglykit-rewrite/node_modules/bluebird/js/main/bluebird.js","es6-symbol":"/Users/sash/development/js/imglykit-rewrite/node_modules/es6-symbol/index.js"}],"/Users/sash/development/js/imglykit-rewrite/src/js/ui/night/lib/color-picker.js":[function(require,module,exports){
"use strict";

var _interopRequire = function (obj) { return obj && obj.__esModule ? obj["default"] : obj; };

var _slicedToArray = function (arr, i) { if (Array.isArray(arr)) { return arr; } else if (Symbol.iterator in Object(arr)) { var _arr = []; for (var _iterator = arr[Symbol.iterator](), _step; !(_step = _iterator.next()).done;) { _arr.push(_step.value); if (i && _arr.length === i) break; } return _arr; } else { throw new TypeError("Invalid attempt to destructure non-iterable instance"); } };

var _prototypeProperties = function (child, staticProps, instanceProps) { if (staticProps) Object.defineProperties(child, staticProps); if (instanceProps) Object.defineProperties(child.prototype, instanceProps); };

var _get = function get(object, property, receiver) { var desc = Object.getOwnPropertyDescriptor(object, property); if (desc === undefined) { var parent = Object.getPrototypeOf(object); if (parent === null) { return undefined; } else { return get(parent, property, receiver); } } else if ("value" in desc && desc.writable) { return desc.value; } else { var getter = desc.get; if (getter === undefined) { return undefined; } return getter.call(receiver); } };

var _inherits = function (subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) subClass.__proto__ = superClass; };

var _classCallCheck = function (instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } };

/*!
 * Copyright (c) 2013-2015 9elements GmbH
 *
 * Released under Attribution-NonCommercial 3.0 Unported
 * http://creativecommons.org/licenses/by-nc/3.0/
 *
 * For commercial use, please contact us at contact@9elements.com
 */

var EventEmitter = _interopRequire(require("../../../lib/event-emitter"));

var Utils = _interopRequire(require("../../../lib/utils"));

var Color = _interopRequire(require("../../../lib/color"));

var Vector2 = _interopRequire(require("../../../lib/math/vector2"));

var _ = _interopRequire(require("lodash"));



var ColorPicker = (function (EventEmitter) {
  function ColorPicker(ui, element) {
    _classCallCheck(this, ColorPicker);

    _get(Object.getPrototypeOf(ColorPicker.prototype), "constructor", this).call(this);

    this._ui = ui;
    this._element = element;
    this._visible = false;
    this._loaded = false;

    this._overlay = this._element.querySelector(".imglykit-color-picker-overlay");
    this._currentColorCanvas = this._element.querySelector(".imglykit-color-picker-color");

    this._alphaCanvas = this._element.querySelector("canvas.imglykit-color-picker-alpha");
    this._alphaKnob = this._element.querySelector(".imglykit-color-picker-alpha-container .imglykit-transparent-knob");

    this._hueCanvas = this._element.querySelector("canvas.imglykit-color-picker-hue");
    this._hueKnob = this._element.querySelector(".imglykit-color-picker-hue-container .imglykit-transparent-knob");

    this._saturationCanvas = this._element.querySelector("canvas.imglykit-color-picker-saturation");
    this._saturationKnob = this._element.querySelector(".imglykit-color-picker-saturation-container .imglykit-transparent-knob");

    this._transparencyImage = new Image();
    this._transparencyImage.src = ui.helpers.assetPath("ui/night/transparency.png");
    this._transparencyImage.addEventListener("load", this._onTransparencyImageLoad.bind(this));

    this._onAlphaCanvasDown = this._onAlphaCanvasDown.bind(this);
    this._onAlphaCanvasDrag = this._onAlphaCanvasDrag.bind(this);
    this._onAlphaCanvasUp = this._onAlphaCanvasUp.bind(this);
    this._onHueCanvasDown = this._onHueCanvasDown.bind(this);
    this._onHueCanvasDrag = this._onHueCanvasDrag.bind(this);
    this._onHueCanvasUp = this._onHueCanvasUp.bind(this);

    this._onSaturationCanvasDown = this._onSaturationCanvasDown.bind(this);
    this._onSaturationCanvasDrag = this._onSaturationCanvasDrag.bind(this);
    this._onSaturationCanvasUp = this._onSaturationCanvasUp.bind(this);

    this._onElementClick = this._onElementClick.bind(this);

    this._handleToggle();
    this._handleAlphaKnob();
    this._handleHueKnob();
    this._handleSaturationKnob();
  }

  _inherits(ColorPicker, EventEmitter);

  _prototypeProperties(ColorPicker, {
    template: {

      /**
       * The partial template string
       * @type {String}
       */

      get: function () {
        return "{{##def.colorpicker:\n  <div class=\"imglykit-color-picker\" id=\"{{=(typeof colorpickerId === \"undefined\"?'':colorpickerId)}}\">\n    <canvas class=\"imglykit-color-picker-color\" width=\"34\" height=\"34\"></canvas>\n\n    <div class=\"imglykit-color-picker-overlay\">\n      <div class=\"imglykit-color-picker-alpha-container\">\n        <canvas class=\"imglykit-color-picker-alpha\" width=\"200\" height=\"30\"></canvas>\n        <div class=\"imglykit-transparent-knob\"></div>\n      </div>\n\n      <div class=\"imglykit-color-picker-saturation-container\">\n        <canvas class=\"imglykit-color-picker-saturation\" width=\"160\" height=\"160\"></canvas>\n        <div class=\"imglykit-transparent-knob\"></div>\n      </div>\n\n      <div class=\"imglykit-color-picker-hue-container\">\n        <canvas class=\"imglykit-color-picker-hue\" width=\"30\" height=\"160\"></canvas>\n        <div class=\"imglykit-transparent-knob\"></div>\n      </div>\n    </div>\n  </div>\n#}}\n";
      },
      configurable: true
    }
  }, {
    _onTransparencyImageLoad: {
      value: function _onTransparencyImageLoad() {
        this._loaded = true;
        this._render();
      },
      writable: true,
      configurable: true
    },
    _handleToggle: {

      /**
       * Handles the toggling of the overlay
       * @private
       */

      value: function _handleToggle() {
        this._element.addEventListener("click", this._onElementClick);
      },
      writable: true,
      configurable: true
    },
    _onElementClick: {

      /**
       * Gets called when the element has been clicked
       * @param {Event} e
       * @private
       */

      value: function _onElementClick(e) {
        if (e.target === this._element || e.target === this._currentColorCanvas) {
          if (this._visible) {
            this._overlay.classList.remove("imglykit-visible");
          } else {
            this._overlay.classList.add("imglykit-visible");
          }
          this._visible = !this._visible;
        }
      },
      writable: true,
      configurable: true
    },
    setValue: {

      /**
       * Sets the given value
       * @param {Number} value
       */

      value: function setValue(value) {
        this._value = value.clone();

        var _value$toHSV = this._value.toHSV();

        var _value$toHSV2 = _slicedToArray(_value$toHSV, 3);

        var h = _value$toHSV2[0];
        var s = _value$toHSV2[1];
        var v = _value$toHSV2[2];

        this._hsvColor = { h: h, s: s, v: v };
        this._positionKnobs();
        this._render();
      },
      writable: true,
      configurable: true
    },
    _positionKnobs: {

      /**
       * Updates the knob positions to represent the current HSV color
       * @private
       */

      value: function _positionKnobs() {
        this._positionAlphaKnob();
        this._positionHueKnob();
        this._positionSaturationKnob();
      },
      writable: true,
      configurable: true
    },
    _positionAlphaKnob: {

      /**
       * Positions the alpha knob according to the current alpha value
       * @private
       */

      value: function _positionAlphaKnob() {
        var canvas = this._alphaCanvas;
        var canvasSize = new Vector2(canvas.width, canvas.height);

        var left = this._value.a * canvasSize.x;
        this._alphaKnob.style.left = "" + left + "px";
      },
      writable: true,
      configurable: true
    },
    _positionHueKnob: {

      /**
       * Positions the hue knob according to the current hue value
       * @private
       */

      value: function _positionHueKnob() {
        var canvas = this._hueCanvas;
        var canvasSize = new Vector2(canvas.width, canvas.height);

        var top = this._hsvColor.h * canvasSize.y;
        this._hueKnob.style.top = "" + top + "px";
      },
      writable: true,
      configurable: true
    },
    _positionSaturationKnob: {

      /**
       * Positions the saturation knob according to the current saturation value
       * @private
       */

      value: function _positionSaturationKnob() {
        var canvas = this._saturationCanvas;
        var canvasSize = new Vector2(canvas.width, canvas.height);

        var left = this._hsvColor.s * canvasSize.x;
        this._saturationKnob.style.left = "" + left + "px";
        var top = (1 - this._hsvColor.v) * canvasSize.y;
        this._saturationKnob.style.top = "" + top + "px";
      },
      writable: true,
      configurable: true
    },
    _render: {

      /**
       * Updates and renders all controls to represent the current value
       * @private
       */

      value: function _render() {
        if (!this._loaded) {
          return;
        }this._renderCurrentColor();
        this._renderAlpha();
        this._renderHue();
        this._renderSaturation();
      },
      writable: true,
      configurable: true
    },
    _renderCurrentColor: {

      /**
       * Renders the currently selected color on the controls canvas
       * @private
       */

      value: function _renderCurrentColor() {
        var canvas = this._currentColorCanvas;
        var context = canvas.getContext("2d");

        var pattern = context.createPattern(this._transparencyImage, "repeat");
        context.rect(0, 0, canvas.width, canvas.height);
        context.fillStyle = pattern;
        context.fill();

        context.fillStyle = this._value.toRGBA();
        context.fill();
      },
      writable: true,
      configurable: true
    },
    _renderAlpha: {

      /**
       * Renders the transparency canvas with the current color
       * @private
       */

      value: function _renderAlpha() {
        var canvas = this._alphaCanvas;
        var context = canvas.getContext("2d");

        var pattern = context.createPattern(this._transparencyImage, "repeat");
        context.rect(0, 0, canvas.width, canvas.height);
        context.fillStyle = pattern;
        context.fill();

        var gradient = context.createLinearGradient(0, 0, canvas.width, canvas.height);

        var color = this._value.clone();
        color.a = 0;
        gradient.addColorStop(0, color.toRGBA());
        gradient.addColorStop(1, this._value.toHex());
        context.fillStyle = gradient;
        context.fill();
      },
      writable: true,
      configurable: true
    },
    _renderHue: {

      /**
       * Renders the hue canvas
       * @private
       */

      value: function _renderHue() {
        var canvas = this._hueCanvas;
        var context = canvas.getContext("2d");

        var color = new Color();
        for (var y = 0; y < canvas.height; y++) {
          var ratio = y / canvas.height;
          color.fromHSV(ratio, 1, 1);

          context.strokeStyle = color.toRGBA();
          context.beginPath();
          context.moveTo(0, y);
          context.lineTo(canvas.width, y);
          context.stroke();
        }
      },
      writable: true,
      configurable: true
    },
    _renderSaturation: {

      /**
       * Renders the saturation canvas
       * @private
       */

      value: function _renderSaturation() {
        var canvas = this._saturationCanvas;
        var context = canvas.getContext("2d");

        var imageData = context.getImageData(0, 0, canvas.width, canvas.height);

        var color = new Color(1, 0, 0, 1);
        for (var y = 0; y < canvas.height; y++) {
          var value = (canvas.height - y) / canvas.height;
          for (var x = 0; x < canvas.width; x++) {
            var saturation = x / canvas.width;
            color.fromHSV(this._hsvColor.h, saturation, value);
            var r = color.r;
            var g = color.g;
            var b = color.b;
            var a = color.a;

            var index = (y * canvas.width + x) * 4;

            imageData.data[index] = r * 255;
            imageData.data[index + 1] = g * 255;
            imageData.data[index + 2] = b * 255;
            imageData.data[index + 3] = a * 255;
          }
        }

        context.putImageData(imageData, 0, 0);
      },
      writable: true,
      configurable: true
    },
    _handleAlphaKnob: {

      /**
       * Handles the dragging of the alpha knob
       * @private
       */

      value: function _handleAlphaKnob() {
        this._alphaCanvas.addEventListener("mousedown", this._onAlphaCanvasDown);
        this._alphaCanvas.addEventListener("touchstart", this._onAlphaCanvasDown);
      },
      writable: true,
      configurable: true
    },
    _onAlphaCanvasDown: {

      /**
       * Gets called when the user clicks the alpha knob
       * @param {Event} e
       * @private
       */

      value: function _onAlphaCanvasDown(e) {
        e.preventDefault();

        this._onAlphaCanvasDrag(e);

        document.addEventListener("mousemove", this._onAlphaCanvasDrag);
        document.addEventListener("touchmove", this._onAlphaCanvasDrag);

        document.addEventListener("mouseup", this._onAlphaCanvasUp);
        document.addEventListener("touchend", this._onAlphaCanvasUp);
      },
      writable: true,
      configurable: true
    },
    _onAlphaCanvasDrag: {

      /**
       * Gets called when the user drags the alpha knob
       * @param {Event} e
       * @private
       */

      value: function _onAlphaCanvasDrag(e) {
        e.preventDefault();

        // Calculate relative mouse position on canvas
        var canvas = this._alphaCanvas;
        var canvasSize = new Vector2(canvas.width, canvas.height);
        var mousePosition = Utils.getEventPosition(e);

        var _canvas$getBoundingClientRect = canvas.getBoundingClientRect();

        var left = _canvas$getBoundingClientRect.left;
        var top = _canvas$getBoundingClientRect.top;

        var offset = new Vector2(left, top);
        var relativePosition = mousePosition.subtract(offset);
        relativePosition.clamp(new Vector2(0, 0), canvasSize);

        // Update knob css positioning
        this._alphaKnob.style.left = "" + relativePosition.x + "px";

        // Update alpha value
        this._value.a = relativePosition.x / canvasSize.x;
        this._updateColor();
      },
      writable: true,
      configurable: true
    },
    _onAlphaCanvasUp: {

      /**
       * Gets called when the user stops dragging the alpha knob
       * @param {Event} e
       * @private
       */

      value: function _onAlphaCanvasUp(e) {
        document.removeEventListener("mousemove", this._onAlphaCanvasDrag);
        document.removeEventListener("touchmove", this._onAlphaCanvasDrag);

        document.removeEventListener("mouseup", this._onAlphaCanvasUp);
        document.removeEventListener("touchend", this._onAlphaCanvasUp);
      },
      writable: true,
      configurable: true
    },
    _handleHueKnob: {

      /**
       * Handles the dragging of the hue knob
       * @private
       */

      value: function _handleHueKnob() {
        this._hueCanvas.addEventListener("mousedown", this._onHueCanvasDown);
        this._hueCanvas.addEventListener("touchstart", this._onHueCanvasDown);
      },
      writable: true,
      configurable: true
    },
    _onHueCanvasDown: {

      /**
       * Gets called when the user clicks the canvas knob
       * @param {Event} e
       * @private
       */

      value: function _onHueCanvasDown(e) {
        e.preventDefault();

        this._onHueCanvasDrag(e);

        document.addEventListener("mousemove", this._onHueCanvasDrag);
        document.addEventListener("touchmove", this._onHueCanvasDrag);

        document.addEventListener("mouseup", this._onHueCanvasUp);
        document.addEventListener("touchend", this._onHueCanvasUp);
      },
      writable: true,
      configurable: true
    },
    _onHueCanvasDrag: {

      /**
       * Gets called when the user drags the hue knob
       * @param {Event} e
       * @private
       */

      value: function _onHueCanvasDrag(e) {
        e.preventDefault();

        var canvas = this._hueCanvas;
        var canvasSize = new Vector2(canvas.width, canvas.height);

        // Calculate relative mouse position on canvas
        var mousePosition = Utils.getEventPosition(e);

        var _canvas$getBoundingClientRect = canvas.getBoundingClientRect();

        var left = _canvas$getBoundingClientRect.left;
        var top = _canvas$getBoundingClientRect.top;

        var offset = new Vector2(left, top);
        var relativePosition = mousePosition.subtract(offset);
        relativePosition.clamp(new Vector2(0, 0), canvasSize);

        // Update saturaiton knob css positioning
        this._hueKnob.style.top = "" + relativePosition.y + "px";

        // Update saturation and value
        relativePosition.divide(canvasSize);
        this._hsvColor.h = relativePosition.y;
        this._updateColor();
      },
      writable: true,
      configurable: true
    },
    _onHueCanvasUp: {

      /**
       * Gets called when the user stops dragging the alpha knob
       * @param {Event} e
       * @private
       */

      value: function _onHueCanvasUp(e) {
        document.removeEventListener("mousemove", this._onHueCanvasDrag);
        document.removeEventListener("touchmove", this._onHueCanvasDrag);

        document.removeEventListener("mouseup", this._onHueCanvasUp);
        document.removeEventListener("touchend", this._onHueCanvasUp);
      },
      writable: true,
      configurable: true
    },
    _handleSaturationKnob: {

      /**
       * Handles the dragging of the saturation knob
       * @private
       */

      value: function _handleSaturationKnob() {
        this._saturationCanvas.addEventListener("mousedown", this._onSaturationCanvasDown);
        this._saturationCanvas.addEventListener("touchstart", this._onSaturationCanvasDown);
      },
      writable: true,
      configurable: true
    },
    _onSaturationCanvasDown: {

      /**
       * Gets called when the user clicks the saturation canvas
       * @param {Event} e
       * @private
       */

      value: function _onSaturationCanvasDown(e) {
        e.preventDefault();

        this._onSaturationCanvasDrag(e);

        document.addEventListener("mousemove", this._onSaturationCanvasDrag);
        document.addEventListener("touchmove", this._onSaturationCanvasDrag);

        document.addEventListener("mouseup", this._onSaturationCanvasUp);
        document.addEventListener("touchend", this._onSaturationCanvasUp);
      },
      writable: true,
      configurable: true
    },
    _onSaturationCanvasDrag: {

      /**
       * Gets called when the user drags the saturation knob
       * @param {Event} e
       * @private
       */

      value: function _onSaturationCanvasDrag(e) {
        e.preventDefault();

        var canvas = this._saturationCanvas;
        var canvasSize = new Vector2(canvas.width, canvas.height);

        // Calculate relative mouse position on canvas
        var mousePosition = Utils.getEventPosition(e);

        var _canvas$getBoundingClientRect = canvas.getBoundingClientRect();

        var left = _canvas$getBoundingClientRect.left;
        var top = _canvas$getBoundingClientRect.top;

        var offset = new Vector2(left, top);
        var relativePosition = mousePosition.subtract(offset);
        relativePosition.clamp(0, canvas.width);

        // Update saturaiton knob css positioning
        this._saturationKnob.style.left = "" + relativePosition.x + "px";
        this._saturationKnob.style.top = "" + relativePosition.y + "px";

        // Update saturation and value
        relativePosition.divide(canvasSize);
        this._hsvColor.s = relativePosition.x;
        this._hsvColor.v = 1 - relativePosition.y;
        this._updateColor();
      },
      writable: true,
      configurable: true
    },
    _onSaturationCanvasUp: {

      /**
       * Gets called when the user stops dragging the saturation knob
       * @param {Event} e
       * @private
       */

      value: function _onSaturationCanvasUp(e) {
        document.removeEventListener("mousemove", this._onSaturationCanvasDrag);
        document.removeEventListener("touchmove", this._onSaturationCanvasDrag);

        document.removeEventListener("mouseup", this._onSaturationCanvasUp);
        document.removeEventListener("touchend", this._onSaturationCanvasUp);
      },
      writable: true,
      configurable: true
    },
    _updateColor: {

      /**
       * Updates the attached color, emits the `update` event and triggers
       * a render
       * @private
       */

      value: function _updateColor() {
        this._value.fromHSV(this._hsvColor.h, this._hsvColor.s, this._hsvColor.v);
        this.emit("update", this._value);
        this._render();
      },
      writable: true,
      configurable: true
    }
  });

  return ColorPicker;
})(EventEmitter);

module.exports = ColorPicker;

},{"../../../lib/color":"/Users/sash/development/js/imglykit-rewrite/src/js/lib/color.js","../../../lib/event-emitter":"/Users/sash/development/js/imglykit-rewrite/src/js/lib/event-emitter.js","../../../lib/math/vector2":"/Users/sash/development/js/imglykit-rewrite/src/js/lib/math/vector2.js","../../../lib/utils":"/Users/sash/development/js/imglykit-rewrite/src/js/lib/utils.js","lodash":"lodash"}],"/Users/sash/development/js/imglykit-rewrite/src/js/ui/night/lib/simple-slider.js":[function(require,module,exports){
"use strict";

var _interopRequire = function (obj) { return obj && obj.__esModule ? obj["default"] : obj; };

var _prototypeProperties = function (child, staticProps, instanceProps) { if (staticProps) Object.defineProperties(child, staticProps); if (instanceProps) Object.defineProperties(child.prototype, instanceProps); };

var _inherits = function (subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) subClass.__proto__ = superClass; };

var _classCallCheck = function (instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } };

/*!
 * Copyright (c) 2013-2015 9elements GmbH
 *
 * Released under Attribution-NonCommercial 3.0 Unported
 * http://creativecommons.org/licenses/by-nc/3.0/
 *
 * For commercial use, please contact us at contact@9elements.com
 */

var Slider = _interopRequire(require("./slider"));



var SimpleSlider = (function (Slider) {
  function SimpleSlider() {
    _classCallCheck(this, SimpleSlider);

    if (Slider != null) {
      Slider.apply(this, arguments);
    }
  }

  _inherits(SimpleSlider, Slider);

  _prototypeProperties(SimpleSlider, {
    template: {
      /**
       * The partial template string
       * @type {String}
       */

      get: function () {
        return "{{##def.simpleSlider:\n  <div class=\"imglykit-slider\" id=\"{{=(typeof sliderId === \"undefined\"?'':sliderId)}}\">\n    <div class=\"imglykit-slider-minus\">\n      <img src=\"{{=it.helpers.assetPath('ui/night/slider/minus.png') }}\" />\n    </div>\n    <div class=\"imglykit-slider-slider\">\n      <div class=\"imglykit-slider-background\"></div>\n      <div class=\"imglykit-slider-fill\"></div>\n      <div class=\"imglykit-slider-dot\"></div>\n    </div>\n    <div class=\"imglykit-slider-plus\">\n      <img src=\"{{=it.helpers.assetPath('ui/night/slider/plus.png') }}\" />\n    </div>\n  </div>\n#}}\n";
      },
      configurable: true
    }
  }, {
    _setX: {

      /**
       * Sets the slider position to the given X value and resizes
       * the fill div
       * @private
       */

      value: function _setX(x) {
        this._dotElement.style.left = "" + x + "px";
        this._fillElement.style.width = "" + x + "px";
      },
      writable: true,
      configurable: true
    }
  });

  return SimpleSlider;
})(Slider);

module.exports = SimpleSlider;

},{"./slider":"/Users/sash/development/js/imglykit-rewrite/src/js/ui/night/lib/slider.js"}],"/Users/sash/development/js/imglykit-rewrite/src/js/ui/night/lib/slider.js":[function(require,module,exports){
"use strict";

var _interopRequire = function (obj) { return obj && obj.__esModule ? obj["default"] : obj; };

var _prototypeProperties = function (child, staticProps, instanceProps) { if (staticProps) Object.defineProperties(child, staticProps); if (instanceProps) Object.defineProperties(child.prototype, instanceProps); };

var _get = function get(object, property, receiver) { var desc = Object.getOwnPropertyDescriptor(object, property); if (desc === undefined) { var parent = Object.getPrototypeOf(object); if (parent === null) { return undefined; } else { return get(parent, property, receiver); } } else if ("value" in desc && desc.writable) { return desc.value; } else { var getter = desc.get; if (getter === undefined) { return undefined; } return getter.call(receiver); } };

var _inherits = function (subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) subClass.__proto__ = superClass; };

var _classCallCheck = function (instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } };

/*!
 * Copyright (c) 2013-2015 9elements GmbH
 *
 * Released under Attribution-NonCommercial 3.0 Unported
 * http://creativecommons.org/licenses/by-nc/3.0/
 *
 * For commercial use, please contact us at contact@9elements.com
 */

var EventEmitter = _interopRequire(require("../../../lib/event-emitter"));

var Utils = _interopRequire(require("../../../lib/utils"));

var _ = _interopRequire(require("lodash"));



var Slider = (function (EventEmitter) {
  function Slider(element, options) {
    _classCallCheck(this, Slider);

    _get(Object.getPrototypeOf(Slider.prototype), "constructor", this).call(this);

    this._element = element;
    this._options = _.defaults(options, {
      minValue: 0,
      maxValue: 1
    });

    this._value = 0;

    this._sliderElement = this._element.querySelector(".imglykit-slider-slider");
    this._dotElement = this._element.querySelector(".imglykit-slider-dot");
    this._fillElement = this._element.querySelector(".imglykit-slider-fill");

    // Mouse event callbacks bound to class context
    this._onMouseDown = this._onMouseDown.bind(this);
    this._onMouseMove = this._onMouseMove.bind(this);
    this._onMouseUp = this._onMouseUp.bind(this);

    this._handleDot();
  }

  _inherits(Slider, EventEmitter);

  _prototypeProperties(Slider, {
    template: {

      /**
       * The partial template string
       * @type {String}
       */

      get: function () {
        return "{{##def.slider:\n  <div class=\"imglykit-slider\" id=\"{{=(typeof sliderId === \"undefined\"?'':sliderId)}}\">\n    <div class=\"imglykit-slider-minus\">\n      <img src=\"{{=it.helpers.assetPath('ui/night/slider/minus.png') }}\" />\n    </div>\n    <div class=\"imglykit-slider-slider\">\n      <div class=\"imglykit-slider-background\"></div>\n      <div class=\"imglykit-slider-fill\"></div>\n      <div class=\"imglykit-slider-center-dot\"></div>\n      <div class=\"imglykit-slider-dot\"></div>\n    </div>\n    <div class=\"imglykit-slider-plus\">\n      <img src=\"{{=it.helpers.assetPath('ui/night/slider/plus.png') }}\" />\n    </div>\n  </div>\n#}}\n";
      },
      configurable: true
    }
  }, {
    setValue: {

      /**
       * Sets the given value
       * @param {Number} value
       */

      value: function setValue(value) {
        this._value = value;

        var _options = this._options;
        var maxValue = _options.maxValue;
        var minValue = _options.minValue;

        // Calculate the X position
        var valueRange = maxValue - minValue;
        var percentage = (value - minValue) / valueRange;
        var sliderWidth = this._sliderElement.offsetWidth;
        this._setX(sliderWidth * percentage);
      },
      writable: true,
      configurable: true
    },
    _setX: {

      /**
       * Sets the slider position to the given X value and resizes
       * the fill div
       * @private
       */

      value: function _setX(x) {
        this._dotElement.style.left = "" + x + "px";

        // X position relative to center to simplify calculations
        var halfSliderWidth = this._sliderElement.offsetWidth / 2;
        var relativeX = x - halfSliderWidth;

        // Update style
        this._fillElement.style.width = "" + Math.abs(relativeX) + "px";
        if (relativeX < 0) {
          this._fillElement.style.left = halfSliderWidth - Math.abs(relativeX) + "px";
        } else {
          this._fillElement.style.left = halfSliderWidth + "px";
        }
      },
      writable: true,
      configurable: true
    },
    _handleDot: {

      /**
       * Handles the dot dragging
       * @private
       */

      value: function _handleDot() {
        this._dotElement.addEventListener("mousedown", this._onMouseDown);
        this._dotElement.addEventListener("touchstart", this._onMouseDown);
      },
      writable: true,
      configurable: true
    },
    _onMouseDown: {

      /**
       * Gets called when the user presses a mouse button on the slider dot
       * @private
       */

      value: function _onMouseDown(e) {
        if (e.type === "mousedown" && e.button !== 0) {
          return;
        }e.preventDefault();

        var mousePosition = Utils.getEventPosition(e);

        document.addEventListener("mousemove", this._onMouseMove);
        document.addEventListener("touchmove", this._onMouseMove);

        document.addEventListener("mouseup", this._onMouseUp);
        document.addEventListener("touchend", this._onMouseUp);

        // Remember initial position
        var dotPosition = this._dotElement.getBoundingClientRect();
        var sliderPosition = this._sliderElement.getBoundingClientRect();

        this._initialSliderX = dotPosition.left - sliderPosition.left;
        this._initialMousePosition = mousePosition;
      },
      writable: true,
      configurable: true
    },
    _onMouseMove: {

      /**
       * Gets called when the user drags the mouse
       * @private
       */

      value: function _onMouseMove(e) {
        e.preventDefault();

        var mousePosition = Utils.getEventPosition(e);
        var mouseDiff = mousePosition.subtract(this._initialMousePosition);

        // Add half width of the dot for negative margin compensation
        var halfDotWidth = this._dotElement.offsetWidth * 0.5;
        var newSliderX = this._initialSliderX + mouseDiff.x + halfDotWidth;

        // X boundaries
        var sliderWidth = this._sliderElement.offsetWidth;
        newSliderX = Math.max(0, Math.min(newSliderX, sliderWidth));

        this._setX(newSliderX);

        // Calculate the new value
        var _options = this._options;
        var minValue = _options.minValue;
        var maxValue = _options.maxValue;

        var percentage = newSliderX / sliderWidth;
        var value = minValue + (maxValue - minValue) * percentage;
        this.emit("update", value);
      },
      writable: true,
      configurable: true
    },
    _onMouseUp: {

      /**
       * Gets called when the user does not press the mouse button anymore
       * @private
       */

      value: function _onMouseUp() {
        document.removeEventListener("mousemove", this._onMouseMove);
        document.removeEventListener("touchmove", this._onMouseMove);

        document.removeEventListener("mouseup", this._onMouseUp);
        document.removeEventListener("touchend", this._onMouseUp);
      },
      writable: true,
      configurable: true
    }
  });

  return Slider;
})(EventEmitter);

module.exports = Slider;

},{"../../../lib/event-emitter":"/Users/sash/development/js/imglykit-rewrite/src/js/lib/event-emitter.js","../../../lib/utils":"/Users/sash/development/js/imglykit-rewrite/src/js/lib/utils.js","lodash":"lodash"}],"/Users/sash/development/js/imglykit-rewrite/src/js/ui/night/lib/top-controls.js":[function(require,module,exports){
"use strict";

var _interopRequire = function (obj) { return obj && obj.__esModule ? obj["default"] : obj; };

var _prototypeProperties = function (child, staticProps, instanceProps) { if (staticProps) Object.defineProperties(child, staticProps); if (instanceProps) Object.defineProperties(child.prototype, instanceProps); };

var _get = function get(object, property, receiver) { var desc = Object.getOwnPropertyDescriptor(object, property); if (desc === undefined) { var parent = Object.getPrototypeOf(object); if (parent === null) { return undefined; } else { return get(parent, property, receiver); } } else if ("value" in desc && desc.writable) { return desc.value; } else { var getter = desc.get; if (getter === undefined) { return undefined; } return getter.call(receiver); } };

var _inherits = function (subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) subClass.__proto__ = superClass; };

var _classCallCheck = function (instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } };

/*!
 * Copyright (c) 2013-2015 9elements GmbH
 *
 * Released under Attribution-NonCommercial 3.0 Unported
 * http://creativecommons.org/licenses/by-nc/3.0/
 *
 * For commercial use, please contact us at contact@9elements.com
 */

var EventEmitter = _interopRequire(require("../../../lib/event-emitter"));

var TopControls = (function (EventEmitter) {
  function TopControls(kit, ui) {
    _classCallCheck(this, TopControls);

    _get(Object.getPrototypeOf(TopControls.prototype), "constructor", this).call(this);

    this._kit = kit;
    this._ui = ui;
    this._canvas = this._ui.canvas;
  }

  _inherits(TopControls, EventEmitter);

  _prototypeProperties(TopControls, null, {
    run: {

      /**
       * Initializes the controls
       */

      value: function run() {
        var container = this._ui.container;

        this._rightControls = container.querySelector(".imglykit-top-controls-right");
        this._leftControls = container.querySelector(".imglykit-top-controls-left");

        this._undoButton = container.querySelector(".imglykit-undo");
        this._zoomIn = container.querySelector(".imglykit-zoom-in");
        this._zoomOut = container.querySelector(".imglykit-zoom-out");
        this._zoomLevel = container.querySelector(".imglykit-zoom-level-num");
        this._handleZoom();
        this._handleUndo();
      },
      writable: true,
      configurable: true
    },
    _handleZoom: {

      /**
       * Handles the zoom controls
       * @private
       */

      value: function _handleZoom() {
        this._zoomIn.addEventListener("click", this._onZoomInClick.bind(this));
        this._zoomOut.addEventListener("click", this._onZoomOutClick.bind(this));
        this.updateZoomLevel();
      },
      writable: true,
      configurable: true
    },
    _handleUndo: {

      /**
       * Handles the undo control
       * @private
       */

      value: function _handleUndo() {
        this._undoButton.addEventListener("click", this._undo.bind(this));
        this._undo();
      },
      writable: true,
      configurable: true
    },
    _undo: {

      /**
       * Gets called when the user clicks the undo button
       * @private
       */

      value: function _undo() {
        this.emit("undo");
      },
      writable: true,
      configurable: true
    },
    updateUndoButton: {

      /**
       * Updates the undo button active state
       */

      value: function updateUndoButton() {
        var history = this._ui.history;

        if (history.length === 0) {
          this._leftControls.style.display = "none";
        } else {
          this._leftControls.style.display = "block";
        }
      },
      writable: true,
      configurable: true
    },
    _onZoomInClick: {

      /**
       * Gets called when the user clicked the zoom in button
       * @param {Event}
       * @private
       */

      value: function _onZoomInClick(e) {
        e.preventDefault();

        this.emit("zoom-in");
        this.updateZoomLevel();
      },
      writable: true,
      configurable: true
    },
    _onZoomOutClick: {

      /**
       * Gets called when the user clicked the zoom out button
       * @param {Event}
       * @private
       */

      value: function _onZoomOutClick(e) {
        e.preventDefault();

        this.emit("zoom-out");
        this.updateZoomLevel();
      },
      writable: true,
      configurable: true
    },
    showZoom: {

      /**
       * Shows the zoom control
       */

      value: function showZoom() {
        this._rightControls.style.display = "block";
      },
      writable: true,
      configurable: true
    },
    hideZoom: {

      /**
       * Hides the zoom control
       */

      value: function hideZoom() {
        this._rightControls.style.display = "none";
      },
      writable: true,
      configurable: true
    },
    updateZoomLevel: {

      /**
       * Updates the zoom level display
       */

      value: function updateZoomLevel() {
        var zoomLevel = this._canvas.zoomLevel;

        this._zoomLevel.innerHTML = Math.round(zoomLevel * 100);
      },
      writable: true,
      configurable: true
    }
  });

  return TopControls;
})(EventEmitter);

module.exports = TopControls;

},{"../../../lib/event-emitter":"/Users/sash/development/js/imglykit-rewrite/src/js/lib/event-emitter.js"}],"/Users/sash/development/js/imglykit-rewrite/src/js/ui/night/ui.js":[function(require,module,exports){
"use strict";

var _interopRequire = function (obj) { return obj && obj.__esModule ? obj["default"] : obj; };

var _prototypeProperties = function (child, staticProps, instanceProps) { if (staticProps) Object.defineProperties(child, staticProps); if (instanceProps) Object.defineProperties(child.prototype, instanceProps); };

var _get = function get(object, property, receiver) { var desc = Object.getOwnPropertyDescriptor(object, property); if (desc === undefined) { var parent = Object.getPrototypeOf(object); if (parent === null) { return undefined; } else { return get(parent, property, receiver); } } else if ("value" in desc && desc.writable) { return desc.value; } else { var getter = desc.get; if (getter === undefined) { return undefined; } return getter.call(receiver); } };

var _inherits = function (subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) subClass.__proto__ = superClass; };

var _classCallCheck = function (instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } };

/*!
 * Copyright (c) 2013-2015 9elements GmbH
 *
 * Released under Attribution-NonCommercial 3.0 Unported
 * http://creativecommons.org/licenses/by-nc/3.0/
 *
 * For commercial use, please contact us at contact@9elements.com
 */



var Symbol = _interopRequire(require("es6-symbol"));

var UI = _interopRequire(require("../base/ui"));

var Canvas = _interopRequire(require("./lib/canvas"));

var TopControls = _interopRequire(require("./lib/top-controls"));

var NightUI = (function (UI) {
  function NightUI() {
    for (var _len = arguments.length, args = Array(_len), _key = 0; _key < _len; _key++) {
      args[_key] = arguments[_key];
    }

    _classCallCheck(this, NightUI);

    this._operationsMap = {};
    this._template = "<div class=\"imglykit-container\">\n  <div class=\"imglykit-top-controls\">\n    <div class=\"imglykit-top-controls-left\">\n      <div class=\"imglykit-undo\">\n        <img src=\"{{=it.helpers.assetPath('ui/night/top/undo.png')}}\" />\n        Undo\n      </div>\n    </div>\n    <div class=\"imglykit-top-controls-right\">\n      <div class=\"imglykit-zoom-fit\"></div>\n      <div class=\"imglykit-zoom-level\">Zoom: <span class=\"imglykit-zoom-level-num\">100</span>%</div>\n      <div class=\"imglykit-zoom-in\">\n        <img src=\"{{=it.helpers.assetPath('ui/night/top/zoom-in.png')}}\" />\n      </div>\n      <div class=\"imglykit-zoom-out\">\n        <img src=\"{{=it.helpers.assetPath('ui/night/top/zoom-out.png')}}\" />\n      </div>\n    </div>\n  </div>\n\n  <div class=\"imglykit-canvas-container\">\n    <div class=\"imglykit-canvas-inner-container\">\n      <canvas class=\"imglykit-canvas-draggable\"></canvas>\n      <div class=\"imglykit-canvas-controls imglykit-canvas-controls-disabled\"></div>\n    </div>\n  </div>\n\n  <div class=\"imglykit-controls-container\">\n    <div class=\"imglykit-controls\">\n\n      <div>\n        <div class=\"imglykit-controls-overview\">\n          <ul class=\"imglykit-controls-list\">\n          {{ for (var identifier in it.controls) { }}\n            {{ var control = it.controls[identifier]; }}\n            <li data-identifier=\"{{= control.identifier}}\">\n              <img src=\"{{=it.helpers.assetPath('ui/night/operations/' + control.identifier + '.png') }}\" />\n            </li>\n          {{ } }}\n          </ul>\n        </div>\n      </div>\n\n    </div>\n  </div>\n</div>\n";
    this._registeredControls = {};
    this._history = [];

    // The `Night` UI has a fixed operation order
    this._preferredOperationOrder = [
    // First, all operations that affect the image dimensions
    "rotation", "crop", "flip",

    // Then color operations (first filters, then fine-tuning)
    "filters", "contrast", "brightness", "saturation",

    // Then post-processing
    "radial-blur", "tilt-shift", "frames", "stickers", "text"];

    this._paused = false;

    _get(Object.getPrototypeOf(NightUI.prototype), "constructor", this).apply(this, args);
  }

  _inherits(NightUI, UI);

  _prototypeProperties(NightUI, null, {
    run: {
      value: function run() {
        this._registerControls();

        _get(Object.getPrototypeOf(NightUI.prototype), "run", this).call(this);

        var container = this._options.container;

        this._controlsContainer = container.querySelector(".imglykit-controls");
        this._canvasControlsContainer = container.querySelector(".imglykit-canvas-controls");
        this._overviewControlsContainer = container.querySelector(".imglykit-controls-overview");

        this._initOperations();
        this._handleOverview();

        this._initCanvas();
        this._initTopControls();
        this._initControls();
      },
      writable: true,
      configurable: true
    },
    _initTopControls: {

      /**
       * Initializes the top controls
       * @private
       */

      value: function _initTopControls() {
        var _this = this;

        this._topControls = new TopControls(this._kit, this);
        this._topControls.run();

        this._topControls.on("undo", function () {
          _this.undo();
        });

        // Pass zoom in event
        this._topControls.on("zoom-in", function () {
          _this._canvas.zoomIn().then(function () {
            if (_this._currentControl) {
              _this._currentControl.onZoom();
            }
          });
        });

        // Pass zoom out event
        this._topControls.on("zoom-out", function () {
          _this._canvas.zoomOut().then(function () {
            if (_this._currentControl) {
              _this._currentControl.onZoom();
            }
          });
        });
      },
      writable: true,
      configurable: true
    },
    _initCanvas: {

      /**
       * Inititializes the canvas
       * @private
       */

      value: function _initCanvas() {
        var _this = this;

        this._canvas = new Canvas(this._kit, this, this._options);
        this._canvas.run();
        this._canvas.on("zoom", function () {
          _this._topControls.updateZoomLevel();
        });
      },
      writable: true,
      configurable: true
    },
    selectOperations: {

      /**
       * Selects the enabled operations
       * @param {ImglyKit.Selector}
       */

      value: function selectOperations(selector) {
        _get(Object.getPrototypeOf(NightUI.prototype), "selectOperations", this).call(this, selector);

        this._initOperations();
      },
      writable: true,
      configurable: true
    },
    _initOperations: {

      /**
       * Initializes all operations
       * @private
       */

      value: function _initOperations() {
        var _this = this;

        var _kit = this._kit;
        var operationsStack = _kit.operationsStack;
        var registeredOperations = _kit.registeredOperations;

        operationsStack.splice(0, operationsStack.length); // Clear the array in-place
        var _iteratorNormalCompletion = true;
        var _didIteratorError = false;
        var _iteratorError = undefined;

        try {
          for (var _iterator = this._preferredOperationOrder[Symbol.iterator](), _step; !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = true) {
            var _ret = (function () {
              var operationIdentifier = _step.value;

              if (!_this.isOperationSelected(operationIdentifier)) {
                return "continue";
              }

              var Operation = registeredOperations[operationIdentifier];
              var operationInstance = new Operation(_this._kit);

              // Skip per default
              // This additional attribute is not part of the img.ly SDK,
              // we only use it for the Night UI to check whether an operation
              // needs to be rendered
              operationInstance.isIdentity = true;

              operationInstance.on("update", function () {
                operationInstance.isIdentity = false;
              });

              _this._operationsMap[operationIdentifier] = operationInstance;
              operationsStack.push(operationInstance);
            })();

            if (_ret === "continue") continue;
          }
        } catch (err) {
          _didIteratorError = true;
          _iteratorError = err;
        } finally {
          try {
            if (!_iteratorNormalCompletion && _iterator["return"]) {
              _iterator["return"]();
            }
          } finally {
            if (_didIteratorError) {
              throw _iteratorError;
            }
          }
        }
      },
      writable: true,
      configurable: true
    },
    _registerControls: {

      /**
       * Registers all default operation controls
       * @private
       */

      value: function _registerControls() {
        this.registerControl("filters", "filters", require("./controls/filters"));
        this.registerControl("rotation", "rotation", require("./controls/rotation"));
        this.registerControl("flip", "flip", require("./controls/flip"));
        this.registerControl("brightness", "brightness", require("./controls/brightness"));
        this.registerControl("contrast", "contrast", require("./controls/contrast"));
        this.registerControl("saturation", "saturation", require("./controls/saturation"));
        this.registerControl("crop", "crop", require("./controls/crop"));
        this.registerControl("radial-blur", "radial-blur", require("./controls/radial-blur"));
        this.registerControl("tilt-shift", "tilt-shift", require("./controls/tilt-shift"));
        this.registerControl("frames", "frames", require("./controls/frames"));
        this.registerControl("stickers", "stickers", require("./controls/stickers"));
        this.registerControl("text", "text", require("./controls/text"));
      },
      writable: true,
      configurable: true
    },
    _handleOverview: {

      /**
       * Handles the overview button click events
       * @private
       */

      value: function _handleOverview() {
        var _this = this;

        var listItems = this._overviewControlsContainer.querySelectorAll(":scope > ul > li");

        // Turn NodeList into an Array
        listItems = Array.prototype.slice.call(listItems);

        // Add click events to all items
        var _iteratorNormalCompletion = true;
        var _didIteratorError = false;
        var _iteratorError = undefined;

        try {
          for (var _iterator = listItems[Symbol.iterator](), _step; !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = true) {
            (function () {
              var listItem = _step.value;
              var identifier = listItem.dataset.identifier;

              listItem.addEventListener("click", function () {
                _this._onOverviewButtonClick(identifier);
              });
            })();
          }
        } catch (err) {
          _didIteratorError = true;
          _iteratorError = err;
        } finally {
          try {
            if (!_iteratorNormalCompletion && _iterator["return"]) {
              _iterator["return"]();
            }
          } finally {
            if (_didIteratorError) {
              throw _iteratorError;
            }
          }
        }
      },
      writable: true,
      configurable: true
    },
    _onOverviewButtonClick: {

      /**
       * Gets called when an overview button has been clicked
       * @private
       */

      value: function _onOverviewButtonClick(identifier) {
        this._overviewControlsContainer.style.display = "none";

        if (this._currentControl) {
          this._currentControl.leave();
        }

        this._currentControl = this._registeredControls[identifier];
        this._currentControl.enter();
        this._currentControl.once("back", this._switchToOverview.bind(this));
      },
      writable: true,
      configurable: true
    },
    _switchToOverview: {

      /**
       * Switches back to the overview controls
       * @private
       */

      value: function _switchToOverview() {
        if (this._currentControl) {
          this._currentControl.leave();
        }

        this._currentControl = null;
        this._overviewControlsContainer.style.display = "";
      },
      writable: true,
      configurable: true
    },
    registerControl: {

      /**
       * Registers the controls for an operation
       * @param {String} identifier
       * @param {String} operationIdentifier
       * @param {Control} ControlClass
       */

      value: function registerControl(identifier, operationIdentifier, ControlClass) {
        if (!this.isOperationSelected(operationIdentifier)) {
          return;
        }var instance = new ControlClass(this._kit, this);
        this._registeredControls[identifier] = instance;
      },
      writable: true,
      configurable: true
    },
    _initControls: {

      /**
       * Initializes the registered controls
       * @private
       */

      value: function _initControls() {
        for (var identifier in this._registeredControls) {
          var control = this._registeredControls[identifier];
          control.setContainers(this._controlsContainer, this._canvasControlsContainer);
          control.init();
        }
      },
      writable: true,
      configurable: true
    },
    render: {

      /**
       * Re-renders the canvas
       */

      value: function render() {
        this._canvas.render();
      },
      writable: true,
      configurable: true
    },
    operations: {

      /**
       * An object containing all active operations
       * @type {Object.<String,Operation>}
       */

      get: function () {
        return this._operationsMap;
      },
      configurable: true
    },
    controls: {

      /**
       * An object containing all registered controls
       * @type {Object.<String,Control>}
       */

      get: function () {
        return this._registeredControls;
      },
      configurable: true
    },
    context: {

      /**
       * The data that is passed to the template renderer
       * @type {Object}
       */

      get: function () {
        var context = _get(Object.getPrototypeOf(NightUI.prototype), "context", this);
        context.controls = this._registeredControls;
        return context;
      },
      configurable: true
    },
    pause: {

      /**
       * Pauses the UI. Operation updates will not cause a re-rendering
       * of the canvas.
       */

      value: function pause() {
        this._paused = true;
      },
      writable: true,
      configurable: true
    },
    resume: {

      /**
       * Resumes the UI and re-renders the canvas
       * @param {Boolean} rerender = true
       */

      value: function resume() {
        var rerender = arguments[0] === undefined ? true : arguments[0];

        this._paused = false;
        if (rerender) {
          this.render();
        }
      },
      writable: true,
      configurable: true
    },
    addHistory: {

      /**
       * Adds the given operation and options to the history stack
       * @param {Operation} operation
       * @param {Object.<String, *>} options
       * @param {Boolean} identity
       */

      value: function addHistory(operation, options, identity) {
        this._history.push({ operation: operation, options: options, identity: identity });
        this._topControls.updateUndoButton();
      },
      writable: true,
      configurable: true
    },
    hideZoom: {

      /**
       * Hides the zoom control
       */

      value: function hideZoom() {
        this._topControls.hideZoom();
      },
      writable: true,
      configurable: true
    },
    showZoom: {

      /**
       * Hides the zoom control
       */

      value: function showZoom() {
        this._topControls.showZoom();
      },
      writable: true,
      configurable: true
    },
    undo: {

      /**
       * Takes the last history item and applies its options
       */

      value: function undo() {
        var lastItem = this._history.pop();
        if (lastItem) {
          var operation = lastItem.operation;
          var identity = lastItem.identity;
          var options = lastItem.options;

          var operationInstance = this.operations[operation.identifier];
          if (!identity) {
            operationInstance.set(options);
          }
          operationInstance.isIdentity = identity;

          this.canvas.zoomToFit(true);
        }
        this._topControls.updateUndoButton();
      },
      writable: true,
      configurable: true
    },
    history: {

      /**
       * The undo history
       * @type {Array.<Object>}
       */

      get: function () {
        return this._history;
      },
      configurable: true
    }
  });

  return NightUI;
})(UI);

module.exports = NightUI;

},{"../base/ui":"/Users/sash/development/js/imglykit-rewrite/src/js/ui/base/ui.js","./controls/brightness":"/Users/sash/development/js/imglykit-rewrite/src/js/ui/night/controls/brightness.js","./controls/contrast":"/Users/sash/development/js/imglykit-rewrite/src/js/ui/night/controls/contrast.js","./controls/crop":"/Users/sash/development/js/imglykit-rewrite/src/js/ui/night/controls/crop.js","./controls/filters":"/Users/sash/development/js/imglykit-rewrite/src/js/ui/night/controls/filters.js","./controls/flip":"/Users/sash/development/js/imglykit-rewrite/src/js/ui/night/controls/flip.js","./controls/frames":"/Users/sash/development/js/imglykit-rewrite/src/js/ui/night/controls/frames.js","./controls/radial-blur":"/Users/sash/development/js/imglykit-rewrite/src/js/ui/night/controls/radial-blur.js","./controls/rotation":"/Users/sash/development/js/imglykit-rewrite/src/js/ui/night/controls/rotation.js","./controls/saturation":"/Users/sash/development/js/imglykit-rewrite/src/js/ui/night/controls/saturation.js","./controls/stickers":"/Users/sash/development/js/imglykit-rewrite/src/js/ui/night/controls/stickers.js","./controls/text":"/Users/sash/development/js/imglykit-rewrite/src/js/ui/night/controls/text.js","./controls/tilt-shift":"/Users/sash/development/js/imglykit-rewrite/src/js/ui/night/controls/tilt-shift.js","./lib/canvas":"/Users/sash/development/js/imglykit-rewrite/src/js/ui/night/lib/canvas.js","./lib/top-controls":"/Users/sash/development/js/imglykit-rewrite/src/js/ui/night/lib/top-controls.js","es6-symbol":"/Users/sash/development/js/imglykit-rewrite/node_modules/es6-symbol/index.js"}],"/Users/sash/development/js/imglykit-rewrite/src/js/vendor/stack-blur.js":[function(require,module,exports){
"use strict";

/*

StackBlur - a fast almost Gaussian Blur For Canvas

Version:  0.5
Author:   Mario Klingemann
Contact:  mario@quasimondo.com
Website:  http://www.quasimondo.com/StackBlurForCanvas
Twitter:  @quasimondo

In case you find this class useful - especially in commercial projects -
I am not totally unhappy for a small donation to my PayPal account
mario@quasimondo.de

Or support me on flattr:
https://flattr.com/thing/72791/StackBlur-a-fast-almost-Gaussian-Blur-Effect-for-CanvasJavascript

Copyright (c) 2010 Mario Klingemann

Permission is hereby granted, free of charge, to any person
obtaining a copy of this software and associated documentation
files (the "Software"), to deal in the Software without
restriction, including without limitation the rights to use,
copy, modify, merge, publish, distribute, sublicense, and/or sell
copies of the Software, and to permit persons to whom the
Software is furnished to do so, subject to the following
conditions:

The above copyright notice and this permission notice shall be
included in all copies or substantial portions of the Software.

THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND,
EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES
OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND
NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT
HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY,
WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING
FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR
OTHER DEALINGS IN THE SOFTWARE.
*/

var mul_table = [512, 512, 456, 512, 328, 456, 335, 512, 405, 328, 271, 456, 388, 335, 292, 512, 454, 405, 364, 328, 298, 271, 496, 456, 420, 388, 360, 335, 312, 292, 273, 512, 482, 454, 428, 405, 383, 364, 345, 328, 312, 298, 284, 271, 259, 496, 475, 456, 437, 420, 404, 388, 374, 360, 347, 335, 323, 312, 302, 292, 282, 273, 265, 512, 497, 482, 468, 454, 441, 428, 417, 405, 394, 383, 373, 364, 354, 345, 337, 328, 320, 312, 305, 298, 291, 284, 278, 271, 265, 259, 507, 496, 485, 475, 465, 456, 446, 437, 428, 420, 412, 404, 396, 388, 381, 374, 367, 360, 354, 347, 341, 335, 329, 323, 318, 312, 307, 302, 297, 292, 287, 282, 278, 273, 269, 265, 261, 512, 505, 497, 489, 482, 475, 468, 461, 454, 447, 441, 435, 428, 422, 417, 411, 405, 399, 394, 389, 383, 378, 373, 368, 364, 359, 354, 350, 345, 341, 337, 332, 328, 324, 320, 316, 312, 309, 305, 301, 298, 294, 291, 287, 284, 281, 278, 274, 271, 268, 265, 262, 259, 257, 507, 501, 496, 491, 485, 480, 475, 470, 465, 460, 456, 451, 446, 442, 437, 433, 428, 424, 420, 416, 412, 408, 404, 400, 396, 392, 388, 385, 381, 377, 374, 370, 367, 363, 360, 357, 354, 350, 347, 344, 341, 338, 335, 332, 329, 326, 323, 320, 318, 315, 312, 310, 307, 304, 302, 299, 297, 294, 292, 289, 287, 285, 282, 280, 278, 275, 273, 271, 269, 267, 265, 263, 261, 259];

var shg_table = [9, 11, 12, 13, 13, 14, 14, 15, 15, 15, 15, 16, 16, 16, 16, 17, 17, 17, 17, 17, 17, 17, 18, 18, 18, 18, 18, 18, 18, 18, 18, 19, 19, 19, 19, 19, 19, 19, 19, 19, 19, 19, 19, 19, 19, 20, 20, 20, 20, 20, 20, 20, 20, 20, 20, 20, 20, 20, 20, 20, 20, 20, 20, 21, 21, 21, 21, 21, 21, 21, 21, 21, 21, 21, 21, 21, 21, 21, 21, 21, 21, 21, 21, 21, 21, 21, 21, 21, 21, 21, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24];

function stackBlurCanvasRGBA(imageData, top_x, top_y, width, height, radius) {
  if (isNaN(radius) || radius < 1) {
    return;
  }radius |= 0;

  var pixels = imageData.data;

  var x, y, i, p, yp, yi, yw, r_sum, g_sum, b_sum, a_sum, r_out_sum, g_out_sum, b_out_sum, a_out_sum, r_in_sum, g_in_sum, b_in_sum, a_in_sum, pr, pg, pb, pa, rbs;

  var div = radius + radius + 1;
  var widthMinus1 = width - 1;
  var heightMinus1 = height - 1;
  var radiusPlus1 = radius + 1;
  var sumFactor = radiusPlus1 * (radiusPlus1 + 1) / 2;

  var stackStart = new BlurStack();
  var stackEnd;
  var stack = stackStart;
  for (i = 1; i < div; i++) {
    stack = stack.next = new BlurStack();
    if (i == radiusPlus1) stackEnd = stack;
  }
  stack.next = stackStart;
  var stackIn = null;
  var stackOut = null;

  yw = yi = 0;

  var mul_sum = mul_table[radius];
  var shg_sum = shg_table[radius];

  for (y = 0; y < height; y++) {
    r_in_sum = g_in_sum = b_in_sum = a_in_sum = r_sum = g_sum = b_sum = a_sum = 0;

    r_out_sum = radiusPlus1 * (pr = pixels[yi]);
    g_out_sum = radiusPlus1 * (pg = pixels[yi + 1]);
    b_out_sum = radiusPlus1 * (pb = pixels[yi + 2]);
    a_out_sum = radiusPlus1 * (pa = pixels[yi + 3]);

    r_sum += sumFactor * pr;
    g_sum += sumFactor * pg;
    b_sum += sumFactor * pb;
    a_sum += sumFactor * pa;

    stack = stackStart;

    for (i = 0; i < radiusPlus1; i++) {
      stack.r = pr;
      stack.g = pg;
      stack.b = pb;
      stack.a = pa;
      stack = stack.next;
    }

    for (i = 1; i < radiusPlus1; i++) {
      p = yi + ((widthMinus1 < i ? widthMinus1 : i) << 2);
      r_sum += (stack.r = pr = pixels[p]) * (rbs = radiusPlus1 - i);
      g_sum += (stack.g = pg = pixels[p + 1]) * rbs;
      b_sum += (stack.b = pb = pixels[p + 2]) * rbs;
      a_sum += (stack.a = pa = pixels[p + 3]) * rbs;

      r_in_sum += pr;
      g_in_sum += pg;
      b_in_sum += pb;
      a_in_sum += pa;

      stack = stack.next;
    }

    stackIn = stackStart;
    stackOut = stackEnd;
    for (x = 0; x < width; x++) {
      pixels[yi + 3] = pa = a_sum * mul_sum >> shg_sum;
      if (pa !== 0) {
        pa = 255 / pa;
        pixels[yi] = (r_sum * mul_sum >> shg_sum) * pa;
        pixels[yi + 1] = (g_sum * mul_sum >> shg_sum) * pa;
        pixels[yi + 2] = (b_sum * mul_sum >> shg_sum) * pa;
      } else {
        pixels[yi] = pixels[yi + 1] = pixels[yi + 2] = 0;
      }

      r_sum -= r_out_sum;
      g_sum -= g_out_sum;
      b_sum -= b_out_sum;
      a_sum -= a_out_sum;

      r_out_sum -= stackIn.r;
      g_out_sum -= stackIn.g;
      b_out_sum -= stackIn.b;
      a_out_sum -= stackIn.a;

      p = yw + ((p = x + radius + 1) < widthMinus1 ? p : widthMinus1) << 2;

      r_in_sum += stackIn.r = pixels[p];
      g_in_sum += stackIn.g = pixels[p + 1];
      b_in_sum += stackIn.b = pixels[p + 2];
      a_in_sum += stackIn.a = pixels[p + 3];

      r_sum += r_in_sum;
      g_sum += g_in_sum;
      b_sum += b_in_sum;
      a_sum += a_in_sum;

      stackIn = stackIn.next;

      r_out_sum += pr = stackOut.r;
      g_out_sum += pg = stackOut.g;
      b_out_sum += pb = stackOut.b;
      a_out_sum += pa = stackOut.a;

      r_in_sum -= pr;
      g_in_sum -= pg;
      b_in_sum -= pb;
      a_in_sum -= pa;

      stackOut = stackOut.next;

      yi += 4;
    }
    yw += width;
  }

  for (x = 0; x < width; x++) {
    g_in_sum = b_in_sum = a_in_sum = r_in_sum = g_sum = b_sum = a_sum = r_sum = 0;

    yi = x << 2;
    r_out_sum = radiusPlus1 * (pr = pixels[yi]);
    g_out_sum = radiusPlus1 * (pg = pixels[yi + 1]);
    b_out_sum = radiusPlus1 * (pb = pixels[yi + 2]);
    a_out_sum = radiusPlus1 * (pa = pixels[yi + 3]);

    r_sum += sumFactor * pr;
    g_sum += sumFactor * pg;
    b_sum += sumFactor * pb;
    a_sum += sumFactor * pa;

    stack = stackStart;

    for (i = 0; i < radiusPlus1; i++) {
      stack.r = pr;
      stack.g = pg;
      stack.b = pb;
      stack.a = pa;
      stack = stack.next;
    }

    yp = width;

    for (i = 1; i <= radius; i++) {
      yi = yp + x << 2;

      r_sum += (stack.r = pr = pixels[yi]) * (rbs = radiusPlus1 - i);
      g_sum += (stack.g = pg = pixels[yi + 1]) * rbs;
      b_sum += (stack.b = pb = pixels[yi + 2]) * rbs;
      a_sum += (stack.a = pa = pixels[yi + 3]) * rbs;

      r_in_sum += pr;
      g_in_sum += pg;
      b_in_sum += pb;
      a_in_sum += pa;

      stack = stack.next;

      if (i < heightMinus1) {
        yp += width;
      }
    }

    yi = x;
    stackIn = stackStart;
    stackOut = stackEnd;
    for (y = 0; y < height; y++) {
      p = yi << 2;
      pixels[p + 3] = pa = a_sum * mul_sum >> shg_sum;
      if (pa > 0) {
        pa = 255 / pa;
        pixels[p] = (r_sum * mul_sum >> shg_sum) * pa;
        pixels[p + 1] = (g_sum * mul_sum >> shg_sum) * pa;
        pixels[p + 2] = (b_sum * mul_sum >> shg_sum) * pa;
      } else {
        pixels[p] = pixels[p + 1] = pixels[p + 2] = 0;
      }

      r_sum -= r_out_sum;
      g_sum -= g_out_sum;
      b_sum -= b_out_sum;
      a_sum -= a_out_sum;

      r_out_sum -= stackIn.r;
      g_out_sum -= stackIn.g;
      b_out_sum -= stackIn.b;
      a_out_sum -= stackIn.a;

      p = x + ((p = y + radiusPlus1) < heightMinus1 ? p : heightMinus1) * width << 2;

      r_sum += r_in_sum += stackIn.r = pixels[p];
      g_sum += g_in_sum += stackIn.g = pixels[p + 1];
      b_sum += b_in_sum += stackIn.b = pixels[p + 2];
      a_sum += a_in_sum += stackIn.a = pixels[p + 3];

      stackIn = stackIn.next;

      r_out_sum += pr = stackOut.r;
      g_out_sum += pg = stackOut.g;
      b_out_sum += pb = stackOut.b;
      a_out_sum += pa = stackOut.a;

      r_in_sum -= pr;
      g_in_sum -= pg;
      b_in_sum -= pb;
      a_in_sum -= pa;

      stackOut = stackOut.next;

      yi += width;
    }
  }
}

function BlurStack() {
  this.r = 0;
  this.g = 0;
  this.b = 0;
  this.a = 0;
  this.next = null;
}

module.exports = {
  stackBlurCanvasRGBA: stackBlurCanvasRGBA
};

},{}],"lodash":[function(require,module,exports){
(function (global){
"use strict";

/**
 * @license
 * Lo-Dash 2.4.1 (Custom Build) <http://lodash.com/>
 * Build: `lodash include="defaults,extend"`
 * Copyright 2012-2013 The Dojo Foundation <http://dojofoundation.org/>
 * Based on Underscore.js 1.5.2 <http://underscorejs.org/LICENSE>
 * Copyright 2009-2013 Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
 * Available under MIT license <http://lodash.com/license>
 */
;(function () {

  /** Used internally to indicate various things */
  var indicatorObject = {};

  /** Used to detected named functions */
  var reFuncName = /^\s*function[ \n\r\t]+\w/;

  /** Used to detect functions containing a `this` reference */
  var reThis = /\bthis\b/;

  /** Used to fix the JScript [[DontEnum]] bug */
  var shadowedProps = ["constructor", "hasOwnProperty", "isPrototypeOf", "propertyIsEnumerable", "toLocaleString", "toString", "valueOf"];

  /** `Object#toString` result shortcuts */
  var argsClass = "[object Arguments]",
      arrayClass = "[object Array]",
      boolClass = "[object Boolean]",
      dateClass = "[object Date]",
      errorClass = "[object Error]",
      funcClass = "[object Function]",
      numberClass = "[object Number]",
      objectClass = "[object Object]",
      regexpClass = "[object RegExp]",
      stringClass = "[object String]";

  /** Used as the property descriptor for `__bindData__` */
  var descriptor = {
    configurable: false,
    enumerable: false,
    value: null,
    writable: false
  };

  /** Used as the data object for `iteratorTemplate` */
  var iteratorData = {
    args: "",
    array: null,
    bottom: "",
    firstArg: "",
    init: "",
    keys: null,
    loop: "",
    shadowedProps: null,
    support: null,
    top: "",
    useHas: false
  };

  /** Used to determine if values are of the language type Object */
  var objectTypes = {
    boolean: false,
    "function": true,
    object: true,
    number: false,
    string: false,
    undefined: false
  };

  /** Used as a reference to the global object */
  var root = objectTypes[typeof window] && window || this;

  /** Detect free variable `exports` */
  var freeExports = objectTypes[typeof exports] && exports && !exports.nodeType && exports;

  /** Detect free variable `module` */
  var freeModule = objectTypes[typeof module] && module && !module.nodeType && module;

  /** Detect the popular CommonJS extension `module.exports` */
  var moduleExports = freeModule && freeModule.exports === freeExports && freeExports;

  /** Detect free variable `global` from Node.js or Browserified code and use it as `root` */
  var freeGlobal = objectTypes[typeof global] && global;
  if (freeGlobal && (freeGlobal.global === freeGlobal || freeGlobal.window === freeGlobal)) {
    root = freeGlobal;
  }

  /*--------------------------------------------------------------------------*/

  /**
   * Slices the `collection` from the `start` index up to, but not including,
   * the `end` index.
   *
   * Note: This function is used instead of `Array#slice` to support node lists
   * in IE < 9 and to ensure dense arrays are returned.
   *
   * @private
   * @param {Array|Object|string} collection The collection to slice.
   * @param {number} start The start index.
   * @param {number} end The end index.
   * @returns {Array} Returns the new array.
   */
  function slice(array, start, end) {
    start || (start = 0);
    if (typeof end == "undefined") {
      end = array ? array.length : 0;
    }
    var index = -1,
        length = end - start || 0,
        result = Array(length < 0 ? 0 : length);

    while (++index < length) {
      result[index] = array[start + index];
    }
    return result;
  }

  /*--------------------------------------------------------------------------*/

  /**
   * Used for `Array` method references.
   *
   * Normally `Array.prototype` would suffice, however, using an array literal
   * avoids issues in Narwhal.
   */
  var arrayRef = [];

  /** Used for native method references */
  var errorProto = Error.prototype,
      objectProto = Object.prototype,
      stringProto = String.prototype;

  /** Used to resolve the internal [[Class]] of values */
  var toString = objectProto.toString;

  /** Used to detect if a method is native */
  var reNative = RegExp("^" + String(toString).replace(/[.*+?^${}()|[\]\\]/g, "\\$&").replace(/toString| for [^\]]+/g, ".*?") + "$");

  /** Native method shortcuts */
  var fnToString = Function.prototype.toString,
      hasOwnProperty = objectProto.hasOwnProperty,
      push = arrayRef.push,
      propertyIsEnumerable = objectProto.propertyIsEnumerable,
      unshift = arrayRef.unshift;

  /** Used to set meta data on functions */
  var defineProperty = (function () {
    // IE 8 only accepts DOM elements
    try {
      var o = {},
          func = isNative(func = Object.defineProperty) && func,
          result = func(o, o, o) && func;
    } catch (e) {}
    return result;
  })();

  /* Native method shortcuts for methods with the same name as other `lodash` methods */
  var nativeCreate = isNative(nativeCreate = Object.create) && nativeCreate,
      nativeIsArray = isNative(nativeIsArray = Array.isArray) && nativeIsArray,
      nativeKeys = isNative(nativeKeys = Object.keys) && nativeKeys;

  /** Used to avoid iterating non-enumerable properties in IE < 9 */
  var nonEnumProps = {};
  nonEnumProps[arrayClass] = nonEnumProps[dateClass] = nonEnumProps[numberClass] = { constructor: true, toLocaleString: true, toString: true, valueOf: true };
  nonEnumProps[boolClass] = nonEnumProps[stringClass] = { constructor: true, toString: true, valueOf: true };
  nonEnumProps[errorClass] = nonEnumProps[funcClass] = nonEnumProps[regexpClass] = { constructor: true, toString: true };
  nonEnumProps[objectClass] = { constructor: true };

  (function () {
    var length = shadowedProps.length;
    while (length--) {
      var key = shadowedProps[length];
      for (var className in nonEnumProps) {
        if (hasOwnProperty.call(nonEnumProps, className) && !hasOwnProperty.call(nonEnumProps[className], key)) {
          nonEnumProps[className][key] = false;
        }
      }
    }
  })();

  /*--------------------------------------------------------------------------*/

  /**
   * Creates a `lodash` object which wraps the given value to enable intuitive
   * method chaining.
   *
   * In addition to Lo-Dash methods, wrappers also have the following `Array` methods:
   * `concat`, `join`, `pop`, `push`, `reverse`, `shift`, `slice`, `sort`, `splice`,
   * and `unshift`
   *
   * Chaining is supported in custom builds as long as the `value` method is
   * implicitly or explicitly included in the build.
   *
   * The chainable wrapper functions are:
   * `after`, `assign`, `bind`, `bindAll`, `bindKey`, `chain`, `compact`,
   * `compose`, `concat`, `countBy`, `create`, `createCallback`, `curry`,
   * `debounce`, `defaults`, `defer`, `delay`, `difference`, `filter`, `flatten`,
   * `forEach`, `forEachRight`, `forIn`, `forInRight`, `forOwn`, `forOwnRight`,
   * `functions`, `groupBy`, `indexBy`, `initial`, `intersection`, `invert`,
   * `invoke`, `keys`, `map`, `max`, `memoize`, `merge`, `min`, `object`, `omit`,
   * `once`, `pairs`, `partial`, `partialRight`, `pick`, `pluck`, `pull`, `push`,
   * `range`, `reject`, `remove`, `rest`, `reverse`, `shuffle`, `slice`, `sort`,
   * `sortBy`, `splice`, `tap`, `throttle`, `times`, `toArray`, `transform`,
   * `union`, `uniq`, `unshift`, `unzip`, `values`, `where`, `without`, `wrap`,
   * and `zip`
   *
   * The non-chainable wrapper functions are:
   * `clone`, `cloneDeep`, `contains`, `escape`, `every`, `find`, `findIndex`,
   * `findKey`, `findLast`, `findLastIndex`, `findLastKey`, `has`, `identity`,
   * `indexOf`, `isArguments`, `isArray`, `isBoolean`, `isDate`, `isElement`,
   * `isEmpty`, `isEqual`, `isFinite`, `isFunction`, `isNaN`, `isNull`, `isNumber`,
   * `isObject`, `isPlainObject`, `isRegExp`, `isString`, `isUndefined`, `join`,
   * `lastIndexOf`, `mixin`, `noConflict`, `parseInt`, `pop`, `random`, `reduce`,
   * `reduceRight`, `result`, `shift`, `size`, `some`, `sortedIndex`, `runInContext`,
   * `template`, `unescape`, `uniqueId`, and `value`
   *
   * The wrapper functions `first` and `last` return wrapped values when `n` is
   * provided, otherwise they return unwrapped values.
   *
   * Explicit chaining can be enabled by using the `_.chain` method.
   *
   * @name _
   * @constructor
   * @category Chaining
   * @param {*} value The value to wrap in a `lodash` instance.
   * @returns {Object} Returns a `lodash` instance.
   * @example
   *
   * var wrapped = _([1, 2, 3]);
   *
   * // returns an unwrapped value
   * wrapped.reduce(function(sum, num) {
   *   return sum + num;
   * });
   * // => 6
   *
   * // returns a wrapped value
   * var squares = wrapped.map(function(num) {
   *   return num * num;
   * });
   *
   * _.isArray(squares);
   * // => false
   *
   * _.isArray(squares.value());
   * // => true
   */
  function lodash() {}

  /**
   * An object used to flag environments features.
   *
   * @static
   * @memberOf _
   * @type Object
   */
  var support = lodash.support = {};

  (function () {
    var ctor = function ctor() {
      this.x = 1;
    },
        object = { "0": 1, length: 1 },
        props = [];

    ctor.prototype = { valueOf: 1, y: 1 };
    for (var key in new ctor()) {
      props.push(key);
    }
    for (key in arguments) {}

    /**
     * Detect if an `arguments` object's [[Class]] is resolvable (all but Firefox < 4, IE < 9).
     *
     * @memberOf _.support
     * @type boolean
     */
    support.argsClass = toString.call(arguments) == argsClass;

    /**
     * Detect if `arguments` objects are `Object` objects (all but Narwhal and Opera < 10.5).
     *
     * @memberOf _.support
     * @type boolean
     */
    support.argsObject = arguments.constructor == Object && !(arguments instanceof Array);

    /**
     * Detect if `name` or `message` properties of `Error.prototype` are
     * enumerable by default. (IE < 9, Safari < 5.1)
     *
     * @memberOf _.support
     * @type boolean
     */
    support.enumErrorProps = propertyIsEnumerable.call(errorProto, "message") || propertyIsEnumerable.call(errorProto, "name");

    /**
     * Detect if `prototype` properties are enumerable by default.
     *
     * Firefox < 3.6, Opera > 9.50 - Opera < 11.60, and Safari < 5.1
     * (if the prototype or a property on the prototype has been set)
     * incorrectly sets a function's `prototype` property [[Enumerable]]
     * value to `true`.
     *
     * @memberOf _.support
     * @type boolean
     */
    support.enumPrototypes = propertyIsEnumerable.call(ctor, "prototype");

    /**
     * Detect if functions can be decompiled by `Function#toString`
     * (all but PS3 and older Opera mobile browsers & avoided in Windows 8 apps).
     *
     * @memberOf _.support
     * @type boolean
     */
    support.funcDecomp = !isNative(root.WinRTError) && reThis.test(function () {
      return this;
    });

    /**
     * Detect if `Function#name` is supported (all but IE).
     *
     * @memberOf _.support
     * @type boolean
     */
    support.funcNames = typeof Function.name == "string";

    /**
     * Detect if `arguments` object indexes are non-enumerable
     * (Firefox < 4, IE < 9, PhantomJS, Safari < 5.1).
     *
     * @memberOf _.support
     * @type boolean
     */
    support.nonEnumArgs = key != 0;

    /**
     * Detect if properties shadowing those on `Object.prototype` are non-enumerable.
     *
     * In IE < 9 an objects own properties, shadowing non-enumerable ones, are
     * made non-enumerable as well (a.k.a the JScript [[DontEnum]] bug).
     *
     * @memberOf _.support
     * @type boolean
     */
    support.nonEnumShadows = !/valueOf/.test(props);

    /**
     * Detect if `Array#shift` and `Array#splice` augment array-like objects correctly.
     *
     * Firefox < 10, IE compatibility mode, and IE < 9 have buggy Array `shift()`
     * and `splice()` functions that fail to remove the last element, `value[0]`,
     * of array-like objects even though the `length` property is set to `0`.
     * The `shift()` method is buggy in IE 8 compatibility mode, while `splice()`
     * is buggy regardless of mode in IE < 9 and buggy in compatibility mode in IE 9.
     *
     * @memberOf _.support
     * @type boolean
     */
    support.spliceObjects = (arrayRef.splice.call(object, 0, 1), !object[0]);

    /**
     * Detect lack of support for accessing string characters by index.
     *
     * IE < 8 can't access characters by index and IE 8 can only access
     * characters by index on string literals.
     *
     * @memberOf _.support
     * @type boolean
     */
    support.unindexedChars = "x"[0] + Object("x")[0] != "xx";
  })(1);

  /*--------------------------------------------------------------------------*/

  /**
   * The template used to create iterator functions.
   *
   * @private
   * @param {Object} data The data object used to populate the text.
   * @returns {string} Returns the interpolated text.
   */
  var iteratorTemplate = function iteratorTemplate(obj) {

    var __p = "var index, iterable = " + obj.firstArg + ", result = " + obj.init + ";\nif (!iterable) return result;\n" + obj.top + ";";
    if (obj.array) {
      __p += "\nvar length = iterable.length; index = -1;\nif (" + obj.array + ") {  ";
      if (support.unindexedChars) {
        __p += "\n  if (isString(iterable)) {\n    iterable = iterable.split('')\n  }  ";
      }
      __p += "\n  while (++index < length) {\n    " + obj.loop + ";\n  }\n}\nelse {  ";
    } else if (support.nonEnumArgs) {
      __p += "\n  var length = iterable.length; index = -1;\n  if (length && isArguments(iterable)) {\n    while (++index < length) {\n      index += '';\n      " + obj.loop + ";\n    }\n  } else {  ";
    }

    if (support.enumPrototypes) {
      __p += "\n  var skipProto = typeof iterable == 'function';\n  ";
    }

    if (support.enumErrorProps) {
      __p += "\n  var skipErrorProps = iterable === errorProto || iterable instanceof Error;\n  ";
    }

    var conditions = [];if (support.enumPrototypes) {
      conditions.push("!(skipProto && index == \"prototype\")");
    }if (support.enumErrorProps) {
      conditions.push("!(skipErrorProps && (index == \"message\" || index == \"name\"))");
    }

    if (obj.useHas && obj.keys) {
      __p += "\n  var ownIndex = -1,\n      ownProps = objectTypes[typeof iterable] && keys(iterable),\n      length = ownProps ? ownProps.length : 0;\n\n  while (++ownIndex < length) {\n    index = ownProps[ownIndex];\n";
      if (conditions.length) {
        __p += "    if (" + conditions.join(" && ") + ") {\n  ";
      }
      __p += obj.loop + ";    ";
      if (conditions.length) {
        __p += "\n    }";
      }
      __p += "\n  }  ";
    } else {
      __p += "\n  for (index in iterable) {\n";
      if (obj.useHas) {
        conditions.push("hasOwnProperty.call(iterable, index)");
      }if (conditions.length) {
        __p += "    if (" + conditions.join(" && ") + ") {\n  ";
      }
      __p += obj.loop + ";    ";
      if (conditions.length) {
        __p += "\n    }";
      }
      __p += "\n  }    ";
      if (support.nonEnumShadows) {
        __p += "\n\n  if (iterable !== objectProto) {\n    var ctor = iterable.constructor,\n        isProto = iterable === (ctor && ctor.prototype),\n        className = iterable === stringProto ? stringClass : iterable === errorProto ? errorClass : toString.call(iterable),\n        nonEnum = nonEnumProps[className];\n      ";
        for (k = 0; k < 7; k++) {
          __p += "\n    index = '" + obj.shadowedProps[k] + "';\n    if ((!(isProto && nonEnum[index]) && hasOwnProperty.call(iterable, index))";
          if (!obj.useHas) {
            __p += " || (!nonEnum[index] && iterable[index] !== objectProto[index])";
          }
          __p += ") {\n      " + obj.loop + ";\n    }      ";
        }
        __p += "\n  }    ";
      }
    }

    if (obj.array || support.nonEnumArgs) {
      __p += "\n}";
    }
    __p += obj.bottom + ";\nreturn result";

    return __p;
  };

  /*--------------------------------------------------------------------------*/

  /**
   * The base implementation of `_.bind` that creates the bound function and
   * sets its meta data.
   *
   * @private
   * @param {Array} bindData The bind data array.
   * @returns {Function} Returns the new bound function.
   */
  function baseBind(bindData) {
    var func = bindData[0],
        partialArgs = bindData[2],
        thisArg = bindData[4];

    function bound() {
      // `Function#bind` spec
      // http://es5.github.io/#x15.3.4.5
      if (partialArgs) {
        // avoid `arguments` object deoptimizations by using `slice` instead
        // of `Array.prototype.slice.call` and not assigning `arguments` to a
        // variable as a ternary expression
        var args = slice(partialArgs);
        push.apply(args, arguments);
      }
      // mimic the constructor's `return` behavior
      // http://es5.github.io/#x13.2.2
      if (this instanceof bound) {
        // ensure `new bound` is an instance of `func`
        var thisBinding = baseCreate(func.prototype),
            result = func.apply(thisBinding, args || arguments);
        return isObject(result) ? result : thisBinding;
      }
      return func.apply(thisArg, args || arguments);
    }
    setBindData(bound, bindData);
    return bound;
  }

  /**
   * The base implementation of `_.create` without support for assigning
   * properties to the created object.
   *
   * @private
   * @param {Object} prototype The object to inherit from.
   * @returns {Object} Returns the new object.
   */
  function baseCreate(prototype, properties) {
    return isObject(prototype) ? nativeCreate(prototype) : {};
  }
  // fallback for browsers without `Object.create`
  if (!nativeCreate) {
    baseCreate = (function () {
      function Object() {}
      return function (prototype) {
        if (isObject(prototype)) {
          Object.prototype = prototype;
          var result = new Object();
          Object.prototype = null;
        }
        return result || root.Object();
      };
    })();
  }

  /**
   * The base implementation of `_.createCallback` without support for creating
   * "_.pluck" or "_.where" style callbacks.
   *
   * @private
   * @param {*} [func=identity] The value to convert to a callback.
   * @param {*} [thisArg] The `this` binding of the created callback.
   * @param {number} [argCount] The number of arguments the callback accepts.
   * @returns {Function} Returns a callback function.
   */
  function baseCreateCallback(func, thisArg, argCount) {
    if (typeof func != "function") {
      return identity;
    }
    // exit early for no `thisArg` or already bound by `Function#bind`
    if (typeof thisArg == "undefined" || !("prototype" in func)) {
      return func;
    }
    var bindData = func.__bindData__;
    if (typeof bindData == "undefined") {
      if (support.funcNames) {
        bindData = !func.name;
      }
      bindData = bindData || !support.funcDecomp;
      if (!bindData) {
        var source = fnToString.call(func);
        if (!support.funcNames) {
          bindData = !reFuncName.test(source);
        }
        if (!bindData) {
          // checks if `func` references the `this` keyword and stores the result
          bindData = reThis.test(source);
          setBindData(func, bindData);
        }
      }
    }
    // exit early if there are no `this` references or `func` is bound
    if (bindData === false || bindData !== true && bindData[1] & 1) {
      return func;
    }
    switch (argCount) {
      case 1:
        return function (value) {
          return func.call(thisArg, value);
        };
      case 2:
        return function (a, b) {
          return func.call(thisArg, a, b);
        };
      case 3:
        return function (value, index, collection) {
          return func.call(thisArg, value, index, collection);
        };
      case 4:
        return function (accumulator, value, index, collection) {
          return func.call(thisArg, accumulator, value, index, collection);
        };
    }
    return bind(func, thisArg);
  }

  /**
   * The base implementation of `createWrapper` that creates the wrapper and
   * sets its meta data.
   *
   * @private
   * @param {Array} bindData The bind data array.
   * @returns {Function} Returns the new function.
   */
  function baseCreateWrapper(bindData) {
    var func = bindData[0],
        bitmask = bindData[1],
        partialArgs = bindData[2],
        partialRightArgs = bindData[3],
        thisArg = bindData[4],
        arity = bindData[5];

    var isBind = bitmask & 1,
        isBindKey = bitmask & 2,
        isCurry = bitmask & 4,
        isCurryBound = bitmask & 8,
        key = func;

    function bound() {
      var thisBinding = isBind ? thisArg : this;
      if (partialArgs) {
        var args = slice(partialArgs);
        push.apply(args, arguments);
      }
      if (partialRightArgs || isCurry) {
        args || (args = slice(arguments));
        if (partialRightArgs) {
          push.apply(args, partialRightArgs);
        }
        if (isCurry && args.length < arity) {
          bitmask |= 16 & ~32;
          return baseCreateWrapper([func, isCurryBound ? bitmask : bitmask & ~3, args, null, thisArg, arity]);
        }
      }
      args || (args = arguments);
      if (isBindKey) {
        func = thisBinding[key];
      }
      if (this instanceof bound) {
        thisBinding = baseCreate(func.prototype);
        var result = func.apply(thisBinding, args);
        return isObject(result) ? result : thisBinding;
      }
      return func.apply(thisBinding, args);
    }
    setBindData(bound, bindData);
    return bound;
  }

  /**
   * Creates a function that, when called, either curries or invokes `func`
   * with an optional `this` binding and partially applied arguments.
   *
   * @private
   * @param {Function|string} func The function or method name to reference.
   * @param {number} bitmask The bitmask of method flags to compose.
   *  The bitmask may be composed of the following flags:
   *  1 - `_.bind`
   *  2 - `_.bindKey`
   *  4 - `_.curry`
   *  8 - `_.curry` (bound)
   *  16 - `_.partial`
   *  32 - `_.partialRight`
   * @param {Array} [partialArgs] An array of arguments to prepend to those
   *  provided to the new function.
   * @param {Array} [partialRightArgs] An array of arguments to append to those
   *  provided to the new function.
   * @param {*} [thisArg] The `this` binding of `func`.
   * @param {number} [arity] The arity of `func`.
   * @returns {Function} Returns the new function.
   */
  function createWrapper(_x, _x2, _x3, _x4, _x5, _x6) {
    var _arguments;

    var _again = true;

    _function: while (_again) {
      _again = false;
      var func = _x,
          bitmask = _x2,
          partialArgs = _x3,
          partialRightArgs = _x4,
          thisArg = _x5,
          arity = _x6;
      isBind = isBindKey = isCurry = isCurryBound = isPartial = isPartialRight = bindData = creater = undefined;

      var isBind = bitmask & 1,
          isBindKey = bitmask & 2,
          isCurry = bitmask & 4,
          isCurryBound = bitmask & 8,
          isPartial = bitmask & 16,
          isPartialRight = bitmask & 32;

      if (!isBindKey && !isFunction(func)) {
        throw new TypeError();
      }
      if (isPartial && !partialArgs.length) {
        bitmask &= ~16;
        isPartial = partialArgs = false;
      }
      if (isPartialRight && !partialRightArgs.length) {
        bitmask &= ~32;
        isPartialRight = partialRightArgs = false;
      }
      var bindData = func && func.__bindData__;
      if (bindData && bindData !== true) {
        // clone `bindData`
        bindData = slice(bindData);
        if (bindData[2]) {
          bindData[2] = slice(bindData[2]);
        }
        if (bindData[3]) {
          bindData[3] = slice(bindData[3]);
        }
        // set `thisBinding` is not previously bound
        if (isBind && !(bindData[1] & 1)) {
          bindData[4] = thisArg;
        }
        // set if previously bound but not currently (subsequent curried functions)
        if (!isBind && bindData[1] & 1) {
          bitmask |= 8;
        }
        // set curried arity if not yet set
        if (isCurry && !(bindData[1] & 4)) {
          bindData[5] = arity;
        }
        // append partial left arguments
        if (isPartial) {
          push.apply(bindData[2] || (bindData[2] = []), partialArgs);
        }
        // append partial right arguments
        if (isPartialRight) {
          unshift.apply(bindData[3] || (bindData[3] = []), partialRightArgs);
        }
        // merge flags
        bindData[1] |= bitmask;
        _arguments = bindData;
        _x = _arguments[0];
        _x2 = _arguments[1];
        _x3 = _arguments[2];
        _x4 = _arguments[3];
        _x5 = _arguments[4];
        _x6 = _arguments[5];
        _again = true;
        continue _function;
      }
      // fast path for `_.bind`
      var creater = bitmask == 1 || bitmask === 17 ? baseBind : baseCreateWrapper;
      return creater([func, bitmask, partialArgs, partialRightArgs, thisArg, arity]);
    }
  }

  /**
   * Creates compiled iteration functions.
   *
   * @private
   * @param {...Object} [options] The compile options object(s).
   * @param {string} [options.array] Code to determine if the iterable is an array or array-like.
   * @param {boolean} [options.useHas] Specify using `hasOwnProperty` checks in the object loop.
   * @param {Function} [options.keys] A reference to `_.keys` for use in own property iteration.
   * @param {string} [options.args] A comma separated string of iteration function arguments.
   * @param {string} [options.top] Code to execute before the iteration branches.
   * @param {string} [options.loop] Code to execute in the object loop.
   * @param {string} [options.bottom] Code to execute after the iteration branches.
   * @returns {Function} Returns the compiled function.
   */
  function createIterator() {
    // data properties
    iteratorData.shadowedProps = shadowedProps;

    // iterator options
    iteratorData.array = iteratorData.bottom = iteratorData.loop = iteratorData.top = "";
    iteratorData.init = "iterable";
    iteratorData.useHas = true;

    // merge options into a template data object
    for (var object, index = 0; object = arguments[index]; index++) {
      for (var key in object) {
        iteratorData[key] = object[key];
      }
    }
    var args = iteratorData.args;
    iteratorData.firstArg = /^[^,]+/.exec(args)[0];

    // create the function factory
    var factory = Function("baseCreateCallback, errorClass, errorProto, hasOwnProperty, " + "indicatorObject, isArguments, isArray, isString, keys, objectProto, " + "objectTypes, nonEnumProps, stringClass, stringProto, toString", "return function(" + args + ") {\n" + iteratorTemplate(iteratorData) + "\n}");

    // return the compiled function
    return factory(baseCreateCallback, errorClass, errorProto, hasOwnProperty, indicatorObject, isArguments, isArray, isString, iteratorData.keys, objectProto, objectTypes, nonEnumProps, stringClass, stringProto, toString);
  }

  /**
   * Checks if `value` is a native function.
   *
   * @private
   * @param {*} value The value to check.
   * @returns {boolean} Returns `true` if the `value` is a native function, else `false`.
   */
  function isNative(value) {
    return typeof value == "function" && reNative.test(value);
  }

  /**
   * Sets `this` binding data on a given function.
   *
   * @private
   * @param {Function} func The function to set data on.
   * @param {Array} value The data array to set.
   */
  var setBindData = !defineProperty ? noop : function (func, value) {
    descriptor.value = value;
    defineProperty(func, "__bindData__", descriptor);
  };

  /*--------------------------------------------------------------------------*/

  /**
   * Checks if `value` is an `arguments` object.
   *
   * @static
   * @memberOf _
   * @category Objects
   * @param {*} value The value to check.
   * @returns {boolean} Returns `true` if the `value` is an `arguments` object, else `false`.
   * @example
   *
   * (function() { return _.isArguments(arguments); })(1, 2, 3);
   * // => true
   *
   * _.isArguments([1, 2, 3]);
   * // => false
   */
  function isArguments(value) {
    return value && typeof value == "object" && typeof value.length == "number" && toString.call(value) == argsClass || false;
  }
  // fallback for browsers that can't detect `arguments` objects by [[Class]]
  if (!support.argsClass) {
    isArguments = function (value) {
      return value && typeof value == "object" && typeof value.length == "number" && hasOwnProperty.call(value, "callee") && !propertyIsEnumerable.call(value, "callee") || false;
    };
  }

  /**
   * Checks if `value` is an array.
   *
   * @static
   * @memberOf _
   * @type Function
   * @category Objects
   * @param {*} value The value to check.
   * @returns {boolean} Returns `true` if the `value` is an array, else `false`.
   * @example
   *
   * (function() { return _.isArray(arguments); })();
   * // => false
   *
   * _.isArray([1, 2, 3]);
   * // => true
   */
  var isArray = nativeIsArray || function (value) {
    return value && typeof value == "object" && typeof value.length == "number" && toString.call(value) == arrayClass || false;
  };

  /**
   * A fallback implementation of `Object.keys` which produces an array of the
   * given object's own enumerable property names.
   *
   * @private
   * @type Function
   * @param {Object} object The object to inspect.
   * @returns {Array} Returns an array of property names.
   */
  var shimKeys = createIterator({
    args: "object",
    init: "[]",
    top: "if (!(objectTypes[typeof object])) return result",
    loop: "result.push(index)"
  });

  /**
   * Creates an array composed of the own enumerable property names of an object.
   *
   * @static
   * @memberOf _
   * @category Objects
   * @param {Object} object The object to inspect.
   * @returns {Array} Returns an array of property names.
   * @example
   *
   * _.keys({ 'one': 1, 'two': 2, 'three': 3 });
   * // => ['one', 'two', 'three'] (property order is not guaranteed across environments)
   */
  var keys = !nativeKeys ? shimKeys : function (object) {
    if (!isObject(object)) {
      return [];
    }
    if (support.enumPrototypes && typeof object == "function" || support.nonEnumArgs && object.length && isArguments(object)) {
      return shimKeys(object);
    }
    return nativeKeys(object);
  };

  /** Reusable iterator options for `assign` and `defaults` */
  var defaultsIteratorOptions = {
    args: "object, source, guard",
    top: "var args = arguments,\n" + "    argsIndex = 0,\n" + "    argsLength = typeof guard == 'number' ? 2 : args.length;\n" + "while (++argsIndex < argsLength) {\n" + "  iterable = args[argsIndex];\n" + "  if (iterable && objectTypes[typeof iterable]) {",
    keys: keys,
    loop: "if (typeof result[index] == 'undefined') result[index] = iterable[index]",
    bottom: "  }\n}"
  };

  /*--------------------------------------------------------------------------*/

  /**
   * Assigns own enumerable properties of source object(s) to the destination
   * object. Subsequent sources will overwrite property assignments of previous
   * sources. If a callback is provided it will be executed to produce the
   * assigned values. The callback is bound to `thisArg` and invoked with two
   * arguments; (objectValue, sourceValue).
   *
   * @static
   * @memberOf _
   * @type Function
   * @alias extend
   * @category Objects
   * @param {Object} object The destination object.
   * @param {...Object} [source] The source objects.
   * @param {Function} [callback] The function to customize assigning values.
   * @param {*} [thisArg] The `this` binding of `callback`.
   * @returns {Object} Returns the destination object.
   * @example
   *
   * _.assign({ 'name': 'fred' }, { 'employer': 'slate' });
   * // => { 'name': 'fred', 'employer': 'slate' }
   *
   * var defaults = _.partialRight(_.assign, function(a, b) {
   *   return typeof a == 'undefined' ? b : a;
   * });
   *
   * var object = { 'name': 'barney' };
   * defaults(object, { 'name': 'fred', 'employer': 'slate' });
   * // => { 'name': 'barney', 'employer': 'slate' }
   */
  var assign = createIterator(defaultsIteratorOptions, {
    top: defaultsIteratorOptions.top.replace(";", ";\n" + "if (argsLength > 3 && typeof args[argsLength - 2] == 'function') {\n" + "  var callback = baseCreateCallback(args[--argsLength - 1], args[argsLength--], 2);\n" + "} else if (argsLength > 2 && typeof args[argsLength - 1] == 'function') {\n" + "  callback = args[--argsLength];\n" + "}"),
    loop: "result[index] = callback ? callback(result[index], iterable[index]) : iterable[index]"
  });

  /**
   * Assigns own enumerable properties of source object(s) to the destination
   * object for all destination properties that resolve to `undefined`. Once a
   * property is set, additional defaults of the same property will be ignored.
   *
   * @static
   * @memberOf _
   * @type Function
   * @category Objects
   * @param {Object} object The destination object.
   * @param {...Object} [source] The source objects.
   * @param- {Object} [guard] Allows working with `_.reduce` without using its
   *  `key` and `object` arguments as sources.
   * @returns {Object} Returns the destination object.
   * @example
   *
   * var object = { 'name': 'barney' };
   * _.defaults(object, { 'name': 'fred', 'employer': 'slate' });
   * // => { 'name': 'barney', 'employer': 'slate' }
   */
  var defaults = createIterator(defaultsIteratorOptions);

  /**
   * Checks if `value` is a function.
   *
   * @static
   * @memberOf _
   * @category Objects
   * @param {*} value The value to check.
   * @returns {boolean} Returns `true` if the `value` is a function, else `false`.
   * @example
   *
   * _.isFunction(_);
   * // => true
   */
  function isFunction(value) {
    return typeof value == "function";
  }
  // fallback for older versions of Chrome and Safari
  if (isFunction(/x/)) {
    isFunction = function (value) {
      return typeof value == "function" && toString.call(value) == funcClass;
    };
  }

  /**
   * Checks if `value` is the language type of Object.
   * (e.g. arrays, functions, objects, regexes, `new Number(0)`, and `new String('')`)
   *
   * @static
   * @memberOf _
   * @category Objects
   * @param {*} value The value to check.
   * @returns {boolean} Returns `true` if the `value` is an object, else `false`.
   * @example
   *
   * _.isObject({});
   * // => true
   *
   * _.isObject([1, 2, 3]);
   * // => true
   *
   * _.isObject(1);
   * // => false
   */
  function isObject(value) {
    // check if the value is the ECMAScript language type of Object
    // http://es5.github.io/#x8
    // and avoid a V8 bug
    // http://code.google.com/p/v8/issues/detail?id=2291
    return !!(value && objectTypes[typeof value]);
  }

  /**
   * Checks if `value` is a string.
   *
   * @static
   * @memberOf _
   * @category Objects
   * @param {*} value The value to check.
   * @returns {boolean} Returns `true` if the `value` is a string, else `false`.
   * @example
   *
   * _.isString('fred');
   * // => true
   */
  function isString(value) {
    return typeof value == "string" || value && typeof value == "object" && toString.call(value) == stringClass || false;
  }

  /*--------------------------------------------------------------------------*/

  /**
   * Creates a function that, when called, invokes `func` with the `this`
   * binding of `thisArg` and prepends any additional `bind` arguments to those
   * provided to the bound function.
   *
   * @static
   * @memberOf _
   * @category Functions
   * @param {Function} func The function to bind.
   * @param {*} [thisArg] The `this` binding of `func`.
   * @param {...*} [arg] Arguments to be partially applied.
   * @returns {Function} Returns the new bound function.
   * @example
   *
   * var func = function(greeting) {
   *   return greeting + ' ' + this.name;
   * };
   *
   * func = _.bind(func, { 'name': 'fred' }, 'hi');
   * func();
   * // => 'hi fred'
   */
  function bind(func, thisArg) {
    return arguments.length > 2 ? createWrapper(func, 17, slice(arguments, 2), null, thisArg) : createWrapper(func, 1, null, null, thisArg);
  }

  /*--------------------------------------------------------------------------*/

  /**
   * This method returns the first argument provided to it.
   *
   * @static
   * @memberOf _
   * @category Utilities
   * @param {*} value Any value.
   * @returns {*} Returns `value`.
   * @example
   *
   * var object = { 'name': 'fred' };
   * _.identity(object) === object;
   * // => true
   */
  function identity(value) {
    return value;
  }

  /**
   * A no-operation function.
   *
   * @static
   * @memberOf _
   * @category Utilities
   * @example
   *
   * var object = { 'name': 'fred' };
   * _.noop(object) === undefined;
   * // => true
   */
  function noop() {}

  /*--------------------------------------------------------------------------*/

  lodash.assign = assign;
  lodash.bind = bind;
  lodash.defaults = defaults;
  lodash.keys = keys;

  lodash.extend = assign;

  /*--------------------------------------------------------------------------*/

  lodash.identity = identity;
  lodash.isArguments = isArguments;
  lodash.isArray = isArray;
  lodash.isFunction = isFunction;
  lodash.isObject = isObject;
  lodash.isString = isString;
  lodash.noop = noop;

  /*--------------------------------------------------------------------------*/

  /**
   * The semantic version number.
   *
   * @static
   * @memberOf _
   * @type string
   */
  lodash.VERSION = "2.4.1";

  /*--------------------------------------------------------------------------*/

  // some AMD build optimizers like r.js check for condition patterns like the following:
  if (typeof define == "function" && typeof define.amd == "object" && define.amd) {
    // Expose Lo-Dash to the global object even when an AMD loader is present in
    // case Lo-Dash is loaded with a RequireJS shim config.
    // See http://requirejs.org/docs/api.html#config-shim
    root._ = lodash;

    // define as an anonymous module so, through path mapping, it can be
    // referenced as the "underscore" module
    define(function () {
      return lodash;
    });
  }
  // check for `exports` after `define` in case a build optimizer adds an `exports` object
  else if (freeExports && freeModule) {
    // in Node.js or RingoJS
    if (moduleExports) {
      (freeModule.exports = lodash)._ = lodash;
    }
    // in Narwhal or Rhino -require
    else {
      freeExports._ = lodash;
    }
  } else {
    // in a browser or Rhino
    root._ = lodash;
  }
}).call(undefined);

// no operation performed

// no operation performed

}).call(this,typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {})
},{}]},{},["./index.js"])
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm5vZGVfbW9kdWxlcy9icm93c2VyaWZ5L25vZGVfbW9kdWxlcy9icm93c2VyLXBhY2svX3ByZWx1ZGUuanMiLCIvVXNlcnMvc2FzaC9kZXZlbG9wbWVudC9qcy9pbWdseWtpdC1yZXdyaXRlL2luZGV4LmpzIiwibm9kZV9tb2R1bGVzL2JsdWViaXJkL2pzL21haW4vYW55LmpzIiwibm9kZV9tb2R1bGVzL2JsdWViaXJkL2pzL21haW4vYXN5bmMuanMiLCJub2RlX21vZHVsZXMvYmx1ZWJpcmQvanMvbWFpbi9ibHVlYmlyZC5qcyIsIm5vZGVfbW9kdWxlcy9ibHVlYmlyZC9qcy9tYWluL2NhbGxfZ2V0LmpzIiwibm9kZV9tb2R1bGVzL2JsdWViaXJkL2pzL21haW4vY2FuY2VsLmpzIiwibm9kZV9tb2R1bGVzL2JsdWViaXJkL2pzL21haW4vY2FwdHVyZWRfdHJhY2UuanMiLCJub2RlX21vZHVsZXMvYmx1ZWJpcmQvanMvbWFpbi9jYXRjaF9maWx0ZXIuanMiLCJub2RlX21vZHVsZXMvYmx1ZWJpcmQvanMvbWFpbi9kaXJlY3RfcmVzb2x2ZS5qcyIsIm5vZGVfbW9kdWxlcy9ibHVlYmlyZC9qcy9tYWluL2VhY2guanMiLCJub2RlX21vZHVsZXMvYmx1ZWJpcmQvanMvbWFpbi9lcnJvcnMuanMiLCJub2RlX21vZHVsZXMvYmx1ZWJpcmQvanMvbWFpbi9lcnJvcnNfYXBpX3JlamVjdGlvbi5qcyIsIm5vZGVfbW9kdWxlcy9ibHVlYmlyZC9qcy9tYWluL2VzNS5qcyIsIm5vZGVfbW9kdWxlcy9ibHVlYmlyZC9qcy9tYWluL2ZpbHRlci5qcyIsIm5vZGVfbW9kdWxlcy9ibHVlYmlyZC9qcy9tYWluL2ZpbmFsbHkuanMiLCJub2RlX21vZHVsZXMvYmx1ZWJpcmQvanMvbWFpbi9nZW5lcmF0b3JzLmpzIiwibm9kZV9tb2R1bGVzL2JsdWViaXJkL2pzL21haW4vam9pbi5qcyIsIm5vZGVfbW9kdWxlcy9ibHVlYmlyZC9qcy9tYWluL21hcC5qcyIsIm5vZGVfbW9kdWxlcy9ibHVlYmlyZC9qcy9tYWluL25vZGVpZnkuanMiLCJub2RlX21vZHVsZXMvYmx1ZWJpcmQvanMvbWFpbi9wcm9ncmVzcy5qcyIsIm5vZGVfbW9kdWxlcy9ibHVlYmlyZC9qcy9tYWluL3Byb21pc2UuanMiLCJub2RlX21vZHVsZXMvYmx1ZWJpcmQvanMvbWFpbi9wcm9taXNlX2FycmF5LmpzIiwibm9kZV9tb2R1bGVzL2JsdWViaXJkL2pzL21haW4vcHJvbWlzZV9yZXNvbHZlci5qcyIsIm5vZGVfbW9kdWxlcy9ibHVlYmlyZC9qcy9tYWluL3Byb21pc2lmeS5qcyIsIm5vZGVfbW9kdWxlcy9ibHVlYmlyZC9qcy9tYWluL3Byb3BzLmpzIiwibm9kZV9tb2R1bGVzL2JsdWViaXJkL2pzL21haW4vcXVldWUuanMiLCJub2RlX21vZHVsZXMvYmx1ZWJpcmQvanMvbWFpbi9yYWNlLmpzIiwibm9kZV9tb2R1bGVzL2JsdWViaXJkL2pzL21haW4vcmVkdWNlLmpzIiwibm9kZV9tb2R1bGVzL2JsdWViaXJkL2pzL21haW4vc2NoZWR1bGUuanMiLCJub2RlX21vZHVsZXMvYmx1ZWJpcmQvanMvbWFpbi9zZXR0bGUuanMiLCJub2RlX21vZHVsZXMvYmx1ZWJpcmQvanMvbWFpbi9zb21lLmpzIiwibm9kZV9tb2R1bGVzL2JsdWViaXJkL2pzL21haW4vc3luY2hyb25vdXNfaW5zcGVjdGlvbi5qcyIsIm5vZGVfbW9kdWxlcy9ibHVlYmlyZC9qcy9tYWluL3RoZW5hYmxlcy5qcyIsIm5vZGVfbW9kdWxlcy9ibHVlYmlyZC9qcy9tYWluL3RpbWVycy5qcyIsIm5vZGVfbW9kdWxlcy9ibHVlYmlyZC9qcy9tYWluL3VzaW5nLmpzIiwibm9kZV9tb2R1bGVzL2JsdWViaXJkL2pzL21haW4vdXRpbC5qcyIsIm5vZGVfbW9kdWxlcy9icm93c2VyaWZ5L2xpYi9fZW1wdHkuanMiLCJub2RlX21vZHVsZXMvYnJvd3NlcmlmeS9ub2RlX21vZHVsZXMvcGF0aC1icm93c2VyaWZ5L2luZGV4LmpzIiwibm9kZV9tb2R1bGVzL2Jyb3dzZXJpZnkvbm9kZV9tb2R1bGVzL3Byb2Nlc3MvYnJvd3Nlci5qcyIsIm5vZGVfbW9kdWxlcy9kb3QvZG9ULmpzIiwibm9kZV9tb2R1bGVzL2RvdC9pbmRleC5qcyIsIm5vZGVfbW9kdWxlcy9lczYtc3ltYm9sL2luZGV4LmpzIiwibm9kZV9tb2R1bGVzL2VzNi1zeW1ib2wvaXMtaW1wbGVtZW50ZWQuanMiLCJub2RlX21vZHVsZXMvZXM2LXN5bWJvbC9ub2RlX21vZHVsZXMvZC9pbmRleC5qcyIsIm5vZGVfbW9kdWxlcy9lczYtc3ltYm9sL25vZGVfbW9kdWxlcy9lczUtZXh0L29iamVjdC9hc3NpZ24vaW5kZXguanMiLCJub2RlX21vZHVsZXMvZXM2LXN5bWJvbC9ub2RlX21vZHVsZXMvZXM1LWV4dC9vYmplY3QvYXNzaWduL2lzLWltcGxlbWVudGVkLmpzIiwibm9kZV9tb2R1bGVzL2VzNi1zeW1ib2wvbm9kZV9tb2R1bGVzL2VzNS1leHQvb2JqZWN0L2Fzc2lnbi9zaGltLmpzIiwibm9kZV9tb2R1bGVzL2VzNi1zeW1ib2wvbm9kZV9tb2R1bGVzL2VzNS1leHQvb2JqZWN0L2lzLWNhbGxhYmxlLmpzIiwibm9kZV9tb2R1bGVzL2VzNi1zeW1ib2wvbm9kZV9tb2R1bGVzL2VzNS1leHQvb2JqZWN0L2tleXMvaW5kZXguanMiLCJub2RlX21vZHVsZXMvZXM2LXN5bWJvbC9ub2RlX21vZHVsZXMvZXM1LWV4dC9vYmplY3Qva2V5cy9pcy1pbXBsZW1lbnRlZC5qcyIsIm5vZGVfbW9kdWxlcy9lczYtc3ltYm9sL25vZGVfbW9kdWxlcy9lczUtZXh0L29iamVjdC9rZXlzL3NoaW0uanMiLCJub2RlX21vZHVsZXMvZXM2LXN5bWJvbC9ub2RlX21vZHVsZXMvZXM1LWV4dC9vYmplY3Qvbm9ybWFsaXplLW9wdGlvbnMuanMiLCJub2RlX21vZHVsZXMvZXM2LXN5bWJvbC9ub2RlX21vZHVsZXMvZXM1LWV4dC9vYmplY3QvdmFsaWQtdmFsdWUuanMiLCJub2RlX21vZHVsZXMvZXM2LXN5bWJvbC9ub2RlX21vZHVsZXMvZXM1LWV4dC9zdHJpbmcvIy9jb250YWlucy9pbmRleC5qcyIsIm5vZGVfbW9kdWxlcy9lczYtc3ltYm9sL25vZGVfbW9kdWxlcy9lczUtZXh0L3N0cmluZy8jL2NvbnRhaW5zL2lzLWltcGxlbWVudGVkLmpzIiwibm9kZV9tb2R1bGVzL2VzNi1zeW1ib2wvbm9kZV9tb2R1bGVzL2VzNS1leHQvc3RyaW5nLyMvY29udGFpbnMvc2hpbS5qcyIsIm5vZGVfbW9kdWxlcy9lczYtc3ltYm9sL3BvbHlmaWxsLmpzIiwiL1VzZXJzL3Nhc2gvZGV2ZWxvcG1lbnQvanMvaW1nbHlraXQtcmV3cml0ZS9zcmMvanMvY29uc3RhbnRzLmpzIiwiL1VzZXJzL3Nhc2gvZGV2ZWxvcG1lbnQvanMvaW1nbHlraXQtcmV3cml0ZS9zcmMvanMvaW1nbHlraXQuanMiLCIvVXNlcnMvc2FzaC9kZXZlbG9wbWVudC9qcy9pbWdseWtpdC1yZXdyaXRlL3NyYy9qcy9saWIvY29sb3IuanMiLCIvVXNlcnMvc2FzaC9kZXZlbG9wbWVudC9qcy9pbWdseWtpdC1yZXdyaXRlL3NyYy9qcy9saWIvZXZlbnQtZW1pdHRlci5qcyIsIi9Vc2Vycy9zYXNoL2RldmVsb3BtZW50L2pzL2ltZ2x5a2l0LXJld3JpdGUvc3JjL2pzL2xpYi9leHRlbmQuanMiLCIvVXNlcnMvc2FzaC9kZXZlbG9wbWVudC9qcy9pbWdseWtpdC1yZXdyaXRlL3NyYy9qcy9saWIvaW1hZ2UtZGltZW5zaW9ucy5qcyIsIi9Vc2Vycy9zYXNoL2RldmVsb3BtZW50L2pzL2ltZ2x5a2l0LXJld3JpdGUvc3JjL2pzL2xpYi9pbWFnZS1leHBvcnRlci5qcyIsIi9Vc2Vycy9zYXNoL2RldmVsb3BtZW50L2pzL2ltZ2x5a2l0LXJld3JpdGUvc3JjL2pzL2xpYi9tYXRoL3ZlY3RvcjIuanMiLCIvVXNlcnMvc2FzaC9kZXZlbG9wbWVudC9qcy9pbWdseWtpdC1yZXdyaXRlL3NyYy9qcy9saWIvcmVuZGVyLWltYWdlLmpzIiwiL1VzZXJzL3Nhc2gvZGV2ZWxvcG1lbnQvanMvaW1nbHlraXQtcmV3cml0ZS9zcmMvanMvbGliL3V0aWxzLmpzIiwiL1VzZXJzL3Nhc2gvZGV2ZWxvcG1lbnQvanMvaW1nbHlraXQtcmV3cml0ZS9zcmMvanMvb3BlcmF0aW9ucy9icmlnaHRuZXNzLW9wZXJhdGlvbi5qcyIsIi9Vc2Vycy9zYXNoL2RldmVsb3BtZW50L2pzL2ltZ2x5a2l0LXJld3JpdGUvc3JjL2pzL29wZXJhdGlvbnMvY29udHJhc3Qtb3BlcmF0aW9uLmpzIiwiL1VzZXJzL3Nhc2gvZGV2ZWxvcG1lbnQvanMvaW1nbHlraXQtcmV3cml0ZS9zcmMvanMvb3BlcmF0aW9ucy9jcm9wLW9wZXJhdGlvbi5qcyIsIi9Vc2Vycy9zYXNoL2RldmVsb3BtZW50L2pzL2ltZ2x5a2l0LXJld3JpdGUvc3JjL2pzL29wZXJhdGlvbnMvZmlsdGVycy1vcGVyYXRpb24uanMiLCIvVXNlcnMvc2FzaC9kZXZlbG9wbWVudC9qcy9pbWdseWtpdC1yZXdyaXRlL3NyYy9qcy9vcGVyYXRpb25zL2ZpbHRlcnMvYTE1LWZpbHRlci5qcyIsIi9Vc2Vycy9zYXNoL2RldmVsb3BtZW50L2pzL2ltZ2x5a2l0LXJld3JpdGUvc3JjL2pzL29wZXJhdGlvbnMvZmlsdGVycy9icmVlemUtZmlsdGVyLmpzIiwiL1VzZXJzL3Nhc2gvZGV2ZWxvcG1lbnQvanMvaW1nbHlraXQtcmV3cml0ZS9zcmMvanMvb3BlcmF0aW9ucy9maWx0ZXJzL2J3LWZpbHRlci5qcyIsIi9Vc2Vycy9zYXNoL2RldmVsb3BtZW50L2pzL2ltZ2x5a2l0LXJld3JpdGUvc3JjL2pzL29wZXJhdGlvbnMvZmlsdGVycy9id2hhcmQtZmlsdGVyLmpzIiwiL1VzZXJzL3Nhc2gvZGV2ZWxvcG1lbnQvanMvaW1nbHlraXQtcmV3cml0ZS9zcmMvanMvb3BlcmF0aW9ucy9maWx0ZXJzL2NlbHNpdXMtZmlsdGVyLmpzIiwiL1VzZXJzL3Nhc2gvZGV2ZWxvcG1lbnQvanMvaW1nbHlraXQtcmV3cml0ZS9zcmMvanMvb3BlcmF0aW9ucy9maWx0ZXJzL2NoZXN0LWZpbHRlci5qcyIsIi9Vc2Vycy9zYXNoL2RldmVsb3BtZW50L2pzL2ltZ2x5a2l0LXJld3JpdGUvc3JjL2pzL29wZXJhdGlvbnMvZmlsdGVycy9maWx0ZXIuanMiLCIvVXNlcnMvc2FzaC9kZXZlbG9wbWVudC9qcy9pbWdseWtpdC1yZXdyaXRlL3NyYy9qcy9vcGVyYXRpb25zL2ZpbHRlcnMvZml4aWUtZmlsdGVyLmpzIiwiL1VzZXJzL3Nhc2gvZGV2ZWxvcG1lbnQvanMvaW1nbHlraXQtcmV3cml0ZS9zcmMvanMvb3BlcmF0aW9ucy9maWx0ZXJzL2Zvb2QtZmlsdGVyLmpzIiwiL1VzZXJzL3Nhc2gvZGV2ZWxvcG1lbnQvanMvaW1nbHlraXQtcmV3cml0ZS9zcmMvanMvb3BlcmF0aW9ucy9maWx0ZXJzL2ZyaWRnZS1maWx0ZXIuanMiLCIvVXNlcnMvc2FzaC9kZXZlbG9wbWVudC9qcy9pbWdseWtpdC1yZXdyaXRlL3NyYy9qcy9vcGVyYXRpb25zL2ZpbHRlcnMvZnJvbnQtZmlsdGVyLmpzIiwiL1VzZXJzL3Nhc2gvZGV2ZWxvcG1lbnQvanMvaW1nbHlraXQtcmV3cml0ZS9zcmMvanMvb3BlcmF0aW9ucy9maWx0ZXJzL2dsYW0tZmlsdGVyLmpzIiwiL1VzZXJzL3Nhc2gvZGV2ZWxvcG1lbnQvanMvaW1nbHlraXQtcmV3cml0ZS9zcmMvanMvb3BlcmF0aW9ucy9maWx0ZXJzL2dvYmJsaW4tZmlsdGVyLmpzIiwiL1VzZXJzL3Nhc2gvZGV2ZWxvcG1lbnQvanMvaW1nbHlraXQtcmV3cml0ZS9zcmMvanMvb3BlcmF0aW9ucy9maWx0ZXJzL2lkZW50aXR5LWZpbHRlci5qcyIsIi9Vc2Vycy9zYXNoL2RldmVsb3BtZW50L2pzL2ltZ2x5a2l0LXJld3JpdGUvc3JjL2pzL29wZXJhdGlvbnMvZmlsdGVycy9rMS1maWx0ZXIuanMiLCIvVXNlcnMvc2FzaC9kZXZlbG9wbWVudC9qcy9pbWdseWtpdC1yZXdyaXRlL3NyYy9qcy9vcGVyYXRpb25zL2ZpbHRlcnMvazItZmlsdGVyLmpzIiwiL1VzZXJzL3Nhc2gvZGV2ZWxvcG1lbnQvanMvaW1nbHlraXQtcmV3cml0ZS9zcmMvanMvb3BlcmF0aW9ucy9maWx0ZXJzL2s2LWZpbHRlci5qcyIsIi9Vc2Vycy9zYXNoL2RldmVsb3BtZW50L2pzL2ltZ2x5a2l0LXJld3JpdGUvc3JjL2pzL29wZXJhdGlvbnMvZmlsdGVycy9rZHluYW1pYy1maWx0ZXIuanMiLCIvVXNlcnMvc2FzaC9kZXZlbG9wbWVudC9qcy9pbWdseWtpdC1yZXdyaXRlL3NyYy9qcy9vcGVyYXRpb25zL2ZpbHRlcnMvbGVuaW4tZmlsdGVyLmpzIiwiL1VzZXJzL3Nhc2gvZGV2ZWxvcG1lbnQvanMvaW1nbHlraXQtcmV3cml0ZS9zcmMvanMvb3BlcmF0aW9ucy9maWx0ZXJzL2xvbW8tZmlsdGVyLmpzIiwiL1VzZXJzL3Nhc2gvZGV2ZWxvcG1lbnQvanMvaW1nbHlraXQtcmV3cml0ZS9zcmMvanMvb3BlcmF0aW9ucy9maWx0ZXJzL21lbGxvdy1maWx0ZXIuanMiLCIvVXNlcnMvc2FzaC9kZXZlbG9wbWVudC9qcy9pbWdseWtpdC1yZXdyaXRlL3NyYy9qcy9vcGVyYXRpb25zL2ZpbHRlcnMvbW9ybmluZy1maWx0ZXIuanMiLCIvVXNlcnMvc2FzaC9kZXZlbG9wbWVudC9qcy9pbWdseWtpdC1yZXdyaXRlL3NyYy9qcy9vcGVyYXRpb25zL2ZpbHRlcnMvb3JjaGlkLWZpbHRlci5qcyIsIi9Vc2Vycy9zYXNoL2RldmVsb3BtZW50L2pzL2ltZ2x5a2l0LXJld3JpdGUvc3JjL2pzL29wZXJhdGlvbnMvZmlsdGVycy9wb2xhLWZpbHRlci5qcyIsIi9Vc2Vycy9zYXNoL2RldmVsb3BtZW50L2pzL2ltZ2x5a2l0LXJld3JpdGUvc3JjL2pzL29wZXJhdGlvbnMvZmlsdGVycy9wb2xhNjY5LWZpbHRlci5qcyIsIi9Vc2Vycy9zYXNoL2RldmVsb3BtZW50L2pzL2ltZ2x5a2l0LXJld3JpdGUvc3JjL2pzL29wZXJhdGlvbnMvZmlsdGVycy9wcmltaXRpdmVzLXN0YWNrLmpzIiwiL1VzZXJzL3Nhc2gvZGV2ZWxvcG1lbnQvanMvaW1nbHlraXQtcmV3cml0ZS9zcmMvanMvb3BlcmF0aW9ucy9maWx0ZXJzL3ByaW1pdGl2ZXMvYnJpZ2h0bmVzcy5qcyIsIi9Vc2Vycy9zYXNoL2RldmVsb3BtZW50L2pzL2ltZ2x5a2l0LXJld3JpdGUvc3JjL2pzL29wZXJhdGlvbnMvZmlsdGVycy9wcmltaXRpdmVzL2NvbnRyYXN0LmpzIiwiL1VzZXJzL3Nhc2gvZGV2ZWxvcG1lbnQvanMvaW1nbHlraXQtcmV3cml0ZS9zcmMvanMvb3BlcmF0aW9ucy9maWx0ZXJzL3ByaW1pdGl2ZXMvZGVzYXR1cmF0aW9uLmpzIiwiL1VzZXJzL3Nhc2gvZGV2ZWxvcG1lbnQvanMvaW1nbHlraXQtcmV3cml0ZS9zcmMvanMvb3BlcmF0aW9ucy9maWx0ZXJzL3ByaW1pdGl2ZXMvZ2xvdy5qcyIsIi9Vc2Vycy9zYXNoL2RldmVsb3BtZW50L2pzL2ltZ2x5a2l0LXJld3JpdGUvc3JjL2pzL29wZXJhdGlvbnMvZmlsdGVycy9wcmltaXRpdmVzL2dvYmJsaW4uanMiLCIvVXNlcnMvc2FzaC9kZXZlbG9wbWVudC9qcy9pbWdseWtpdC1yZXdyaXRlL3NyYy9qcy9vcGVyYXRpb25zL2ZpbHRlcnMvcHJpbWl0aXZlcy9ncmF5c2NhbGUuanMiLCIvVXNlcnMvc2FzaC9kZXZlbG9wbWVudC9qcy9pbWdseWtpdC1yZXdyaXRlL3NyYy9qcy9vcGVyYXRpb25zL2ZpbHRlcnMvcHJpbWl0aXZlcy9sb29rdXAtdGFibGUuanMiLCIvVXNlcnMvc2FzaC9kZXZlbG9wbWVudC9qcy9pbWdseWtpdC1yZXdyaXRlL3NyYy9qcy9vcGVyYXRpb25zL2ZpbHRlcnMvcHJpbWl0aXZlcy9wcmltaXRpdmUuanMiLCIvVXNlcnMvc2FzaC9kZXZlbG9wbWVudC9qcy9pbWdseWtpdC1yZXdyaXRlL3NyYy9qcy9vcGVyYXRpb25zL2ZpbHRlcnMvcHJpbWl0aXZlcy9zYXR1cmF0aW9uLmpzIiwiL1VzZXJzL3Nhc2gvZGV2ZWxvcG1lbnQvanMvaW1nbHlraXQtcmV3cml0ZS9zcmMvanMvb3BlcmF0aW9ucy9maWx0ZXJzL3ByaW1pdGl2ZXMvc29mdC1jb2xvci1vdmVybGF5LmpzIiwiL1VzZXJzL3Nhc2gvZGV2ZWxvcG1lbnQvanMvaW1nbHlraXQtcmV3cml0ZS9zcmMvanMvb3BlcmF0aW9ucy9maWx0ZXJzL3ByaW1pdGl2ZXMvdG9uZS1jdXJ2ZS5qcyIsIi9Vc2Vycy9zYXNoL2RldmVsb3BtZW50L2pzL2ltZ2x5a2l0LXJld3JpdGUvc3JjL2pzL29wZXJhdGlvbnMvZmlsdGVycy9wcmltaXRpdmVzL3g0MDAuanMiLCIvVXNlcnMvc2FzaC9kZXZlbG9wbWVudC9qcy9pbWdseWtpdC1yZXdyaXRlL3NyYy9qcy9vcGVyYXRpb25zL2ZpbHRlcnMvcXVvemktZmlsdGVyLmpzIiwiL1VzZXJzL3Nhc2gvZGV2ZWxvcG1lbnQvanMvaW1nbHlraXQtcmV3cml0ZS9zcmMvanMvb3BlcmF0aW9ucy9maWx0ZXJzL3NlbWlyZWQtZmlsdGVyLmpzIiwiL1VzZXJzL3Nhc2gvZGV2ZWxvcG1lbnQvanMvaW1nbHlraXQtcmV3cml0ZS9zcmMvanMvb3BlcmF0aW9ucy9maWx0ZXJzL3N1bm55LWZpbHRlci5qcyIsIi9Vc2Vycy9zYXNoL2RldmVsb3BtZW50L2pzL2ltZ2x5a2l0LXJld3JpdGUvc3JjL2pzL29wZXJhdGlvbnMvZmlsdGVycy90ZXhhcy1maWx0ZXIuanMiLCIvVXNlcnMvc2FzaC9kZXZlbG9wbWVudC9qcy9pbWdseWtpdC1yZXdyaXRlL3NyYy9qcy9vcGVyYXRpb25zL2ZpbHRlcnMveDQwMC1maWx0ZXIuanMiLCIvVXNlcnMvc2FzaC9kZXZlbG9wbWVudC9qcy9pbWdseWtpdC1yZXdyaXRlL3NyYy9qcy9vcGVyYXRpb25zL2ZsaXAtb3BlcmF0aW9uLmpzIiwiL1VzZXJzL3Nhc2gvZGV2ZWxvcG1lbnQvanMvaW1nbHlraXQtcmV3cml0ZS9zcmMvanMvb3BlcmF0aW9ucy9mcmFtZXMtb3BlcmF0aW9uLmpzIiwiL1VzZXJzL3Nhc2gvZGV2ZWxvcG1lbnQvanMvaW1nbHlraXQtcmV3cml0ZS9zcmMvanMvb3BlcmF0aW9ucy9vcGVyYXRpb24uanMiLCIvVXNlcnMvc2FzaC9kZXZlbG9wbWVudC9qcy9pbWdseWtpdC1yZXdyaXRlL3NyYy9qcy9vcGVyYXRpb25zL3JhZGlhbC1ibHVyLW9wZXJhdGlvbi5qcyIsIi9Vc2Vycy9zYXNoL2RldmVsb3BtZW50L2pzL2ltZ2x5a2l0LXJld3JpdGUvc3JjL2pzL29wZXJhdGlvbnMvcm90YXRpb24tb3BlcmF0aW9uLmpzIiwiL1VzZXJzL3Nhc2gvZGV2ZWxvcG1lbnQvanMvaW1nbHlraXQtcmV3cml0ZS9zcmMvanMvb3BlcmF0aW9ucy9zYXR1cmF0aW9uLW9wZXJhdGlvbi5qcyIsIi9Vc2Vycy9zYXNoL2RldmVsb3BtZW50L2pzL2ltZ2x5a2l0LXJld3JpdGUvc3JjL2pzL29wZXJhdGlvbnMvc3RpY2tlcnMtb3BlcmF0aW9uLmpzIiwiL1VzZXJzL3Nhc2gvZGV2ZWxvcG1lbnQvanMvaW1nbHlraXQtcmV3cml0ZS9zcmMvanMvb3BlcmF0aW9ucy90ZXh0LW9wZXJhdGlvbi5qcyIsIi9Vc2Vycy9zYXNoL2RldmVsb3BtZW50L2pzL2ltZ2x5a2l0LXJld3JpdGUvc3JjL2pzL29wZXJhdGlvbnMvdGlsdC1zaGlmdC1vcGVyYXRpb24uanMiLCIvVXNlcnMvc2FzaC9kZXZlbG9wbWVudC9qcy9pbWdseWtpdC1yZXdyaXRlL3NyYy9qcy9yZW5kZXJlcnMvY2FudmFzLXJlbmRlcmVyLmpzIiwiL1VzZXJzL3Nhc2gvZGV2ZWxvcG1lbnQvanMvaW1nbHlraXQtcmV3cml0ZS9zcmMvanMvcmVuZGVyZXJzL3JlbmRlcmVyLmpzIiwiL1VzZXJzL3Nhc2gvZGV2ZWxvcG1lbnQvanMvaW1nbHlraXQtcmV3cml0ZS9zcmMvanMvcmVuZGVyZXJzL3dlYmdsLXJlbmRlcmVyLmpzIiwiL1VzZXJzL3Nhc2gvZGV2ZWxvcG1lbnQvanMvaW1nbHlraXQtcmV3cml0ZS9zcmMvanMvdWkvYmFzZS9oZWxwZXJzLmpzIiwiL1VzZXJzL3Nhc2gvZGV2ZWxvcG1lbnQvanMvaW1nbHlraXQtcmV3cml0ZS9zcmMvanMvdWkvYmFzZS91aS5qcyIsIi9Vc2Vycy9zYXNoL2RldmVsb3BtZW50L2pzL2ltZ2x5a2l0LXJld3JpdGUvc3JjL2pzL3VpL25pZ2h0L2NvbnRyb2xzL2JyaWdodG5lc3MuanMiLCIvVXNlcnMvc2FzaC9kZXZlbG9wbWVudC9qcy9pbWdseWtpdC1yZXdyaXRlL3NyYy9qcy91aS9uaWdodC9jb250cm9scy9jb250cmFzdC5qcyIsIi9Vc2Vycy9zYXNoL2RldmVsb3BtZW50L2pzL2ltZ2x5a2l0LXJld3JpdGUvc3JjL2pzL3VpL25pZ2h0L2NvbnRyb2xzL2NvbnRyb2wuanMiLCIvVXNlcnMvc2FzaC9kZXZlbG9wbWVudC9qcy9pbWdseWtpdC1yZXdyaXRlL3NyYy9qcy91aS9uaWdodC9jb250cm9scy9jcm9wLmpzIiwiL1VzZXJzL3Nhc2gvZGV2ZWxvcG1lbnQvanMvaW1nbHlraXQtcmV3cml0ZS9zcmMvanMvdWkvbmlnaHQvY29udHJvbHMvZmlsdGVycy5qcyIsIi9Vc2Vycy9zYXNoL2RldmVsb3BtZW50L2pzL2ltZ2x5a2l0LXJld3JpdGUvc3JjL2pzL3VpL25pZ2h0L2NvbnRyb2xzL2ZsaXAuanMiLCIvVXNlcnMvc2FzaC9kZXZlbG9wbWVudC9qcy9pbWdseWtpdC1yZXdyaXRlL3NyYy9qcy91aS9uaWdodC9jb250cm9scy9mcmFtZXMuanMiLCIvVXNlcnMvc2FzaC9kZXZlbG9wbWVudC9qcy9pbWdseWtpdC1yZXdyaXRlL3NyYy9qcy91aS9uaWdodC9jb250cm9scy9yYWRpYWwtYmx1ci5qcyIsIi9Vc2Vycy9zYXNoL2RldmVsb3BtZW50L2pzL2ltZ2x5a2l0LXJld3JpdGUvc3JjL2pzL3VpL25pZ2h0L2NvbnRyb2xzL3JvdGF0aW9uLmpzIiwiL1VzZXJzL3Nhc2gvZGV2ZWxvcG1lbnQvanMvaW1nbHlraXQtcmV3cml0ZS9zcmMvanMvdWkvbmlnaHQvY29udHJvbHMvc2F0dXJhdGlvbi5qcyIsIi9Vc2Vycy9zYXNoL2RldmVsb3BtZW50L2pzL2ltZ2x5a2l0LXJld3JpdGUvc3JjL2pzL3VpL25pZ2h0L2NvbnRyb2xzL3N0aWNrZXJzLmpzIiwiL1VzZXJzL3Nhc2gvZGV2ZWxvcG1lbnQvanMvaW1nbHlraXQtcmV3cml0ZS9zcmMvanMvdWkvbmlnaHQvY29udHJvbHMvdGV4dC5qcyIsIi9Vc2Vycy9zYXNoL2RldmVsb3BtZW50L2pzL2ltZ2x5a2l0LXJld3JpdGUvc3JjL2pzL3VpL25pZ2h0L2NvbnRyb2xzL3RpbHQtc2hpZnQuanMiLCIvVXNlcnMvc2FzaC9kZXZlbG9wbWVudC9qcy9pbWdseWtpdC1yZXdyaXRlL3NyYy9qcy91aS9uaWdodC9saWIvY2FudmFzLmpzIiwiL1VzZXJzL3Nhc2gvZGV2ZWxvcG1lbnQvanMvaW1nbHlraXQtcmV3cml0ZS9zcmMvanMvdWkvbmlnaHQvbGliL2NvbG9yLXBpY2tlci5qcyIsIi9Vc2Vycy9zYXNoL2RldmVsb3BtZW50L2pzL2ltZ2x5a2l0LXJld3JpdGUvc3JjL2pzL3VpL25pZ2h0L2xpYi9zaW1wbGUtc2xpZGVyLmpzIiwiL1VzZXJzL3Nhc2gvZGV2ZWxvcG1lbnQvanMvaW1nbHlraXQtcmV3cml0ZS9zcmMvanMvdWkvbmlnaHQvbGliL3NsaWRlci5qcyIsIi9Vc2Vycy9zYXNoL2RldmVsb3BtZW50L2pzL2ltZ2x5a2l0LXJld3JpdGUvc3JjL2pzL3VpL25pZ2h0L2xpYi90b3AtY29udHJvbHMuanMiLCIvVXNlcnMvc2FzaC9kZXZlbG9wbWVudC9qcy9pbWdseWtpdC1yZXdyaXRlL3NyYy9qcy91aS9uaWdodC91aS5qcyIsIi9Vc2Vycy9zYXNoL2RldmVsb3BtZW50L2pzL2ltZ2x5a2l0LXJld3JpdGUvc3JjL2pzL3ZlbmRvci9zdGFjay1ibHVyLmpzIiwiL1VzZXJzL3Nhc2gvZGV2ZWxvcG1lbnQvanMvaW1nbHlraXQtcmV3cml0ZS9zcmMvanMvdmVuZG9yL2xvZGFzaC5qcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTs7Ozs7Ozs7Ozs7Ozs7SUNVTyxRQUFRLDJCQUFNLG1CQUFtQjs7O0FBR3hDLENBQUMsWUFBWTtBQUNYLE1BQUksT0FBTyxNQUFNLEtBQUssV0FBVyxFQUFFO0FBQ2pDLFVBQU0sQ0FBQyxRQUFRLEdBQUcsUUFBUSxDQUFDO0dBQzVCLE1BQU0sSUFBSSxPQUFPLE1BQU0sS0FBSyxXQUFXLEVBQUU7QUFDeEMsVUFBTSxDQUFDLE9BQU8sR0FBRyxRQUFRLENBQUM7R0FDM0IsTUFBTSxJQUFJLE9BQU8sTUFBTSxLQUFLLFdBQVcsRUFBRTtBQUN4QyxVQUFNLENBQUMsUUFBUSxHQUFHLFFBQVEsQ0FBQztHQUM1QjtDQUNGLENBQUEsRUFBRyxDQUFDOzs7OztBQ3JCTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUN4QkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDNUdBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUNYQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ3BHQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUNuREE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUNoY0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUN0RUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDdERBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ1pBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQzdJQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ2hCQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUN4RUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDWkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDbkdBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUNsSkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQzNHQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDbklBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUMzREE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQzdFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUNqK0JBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ3RKQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQzlJQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ3RUQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQy9FQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDNUZBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUMvQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDcktBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDNUJBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUN6Q0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUNsSUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUM5RkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUM3R0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQzFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUN6TUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDeFFBOztBQ0FBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDbE9BO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUN0RkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQzVJQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDL0lBO0FBQ0E7QUFDQTtBQUNBOztBQ0hBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDbkJBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQy9EQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDTEE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDVEE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUN0QkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ0xBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUNMQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDUkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUNQQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ3RCQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUNOQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDTEE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ1JBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDUEE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNB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QUFFLENBQUM7QUFDNUIsZ0JBQU0sQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsR0FBRyxDQUFDLEVBQUUsQ0FBQyxDQUFDLENBQUMsR0FBRyxFQUFFLENBQUMsQ0FBQyxDQUFDLENBQUEsR0FBSSxDQUFDLENBQUM7QUFDbkMsZ0JBQU0sQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsR0FBRyxDQUFDLEVBQUUsQ0FBQyxDQUFDLENBQUMsR0FBRyxFQUFFLENBQUMsQ0FBQyxDQUFDLENBQUEsR0FBSSxDQUFDLENBQUM7QUFDbkMsZ0JBQU0sQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsR0FBRyxDQUFDLEVBQUUsQ0FBQyxDQUFDLENBQUMsR0FBRyxFQUFFLENBQUMsQ0FBQyxDQUFDLENBQUEsR0FBSSxDQUFDLENBQUM7QUFDbkMsZ0JBQU0sQ0FBQyxDQUFDLENBQUMsR0FBRyxDQUFDLEVBQUUsQ0FBQyxDQUFDLENBQUMsR0FBRyxFQUFFLENBQUMsQ0FBQyxDQUFDLENBQUEsSUFBSyxFQUFFLENBQUMsQ0FBQyxDQUFDLEdBQUcsRUFBRSxDQUFDLENBQUMsQ0FBQyxDQUFBLEFBQUMsR0FBRyxDQUFDLEVBQUUsQ0FBQyxDQUFDLENBQUMsR0FBRyxFQUFFLENBQUMsQ0FBQyxDQUFDLENBQUEsSUFBSyxFQUFFLENBQUMsQ0FBQyxDQUFDLEdBQUcsRUFBRSxDQUFDLENBQUMsQ0FBQyxDQUFBLEFBQUMsQ0FBQztTQUNuRjs7QUFFRCxjQUFNLENBQUMsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxDQUFDO0FBQ2QsY0FBTSxDQUFDLENBQUMsR0FBRyxDQUFDLENBQUMsR0FBRyxDQUFDLENBQUM7O0FBRWxCLGNBQU0sQ0FBQyxDQUFDLEdBQUcsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDOzs7QUFHMUIsYUFBSyxDQUFDLEdBQUcsQ0FBQyxFQUFFLENBQUMsR0FBRyxDQUFDLEVBQUUsQ0FBQyxFQUFFLEVBQUU7QUFDdEIsV0FBQyxHQUFHLE1BQU0s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LFlBQUksUUFBUSxHQUFHLElBQUksQ0FBQyxRQUFRLENBQUMsUUFBUSxDQUFDLEtBQUssRUFBRSxDQUFDO0FBQzlDLFlBQUksVUFBVSxHQUFHLElBQUksT0FBTyxDQUFDLE1BQU0sQ0FBQyxLQUFLLEVBQUUsTUFBTSxDQUFDLE1BQU0sQ0FBQyxDQUFDO0FBQzFELFlBQUksSUFBSSxHQUFHLElBQUksT0FBTyxDQUFDLFVBQVUsQ0FBQyxLQUFLLEVBQUUsVUFBVSxDQUFDLE1BQU0sQ0FBQyxDQUFDLE1BQU0sQ0FBQyxVQUFVLENBQUMsQ0FBQzs7QUFFL0UsWUFBSSxJQUFJLENBQUMsUUFBUSxDQUFDLFlBQVksS0FBSyxVQUFVLEVBQUU7QUFDN0Msa0JBQVEsQ0FBQyxNQUFNLENBQUMsVUFBVSxDQUFDLENBQUM7U0FDN0I7O0FBRUQsZ0JBQVEsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxHQUFHLFFBQVEsQ0FBQyxDQUFDLENBQUM7QUFDNUIsZ0JBQVEsQ0FBQyxDQUFDLElBQUksSUFBSSxDQUFDLENBQUMsQ0FBQzs7O0FBR3JCLFlBQUksSUFBSSxDQUFDLFFBQVEsQ0FBQyxpQkFBaUIsS0FBSyxRQUFRLEVBQUU7QUFDaEQsa0JBQVEsQ0FBQyxDQUFDLElBQUksSUFBSSxDQUFDLENBQUMsR0FBRyxDQUFDLENBQUM7U0FDMUIsTUFBTSxJQUFJLElBQUksQ0FBQyxRQUFRLENBQUMsaUJBQWlCLEtBQUssUUFBUSxFQUFFO0FBQ3ZELGtCQUFRLENBQUMsQ0FBQyxJQUFJLElBQUksQ0FBQyxDQUFDLENBQUM7U0FDdEI7OztBQUdELFlBQUksSUFBSSxDQUFDLFFBQVEsQ0FBQyxTQUFTLEtBQUssUUFBUSxFQUFFO0FBQ3hDLGtCQUFRLENBQUMsQ0FBQyxJQUFJLElBQUksQ0FBQyxDQUFDLEdBQUcsQ0FBQyxDQUFDO1NBQzFCLE1BQU0sSUFBSSxJQUFJLENBQUMsUUFBUSxDQUFDLFNBQVMsS0FBSyxPQUFPLEVBQUU7QUFDOUMsa0JBQVEsQ0FBQyxDQUFDLElBQUksSUFBSSxDQUFDLENBQUMsQ0FBQztTQUN0Qjs7O0FBR0Qs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QUFDLEdBQUcsRUFBQyxHQUFHLEVBQUMsR0FBRyxFQUFDLEdBQUcsRUFBQyxHQUFHLEVBQUMsR0FBRyxFQUFDLEdBQUcsRUFBQyxHQUFHLEVBQUMsR0FBRyxFQUMvRCxHQUFHLEVBQUMsR0FBRyxFQUFDLEdBQUcsRUFBQyxHQUFHLEVBQUMsR0FBRyxFQUFDLEdBQUcsRUFBQyxHQUFHLEVBQUMsR0FBRyxFQUFDLEdBQUcsRUFBQyxHQUFHLEVBQUMsR0FBRyxFQUFDLEdBQUcsRUFBQyxHQUFHLEVBQUMsR0FBRyxFQUFDLEdBQUcsRUFBQyxHQUFHLEVBQy9ELEdBQUcsRUFBQyxHQUFHLEVBQUMsR0FBRyxFQUFDLEdBQUcsRUFBQyxHQUFHLEVBQUMsR0FBRyxFQUFDLEdBQUcsRUFBQyxHQUFHLEVBQUMsR0FBRyxFQUFDLEdBQUcsRUFBQyxHQUFHLEVBQUMsR0FBRyxFQUFDLEdBQUcsRUFBQyxHQUFHLEVBQUMsR0FBRyxFQUFDLEdBQUcsRUFDL0QsR0FBRyxFQUFDLEdBQUcsRUFBQyxHQUFHLEVBQUMsR0FBRyxFQUFDLEdBQUcsRUFBQyxHQUFHLEVBQUMsR0FBRyxFQUFDLEdBQUcsRUFBQyxHQUFHLEVBQUMsR0FBRyxFQUFDLEdBQUcsRUFBQyxHQUFHLEVBQUMsR0FBRyxFQUFDLEdBQUcsRUFBQyxHQUFHLEVBQUMsR0FBRyxFQUMvRCxHQUFHLEVBQUMsR0FBRyxFQUFDLEdBQUcsRUFBQyxHQUFHLEVBQUMsR0FBRyxFQUFDLEdBQUcsRUFBQyxHQUFHLEVBQUMsR0FBRyxFQUFDLEdBQUcsRUFBQyxHQUFHLEVBQUMsR0FBRyxFQUFDLEdBQUcsRUFBQyxHQUFHLEVBQUMsR0FBRyxFQUFDLEdBQUcsRUFBQyxHQUFHLEVBQy9ELEdBQUcsRUFBQyxHQUFHLEVBQUMsR0FBRyxFQUFDLEdBQUcsRUFBQyxHQUFHLEVBQUMsR0FBRyxFQUFDLEdBQUcsRUFBQyxHQUFHLEVBQUMsR0FBRyxFQUFDLEdBQUcsRUFBQyxHQUFHLEVBQUMsR0FBRyxFQUFDLEdBQUcsRUFBQyxHQUFHLEVBQUMsR0FBRyxFQUFDLEdBQUcsRUFDL0QsR0FBRyxFQUFDLEdBQUcsRUFBQyxHQUFHLEVBQUMsR0FBRyxFQUFDLEdBQUcsRUFBQyxHQUFHLEVBQUMsR0FBRyxFQUFDLEdBQUcsRUFBQyxHQUFHLEVBQUMsR0FBRyxFQUFDLEdBQUcsRUFBQyxHQUFHLEVBQUMsR0FBRyxFQUFDLEdBQUcsRUFBQyxHQUFHLEVBQUMsR0FBRyxFQUMvRCxHQUFHLEVBQUMsR0FBRyxFQUFDLEdBQUcsRUFBQyxHQUFHLEVBQUMsR0FBRyxFQUFDLEdBQUcsRUFBQyxHQUFHLEVBQUMsR0FBRyxFQUFDLEdBQUcsRUFBQyxHQUFHLEVBQUMsR0FBRyxFQUFDLEdBQUcsRUFBQyxHQUFHLEVBQUMsR0FBRyxFQUFDLEdBQUcsRUFBQyxHQUFHLEVBQy9ELEdBQUcsRUFBQyxHQUFHLEVBQUMsR0FBRyxFQUFDLEdBQUcsRUFBQyxHQUFHLEVBQUMsR0FBRyxFQUFDLEdBQUcsRUFBQyxHQUFHLEVBQUMsR0FBRyxFQUFDLEdBQUcsRUFBQyxHQUFHLEVBQUMsR0FBRyxFQUFDLEdBQUcsRUFBQyxHQUFHLEVBQUMsR0FBRyxFQUFDLEdBQUcsRUFDL0QsR0FBRyxFQUFDLEdBQUcsRUFBQyxHQUFHLEVBQUMsR0FBRyxFQUFDLEdBQUcsRUFBQyxHQUFHLEVBQUMsR0FBRyxFQUFDLEdBQUcsRUFBQyxHQUFHLEVBQUMsR0FBRyxFQUFDLEdBQUcsRUFBQyxHQUFHLEVBQUMsR0FBRyxFQUFDLEdBQUcsRUFBQyxHQUFHLEVBQUMsR0FBRyxFQUMvRCxHQUFHLEVBQUMsR0FBRyxFQUFDLEdBQUcsRUFBQyxHQUFHLEVBQUMsR0FBRyxFQUFDLEdBQUcsRUFBQyxHQUFHLEVBQUMsR0FBRyxFQUFDLEdBQUcsRUFBQyxHQUFHLEVBQUMsR0FBRyxFQUFDLEdBQUcsRUFBQyxHQUFHLEVBQUMsR0FBRyxFQUFDLEdBQUcsRUFBQyxHQUFHLEVBQy9ELEdBQUcsRUFBQyxHQUFHLEVBQUMsR0FBRyxFQUFDLEdBQUcsRUFBQyxHQUFHLEVBQUMsR0FBRyxFQUFDLEdBQUcsRUFBQyxHQUFHLEVBQUMsR0FBRyxFQUFDLEdBQUcsRUFBQyxHQUFHLEVBQUMsR0FBRyxFQUFDLEdBQUcsRUFBQyxHQUFHLEVBQUMsR0FBRyxFQUFDLEdBQUcsRUFDL0QsR0FBRyxFQUFDLEdBQUcsRUFBQyxHQUFHLEVBQUMsR0FBRyxFQUFDLEdBQUcsRUFBQyxHQUFHLEVBQUMsR0FBRyxFQUFDLEdBQUcsRUFBQyxHQUFHLEVBQUMsR0FBRyxFQUFDLEdBQUcsRUFBQyxHQUFHLEVBQUMsR0FBRyxFQUFDLEdBQUcsRUFBQyxHQUFHLEVBQUMsR0FBRyxFQUMvRCxHQUFHLEVBQUMsR0FBRyxFQUFDLEdBQUcsRUFBQyxHQUFHLEVBQUMsR0FBRyxFQUFDLEdBQUcsRUFBQyxHQUFHLEVBQUMsR0FBRyxFQUFDLEdBQUcsRUFBQyxHQUFHLEVBQUMsR0FBRyxFQUFDLEdBQUcsRUFBQyxHQUFHLEVBQUMsR0FBRyxFQUFDLEdBQUcsRUFBQyxHQUFHLEVBQy9ELEdBQUcsRUFBQyxHQUFHLEVBQUMsR0FBRyxFQUFDLEdBQUcsRUFBQyxHQUFHLEVBQUMsR0FBRyxFQUFDLEdBQUcsRUFBQyxHQUFHLEVBQUMsR0FBRyxFQUFDLEdBQUcsRUFBQyxHQUFHLEVBQUMsR0FBRyxFQUFDLEdBQUcsRUFBQyxHQUFHLEVBQUMsR0FBRyxFQUFDLEdBQUcsRUFDL0QsR0FBRyxFQUFDLEdBQUcsRUFBQyxHQUFHLEVBQUMsR0FBRyxFQUFDLEdBQUcsRUFBQyxHQUFHLEVBQUMsR0FBRyxFQUFDLEdBQUcsRUFBQyxHQUFHLEVBQUMsR0FBRyxFQUFDLEdBQUcsRUFBQyxHQUFHLEVBQUMsR0FBRyxFQUFDLEdBQUcsRUFBQyxHQUFHLENBQUMsQ0FBQzs7QUFHckUsSUFBSSxTQUFTLEdBQUcsQ0FDVCxDQUFDLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFBRSxFQUFFLEVBQ2hFLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFDOUQsRUFBRSxFQUFFLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFBRSxFQUM5RCxFQUFFLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFBRSxFQUFFLEVBQzlELEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFDOUQsRUFBRSxFQUFFLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFBRSxFQUM5RCxFQUFFLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFBRSxFQUFFLEVBQzlELEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFDOUQsRUFBRSxFQUFFLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFBRSxFQUM5RCxFQUFFLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFBRSxFQUFFLEVBQzlELEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFDOUQsRUFBRSxFQUFFLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFBRSxFQUM5RCxFQUFFLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFBRSxFQUFFLEVBQzlELEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFDOUQsRUFBRSxFQUFFLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFBRSxFQUM5RCxFQUFFLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFBRSxFQUFFLEVBQUUsQ0FBRSxDQUFDOztBQUVqRSxTQUFTLG1CQUFtQixDQUFFLFNBQVMsRUFBRSxLQUFLLEVBQUUsS0FBSyxFQUFFLEtBQUssRUFBRSxNQUFNLEVBQUUsTUFBTSxFQUM1RTtBQUNFLE1BQUssS0FBSyxDQUFDLE1BQU0sQ0FBQyxJQUFJLE1BQU0sR0FBRyxDQUFDO0FBQUcsV0FBTztHQUFBLEFBQzFDLE1BQU0sSUFBSSxDQUFDLENBQUM7O0FBRVosTUFBSSxNQUFNLEdBQUcsU0FBUyxDQUFDLElBQUksQ0FBQzs7QUFFNUIsTUFBSSxDQUFDLEVBQUUsQ0FBQyxFQUFFLENBQUMsRUFBRSxDQUFDLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFBRSxFQUFFLEVBQUUsS0FBSyxFQUFFLEtBQUssRUFBRSxLQUFLLEVBQUUsS0FBSyxFQUN0RCxTQUFTLEVBQUUsU0FBUyxFQUFFLFNBQVMsRUFBRSxTQUFTLEVBQzFDLFFBQVEsRUFBRSxRQUFRLEVBQUUsUUFBUSxFQUFFLFFBQVEsRUFDdEMsRUFBRSxFQUFFLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFBRSxFQUFFLEdBQUcsQ0FBQzs7QUFFcEIsTUFBSSxHQUFHLEdBQUcsTUFBTSxHQUFHLE1BQU0sR0FBRyxDQUFDLENBQUM7QUFDOUIsTUFBSSxXQUFXLEdBQUksS0FBSyxHQUFHLENBQUMsQ0FBQztBQUM3QixNQUFJLFlBQVksR0FBRyxNQUFNLEdBQUcsQ0FBQyxDQUFDO0FBQzlCLE1BQUksV0FBVyxHQUFJLE1BQU0sR0FBRyxDQUFDLENBQUM7QUFDOUIsTUFBSSxTQUFTLEdBQUcsV0FBVyxJQUFLLFdBQVcsR0FBRyxDQUFDLENBQUEsQUFBRSxHQUFHLENBQUMsQ0FBQzs7QUFFdEQsTUFBSSxVQUFVLEdBQUcsSUFBSSxTQUFTLEVBQUUsQ0FBQztBQUNqQyxNQUFJLFFBQVEsQ0FBQztBQUNiLE1BQUksS0FBSyxHQUFHLFVBQVUsQ0FBQztBQUN2QixPQUFNLENBQUMsR0FBRyxDQUFDLEVBQUUsQ0FBQyxHQUFHLEdBQUcsRUFBRSxDQUFDLEVBQUUsRUFDekI7QUFDRSxTQUFLLEdBQUcsS0FBSyxDQUFDLElBQUksR0FBRyxJQUFJLFNBQVMsRUFBRSxDQUFDO0FBQ3JDLFFBQUssQ0FBQyxJQUFJLFdBQVcsRUFBRyxRQUFRLEdBQUcsS0FBSyxDQUFDO0dBQzFDO0FBQ0QsT0FBSyxDQUFDLElBQUksR0FBRyxVQUFVLENBQUM7QUFDeEIsTUFBSSxPQUFPLEdBQUcsSUFBSSxDQUFDO0FBQ25CLE1BQUksUUFBUSxHQUFHLElBQUksQ0FBQzs7QUFFcEIsSUFBRSxHQUFHLEVBQUUsR0FBRyxDQUFDLENBQUM7O0FBRVosTUFBSSxPQUFPLEdBQUcsU0FBUyxDQUFDLE1BQU0sQ0FBQyxDQUFDO0FBQ2hDLE1BQUksT0FBTyxHQUFHLFNBQVMsQ0FBQyxNQUFNLENBQUMsQ0FBQzs7QUFFaEMsT0FBTSxDQUFDLEdBQUcsQ0FBQyxFQUFFLENBQUMsR0FBRyxNQUFNLEVBQUUsQ0FBQyxFQUFFLEVBQzVCO0FBQ0UsWUFBUSxHQUFHLFFBQVEsR0FBRyxRQUFRLEdBQUcsUUFBUSxHQUFHLEtBQUssR0FBRyxLQUFLLEdBQUcsS0FBSyxHQUFHLEtBQUssR0FBRyxDQUFDLENBQUM7O0FBRTlFLGFBQVMsR0FBRyxXQUFXLElBQUssRUFBRSxHQUFHLE1BQU0sQ0FBQyxFQUFFLENBQUMsQ0FBQSxBQUFFLENBQUM7QUFDOUMsYUFBUyxHQUFHLFdBQVcsSUFBSyxFQUFFLEdBQUcsTUFBTSxDQUFDLEVBQUUsR0FBQyxDQUFDLENBQUMsQ0FBQSxBQUFFLENBQUM7QUFDaEQsYUFBUyxHQUFHLFdBQVcsSUFBSyxFQUFFLEdBQUcsTUFBTSxDQUFDLEVBQUUsR0FBQyxDQUFDLENBQUMsQ0FBQSxBQUFFLENBQUM7QUFDaEQsYUFBUyxHQUFHLFdBQVcsSUFBSyxFQUFFLEdBQUcsTUFBTSxDQUFDLEVBQUUsR0FBQyxDQUFDLENBQUMsQ0FBQSxBQUFFLENBQUM7O0FBRWhELFNBQUssSUFBSSxTQUFTLEdBQUcsRUFBRSxDQUFDO0FBQ3hCLFNBQUssSUFBSSxTQUFTLEdBQUcsRUFBRSxDQUFDO0FBQ3hCLFNBQUssSUFBSSxTQUFTLEdBQUcsRUFBRSxDQUFDO0FBQ3hCLFNBQUssSUFBSSxTQUFTLEdBQUcsRUFBRSxDQUFDOztBQUV4QixTQUFLLEdBQUcsVUFBVSxDQUFDOztBQUVuQixTQUFLLENBQUMsR0FBRyxDQUFDLEVBQUUsQ0FBQyxHQUFHLFdBQVcsRUFBRSxDQUFDLEVBQUUsRUFDaEM7QUFDRSxXQUFLLENBQUMsQ0FBQyxHQUFHLEVBQUUsQ0FBQztBQUNiLFdBQUssQ0FBQyxDQUFDLEdBQUcsRUFBRSxDQUFDO0FBQ2IsV0FBSyxDQUFDLENBQUMsR0FBRyxFQUFFLENBQUM7QUFDYixXQUFLLENBQUMsQ0FBQyxHQUFHLEVBQUUsQ0FBQztBQUNiLFdBQUssR0FBRyxLQUFLLENBQUMs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LE1BQUksT0FBTyxNQUFNLElBQUksVUFBVSxJQUFJLE9BQU8sTUFBTSxDQUFDLEdBQUcsSUFBSSxRQUFRLElBQUksTUFBTSxDQUFDLEdBQUcsRUFBRTs7OztBQUk5RSxRQUFJLENBQUMsQ0FBQyxHQUFHLE1BQU0sQ0FBQzs7OztBQUloQixVQUFNLENBQUMsWUFBVztBQUNoQixhQUFPLE1BQU0sQ0FBQztLQUNmLENBQUMsQ0FBQztHQUNKOztPQUVJLElBQUksV0FBVyxJQUFJLFVBQVUsRUFBRTs7QUFFbEMsUUFBSSxhQUFhLEVBQUU7QUFDakIsT0FBQyxVQUFVLENBQUMsT0FBTyxHQUFHLE1BQU0sQ0FBQSxDQUFFLENBQUMsR0FBRyxNQUFNLENBQUM7S0FDMUM7O1NBRUk7QUFDSCxpQkFBVyxDQUFDLENBQUMsR0FBRyxNQUFNLENBQUM7S0FDeEI7R0FDRixNQUNJOztBQUVILFFBQUksQ0FBQyxDQUFDLEdBQUcsTUFBTSxDQUFDO0dBQ2pCO0NBQ0YsQ0FBQSxDQUFDLElBQUksV0FBTSxDQUFFIiwiZmlsZSI6ImdlbmVyYXRlZC5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzQ29udGVudCI6WyIoZnVuY3Rpb24gZSh0LG4scil7ZnVuY3Rpb24gcyhvLHUpe2lmKCFuW29dKXtpZighdFtvXSl7dmFyIGE9dHlwZW9mIHJlcXVpcmU9PVwiZnVuY3Rpb25cIiYmcmVxdWlyZTtpZighdSYmYSlyZXR1cm4gYShvLCEwKTtpZihpKXJldHVybiBpKG8sITApO3ZhciBmPW5ldyBFcnJvcihcIkNhbm5vdCBmaW5kIG1vZHVsZSAnXCIrbytcIidcIik7dGhyb3cgZi5jb2RlPVwiTU9EVUxFX05PVF9GT1VORFwiLGZ9dmFyIGw9bltvXT17ZXhwb3J0czp7fX07dFtvXVswXS5jYWxsKGwuZXhwb3J0cyxmdW5jdGlvbihlKXt2YXIgbj10W29dWzFdW2VdO3JldHVybiBzKG4/bjplKX0sbCxsLmV4cG9ydHMsZSx0LG4scil9cmV0dXJuIG5bb10uZXhwb3J0c312YXIgaT10eXBlb2YgcmVxdWlyZT09XCJmdW5jdGlvblwiJiZyZXF1aXJlO2Zvcih2YXIgbz0wO288ci5sZW5ndGg7bysrKXMocltvXSk7cmV0dXJuIHN9KSIsIlwidXNlIHN0cmljdFwiO1xuLyohXG4gKiBDb3B5cmlnaHQgKGMpIDIwMTMtMjAxNCA5ZWxlbWVudHMgR21iSFxuICpcbiAqIFJlbGVhc2VkIHVuZGVyIEF0dHJpYnV0aW9uLU5vbkNvbW1lcmNpYWwgMy4wIFVucG9ydGVkXG4gKiBodHRwOi8vY3JlYXRpdmVjb21tb25zLm9yZy9saWNlbnNlcy9ieS1uYy8zLjAvXG4gKlxuICogRm9yIGNvbW1lcmNpYWwgdXNlLCBwbGVhc2UgY29udGFjdCB1cyBhdCBjb250YWN0QDllbGVtZW50cy5jb21cbiAqL1xuXG5pbXBvcnQgSW1nbHlLaXQgZnJvbSBcIi4vc3JjL2pzL2ltZ2x5a2l0XCI7XG5cbi8qIGlzdGFuYnVsIGlnbm9yZSBuZXh0ICovXG4oZnVuY3Rpb24gKCkge1xuICBpZiAodHlwZW9mIHdpbmRvdyAhPT0gXCJ1bmRlZmluZWRcIikge1xuICAgIHdpbmRvdy5JbWdseUtpdCA9IEltZ2x5S2l0O1xuICB9IGVsc2UgaWYgKHR5cGVvZiBtb2R1bGUgIT09IFwidW5kZWZpbmVkXCIpIHtcbiAgICBtb2R1bGUuZXhwb3J0cyA9IEltZ2x5S2l0O1xuICB9IGVsc2UgaWYgKHR5cGVvZiBnbG9iYWwgIT09IFwidW5kZWZpbmVkXCIpIHtcbiAgICBnbG9iYWwuSW1nbHlLaXQgPSBJbWdseUtpdDtcbiAgfVxufSkoKTtcbiIsIlwidXNlIHN0cmljdFwiO1xubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbihQcm9taXNlKSB7XG52YXIgU29tZVByb21pc2VBcnJheSA9IFByb21pc2UuX1NvbWVQcm9taXNlQXJyYXk7XG5mdW5jdGlvbiBhbnkocHJvbWlzZXMpIHtcbiAgICB2YXIgcmV0ID0gbmV3IFNvbWVQcm9taXNlQXJyYXkocHJvbWlzZXMpO1xuICAgIHZhciBwcm9taXNlID0gcmV0LnByb21pc2UoKTtcbiAgICBpZiAocHJvbWlzZS5pc1JlamVjdGVkKCkpIHtcbiAgICAgICAgcmV0dXJuIHByb21pc2U7XG4gICAgfVxuICAgIHJldC5zZXRIb3dNYW55KDEpO1xuICAgIHJldC5zZXRVbndyYXAoKTtcbiAgICByZXQuaW5pdCgpO1xuICAgIHJldHVybiBwcm9taXNlO1xufVxuXG5Qcm9taXNlLmFueSA9IGZ1bmN0aW9uIChwcm9taXNlcykge1xuICAgIHJldHVybiBhbnkocHJvbWlzZXMpO1xufTtcblxuUHJvbWlzZS5wcm90b3R5cGUuYW55ID0gZnVuY3Rpb24gKCkge1xuICAgIHJldHVybiBhbnkodGhpcyk7XG59O1xuXG59O1xuIiwiKGZ1bmN0aW9uIChwcm9jZXNzKXtcblwidXNlIHN0cmljdFwiO1xudmFyIGZpcnN0TGluZUVycm9yO1xudHJ5IHt0aHJvdyBuZXcgRXJyb3IoKTsgfSBjYXRjaCAoZSkge2ZpcnN0TGluZUVycm9yID0gZTt9XG52YXIgc2NoZWR1bGUgPSByZXF1aXJlKFwiLi9zY2hlZHVsZS5qc1wiKTtcbnZhciBRdWV1ZSA9IHJlcXVpcmUoXCIuL3F1ZXVlLmpzXCIpO1xudmFyIF9wcm9jZXNzID0gdHlwZW9mIHByb2Nlc3MgIT09IFwidW5kZWZpbmVkXCIgPyBwcm9jZXNzIDogdW5kZWZpbmVkO1xuXG5mdW5jdGlvbiBBc3luYygpIHtcbiAgICB0aGlzLl9pc1RpY2tVc2VkID0gZmFsc2U7XG4gICAgdGhpcy5fbGF0ZVF1ZXVlID0gbmV3IFF1ZXVlKDE2KTtcbiAgICB0aGlzLl9ub3JtYWxRdWV1ZSA9IG5ldyBRdWV1ZSgxNik7XG4gICAgdmFyIHNlbGYgPSB0aGlzO1xuICAgIHRoaXMuZHJhaW5RdWV1ZXMgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHNlbGYuX2RyYWluUXVldWVzKCk7XG4gICAgfTtcbiAgICB0aGlzLl9zY2hlZHVsZSA9XG4gICAgICAgIHNjaGVkdWxlLmlzU3RhdGljID8gc2NoZWR1bGUodGhpcy5kcmFpblF1ZXVlcykgOiBzY2hlZHVsZTtcbn1cblxuQXN5bmMucHJvdG90eXBlLmhhdmVJdGVtc1F1ZXVlZCA9IGZ1bmN0aW9uICgpIHtcbiAgICByZXR1cm4gdGhpcy5fbm9ybWFsUXVldWUubGVuZ3RoKCkgPiAwO1xufTtcblxuQXN5bmMucHJvdG90eXBlLl93aXRoRG9tYWluID0gZnVuY3Rpb24oZm4pIHtcbiAgICBpZiAoX3Byb2Nlc3MgIT09IHVuZGVmaW5lZCAmJlxuICAgICAgICBfcHJvY2Vzcy5kb21haW4gIT0gbnVsbCAmJlxuICAgICAgICAhZm4uZG9tYWluKSB7XG4gICAgICAgIGZuID0gX3Byb2Nlc3MuZG9tYWluLmJpbmQoZm4pO1xuICAgIH1cbiAgICByZXR1cm4gZm47XG59O1xuXG5Bc3luYy5wcm90b3R5cGUudGhyb3dMYXRlciA9IGZ1bmN0aW9uKGZuLCBhcmcpIHtcbiAgICBpZiAoYXJndW1lbnRzLmxlbmd0aCA9PT0gMSkge1xuICAgICAgICBhcmcgPSBmbjtcbiAgICAgICAgZm4gPSBmdW5jdGlvbiAoKSB7IHRocm93IGFyZzsgfTtcbiAgICB9XG4gICAgZm4gPSB0aGlzLl93aXRoRG9tYWluKGZuKTtcbiAgICBpZiAodHlwZW9mIHNldFRpbWVvdXQgIT09IFwidW5kZWZpbmVkXCIpIHtcbiAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIGZuKGFyZyk7XG4gICAgICAgIH0sIDApO1xuICAgIH0gZWxzZSB0cnkge1xuICAgICAgICB0aGlzLl9zY2hlZHVsZShmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIGZuKGFyZyk7XG4gICAgICAgIH0pO1xuICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiTm8gYXN5bmMgc2NoZWR1bGVyIGF2YWlsYWJsZVxcdTAwMGFcXHUwMDBhICAgIFNlZSBodHRwOi8vZ29vLmdsL20zT1RYa1xcdTAwMGFcIik7XG4gICAgfVxufTtcblxuQXN5bmMucHJvdG90eXBlLmludm9rZUxhdGVyID0gZnVuY3Rpb24gKGZuLCByZWNlaXZlciwgYXJnKSB7XG4gICAgZm4gPSB0aGlzLl93aXRoRG9tYWluKGZuKTtcbiAgICB0aGlzLl9sYXRlUXVldWUucHVzaChmbiwgcmVjZWl2ZXIsIGFyZyk7XG4gICAgdGhpcy5fcXVldWVUaWNrKCk7XG59O1xuXG5Bc3luYy5wcm90b3R5cGUuaW52b2tlRmlyc3QgPSBmdW5jdGlvbiAoZm4sIHJlY2VpdmVyLCBhcmcpIHtcbiAgICBmbiA9IHRoaXMuX3dpdGhEb21haW4oZm4pO1xuICAgIHRoaXMuX25vcm1hbFF1ZXVlLnVuc2hpZnQoZm4sIHJlY2VpdmVyLCBhcmcpO1xuICAgIHRoaXMuX3F1ZXVlVGljaygpO1xufTtcblxuQXN5bmMucHJvdG90eXBlLmludm9rZSA9IGZ1bmN0aW9uIChmbiwgcmVjZWl2ZXIsIGFyZykge1xuICAgIGZuID0gdGhpcy5fd2l0aERvbWFpbihmbik7XG4gICAgdGhpcy5fbm9ybWFsUXVldWUucHVzaChmbiwgcmVjZWl2ZXIsIGFyZyk7XG4gICAgdGhpcy5fcXVldWVUaWNrKCk7XG59O1xuXG5Bc3luYy5wcm90b3R5cGUuc2V0dGxlUHJvbWlzZXMgPSBmdW5jdGlvbihwcm9taXNlKSB7XG4gICAgdGhpcy5fbm9ybWFsUXVldWUuX3B1c2hPbmUocHJvbWlzZSk7XG4gICAgdGhpcy5fcXVldWVUaWNrKCk7XG59O1xuXG5Bc3luYy5wcm90b3R5cGUuX2RyYWluUXVldWUgPSBmdW5jdGlvbihxdWV1ZSkge1xuICAgIHdoaWxlIChxdWV1ZS5sZW5ndGgoKSA+IDApIHtcbiAgICAgICAgdmFyIGZuID0gcXVldWUuc2hpZnQoKTtcbiAgICAgICAgaWYgKHR5cGVvZiBmbiAhPT0gXCJmdW5jdGlvblwiKSB7XG4gICAgICAgICAgICBmbi5fc2V0dGxlUHJvbWlzZXMoKTtcbiAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICB9XG4gICAgICAgIHZhciByZWNlaXZlciA9IHF1ZXVlLnNoaWZ0KCk7XG4gICAgICAgIHZhciBhcmcgPSBxdWV1ZS5zaGlmdCgpO1xuICAgICAgICBmbi5jYWxsKHJlY2VpdmVyLCBhcmcpO1xuICAgIH1cbn07XG5cbkFzeW5jLnByb3RvdHlwZS5fZHJhaW5RdWV1ZXMgPSBmdW5jdGlvbiAoKSB7XG4gICAgdGhpcy5fZHJhaW5RdWV1ZSh0aGlzLl9ub3JtYWxRdWV1ZSk7XG4gICAgdGhpcy5fcmVzZXQoKTtcbiAgICB0aGlzLl9kcmFpblF1ZXVlKHRoaXMuX2xhdGVRdWV1ZSk7XG59O1xuXG5Bc3luYy5wcm90b3R5cGUuX3F1ZXVlVGljayA9IGZ1bmN0aW9uICgpIHtcbiAgICBpZiAoIXRoaXMuX2lzVGlja1VzZWQpIHtcbiAgICAgICAgdGhpcy5faXNUaWNrVXNlZCA9IHRydWU7XG4gICAgICAgIHRoaXMuX3NjaGVkdWxlKHRoaXMuZHJhaW5RdWV1ZXMpO1xuICAgIH1cbn07XG5cbkFzeW5jLnByb3RvdHlwZS5fcmVzZXQgPSBmdW5jdGlvbiAoKSB7XG4gICAgdGhpcy5faXNUaWNrVXNlZCA9IGZhbHNlO1xufTtcblxubW9kdWxlLmV4cG9ydHMgPSBuZXcgQXN5bmMoKTtcbm1vZHVsZS5leHBvcnRzLmZpcnN0TGluZUVycm9yID0gZmlyc3RMaW5lRXJyb3I7XG5cbn0pLmNhbGwodGhpcyxyZXF1aXJlKCdfcHJvY2VzcycpKSIsIlwidXNlIHN0cmljdFwiO1xudmFyIG9sZDtcbmlmICh0eXBlb2YgUHJvbWlzZSAhPT0gXCJ1bmRlZmluZWRcIikgb2xkID0gUHJvbWlzZTtcbmZ1bmN0aW9uIG5vQ29uZmxpY3QoKSB7XG4gICAgdHJ5IHsgaWYgKFByb21pc2UgPT09IGJsdWViaXJkKSBQcm9taXNlID0gb2xkOyB9XG4gICAgY2F0Y2ggKGUpIHt9XG4gICAgcmV0dXJuIGJsdWViaXJkO1xufVxudmFyIGJsdWViaXJkID0gcmVxdWlyZShcIi4vcHJvbWlzZS5qc1wiKSgpO1xuYmx1ZWJpcmQubm9Db25mbGljdCA9IG5vQ29uZmxpY3Q7XG5tb2R1bGUuZXhwb3J0cyA9IGJsdWViaXJkO1xuIiwiXCJ1c2Ugc3RyaWN0XCI7XG52YXIgY3IgPSBPYmplY3QuY3JlYXRlO1xuaWYgKGNyKSB7XG4gICAgdmFyIGNhbGxlckNhY2hlID0gY3IobnVsbCk7XG4gICAgdmFyIGdldHRlckNhY2hlID0gY3IobnVsbCk7XG4gICAgY2FsbGVyQ2FjaGVbXCIgc2l6ZVwiXSA9IGdldHRlckNhY2hlW1wiIHNpemVcIl0gPSAwO1xufVxuXG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uKFByb21pc2UpIHtcbnZhciB1dGlsID0gcmVxdWlyZShcIi4vdXRpbC5qc1wiKTtcbnZhciBjYW5FdmFsdWF0ZSA9IHV0aWwuY2FuRXZhbHVhdGU7XG52YXIgaXNJZGVudGlmaWVyID0gdXRpbC5pc0lkZW50aWZpZXI7XG5cbmZ1bmN0aW9uIG1ha2VNZXRob2RDYWxsZXIgKG1ldGhvZE5hbWUpIHtcbiAgICByZXR1cm4gbmV3IEZ1bmN0aW9uKFwib2JqXCIsIFwiICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXFxuXFxcbiAgICAgICAgJ3VzZSBzdHJpY3QnICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXFxuXFxcbiAgICAgICAgdmFyIGxlbiA9IHRoaXMubGVuZ3RoOyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXFxuXFxcbiAgICAgICAgc3dpdGNoKGxlbikgeyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXFxuXFxcbiAgICAgICAgICAgIGNhc2UgMTogcmV0dXJuIG9iai5tZXRob2ROYW1lKHRoaXNbMF0pOyAgICAgICAgICAgICAgICAgICAgICAgICAgXFxuXFxcbiAgICAgICAgICAgIGNhc2UgMjogcmV0dXJuIG9iai5tZXRob2ROYW1lKHRoaXNbMF0sIHRoaXNbMV0pOyAgICAgICAgICAgICAgICAgXFxuXFxcbiAgICAgICAgICAgIGNhc2UgMzogcmV0dXJuIG9iai5tZXRob2ROYW1lKHRoaXNbMF0sIHRoaXNbMV0sIHRoaXNbMl0pOyAgICAgICAgXFxuXFxcbiAgICAgICAgICAgIGNhc2UgMDogcmV0dXJuIG9iai5tZXRob2ROYW1lKCk7ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXFxuXFxcbiAgICAgICAgICAgIGRlZmF1bHQ6IHJldHVybiBvYmoubWV0aG9kTmFtZS5hcHBseShvYmosIHRoaXMpOyAgICAgICAgICAgICAgICAgXFxuXFxcbiAgICAgICAgfSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXFxuXFxcbiAgICAgICAgXCIucmVwbGFjZSgvbWV0aG9kTmFtZS9nLCBtZXRob2ROYW1lKSk7XG59XG5cbmZ1bmN0aW9uIG1ha2VHZXR0ZXIgKHByb3BlcnR5TmFtZSkge1xuICAgIHJldHVybiBuZXcgRnVuY3Rpb24oXCJvYmpcIiwgXCIgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcXG5cXFxuICAgICAgICAndXNlIHN0cmljdCc7ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcXG5cXFxuICAgICAgICByZXR1cm4gb2JqLnByb3BlcnR5TmFtZTsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcXG5cXFxuICAgICAgICBcIi5yZXBsYWNlKFwicHJvcGVydHlOYW1lXCIsIHByb3BlcnR5TmFtZSkpO1xufVxuXG5mdW5jdGlvbiBnZXRDb21waWxlZChuYW1lLCBjb21waWxlciwgY2FjaGUpIHtcbiAgICB2YXIgcmV0ID0gY2FjaGVbbmFtZV07XG4gICAgaWYgKHR5cGVvZiByZXQgIT09IFwiZnVuY3Rpb25cIikge1xuICAgICAgICBpZiAoIWlzSWRlbnRpZmllcihuYW1lKSkge1xuICAgICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgIH1cbiAgICAgICAgcmV0ID0gY29tcGlsZXIobmFtZSk7XG4gICAgICAgIGNhY2hlW25hbWVdID0gcmV0O1xuICAgICAgICBjYWNoZVtcIiBzaXplXCJdKys7XG4gICAgICAgIGlmIChjYWNoZVtcIiBzaXplXCJdID4gNTEyKSB7XG4gICAgICAgICAgICB2YXIga2V5cyA9IE9iamVjdC5rZXlzKGNhY2hlKTtcbiAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgMjU2OyArK2kpIGRlbGV0ZSBjYWNoZVtrZXlzW2ldXTtcbiAgICAgICAgICAgIGNhY2hlW1wiIHNpemVcIl0gPSBrZXlzLmxlbmd0aCAtIDI1NjtcbiAgICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gcmV0O1xufVxuXG5mdW5jdGlvbiBnZXRNZXRob2RDYWxsZXIobmFtZSkge1xuICAgIHJldHVybiBnZXRDb21waWxlZChuYW1lLCBtYWtlTWV0aG9kQ2FsbGVyLCBjYWxsZXJDYWNoZSk7XG59XG5cbmZ1bmN0aW9uIGdldEdldHRlcihuYW1lKSB7XG4gICAgcmV0dXJuIGdldENvbXBpbGVkKG5hbWUsIG1ha2VHZXR0ZXIsIGdldHRlckNhY2hlKTtcbn1cblxuZnVuY3Rpb24gY2FsbGVyKG9iaikge1xuICAgIHJldHVybiBvYmpbdGhpcy5wb3AoKV0uYXBwbHkob2JqLCB0aGlzKTtcbn1cblByb21pc2UucHJvdG90eXBlLmNhbGwgPSBmdW5jdGlvbiAobWV0aG9kTmFtZSkge1xuICAgIHZhciAkX2xlbiA9IGFyZ3VtZW50cy5sZW5ndGg7dmFyIGFyZ3MgPSBuZXcgQXJyYXkoJF9sZW4gLSAxKTsgZm9yKHZhciAkX2kgPSAxOyAkX2kgPCAkX2xlbjsgKyskX2kpIHthcmdzWyRfaSAtIDFdID0gYXJndW1lbnRzWyRfaV07fVxuICAgIGlmIChjYW5FdmFsdWF0ZSkge1xuICAgICAgICB2YXIgbWF5YmVDYWxsZXIgPSBnZXRNZXRob2RDYWxsZXIobWV0aG9kTmFtZSk7XG4gICAgICAgIGlmIChtYXliZUNhbGxlciAhPT0gbnVsbCkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuX3RoZW4oXG4gICAgICAgICAgICAgICAgbWF5YmVDYWxsZXIsIHVuZGVmaW5lZCwgdW5kZWZpbmVkLCBhcmdzLCB1bmRlZmluZWQpO1xuICAgICAgICB9XG4gICAgfVxuICAgIGFyZ3MucHVzaChtZXRob2ROYW1lKTtcbiAgICByZXR1cm4gdGhpcy5fdGhlbihjYWxsZXIsIHVuZGVmaW5lZCwgdW5kZWZpbmVkLCBhcmdzLCB1bmRlZmluZWQpO1xufTtcblxuZnVuY3Rpb24gbmFtZWRHZXR0ZXIob2JqKSB7XG4gICAgcmV0dXJuIG9ialt0aGlzXTtcbn1cbmZ1bmN0aW9uIGluZGV4ZWRHZXR0ZXIob2JqKSB7XG4gICAgdmFyIGluZGV4ID0gK3RoaXM7XG4gICAgaWYgKGluZGV4IDwgMCkgaW5kZXggPSBNYXRoLm1heCgwLCBpbmRleCArIG9iai5sZW5ndGgpO1xuICAgIHJldHVybiBvYmpbaW5kZXhdO1xufVxuUHJvbWlzZS5wcm90b3R5cGUuZ2V0ID0gZnVuY3Rpb24gKHByb3BlcnR5TmFtZSkge1xuICAgIHZhciBpc0luZGV4ID0gKHR5cGVvZiBwcm9wZXJ0eU5hbWUgPT09IFwibnVtYmVyXCIpO1xuICAgIHZhciBnZXR0ZXI7XG4gICAgaWYgKCFpc0luZGV4KSB7XG4gICAgICAgIGlmIChjYW5FdmFsdWF0ZSkge1xuICAgICAgICAgICAgdmFyIG1heWJlR2V0dGVyID0gZ2V0R2V0dGVyKHByb3BlcnR5TmFtZSk7XG4gICAgICAgICAgICBnZXR0ZXIgPSBtYXliZUdldHRlciAhPT0gbnVsbCA/IG1heWJlR2V0dGVyIDogbmFtZWRHZXR0ZXI7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBnZXR0ZXIgPSBuYW1lZEdldHRlcjtcbiAgICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICAgIGdldHRlciA9IGluZGV4ZWRHZXR0ZXI7XG4gICAgfVxuICAgIHJldHVybiB0aGlzLl90aGVuKGdldHRlciwgdW5kZWZpbmVkLCB1bmRlZmluZWQsIHByb3BlcnR5TmFtZSwgdW5kZWZpbmVkKTtcbn07XG59O1xuIiwiXCJ1c2Ugc3RyaWN0XCI7XG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uKFByb21pc2UsIElOVEVSTkFMKSB7XG52YXIgZXJyb3JzID0gcmVxdWlyZShcIi4vZXJyb3JzLmpzXCIpO1xudmFyIGFzeW5jID0gcmVxdWlyZShcIi4vYXN5bmMuanNcIik7XG52YXIgQ2FuY2VsbGF0aW9uRXJyb3IgPSBlcnJvcnMuQ2FuY2VsbGF0aW9uRXJyb3I7XG5cblByb21pc2UucHJvdG90eXBlLl9jYW5jZWwgPSBmdW5jdGlvbiAocmVhc29uKSB7XG4gICAgaWYgKCF0aGlzLmlzQ2FuY2VsbGFibGUoKSkgcmV0dXJuIHRoaXM7XG4gICAgdmFyIHBhcmVudDtcbiAgICB2YXIgcHJvbWlzZVRvUmVqZWN0ID0gdGhpcztcbiAgICB3aGlsZSAoKHBhcmVudCA9IHByb21pc2VUb1JlamVjdC5fY2FuY2VsbGF0aW9uUGFyZW50KSAhPT0gdW5kZWZpbmVkICYmXG4gICAgICAgIHBhcmVudC5pc0NhbmNlbGxhYmxlKCkpIHtcbiAgICAgICAgcHJvbWlzZVRvUmVqZWN0ID0gcGFyZW50O1xuICAgIH1cbiAgICB0aGlzLl91bnNldENhbmNlbGxhYmxlKCk7XG4gICAgdmFyIHRyYWNlID0gZXJyb3JzLmVuc3VyZUVycm9yT2JqZWN0KHJlYXNvbik7XG4gICAgcHJvbWlzZVRvUmVqZWN0Ll9hdHRhY2hFeHRyYVRyYWNlKHRyYWNlKTtcbiAgICBwcm9taXNlVG9SZWplY3QuX3RhcmdldCgpLl9yZWplY3RVbmNoZWNrZWQocmVhc29uLCB0cmFjZSk7XG59O1xuXG5Qcm9taXNlLnByb3RvdHlwZS5jYW5jZWwgPSBmdW5jdGlvbiAocmVhc29uKSB7XG4gICAgaWYgKCF0aGlzLmlzQ2FuY2VsbGFibGUoKSkgcmV0dXJuIHRoaXM7XG4gICAgaWYgKHJlYXNvbiA9PT0gdW5kZWZpbmVkKSByZWFzb24gPSBuZXcgQ2FuY2VsbGF0aW9uRXJyb3IoKTtcbiAgICBhc3luYy5pbnZva2VMYXRlcih0aGlzLl9jYW5jZWwsIHRoaXMsIHJlYXNvbik7XG4gICAgcmV0dXJuIHRoaXM7XG59O1xuXG5Qcm9taXNlLnByb3RvdHlwZS5jYW5jZWxsYWJsZSA9IGZ1bmN0aW9uICgpIHtcbiAgICBpZiAodGhpcy5fY2FuY2VsbGFibGUoKSkgcmV0dXJuIHRoaXM7XG4gICAgdGhpcy5fc2V0Q2FuY2VsbGFibGUoKTtcbiAgICB0aGlzLl9jYW5jZWxsYXRpb25QYXJlbnQgPSB1bmRlZmluZWQ7XG4gICAgcmV0dXJuIHRoaXM7XG59O1xuXG5Qcm9taXNlLnByb3RvdHlwZS51bmNhbmNlbGxhYmxlID0gZnVuY3Rpb24gKCkge1xuICAgIHZhciByZXQgPSBuZXcgUHJvbWlzZShJTlRFUk5BTCk7XG4gICAgcmV0Ll9wcm9wYWdhdGVGcm9tKHRoaXMsIDQpO1xuICAgIHJldC5fZm9sbG93KHRoaXMpO1xuICAgIHJldC5fdW5zZXRDYW5jZWxsYWJsZSgpO1xuICAgIHJldHVybiByZXQ7XG59O1xuXG5Qcm9taXNlLnByb3RvdHlwZS5mb3JrID0gZnVuY3Rpb24gKGRpZEZ1bGZpbGwsIGRpZFJlamVjdCwgZGlkUHJvZ3Jlc3MpIHtcbiAgICB2YXIgcmV0ID0gdGhpcy5fdGhlbihkaWRGdWxmaWxsLCBkaWRSZWplY3QsIGRpZFByb2dyZXNzLFxuICAgICAgICAgICAgICAgICAgICAgICAgIHVuZGVmaW5lZCwgdW5kZWZpbmVkKTtcblxuICAgIHJldC5fc2V0Q2FuY2VsbGFibGUoKTtcbiAgICByZXQuX2NhbmNlbGxhdGlvblBhcmVudCA9IHVuZGVmaW5lZDtcbiAgICByZXR1cm4gcmV0O1xufTtcbn07XG4iLCIoZnVuY3Rpb24gKHByb2Nlc3Mpe1xuXCJ1c2Ugc3RyaWN0XCI7XG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uKCkge1xudmFyIGFzeW5jID0gcmVxdWlyZShcIi4vYXN5bmMuanNcIik7XG52YXIgaW5oZXJpdHMgPSByZXF1aXJlKFwiLi91dGlsLmpzXCIpLmluaGVyaXRzO1xudmFyIGJsdWViaXJkRnJhbWVQYXR0ZXJuID0gL1tcXFxcXFwvXWJsdWViaXJkW1xcXFxcXC9danNbXFxcXFxcL10obWFpbnxkZWJ1Z3x6YWxnbykvO1xudmFyIHN0YWNrRnJhbWVQYXR0ZXJuID0gbnVsbDtcbnZhciBmb3JtYXRTdGFjayA9IG51bGw7XG5cbmZ1bmN0aW9uIENhcHR1cmVkVHJhY2UocGFyZW50KSB7XG4gICAgdGhpcy5fcGFyZW50ID0gcGFyZW50O1xuICAgIHZhciBsZW5ndGggPSB0aGlzLl9sZW5ndGggPSAxICsgKHBhcmVudCA9PT0gdW5kZWZpbmVkID8gMCA6IHBhcmVudC5fbGVuZ3RoKTtcbiAgICBjYXB0dXJlU3RhY2tUcmFjZSh0aGlzLCBDYXB0dXJlZFRyYWNlKTtcbiAgICBpZiAobGVuZ3RoID4gMzIpIHRoaXMudW5jeWNsZSgpO1xufVxuaW5oZXJpdHMoQ2FwdHVyZWRUcmFjZSwgRXJyb3IpO1xuXG5DYXB0dXJlZFRyYWNlLnByb3RvdHlwZS51bmN5Y2xlID0gZnVuY3Rpb24oKSB7XG4gICAgdmFyIGxlbmd0aCA9IHRoaXMuX2xlbmd0aDtcbiAgICBpZiAobGVuZ3RoIDwgMikgcmV0dXJuO1xuICAgIHZhciBub2RlcyA9IFtdO1xuICAgIHZhciBzdGFja1RvSW5kZXggPSB7fTtcblxuICAgIGZvciAodmFyIGkgPSAwLCBub2RlID0gdGhpczsgbm9kZSAhPT0gdW5kZWZpbmVkOyArK2kpIHtcbiAgICAgICAgbm9kZXMucHVzaChub2RlKTtcbiAgICAgICAgbm9kZSA9IG5vZGUuX3BhcmVudDtcbiAgICB9XG4gICAgbGVuZ3RoID0gdGhpcy5fbGVuZ3RoID0gaTtcbiAgICBmb3IgKHZhciBpID0gbGVuZ3RoIC0gMTsgaSA+PSAwOyAtLWkpIHtcbiAgICAgICAgdmFyIHN0YWNrID0gbm9kZXNbaV0uc3RhY2s7XG4gICAgICAgIGlmIChzdGFja1RvSW5kZXhbc3RhY2tdID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIHN0YWNrVG9JbmRleFtzdGFja10gPSBpO1xuICAgICAgICB9XG4gICAgfVxuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbGVuZ3RoOyArK2kpIHtcbiAgICAgICAgdmFyIGN1cnJlbnRTdGFjayA9IG5vZGVzW2ldLnN0YWNrO1xuICAgICAgICB2YXIgaW5kZXggPSBzdGFja1RvSW5kZXhbY3VycmVudFN0YWNrXTtcbiAgICAgICAgaWYgKGluZGV4ICE9PSB1bmRlZmluZWQgJiYgaW5kZXggIT09IGkpIHtcbiAgICAgICAgICAgIGlmIChpbmRleCA+IDApIHtcbiAgICAgICAgICAgICAgICBub2Rlc1tpbmRleCAtIDFdLl9wYXJlbnQgPSB1bmRlZmluZWQ7XG4gICAgICAgICAgICAgICAgbm9kZXNbaW5kZXggLSAxXS5fbGVuZ3RoID0gMTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIG5vZGVzW2ldLl9wYXJlbnQgPSB1bmRlZmluZWQ7XG4gICAgICAgICAgICBub2Rlc1tpXS5fbGVuZ3RoID0gMTtcbiAgICAgICAgICAgIHZhciBjeWNsZUVkZ2VOb2RlID0gaSA+IDAgPyBub2Rlc1tpIC0gMV0gOiB0aGlzO1xuXG4gICAgICAgICAgICBpZiAoaW5kZXggPCBsZW5ndGggLSAxKSB7XG4gICAgICAgICAgICAgICAgY3ljbGVFZGdlTm9kZS5fcGFyZW50ID0gbm9kZXNbaW5kZXggKyAxXTtcbiAgICAgICAgICAgICAgICBjeWNsZUVkZ2VOb2RlLl9wYXJlbnQudW5jeWNsZSgpO1xuICAgICAgICAgICAgICAgIGN5Y2xlRWRnZU5vZGUuX2xlbmd0aCA9XG4gICAgICAgICAgICAgICAgICAgIGN5Y2xlRWRnZU5vZGUuX3BhcmVudC5fbGVuZ3RoICsgMTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgY3ljbGVFZGdlTm9kZS5fcGFyZW50ID0gdW5kZWZpbmVkO1xuICAgICAgICAgICAgICAgIGN5Y2xlRWRnZU5vZGUuX2xlbmd0aCA9IDE7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB2YXIgY3VycmVudENoaWxkTGVuZ3RoID0gY3ljbGVFZGdlTm9kZS5fbGVuZ3RoICsgMTtcbiAgICAgICAgICAgIGZvciAodmFyIGogPSBpIC0gMjsgaiA+PSAwOyAtLWopIHtcbiAgICAgICAgICAgICAgICBub2Rlc1tqXS5fbGVuZ3RoID0gY3VycmVudENoaWxkTGVuZ3RoO1xuICAgICAgICAgICAgICAgIGN1cnJlbnRDaGlsZExlbmd0aCsrO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgfVxufTtcblxuQ2FwdHVyZWRUcmFjZS5wcm90b3R5cGUucGFyZW50ID0gZnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuIHRoaXMuX3BhcmVudDtcbn07XG5cbkNhcHR1cmVkVHJhY2UucHJvdG90eXBlLmhhc1BhcmVudCA9IGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiB0aGlzLl9wYXJlbnQgIT09IHVuZGVmaW5lZDtcbn07XG5cbkNhcHR1cmVkVHJhY2UucHJvdG90eXBlLmF0dGFjaEV4dHJhVHJhY2UgPSBmdW5jdGlvbihlcnJvcikge1xuICAgIGlmIChlcnJvci5fX3N0YWNrQ2xlYW5lZF9fKSByZXR1cm47XG4gICAgdGhpcy51bmN5Y2xlKCk7XG4gICAgdmFyIHRyYWNlID0gdGhpcztcbiAgICB2YXIgc3RhY2sgPSBDYXB0dXJlZFRyYWNlLmNsZWFuU3RhY2soZXJyb3IsIGZhbHNlKTtcbiAgICB2YXIgaGVhZGVyTGluZUNvdW50ID0gMTtcbiAgICB2YXIgY29tYmluZWRUcmFjZXMgPSAxO1xuICAgIGRvIHtcbiAgICAgICAgc3RhY2sgPSB0cmFjZS5jb21iaW5lKHN0YWNrKTtcbiAgICAgICAgY29tYmluZWRUcmFjZXMrKztcbiAgICB9IHdoaWxlICgodHJhY2UgPSB0cmFjZS5wYXJlbnQoKSkgIT0gbnVsbCk7XG5cbiAgICBzdGFjayA9IHVuUHJvdGVjdE5ld2xpbmVzKHN0YWNrKTtcblxuICAgIGlmIChzdGFjay5sZW5ndGggPD0gaGVhZGVyTGluZUNvdW50KSB7XG4gICAgICAgIGVycm9yLnN0YWNrID0gXCIoTm8gc3RhY2sgdHJhY2UpXCI7XG4gICAgfSBlbHNlIHtcbiAgICAgICAgZXJyb3Iuc3RhY2sgPSBzdGFjay5qb2luKFwiXFxuXCIpO1xuICAgIH1cbn07XG5cbkNhcHR1cmVkVHJhY2UucHJvdG90eXBlLmNvbWJpbmUgPSBmdW5jdGlvbihjdXJyZW50KSB7XG4gICAgdmFyIHByZXYgPSBjbGVhbih0aGlzLnN0YWNrLnNwbGl0KFwiXFxuXCIpLCAwKTtcbiAgICB2YXIgY3VycmVudExhc3RJbmRleCA9IGN1cnJlbnQubGVuZ3RoIC0gMTtcbiAgICB2YXIgY3VycmVudExhc3RMaW5lID0gY3VycmVudFtjdXJyZW50TGFzdEluZGV4XTtcbiAgICB2YXIgY29tbW9uUm9vdE1lZXRQb2ludCA9IC0xO1xuICAgIGZvciAodmFyIGkgPSBwcmV2Lmxlbmd0aCAtIDE7IGkgPj0gMDsgLS1pKSB7XG4gICAgICAgIGlmIChwcmV2W2ldID09PSBjdXJyZW50TGFzdExpbmUpIHtcbiAgICAgICAgICAgIGNvbW1vblJvb3RNZWV0UG9pbnQgPSBpO1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBmb3IgKHZhciBpID0gY29tbW9uUm9vdE1lZXRQb2ludDsgaSA+PSAwOyAtLWkpIHtcbiAgICAgICAgdmFyIGxpbmUgPSBwcmV2W2ldO1xuICAgICAgICBpZiAoY3VycmVudFtjdXJyZW50TGFzdEluZGV4XSA9PT0gbGluZSkge1xuICAgICAgICAgICAgY3VycmVudC5wb3AoKTtcbiAgICAgICAgICAgIGN1cnJlbnRMYXN0SW5kZXgtLTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgaWYgKGN1cnJlbnRbY3VycmVudC5sZW5ndGggLSAxXSAhPT0gXCJGcm9tIHByZXZpb3VzIGV2ZW50OlwiKSB7XG4gICAgICAgIGN1cnJlbnQucHVzaChcIkZyb20gcHJldmlvdXMgZXZlbnQ6XCIpO1xuICAgIH1cbiAgICByZXR1cm4gY3VycmVudC5jb25jYXQocHJldik7XG59O1xuXG5mdW5jdGlvbiBwcm90ZWN0RXJyb3JNZXNzYWdlTmV3bGluZXMgKHN0YWNrKSB7XG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCBzdGFjay5sZW5ndGg7ICsraSkge1xuICAgICAgICB2YXIgbGluZSA9IHN0YWNrW2ldO1xuICAgICAgICBpZiAoXCIgICAgKE5vIHN0YWNrIHRyYWNlKVwiID09PSBsaW5lIHx8IHN0YWNrRnJhbWVQYXR0ZXJuLnRlc3QobGluZSkpIHtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgaWYgKGkgPD0gMSkgcmV0dXJuIDE7XG5cbiAgICB2YXIgZXJyb3JNZXNzYWdlTGluZXMgPSBbXTtcbiAgICBmb3IgKHZhciBqID0gMDsgaiA8IGk7ICsraikge1xuICAgICAgICBlcnJvck1lc3NhZ2VMaW5lcy5wdXNoKHN0YWNrLnNoaWZ0KCkpO1xuICAgIH1cbiAgICBzdGFjay51bnNoaWZ0KGVycm9yTWVzc2FnZUxpbmVzLmpvaW4oXCJcXHUwMDAyXFx1MDAwMFxcdTAwMDFcIikpO1xuICAgIHJldHVybiBpO1xufVxuXG5mdW5jdGlvbiB1blByb3RlY3ROZXdsaW5lcyhzdGFjaykge1xuICAgIGlmIChzdGFjay5sZW5ndGggPiAwKSB7XG4gICAgICAgIHN0YWNrWzBdID0gc3RhY2tbMF0uc3BsaXQoXCJcXHUwMDAyXFx1MDAwMFxcdTAwMDFcIikuam9pbihcIlxcblwiKTtcbiAgICAgICAgaWYgKHN0YWNrW3N0YWNrLmxlbmd0aCAtIDFdID09PSBcIkZyb20gcHJldmlvdXMgZXZlbnQ6XCIpIHtcbiAgICAgICAgICAgIHN0YWNrLnBvcCgpO1xuICAgICAgICB9XG4gICAgfVxuICAgIHJldHVybiBzdGFjaztcbn1cblxuZnVuY3Rpb24gY2xlYW4oc3RhY2ssIGluaXRpYWxJbmRleCkge1xuICAgIHZhciByZXQgPSBzdGFjay5zbGljZSgwLCBpbml0aWFsSW5kZXgpO1xuICAgIGZvciAodmFyIGkgPSBpbml0aWFsSW5kZXg7IGkgPCBzdGFjay5sZW5ndGg7ICsraSkge1xuICAgICAgICB2YXIgbGluZSA9IHN0YWNrW2ldO1xuICAgICAgICB2YXIgaXNUcmFjZUxpbmUgPSBzdGFja0ZyYW1lUGF0dGVybi50ZXN0KGxpbmUpIHx8XG4gICAgICAgICAgICBcIiAgICAoTm8gc3RhY2sgdHJhY2UpXCIgPT09IGxpbmU7XG4gICAgICAgIHZhciBpc0ludGVybmFsRnJhbWUgPSBpc1RyYWNlTGluZSAmJiBzaG91bGRJZ25vcmUobGluZSk7XG4gICAgICAgIGlmIChpc1RyYWNlTGluZSAmJiAhaXNJbnRlcm5hbEZyYW1lKSB7XG4gICAgICAgICAgICByZXQucHVzaChsaW5lKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gcmV0O1xufVxuXG5DYXB0dXJlZFRyYWNlLmNsZWFuU3RhY2sgPSBmdW5jdGlvbihlcnJvciwgc2hvdWxkVW5Qcm90ZWN0TmV3bGluZXMpIHtcbiAgICBpZiAoZXJyb3IuX19zdGFja0NsZWFuZWRfXykgcmV0dXJuO1xuICAgIGVycm9yLl9fc3RhY2tDbGVhbmVkX18gPSB0cnVlO1xuICAgIHZhciBzdGFjayA9IGVycm9yLnN0YWNrO1xuICAgIHN0YWNrID0gdHlwZW9mIHN0YWNrID09PSBcInN0cmluZ1wiXG4gICAgICAgID8gc3RhY2suc3BsaXQoXCJcXG5cIilcbiAgICAgICAgOiBbZXJyb3IudG9TdHJpbmcoKSwgXCIgICAgKE5vIHN0YWNrIHRyYWNlKVwiXTtcbiAgICB2YXIgaW5pdGlhbEluZGV4ID0gcHJvdGVjdEVycm9yTWVzc2FnZU5ld2xpbmVzKHN0YWNrKTtcbiAgICBzdGFjayA9IGNsZWFuKHN0YWNrLCBpbml0aWFsSW5kZXgpO1xuICAgIGlmIChzaG91bGRVblByb3RlY3ROZXdsaW5lcykgc3RhY2sgPSB1blByb3RlY3ROZXdsaW5lcyhzdGFjayk7XG4gICAgZXJyb3Iuc3RhY2sgPSBzdGFjay5qb2luKFwiXFxuXCIpO1xuICAgIHJldHVybiBzdGFjaztcbn07XG5cbkNhcHR1cmVkVHJhY2UuZm9ybWF0QW5kTG9nRXJyb3IgPSBmdW5jdGlvbihlcnJvciwgdGl0bGUpIHtcbiAgICBpZiAodHlwZW9mIGNvbnNvbGUgPT09IFwib2JqZWN0XCIpIHtcbiAgICAgICAgdmFyIG1lc3NhZ2U7XG4gICAgICAgIGlmICh0eXBlb2YgZXJyb3IgPT09IFwib2JqZWN0XCIgfHwgdHlwZW9mIGVycm9yID09PSBcImZ1bmN0aW9uXCIpIHtcbiAgICAgICAgICAgIHZhciBzdGFjayA9IGVycm9yLnN0YWNrO1xuICAgICAgICAgICAgbWVzc2FnZSA9IHRpdGxlICsgZm9ybWF0U3RhY2soc3RhY2ssIGVycm9yKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIG1lc3NhZ2UgPSB0aXRsZSArIFN0cmluZyhlcnJvcik7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHR5cGVvZiBjb25zb2xlLndhcm4gPT09IFwiZnVuY3Rpb25cIiB8fFxuICAgICAgICAgICAgdHlwZW9mIGNvbnNvbGUud2FybiA9PT0gXCJvYmplY3RcIikge1xuICAgICAgICAgICAgY29uc29sZS53YXJuKG1lc3NhZ2UpO1xuICAgICAgICB9IGVsc2UgaWYgKHR5cGVvZiBjb25zb2xlLmxvZyA9PT0gXCJmdW5jdGlvblwiIHx8XG4gICAgICAgICAgICB0eXBlb2YgY29uc29sZS5sb2cgPT09IFwib2JqZWN0XCIpIHtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKG1lc3NhZ2UpO1xuICAgICAgICB9XG4gICAgfVxufTtcblxuQ2FwdHVyZWRUcmFjZS51bmhhbmRsZWRSZWplY3Rpb24gPSBmdW5jdGlvbiAocmVhc29uKSB7XG4gICAgQ2FwdHVyZWRUcmFjZS5mb3JtYXRBbmRMb2dFcnJvcihyZWFzb24sIFwiXi0tLSBXaXRoIGFkZGl0aW9uYWwgc3RhY2sgdHJhY2U6IFwiKTtcbn07XG5cbkNhcHR1cmVkVHJhY2UuaXNTdXBwb3J0ZWQgPSBmdW5jdGlvbiAoKSB7XG4gICAgcmV0dXJuIHR5cGVvZiBjYXB0dXJlU3RhY2tUcmFjZSA9PT0gXCJmdW5jdGlvblwiO1xufTtcblxuQ2FwdHVyZWRUcmFjZS5maXJlUmVqZWN0aW9uRXZlbnQgPVxuZnVuY3Rpb24obmFtZSwgbG9jYWxIYW5kbGVyLCByZWFzb24sIHByb21pc2UpIHtcbiAgICB2YXIgbG9jYWxFdmVudEZpcmVkID0gZmFsc2U7XG4gICAgdHJ5IHtcbiAgICAgICAgaWYgKHR5cGVvZiBsb2NhbEhhbmRsZXIgPT09IFwiZnVuY3Rpb25cIikge1xuICAgICAgICAgICAgbG9jYWxFdmVudEZpcmVkID0gdHJ1ZTtcbiAgICAgICAgICAgIGlmIChuYW1lID09PSBcInJlamVjdGlvbkhhbmRsZWRcIikge1xuICAgICAgICAgICAgICAgIGxvY2FsSGFuZGxlcihwcm9taXNlKTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgbG9jYWxIYW5kbGVyKHJlYXNvbiwgcHJvbWlzZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgIGFzeW5jLnRocm93TGF0ZXIoZSk7XG4gICAgfVxuXG4gICAgdmFyIGdsb2JhbEV2ZW50RmlyZWQgPSBmYWxzZTtcbiAgICB0cnkge1xuICAgICAgICBnbG9iYWxFdmVudEZpcmVkID0gZmlyZUdsb2JhbEV2ZW50KG5hbWUsIHJlYXNvbiwgcHJvbWlzZSk7XG4gICAgfSBjYXRjaCAoZSkge1xuICAgICAgICBnbG9iYWxFdmVudEZpcmVkID0gdHJ1ZTtcbiAgICAgICAgYXN5bmMudGhyb3dMYXRlcihlKTtcbiAgICB9XG5cbiAgICBpZiAoIWdsb2JhbEV2ZW50RmlyZWQgJiYgIWxvY2FsRXZlbnRGaXJlZCAmJlxuICAgICAgICBuYW1lID09PSBcInVuaGFuZGxlZFJlamVjdGlvblwiKSB7XG4gICAgICAgIENhcHR1cmVkVHJhY2UuZm9ybWF0QW5kTG9nRXJyb3IocmVhc29uLCBcIlBvc3NpYmx5IHVuaGFuZGxlZCBcIik7XG4gICAgfVxufTtcblxuZnVuY3Rpb24gZm9ybWF0Tm9uRXJyb3Iob2JqKSB7XG4gICAgdmFyIHN0cjtcbiAgICBpZiAodHlwZW9mIG9iaiA9PT0gXCJmdW5jdGlvblwiKSB7XG4gICAgICAgIHN0ciA9IFwiW2Z1bmN0aW9uIFwiICtcbiAgICAgICAgICAgIChvYmoubmFtZSB8fCBcImFub255bW91c1wiKSArXG4gICAgICAgICAgICBcIl1cIjtcbiAgICB9IGVsc2Uge1xuICAgICAgICBzdHIgPSBvYmoudG9TdHJpbmcoKTtcbiAgICAgICAgdmFyIHJ1c2VsZXNzVG9TdHJpbmcgPSAvXFxbb2JqZWN0IFthLXpBLVowLTkkX10rXFxdLztcbiAgICAgICAgaWYgKHJ1c2VsZXNzVG9TdHJpbmcudGVzdChzdHIpKSB7XG4gICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgIHZhciBuZXdTdHIgPSBKU09OLnN0cmluZ2lmeShvYmopO1xuICAgICAgICAgICAgICAgIHN0ciA9IG5ld1N0cjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNhdGNoKGUpIHtcblxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGlmIChzdHIubGVuZ3RoID09PSAwKSB7XG4gICAgICAgICAgICBzdHIgPSBcIihlbXB0eSBhcnJheSlcIjtcbiAgICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gKFwiKDxcIiArIHNuaXAoc3RyKSArIFwiPiwgbm8gc3RhY2sgdHJhY2UpXCIpO1xufVxuXG5mdW5jdGlvbiBzbmlwKHN0cikge1xuICAgIHZhciBtYXhDaGFycyA9IDQxO1xuICAgIGlmIChzdHIubGVuZ3RoIDwgbWF4Q2hhcnMpIHtcbiAgICAgICAgcmV0dXJuIHN0cjtcbiAgICB9XG4gICAgcmV0dXJuIHN0ci5zdWJzdHIoMCwgbWF4Q2hhcnMgLSAzKSArIFwiLi4uXCI7XG59XG5cbnZhciBzaG91bGRJZ25vcmUgPSBmdW5jdGlvbigpIHsgcmV0dXJuIGZhbHNlOyB9O1xudmFyIHBhcnNlTGluZUluZm9SZWdleCA9IC9bXFwvPFxcKF0oW146XFwvXSspOihcXGQrKTooPzpcXGQrKVxcKT9cXHMqJC87XG5mdW5jdGlvbiBwYXJzZUxpbmVJbmZvKGxpbmUpIHtcbiAgICB2YXIgbWF0Y2hlcyA9IGxpbmUubWF0Y2gocGFyc2VMaW5lSW5mb1JlZ2V4KTtcbiAgICBpZiAobWF0Y2hlcykge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgZmlsZU5hbWU6IG1hdGNoZXNbMV0sXG4gICAgICAgICAgICBsaW5lOiBwYXJzZUludChtYXRjaGVzWzJdLCAxMClcbiAgICAgICAgfTtcbiAgICB9XG59XG5DYXB0dXJlZFRyYWNlLnNldEJvdW5kcyA9IGZ1bmN0aW9uKGZpcnN0TGluZUVycm9yLCBsYXN0TGluZUVycm9yKSB7XG4gICAgaWYgKCFDYXB0dXJlZFRyYWNlLmlzU3VwcG9ydGVkKCkpIHJldHVybjtcbiAgICB2YXIgZmlyc3RTdGFja0xpbmVzID0gZmlyc3RMaW5lRXJyb3Iuc3RhY2suc3BsaXQoXCJcXG5cIik7XG4gICAgdmFyIGxhc3RTdGFja0xpbmVzID0gbGFzdExpbmVFcnJvci5zdGFjay5zcGxpdChcIlxcblwiKTtcbiAgICB2YXIgZmlyc3RJbmRleCA9IC0xO1xuICAgIHZhciBsYXN0SW5kZXggPSAtMTtcbiAgICB2YXIgZmlyc3RGaWxlTmFtZTtcbiAgICB2YXIgbGFzdEZpbGVOYW1lO1xuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgZmlyc3RTdGFja0xpbmVzLmxlbmd0aDsgKytpKSB7XG4gICAgICAgIHZhciByZXN1bHQgPSBwYXJzZUxpbmVJbmZvKGZpcnN0U3RhY2tMaW5lc1tpXSk7XG4gICAgICAgIGlmIChyZXN1bHQpIHtcbiAgICAgICAgICAgIGZpcnN0RmlsZU5hbWUgPSByZXN1bHQuZmlsZU5hbWU7XG4gICAgICAgICAgICBmaXJzdEluZGV4ID0gcmVzdWx0LmxpbmU7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgfVxuICAgIH1cbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IGxhc3RTdGFja0xpbmVzLmxlbmd0aDsgKytpKSB7XG4gICAgICAgIHZhciByZXN1bHQgPSBwYXJzZUxpbmVJbmZvKGxhc3RTdGFja0xpbmVzW2ldKTtcbiAgICAgICAgaWYgKHJlc3VsdCkge1xuICAgICAgICAgICAgbGFzdEZpbGVOYW1lID0gcmVzdWx0LmZpbGVOYW1lO1xuICAgICAgICAgICAgbGFzdEluZGV4ID0gcmVzdWx0LmxpbmU7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgfVxuICAgIH1cbiAgICBpZiAoZmlyc3RJbmRleCA8IDAgfHwgbGFzdEluZGV4IDwgMCB8fCAhZmlyc3RGaWxlTmFtZSB8fCAhbGFzdEZpbGVOYW1lIHx8XG4gICAgICAgIGZpcnN0RmlsZU5hbWUgIT09IGxhc3RGaWxlTmFtZSB8fCBmaXJzdEluZGV4ID49IGxhc3RJbmRleCkge1xuICAgICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgc2hvdWxkSWdub3JlID0gZnVuY3Rpb24obGluZSkge1xuICAgICAgICBpZiAoYmx1ZWJpcmRGcmFtZVBhdHRlcm4udGVzdChsaW5lKSkgcmV0dXJuIHRydWU7XG4gICAgICAgIHZhciBpbmZvID0gcGFyc2VMaW5lSW5mbyhsaW5lKTtcbiAgICAgICAgaWYgKGluZm8pIHtcbiAgICAgICAgICAgIGlmIChpbmZvLmZpbGVOYW1lID09PSBmaXJzdEZpbGVOYW1lICYmXG4gICAgICAgICAgICAgICAgKGZpcnN0SW5kZXggPD0gaW5mby5saW5lICYmIGluZm8ubGluZSA8PSBsYXN0SW5kZXgpKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH07XG59O1xuXG52YXIgY2FwdHVyZVN0YWNrVHJhY2UgPSAoZnVuY3Rpb24gc3RhY2tEZXRlY3Rpb24oKSB7XG4gICAgdmFyIHY4c3RhY2tGcmFtZVBhdHRlcm4gPSAvXlxccyphdFxccyovO1xuICAgIHZhciB2OHN0YWNrRm9ybWF0dGVyID0gZnVuY3Rpb24oc3RhY2ssIGVycm9yKSB7XG4gICAgICAgIGlmICh0eXBlb2Ygc3RhY2sgPT09IFwic3RyaW5nXCIpIHJldHVybiBzdGFjaztcblxuICAgICAgICBpZiAoZXJyb3IubmFtZSAhPT0gdW5kZWZpbmVkICYmXG4gICAgICAgICAgICBlcnJvci5tZXNzYWdlICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIHJldHVybiBlcnJvci5uYW1lICsgXCIuIFwiICsgZXJyb3IubWVzc2FnZTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gZm9ybWF0Tm9uRXJyb3IoZXJyb3IpO1xuICAgIH07XG5cbiAgICBpZiAodHlwZW9mIEVycm9yLnN0YWNrVHJhY2VMaW1pdCA9PT0gXCJudW1iZXJcIiAmJlxuICAgICAgICB0eXBlb2YgRXJyb3IuY2FwdHVyZVN0YWNrVHJhY2UgPT09IFwiZnVuY3Rpb25cIikge1xuICAgICAgICBzdGFja0ZyYW1lUGF0dGVybiA9IHY4c3RhY2tGcmFtZVBhdHRlcm47XG4gICAgICAgIGZvcm1hdFN0YWNrID0gdjhzdGFja0Zvcm1hdHRlcjtcbiAgICAgICAgdmFyIGNhcHR1cmVTdGFja1RyYWNlID0gRXJyb3IuY2FwdHVyZVN0YWNrVHJhY2U7XG5cbiAgICAgICAgc2hvdWxkSWdub3JlID0gZnVuY3Rpb24obGluZSkge1xuICAgICAgICAgICAgcmV0dXJuIGJsdWViaXJkRnJhbWVQYXR0ZXJuLnRlc3QobGluZSk7XG4gICAgICAgIH07XG4gICAgICAgIHJldHVybiBmdW5jdGlvbihyZWNlaXZlciwgaWdub3JlVW50aWwpIHtcbiAgICAgICAgICAgIGNhcHR1cmVTdGFja1RyYWNlKHJlY2VpdmVyLCBpZ25vcmVVbnRpbCk7XG4gICAgICAgIH07XG4gICAgfVxuICAgIHZhciBlcnIgPSBuZXcgRXJyb3IoKTtcblxuICAgIGlmICh0eXBlb2YgZXJyLnN0YWNrID09PSBcInN0cmluZ1wiICYmXG4gICAgICAgIHR5cGVvZiBcIlwiLnN0YXJ0c1dpdGggPT09IFwiZnVuY3Rpb25cIiAmJlxuICAgICAgICAoZXJyLnN0YWNrLnN0YXJ0c1dpdGgoXCJzdGFja0RldGVjdGlvbkBcIikpICYmXG4gICAgICAgIHN0YWNrRGV0ZWN0aW9uLm5hbWUgPT09IFwic3RhY2tEZXRlY3Rpb25cIikge1xuXG4gICAgICAgIHN0YWNrRnJhbWVQYXR0ZXJuID0gL0AvO1xuICAgICAgICB2YXIgcmxpbmUgPSAvW0BcXG5dLztcblxuICAgICAgICBmb3JtYXRTdGFjayA9IGZ1bmN0aW9uKHN0YWNrLCBlcnJvcikge1xuICAgICAgICAgICAgaWYgKHR5cGVvZiBzdGFjayA9PT0gXCJzdHJpbmdcIikge1xuICAgICAgICAgICAgICAgIHJldHVybiAoZXJyb3IubmFtZSArIFwiLiBcIiArIGVycm9yLm1lc3NhZ2UgKyBcIlxcblwiICsgc3RhY2spO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBpZiAoZXJyb3IubmFtZSAhPT0gdW5kZWZpbmVkICYmXG4gICAgICAgICAgICAgICAgZXJyb3IubWVzc2FnZSAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGVycm9yLm5hbWUgKyBcIi4gXCIgKyBlcnJvci5tZXNzYWdlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIGZvcm1hdE5vbkVycm9yKGVycm9yKTtcbiAgICAgICAgfTtcblxuICAgICAgICByZXR1cm4gZnVuY3Rpb24gY2FwdHVyZVN0YWNrVHJhY2Uobykge1xuICAgICAgICAgICAgdmFyIHN0YWNrID0gbmV3IEVycm9yKCkuc3RhY2s7XG4gICAgICAgICAgICB2YXIgc3BsaXQgPSBzdGFjay5zcGxpdChybGluZSk7XG4gICAgICAgICAgICB2YXIgbGVuID0gc3BsaXQubGVuZ3RoO1xuICAgICAgICAgICAgdmFyIHJldCA9IFwiXCI7XG4gICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGxlbjsgaSArPSAyKSB7XG4gICAgICAgICAgICAgICAgcmV0ICs9IHNwbGl0W2ldO1xuICAgICAgICAgICAgICAgIHJldCArPSBcIkBcIjtcbiAgICAgICAgICAgICAgICByZXQgKz0gc3BsaXRbaSArIDFdO1xuICAgICAgICAgICAgICAgIHJldCArPSBcIlxcblwiO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgby5zdGFjayA9IHJldDtcbiAgICAgICAgfTtcbiAgICB9XG5cbiAgICB2YXIgaGFzU3RhY2tBZnRlclRocm93O1xuICAgIHRyeSB7IHRocm93IG5ldyBFcnJvcigpOyB9XG4gICAgY2F0Y2goZSkge1xuICAgICAgICBoYXNTdGFja0FmdGVyVGhyb3cgPSAoXCJzdGFja1wiIGluIGUpO1xuICAgIH1cbiAgICBpZiAoIShcInN0YWNrXCIgaW4gZXJyKSAmJiBoYXNTdGFja0FmdGVyVGhyb3cpIHtcbiAgICAgICAgc3RhY2tGcmFtZVBhdHRlcm4gPSB2OHN0YWNrRnJhbWVQYXR0ZXJuO1xuICAgICAgICBmb3JtYXRTdGFjayA9IHY4c3RhY2tGb3JtYXR0ZXI7XG4gICAgICAgIHJldHVybiBmdW5jdGlvbiBjYXB0dXJlU3RhY2tUcmFjZShvKSB7XG4gICAgICAgICAgICB0cnkgeyB0aHJvdyBuZXcgRXJyb3IoKTsgfVxuICAgICAgICAgICAgY2F0Y2goZSkgeyBvLnN0YWNrID0gZS5zdGFjazsgfVxuICAgICAgICB9O1xuICAgIH1cblxuICAgIGZvcm1hdFN0YWNrID0gZnVuY3Rpb24oc3RhY2ssIGVycm9yKSB7XG4gICAgICAgIGlmICh0eXBlb2Ygc3RhY2sgPT09IFwic3RyaW5nXCIpIHJldHVybiBzdGFjaztcblxuICAgICAgICBpZiAoKHR5cGVvZiBlcnJvciA9PT0gXCJvYmplY3RcIiB8fFxuICAgICAgICAgICAgdHlwZW9mIGVycm9yID09PSBcImZ1bmN0aW9uXCIpICYmXG4gICAgICAgICAgICBlcnJvci5uYW1lICE9PSB1bmRlZmluZWQgJiZcbiAgICAgICAgICAgIGVycm9yLm1lc3NhZ2UgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgcmV0dXJuIGVycm9yLm5hbWUgKyBcIi4gXCIgKyBlcnJvci5tZXNzYWdlO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBmb3JtYXROb25FcnJvcihlcnJvcik7XG4gICAgfTtcblxuICAgIHJldHVybiBudWxsO1xuXG59KSgpO1xuXG52YXIgZmlyZUdsb2JhbEV2ZW50ID0gKGZ1bmN0aW9uKCkge1xuICAgIGlmICh0eXBlb2YgcHJvY2VzcyAhPT0gXCJ1bmRlZmluZWRcIiAmJlxuICAgICAgICB0eXBlb2YgcHJvY2Vzcy52ZXJzaW9uID09PSBcInN0cmluZ1wiICYmXG4gICAgICAgIHR5cGVvZiB3aW5kb3cgPT09IFwidW5kZWZpbmVkXCIpIHtcbiAgICAgICAgcmV0dXJuIGZ1bmN0aW9uKG5hbWUsIHJlYXNvbiwgcHJvbWlzZSkge1xuICAgICAgICAgICAgaWYgKG5hbWUgPT09IFwicmVqZWN0aW9uSGFuZGxlZFwiKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHByb2Nlc3MuZW1pdChuYW1lLCBwcm9taXNlKTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHByb2Nlc3MuZW1pdChuYW1lLCByZWFzb24sIHByb21pc2UpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgIH0gZWxzZSB7XG4gICAgICAgIHZhciB0b1dpbmRvd01ldGhvZE5hbWVNYXAgPSB7fTtcbiAgICAgICAgdG9XaW5kb3dNZXRob2ROYW1lTWFwW1widW5oYW5kbGVkUmVqZWN0aW9uXCJdID0gKFwib25cIiArXG4gICAgICAgICAgICBcInVuaGFuZGxlZFJlamVjdGlvblwiKS50b0xvd2VyQ2FzZSgpO1xuICAgICAgICB0b1dpbmRvd01ldGhvZE5hbWVNYXBbXCJyZWplY3Rpb25IYW5kbGVkXCJdID0gKFwib25cIiArXG4gICAgICAgICAgICBcInJlamVjdGlvbkhhbmRsZWRcIikudG9Mb3dlckNhc2UoKTtcblxuICAgICAgICByZXR1cm4gZnVuY3Rpb24obmFtZSwgcmVhc29uLCBwcm9taXNlKSB7XG4gICAgICAgICAgICB2YXIgbWV0aG9kTmFtZSA9IHRvV2luZG93TWV0aG9kTmFtZU1hcFtuYW1lXTtcbiAgICAgICAgICAgIHZhciBtZXRob2QgPSB3aW5kb3dbbWV0aG9kTmFtZV07XG4gICAgICAgICAgICBpZiAoIW1ldGhvZCkgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgICAgaWYgKG5hbWUgPT09IFwicmVqZWN0aW9uSGFuZGxlZFwiKSB7XG4gICAgICAgICAgICAgICAgbWV0aG9kLmNhbGwod2luZG93LCBwcm9taXNlKTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgbWV0aG9kLmNhbGwod2luZG93LCByZWFzb24sIHByb21pc2UpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgIH07XG4gICAgfVxufSkoKTtcblxucmV0dXJuIENhcHR1cmVkVHJhY2U7XG59O1xuXG59KS5jYWxsKHRoaXMscmVxdWlyZSgnX3Byb2Nlc3MnKSkiLCJcInVzZSBzdHJpY3RcIjtcbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24oTkVYVF9GSUxURVIpIHtcbnZhciB1dGlsID0gcmVxdWlyZShcIi4vdXRpbC5qc1wiKTtcbnZhciBlcnJvcnMgPSByZXF1aXJlKFwiLi9lcnJvcnMuanNcIik7XG52YXIgdHJ5Q2F0Y2gxID0gdXRpbC50cnlDYXRjaDE7XG52YXIgZXJyb3JPYmogPSB1dGlsLmVycm9yT2JqO1xudmFyIGtleXMgPSByZXF1aXJlKFwiLi9lczUuanNcIikua2V5cztcbnZhciBUeXBlRXJyb3IgPSBlcnJvcnMuVHlwZUVycm9yO1xuXG5mdW5jdGlvbiBDYXRjaEZpbHRlcihpbnN0YW5jZXMsIGNhbGxiYWNrLCBwcm9taXNlKSB7XG4gICAgdGhpcy5faW5zdGFuY2VzID0gaW5zdGFuY2VzO1xuICAgIHRoaXMuX2NhbGxiYWNrID0gY2FsbGJhY2s7XG4gICAgdGhpcy5fcHJvbWlzZSA9IHByb21pc2U7XG59XG5cbmZ1bmN0aW9uIHNhZmVQcmVkaWNhdGUocHJlZGljYXRlLCBlKSB7XG4gICAgdmFyIHNhZmVPYmplY3QgPSB7fTtcbiAgICB2YXIgcmV0ZmlsdGVyID0gdHJ5Q2F0Y2gxKHByZWRpY2F0ZSwgc2FmZU9iamVjdCwgZSk7XG5cbiAgICBpZiAocmV0ZmlsdGVyID09PSBlcnJvck9iaikgcmV0dXJuIHJldGZpbHRlcjtcblxuICAgIHZhciBzYWZlS2V5cyA9IGtleXMoc2FmZU9iamVjdCk7XG4gICAgaWYgKHNhZmVLZXlzLmxlbmd0aCkge1xuICAgICAgICBlcnJvck9iai5lID0gbmV3IFR5cGVFcnJvcihcIkNhdGNoIGZpbHRlciBtdXN0IGluaGVyaXQgZnJvbSBFcnJvciBvciBiZSBhIHNpbXBsZSBwcmVkaWNhdGUgZnVuY3Rpb25cXHUwMDBhXFx1MDAwYSAgICBTZWUgaHR0cDovL2dvby5nbC9vODRvNjhcXHUwMDBhXCIpO1xuICAgICAgICByZXR1cm4gZXJyb3JPYmo7XG4gICAgfVxuICAgIHJldHVybiByZXRmaWx0ZXI7XG59XG5cbkNhdGNoRmlsdGVyLnByb3RvdHlwZS5kb0ZpbHRlciA9IGZ1bmN0aW9uIChlKSB7XG4gICAgdmFyIGNiID0gdGhpcy5fY2FsbGJhY2s7XG4gICAgdmFyIHByb21pc2UgPSB0aGlzLl9wcm9taXNlO1xuICAgIHZhciBib3VuZFRvID0gcHJvbWlzZS5fYm91bmRUbztcbiAgICBmb3IgKHZhciBpID0gMCwgbGVuID0gdGhpcy5faW5zdGFuY2VzLmxlbmd0aDsgaSA8IGxlbjsgKytpKSB7XG4gICAgICAgIHZhciBpdGVtID0gdGhpcy5faW5zdGFuY2VzW2ldO1xuICAgICAgICB2YXIgaXRlbUlzRXJyb3JUeXBlID0gaXRlbSA9PT0gRXJyb3IgfHxcbiAgICAgICAgICAgIChpdGVtICE9IG51bGwgJiYgaXRlbS5wcm90b3R5cGUgaW5zdGFuY2VvZiBFcnJvcik7XG5cbiAgICAgICAgaWYgKGl0ZW1Jc0Vycm9yVHlwZSAmJiBlIGluc3RhbmNlb2YgaXRlbSkge1xuICAgICAgICAgICAgdmFyIHJldCA9IHRyeUNhdGNoMShjYiwgYm91bmRUbywgZSk7XG4gICAgICAgICAgICBpZiAocmV0ID09PSBlcnJvck9iaikge1xuICAgICAgICAgICAgICAgIE5FWFRfRklMVEVSLmUgPSByZXQuZTtcbiAgICAgICAgICAgICAgICByZXR1cm4gTkVYVF9GSUxURVI7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gcmV0O1xuICAgICAgICB9IGVsc2UgaWYgKHR5cGVvZiBpdGVtID09PSBcImZ1bmN0aW9uXCIgJiYgIWl0ZW1Jc0Vycm9yVHlwZSkge1xuICAgICAgICAgICAgdmFyIHNob3VsZEhhbmRsZSA9IHNhZmVQcmVkaWNhdGUoaXRlbSwgZSk7XG4gICAgICAgICAgICBpZiAoc2hvdWxkSGFuZGxlID09PSBlcnJvck9iaikge1xuICAgICAgICAgICAgICAgIHZhciB0cmFjZSA9IGVycm9ycy5jYW5BdHRhY2hUcmFjZShlcnJvck9iai5lKVxuICAgICAgICAgICAgICAgICAgICA/IGVycm9yT2JqLmVcbiAgICAgICAgICAgICAgICAgICAgOiBuZXcgRXJyb3IodXRpbC50b1N0cmluZyhlcnJvck9iai5lKSk7XG4gICAgICAgICAgICAgICAgdGhpcy5fcHJvbWlzZS5fYXR0YWNoRXh0cmFUcmFjZSh0cmFjZSk7XG4gICAgICAgICAgICAgICAgZSA9IGVycm9yT2JqLmU7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICB9IGVsc2UgaWYgKHNob3VsZEhhbmRsZSkge1xuICAgICAgICAgICAgICAgIHZhciByZXQgPSB0cnlDYXRjaDEoY2IsIGJvdW5kVG8sIGUpO1xuICAgICAgICAgICAgICAgIGlmIChyZXQgPT09IGVycm9yT2JqKSB7XG4gICAgICAgICAgICAgICAgICAgIE5FWFRfRklMVEVSLmUgPSByZXQuZTtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIE5FWFRfRklMVEVSO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICByZXR1cm4gcmV0O1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuICAgIE5FWFRfRklMVEVSLmUgPSBlO1xuICAgIHJldHVybiBORVhUX0ZJTFRFUjtcbn07XG5cbnJldHVybiBDYXRjaEZpbHRlcjtcbn07XG4iLCJcInVzZSBzdHJpY3RcIjtcbnZhciB1dGlsID0gcmVxdWlyZShcIi4vdXRpbC5qc1wiKTtcbnZhciBpc1ByaW1pdGl2ZSA9IHV0aWwuaXNQcmltaXRpdmU7XG52YXIgd3JhcHNQcmltaXRpdmVSZWNlaXZlciA9IHV0aWwud3JhcHNQcmltaXRpdmVSZWNlaXZlcjtcblxubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbihQcm9taXNlKSB7XG52YXIgcmV0dXJuZXIgPSBmdW5jdGlvbiAoKSB7XG4gICAgcmV0dXJuIHRoaXM7XG59O1xudmFyIHRocm93ZXIgPSBmdW5jdGlvbiAoKSB7XG4gICAgdGhyb3cgdGhpcztcbn07XG5cbnZhciB3cmFwcGVyID0gZnVuY3Rpb24gKHZhbHVlLCBhY3Rpb24pIHtcbiAgICBpZiAoYWN0aW9uID09PSAxKSB7XG4gICAgICAgIHJldHVybiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB0aHJvdyB2YWx1ZTtcbiAgICAgICAgfTtcbiAgICB9IGVsc2UgaWYgKGFjdGlvbiA9PT0gMikge1xuICAgICAgICByZXR1cm4gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuIHZhbHVlO1xuICAgICAgICB9O1xuICAgIH1cbn07XG5cblxuUHJvbWlzZS5wcm90b3R5cGVbXCJyZXR1cm5cIl0gPVxuUHJvbWlzZS5wcm90b3R5cGUudGhlblJldHVybiA9IGZ1bmN0aW9uICh2YWx1ZSkge1xuICAgIGlmICh3cmFwc1ByaW1pdGl2ZVJlY2VpdmVyICYmIGlzUHJpbWl0aXZlKHZhbHVlKSkge1xuICAgICAgICByZXR1cm4gdGhpcy5fdGhlbihcbiAgICAgICAgICAgIHdyYXBwZXIodmFsdWUsIDIpLFxuICAgICAgICAgICAgdW5kZWZpbmVkLFxuICAgICAgICAgICAgdW5kZWZpbmVkLFxuICAgICAgICAgICAgdW5kZWZpbmVkLFxuICAgICAgICAgICAgdW5kZWZpbmVkXG4gICAgICAgKTtcbiAgICB9XG4gICAgcmV0dXJuIHRoaXMuX3RoZW4ocmV0dXJuZXIsIHVuZGVmaW5lZCwgdW5kZWZpbmVkLCB2YWx1ZSwgdW5kZWZpbmVkKTtcbn07XG5cblByb21pc2UucHJvdG90eXBlW1widGhyb3dcIl0gPVxuUHJvbWlzZS5wcm90b3R5cGUudGhlblRocm93ID0gZnVuY3Rpb24gKHJlYXNvbikge1xuICAgIGlmICh3cmFwc1ByaW1pdGl2ZVJlY2VpdmVyICYmIGlzUHJpbWl0aXZlKHJlYXNvbikpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX3RoZW4oXG4gICAgICAgICAgICB3cmFwcGVyKHJlYXNvbiwgMSksXG4gICAgICAgICAgICB1bmRlZmluZWQsXG4gICAgICAgICAgICB1bmRlZmluZWQsXG4gICAgICAgICAgICB1bmRlZmluZWQsXG4gICAgICAgICAgICB1bmRlZmluZWRcbiAgICAgICApO1xuICAgIH1cbiAgICByZXR1cm4gdGhpcy5fdGhlbih0aHJvd2VyLCB1bmRlZmluZWQsIHVuZGVmaW5lZCwgcmVhc29uLCB1bmRlZmluZWQpO1xufTtcbn07XG4iLCJcInVzZSBzdHJpY3RcIjtcbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24oUHJvbWlzZSwgSU5URVJOQUwpIHtcbnZhciBQcm9taXNlUmVkdWNlID0gUHJvbWlzZS5yZWR1Y2U7XG5cblByb21pc2UucHJvdG90eXBlLmVhY2ggPSBmdW5jdGlvbiAoZm4pIHtcbiAgICByZXR1cm4gUHJvbWlzZVJlZHVjZSh0aGlzLCBmbiwgbnVsbCwgSU5URVJOQUwpO1xufTtcblxuUHJvbWlzZS5lYWNoID0gZnVuY3Rpb24gKHByb21pc2VzLCBmbikge1xuICAgIHJldHVybiBQcm9taXNlUmVkdWNlKHByb21pc2VzLCBmbiwgbnVsbCwgSU5URVJOQUwpO1xufTtcbn07XG4iLCJcInVzZSBzdHJpY3RcIjtcbnZhciBPYmplY3RmcmVlemUgPSByZXF1aXJlKFwiLi9lczUuanNcIikuZnJlZXplO1xudmFyIHByb3BlcnR5SXNXcml0YWJsZSA9IHJlcXVpcmUoXCIuL2VzNS5qc1wiKS5wcm9wZXJ0eUlzV3JpdGFibGU7XG52YXIgdXRpbCA9IHJlcXVpcmUoXCIuL3V0aWwuanNcIik7XG52YXIgaW5oZXJpdHMgPSB1dGlsLmluaGVyaXRzO1xudmFyIG5vdEVudW1lcmFibGVQcm9wID0gdXRpbC5ub3RFbnVtZXJhYmxlUHJvcDtcblxuZnVuY3Rpb24gbWFya0FzT3JpZ2luYXRpbmdGcm9tUmVqZWN0aW9uKGUpIHtcbiAgICB0cnkge1xuICAgICAgICBub3RFbnVtZXJhYmxlUHJvcChlLCBcImlzT3BlcmF0aW9uYWxcIiwgdHJ1ZSk7XG4gICAgfVxuICAgIGNhdGNoKGlnbm9yZSkge31cbn1cblxuZnVuY3Rpb24gb3JpZ2luYXRlc0Zyb21SZWplY3Rpb24oZSkge1xuICAgIGlmIChlID09IG51bGwpIHJldHVybiBmYWxzZTtcbiAgICByZXR1cm4gKChlIGluc3RhbmNlb2YgT3BlcmF0aW9uYWxFcnJvcikgfHxcbiAgICAgICAgZVtcImlzT3BlcmF0aW9uYWxcIl0gPT09IHRydWUpO1xufVxuXG5mdW5jdGlvbiBpc0Vycm9yKG9iaikge1xuICAgIHJldHVybiBvYmogaW5zdGFuY2VvZiBFcnJvcjtcbn1cblxuZnVuY3Rpb24gY2FuQXR0YWNoVHJhY2Uob2JqKSB7XG4gICAgcmV0dXJuIGlzRXJyb3Iob2JqKSAmJiBwcm9wZXJ0eUlzV3JpdGFibGUob2JqLCBcInN0YWNrXCIpO1xufVxuXG5mdW5jdGlvbiBzdWJFcnJvcihuYW1lUHJvcGVydHksIGRlZmF1bHRNZXNzYWdlKSB7XG4gICAgZnVuY3Rpb24gU3ViRXJyb3IobWVzc2FnZSkge1xuICAgICAgICBpZiAoISh0aGlzIGluc3RhbmNlb2YgU3ViRXJyb3IpKSByZXR1cm4gbmV3IFN1YkVycm9yKG1lc3NhZ2UpO1xuICAgICAgICBub3RFbnVtZXJhYmxlUHJvcCh0aGlzLCBcIm1lc3NhZ2VcIixcbiAgICAgICAgICAgIHR5cGVvZiBtZXNzYWdlID09PSBcInN0cmluZ1wiID8gbWVzc2FnZSA6IGRlZmF1bHRNZXNzYWdlKTtcbiAgICAgICAgbm90RW51bWVyYWJsZVByb3AodGhpcywgXCJuYW1lXCIsIG5hbWVQcm9wZXJ0eSk7XG4gICAgICAgIGlmIChFcnJvci5jYXB0dXJlU3RhY2tUcmFjZSkge1xuICAgICAgICAgICAgRXJyb3IuY2FwdHVyZVN0YWNrVHJhY2UodGhpcywgdGhpcy5jb25zdHJ1Y3Rvcik7XG4gICAgICAgIH1cbiAgICB9XG4gICAgaW5oZXJpdHMoU3ViRXJyb3IsIEVycm9yKTtcbiAgICByZXR1cm4gU3ViRXJyb3I7XG59XG5cbnZhciBfVHlwZUVycm9yLCBfUmFuZ2VFcnJvcjtcbnZhciBDYW5jZWxsYXRpb25FcnJvciA9IHN1YkVycm9yKFwiQ2FuY2VsbGF0aW9uRXJyb3JcIiwgXCJjYW5jZWxsYXRpb24gZXJyb3JcIik7XG52YXIgVGltZW91dEVycm9yID0gc3ViRXJyb3IoXCJUaW1lb3V0RXJyb3JcIiwgXCJ0aW1lb3V0IGVycm9yXCIpO1xudmFyIEFnZ3JlZ2F0ZUVycm9yID0gc3ViRXJyb3IoXCJBZ2dyZWdhdGVFcnJvclwiLCBcImFnZ3JlZ2F0ZSBlcnJvclwiKTtcbnRyeSB7XG4gICAgX1R5cGVFcnJvciA9IFR5cGVFcnJvcjtcbiAgICBfUmFuZ2VFcnJvciA9IFJhbmdlRXJyb3I7XG59IGNhdGNoKGUpIHtcbiAgICBfVHlwZUVycm9yID0gc3ViRXJyb3IoXCJUeXBlRXJyb3JcIiwgXCJ0eXBlIGVycm9yXCIpO1xuICAgIF9SYW5nZUVycm9yID0gc3ViRXJyb3IoXCJSYW5nZUVycm9yXCIsIFwicmFuZ2UgZXJyb3JcIik7XG59XG5cbnZhciBtZXRob2RzID0gKFwiam9pbiBwb3AgcHVzaCBzaGlmdCB1bnNoaWZ0IHNsaWNlIGZpbHRlciBmb3JFYWNoIHNvbWUgXCIgK1xuICAgIFwiZXZlcnkgbWFwIGluZGV4T2YgbGFzdEluZGV4T2YgcmVkdWNlIHJlZHVjZVJpZ2h0IHNvcnQgcmV2ZXJzZVwiKS5zcGxpdChcIiBcIik7XG5cbmZvciAodmFyIGkgPSAwOyBpIDwgbWV0aG9kcy5sZW5ndGg7ICsraSkge1xuICAgIGlmICh0eXBlb2YgQXJyYXkucHJvdG90eXBlW21ldGhvZHNbaV1dID09PSBcImZ1bmN0aW9uXCIpIHtcbiAgICAgICAgQWdncmVnYXRlRXJyb3IucHJvdG90eXBlW21ldGhvZHNbaV1dID0gQXJyYXkucHJvdG90eXBlW21ldGhvZHNbaV1dO1xuICAgIH1cbn1cblxuQWdncmVnYXRlRXJyb3IucHJvdG90eXBlLmxlbmd0aCA9IDA7XG5BZ2dyZWdhdGVFcnJvci5wcm90b3R5cGVbXCJpc09wZXJhdGlvbmFsXCJdID0gdHJ1ZTtcbnZhciBsZXZlbCA9IDA7XG5BZ2dyZWdhdGVFcnJvci5wcm90b3R5cGUudG9TdHJpbmcgPSBmdW5jdGlvbigpIHtcbiAgICB2YXIgaW5kZW50ID0gQXJyYXkobGV2ZWwgKiA0ICsgMSkuam9pbihcIiBcIik7XG4gICAgdmFyIHJldCA9IFwiXFxuXCIgKyBpbmRlbnQgKyBcIkFnZ3JlZ2F0ZUVycm9yIG9mOlwiICsgXCJcXG5cIjtcbiAgICBsZXZlbCsrO1xuICAgIGluZGVudCA9IEFycmF5KGxldmVsICogNCArIDEpLmpvaW4oXCIgXCIpO1xuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgdGhpcy5sZW5ndGg7ICsraSkge1xuICAgICAgICB2YXIgc3RyID0gdGhpc1tpXSA9PT0gdGhpcyA/IFwiW0NpcmN1bGFyIEFnZ3JlZ2F0ZUVycm9yXVwiIDogdGhpc1tpXSArIFwiXCI7XG4gICAgICAgIHZhciBsaW5lcyA9IHN0ci5zcGxpdChcIlxcblwiKTtcbiAgICAgICAgZm9yICh2YXIgaiA9IDA7IGogPCBsaW5lcy5sZW5ndGg7ICsraikge1xuICAgICAgICAgICAgbGluZXNbal0gPSBpbmRlbnQgKyBsaW5lc1tqXTtcbiAgICAgICAgfVxuICAgICAgICBzdHIgPSBsaW5lcy5qb2luKFwiXFxuXCIpO1xuICAgICAgICByZXQgKz0gc3RyICsgXCJcXG5cIjtcbiAgICB9XG4gICAgbGV2ZWwtLTtcbiAgICByZXR1cm4gcmV0O1xufTtcblxuZnVuY3Rpb24gT3BlcmF0aW9uYWxFcnJvcihtZXNzYWdlKSB7XG4gICAgbm90RW51bWVyYWJsZVByb3AodGhpcywgXCJuYW1lXCIsIFwiT3BlcmF0aW9uYWxFcnJvclwiKTtcbiAgICBub3RFbnVtZXJhYmxlUHJvcCh0aGlzLCBcIm1lc3NhZ2VcIiwgbWVzc2FnZSk7XG4gICAgdGhpcy5jYXVzZSA9IG1lc3NhZ2U7XG4gICAgdGhpc1tcImlzT3BlcmF0aW9uYWxcIl0gPSB0cnVlO1xuXG4gICAgaWYgKG1lc3NhZ2UgaW5zdGFuY2VvZiBFcnJvcikge1xuICAgICAgICBub3RFbnVtZXJhYmxlUHJvcCh0aGlzLCBcIm1lc3NhZ2VcIiwgbWVzc2FnZS5tZXNzYWdlKTtcbiAgICAgICAgbm90RW51bWVyYWJsZVByb3AodGhpcywgXCJzdGFja1wiLCBtZXNzYWdlLnN0YWNrKTtcbiAgICB9IGVsc2UgaWYgKEVycm9yLmNhcHR1cmVTdGFja1RyYWNlKSB7XG4gICAgICAgIEVycm9yLmNhcHR1cmVTdGFja1RyYWNlKHRoaXMsIHRoaXMuY29uc3RydWN0b3IpO1xuICAgIH1cblxufVxuaW5oZXJpdHMoT3BlcmF0aW9uYWxFcnJvciwgRXJyb3IpO1xuXG52YXIga2V5ID0gXCJfX0JsdWViaXJkRXJyb3JUeXBlc19fXCI7XG52YXIgZXJyb3JUeXBlcyA9IEVycm9yW2tleV07XG5pZiAoIWVycm9yVHlwZXMpIHtcbiAgICBlcnJvclR5cGVzID0gT2JqZWN0ZnJlZXplKHtcbiAgICAgICAgQ2FuY2VsbGF0aW9uRXJyb3I6IENhbmNlbGxhdGlvbkVycm9yLFxuICAgICAgICBUaW1lb3V0RXJyb3I6IFRpbWVvdXRFcnJvcixcbiAgICAgICAgT3BlcmF0aW9uYWxFcnJvcjogT3BlcmF0aW9uYWxFcnJvcixcbiAgICAgICAgUmVqZWN0aW9uRXJyb3I6IE9wZXJhdGlvbmFsRXJyb3IsXG4gICAgICAgIEFnZ3JlZ2F0ZUVycm9yOiBBZ2dyZWdhdGVFcnJvclxuICAgIH0pO1xuICAgIG5vdEVudW1lcmFibGVQcm9wKEVycm9yLCBrZXksIGVycm9yVHlwZXMpO1xufVxuXG52YXIgZW5zdXJlRXJyb3JPYmplY3QgPSAoZnVuY3Rpb24oKSB7XG4gICAgaWYgKCEoXCJzdGFja1wiIGluIG5ldyBFcnJvcigpKSkge1xuICAgICAgICByZXR1cm4gZnVuY3Rpb24odmFsdWUpIHtcbiAgICAgICAgICAgIGlmIChjYW5BdHRhY2hUcmFjZSh2YWx1ZSkpIHJldHVybiB2YWx1ZTtcbiAgICAgICAgICAgIHRyeSB7dGhyb3cgbmV3IEVycm9yKHV0aWwudG9TdHJpbmcodmFsdWUpKTt9XG4gICAgICAgICAgICBjYXRjaChlcnIpIHtyZXR1cm4gZXJyO31cbiAgICAgICAgfTtcbiAgICB9IGVsc2Uge1xuICAgICAgICByZXR1cm4gZnVuY3Rpb24odmFsdWUpIHtcbiAgICAgICAgICAgIGlmIChjYW5BdHRhY2hUcmFjZSh2YWx1ZSkpIHJldHVybiB2YWx1ZTtcbiAgICAgICAgICAgIHJldHVybiBuZXcgRXJyb3IodXRpbC50b1N0cmluZyh2YWx1ZSkpO1xuICAgICAgICB9O1xuICAgIH1cbn0pKCk7XG5cbm1vZHVsZS5leHBvcnRzID0ge1xuICAgIEVycm9yOiBFcnJvcixcbiAgICBUeXBlRXJyb3I6IF9UeXBlRXJyb3IsXG4gICAgUmFuZ2VFcnJvcjogX1JhbmdlRXJyb3IsXG4gICAgQ2FuY2VsbGF0aW9uRXJyb3I6IGVycm9yVHlwZXMuQ2FuY2VsbGF0aW9uRXJyb3IsXG4gICAgT3BlcmF0aW9uYWxFcnJvcjogZXJyb3JUeXBlcy5PcGVyYXRpb25hbEVycm9yLFxuICAgIFRpbWVvdXRFcnJvcjogZXJyb3JUeXBlcy5UaW1lb3V0RXJyb3IsXG4gICAgQWdncmVnYXRlRXJyb3I6IGVycm9yVHlwZXMuQWdncmVnYXRlRXJyb3IsXG4gICAgb3JpZ2luYXRlc0Zyb21SZWplY3Rpb246IG9yaWdpbmF0ZXNGcm9tUmVqZWN0aW9uLFxuICAgIG1hcmtBc09yaWdpbmF0aW5nRnJvbVJlamVjdGlvbjogbWFya0FzT3JpZ2luYXRpbmdGcm9tUmVqZWN0aW9uLFxuICAgIGNhbkF0dGFjaFRyYWNlOiBjYW5BdHRhY2hUcmFjZSxcbiAgICBlbnN1cmVFcnJvck9iamVjdDogZW5zdXJlRXJyb3JPYmplY3Rcbn07XG4iLCJcInVzZSBzdHJpY3RcIjtcbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24oUHJvbWlzZSkge1xudmFyIFR5cGVFcnJvciA9IHJlcXVpcmUoXCIuL2Vycm9ycy5qc1wiKS5UeXBlRXJyb3I7XG5cbmZ1bmN0aW9uIGFwaVJlamVjdGlvbihtc2cpIHtcbiAgICB2YXIgZXJyb3IgPSBuZXcgVHlwZUVycm9yKG1zZyk7XG4gICAgdmFyIHJldCA9IFByb21pc2UucmVqZWN0KGVycm9yKTtcbiAgICB2YXIgcGFyZW50ID0gcmV0Ll9wZWVrQ29udGV4dCgpO1xuICAgIGlmIChwYXJlbnQgIT0gbnVsbCkge1xuICAgICAgICBwYXJlbnQuYXR0YWNoRXh0cmFUcmFjZShlcnJvcik7XG4gICAgfVxuICAgIHJldHVybiByZXQ7XG59XG5cbnJldHVybiBhcGlSZWplY3Rpb247XG59O1xuIiwidmFyIGlzRVM1ID0gKGZ1bmN0aW9uKCl7XG4gICAgXCJ1c2Ugc3RyaWN0XCI7XG4gICAgcmV0dXJuIHRoaXMgPT09IHVuZGVmaW5lZDtcbn0pKCk7XG5cbmlmIChpc0VTNSkge1xuICAgIG1vZHVsZS5leHBvcnRzID0ge1xuICAgICAgICBmcmVlemU6IE9iamVjdC5mcmVlemUsXG4gICAgICAgIGRlZmluZVByb3BlcnR5OiBPYmplY3QuZGVmaW5lUHJvcGVydHksXG4gICAgICAgIGtleXM6IE9iamVjdC5rZXlzLFxuICAgICAgICBnZXRQcm90b3R5cGVPZjogT2JqZWN0LmdldFByb3RvdHlwZU9mLFxuICAgICAgICBpc0FycmF5OiBBcnJheS5pc0FycmF5LFxuICAgICAgICBpc0VTNTogaXNFUzUsXG4gICAgICAgIHByb3BlcnR5SXNXcml0YWJsZTogZnVuY3Rpb24ob2JqLCBwcm9wKSB7XG4gICAgICAgICAgICB2YXIgZGVzY3JpcHRvciA9IE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3Iob2JqLCBwcm9wKTtcbiAgICAgICAgICAgIHJldHVybiAhISghZGVzY3JpcHRvciB8fCBkZXNjcmlwdG9yLndyaXRhYmxlIHx8IGRlc2NyaXB0b3Iuc2V0KTtcbiAgICAgICAgfVxuICAgIH07XG59IGVsc2Uge1xuICAgIHZhciBoYXMgPSB7fS5oYXNPd25Qcm9wZXJ0eTtcbiAgICB2YXIgc3RyID0ge30udG9TdHJpbmc7XG4gICAgdmFyIHByb3RvID0ge30uY29uc3RydWN0b3IucHJvdG90eXBlO1xuXG4gICAgdmFyIE9iamVjdEtleXMgPSBmdW5jdGlvbiAobykge1xuICAgICAgICB2YXIgcmV0ID0gW107XG4gICAgICAgIGZvciAodmFyIGtleSBpbiBvKSB7XG4gICAgICAgICAgICBpZiAoaGFzLmNhbGwobywga2V5KSkge1xuICAgICAgICAgICAgICAgIHJldC5wdXNoKGtleSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHJldDtcbiAgICB9O1xuXG4gICAgdmFyIE9iamVjdERlZmluZVByb3BlcnR5ID0gZnVuY3Rpb24gKG8sIGtleSwgZGVzYykge1xuICAgICAgICBvW2tleV0gPSBkZXNjLnZhbHVlO1xuICAgICAgICByZXR1cm4gbztcbiAgICB9O1xuXG4gICAgdmFyIE9iamVjdEZyZWV6ZSA9IGZ1bmN0aW9uIChvYmopIHtcbiAgICAgICAgcmV0dXJuIG9iajtcbiAgICB9O1xuXG4gICAgdmFyIE9iamVjdEdldFByb3RvdHlwZU9mID0gZnVuY3Rpb24gKG9iaikge1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgcmV0dXJuIE9iamVjdChvYmopLmNvbnN0cnVjdG9yLnByb3RvdHlwZTtcbiAgICAgICAgfVxuICAgICAgICBjYXRjaCAoZSkge1xuICAgICAgICAgICAgcmV0dXJuIHByb3RvO1xuICAgICAgICB9XG4gICAgfTtcblxuICAgIHZhciBBcnJheUlzQXJyYXkgPSBmdW5jdGlvbiAob2JqKSB7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICByZXR1cm4gc3RyLmNhbGwob2JqKSA9PT0gXCJbb2JqZWN0IEFycmF5XVwiO1xuICAgICAgICB9XG4gICAgICAgIGNhdGNoKGUpIHtcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfVxuICAgIH07XG5cbiAgICBtb2R1bGUuZXhwb3J0cyA9IHtcbiAgICAgICAgaXNBcnJheTogQXJyYXlJc0FycmF5LFxuICAgICAgICBrZXlzOiBPYmplY3RLZXlzLFxuICAgICAgICBkZWZpbmVQcm9wZXJ0eTogT2JqZWN0RGVmaW5lUHJvcGVydHksXG4gICAgICAgIGZyZWV6ZTogT2JqZWN0RnJlZXplLFxuICAgICAgICBnZXRQcm90b3R5cGVPZjogT2JqZWN0R2V0UHJvdG90eXBlT2YsXG4gICAgICAgIGlzRVM1OiBpc0VTNSxcbiAgICAgICAgcHJvcGVydHlJc1dyaXRhYmxlOiBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICB9XG4gICAgfTtcbn1cbiIsIlwidXNlIHN0cmljdFwiO1xubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbihQcm9taXNlLCBJTlRFUk5BTCkge1xudmFyIFByb21pc2VNYXAgPSBQcm9taXNlLm1hcDtcblxuUHJvbWlzZS5wcm90b3R5cGUuZmlsdGVyID0gZnVuY3Rpb24gKGZuLCBvcHRpb25zKSB7XG4gICAgcmV0dXJuIFByb21pc2VNYXAodGhpcywgZm4sIG9wdGlvbnMsIElOVEVSTkFMKTtcbn07XG5cblByb21pc2UuZmlsdGVyID0gZnVuY3Rpb24gKHByb21pc2VzLCBmbiwgb3B0aW9ucykge1xuICAgIHJldHVybiBQcm9taXNlTWFwKHByb21pc2VzLCBmbiwgb3B0aW9ucywgSU5URVJOQUwpO1xufTtcbn07XG4iLCJcInVzZSBzdHJpY3RcIjtcbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24oUHJvbWlzZSwgTkVYVF9GSUxURVIsIHRyeUNvbnZlcnRUb1Byb21pc2UpIHtcbnZhciB1dGlsID0gcmVxdWlyZShcIi4vdXRpbC5qc1wiKTtcbnZhciB3cmFwc1ByaW1pdGl2ZVJlY2VpdmVyID0gdXRpbC53cmFwc1ByaW1pdGl2ZVJlY2VpdmVyO1xudmFyIGlzUHJpbWl0aXZlID0gdXRpbC5pc1ByaW1pdGl2ZTtcbnZhciB0aHJvd2VyID0gdXRpbC50aHJvd2VyO1xuXG5mdW5jdGlvbiByZXR1cm5UaGlzKCkge1xuICAgIHJldHVybiB0aGlzO1xufVxuZnVuY3Rpb24gdGhyb3dUaGlzKCkge1xuICAgIHRocm93IHRoaXM7XG59XG5mdW5jdGlvbiByZXR1cm4kKHIpIHtcbiAgICByZXR1cm4gZnVuY3Rpb24oKSB7XG4gICAgICAgIHJldHVybiByO1xuICAgIH07XG59XG5mdW5jdGlvbiB0aHJvdyQocikge1xuICAgIHJldHVybiBmdW5jdGlvbigpIHtcbiAgICAgICAgdGhyb3cgcjtcbiAgICB9O1xufVxuZnVuY3Rpb24gcHJvbWlzZWRGaW5hbGx5KHJldCwgcmVhc29uT3JWYWx1ZSwgaXNGdWxmaWxsZWQpIHtcbiAgICB2YXIgdGhlbjtcbiAgICBpZiAod3JhcHNQcmltaXRpdmVSZWNlaXZlciAmJiBpc1ByaW1pdGl2ZShyZWFzb25PclZhbHVlKSkge1xuICAgICAgICB0aGVuID0gaXNGdWxmaWxsZWQgPyByZXR1cm4kKHJlYXNvbk9yVmFsdWUpIDogdGhyb3ckKHJlYXNvbk9yVmFsdWUpO1xuICAgIH0gZWxzZSB7XG4gICAgICAgIHRoZW4gPSBpc0Z1bGZpbGxlZCA/IHJldHVyblRoaXMgOiB0aHJvd1RoaXM7XG4gICAgfVxuICAgIHJldHVybiByZXQuX3RoZW4odGhlbiwgdGhyb3dlciwgdW5kZWZpbmVkLCByZWFzb25PclZhbHVlLCB1bmRlZmluZWQpO1xufVxuXG5mdW5jdGlvbiBmaW5hbGx5SGFuZGxlcihyZWFzb25PclZhbHVlKSB7XG4gICAgdmFyIHByb21pc2UgPSB0aGlzLnByb21pc2U7XG4gICAgdmFyIGhhbmRsZXIgPSB0aGlzLmhhbmRsZXI7XG5cbiAgICB2YXIgcmV0ID0gcHJvbWlzZS5faXNCb3VuZCgpXG4gICAgICAgICAgICAgICAgICAgID8gaGFuZGxlci5jYWxsKHByb21pc2UuX2JvdW5kVG8pXG4gICAgICAgICAgICAgICAgICAgIDogaGFuZGxlcigpO1xuXG4gICAgaWYgKHJldCAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgIHZhciBtYXliZVByb21pc2UgPSB0cnlDb252ZXJ0VG9Qcm9taXNlKHJldCwgdW5kZWZpbmVkKTtcbiAgICAgICAgaWYgKG1heWJlUHJvbWlzZSBpbnN0YW5jZW9mIFByb21pc2UpIHtcbiAgICAgICAgICAgIG1heWJlUHJvbWlzZSA9IG1heWJlUHJvbWlzZS5fdGFyZ2V0KCk7XG4gICAgICAgICAgICByZXR1cm4gcHJvbWlzZWRGaW5hbGx5KG1heWJlUHJvbWlzZSwgcmVhc29uT3JWYWx1ZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHByb21pc2UuaXNGdWxmaWxsZWQoKSk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBpZiAocHJvbWlzZS5pc1JlamVjdGVkKCkpIHtcbiAgICAgICAgTkVYVF9GSUxURVIuZSA9IHJlYXNvbk9yVmFsdWU7XG4gICAgICAgIHJldHVybiBORVhUX0ZJTFRFUjtcbiAgICB9IGVsc2Uge1xuICAgICAgICByZXR1cm4gcmVhc29uT3JWYWx1ZTtcbiAgICB9XG59XG5cbmZ1bmN0aW9uIHRhcEhhbmRsZXIodmFsdWUpIHtcbiAgICB2YXIgcHJvbWlzZSA9IHRoaXMucHJvbWlzZTtcbiAgICB2YXIgaGFuZGxlciA9IHRoaXMuaGFuZGxlcjtcblxuICAgIHZhciByZXQgPSBwcm9taXNlLl9pc0JvdW5kKClcbiAgICAgICAgICAgICAgICAgICAgPyBoYW5kbGVyLmNhbGwocHJvbWlzZS5fYm91bmRUbywgdmFsdWUpXG4gICAgICAgICAgICAgICAgICAgIDogaGFuZGxlcih2YWx1ZSk7XG5cbiAgICBpZiAocmV0ICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgdmFyIG1heWJlUHJvbWlzZSA9IHRyeUNvbnZlcnRUb1Byb21pc2UocmV0LCB1bmRlZmluZWQpO1xuICAgICAgICBpZiAobWF5YmVQcm9taXNlIGluc3RhbmNlb2YgUHJvbWlzZSkge1xuICAgICAgICAgICAgbWF5YmVQcm9taXNlID0gbWF5YmVQcm9taXNlLl90YXJnZXQoKTtcbiAgICAgICAgICAgIHJldHVybiBwcm9taXNlZEZpbmFsbHkobWF5YmVQcm9taXNlLCB2YWx1ZSwgdHJ1ZSk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIHZhbHVlO1xufVxuXG5Qcm9taXNlLnByb3RvdHlwZS5fcGFzc1Rocm91Z2hIYW5kbGVyID0gZnVuY3Rpb24gKGhhbmRsZXIsIGlzRmluYWxseSkge1xuICAgIGlmICh0eXBlb2YgaGFuZGxlciAhPT0gXCJmdW5jdGlvblwiKSByZXR1cm4gdGhpcy50aGVuKCk7XG5cbiAgICB2YXIgcHJvbWlzZUFuZEhhbmRsZXIgPSB7XG4gICAgICAgIHByb21pc2U6IHRoaXMsXG4gICAgICAgIGhhbmRsZXI6IGhhbmRsZXJcbiAgICB9O1xuXG4gICAgcmV0dXJuIHRoaXMuX3RoZW4oXG4gICAgICAgICAgICBpc0ZpbmFsbHkgPyBmaW5hbGx5SGFuZGxlciA6IHRhcEhhbmRsZXIsXG4gICAgICAgICAgICBpc0ZpbmFsbHkgPyBmaW5hbGx5SGFuZGxlciA6IHVuZGVmaW5lZCwgdW5kZWZpbmVkLFxuICAgICAgICAgICAgcHJvbWlzZUFuZEhhbmRsZXIsIHVuZGVmaW5lZCk7XG59O1xuXG5Qcm9taXNlLnByb3RvdHlwZS5sYXN0bHkgPVxuUHJvbWlzZS5wcm90b3R5cGVbXCJmaW5hbGx5XCJdID0gZnVuY3Rpb24gKGhhbmRsZXIpIHtcbiAgICByZXR1cm4gdGhpcy5fcGFzc1Rocm91Z2hIYW5kbGVyKGhhbmRsZXIsIHRydWUpO1xufTtcblxuUHJvbWlzZS5wcm90b3R5cGUudGFwID0gZnVuY3Rpb24gKGhhbmRsZXIpIHtcbiAgICByZXR1cm4gdGhpcy5fcGFzc1Rocm91Z2hIYW5kbGVyKGhhbmRsZXIsIGZhbHNlKTtcbn07XG59O1xuIiwiXCJ1c2Ugc3RyaWN0XCI7XG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uKFByb21pc2UsXG4gICAgICAgICAgICAgICAgICAgICAgICAgIGFwaVJlamVjdGlvbixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgSU5URVJOQUwsXG4gICAgICAgICAgICAgICAgICAgICAgICAgIHRyeUNvbnZlcnRUb1Byb21pc2UpIHtcbnZhciBlcnJvcnMgPSByZXF1aXJlKFwiLi9lcnJvcnMuanNcIik7XG52YXIgVHlwZUVycm9yID0gZXJyb3JzLlR5cGVFcnJvcjtcbnZhciBkZXByZWNhdGVkID0gcmVxdWlyZShcIi4vdXRpbC5qc1wiKS5kZXByZWNhdGVkO1xudmFyIHV0aWwgPSByZXF1aXJlKFwiLi91dGlsLmpzXCIpO1xudmFyIGVycm9yT2JqID0gdXRpbC5lcnJvck9iajtcbnZhciB0cnlDYXRjaDEgPSB1dGlsLnRyeUNhdGNoMTtcbnZhciB5aWVsZEhhbmRsZXJzID0gW107XG5cbmZ1bmN0aW9uIHByb21pc2VGcm9tWWllbGRIYW5kbGVyKHZhbHVlLCB5aWVsZEhhbmRsZXJzLCB0cmFjZVBhcmVudCkge1xuICAgIHZhciBfZXJyb3JPYmogPSBlcnJvck9iajtcbiAgICB2YXIgX1Byb21pc2UgPSBQcm9taXNlO1xuICAgIHZhciBsZW4gPSB5aWVsZEhhbmRsZXJzLmxlbmd0aDtcbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IGxlbjsgKytpKSB7XG4gICAgICAgIHRyYWNlUGFyZW50Ll9wdXNoQ29udGV4dCgpO1xuICAgICAgICB2YXIgcmVzdWx0ID0gdHJ5Q2F0Y2gxKHlpZWxkSGFuZGxlcnNbaV0sIHVuZGVmaW5lZCwgdmFsdWUpO1xuICAgICAgICB0cmFjZVBhcmVudC5fcG9wQ29udGV4dCgpO1xuICAgICAgICBpZiAocmVzdWx0ID09PSBfZXJyb3JPYmopIHtcbiAgICAgICAgICAgIHJldHVybiBfUHJvbWlzZS5yZWplY3QoX2Vycm9yT2JqLmUpO1xuICAgICAgICB9XG4gICAgICAgIHZhciBtYXliZVByb21pc2UgPSB0cnlDb252ZXJ0VG9Qcm9taXNlKHJlc3VsdCwgdHJhY2VQYXJlbnQpO1xuICAgICAgICBpZiAobWF5YmVQcm9taXNlIGluc3RhbmNlb2YgX1Byb21pc2UpIHJldHVybiBtYXliZVByb21pc2U7XG4gICAgfVxuICAgIHJldHVybiBudWxsO1xufVxuXG5mdW5jdGlvbiBQcm9taXNlU3Bhd24oZ2VuZXJhdG9yRnVuY3Rpb24sIHJlY2VpdmVyLCB5aWVsZEhhbmRsZXIsIHN0YWNrKSB7XG4gICAgdmFyIHByb21pc2UgPSB0aGlzLl9wcm9taXNlID0gbmV3IFByb21pc2UoSU5URVJOQUwpO1xuICAgIHByb21pc2UuX2NhcHR1cmVTdGFja1RyYWNlKCk7XG4gICAgdGhpcy5fc3RhY2sgPSBzdGFjaztcbiAgICB0aGlzLl9nZW5lcmF0b3JGdW5jdGlvbiA9IGdlbmVyYXRvckZ1bmN0aW9uO1xuICAgIHRoaXMuX3JlY2VpdmVyID0gcmVjZWl2ZXI7XG4gICAgdGhpcy5fZ2VuZXJhdG9yID0gdW5kZWZpbmVkO1xuICAgIHRoaXMuX3lpZWxkSGFuZGxlcnMgPSB0eXBlb2YgeWllbGRIYW5kbGVyID09PSBcImZ1bmN0aW9uXCJcbiAgICAgICAgPyBbeWllbGRIYW5kbGVyXS5jb25jYXQoeWllbGRIYW5kbGVycylcbiAgICAgICAgOiB5aWVsZEhhbmRsZXJzO1xufVxuXG5Qcm9taXNlU3Bhd24ucHJvdG90eXBlLnByb21pc2UgPSBmdW5jdGlvbiAoKSB7XG4gICAgcmV0dXJuIHRoaXMuX3Byb21pc2U7XG59O1xuXG5Qcm9taXNlU3Bhd24ucHJvdG90eXBlLl9ydW4gPSBmdW5jdGlvbiAoKSB7XG4gICAgdGhpcy5fZ2VuZXJhdG9yID0gdGhpcy5fZ2VuZXJhdG9yRnVuY3Rpb24uY2FsbCh0aGlzLl9yZWNlaXZlcik7XG4gICAgdGhpcy5fcmVjZWl2ZXIgPVxuICAgICAgICB0aGlzLl9nZW5lcmF0b3JGdW5jdGlvbiA9IHVuZGVmaW5lZDtcbiAgICB0aGlzLl9uZXh0KHVuZGVmaW5lZCk7XG59O1xuXG5Qcm9taXNlU3Bhd24ucHJvdG90eXBlLl9jb250aW51ZSA9IGZ1bmN0aW9uIChyZXN1bHQpIHtcbiAgICBpZiAocmVzdWx0ID09PSBlcnJvck9iaikge1xuICAgICAgICB0aGlzLl9nZW5lcmF0b3IgPSB1bmRlZmluZWQ7XG4gICAgICAgIHZhciB0cmFjZSA9IGVycm9ycy5jYW5BdHRhY2hUcmFjZShyZXN1bHQuZSlcbiAgICAgICAgICAgID8gcmVzdWx0LmUgOiBuZXcgRXJyb3IodXRpbC50b1N0cmluZyhyZXN1bHQuZSkpO1xuICAgICAgICB0aGlzLl9wcm9taXNlLl9hdHRhY2hFeHRyYVRyYWNlKHRyYWNlKTtcbiAgICAgICAgdGhpcy5fcHJvbWlzZS5fcmVqZWN0KHJlc3VsdC5lLCB0cmFjZSk7XG4gICAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICB2YXIgdmFsdWUgPSByZXN1bHQudmFsdWU7XG4gICAgaWYgKHJlc3VsdC5kb25lID09PSB0cnVlKSB7XG4gICAgICAgIHRoaXMuX2dlbmVyYXRvciA9IHVuZGVmaW5lZDtcbiAgICAgICAgaWYgKCF0aGlzLl9wcm9taXNlLl90cnlGb2xsb3codmFsdWUpKSB7XG4gICAgICAgICAgICB0aGlzLl9wcm9taXNlLl9mdWxmaWxsKHZhbHVlKTtcbiAgICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICAgIHZhciBtYXliZVByb21pc2UgPSB0cnlDb252ZXJ0VG9Qcm9taXNlKHZhbHVlLCB0aGlzLl9wcm9taXNlKTtcbiAgICAgICAgaWYgKCEobWF5YmVQcm9taXNlIGluc3RhbmNlb2YgUHJvbWlzZSkpIHtcbiAgICAgICAgICAgIG1heWJlUHJvbWlzZSA9XG4gICAgICAgICAgICAgICAgcHJvbWlzZUZyb21ZaWVsZEhhbmRsZXIobWF5YmVQcm9taXNlLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuX3lpZWxkSGFuZGxlcnMsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5fcHJvbWlzZSk7XG4gICAgICAgICAgICBpZiAobWF5YmVQcm9taXNlID09PSBudWxsKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5fdGhyb3coXG4gICAgICAgICAgICAgICAgICAgIG5ldyBUeXBlRXJyb3IoXG4gICAgICAgICAgICAgICAgICAgICAgICBcIkEgdmFsdWUgJXMgd2FzIHlpZWxkZWQgdGhhdCBjb3VsZCBub3QgYmUgdHJlYXRlZCBhcyBhIHByb21pc2VcXHUwMDBhXFx1MDAwYSAgICBTZWUgaHR0cDovL2dvby5nbC80WTRwRGtcXHUwMDBhXFx1MDAwYVwiLnJlcGxhY2UoXCIlc1wiLCB2YWx1ZSkgK1xuICAgICAgICAgICAgICAgICAgICAgICAgXCJGcm9tIGNvcm91dGluZTpcXHUwMDBhXCIgK1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5fc3RhY2suc3BsaXQoXCJcXG5cIikuc2xpY2UoMSwgLTcpLmpvaW4oXCJcXG5cIilcbiAgICAgICAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIG1heWJlUHJvbWlzZS5fdGhlbihcbiAgICAgICAgICAgIHRoaXMuX25leHQsXG4gICAgICAgICAgICB0aGlzLl90aHJvdyxcbiAgICAgICAgICAgIHVuZGVmaW5lZCxcbiAgICAgICAgICAgIHRoaXMsXG4gICAgICAgICAgICBudWxsXG4gICAgICAgKTtcbiAgICB9XG59O1xuXG5Qcm9taXNlU3Bhd24ucHJvdG90eXBlLl90aHJvdyA9IGZ1bmN0aW9uIChyZWFzb24pIHtcbiAgICBpZiAoZXJyb3JzLmNhbkF0dGFjaFRyYWNlKHJlYXNvbikpXG4gICAgICAgIHRoaXMuX3Byb21pc2UuX2F0dGFjaEV4dHJhVHJhY2UocmVhc29uKTtcbiAgICB0aGlzLl9wcm9taXNlLl9wdXNoQ29udGV4dCgpO1xuICAgIHZhciByZXN1bHQgPSB0cnlDYXRjaDEodGhpcy5fZ2VuZXJhdG9yW1widGhyb3dcIl0sIHRoaXMuX2dlbmVyYXRvciwgcmVhc29uKTtcbiAgICB0aGlzLl9wcm9taXNlLl9wb3BDb250ZXh0KCk7XG4gICAgdGhpcy5fY29udGludWUocmVzdWx0KTtcbn07XG5cblByb21pc2VTcGF3bi5wcm90b3R5cGUuX25leHQgPSBmdW5jdGlvbiAodmFsdWUpIHtcbiAgICB0aGlzLl9wcm9taXNlLl9wdXNoQ29udGV4dCgpO1xuICAgIHZhciByZXN1bHQgPSB0cnlDYXRjaDEodGhpcy5fZ2VuZXJhdG9yLm5leHQsIHRoaXMuX2dlbmVyYXRvciwgdmFsdWUpO1xuICAgIHRoaXMuX3Byb21pc2UuX3BvcENvbnRleHQoKTtcbiAgICB0aGlzLl9jb250aW51ZShyZXN1bHQpO1xufTtcblxuUHJvbWlzZS5jb3JvdXRpbmUgPSBmdW5jdGlvbiAoZ2VuZXJhdG9yRnVuY3Rpb24sIG9wdGlvbnMpIHtcbiAgICBpZiAodHlwZW9mIGdlbmVyYXRvckZ1bmN0aW9uICE9PSBcImZ1bmN0aW9uXCIpIHtcbiAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcihcImdlbmVyYXRvckZ1bmN0aW9uIG11c3QgYmUgYSBmdW5jdGlvblxcdTAwMGFcXHUwMDBhICAgIFNlZSBodHRwOi8vZ29vLmdsLzZWcWhtMFxcdTAwMGFcIik7XG4gICAgfVxuICAgIHZhciB5aWVsZEhhbmRsZXIgPSBPYmplY3Qob3B0aW9ucykueWllbGRIYW5kbGVyO1xuICAgIHZhciBQcm9taXNlU3Bhd24kID0gUHJvbWlzZVNwYXduO1xuICAgIHZhciBzdGFjayA9IG5ldyBFcnJvcigpLnN0YWNrO1xuICAgIHJldHVybiBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciBnZW5lcmF0b3IgPSBnZW5lcmF0b3JGdW5jdGlvbi5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xuICAgICAgICB2YXIgc3Bhd24gPSBuZXcgUHJvbWlzZVNwYXduJCh1bmRlZmluZWQsIHVuZGVmaW5lZCwgeWllbGRIYW5kbGVyLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdGFjayk7XG4gICAgICAgIHNwYXduLl9nZW5lcmF0b3IgPSBnZW5lcmF0b3I7XG4gICAgICAgIHNwYXduLl9uZXh0KHVuZGVmaW5lZCk7XG4gICAgICAgIHJldHVybiBzcGF3bi5wcm9taXNlKCk7XG4gICAgfTtcbn07XG5cblByb21pc2UuY29yb3V0aW5lLmFkZFlpZWxkSGFuZGxlciA9IGZ1bmN0aW9uKGZuKSB7XG4gICAgaWYgKHR5cGVvZiBmbiAhPT0gXCJmdW5jdGlvblwiKSB0aHJvdyBuZXcgVHlwZUVycm9yKFwiZm4gbXVzdCBiZSBhIGZ1bmN0aW9uXFx1MDAwYVxcdTAwMGEgICAgU2VlIGh0dHA6Ly9nb28uZ2wvOTE2bEpKXFx1MDAwYVwiKTtcbiAgICB5aWVsZEhhbmRsZXJzLnB1c2goZm4pO1xufTtcblxuUHJvbWlzZS5zcGF3biA9IGZ1bmN0aW9uIChnZW5lcmF0b3JGdW5jdGlvbikge1xuICAgIGRlcHJlY2F0ZWQoXCJQcm9taXNlLnNwYXduIGlzIGRlcHJlY2F0ZWQuIFVzZSBQcm9taXNlLmNvcm91dGluZSBpbnN0ZWFkLlwiKTtcbiAgICBpZiAodHlwZW9mIGdlbmVyYXRvckZ1bmN0aW9uICE9PSBcImZ1bmN0aW9uXCIpIHtcbiAgICAgICAgcmV0dXJuIGFwaVJlamVjdGlvbihcImdlbmVyYXRvckZ1bmN0aW9uIG11c3QgYmUgYSBmdW5jdGlvblxcdTAwMGFcXHUwMDBhICAgIFNlZSBodHRwOi8vZ29vLmdsLzZWcWhtMFxcdTAwMGFcIik7XG4gICAgfVxuICAgIHZhciBzcGF3biA9IG5ldyBQcm9taXNlU3Bhd24oZ2VuZXJhdG9yRnVuY3Rpb24sIHRoaXMpO1xuICAgIHZhciByZXQgPSBzcGF3bi5wcm9taXNlKCk7XG4gICAgc3Bhd24uX3J1bihQcm9taXNlLnNwYXduKTtcbiAgICByZXR1cm4gcmV0O1xufTtcbn07XG4iLCJcInVzZSBzdHJpY3RcIjtcbm1vZHVsZS5leHBvcnRzID1cbmZ1bmN0aW9uKFByb21pc2UsIFByb21pc2VBcnJheSwgdHJ5Q29udmVydFRvUHJvbWlzZSwgSU5URVJOQUwpIHtcbnZhciB1dGlsID0gcmVxdWlyZShcIi4vdXRpbC5qc1wiKTtcbnZhciBjYW5FdmFsdWF0ZSA9IHV0aWwuY2FuRXZhbHVhdGU7XG52YXIgdHJ5Q2F0Y2gxID0gdXRpbC50cnlDYXRjaDE7XG52YXIgZXJyb3JPYmogPSB1dGlsLmVycm9yT2JqO1xudmFyIGVycm9ycyA9IHJlcXVpcmUoXCIuL2Vycm9ycy5qc1wiKTtcblxuaWYgKGNhbkV2YWx1YXRlKSB7XG4gICAgdmFyIHRoZW5DYWxsYmFjayA9IGZ1bmN0aW9uKGkpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBGdW5jdGlvbihcInZhbHVlXCIsIFwiaG9sZGVyXCIsIFwiICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcXG5cXFxuICAgICAgICAgICAgJ3VzZSBzdHJpY3QnOyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcXG5cXFxuICAgICAgICAgICAgaG9sZGVyLnBJbmRleCA9IHZhbHVlOyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcXG5cXFxuICAgICAgICAgICAgaG9sZGVyLmNoZWNrRnVsZmlsbG1lbnQodGhpcyk7ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcXG5cXFxuICAgICAgICAgICAgXCIucmVwbGFjZSgvSW5kZXgvZywgaSkpO1xuICAgIH07XG5cbiAgICB2YXIgY2FsbGVyID0gZnVuY3Rpb24oY291bnQpIHtcbiAgICAgICAgdmFyIHZhbHVlcyA9IFtdO1xuICAgICAgICBmb3IgKHZhciBpID0gMTsgaSA8PSBjb3VudDsgKytpKSB2YWx1ZXMucHVzaChcImhvbGRlci5wXCIgKyBpKTtcbiAgICAgICAgcmV0dXJuIG5ldyBGdW5jdGlvbihcImhvbGRlclwiLCBcIiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXFxuXFxcbiAgICAgICAgICAgICd1c2Ugc3RyaWN0JzsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXFxuXFxcbiAgICAgICAgICAgIHZhciBjYWxsYmFjayA9IGhvbGRlci5mbjsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXFxuXFxcbiAgICAgICAgICAgIHJldHVybiBjYWxsYmFjayh2YWx1ZXMpOyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXFxuXFxcbiAgICAgICAgICAgIFwiLnJlcGxhY2UoL3ZhbHVlcy9nLCB2YWx1ZXMuam9pbihcIiwgXCIpKSk7XG4gICAgfTtcbiAgICB2YXIgdGhlbkNhbGxiYWNrcyA9IFtdO1xuICAgIHZhciBjYWxsZXJzID0gW3VuZGVmaW5lZF07XG4gICAgZm9yICh2YXIgaSA9IDE7IGkgPD0gNTsgKytpKSB7XG4gICAgICAgIHRoZW5DYWxsYmFja3MucHVzaCh0aGVuQ2FsbGJhY2soaSkpO1xuICAgICAgICBjYWxsZXJzLnB1c2goY2FsbGVyKGkpKTtcbiAgICB9XG5cbiAgICB2YXIgSG9sZGVyID0gZnVuY3Rpb24odG90YWwsIGZuKSB7XG4gICAgICAgIHRoaXMucDEgPSB0aGlzLnAyID0gdGhpcy5wMyA9IHRoaXMucDQgPSB0aGlzLnA1ID0gbnVsbDtcbiAgICAgICAgdGhpcy5mbiA9IGZuO1xuICAgICAgICB0aGlzLnRvdGFsID0gdG90YWw7XG4gICAgICAgIHRoaXMubm93ID0gMDtcbiAgICB9O1xuXG4gICAgSG9sZGVyLnByb3RvdHlwZS5jYWxsZXJzID0gY2FsbGVycztcbiAgICBIb2xkZXIucHJvdG90eXBlLmNoZWNrRnVsZmlsbG1lbnQgPSBmdW5jdGlvbihwcm9taXNlKSB7XG4gICAgICAgIHZhciBub3cgPSB0aGlzLm5vdztcbiAgICAgICAgbm93Kys7XG4gICAgICAgIHZhciB0b3RhbCA9IHRoaXMudG90YWw7XG4gICAgICAgIGlmIChub3cgPj0gdG90YWwpIHtcbiAgICAgICAgICAgIHZhciBoYW5kbGVyID0gdGhpcy5jYWxsZXJzW3RvdGFsXTtcbiAgICAgICAgICAgIHByb21pc2UuX3B1c2hDb250ZXh0KCk7XG4gICAgICAgICAgICB2YXIgcmV0ID0gdHJ5Q2F0Y2gxKGhhbmRsZXIsIHVuZGVmaW5lZCwgdGhpcyk7XG4gICAgICAgICAgICBwcm9taXNlLl9wb3BDb250ZXh0KCk7XG4gICAgICAgICAgICBpZiAocmV0ID09PSBlcnJvck9iaikge1xuICAgICAgICAgICAgICAgIHZhciByZWFzb24gPSByZXQuZTtcbiAgICAgICAgICAgICAgICB2YXIgdHJhY2UgPSBlcnJvcnMuZW5zdXJlRXJyb3JPYmplY3QocmVhc29uKTtcbiAgICAgICAgICAgICAgICBwcm9taXNlLl9hdHRhY2hFeHRyYVRyYWNlKHRyYWNlKTtcbiAgICAgICAgICAgICAgICBwcm9taXNlLl9yZWplY3RVbmNoZWNrZWQocmVhc29uLFxuICAgICAgICAgICAgICAgICAgICB0cmFjZSA9PT0gcmVhc29uID8gdW5kZWZpbmVkIDogdHJhY2UpO1xuICAgICAgICAgICAgfSBlbHNlIGlmICghcHJvbWlzZS5fdHJ5Rm9sbG93KHJldCkpIHtcbiAgICAgICAgICAgICAgICBwcm9taXNlLl9mdWxmaWxsVW5jaGVja2VkKHJldCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICB0aGlzLm5vdyA9IG5vdztcbiAgICAgICAgfVxuICAgIH07XG59XG5cbmZ1bmN0aW9uIHJlamVjdChyZWFzb24pIHtcbiAgICB0aGlzLl9yZWplY3QocmVhc29uKTtcbn1cblxuUHJvbWlzZS5qb2luID0gZnVuY3Rpb24gKCkge1xuICAgIHZhciBsYXN0ID0gYXJndW1lbnRzLmxlbmd0aCAtIDE7XG4gICAgdmFyIGZuO1xuICAgIGlmIChsYXN0ID4gMCAmJiB0eXBlb2YgYXJndW1lbnRzW2xhc3RdID09PSBcImZ1bmN0aW9uXCIpIHtcbiAgICAgICAgZm4gPSBhcmd1bWVudHNbbGFzdF07XG4gICAgICAgIGlmIChsYXN0IDwgNiAmJiBjYW5FdmFsdWF0ZSkge1xuICAgICAgICAgICAgdmFyIHJldCA9IG5ldyBQcm9taXNlKElOVEVSTkFMKTtcbiAgICAgICAgICAgIHJldC5fY2FwdHVyZVN0YWNrVHJhY2UoKTtcbiAgICAgICAgICAgIHZhciBob2xkZXIgPSBuZXcgSG9sZGVyKGxhc3QsIGZuKTtcbiAgICAgICAgICAgIHZhciBjYWxsYmFja3MgPSB0aGVuQ2FsbGJhY2tzO1xuICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBsYXN0OyArK2kpIHtcbiAgICAgICAgICAgICAgICB2YXIgbWF5YmVQcm9taXNlID0gdHJ5Q29udmVydFRvUHJvbWlzZShhcmd1bWVudHNbaV0sIHVuZGVmaW5lZCk7XG4gICAgICAgICAgICAgICAgaWYgKG1heWJlUHJvbWlzZSBpbnN0YW5jZW9mIFByb21pc2UpIHtcbiAgICAgICAgICAgICAgICAgICAgbWF5YmVQcm9taXNlID0gbWF5YmVQcm9taXNlLl90YXJnZXQoKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKG1heWJlUHJvbWlzZS5faXNQZW5kaW5nKCkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIG1heWJlUHJvbWlzZS5fdGhlbihjYWxsYmFja3NbaV0sIHJlamVjdCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB1bmRlZmluZWQsIHJldCwgaG9sZGVyKTtcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmIChtYXliZVByb21pc2UuX2lzRnVsZmlsbGVkKCkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhbGxiYWNrc1tpXS5jYWxsKHJldCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1heWJlUHJvbWlzZS5fdmFsdWUoKSwgaG9sZGVyKTtcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldC5fcmVqZWN0KG1heWJlUHJvbWlzZS5fcmVhc29uKCkpO1xuICAgICAgICAgICAgICAgICAgICAgICAgbWF5YmVQcm9taXNlLl91bnNldFJlamVjdGlvbklzVW5oYW5kbGVkKCk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBjYWxsYmFja3NbaV0uY2FsbChyZXQsIG1heWJlUHJvbWlzZSwgaG9sZGVyKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gcmV0O1xuICAgICAgICB9XG4gICAgfVxuICAgIHZhciAkX2xlbiA9IGFyZ3VtZW50cy5sZW5ndGg7dmFyIGFyZ3MgPSBuZXcgQXJyYXkoJF9sZW4pOyBmb3IodmFyICRfaSA9IDA7ICRfaSA8ICRfbGVuOyArKyRfaSkge2FyZ3NbJF9pXSA9IGFyZ3VtZW50c1skX2ldO31cbiAgICB2YXIgcmV0ID0gbmV3IFByb21pc2VBcnJheShhcmdzKS5wcm9taXNlKCk7XG4gICAgcmV0dXJuIGZuICE9PSB1bmRlZmluZWQgPyByZXQuc3ByZWFkKGZuKSA6IHJldDtcbn07XG5cbn07XG4iLCJcInVzZSBzdHJpY3RcIjtcbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24oUHJvbWlzZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgUHJvbWlzZUFycmF5LFxuICAgICAgICAgICAgICAgICAgICAgICAgICBhcGlSZWplY3Rpb24sXG4gICAgICAgICAgICAgICAgICAgICAgICAgIHRyeUNvbnZlcnRUb1Byb21pc2UsXG4gICAgICAgICAgICAgICAgICAgICAgICAgIElOVEVSTkFMKSB7XG52YXIgdXRpbCA9IHJlcXVpcmUoXCIuL3V0aWwuanNcIik7XG52YXIgdHJ5Q2F0Y2gzID0gdXRpbC50cnlDYXRjaDM7XG52YXIgZXJyb3JPYmogPSB1dGlsLmVycm9yT2JqO1xudmFyIFBFTkRJTkcgPSB7fTtcbnZhciBFTVBUWV9BUlJBWSA9IFtdO1xuXG5mdW5jdGlvbiBNYXBwaW5nUHJvbWlzZUFycmF5KHByb21pc2VzLCBmbiwgbGltaXQsIF9maWx0ZXIpIHtcbiAgICB0aGlzLmNvbnN0cnVjdG9yJChwcm9taXNlcyk7XG4gICAgdGhpcy5fcHJvbWlzZS5fc2V0SXNTcHJlYWRhYmxlKCk7XG4gICAgdGhpcy5fcHJvbWlzZS5fY2FwdHVyZVN0YWNrVHJhY2UoKTtcbiAgICB0aGlzLl9jYWxsYmFjayA9IGZuO1xuICAgIHRoaXMuX3ByZXNlcnZlZFZhbHVlcyA9IF9maWx0ZXIgPT09IElOVEVSTkFMXG4gICAgICAgID8gbmV3IEFycmF5KHRoaXMubGVuZ3RoKCkpXG4gICAgICAgIDogbnVsbDtcbiAgICB0aGlzLl9saW1pdCA9IGxpbWl0O1xuICAgIHRoaXMuX2luRmxpZ2h0ID0gMDtcbiAgICB0aGlzLl9xdWV1ZSA9IGxpbWl0ID49IDEgPyBbXSA6IEVNUFRZX0FSUkFZO1xuICAgIHRoaXMuX2luaXQkKHVuZGVmaW5lZCwgLTIpO1xufVxudXRpbC5pbmhlcml0cyhNYXBwaW5nUHJvbWlzZUFycmF5LCBQcm9taXNlQXJyYXkpO1xuXG5NYXBwaW5nUHJvbWlzZUFycmF5LnByb3RvdHlwZS5faW5pdCA9IGZ1bmN0aW9uICgpIHt9O1xuXG5NYXBwaW5nUHJvbWlzZUFycmF5LnByb3RvdHlwZS5fcHJvbWlzZUZ1bGZpbGxlZCA9IGZ1bmN0aW9uICh2YWx1ZSwgaW5kZXgpIHtcbiAgICB2YXIgdmFsdWVzID0gdGhpcy5fdmFsdWVzO1xuICAgIHZhciBsZW5ndGggPSB0aGlzLmxlbmd0aCgpO1xuICAgIHZhciBwcmVzZXJ2ZWRWYWx1ZXMgPSB0aGlzLl9wcmVzZXJ2ZWRWYWx1ZXM7XG4gICAgdmFyIGxpbWl0ID0gdGhpcy5fbGltaXQ7XG4gICAgaWYgKHZhbHVlc1tpbmRleF0gPT09IFBFTkRJTkcpIHtcbiAgICAgICAgdmFsdWVzW2luZGV4XSA9IHZhbHVlO1xuICAgICAgICBpZiAobGltaXQgPj0gMSkge1xuICAgICAgICAgICAgdGhpcy5faW5GbGlnaHQtLTtcbiAgICAgICAgICAgIHRoaXMuX2RyYWluUXVldWUoKTtcbiAgICAgICAgICAgIGlmICh0aGlzLl9pc1Jlc29sdmVkKCkpIHJldHVybjtcbiAgICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICAgIGlmIChsaW1pdCA+PSAxICYmIHRoaXMuX2luRmxpZ2h0ID49IGxpbWl0KSB7XG4gICAgICAgICAgICB2YWx1ZXNbaW5kZXhdID0gdmFsdWU7XG4gICAgICAgICAgICB0aGlzLl9xdWV1ZS5wdXNoKGluZGV4KTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBpZiAocHJlc2VydmVkVmFsdWVzICE9PSBudWxsKSBwcmVzZXJ2ZWRWYWx1ZXNbaW5kZXhdID0gdmFsdWU7XG5cbiAgICAgICAgdmFyIGNhbGxiYWNrID0gdGhpcy5fY2FsbGJhY2s7XG4gICAgICAgIHZhciByZWNlaXZlciA9IHRoaXMuX3Byb21pc2UuX2JvdW5kVG87XG4gICAgICAgIHRoaXMuX3Byb21pc2UuX3B1c2hDb250ZXh0KCk7XG4gICAgICAgIHZhciByZXQgPSB0cnlDYXRjaDMoY2FsbGJhY2ssIHJlY2VpdmVyLCB2YWx1ZSwgaW5kZXgsIGxlbmd0aCk7XG4gICAgICAgIHRoaXMuX3Byb21pc2UuX3BvcENvbnRleHQoKTtcbiAgICAgICAgaWYgKHJldCA9PT0gZXJyb3JPYmopIHJldHVybiB0aGlzLl9yZWplY3QocmV0LmUpO1xuXG4gICAgICAgIHZhciBtYXliZVByb21pc2UgPSB0cnlDb252ZXJ0VG9Qcm9taXNlKHJldCwgdGhpcy5fcHJvbWlzZSk7XG4gICAgICAgIGlmIChtYXliZVByb21pc2UgaW5zdGFuY2VvZiBQcm9taXNlKSB7XG4gICAgICAgICAgICBtYXliZVByb21pc2UgPSBtYXliZVByb21pc2UuX3RhcmdldCgpO1xuICAgICAgICAgICAgaWYgKG1heWJlUHJvbWlzZS5faXNQZW5kaW5nKCkpIHtcbiAgICAgICAgICAgICAgICBpZiAobGltaXQgPj0gMSkgdGhpcy5faW5GbGlnaHQrKztcbiAgICAgICAgICAgICAgICB2YWx1ZXNbaW5kZXhdID0gUEVORElORztcbiAgICAgICAgICAgICAgICByZXR1cm4gbWF5YmVQcm9taXNlLl9wcm94eVByb21pc2VBcnJheSh0aGlzLCBpbmRleCk7XG4gICAgICAgICAgICB9IGVsc2UgaWYgKG1heWJlUHJvbWlzZS5faXNGdWxmaWxsZWQoKSkge1xuICAgICAgICAgICAgICAgIHJldCA9IG1heWJlUHJvbWlzZS5fdmFsdWUoKTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgbWF5YmVQcm9taXNlLl91bnNldFJlamVjdGlvbklzVW5oYW5kbGVkKCk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuX3JlamVjdChtYXliZVByb21pc2UuX3JlYXNvbigpKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICB2YWx1ZXNbaW5kZXhdID0gcmV0O1xuICAgIH1cbiAgICB2YXIgdG90YWxSZXNvbHZlZCA9ICsrdGhpcy5fdG90YWxSZXNvbHZlZDtcbiAgICBpZiAodG90YWxSZXNvbHZlZCA+PSBsZW5ndGgpIHtcbiAgICAgICAgaWYgKHByZXNlcnZlZFZhbHVlcyAhPT0gbnVsbCkge1xuICAgICAgICAgICAgdGhpcy5fZmlsdGVyKHZhbHVlcywgcHJlc2VydmVkVmFsdWVzKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHRoaXMuX3Jlc29sdmUodmFsdWVzKTtcbiAgICAgICAgfVxuXG4gICAgfVxufTtcblxuTWFwcGluZ1Byb21pc2VBcnJheS5wcm90b3R5cGUuX2RyYWluUXVldWUgPSBmdW5jdGlvbiAoKSB7XG4gICAgdmFyIHF1ZXVlID0gdGhpcy5fcXVldWU7XG4gICAgdmFyIGxpbWl0ID0gdGhpcy5fbGltaXQ7XG4gICAgdmFyIHZhbHVlcyA9IHRoaXMuX3ZhbHVlcztcbiAgICB3aGlsZSAocXVldWUubGVuZ3RoID4gMCAmJiB0aGlzLl9pbkZsaWdodCA8IGxpbWl0KSB7XG4gICAgICAgIGlmICh0aGlzLl9pc1Jlc29sdmVkKCkpIHJldHVybjtcbiAgICAgICAgdmFyIGluZGV4ID0gcXVldWUucG9wKCk7XG4gICAgICAgIHRoaXMuX3Byb21pc2VGdWxmaWxsZWQodmFsdWVzW2luZGV4XSwgaW5kZXgpO1xuICAgIH1cbn07XG5cbk1hcHBpbmdQcm9taXNlQXJyYXkucHJvdG90eXBlLl9maWx0ZXIgPSBmdW5jdGlvbiAoYm9vbGVhbnMsIHZhbHVlcykge1xuICAgIHZhciBsZW4gPSB2YWx1ZXMubGVuZ3RoO1xuICAgIHZhciByZXQgPSBuZXcgQXJyYXkobGVuKTtcbiAgICB2YXIgaiA9IDA7XG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCBsZW47ICsraSkge1xuICAgICAgICBpZiAoYm9vbGVhbnNbaV0pIHJldFtqKytdID0gdmFsdWVzW2ldO1xuICAgIH1cbiAgICByZXQubGVuZ3RoID0gajtcbiAgICB0aGlzLl9yZXNvbHZlKHJldCk7XG59O1xuXG5NYXBwaW5nUHJvbWlzZUFycmF5LnByb3RvdHlwZS5wcmVzZXJ2ZWRWYWx1ZXMgPSBmdW5jdGlvbiAoKSB7XG4gICAgcmV0dXJuIHRoaXMuX3ByZXNlcnZlZFZhbHVlcztcbn07XG5cbmZ1bmN0aW9uIG1hcChwcm9taXNlcywgZm4sIG9wdGlvbnMsIF9maWx0ZXIpIHtcbiAgICB2YXIgbGltaXQgPSB0eXBlb2Ygb3B0aW9ucyA9PT0gXCJvYmplY3RcIiAmJiBvcHRpb25zICE9PSBudWxsXG4gICAgICAgID8gb3B0aW9ucy5jb25jdXJyZW5jeVxuICAgICAgICA6IDA7XG4gICAgbGltaXQgPSB0eXBlb2YgbGltaXQgPT09IFwibnVtYmVyXCIgJiZcbiAgICAgICAgaXNGaW5pdGUobGltaXQpICYmIGxpbWl0ID49IDEgPyBsaW1pdCA6IDA7XG4gICAgcmV0dXJuIG5ldyBNYXBwaW5nUHJvbWlzZUFycmF5KHByb21pc2VzLCBmbiwgbGltaXQsIF9maWx0ZXIpO1xufVxuXG5Qcm9taXNlLnByb3RvdHlwZS5tYXAgPSBmdW5jdGlvbiAoZm4sIG9wdGlvbnMpIHtcbiAgICBpZiAodHlwZW9mIGZuICE9PSBcImZ1bmN0aW9uXCIpIHJldHVybiBhcGlSZWplY3Rpb24oXCJmbiBtdXN0IGJlIGEgZnVuY3Rpb25cXHUwMDBhXFx1MDAwYSAgICBTZWUgaHR0cDovL2dvby5nbC85MTZsSkpcXHUwMDBhXCIpO1xuXG4gICAgcmV0dXJuIG1hcCh0aGlzLCBmbiwgb3B0aW9ucywgbnVsbCkucHJvbWlzZSgpO1xufTtcblxuUHJvbWlzZS5tYXAgPSBmdW5jdGlvbiAocHJvbWlzZXMsIGZuLCBvcHRpb25zLCBfZmlsdGVyKSB7XG4gICAgaWYgKHR5cGVvZiBmbiAhPT0gXCJmdW5jdGlvblwiKSByZXR1cm4gYXBpUmVqZWN0aW9uKFwiZm4gbXVzdCBiZSBhIGZ1bmN0aW9uXFx1MDAwYVxcdTAwMGEgICAgU2VlIGh0dHA6Ly9nb28uZ2wvOTE2bEpKXFx1MDAwYVwiKTtcbiAgICByZXR1cm4gbWFwKHByb21pc2VzLCBmbiwgb3B0aW9ucywgX2ZpbHRlcikucHJvbWlzZSgpO1xufTtcblxuXG59O1xuIiwiXCJ1c2Ugc3RyaWN0XCI7XG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uKFByb21pc2UpIHtcbnZhciB1dGlsID0gcmVxdWlyZShcIi4vdXRpbC5qc1wiKTtcbnZhciBhc3luYyA9IHJlcXVpcmUoXCIuL2FzeW5jLmpzXCIpO1xudmFyIHRyeUNhdGNoMiA9IHV0aWwudHJ5Q2F0Y2gyO1xudmFyIHRyeUNhdGNoMSA9IHV0aWwudHJ5Q2F0Y2gxO1xudmFyIGVycm9yT2JqID0gdXRpbC5lcnJvck9iajtcblxuZnVuY3Rpb24gc3ByZWFkQWRhcHRlcih2YWwsIG5vZGViYWNrKSB7XG4gICAgdmFyIHByb21pc2UgPSB0aGlzO1xuICAgIGlmICghdXRpbC5pc0FycmF5KHZhbCkpIHJldHVybiBzdWNjZXNzQWRhcHRlci5jYWxsKHByb21pc2UsIHZhbCwgbm9kZWJhY2spO1xuICAgIHZhciByZXQgPSB1dGlsLnRyeUNhdGNoQXBwbHkobm9kZWJhY2ssXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBbbnVsbF0uY29uY2F0KHZhbCksIHByb21pc2UuX2JvdW5kVG8pO1xuICAgIGlmIChyZXQgPT09IGVycm9yT2JqKSB7XG4gICAgICAgIGFzeW5jLnRocm93TGF0ZXIocmV0LmUpO1xuICAgIH1cbn1cblxuZnVuY3Rpb24gc3VjY2Vzc0FkYXB0ZXIodmFsLCBub2RlYmFjaykge1xuICAgIHZhciBwcm9taXNlID0gdGhpcztcbiAgICB2YXIgcmVjZWl2ZXIgPSBwcm9taXNlLl9ib3VuZFRvO1xuICAgIHZhciByZXQgPSB2YWwgPT09IHVuZGVmaW5lZFxuICAgICAgICA/IHRyeUNhdGNoMShub2RlYmFjaywgcmVjZWl2ZXIsIG51bGwpXG4gICAgICAgIDogdHJ5Q2F0Y2gyKG5vZGViYWNrLCByZWNlaXZlciwgbnVsbCwgdmFsKTtcbiAgICBpZiAocmV0ID09PSBlcnJvck9iaikge1xuICAgICAgICBhc3luYy50aHJvd0xhdGVyKHJldC5lKTtcbiAgICB9XG59XG5mdW5jdGlvbiBlcnJvckFkYXB0ZXIocmVhc29uLCBub2RlYmFjaykge1xuICAgIHZhciBwcm9taXNlID0gdGhpcztcbiAgICBpZiAoIXJlYXNvbikge1xuICAgICAgICB2YXIgdGFyZ2V0ID0gcHJvbWlzZS5fdGFyZ2V0KCk7XG4gICAgICAgIHZhciBuZXdSZWFzb24gPSB0YXJnZXQuX2dldENhcnJpZWRTdGFja1RyYWNlKCk7XG4gICAgICAgIG5ld1JlYXNvbi5jYXVzZSA9IHJlYXNvbjtcbiAgICAgICAgcmVhc29uID0gbmV3UmVhc29uO1xuICAgIH1cbiAgICB2YXIgcmV0ID0gdHJ5Q2F0Y2gxKG5vZGViYWNrLCBwcm9taXNlLl9ib3VuZFRvLCByZWFzb24pO1xuICAgIGlmIChyZXQgPT09IGVycm9yT2JqKSB7XG4gICAgICAgIGFzeW5jLnRocm93TGF0ZXIocmV0LmUpO1xuICAgIH1cbn1cblxuUHJvbWlzZS5wcm90b3R5cGUubm9kZWlmeSA9IGZ1bmN0aW9uIChub2RlYmFjaywgb3B0aW9ucykge1xuICAgIGlmICh0eXBlb2Ygbm9kZWJhY2sgPT0gXCJmdW5jdGlvblwiKSB7XG4gICAgICAgIHZhciBhZGFwdGVyID0gc3VjY2Vzc0FkYXB0ZXI7XG4gICAgICAgIGlmIChvcHRpb25zICE9PSB1bmRlZmluZWQgJiYgT2JqZWN0KG9wdGlvbnMpLnNwcmVhZCkge1xuICAgICAgICAgICAgYWRhcHRlciA9IHNwcmVhZEFkYXB0ZXI7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5fdGhlbihcbiAgICAgICAgICAgIGFkYXB0ZXIsXG4gICAgICAgICAgICBlcnJvckFkYXB0ZXIsXG4gICAgICAgICAgICB1bmRlZmluZWQsXG4gICAgICAgICAgICB0aGlzLFxuICAgICAgICAgICAgbm9kZWJhY2tcbiAgICAgICAgKTtcbiAgICB9XG4gICAgcmV0dXJuIHRoaXM7XG59O1xufTtcbiIsIlwidXNlIHN0cmljdFwiO1xubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbihQcm9taXNlLCBQcm9taXNlQXJyYXkpIHtcbnZhciB1dGlsID0gcmVxdWlyZShcIi4vdXRpbC5qc1wiKTtcbnZhciBhc3luYyA9IHJlcXVpcmUoXCIuL2FzeW5jLmpzXCIpO1xudmFyIGVycm9ycyA9IHJlcXVpcmUoXCIuL2Vycm9ycy5qc1wiKTtcbnZhciB0cnlDYXRjaDEgPSB1dGlsLnRyeUNhdGNoMTtcbnZhciBlcnJvck9iaiA9IHV0aWwuZXJyb3JPYmo7XG5cblByb21pc2UucHJvdG90eXBlLnByb2dyZXNzZWQgPSBmdW5jdGlvbiAoaGFuZGxlcikge1xuICAgIHJldHVybiB0aGlzLl90aGVuKHVuZGVmaW5lZCwgdW5kZWZpbmVkLCBoYW5kbGVyLCB1bmRlZmluZWQsIHVuZGVmaW5lZCk7XG59O1xuXG5Qcm9taXNlLnByb3RvdHlwZS5fcHJvZ3Jlc3MgPSBmdW5jdGlvbiAocHJvZ3Jlc3NWYWx1ZSkge1xuICAgIGlmICh0aGlzLl9pc0ZvbGxvd2luZ09yRnVsZmlsbGVkT3JSZWplY3RlZCgpKSByZXR1cm47XG4gICAgdGhpcy5fdGFyZ2V0KCkuX3Byb2dyZXNzVW5jaGVja2VkKHByb2dyZXNzVmFsdWUpO1xuXG59O1xuXG5Qcm9taXNlLnByb3RvdHlwZS5fcHJvZ3Jlc3NIYW5kbGVyQXQgPSBmdW5jdGlvbiAoaW5kZXgpIHtcbiAgICByZXR1cm4gaW5kZXggPT09IDBcbiAgICAgICAgPyB0aGlzLl9wcm9ncmVzc0hhbmRsZXIwXG4gICAgICAgIDogdGhpc1soaW5kZXggPDwgMikgKyBpbmRleCAtIDUgKyAyXTtcbn07XG5cblByb21pc2UucHJvdG90eXBlLl9kb1Byb2dyZXNzV2l0aCA9IGZ1bmN0aW9uIChwcm9ncmVzc2lvbikge1xuICAgIHZhciBwcm9ncmVzc1ZhbHVlID0gcHJvZ3Jlc3Npb24udmFsdWU7XG4gICAgdmFyIGhhbmRsZXIgPSBwcm9ncmVzc2lvbi5oYW5kbGVyO1xuICAgIHZhciBwcm9taXNlID0gcHJvZ3Jlc3Npb24ucHJvbWlzZTtcbiAgICB2YXIgcmVjZWl2ZXIgPSBwcm9ncmVzc2lvbi5yZWNlaXZlcjtcblxuICAgIHZhciByZXQgPSB0cnlDYXRjaDEoaGFuZGxlciwgcmVjZWl2ZXIsIHByb2dyZXNzVmFsdWUpO1xuICAgIGlmIChyZXQgPT09IGVycm9yT2JqKSB7XG4gICAgICAgIGlmIChyZXQuZSAhPSBudWxsICYmXG4gICAgICAgICAgICByZXQuZS5uYW1lICE9PSBcIlN0b3BQcm9ncmVzc1Byb3BhZ2F0aW9uXCIpIHtcbiAgICAgICAgICAgIHZhciB0cmFjZSA9IGVycm9ycy5jYW5BdHRhY2hUcmFjZShyZXQuZSlcbiAgICAgICAgICAgICAgICA/IHJldC5lIDogbmV3IEVycm9yKHV0aWwudG9TdHJpbmcocmV0LmUpKTtcbiAgICAgICAgICAgIHByb21pc2UuX2F0dGFjaEV4dHJhVHJhY2UodHJhY2UpO1xuICAgICAgICAgICAgcHJvbWlzZS5fcHJvZ3Jlc3MocmV0LmUpO1xuICAgICAgICB9XG4gICAgfSBlbHNlIGlmIChyZXQgaW5zdGFuY2VvZiBQcm9taXNlKSB7XG4gICAgICAgIHJldC5fdGhlbihwcm9taXNlLl9wcm9ncmVzcywgbnVsbCwgbnVsbCwgcHJvbWlzZSwgdW5kZWZpbmVkKTtcbiAgICB9IGVsc2Uge1xuICAgICAgICBwcm9taXNlLl9wcm9ncmVzcyhyZXQpO1xuICAgIH1cbn07XG5cblxuUHJvbWlzZS5wcm90b3R5cGUuX3Byb2dyZXNzVW5jaGVja2VkID0gZnVuY3Rpb24gKHByb2dyZXNzVmFsdWUpIHtcbiAgICB2YXIgbGVuID0gdGhpcy5fbGVuZ3RoKCk7XG4gICAgdmFyIHByb2dyZXNzID0gdGhpcy5fcHJvZ3Jlc3M7XG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCBsZW47IGkrKykge1xuICAgICAgICB2YXIgaGFuZGxlciA9IHRoaXMuX3Byb2dyZXNzSGFuZGxlckF0KGkpO1xuICAgICAgICB2YXIgcHJvbWlzZSA9IHRoaXMuX3Byb21pc2VBdChpKTtcbiAgICAgICAgaWYgKCEocHJvbWlzZSBpbnN0YW5jZW9mIFByb21pc2UpKSB7XG4gICAgICAgICAgICB2YXIgcmVjZWl2ZXIgPSB0aGlzLl9yZWNlaXZlckF0KGkpO1xuICAgICAgICAgICAgaWYgKHR5cGVvZiBoYW5kbGVyID09PSBcImZ1bmN0aW9uXCIpIHtcbiAgICAgICAgICAgICAgICBoYW5kbGVyLmNhbGwocmVjZWl2ZXIsIHByb2dyZXNzVmFsdWUsIHByb21pc2UpO1xuICAgICAgICAgICAgfSBlbHNlIGlmIChyZWNlaXZlciBpbnN0YW5jZW9mIFByb21pc2VBcnJheSAmJlxuICAgICAgICAgICAgICAgICAgICAgICAhcmVjZWl2ZXIuX2lzUmVzb2x2ZWQoKSkge1xuICAgICAgICAgICAgICAgIHJlY2VpdmVyLl9wcm9taXNlUHJvZ3Jlc3NlZChwcm9ncmVzc1ZhbHVlLCBwcm9taXNlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKHR5cGVvZiBoYW5kbGVyID09PSBcImZ1bmN0aW9uXCIpIHtcbiAgICAgICAgICAgIGFzeW5jLmludm9rZSh0aGlzLl9kb1Byb2dyZXNzV2l0aCwgdGhpcywge1xuICAgICAgICAgICAgICAgIGhhbmRsZXI6IGhhbmRsZXIsXG4gICAgICAgICAgICAgICAgcHJvbWlzZTogcHJvbWlzZSxcbiAgICAgICAgICAgICAgICByZWNlaXZlcjogdGhpcy5fcmVjZWl2ZXJBdChpKSxcbiAgICAgICAgICAgICAgICB2YWx1ZTogcHJvZ3Jlc3NWYWx1ZVxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBhc3luYy5pbnZva2UocHJvZ3Jlc3MsIHByb21pc2UsIHByb2dyZXNzVmFsdWUpO1xuICAgICAgICB9XG4gICAgfVxufTtcbn07XG4iLCIoZnVuY3Rpb24gKHByb2Nlc3Mpe1xuXCJ1c2Ugc3RyaWN0XCI7XG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uKCkge1xudmFyIG1ha2VTZWxmUmVzb2x1dGlvbkVycm9yID0gZnVuY3Rpb24gKCkge1xuICAgIHJldHVybiBuZXcgVHlwZUVycm9yKFwiY2lyY3VsYXIgcHJvbWlzZSByZXNvbHV0aW9uIGNoYWluXFx1MDAwYVxcdTAwMGEgICAgU2VlIGh0dHA6Ly9nb28uZ2wvTGhGcG8wXFx1MDAwYVwiKTtcbn07XG52YXIgcmVmbGVjdCA9IGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiBuZXcgUHJvbWlzZS5Qcm9taXNlSW5zcGVjdGlvbih0aGlzLl90YXJnZXQoKSk7XG59O1xudmFyIHV0aWwgPSByZXF1aXJlKFwiLi91dGlsLmpzXCIpO1xudmFyIGFzeW5jID0gcmVxdWlyZShcIi4vYXN5bmMuanNcIik7XG52YXIgZXJyb3JzID0gcmVxdWlyZShcIi4vZXJyb3JzLmpzXCIpO1xudmFyIElOVEVSTkFMID0gZnVuY3Rpb24oKXt9O1xudmFyIEFQUExZID0ge307XG52YXIgTkVYVF9GSUxURVIgPSB7ZTogbnVsbH07XG52YXIgYXBpUmVqZWN0aW9uID0gcmVxdWlyZShcIi4vZXJyb3JzX2FwaV9yZWplY3Rpb25cIikoUHJvbWlzZSk7XG52YXIgdHJ5Q29udmVydFRvUHJvbWlzZSA9IHJlcXVpcmUoXCIuL3RoZW5hYmxlcy5qc1wiKShQcm9taXNlLCBJTlRFUk5BTCk7XG52YXIgUHJvbWlzZUFycmF5ID1cbiAgICByZXF1aXJlKFwiLi9wcm9taXNlX2FycmF5LmpzXCIpKFByb21pc2UsIElOVEVSTkFMLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdHJ5Q29udmVydFRvUHJvbWlzZSwgYXBpUmVqZWN0aW9uKTtcbnZhciBDYXB0dXJlZFRyYWNlID0gcmVxdWlyZShcIi4vY2FwdHVyZWRfdHJhY2UuanNcIikoKTtcbnZhciBDYXRjaEZpbHRlciA9IHJlcXVpcmUoXCIuL2NhdGNoX2ZpbHRlci5qc1wiKShORVhUX0ZJTFRFUik7XG52YXIgUHJvbWlzZVJlc29sdmVyID0gcmVxdWlyZShcIi4vcHJvbWlzZV9yZXNvbHZlci5qc1wiKTtcbnZhciBpc0FycmF5ID0gdXRpbC5pc0FycmF5O1xudmFyIGVycm9yT2JqID0gdXRpbC5lcnJvck9iajtcbnZhciB0cnlDYXRjaDAgPSB1dGlsLnRyeUNhdGNoMDtcbnZhciB0cnlDYXRjaDEgPSB1dGlsLnRyeUNhdGNoMTtcbnZhciB0cnlDYXRjaDIgPSB1dGlsLnRyeUNhdGNoMjtcbnZhciB0cnlDYXRjaEFwcGx5ID0gdXRpbC50cnlDYXRjaEFwcGx5O1xudmFyIFJhbmdlRXJyb3IgPSBlcnJvcnMuUmFuZ2VFcnJvcjtcbnZhciBUeXBlRXJyb3IgPSBlcnJvcnMuVHlwZUVycm9yO1xudmFyIENhbmNlbGxhdGlvbkVycm9yID0gZXJyb3JzLkNhbmNlbGxhdGlvbkVycm9yO1xudmFyIFRpbWVvdXRFcnJvciA9IGVycm9ycy5UaW1lb3V0RXJyb3I7XG52YXIgT3BlcmF0aW9uYWxFcnJvciA9IGVycm9ycy5PcGVyYXRpb25hbEVycm9yO1xudmFyIG9yaWdpbmF0ZXNGcm9tUmVqZWN0aW9uID0gZXJyb3JzLm9yaWdpbmF0ZXNGcm9tUmVqZWN0aW9uO1xudmFyIG1hcmtBc09yaWdpbmF0aW5nRnJvbVJlamVjdGlvbiA9IGVycm9ycy5tYXJrQXNPcmlnaW5hdGluZ0Zyb21SZWplY3Rpb247XG52YXIgY2FuQXR0YWNoVHJhY2UgPSBlcnJvcnMuY2FuQXR0YWNoVHJhY2U7XG52YXIgdW5oYW5kbGVkUmVqZWN0aW9uSGFuZGxlZDtcbnZhciBwb3NzaWJseVVuaGFuZGxlZFJlamVjdGlvbjtcblxudmFyIGRlYnVnZ2luZyA9IGZhbHNlIHx8ICEhKFxuICAgIHR5cGVvZiBwcm9jZXNzICE9PSBcInVuZGVmaW5lZFwiICYmXG4gICAgdHlwZW9mIHByb2Nlc3MuZXhlY1BhdGggPT09IFwic3RyaW5nXCIgJiZcbiAgICB0eXBlb2YgcHJvY2Vzcy5lbnYgPT09IFwib2JqZWN0XCIgJiZcbiAgICAocHJvY2Vzcy5lbnZbXCJCTFVFQklSRF9ERUJVR1wiXSB8fFxuICAgICAgICBwcm9jZXNzLmVudltcIk5PREVfRU5WXCJdID09PSBcImRldmVsb3BtZW50XCIpXG4pO1xuZnVuY3Rpb24gUHJvbWlzZShyZXNvbHZlcikge1xuICAgIGlmICh0eXBlb2YgcmVzb2x2ZXIgIT09IFwiZnVuY3Rpb25cIikge1xuICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKFwidGhlIHByb21pc2UgY29uc3RydWN0b3IgcmVxdWlyZXMgYSByZXNvbHZlciBmdW5jdGlvblxcdTAwMGFcXHUwMDBhICAgIFNlZSBodHRwOi8vZ29vLmdsL0VDMjJZblxcdTAwMGFcIik7XG4gICAgfVxuICAgIGlmICh0aGlzLmNvbnN0cnVjdG9yICE9PSBQcm9taXNlKSB7XG4gICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoXCJ0aGUgcHJvbWlzZSBjb25zdHJ1Y3RvciBjYW5ub3QgYmUgaW52b2tlZCBkaXJlY3RseVxcdTAwMGFcXHUwMDBhICAgIFNlZSBodHRwOi8vZ29vLmdsL0tzSWxnZVxcdTAwMGFcIik7XG4gICAgfVxuICAgIHRoaXMuX2JpdEZpZWxkID0gMDtcbiAgICB0aGlzLl9mdWxmaWxsbWVudEhhbmRsZXIwID0gdW5kZWZpbmVkO1xuICAgIHRoaXMuX3JlamVjdGlvbkhhbmRsZXIwID0gdW5kZWZpbmVkO1xuICAgIHRoaXMuX3Byb2dyZXNzSGFuZGxlcjAgPSB1bmRlZmluZWQ7XG4gICAgdGhpcy5fcHJvbWlzZTAgPSB1bmRlZmluZWQ7XG4gICAgdGhpcy5fcmVjZWl2ZXIwID0gdW5kZWZpbmVkO1xuICAgIHRoaXMuX3NldHRsZWRWYWx1ZSA9IHVuZGVmaW5lZDtcbiAgICB0aGlzLl9ib3VuZFRvID0gdW5kZWZpbmVkO1xuICAgIGlmIChyZXNvbHZlciAhPT0gSU5URVJOQUwpIHRoaXMuX3Jlc29sdmVGcm9tUmVzb2x2ZXIocmVzb2x2ZXIpO1xufVxuXG5Qcm9taXNlLnByb3RvdHlwZS5iaW5kID0gZnVuY3Rpb24gKHRoaXNBcmcpIHtcbiAgICB2YXIgbWF5YmVQcm9taXNlID0gdHJ5Q29udmVydFRvUHJvbWlzZSh0aGlzQXJnLCB0aGlzKTtcbiAgICB2YXIgcmV0ID0gbmV3IFByb21pc2UoSU5URVJOQUwpO1xuICAgIHJldC5fcHJvcGFnYXRlRnJvbSh0aGlzLCAxKTtcbiAgICB2YXIgdGFyZ2V0ID0gdGhpcy5fdGFyZ2V0KCk7XG4gICAgaWYgKG1heWJlUHJvbWlzZSBpbnN0YW5jZW9mIFByb21pc2UpIHtcbiAgICAgICAgdGFyZ2V0Ll90aGVuKElOVEVSTkFMLCByZXQuX3JlamVjdCwgcmV0Ll9wcm9ncmVzcywgcmV0LCBudWxsKTtcbiAgICAgICAgbWF5YmVQcm9taXNlLl90aGVuKGZ1bmN0aW9uKHRoaXNBcmcpIHtcbiAgICAgICAgICAgIGlmIChyZXQuX2lzUGVuZGluZygpKSB7XG4gICAgICAgICAgICAgICAgcmV0Ll9zZXRCb3VuZFRvKHRoaXNBcmcpO1xuICAgICAgICAgICAgICAgIHJldC5fZm9sbG93KHRhcmdldCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0sIHJldC5fcmVqZWN0LCByZXQuX3Byb2dyZXNzLCByZXQsIG51bGwpO1xuICAgIH0gZWxzZSB7XG4gICAgICAgIHJldC5fc2V0Qm91bmRUbyh0aGlzQXJnKTtcbiAgICAgICAgcmV0Ll9mb2xsb3codGFyZ2V0KTtcbiAgICB9XG5cbiAgICByZXR1cm4gcmV0O1xufTtcblxuUHJvbWlzZS5wcm90b3R5cGUudG9TdHJpbmcgPSBmdW5jdGlvbiAoKSB7XG4gICAgcmV0dXJuIFwiW29iamVjdCBQcm9taXNlXVwiO1xufTtcblxuUHJvbWlzZS5wcm90b3R5cGUuY2F1Z2h0ID0gUHJvbWlzZS5wcm90b3R5cGVbXCJjYXRjaFwiXSA9IGZ1bmN0aW9uIChmbikge1xuICAgIHZhciBsZW4gPSBhcmd1bWVudHMubGVuZ3RoO1xuICAgIGlmIChsZW4gPiAxKSB7XG4gICAgICAgIHZhciBjYXRjaEluc3RhbmNlcyA9IG5ldyBBcnJheShsZW4gLSAxKSxcbiAgICAgICAgICAgIGogPSAwLCBpO1xuICAgICAgICBmb3IgKGkgPSAwOyBpIDwgbGVuIC0gMTsgKytpKSB7XG4gICAgICAgICAgICB2YXIgaXRlbSA9IGFyZ3VtZW50c1tpXTtcbiAgICAgICAgICAgIGlmICh0eXBlb2YgaXRlbSA9PT0gXCJmdW5jdGlvblwiKSB7XG4gICAgICAgICAgICAgICAgY2F0Y2hJbnN0YW5jZXNbaisrXSA9IGl0ZW07XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIHZhciBlcnJvciA9IG5ldyBUeXBlRXJyb3IoXCJDYXRjaCBmaWx0ZXIgbXVzdCBpbmhlcml0IGZyb20gRXJyb3Igb3IgYmUgYSBzaW1wbGUgcHJlZGljYXRlIGZ1bmN0aW9uXFx1MDAwYVxcdTAwMGEgICAgU2VlIGh0dHA6Ly9nb28uZ2wvbzg0bzY4XFx1MDAwYVwiKTtcbiAgICAgICAgICAgICAgICB0aGlzLl9hdHRhY2hFeHRyYVRyYWNlKGVycm9yKTtcbiAgICAgICAgICAgICAgICByZXR1cm4gUHJvbWlzZS5yZWplY3QoZXJyb3IpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGNhdGNoSW5zdGFuY2VzLmxlbmd0aCA9IGo7XG4gICAgICAgIGZuID0gYXJndW1lbnRzW2ldO1xuICAgICAgICB2YXIgY2F0Y2hGaWx0ZXIgPSBuZXcgQ2F0Y2hGaWx0ZXIoY2F0Y2hJbnN0YW5jZXMsIGZuLCB0aGlzKTtcbiAgICAgICAgcmV0dXJuIHRoaXMuX3RoZW4odW5kZWZpbmVkLCBjYXRjaEZpbHRlci5kb0ZpbHRlciwgdW5kZWZpbmVkLFxuICAgICAgICAgICAgY2F0Y2hGaWx0ZXIsIHVuZGVmaW5lZCk7XG4gICAgfVxuICAgIHJldHVybiB0aGlzLl90aGVuKHVuZGVmaW5lZCwgZm4sIHVuZGVmaW5lZCwgdW5kZWZpbmVkLCB1bmRlZmluZWQpO1xufTtcblxuUHJvbWlzZS5wcm90b3R5cGUucmVmbGVjdCA9IGZ1bmN0aW9uICgpIHtcbiAgICByZXR1cm4gdGhpcy5fdGhlbihyZWZsZWN0LCByZWZsZWN0LCB1bmRlZmluZWQsIHRoaXMsIHVuZGVmaW5lZCk7XG59O1xuXG5Qcm9taXNlLnByb3RvdHlwZS50aGVuID0gZnVuY3Rpb24gKGRpZEZ1bGZpbGwsIGRpZFJlamVjdCwgZGlkUHJvZ3Jlc3MpIHtcbiAgICByZXR1cm4gdGhpcy5fdGhlbihkaWRGdWxmaWxsLCBkaWRSZWplY3QsIGRpZFByb2dyZXNzLFxuICAgICAgICB1bmRlZmluZWQsIHVuZGVmaW5lZCk7XG59O1xuXG5cblByb21pc2UucHJvdG90eXBlLmRvbmUgPSBmdW5jdGlvbiAoZGlkRnVsZmlsbCwgZGlkUmVqZWN0LCBkaWRQcm9ncmVzcykge1xuICAgIHZhciBwcm9taXNlID0gdGhpcy5fdGhlbihkaWRGdWxmaWxsLCBkaWRSZWplY3QsIGRpZFByb2dyZXNzLFxuICAgICAgICB1bmRlZmluZWQsIHVuZGVmaW5lZCk7XG4gICAgcHJvbWlzZS5fc2V0SXNGaW5hbCgpO1xufTtcblxuUHJvbWlzZS5wcm90b3R5cGUuc3ByZWFkID0gZnVuY3Rpb24gKGRpZEZ1bGZpbGwsIGRpZFJlamVjdCkge1xuICAgIHZhciBmb2xsb3dlZSA9IHRoaXMuX3RhcmdldCgpO1xuICAgIHZhciB0YXJnZXQgPSBmb2xsb3dlZS5faXNTcHJlYWRhYmxlKClcbiAgICAgICAgPyAoZm9sbG93ZWUgPT09IHRoaXMgPyB0aGlzIDogdGhpcy50aGVuKCkpXG4gICAgICAgIDogdGhpcy5hbGwoKTtcbiAgICByZXR1cm4gdGFyZ2V0Ll90aGVuKGRpZEZ1bGZpbGwsIGRpZFJlamVjdCwgdW5kZWZpbmVkLCBBUFBMWSwgdW5kZWZpbmVkKTtcbn07XG5cblByb21pc2UucHJvdG90eXBlLmlzQ2FuY2VsbGFibGUgPSBmdW5jdGlvbiAoKSB7XG4gICAgcmV0dXJuICF0aGlzLmlzUmVzb2x2ZWQoKSAmJlxuICAgICAgICB0aGlzLl9jYW5jZWxsYWJsZSgpO1xufTtcblxuUHJvbWlzZS5wcm90b3R5cGUudG9KU09OID0gZnVuY3Rpb24gKCkge1xuICAgIHZhciByZXQgPSB7XG4gICAgICAgIGlzRnVsZmlsbGVkOiBmYWxzZSxcbiAgICAgICAgaXNSZWplY3RlZDogZmFsc2UsXG4gICAgICAgIGZ1bGZpbGxtZW50VmFsdWU6IHVuZGVmaW5lZCxcbiAgICAgICAgcmVqZWN0aW9uUmVhc29uOiB1bmRlZmluZWRcbiAgICB9O1xuICAgIGlmICh0aGlzLmlzRnVsZmlsbGVkKCkpIHtcbiAgICAgICAgcmV0LmZ1bGZpbGxtZW50VmFsdWUgPSB0aGlzLnZhbHVlKCk7XG4gICAgICAgIHJldC5pc0Z1bGZpbGxlZCA9IHRydWU7XG4gICAgfSBlbHNlIGlmICh0aGlzLmlzUmVqZWN0ZWQoKSkge1xuICAgICAgICByZXQucmVqZWN0aW9uUmVhc29uID0gdGhpcy5yZWFzb24oKTtcbiAgICAgICAgcmV0LmlzUmVqZWN0ZWQgPSB0cnVlO1xuICAgIH1cbiAgICByZXR1cm4gcmV0O1xufTtcblxuUHJvbWlzZS5wcm90b3R5cGUuYWxsID0gZnVuY3Rpb24gKCkge1xuICAgIHZhciByZXQgPSBuZXcgUHJvbWlzZUFycmF5KHRoaXMpLnByb21pc2UoKTtcbiAgICByZXQuX3NldElzU3ByZWFkYWJsZSgpO1xuICAgIHJldHVybiByZXQ7XG59O1xuXG5Qcm9taXNlLnByb3RvdHlwZS5lcnJvciA9IGZ1bmN0aW9uIChmbikge1xuICAgIHJldHVybiB0aGlzLmNhdWdodChvcmlnaW5hdGVzRnJvbVJlamVjdGlvbiwgZm4pO1xufTtcblxuUHJvbWlzZS5pcyA9IGZ1bmN0aW9uICh2YWwpIHtcbiAgICByZXR1cm4gdmFsIGluc3RhbmNlb2YgUHJvbWlzZTtcbn07XG5cblByb21pc2UuYWxsID0gZnVuY3Rpb24gKHByb21pc2VzKSB7XG4gICAgdmFyIHJldCA9IG5ldyBQcm9taXNlQXJyYXkocHJvbWlzZXMpLnByb21pc2UoKTtcbiAgICByZXQuX3NldElzU3ByZWFkYWJsZSgpO1xuICAgIHJldHVybiByZXQ7XG59O1xuXG5Qcm9taXNlLm1ldGhvZCA9IGZ1bmN0aW9uIChmbikge1xuICAgIGlmICh0eXBlb2YgZm4gIT09IFwiZnVuY3Rpb25cIikge1xuICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKFwiZm4gbXVzdCBiZSBhIGZ1bmN0aW9uXFx1MDAwYVxcdTAwMGEgICAgU2VlIGh0dHA6Ly9nb28uZ2wvOTE2bEpKXFx1MDAwYVwiKTtcbiAgICB9XG4gICAgcmV0dXJuIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIHJldCA9IG5ldyBQcm9taXNlKElOVEVSTkFMKTtcbiAgICAgICAgcmV0Ll9jYXB0dXJlU3RhY2tUcmFjZSgpO1xuICAgICAgICB2YXIgdmFsdWU7XG4gICAgICAgIHJldC5fcHVzaENvbnRleHQoKTtcbiAgICAgICAgc3dpdGNoKGFyZ3VtZW50cy5sZW5ndGgpIHtcbiAgICAgICAgY2FzZSAwOiB2YWx1ZSA9IHRyeUNhdGNoMChmbiwgdGhpcyk7IGJyZWFrO1xuICAgICAgICBjYXNlIDE6IHZhbHVlID0gdHJ5Q2F0Y2gxKGZuLCB0aGlzLCBhcmd1bWVudHNbMF0pOyBicmVhaztcbiAgICAgICAgY2FzZSAyOiB2YWx1ZSA9IHRyeUNhdGNoMihmbiwgdGhpcywgYXJndW1lbnRzWzBdLCBhcmd1bWVudHNbMV0pOyBicmVhaztcbiAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgIHZhciAkX2xlbiA9IGFyZ3VtZW50cy5sZW5ndGg7dmFyIGFyZ3MgPSBuZXcgQXJyYXkoJF9sZW4pOyBmb3IodmFyICRfaSA9IDA7ICRfaSA8ICRfbGVuOyArKyRfaSkge2FyZ3NbJF9pXSA9IGFyZ3VtZW50c1skX2ldO31cbiAgICAgICAgICAgIHZhbHVlID0gdHJ5Q2F0Y2hBcHBseShmbiwgYXJncywgdGhpcyk7IGJyZWFrO1xuICAgICAgICB9XG4gICAgICAgIHJldC5fcG9wQ29udGV4dCgpO1xuICAgICAgICByZXQuX3Jlc29sdmVGcm9tU3luY1ZhbHVlKHZhbHVlKTtcbiAgICAgICAgcmV0dXJuIHJldDtcbiAgICB9O1xufTtcblxuUHJvbWlzZS5hdHRlbXB0ID0gUHJvbWlzZVtcInRyeVwiXSA9IGZ1bmN0aW9uIChmbiwgYXJncywgY3R4KSB7XG4gICAgaWYgKHR5cGVvZiBmbiAhPT0gXCJmdW5jdGlvblwiKSB7XG4gICAgICAgIHJldHVybiBhcGlSZWplY3Rpb24oXCJmbiBtdXN0IGJlIGEgZnVuY3Rpb25cXHUwMDBhXFx1MDAwYSAgICBTZWUgaHR0cDovL2dvby5nbC85MTZsSkpcXHUwMDBhXCIpO1xuICAgIH1cbiAgICB2YXIgcmV0ID0gbmV3IFByb21pc2UoSU5URVJOQUwpO1xuICAgIHJldC5fY2FwdHVyZVN0YWNrVHJhY2UoKTtcbiAgICByZXQuX3B1c2hDb250ZXh0KCk7XG4gICAgdmFyIHZhbHVlID0gaXNBcnJheShhcmdzKVxuICAgICAgICA/IHRyeUNhdGNoQXBwbHkoZm4sIGFyZ3MsIGN0eClcbiAgICAgICAgOiB0cnlDYXRjaDEoZm4sIGN0eCwgYXJncyk7XG4gICAgcmV0Ll9wb3BDb250ZXh0KCk7XG4gICAgcmV0Ll9yZXNvbHZlRnJvbVN5bmNWYWx1ZSh2YWx1ZSk7XG4gICAgcmV0dXJuIHJldDtcbn07XG5cblByb21pc2UuZGVmZXIgPSBQcm9taXNlLnBlbmRpbmcgPSBmdW5jdGlvbiAoKSB7XG4gICAgdmFyIHByb21pc2UgPSBuZXcgUHJvbWlzZShJTlRFUk5BTCk7XG4gICAgcmV0dXJuIG5ldyBQcm9taXNlUmVzb2x2ZXIocHJvbWlzZSk7XG59O1xuXG5Qcm9taXNlLmJpbmQgPSBmdW5jdGlvbiAodGhpc0FyZykge1xuICAgIHZhciBtYXliZVByb21pc2UgPSB0cnlDb252ZXJ0VG9Qcm9taXNlKHRoaXNBcmcsIHVuZGVmaW5lZCk7XG4gICAgdmFyIHJldCA9IG5ldyBQcm9taXNlKElOVEVSTkFMKTtcblxuICAgIGlmIChtYXliZVByb21pc2UgaW5zdGFuY2VvZiBQcm9taXNlKSB7XG4gICAgICAgIG1heWJlUHJvbWlzZS5fdGhlbihmdW5jdGlvbih0aGlzQXJnKSB7XG4gICAgICAgICAgICByZXQuX3NldEJvdW5kVG8odGhpc0FyZyk7XG4gICAgICAgICAgICByZXQuX2Z1bGZpbGwodW5kZWZpbmVkKTtcbiAgICAgICAgfSwgcmV0Ll9yZWplY3QsIHJldC5fcHJvZ3Jlc3MsIHJldCwgbnVsbCk7XG4gICAgfSBlbHNlIHtcbiAgICAgICAgcmV0Ll9zZXRCb3VuZFRvKHRoaXNBcmcpO1xuICAgICAgICByZXQuX3NldEZ1bGZpbGxlZCgpO1xuICAgIH1cbiAgICByZXR1cm4gcmV0O1xufTtcblxuUHJvbWlzZS5jYXN0ID0gZnVuY3Rpb24gKG9iaikge1xuICAgIHZhciByZXQgPSB0cnlDb252ZXJ0VG9Qcm9taXNlKG9iaiwgdW5kZWZpbmVkKTtcbiAgICBpZiAoIShyZXQgaW5zdGFuY2VvZiBQcm9taXNlKSkge1xuICAgICAgICB2YXIgdmFsID0gcmV0O1xuICAgICAgICByZXQgPSBuZXcgUHJvbWlzZShJTlRFUk5BTCk7XG4gICAgICAgIHJldC5fc2V0RnVsZmlsbGVkKCk7XG4gICAgICAgIHJldC5fc2V0dGxlZFZhbHVlID0gdmFsO1xuICAgICAgICByZXQuX2NsZWFuVmFsdWVzKCk7XG4gICAgfVxuICAgIHJldHVybiByZXQ7XG59O1xuXG5Qcm9taXNlLnJlc29sdmUgPSBQcm9taXNlLmZ1bGZpbGxlZCA9IFByb21pc2UuY2FzdDtcblxuUHJvbWlzZS5yZWplY3QgPSBQcm9taXNlLnJlamVjdGVkID0gZnVuY3Rpb24gKHJlYXNvbikge1xuICAgIHZhciByZXQgPSBuZXcgUHJvbWlzZShJTlRFUk5BTCk7XG4gICAgcmV0Ll9jYXB0dXJlU3RhY2tUcmFjZSgpO1xuICAgIG1hcmtBc09yaWdpbmF0aW5nRnJvbVJlamVjdGlvbihyZWFzb24pO1xuICAgIHZhciBoYXNTdGFjayA9IGNhbkF0dGFjaFRyYWNlKHJlYXNvbikgJiYgdHlwZW9mIHJlYXNvbi5zdGFjayA9PT0gXCJzdHJpbmdcIjtcbiAgICB2YXIgdHJhY2UgPSBlcnJvcnMuZW5zdXJlRXJyb3JPYmplY3QocmVhc29uKTtcbiAgICByZXQuX2F0dGFjaEV4dHJhVHJhY2UocmVhc29uLCBoYXNTdGFjayk7XG4gICAgcmV0Ll9yZWplY3RVbmNoZWNrZWQocmVhc29uLCB0cmFjZSA9PT0gcmVhc29uID8gdW5kZWZpbmVkIDogdHJhY2UpO1xuICAgIHJldHVybiByZXQ7XG59O1xuXG5Qcm9taXNlLm9uUG9zc2libHlVbmhhbmRsZWRSZWplY3Rpb24gPSBmdW5jdGlvbiAoZm4pIHtcbiAgICBwb3NzaWJseVVuaGFuZGxlZFJlamVjdGlvbiA9IHR5cGVvZiBmbiA9PT0gXCJmdW5jdGlvblwiID8gZm4gOiB1bmRlZmluZWQ7XG59O1xuXG5Qcm9taXNlLm9uVW5oYW5kbGVkUmVqZWN0aW9uSGFuZGxlZCA9IGZ1bmN0aW9uIChmbikge1xuICAgIHVuaGFuZGxlZFJlamVjdGlvbkhhbmRsZWQgPSB0eXBlb2YgZm4gPT09IFwiZnVuY3Rpb25cIiA/IGZuIDogdW5kZWZpbmVkO1xufTtcblxuUHJvbWlzZS5sb25nU3RhY2tUcmFjZXMgPSBmdW5jdGlvbiAoKSB7XG4gICAgaWYgKGFzeW5jLmhhdmVJdGVtc1F1ZXVlZCgpICYmXG4gICAgICAgIGRlYnVnZ2luZyA9PT0gZmFsc2VcbiAgICkge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJjYW5ub3QgZW5hYmxlIGxvbmcgc3RhY2sgdHJhY2VzIGFmdGVyIHByb21pc2VzIGhhdmUgYmVlbiBjcmVhdGVkXFx1MDAwYVxcdTAwMGEgICAgU2VlIGh0dHA6Ly9nb28uZ2wvRFQxcXlHXFx1MDAwYVwiKTtcbiAgICB9XG4gICAgZGVidWdnaW5nID0gQ2FwdHVyZWRUcmFjZS5pc1N1cHBvcnRlZCgpO1xufTtcblxuUHJvbWlzZS5oYXNMb25nU3RhY2tUcmFjZXMgPSBmdW5jdGlvbiAoKSB7XG4gICAgcmV0dXJuIGRlYnVnZ2luZyAmJiBDYXB0dXJlZFRyYWNlLmlzU3VwcG9ydGVkKCk7XG59O1xuXG5Qcm9taXNlLnNldFNjaGVkdWxlciA9IGZ1bmN0aW9uKGZuKSB7XG4gICAgaWYgKHR5cGVvZiBmbiAhPT0gXCJmdW5jdGlvblwiKSB0aHJvdyBuZXcgVHlwZUVycm9yKFwiZm4gbXVzdCBiZSBhIGZ1bmN0aW9uXFx1MDAwYVxcdTAwMGEgICAgU2VlIGh0dHA6Ly9nb28uZ2wvOTE2bEpKXFx1MDAwYVwiKTtcbiAgICBhc3luYy5fc2NoZWR1bGUgPSBmbjtcbn07XG5cblByb21pc2UucHJvdG90eXBlLl90aGVuID0gZnVuY3Rpb24gKFxuICAgIGRpZEZ1bGZpbGwsXG4gICAgZGlkUmVqZWN0LFxuICAgIGRpZFByb2dyZXNzLFxuICAgIHJlY2VpdmVyLFxuICAgIGludGVybmFsRGF0YVxuKSB7XG4gICAgdmFyIGhhdmVJbnRlcm5hbERhdGEgPSBpbnRlcm5hbERhdGEgIT09IHVuZGVmaW5lZDtcbiAgICB2YXIgcmV0ID0gaGF2ZUludGVybmFsRGF0YSA/IGludGVybmFsRGF0YSA6IG5ldyBQcm9taXNlKElOVEVSTkFMKTtcblxuICAgIGlmICghaGF2ZUludGVybmFsRGF0YSkge1xuICAgICAgICByZXQuX3Byb3BhZ2F0ZUZyb20odGhpcywgNCB8IDEpO1xuICAgICAgICByZXQuX2NhcHR1cmVTdGFja1RyYWNlKCk7XG4gICAgfVxuXG4gICAgdmFyIHRhcmdldCA9IHRoaXMuX3RhcmdldCgpO1xuICAgIGlmICh0YXJnZXQgIT09IHRoaXMpIHtcbiAgICAgICAgaWYgKHJlY2VpdmVyID09PSB1bmRlZmluZWQpIHJlY2VpdmVyID0gdGhpcy5fYm91bmRUbztcbiAgICAgICAgaWYgKCFoYXZlSW50ZXJuYWxEYXRhKSByZXQuX3NldElzTWlncmF0ZWQoKTtcbiAgICB9XG5cbiAgICB2YXIgY2FsbGJhY2tJbmRleCA9XG4gICAgICAgIHRhcmdldC5fYWRkQ2FsbGJhY2tzKGRpZEZ1bGZpbGwsIGRpZFJlamVjdCwgZGlkUHJvZ3Jlc3MsIHJldCwgcmVjZWl2ZXIpO1xuXG4gICAgaWYgKHRhcmdldC5faXNSZXNvbHZlZCgpICYmICF0YXJnZXQuX2lzU2V0dGxlUHJvbWlzZXNRdWV1ZWQoKSkge1xuICAgICAgICBhc3luYy5pbnZva2UoXG4gICAgICAgICAgICB0YXJnZXQuX3NldHRsZVByb21pc2VBdFBvc3RSZXNvbHV0aW9uLCB0YXJnZXQsIGNhbGxiYWNrSW5kZXgpO1xuICAgIH1cblxuICAgIHJldHVybiByZXQ7XG59O1xuXG5Qcm9taXNlLnByb3RvdHlwZS5fc2V0dGxlUHJvbWlzZUF0UG9zdFJlc29sdXRpb24gPSBmdW5jdGlvbiAoaW5kZXgpIHtcbiAgICBpZiAodGhpcy5faXNSZWplY3Rpb25VbmhhbmRsZWQoKSkgdGhpcy5fdW5zZXRSZWplY3Rpb25Jc1VuaGFuZGxlZCgpO1xuICAgIHRoaXMuX3NldHRsZVByb21pc2VBdChpbmRleCk7XG59O1xuXG5Qcm9taXNlLnByb3RvdHlwZS5fbGVuZ3RoID0gZnVuY3Rpb24gKCkge1xuICAgIHJldHVybiB0aGlzLl9iaXRGaWVsZCAmIDEzMTA3MTtcbn07XG5cblByb21pc2UucHJvdG90eXBlLl9pc0ZvbGxvd2luZ09yRnVsZmlsbGVkT3JSZWplY3RlZCA9IGZ1bmN0aW9uICgpIHtcbiAgICByZXR1cm4gKHRoaXMuX2JpdEZpZWxkICYgOTM5NTI0MDk2KSA+IDA7XG59O1xuXG5Qcm9taXNlLnByb3RvdHlwZS5faXNGb2xsb3dpbmcgPSBmdW5jdGlvbiAoKSB7XG4gICAgcmV0dXJuICh0aGlzLl9iaXRGaWVsZCAmIDUzNjg3MDkxMikgPT09IDUzNjg3MDkxMjtcbn07XG5cblByb21pc2UucHJvdG90eXBlLl9zZXRMZW5ndGggPSBmdW5jdGlvbiAobGVuKSB7XG4gICAgdGhpcy5fYml0RmllbGQgPSAodGhpcy5fYml0RmllbGQgJiAtMTMxMDcyKSB8XG4gICAgICAgIChsZW4gJiAxMzEwNzEpO1xufTtcblxuUHJvbWlzZS5wcm90b3R5cGUuX3NldEZ1bGZpbGxlZCA9IGZ1bmN0aW9uICgpIHtcbiAgICB0aGlzLl9iaXRGaWVsZCA9IHRoaXMuX2JpdEZpZWxkIHwgMjY4NDM1NDU2O1xufTtcblxuUHJvbWlzZS5wcm90b3R5cGUuX3NldFJlamVjdGVkID0gZnVuY3Rpb24gKCkge1xuICAgIHRoaXMuX2JpdEZpZWxkID0gdGhpcy5fYml0RmllbGQgfCAxMzQyMTc3Mjg7XG59O1xuXG5Qcm9taXNlLnByb3RvdHlwZS5fc2V0Rm9sbG93aW5nID0gZnVuY3Rpb24gKCkge1xuICAgIHRoaXMuX2JpdEZpZWxkID0gdGhpcy5fYml0RmllbGQgfCA1MzY4NzA5MTI7XG59O1xuXG5Qcm9taXNlLnByb3RvdHlwZS5fc2V0SXNGaW5hbCA9IGZ1bmN0aW9uICgpIHtcbiAgICB0aGlzLl9iaXRGaWVsZCA9IHRoaXMuX2JpdEZpZWxkIHwgMzM1NTQ0MzI7XG59O1xuXG5Qcm9taXNlLnByb3RvdHlwZS5faXNGaW5hbCA9IGZ1bmN0aW9uICgpIHtcbiAgICByZXR1cm4gKHRoaXMuX2JpdEZpZWxkICYgMzM1NTQ0MzIpID4gMDtcbn07XG5cblByb21pc2UucHJvdG90eXBlLl9jYW5jZWxsYWJsZSA9IGZ1bmN0aW9uICgpIHtcbiAgICByZXR1cm4gKHRoaXMuX2JpdEZpZWxkICYgNjcxMDg4NjQpID4gMDtcbn07XG5cblByb21pc2UucHJvdG90eXBlLl9zZXRDYW5jZWxsYWJsZSA9IGZ1bmN0aW9uICgpIHtcbiAgICB0aGlzLl9iaXRGaWVsZCA9IHRoaXMuX2JpdEZpZWxkIHwgNjcxMDg4NjQ7XG59O1xuXG5Qcm9taXNlLnByb3RvdHlwZS5fdW5zZXRDYW5jZWxsYWJsZSA9IGZ1bmN0aW9uICgpIHtcbiAgICB0aGlzLl9iaXRGaWVsZCA9IHRoaXMuX2JpdEZpZWxkICYgKH42NzEwODg2NCk7XG59O1xuXG5Qcm9taXNlLnByb3RvdHlwZS5fc2V0UmVqZWN0aW9uSXNVbmhhbmRsZWQgPSBmdW5jdGlvbiAoKSB7XG4gICAgdGhpcy5fYml0RmllbGQgPSB0aGlzLl9iaXRGaWVsZCB8IDIwOTcxNTI7XG59O1xuXG5Qcm9taXNlLnByb3RvdHlwZS5fdW5zZXRSZWplY3Rpb25Jc1VuaGFuZGxlZCA9IGZ1bmN0aW9uICgpIHtcbiAgICB0aGlzLl9iaXRGaWVsZCA9IHRoaXMuX2JpdEZpZWxkICYgKH4yMDk3MTUyKTtcbiAgICBpZiAodGhpcy5faXNVbmhhbmRsZWRSZWplY3Rpb25Ob3RpZmllZCgpKSB7XG4gICAgICAgIHRoaXMuX3Vuc2V0VW5oYW5kbGVkUmVqZWN0aW9uSXNOb3RpZmllZCgpO1xuICAgICAgICB0aGlzLl9ub3RpZnlVbmhhbmRsZWRSZWplY3Rpb25Jc0hhbmRsZWQoKTtcbiAgICB9XG59O1xuXG5Qcm9taXNlLnByb3RvdHlwZS5faXNSZWplY3Rpb25VbmhhbmRsZWQgPSBmdW5jdGlvbiAoKSB7XG4gICAgcmV0dXJuICh0aGlzLl9iaXRGaWVsZCAmIDIwOTcxNTIpID4gMDtcbn07XG5cblByb21pc2UucHJvdG90eXBlLl9pc1NwcmVhZGFibGUgPSBmdW5jdGlvbiAoKSB7XG4gICAgcmV0dXJuICh0aGlzLl9iaXRGaWVsZCAmIDEzMTA3MikgPiAwO1xufTtcblxuUHJvbWlzZS5wcm90b3R5cGUuX3NldElzU3ByZWFkYWJsZSA9IGZ1bmN0aW9uICgpIHtcbiAgICB0aGlzLl9iaXRGaWVsZCA9IHRoaXMuX2JpdEZpZWxkIHwgMTMxMDcyO1xufTtcblxuUHJvbWlzZS5wcm90b3R5cGUuX3NldElzTWlncmF0ZWQgPSBmdW5jdGlvbiAoKSB7XG4gICAgdGhpcy5fYml0RmllbGQgPSB0aGlzLl9iaXRGaWVsZCB8IDQxOTQzMDQ7XG59O1xuXG5Qcm9taXNlLnByb3RvdHlwZS5fdW5zZXRJc01pZ3JhdGVkID0gZnVuY3Rpb24gKCkge1xuICAgIHRoaXMuX2JpdEZpZWxkID0gdGhpcy5fYml0RmllbGQgJiAofjQxOTQzMDQpO1xufTtcblxuUHJvbWlzZS5wcm90b3R5cGUuX2lzTWlncmF0ZWQgPSBmdW5jdGlvbiAoKSB7XG4gICAgcmV0dXJuICh0aGlzLl9iaXRGaWVsZCAmIDQxOTQzMDQpID4gMDtcbn07XG5cblByb21pc2UucHJvdG90eXBlLl9zZXRVbmhhbmRsZWRSZWplY3Rpb25Jc05vdGlmaWVkID0gZnVuY3Rpb24gKCkge1xuICAgIHRoaXMuX2JpdEZpZWxkID0gdGhpcy5fYml0RmllbGQgfCA1MjQyODg7XG59O1xuXG5Qcm9taXNlLnByb3RvdHlwZS5fdW5zZXRVbmhhbmRsZWRSZWplY3Rpb25Jc05vdGlmaWVkID0gZnVuY3Rpb24gKCkge1xuICAgIHRoaXMuX2JpdEZpZWxkID0gdGhpcy5fYml0RmllbGQgJiAofjUyNDI4OCk7XG59O1xuXG5Qcm9taXNlLnByb3RvdHlwZS5faXNVbmhhbmRsZWRSZWplY3Rpb25Ob3RpZmllZCA9IGZ1bmN0aW9uICgpIHtcbiAgICByZXR1cm4gKHRoaXMuX2JpdEZpZWxkICYgNTI0Mjg4KSA+IDA7XG59O1xuXG5Qcm9taXNlLnByb3RvdHlwZS5fc2V0Q2FycmllZFN0YWNrVHJhY2UgPSBmdW5jdGlvbiAoY2FwdHVyZWRUcmFjZSkge1xuICAgIHRoaXMuX2JpdEZpZWxkID0gdGhpcy5fYml0RmllbGQgfCAxMDQ4NTc2O1xuICAgIHRoaXMuX2Z1bGZpbGxtZW50SGFuZGxlcjAgPSBjYXB0dXJlZFRyYWNlO1xufTtcblxuUHJvbWlzZS5wcm90b3R5cGUuX2lzQ2FycnlpbmdTdGFja1RyYWNlID0gZnVuY3Rpb24gKCkge1xuICAgIHJldHVybiAodGhpcy5fYml0RmllbGQgJiAxMDQ4NTc2KSA+IDA7XG59O1xuXG5Qcm9taXNlLnByb3RvdHlwZS5fZ2V0Q2FycmllZFN0YWNrVHJhY2UgPSBmdW5jdGlvbiAoKSB7XG4gICAgcmV0dXJuIHRoaXMuX2lzQ2FycnlpbmdTdGFja1RyYWNlKClcbiAgICAgICAgPyB0aGlzLl9mdWxmaWxsbWVudEhhbmRsZXIwXG4gICAgICAgIDogdW5kZWZpbmVkO1xufTtcblxuUHJvbWlzZS5wcm90b3R5cGUuX3JlY2VpdmVyQXQgPSBmdW5jdGlvbiAoaW5kZXgpIHtcbiAgICB2YXIgcmV0ID0gaW5kZXggPT09IDBcbiAgICAgICAgPyB0aGlzLl9yZWNlaXZlcjBcbiAgICAgICAgOiB0aGlzW1xuICAgICAgICAgICAgaW5kZXggKiA1IC0gNSArIDRdO1xuICAgIGlmICh0aGlzLl9pc0JvdW5kKCkgJiYgcmV0ID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2JvdW5kVG87XG4gICAgfVxuICAgIHJldHVybiByZXQ7XG59O1xuXG5Qcm9taXNlLnByb3RvdHlwZS5fcHJvbWlzZUF0ID0gZnVuY3Rpb24gKGluZGV4KSB7XG4gICAgcmV0dXJuIGluZGV4ID09PSAwXG4gICAgICAgID8gdGhpcy5fcHJvbWlzZTBcbiAgICAgICAgOiB0aGlzW2luZGV4ICogNSAtIDUgKyAzXTtcbn07XG5cblByb21pc2UucHJvdG90eXBlLl9mdWxmaWxsbWVudEhhbmRsZXJBdCA9IGZ1bmN0aW9uIChpbmRleCkge1xuICAgIHJldHVybiBpbmRleCA9PT0gMFxuICAgICAgICA/IHRoaXMuX2Z1bGZpbGxtZW50SGFuZGxlcjBcbiAgICAgICAgOiB0aGlzW2luZGV4ICogNSAtIDUgKyAwXTtcbn07XG5cblByb21pc2UucHJvdG90eXBlLl9yZWplY3Rpb25IYW5kbGVyQXQgPSBmdW5jdGlvbiAoaW5kZXgpIHtcbiAgICByZXR1cm4gaW5kZXggPT09IDBcbiAgICAgICAgPyB0aGlzLl9yZWplY3Rpb25IYW5kbGVyMFxuICAgICAgICA6IHRoaXNbaW5kZXggKiA1IC0gNSArIDFdO1xufTtcblxuUHJvbWlzZS5wcm90b3R5cGUuX21pZ3JhdGVDYWxsYmFja3MgPSBmdW5jdGlvbiAoXG4gICAgZnVsZmlsbCxcbiAgICByZWplY3QsXG4gICAgcHJvZ3Jlc3MsXG4gICAgcHJvbWlzZSxcbiAgICByZWNlaXZlclxuKSB7XG4gICAgaWYgKHByb21pc2UgaW5zdGFuY2VvZiBQcm9taXNlKSBwcm9taXNlLl9zZXRJc01pZ3JhdGVkKCk7XG4gICAgdGhpcy5fYWRkQ2FsbGJhY2tzKGZ1bGZpbGwsIHJlamVjdCwgcHJvZ3Jlc3MsIHByb21pc2UsIHJlY2VpdmVyKTtcbn07XG5cblByb21pc2UucHJvdG90eXBlLl9hZGRDYWxsYmFja3MgPSBmdW5jdGlvbiAoXG4gICAgZnVsZmlsbCxcbiAgICByZWplY3QsXG4gICAgcHJvZ3Jlc3MsXG4gICAgcHJvbWlzZSxcbiAgICByZWNlaXZlclxuKSB7XG4gICAgdmFyIGluZGV4ID0gdGhpcy5fbGVuZ3RoKCk7XG5cbiAgICBpZiAoaW5kZXggPj0gMTMxMDcxIC0gNSkge1xuICAgICAgICBpbmRleCA9IDA7XG4gICAgICAgIHRoaXMuX3NldExlbmd0aCgwKTtcbiAgICB9XG5cbiAgICBpZiAoaW5kZXggPT09IDApIHtcbiAgICAgICAgdGhpcy5fcHJvbWlzZTAgPSBwcm9taXNlO1xuICAgICAgICBpZiAocmVjZWl2ZXIgIT09IHVuZGVmaW5lZCkgdGhpcy5fcmVjZWl2ZXIwID0gcmVjZWl2ZXI7XG4gICAgICAgIGlmICh0eXBlb2YgZnVsZmlsbCA9PT0gXCJmdW5jdGlvblwiICYmICF0aGlzLl9pc0NhcnJ5aW5nU3RhY2tUcmFjZSgpKVxuICAgICAgICAgICAgdGhpcy5fZnVsZmlsbG1lbnRIYW5kbGVyMCA9IGZ1bGZpbGw7XG4gICAgICAgIGlmICh0eXBlb2YgcmVqZWN0ID09PSBcImZ1bmN0aW9uXCIpIHRoaXMuX3JlamVjdGlvbkhhbmRsZXIwID0gcmVqZWN0O1xuICAgICAgICBpZiAodHlwZW9mIHByb2dyZXNzID09PSBcImZ1bmN0aW9uXCIpIHRoaXMuX3Byb2dyZXNzSGFuZGxlcjAgPSBwcm9ncmVzcztcbiAgICB9IGVsc2Uge1xuICAgICAgICB2YXIgYmFzZSA9IGluZGV4ICogNSAtIDU7XG4gICAgICAgIHRoaXNbYmFzZSArIDNdID0gcHJvbWlzZTtcbiAgICAgICAgdGhpc1tiYXNlICsgNF0gPSByZWNlaXZlcjtcbiAgICAgICAgaWYgKHR5cGVvZiBmdWxmaWxsID09PSBcImZ1bmN0aW9uXCIpXG4gICAgICAgICAgICB0aGlzW2Jhc2UgKyAwXSA9IGZ1bGZpbGw7XG4gICAgICAgIGlmICh0eXBlb2YgcmVqZWN0ID09PSBcImZ1bmN0aW9uXCIpXG4gICAgICAgICAgICB0aGlzW2Jhc2UgKyAxXSA9IHJlamVjdDtcbiAgICAgICAgaWYgKHR5cGVvZiBwcm9ncmVzcyA9PT0gXCJmdW5jdGlvblwiKVxuICAgICAgICAgICAgdGhpc1tiYXNlICsgMl0gPSBwcm9ncmVzcztcbiAgICB9XG4gICAgdGhpcy5fc2V0TGVuZ3RoKGluZGV4ICsgMSk7XG4gICAgcmV0dXJuIGluZGV4O1xufTtcblxuUHJvbWlzZS5wcm90b3R5cGUuX3NldFByb3h5SGFuZGxlcnMgPSBmdW5jdGlvbiAocmVjZWl2ZXIsIHByb21pc2VTbG90VmFsdWUpIHtcbiAgICB2YXIgaW5kZXggPSB0aGlzLl9sZW5ndGgoKTtcblxuICAgIGlmIChpbmRleCA+PSAxMzEwNzEgLSA1KSB7XG4gICAgICAgIGluZGV4ID0gMDtcbiAgICAgICAgdGhpcy5fc2V0TGVuZ3RoKDApO1xuICAgIH1cbiAgICBpZiAoaW5kZXggPT09IDApIHtcbiAgICAgICAgdGhpcy5fcHJvbWlzZTAgPSBwcm9taXNlU2xvdFZhbHVlO1xuICAgICAgICB0aGlzLl9yZWNlaXZlcjAgPSByZWNlaXZlcjtcbiAgICB9IGVsc2Uge1xuICAgICAgICB2YXIgYmFzZSA9IGluZGV4ICogNSAtIDU7XG4gICAgICAgIHRoaXNbYmFzZSArIDNdID0gcHJvbWlzZVNsb3RWYWx1ZTtcbiAgICAgICAgdGhpc1tiYXNlICsgNF0gPSByZWNlaXZlcjtcbiAgICB9XG4gICAgdGhpcy5fc2V0TGVuZ3RoKGluZGV4ICsgMSk7XG59O1xuXG5Qcm9taXNlLnByb3RvdHlwZS5fcHJveHlQcm9taXNlQXJyYXkgPSBmdW5jdGlvbiAocHJvbWlzZUFycmF5LCBpbmRleCkge1xuICAgIHRoaXMuX3NldFByb3h5SGFuZGxlcnMocHJvbWlzZUFycmF5LCBpbmRleCk7XG59O1xuXG5Qcm9taXNlLnByb3RvdHlwZS5fc2V0Qm91bmRUbyA9IGZ1bmN0aW9uIChvYmopIHtcbiAgICBpZiAob2JqICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgdGhpcy5fYml0RmllbGQgPSB0aGlzLl9iaXRGaWVsZCB8IDgzODg2MDg7XG4gICAgICAgIHRoaXMuX2JvdW5kVG8gPSBvYmo7XG4gICAgfSBlbHNlIHtcbiAgICAgICAgdGhpcy5fYml0RmllbGQgPSB0aGlzLl9iaXRGaWVsZCAmICh+ODM4ODYwOCk7XG4gICAgfVxufTtcblxuUHJvbWlzZS5wcm90b3R5cGUuX2lzQm91bmQgPSBmdW5jdGlvbiAoKSB7XG4gICAgcmV0dXJuICh0aGlzLl9iaXRGaWVsZCAmIDgzODg2MDgpID09PSA4Mzg4NjA4O1xufTtcblxuUHJvbWlzZS5wcm90b3R5cGUuX3Jlc29sdmVGcm9tUmVzb2x2ZXIgPSBmdW5jdGlvbiAocmVzb2x2ZXIpIHtcbiAgICB2YXIgcHJvbWlzZSA9IHRoaXM7XG4gICAgdmFyIHN5bmNocm9ub3VzID0gdHJ1ZTtcblxuICAgIHRoaXMuX2NhcHR1cmVTdGFja1RyYWNlKCk7XG4gICAgdGhpcy5fcHVzaENvbnRleHQoKTtcbiAgICB2YXIgciA9IHRyeUNhdGNoMihyZXNvbHZlciwgdW5kZWZpbmVkLCBmdW5jdGlvbih2YWx1ZSkge1xuICAgICAgICBpZiAocHJvbWlzZS5fdHJ5Rm9sbG93KHZhbHVlKSkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIHByb21pc2UuX2Z1bGZpbGwodmFsdWUpO1xuICAgIH0sIGZ1bmN0aW9uIChyZWFzb24pIHtcbiAgICAgICAgbWFya0FzT3JpZ2luYXRpbmdGcm9tUmVqZWN0aW9uKHJlYXNvbik7XG4gICAgICAgIHZhciB0cmFjZSA9IGVycm9ycy5lbnN1cmVFcnJvck9iamVjdChyZWFzb24pO1xuICAgICAgICB2YXIgaGFzU3RhY2sgPSBjYW5BdHRhY2hUcmFjZShyZWFzb24pICYmXG4gICAgICAgICAgICB0eXBlb2YgdHJhY2Uuc3RhY2sgPT09IFwic3RyaW5nXCI7XG4gICAgICAgIHByb21pc2UuX2F0dGFjaEV4dHJhVHJhY2UodHJhY2UsIHN5bmNocm9ub3VzID8gaGFzU3RhY2sgOiBmYWxzZSk7XG4gICAgICAgIHByb21pc2UuX3JlamVjdChyZWFzb24sIHRyYWNlID09PSByZWFzb24gPyB1bmRlZmluZWQgOiB0cmFjZSk7XG4gICAgfSk7XG4gICAgc3luY2hyb25vdXMgPSBmYWxzZTtcbiAgICB0aGlzLl9wb3BDb250ZXh0KCk7XG5cbiAgICBpZiAociAhPT0gdW5kZWZpbmVkICYmIHIgPT09IGVycm9yT2JqKSB7XG4gICAgICAgIHZhciByZWFzb24gPSByLmU7XG4gICAgICAgIHZhciBoYXNTdGFjayA9IGNhbkF0dGFjaFRyYWNlKHJlYXNvbikgJiZcbiAgICAgICAgICAgIHR5cGVvZiByZWFzb24uc3RhY2sgPT09IFwic3RyaW5nXCI7XG4gICAgICAgIHZhciB0cmFjZSA9IGVycm9ycy5lbnN1cmVFcnJvck9iamVjdChyZWFzb24pO1xuICAgICAgICBwcm9taXNlLl9hdHRhY2hFeHRyYVRyYWNlKHJlYXNvbiwgaGFzU3RhY2spO1xuICAgICAgICBwcm9taXNlLl9yZWplY3QocmVhc29uLCB0cmFjZSA9PT0gcmVhc29uID8gdW5kZWZpbmVkIDogdHJhY2UpO1xuICAgIH1cbn07XG5cblByb21pc2UucHJvdG90eXBlLl9zZXR0bGVQcm9taXNlRnJvbUhhbmRsZXIgPSBmdW5jdGlvbiAoXG4gICAgaGFuZGxlciwgcmVjZWl2ZXIsIHZhbHVlLCBwcm9taXNlXG4pIHtcbiAgICBpZiAocHJvbWlzZS5faXNSZWplY3RlZCgpKSByZXR1cm47XG4gICAgcHJvbWlzZS5fcHVzaENvbnRleHQoKTtcbiAgICB2YXIgeDtcbiAgICBpZiAocmVjZWl2ZXIgPT09IEFQUExZICYmICF0aGlzLl9pc1JlamVjdGVkKCkpIHtcbiAgICAgICAgeCA9IHRyeUNhdGNoQXBwbHkoaGFuZGxlciwgdmFsdWUsIHRoaXMuX2JvdW5kVG8pO1xuICAgIH0gZWxzZSB7XG4gICAgICAgIHggPSB0cnlDYXRjaDEoaGFuZGxlciwgcmVjZWl2ZXIsIHZhbHVlKTtcbiAgICB9XG4gICAgcHJvbWlzZS5fcG9wQ29udGV4dCgpO1xuXG4gICAgaWYgKHggPT09IGVycm9yT2JqIHx8IHggPT09IHByb21pc2UgfHwgeCA9PT0gTkVYVF9GSUxURVIpIHtcbiAgICAgICAgdmFyIGVyciA9IHggPT09IHByb21pc2VcbiAgICAgICAgICAgICAgICAgICAgPyBtYWtlU2VsZlJlc29sdXRpb25FcnJvcigpXG4gICAgICAgICAgICAgICAgICAgIDogeC5lO1xuICAgICAgICB2YXIgdHJhY2UgPSBjYW5BdHRhY2hUcmFjZShlcnIpID8gZXJyIDogbmV3IEVycm9yKHV0aWwudG9TdHJpbmcoZXJyKSk7XG4gICAgICAgIGlmICh4ICE9PSBORVhUX0ZJTFRFUikgcHJvbWlzZS5fYXR0YWNoRXh0cmFUcmFjZSh0cmFjZSk7XG4gICAgICAgIHByb21pc2UuX3JlamVjdFVuY2hlY2tlZChlcnIsIHRyYWNlKTtcbiAgICB9IGVsc2Uge1xuICAgICAgICB4ID0gdHJ5Q29udmVydFRvUHJvbWlzZSh4LCBwcm9taXNlKTtcbiAgICAgICAgaWYgKHggaW5zdGFuY2VvZiBQcm9taXNlKSB7XG4gICAgICAgICAgICB4ID0geC5fdGFyZ2V0KCk7XG4gICAgICAgICAgICBpZiAoeC5faXNSZWplY3RlZCgpICYmXG4gICAgICAgICAgICAgICAgIXguX2lzQ2FycnlpbmdTdGFja1RyYWNlKCkgJiZcbiAgICAgICAgICAgICAgICAhY2FuQXR0YWNoVHJhY2UoeC5fcmVhc29uKCkpKSB7XG4gICAgICAgICAgICAgICAgdmFyIHRyYWNlID0gbmV3IEVycm9yKHV0aWwudG9TdHJpbmcoeC5fcmVhc29uKCkpKTtcbiAgICAgICAgICAgICAgICBwcm9taXNlLl9hdHRhY2hFeHRyYVRyYWNlKHRyYWNlKTtcbiAgICAgICAgICAgICAgICB4Ll9zZXRDYXJyaWVkU3RhY2tUcmFjZSh0cmFjZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBwcm9taXNlLl9mb2xsb3coeCk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBwcm9taXNlLl9mdWxmaWxsVW5jaGVja2VkKHgpO1xuICAgICAgICB9XG4gICAgfVxufTtcblxuUHJvbWlzZS5wcm90b3R5cGUuX3RhcmdldCA9IGZ1bmN0aW9uKCkge1xuICAgIHZhciByZXQgPSB0aGlzO1xuICAgIHdoaWxlIChyZXQuX2lzRm9sbG93aW5nKCkpIHJldCA9IHJldC5fZm9sbG93ZWUoKTtcbiAgICByZXR1cm4gcmV0O1xufTtcblxuUHJvbWlzZS5wcm90b3R5cGUuX2ZvbGxvd2VlID0gZnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuIHRoaXMuX3JlamVjdGlvbkhhbmRsZXIwO1xufTtcblxuUHJvbWlzZS5wcm90b3R5cGUuX3NldEZvbGxvd2VlID0gZnVuY3Rpb24ocHJvbWlzZSkge1xuICAgIHRoaXMuX3JlamVjdGlvbkhhbmRsZXIwID0gcHJvbWlzZTtcbn07XG5cblByb21pc2UucHJvdG90eXBlLl9mb2xsb3cgPSBmdW5jdGlvbiAocHJvbWlzZSkge1xuICAgIGlmIChwcm9taXNlLl9pc1BlbmRpbmcoKSkge1xuICAgICAgICB2YXIgbGVuID0gdGhpcy5fbGVuZ3RoKCk7XG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbGVuOyArK2kpIHtcbiAgICAgICAgICAgIHByb21pc2UuX21pZ3JhdGVDYWxsYmFja3MoXG4gICAgICAgICAgICAgICAgdGhpcy5fZnVsZmlsbG1lbnRIYW5kbGVyQXQoaSksXG4gICAgICAgICAgICAgICAgdGhpcy5fcmVqZWN0aW9uSGFuZGxlckF0KGkpLFxuICAgICAgICAgICAgICAgIHRoaXMuX3Byb2dyZXNzSGFuZGxlckF0KGkpLFxuICAgICAgICAgICAgICAgIHRoaXMuX3Byb21pc2VBdChpKSxcbiAgICAgICAgICAgICAgICB0aGlzLl9yZWNlaXZlckF0KGkpXG4gICAgICAgICAgICApO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuX3NldEZvbGxvd2luZygpO1xuICAgICAgICB0aGlzLl9zZXRMZW5ndGgoMCk7XG4gICAgICAgIHRoaXMuX3NldEZvbGxvd2VlKHByb21pc2UpO1xuICAgICAgICB0aGlzLl9wcm9wYWdhdGVGcm9tKHByb21pc2UsIDEpO1xuICAgIH0gZWxzZSBpZiAocHJvbWlzZS5faXNGdWxmaWxsZWQoKSkge1xuICAgICAgICB0aGlzLl9mdWxmaWxsVW5jaGVja2VkKHByb21pc2UuX3ZhbHVlKCkpO1xuICAgIH0gZWxzZSB7XG4gICAgICAgIHRoaXMuX3JlamVjdFVuY2hlY2tlZChwcm9taXNlLl9yZWFzb24oKSxcbiAgICAgICAgICAgIHByb21pc2UuX2dldENhcnJpZWRTdGFja1RyYWNlKCkpO1xuICAgIH1cbiAgICBpZiAocHJvbWlzZS5faXNSZWplY3Rpb25VbmhhbmRsZWQoKSkgcHJvbWlzZS5fdW5zZXRSZWplY3Rpb25Jc1VuaGFuZGxlZCgpO1xufTtcblxuUHJvbWlzZS5wcm90b3R5cGUuX3RyeUZvbGxvdyA9IGZ1bmN0aW9uICh2YWx1ZSkge1xuICAgIGlmICh0aGlzLl9pc0ZvbGxvd2luZ09yRnVsZmlsbGVkT3JSZWplY3RlZCgpIHx8XG4gICAgICAgIHZhbHVlID09PSB0aGlzKSB7XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG4gICAgdmFyIG1heWJlUHJvbWlzZSA9IHRyeUNvbnZlcnRUb1Byb21pc2UodmFsdWUsIHRoaXMpO1xuICAgIGlmICghKG1heWJlUHJvbWlzZSBpbnN0YW5jZW9mIFByb21pc2UpKSB7XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG4gICAgdGhpcy5fZm9sbG93KG1heWJlUHJvbWlzZS5fdGFyZ2V0KCkpO1xuICAgIHJldHVybiB0cnVlO1xufTtcblxuUHJvbWlzZS5wcm90b3R5cGUuX2NhcHR1cmVTdGFja1RyYWNlID0gZnVuY3Rpb24gKCkge1xuICAgIGlmIChkZWJ1Z2dpbmcpIHtcbiAgICAgICAgdGhpcy5fdHJhY2UgPSBuZXcgQ2FwdHVyZWRUcmFjZSh0aGlzLl9wZWVrQ29udGV4dCgpKTtcbiAgICB9XG4gICAgcmV0dXJuIHRoaXM7XG59O1xuXG5Qcm9taXNlLnByb3RvdHlwZS5fY2FuQXR0YWNoVHJhY2UgPSBmdW5jdGlvbihlcnJvcikge1xuICAgIHJldHVybiBkZWJ1Z2dpbmcgJiYgY2FuQXR0YWNoVHJhY2UoZXJyb3IpO1xufTtcblxuUHJvbWlzZS5wcm90b3R5cGUuX2F0dGFjaEV4dHJhVHJhY2VJZ25vcmVTZWxmID0gZnVuY3Rpb24gKGVycm9yKSB7XG4gICAgaWYgKHRoaXMuX2NhbkF0dGFjaFRyYWNlKGVycm9yKSAmJiB0aGlzLl90cmFjZS5fcGFyZW50ICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgdGhpcy5fdHJhY2UuX3BhcmVudC5hdHRhY2hFeHRyYVRyYWNlKGVycm9yKTtcbiAgICB9XG59O1xuXG5Qcm9taXNlLnByb3RvdHlwZS5fYXR0YWNoRXh0cmFUcmFjZSA9IGZ1bmN0aW9uIChlcnJvciwgaWdub3JlU2VsZikge1xuICAgIGlmIChkZWJ1Z2dpbmcgJiYgY2FuQXR0YWNoVHJhY2UoZXJyb3IpKSB7XG4gICAgICAgIHZhciB0cmFjZSA9IHRoaXMuX3RyYWNlO1xuICAgICAgICBpZiAodHJhY2UgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgaWYgKGlnbm9yZVNlbGYpIHRyYWNlID0gdHJhY2UuX3BhcmVudDtcbiAgICAgICAgfVxuICAgICAgICBpZiAodHJhY2UgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgdHJhY2UuYXR0YWNoRXh0cmFUcmFjZShlcnJvcik7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBDYXB0dXJlZFRyYWNlLmNsZWFuU3RhY2soZXJyb3IsIHRydWUpO1xuICAgICAgICB9XG4gICAgfVxufTtcblxuUHJvbWlzZS5wcm90b3R5cGUuX2NsZWFuVmFsdWVzID0gZnVuY3Rpb24gKCkge1xuICAgIGlmICh0aGlzLl9jYW5jZWxsYWJsZSgpKSB7XG4gICAgICAgIHRoaXMuX2NhbmNlbGxhdGlvblBhcmVudCA9IHVuZGVmaW5lZDtcbiAgICB9XG59O1xuXG5Qcm9taXNlLnByb3RvdHlwZS5fcHJvcGFnYXRlRnJvbSA9IGZ1bmN0aW9uIChwYXJlbnQsIGZsYWdzKSB7XG4gICAgaWYgKChmbGFncyAmIDEpID4gMCAmJiBwYXJlbnQuX2NhbmNlbGxhYmxlKCkpIHtcbiAgICAgICAgdGhpcy5fc2V0Q2FuY2VsbGFibGUoKTtcbiAgICAgICAgdGhpcy5fY2FuY2VsbGF0aW9uUGFyZW50ID0gcGFyZW50O1xuICAgIH1cbiAgICBpZiAoKGZsYWdzICYgNCkgPiAwKSB7XG4gICAgICAgIHRoaXMuX3NldEJvdW5kVG8ocGFyZW50Ll9ib3VuZFRvKTtcbiAgICB9XG59O1xuXG5Qcm9taXNlLnByb3RvdHlwZS5fZnVsZmlsbCA9IGZ1bmN0aW9uICh2YWx1ZSkge1xuICAgIGlmICh0aGlzLl9pc0ZvbGxvd2luZ09yRnVsZmlsbGVkT3JSZWplY3RlZCgpKSByZXR1cm47XG4gICAgdGhpcy5fZnVsZmlsbFVuY2hlY2tlZCh2YWx1ZSk7XG59O1xuXG5Qcm9taXNlLnByb3RvdHlwZS5fcmVqZWN0ID0gZnVuY3Rpb24gKHJlYXNvbiwgY2FycmllZFN0YWNrVHJhY2UpIHtcbiAgICBpZiAodGhpcy5faXNGb2xsb3dpbmdPckZ1bGZpbGxlZE9yUmVqZWN0ZWQoKSkgcmV0dXJuO1xuICAgIHRoaXMuX3JlamVjdFVuY2hlY2tlZChyZWFzb24sIGNhcnJpZWRTdGFja1RyYWNlKTtcbn07XG5cblByb21pc2UucHJvdG90eXBlLl9zZXR0bGVQcm9taXNlQXQgPSBmdW5jdGlvbiAoaW5kZXgpIHtcbiAgICB2YXIgcHJvbWlzZSA9IHRoaXMuX3Byb21pc2VBdChpbmRleCk7XG4gICAgdmFyIGlzUHJvbWlzZSA9IHByb21pc2UgaW5zdGFuY2VvZiBQcm9taXNlO1xuXG4gICAgaWYgKGlzUHJvbWlzZSAmJiBwcm9taXNlLl9pc01pZ3JhdGVkKCkpIHtcbiAgICAgICAgcHJvbWlzZS5fdW5zZXRJc01pZ3JhdGVkKCk7XG4gICAgICAgIHJldHVybiBhc3luYy5pbnZva2UodGhpcy5fc2V0dGxlUHJvbWlzZUF0LCB0aGlzLCBpbmRleCk7XG4gICAgfVxuICAgIHZhciBoYW5kbGVyID0gdGhpcy5faXNGdWxmaWxsZWQoKVxuICAgICAgICA/IHRoaXMuX2Z1bGZpbGxtZW50SGFuZGxlckF0KGluZGV4KVxuICAgICAgICA6IHRoaXMuX3JlamVjdGlvbkhhbmRsZXJBdChpbmRleCk7XG5cbiAgICB2YXIgY2FycmllZFN0YWNrVHJhY2UgPVxuICAgICAgICB0aGlzLl9pc0NhcnJ5aW5nU3RhY2tUcmFjZSgpID8gdGhpcy5fZ2V0Q2FycmllZFN0YWNrVHJhY2UoKSA6IHVuZGVmaW5lZDtcbiAgICB2YXIgdmFsdWUgPSB0aGlzLl9zZXR0bGVkVmFsdWU7XG4gICAgdmFyIHJlY2VpdmVyID0gdGhpcy5fcmVjZWl2ZXJBdChpbmRleCk7XG5cblxuICAgIHRoaXMuX2NsZWFyQ2FsbGJhY2tEYXRhQXRJbmRleChpbmRleCk7XG5cbiAgICBpZiAodHlwZW9mIGhhbmRsZXIgPT09IFwiZnVuY3Rpb25cIikge1xuICAgICAgICBpZiAoIWlzUHJvbWlzZSkge1xuICAgICAgICAgICAgaGFuZGxlci5jYWxsKHJlY2VpdmVyLCB2YWx1ZSwgcHJvbWlzZSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICB0aGlzLl9zZXR0bGVQcm9taXNlRnJvbUhhbmRsZXIoaGFuZGxlciwgcmVjZWl2ZXIsIHZhbHVlLCBwcm9taXNlKTtcbiAgICAgICAgfVxuICAgIH0gZWxzZSBpZiAocmVjZWl2ZXIgaW5zdGFuY2VvZiBQcm9taXNlQXJyYXkpIHtcbiAgICAgICAgaWYgKCFyZWNlaXZlci5faXNSZXNvbHZlZCgpKSB7XG4gICAgICAgICAgICBpZiAodGhpcy5faXNGdWxmaWxsZWQoKSkge1xuICAgICAgICAgICAgICAgIHJlY2VpdmVyLl9wcm9taXNlRnVsZmlsbGVkKHZhbHVlLCBwcm9taXNlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIHJlY2VpdmVyLl9wcm9taXNlUmVqZWN0ZWQodmFsdWUsIHByb21pc2UpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfSBlbHNlIGlmIChpc1Byb21pc2UpIHtcbiAgICAgICAgaWYgKHRoaXMuX2lzRnVsZmlsbGVkKCkpIHtcbiAgICAgICAgICAgIHByb21pc2UuX2Z1bGZpbGwodmFsdWUpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgcHJvbWlzZS5fcmVqZWN0KHZhbHVlLCBjYXJyaWVkU3RhY2tUcmFjZSk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBpZiAoaW5kZXggPj0gNCAmJiAoaW5kZXggJiAzMSkgPT09IDQpXG4gICAgICAgIGFzeW5jLmludm9rZUxhdGVyKHRoaXMuX3NldExlbmd0aCwgdGhpcywgMCk7XG59O1xuXG5Qcm9taXNlLnByb3RvdHlwZS5fY2xlYXJDYWxsYmFja0RhdGFBdEluZGV4ID0gZnVuY3Rpb24oaW5kZXgpIHtcbiAgICBpZiAoaW5kZXggPT09IDApIHtcbiAgICAgICAgaWYgKCF0aGlzLl9pc0NhcnJ5aW5nU3RhY2tUcmFjZSgpKSB7XG4gICAgICAgICAgICB0aGlzLl9mdWxmaWxsbWVudEhhbmRsZXIwID0gdW5kZWZpbmVkO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuX3JlamVjdGlvbkhhbmRsZXIwID1cbiAgICAgICAgdGhpcy5fcHJvZ3Jlc3NIYW5kbGVyMCA9XG4gICAgICAgIHRoaXMuX3JlY2VpdmVyMCA9XG4gICAgICAgIHRoaXMuX3Byb21pc2UwID0gdW5kZWZpbmVkO1xuICAgIH0gZWxzZSB7XG4gICAgICAgIHZhciBiYXNlID0gaW5kZXggKiA1IC0gNTtcbiAgICAgICAgdGhpc1tiYXNlICsgM10gPVxuICAgICAgICB0aGlzW2Jhc2UgKyA0XSA9XG4gICAgICAgIHRoaXNbYmFzZSArIDBdID1cbiAgICAgICAgdGhpc1tiYXNlICsgMV0gPVxuICAgICAgICB0aGlzW2Jhc2UgKyAyXSA9IHVuZGVmaW5lZDtcbiAgICB9XG59O1xuXG5Qcm9taXNlLnByb3RvdHlwZS5faXNTZXR0bGVQcm9taXNlc1F1ZXVlZCA9IGZ1bmN0aW9uICgpIHtcbiAgICByZXR1cm4gKHRoaXMuX2JpdEZpZWxkICZcbiAgICAgICAgICAgIC0xMDczNzQxODI0KSA9PT0gLTEwNzM3NDE4MjQ7XG59O1xuXG5Qcm9taXNlLnByb3RvdHlwZS5fc2V0U2V0dGxlUHJvbWlzZXNRdWV1ZWQgPSBmdW5jdGlvbiAoKSB7XG4gICAgdGhpcy5fYml0RmllbGQgPSB0aGlzLl9iaXRGaWVsZCB8IC0xMDczNzQxODI0O1xufTtcblxuUHJvbWlzZS5wcm90b3R5cGUuX3Vuc2V0U2V0dGxlUHJvbWlzZXNRdWV1ZWQgPSBmdW5jdGlvbiAoKSB7XG4gICAgdGhpcy5fYml0RmllbGQgPSB0aGlzLl9iaXRGaWVsZCAmICh+LTEwNzM3NDE4MjQpO1xufTtcblxuUHJvbWlzZS5wcm90b3R5cGUuX3F1ZXVlU2V0dGxlUHJvbWlzZXMgPSBmdW5jdGlvbigpIHtcbiAgICBpZiAoIXRoaXMuX2lzU2V0dGxlUHJvbWlzZXNRdWV1ZWQoKSkge1xuICAgICAgICBhc3luYy5zZXR0bGVQcm9taXNlcyh0aGlzKTtcbiAgICAgICAgdGhpcy5fc2V0U2V0dGxlUHJvbWlzZXNRdWV1ZWQoKTtcbiAgICB9XG59O1xuXG5Qcm9taXNlLnByb3RvdHlwZS5fZnVsZmlsbFVuY2hlY2tlZCA9IGZ1bmN0aW9uICh2YWx1ZSkge1xuICAgIGlmICh2YWx1ZSA9PT0gdGhpcykge1xuICAgICAgICB2YXIgZXJyID0gbWFrZVNlbGZSZXNvbHV0aW9uRXJyb3IoKTtcbiAgICAgICAgdGhpcy5fYXR0YWNoRXh0cmFUcmFjZShlcnIpO1xuICAgICAgICByZXR1cm4gdGhpcy5fcmVqZWN0VW5jaGVja2VkKGVyciwgdW5kZWZpbmVkKTtcbiAgICB9XG4gICAgdGhpcy5fc2V0RnVsZmlsbGVkKCk7XG4gICAgdGhpcy5fc2V0dGxlZFZhbHVlID0gdmFsdWU7XG4gICAgdGhpcy5fY2xlYW5WYWx1ZXMoKTtcblxuICAgIGlmICh0aGlzLl9sZW5ndGgoKSA+IDApIHtcbiAgICAgICAgdGhpcy5fcXVldWVTZXR0bGVQcm9taXNlcygpO1xuICAgIH1cbn07XG5cblByb21pc2UucHJvdG90eXBlLl9yZWplY3RVbmNoZWNrZWRDaGVja0Vycm9yID0gZnVuY3Rpb24gKHJlYXNvbikge1xuICAgIHZhciB0cmFjZSA9IGVycm9ycy5lbnN1cmVFcnJvck9iamVjdChyZWFzb24pO1xuICAgIHRoaXMuX3JlamVjdFVuY2hlY2tlZChyZWFzb24sIHRyYWNlID09PSByZWFzb24gPyB1bmRlZmluZWQgOiB0cmFjZSk7XG59O1xuXG5Qcm9taXNlLnByb3RvdHlwZS5fcmVqZWN0VW5jaGVja2VkID0gZnVuY3Rpb24gKHJlYXNvbiwgdHJhY2UpIHtcbiAgICBpZiAocmVhc29uID09PSB0aGlzKSB7XG4gICAgICAgIHZhciBlcnIgPSBtYWtlU2VsZlJlc29sdXRpb25FcnJvcigpO1xuICAgICAgICB0aGlzLl9hdHRhY2hFeHRyYVRyYWNlKGVycik7XG4gICAgICAgIHJldHVybiB0aGlzLl9yZWplY3RVbmNoZWNrZWQoZXJyKTtcbiAgICB9XG4gICAgdGhpcy5fc2V0UmVqZWN0ZWQoKTtcbiAgICB0aGlzLl9zZXR0bGVkVmFsdWUgPSByZWFzb247XG4gICAgdGhpcy5fY2xlYW5WYWx1ZXMoKTtcblxuICAgIGlmICh0aGlzLl9pc0ZpbmFsKCkpIHtcbiAgICAgICAgYXN5bmMudGhyb3dMYXRlcihmdW5jdGlvbihlKSB7XG4gICAgICAgICAgICBpZiAoXCJzdGFja1wiIGluIGUpIHtcbiAgICAgICAgICAgICAgICBhc3luYy5pbnZva2VGaXJzdChcbiAgICAgICAgICAgICAgICAgICAgQ2FwdHVyZWRUcmFjZS51bmhhbmRsZWRSZWplY3Rpb24sIHVuZGVmaW5lZCwgZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aHJvdyBlO1xuICAgICAgICB9LCB0cmFjZSA9PT0gdW5kZWZpbmVkID8gcmVhc29uIDogdHJhY2UpO1xuICAgICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgaWYgKHRyYWNlICE9PSB1bmRlZmluZWQgJiYgdHJhY2UgIT09IHJlYXNvbikge1xuICAgICAgICB0aGlzLl9zZXRDYXJyaWVkU3RhY2tUcmFjZSh0cmFjZSk7XG4gICAgfVxuXG4gICAgaWYgKHRoaXMuX2xlbmd0aCgpID4gMCkge1xuICAgICAgICB0aGlzLl9xdWV1ZVNldHRsZVByb21pc2VzKCk7XG4gICAgfSBlbHNlIHtcbiAgICAgICAgdGhpcy5fZW5zdXJlUG9zc2libGVSZWplY3Rpb25IYW5kbGVkKCk7XG4gICAgfVxufTtcblxuUHJvbWlzZS5wcm90b3R5cGUuX3NldHRsZVByb21pc2VzID0gZnVuY3Rpb24gKCkge1xuICAgIHRoaXMuX3Vuc2V0U2V0dGxlUHJvbWlzZXNRdWV1ZWQoKTtcbiAgICB2YXIgbGVuID0gdGhpcy5fbGVuZ3RoKCk7XG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCBsZW47IGkrKykge1xuICAgICAgICB0aGlzLl9zZXR0bGVQcm9taXNlQXQoaSk7XG4gICAgfVxufTtcblxuUHJvbWlzZS5wcm90b3R5cGUuX2Vuc3VyZVBvc3NpYmxlUmVqZWN0aW9uSGFuZGxlZCA9IGZ1bmN0aW9uICgpIHtcbiAgICB0aGlzLl9zZXRSZWplY3Rpb25Jc1VuaGFuZGxlZCgpO1xuICAgIGFzeW5jLmludm9rZUxhdGVyKHRoaXMuX25vdGlmeVVuaGFuZGxlZFJlamVjdGlvbiwgdGhpcywgdW5kZWZpbmVkKTtcbn07XG5cblByb21pc2UucHJvdG90eXBlLl9ub3RpZnlVbmhhbmRsZWRSZWplY3Rpb25Jc0hhbmRsZWQgPSBmdW5jdGlvbiAoKSB7XG4gICAgQ2FwdHVyZWRUcmFjZS5maXJlUmVqZWN0aW9uRXZlbnQoXCJyZWplY3Rpb25IYW5kbGVkXCIsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdW5oYW5kbGVkUmVqZWN0aW9uSGFuZGxlZCwgdW5kZWZpbmVkLCB0aGlzKTtcbn07XG5cblByb21pc2UucHJvdG90eXBlLl9ub3RpZnlVbmhhbmRsZWRSZWplY3Rpb24gPSBmdW5jdGlvbiAoKSB7XG4gICAgaWYgKHRoaXMuX2lzUmVqZWN0aW9uVW5oYW5kbGVkKCkpIHtcbiAgICAgICAgdmFyIHJlYXNvbiA9IHRoaXMuX2dldENhcnJpZWRTdGFja1RyYWNlKCkgfHwgdGhpcy5fc2V0dGxlZFZhbHVlO1xuICAgICAgICB0aGlzLl9zZXRVbmhhbmRsZWRSZWplY3Rpb25Jc05vdGlmaWVkKCk7XG4gICAgICAgIENhcHR1cmVkVHJhY2UuZmlyZVJlamVjdGlvbkV2ZW50KFwidW5oYW5kbGVkUmVqZWN0aW9uXCIsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBvc3NpYmx5VW5oYW5kbGVkUmVqZWN0aW9uLCByZWFzb24sIHRoaXMpO1xuICAgIH1cbn07XG5cbnZhciBjb250ZXh0U3RhY2sgPSBbXTtcbmZ1bmN0aW9uIENvbnRleHQoKSB7XG4gICAgdGhpcy5fdHJhY2UgPSBuZXcgQ2FwdHVyZWRUcmFjZShwZWVrQ29udGV4dCgpKTtcbn1cbkNvbnRleHQucHJvdG90eXBlLl9wdXNoQ29udGV4dCA9IGZ1bmN0aW9uICgpIHtcbiAgICBpZiAoIWRlYnVnZ2luZykgcmV0dXJuO1xuICAgIGNvbnRleHRTdGFjay5wdXNoKHRoaXMuX3RyYWNlKTtcbn07XG5cbkNvbnRleHQucHJvdG90eXBlLl9wb3BDb250ZXh0ID0gZnVuY3Rpb24gKCkge1xuICAgIGlmICghZGVidWdnaW5nKSByZXR1cm47XG4gICAgY29udGV4dFN0YWNrLnBvcCgpO1xufTtcblxuIC8qanNoaW50IHVudXNlZDpmYWxzZSovXG5mdW5jdGlvbiBjcmVhdGVDb250ZXh0KCkge1xuICAgIGlmIChkZWJ1Z2dpbmcpIHJldHVybiBuZXcgQ29udGV4dCgpO1xufVxuXG5mdW5jdGlvbiBwZWVrQ29udGV4dCgpIHtcbiAgICB2YXIgbGFzdEluZGV4ID0gY29udGV4dFN0YWNrLmxlbmd0aCAtIDE7XG4gICAgaWYgKGxhc3RJbmRleCA+PSAwKSB7XG4gICAgICAgIHJldHVybiBjb250ZXh0U3RhY2tbbGFzdEluZGV4XTtcbiAgICB9XG4gICAgcmV0dXJuIHVuZGVmaW5lZDtcbn1cblxuUHJvbWlzZS5wcm90b3R5cGUuX3BlZWtDb250ZXh0ID0gcGVla0NvbnRleHQ7XG5Qcm9taXNlLnByb3RvdHlwZS5fcHVzaENvbnRleHQgPSBDb250ZXh0LnByb3RvdHlwZS5fcHVzaENvbnRleHQ7XG5Qcm9taXNlLnByb3RvdHlwZS5fcG9wQ29udGV4dCA9IENvbnRleHQucHJvdG90eXBlLl9wb3BDb250ZXh0O1xuXG5Qcm9taXNlLnByb3RvdHlwZS5fcmVzb2x2ZUZyb21TeW5jVmFsdWUgPSBmdW5jdGlvbiAodmFsdWUpIHtcbiAgICBpZiAodmFsdWUgPT09IGVycm9yT2JqKSB7XG4gICAgICAgIHRoaXMuX3NldFJlamVjdGVkKCk7XG4gICAgICAgIHZhciByZWFzb24gPSB2YWx1ZS5lO1xuICAgICAgICB0aGlzLl9zZXR0bGVkVmFsdWUgPSByZWFzb247XG4gICAgICAgIHRoaXMuX2NsZWFuVmFsdWVzKCk7XG4gICAgICAgIHRoaXMuX2F0dGFjaEV4dHJhVHJhY2UocmVhc29uKTtcbiAgICAgICAgdGhpcy5fZW5zdXJlUG9zc2libGVSZWplY3Rpb25IYW5kbGVkKCk7XG4gICAgfSBlbHNlIHtcbiAgICAgICAgdmFyIG1heWJlUHJvbWlzZSA9IHRyeUNvbnZlcnRUb1Byb21pc2UodmFsdWUsIHRoaXMpO1xuICAgICAgICBpZiAobWF5YmVQcm9taXNlIGluc3RhbmNlb2YgUHJvbWlzZSkge1xuICAgICAgICAgICAgbWF5YmVQcm9taXNlID0gbWF5YmVQcm9taXNlLl90YXJnZXQoKTtcbiAgICAgICAgICAgIHRoaXMuX2ZvbGxvdyhtYXliZVByb21pc2UpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgdGhpcy5fc2V0RnVsZmlsbGVkKCk7XG4gICAgICAgICAgICB0aGlzLl9zZXR0bGVkVmFsdWUgPSB2YWx1ZTtcbiAgICAgICAgICAgIHRoaXMuX2NsZWFuVmFsdWVzKCk7XG4gICAgICAgIH1cbiAgICB9XG59O1xuXG5cblxuaWYgKCFDYXB0dXJlZFRyYWNlLmlzU3VwcG9ydGVkKCkpIHtcbiAgICBQcm9taXNlLmxvbmdTdGFja1RyYWNlcyA9IGZ1bmN0aW9uKCl7fTtcbiAgICBkZWJ1Z2dpbmcgPSBmYWxzZTtcbn1cblxuUHJvbWlzZS5fbWFrZVNlbGZSZXNvbHV0aW9uRXJyb3IgPSBtYWtlU2VsZlJlc29sdXRpb25FcnJvcjtcbnJlcXVpcmUoXCIuL2ZpbmFsbHkuanNcIikoUHJvbWlzZSwgTkVYVF9GSUxURVIsIHRyeUNvbnZlcnRUb1Byb21pc2UpO1xucmVxdWlyZShcIi4vZGlyZWN0X3Jlc29sdmUuanNcIikoUHJvbWlzZSk7XG5yZXF1aXJlKFwiLi9zeW5jaHJvbm91c19pbnNwZWN0aW9uLmpzXCIpKFByb21pc2UpO1xucmVxdWlyZShcIi4vam9pbi5qc1wiKShQcm9taXNlLCBQcm9taXNlQXJyYXksIHRyeUNvbnZlcnRUb1Byb21pc2UsIElOVEVSTkFMKTtcblByb21pc2UuUmFuZ2VFcnJvciA9IFJhbmdlRXJyb3I7XG5Qcm9taXNlLkNhbmNlbGxhdGlvbkVycm9yID0gQ2FuY2VsbGF0aW9uRXJyb3I7XG5Qcm9taXNlLlRpbWVvdXRFcnJvciA9IFRpbWVvdXRFcnJvcjtcblByb21pc2UuVHlwZUVycm9yID0gVHlwZUVycm9yO1xuUHJvbWlzZS5PcGVyYXRpb25hbEVycm9yID0gT3BlcmF0aW9uYWxFcnJvcjtcblByb21pc2UuUmVqZWN0aW9uRXJyb3IgPSBPcGVyYXRpb25hbEVycm9yO1xuUHJvbWlzZS5BZ2dyZWdhdGVFcnJvciA9IGVycm9ycy5BZ2dyZWdhdGVFcnJvcjtcblxudXRpbC50b0Zhc3RQcm9wZXJ0aWVzKFByb21pc2UpO1xudXRpbC50b0Zhc3RQcm9wZXJ0aWVzKFByb21pc2UucHJvdG90eXBlKTtcblByb21pc2UuUHJvbWlzZSA9IFByb21pc2U7XG5DYXB0dXJlZFRyYWNlLnNldEJvdW5kcyhhc3luYy5maXJzdExpbmVFcnJvciwgdXRpbC5sYXN0TGluZUVycm9yKTtcbnJlcXVpcmUoJy4vbm9kZWlmeS5qcycpKFByb21pc2UpO1xucmVxdWlyZSgnLi91c2luZy5qcycpKFByb21pc2UsIGFwaVJlamVjdGlvbiwgdHJ5Q29udmVydFRvUHJvbWlzZSwgY3JlYXRlQ29udGV4dCk7XG5yZXF1aXJlKCcuL2dlbmVyYXRvcnMuanMnKShQcm9taXNlLCBhcGlSZWplY3Rpb24sIElOVEVSTkFMLCB0cnlDb252ZXJ0VG9Qcm9taXNlKTtcbnJlcXVpcmUoJy4vbWFwLmpzJykoUHJvbWlzZSwgUHJvbWlzZUFycmF5LCBhcGlSZWplY3Rpb24sIHRyeUNvbnZlcnRUb1Byb21pc2UsIElOVEVSTkFMKTtcbnJlcXVpcmUoJy4vY2FuY2VsLmpzJykoUHJvbWlzZSwgSU5URVJOQUwpO1xucmVxdWlyZSgnLi9wcm9taXNpZnkuanMnKShQcm9taXNlLCBJTlRFUk5BTCk7XG5yZXF1aXJlKCcuL3Byb3BzLmpzJykoUHJvbWlzZSwgUHJvbWlzZUFycmF5LCB0cnlDb252ZXJ0VG9Qcm9taXNlKTtcbnJlcXVpcmUoJy4vcmFjZS5qcycpKFByb21pc2UsIElOVEVSTkFMLCB0cnlDb252ZXJ0VG9Qcm9taXNlKTtcbnJlcXVpcmUoJy4vcmVkdWNlLmpzJykoUHJvbWlzZSwgUHJvbWlzZUFycmF5LCBhcGlSZWplY3Rpb24sIHRyeUNvbnZlcnRUb1Byb21pc2UsIElOVEVSTkFMKTtcbnJlcXVpcmUoJy4vc2V0dGxlLmpzJykoUHJvbWlzZSwgUHJvbWlzZUFycmF5KTtcbnJlcXVpcmUoJy4vY2FsbF9nZXQuanMnKShQcm9taXNlKTtcbnJlcXVpcmUoJy4vc29tZS5qcycpKFByb21pc2UsIFByb21pc2VBcnJheSwgYXBpUmVqZWN0aW9uKTtcbnJlcXVpcmUoJy4vcHJvZ3Jlc3MuanMnKShQcm9taXNlLCBQcm9taXNlQXJyYXkpO1xucmVxdWlyZSgnLi9hbnkuanMnKShQcm9taXNlKTtcbnJlcXVpcmUoJy4vZWFjaC5qcycpKFByb21pc2UsIElOVEVSTkFMKTtcbnJlcXVpcmUoJy4vdGltZXJzLmpzJykoUHJvbWlzZSwgSU5URVJOQUwsIHRyeUNvbnZlcnRUb1Byb21pc2UpO1xucmVxdWlyZSgnLi9maWx0ZXIuanMnKShQcm9taXNlLCBJTlRFUk5BTCk7XG5cblByb21pc2UucHJvdG90eXBlID0gUHJvbWlzZS5wcm90b3R5cGU7XG5yZXR1cm4gUHJvbWlzZTtcblxufTtcblxufSkuY2FsbCh0aGlzLHJlcXVpcmUoJ19wcm9jZXNzJykpIiwiXCJ1c2Ugc3RyaWN0XCI7XG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uKFByb21pc2UsIElOVEVSTkFMLCB0cnlDb252ZXJ0VG9Qcm9taXNlLFxuICAgIGFwaVJlamVjdGlvbikge1xudmFyIHV0aWwgPSByZXF1aXJlKFwiLi91dGlsLmpzXCIpO1xudmFyIGVycm9ycyA9IHJlcXVpcmUoXCIuL2Vycm9ycy5qc1wiKTtcbnZhciBpc0FycmF5ID0gdXRpbC5pc0FycmF5O1xuXG5mdW5jdGlvbiB0b1Jlc29sdXRpb25WYWx1ZSh2YWwpIHtcbiAgICBzd2l0Y2godmFsKSB7XG4gICAgY2FzZSAtMTogcmV0dXJuIHVuZGVmaW5lZDtcbiAgICBjYXNlIC0yOiByZXR1cm4gW107XG4gICAgY2FzZSAtMzogcmV0dXJuIHt9O1xuICAgIH1cbn1cblxuZnVuY3Rpb24gUHJvbWlzZUFycmF5KHZhbHVlcykge1xuICAgIHZhciBwcm9taXNlID0gdGhpcy5fcHJvbWlzZSA9IG5ldyBQcm9taXNlKElOVEVSTkFMKTtcbiAgICB2YXIgcGFyZW50O1xuICAgIGlmICh2YWx1ZXMgaW5zdGFuY2VvZiBQcm9taXNlKSB7XG4gICAgICAgIHBhcmVudCA9IHZhbHVlcztcbiAgICAgICAgcHJvbWlzZS5fcHJvcGFnYXRlRnJvbShwYXJlbnQsIDEgfCA0KTtcbiAgICB9XG4gICAgdGhpcy5fdmFsdWVzID0gdmFsdWVzO1xuICAgIHRoaXMuX2xlbmd0aCA9IDA7XG4gICAgdGhpcy5fdG90YWxSZXNvbHZlZCA9IDA7XG4gICAgdGhpcy5faW5pdCh1bmRlZmluZWQsIC0yKTtcbn1cblByb21pc2VBcnJheS5wcm90b3R5cGUubGVuZ3RoID0gZnVuY3Rpb24gKCkge1xuICAgIHJldHVybiB0aGlzLl9sZW5ndGg7XG59O1xuXG5Qcm9taXNlQXJyYXkucHJvdG90eXBlLnByb21pc2UgPSBmdW5jdGlvbiAoKSB7XG4gICAgcmV0dXJuIHRoaXMuX3Byb21pc2U7XG59O1xuXG5Qcm9taXNlQXJyYXkucHJvdG90eXBlLl9pbml0ID0gZnVuY3Rpb24gaW5pdChfLCByZXNvbHZlVmFsdWVJZkVtcHR5KSB7XG5cbiAgICB2YXIgdmFsdWVzID0gdHJ5Q29udmVydFRvUHJvbWlzZSh0aGlzLl92YWx1ZXMsIHVuZGVmaW5lZCk7XG4gICAgaWYgKHZhbHVlcyBpbnN0YW5jZW9mIFByb21pc2UpIHtcbiAgICAgICAgdmFsdWVzLl9zZXRCb3VuZFRvKHRoaXMuX3Byb21pc2UuX2JvdW5kVG8pO1xuICAgICAgICB2YWx1ZXMgPSB2YWx1ZXMuX3RhcmdldCgpO1xuICAgICAgICB0aGlzLl92YWx1ZXMgPSB2YWx1ZXM7XG4gICAgICAgIGlmICh2YWx1ZXMuX2lzRnVsZmlsbGVkKCkpIHtcbiAgICAgICAgICAgIHZhbHVlcyA9IHZhbHVlcy5fdmFsdWUoKTtcbiAgICAgICAgICAgIGlmICghaXNBcnJheSh2YWx1ZXMpKSB7XG4gICAgICAgICAgICAgICAgdmFyIGVyciA9IG5ldyBQcm9taXNlLlR5cGVFcnJvcihcImV4cGVjdGluZyBhbiBhcnJheSwgYSBwcm9taXNlIG9yIGEgdGhlbmFibGVcXHUwMDBhXFx1MDAwYSAgICBTZWUgaHR0cDovL2dvby5nbC9zOE1NaGNcXHUwMDBhXCIpO1xuICAgICAgICAgICAgICAgIHRoaXMuX19oYXJkUmVqZWN0X18oZXJyKTtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgIH0gZWxzZSBpZiAodmFsdWVzLl9pc1BlbmRpbmcoKSkge1xuICAgICAgICAgICAgdmFsdWVzLl90aGVuKFxuICAgICAgICAgICAgICAgIGluaXQsXG4gICAgICAgICAgICAgICAgdGhpcy5fcmVqZWN0LFxuICAgICAgICAgICAgICAgIHVuZGVmaW5lZCxcbiAgICAgICAgICAgICAgICB0aGlzLFxuICAgICAgICAgICAgICAgIHJlc29sdmVWYWx1ZUlmRW1wdHlcbiAgICAgICAgICAgKTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHZhbHVlcy5fdW5zZXRSZWplY3Rpb25Jc1VuaGFuZGxlZCgpO1xuICAgICAgICAgICAgdGhpcy5fcmVqZWN0KHZhbHVlcy5fcmVhc29uKCkpO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgfSBlbHNlIGlmICghaXNBcnJheSh2YWx1ZXMpKSB7XG4gICAgICAgIHRoaXMuX3Byb21pc2UuX2ZvbGxvdyhhcGlSZWplY3Rpb24oXCJleHBlY3RpbmcgYW4gYXJyYXksIGEgcHJvbWlzZSBvciBhIHRoZW5hYmxlXFx1MDAwYVxcdTAwMGEgICAgU2VlIGh0dHA6Ly9nb28uZ2wvczhNTWhjXFx1MDAwYVwiKSk7XG4gICAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBpZiAodmFsdWVzLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICBpZiAocmVzb2x2ZVZhbHVlSWZFbXB0eSA9PT0gLTUpIHtcbiAgICAgICAgICAgIHRoaXMuX3Jlc29sdmVFbXB0eUFycmF5KCk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICB0aGlzLl9yZXNvbHZlKHRvUmVzb2x1dGlvblZhbHVlKHJlc29sdmVWYWx1ZUlmRW1wdHkpKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm47XG4gICAgfVxuICAgIHZhciBsZW4gPSB0aGlzLmdldEFjdHVhbExlbmd0aCh2YWx1ZXMubGVuZ3RoKTtcbiAgICB0aGlzLl9sZW5ndGggPSBsZW47XG4gICAgdGhpcy5fdmFsdWVzID0gdGhpcy5zaG91bGRDb3B5VmFsdWVzKCkgPyBuZXcgQXJyYXkobGVuKSA6IHRoaXMuX3ZhbHVlcztcbiAgICB2YXIgcHJvbWlzZSA9IHRoaXMuX3Byb21pc2U7XG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCBsZW47ICsraSkge1xuICAgICAgICB2YXIgaXNSZXNvbHZlZCA9IHRoaXMuX2lzUmVzb2x2ZWQoKTtcbiAgICAgICAgdmFyIG1heWJlUHJvbWlzZSA9IHRyeUNvbnZlcnRUb1Byb21pc2UodmFsdWVzW2ldLCBwcm9taXNlKTtcbiAgICAgICAgaWYgKG1heWJlUHJvbWlzZSBpbnN0YW5jZW9mIFByb21pc2UpIHtcbiAgICAgICAgICAgIG1heWJlUHJvbWlzZSA9IG1heWJlUHJvbWlzZS5fdGFyZ2V0KCk7XG4gICAgICAgICAgICBpZiAoaXNSZXNvbHZlZCkge1xuICAgICAgICAgICAgICAgIG1heWJlUHJvbWlzZS5fdW5zZXRSZWplY3Rpb25Jc1VuaGFuZGxlZCgpO1xuICAgICAgICAgICAgfSBlbHNlIGlmIChtYXliZVByb21pc2UuX2lzUGVuZGluZygpKSB7XG4gICAgICAgICAgICAgICAgbWF5YmVQcm9taXNlLl9wcm94eVByb21pc2VBcnJheSh0aGlzLCBpKTtcbiAgICAgICAgICAgIH0gZWxzZSBpZiAobWF5YmVQcm9taXNlLl9pc0Z1bGZpbGxlZCgpKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5fcHJvbWlzZUZ1bGZpbGxlZChtYXliZVByb21pc2UuX3ZhbHVlKCksIGkpO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBtYXliZVByb21pc2UuX3Vuc2V0UmVqZWN0aW9uSXNVbmhhbmRsZWQoKTtcbiAgICAgICAgICAgICAgICB0aGlzLl9wcm9taXNlUmVqZWN0ZWQobWF5YmVQcm9taXNlLl9yZWFzb24oKSwgaSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0gZWxzZSBpZiAoIWlzUmVzb2x2ZWQpIHtcbiAgICAgICAgICAgIHRoaXMuX3Byb21pc2VGdWxmaWxsZWQobWF5YmVQcm9taXNlLCBpKTtcbiAgICAgICAgfVxuICAgIH1cbn07XG5cblByb21pc2VBcnJheS5wcm90b3R5cGUuX2lzUmVzb2x2ZWQgPSBmdW5jdGlvbiAoKSB7XG4gICAgcmV0dXJuIHRoaXMuX3ZhbHVlcyA9PT0gbnVsbDtcbn07XG5cblByb21pc2VBcnJheS5wcm90b3R5cGUuX3Jlc29sdmUgPSBmdW5jdGlvbiAodmFsdWUpIHtcbiAgICB0aGlzLl92YWx1ZXMgPSBudWxsO1xuICAgIHRoaXMuX3Byb21pc2UuX2Z1bGZpbGwodmFsdWUpO1xufTtcblxuUHJvbWlzZUFycmF5LnByb3RvdHlwZS5fX2hhcmRSZWplY3RfXyA9XG5Qcm9taXNlQXJyYXkucHJvdG90eXBlLl9yZWplY3QgPSBmdW5jdGlvbiAocmVhc29uKSB7XG4gICAgdGhpcy5fdmFsdWVzID0gbnVsbDtcbiAgICB2YXIgdHJhY2UgPSBlcnJvcnMuZW5zdXJlRXJyb3JPYmplY3QocmVhc29uKTtcbiAgICB0aGlzLl9wcm9taXNlLl9hdHRhY2hFeHRyYVRyYWNlKHRyYWNlKTtcbiAgICB0aGlzLl9wcm9taXNlLl9yZWplY3QocmVhc29uLCB0cmFjZSk7XG59O1xuXG5Qcm9taXNlQXJyYXkucHJvdG90eXBlLl9wcm9taXNlUHJvZ3Jlc3NlZCA9IGZ1bmN0aW9uIChwcm9ncmVzc1ZhbHVlLCBpbmRleCkge1xuICAgIHRoaXMuX3Byb21pc2UuX3Byb2dyZXNzKHtcbiAgICAgICAgaW5kZXg6IGluZGV4LFxuICAgICAgICB2YWx1ZTogcHJvZ3Jlc3NWYWx1ZVxuICAgIH0pO1xufTtcblxuXG5Qcm9taXNlQXJyYXkucHJvdG90eXBlLl9wcm9taXNlRnVsZmlsbGVkID0gZnVuY3Rpb24gKHZhbHVlLCBpbmRleCkge1xuICAgIHRoaXMuX3ZhbHVlc1tpbmRleF0gPSB2YWx1ZTtcbiAgICB2YXIgdG90YWxSZXNvbHZlZCA9ICsrdGhpcy5fdG90YWxSZXNvbHZlZDtcbiAgICBpZiAodG90YWxSZXNvbHZlZCA+PSB0aGlzLl9sZW5ndGgpIHtcbiAgICAgICAgdGhpcy5fcmVzb2x2ZSh0aGlzLl92YWx1ZXMpO1xuICAgIH1cbn07XG5cblByb21pc2VBcnJheS5wcm90b3R5cGUuX3Byb21pc2VSZWplY3RlZCA9IGZ1bmN0aW9uIChyZWFzb24sIGluZGV4KSB7XG4gICAgdGhpcy5fdG90YWxSZXNvbHZlZCsrO1xuICAgIHRoaXMuX3JlamVjdChyZWFzb24pO1xufTtcblxuUHJvbWlzZUFycmF5LnByb3RvdHlwZS5zaG91bGRDb3B5VmFsdWVzID0gZnVuY3Rpb24gKCkge1xuICAgIHJldHVybiB0cnVlO1xufTtcblxuUHJvbWlzZUFycmF5LnByb3RvdHlwZS5nZXRBY3R1YWxMZW5ndGggPSBmdW5jdGlvbiAobGVuKSB7XG4gICAgcmV0dXJuIGxlbjtcbn07XG5cbnJldHVybiBQcm9taXNlQXJyYXk7XG59O1xuIiwiXCJ1c2Ugc3RyaWN0XCI7XG52YXIgdXRpbCA9IHJlcXVpcmUoXCIuL3V0aWwuanNcIik7XG52YXIgbWF5YmVXcmFwQXNFcnJvciA9IHV0aWwubWF5YmVXcmFwQXNFcnJvcjtcbnZhciBlcnJvcnMgPSByZXF1aXJlKFwiLi9lcnJvcnMuanNcIik7XG52YXIgVGltZW91dEVycm9yID0gZXJyb3JzLlRpbWVvdXRFcnJvcjtcbnZhciBPcGVyYXRpb25hbEVycm9yID0gZXJyb3JzLk9wZXJhdGlvbmFsRXJyb3I7XG52YXIgYXN5bmMgPSByZXF1aXJlKFwiLi9hc3luYy5qc1wiKTtcbnZhciBoYXZlR2V0dGVycyA9IHV0aWwuaGF2ZUdldHRlcnM7XG52YXIgZXM1ID0gcmVxdWlyZShcIi4vZXM1LmpzXCIpO1xuXG5mdW5jdGlvbiBpc1VudHlwZWRFcnJvcihvYmopIHtcbiAgICByZXR1cm4gb2JqIGluc3RhbmNlb2YgRXJyb3IgJiZcbiAgICAgICAgZXM1LmdldFByb3RvdHlwZU9mKG9iaikgPT09IEVycm9yLnByb3RvdHlwZTtcbn1cblxudmFyIHJFcnJvcktleSA9IC9eKD86bmFtZXxtZXNzYWdlfHN0YWNrfGNhdXNlKSQvO1xuZnVuY3Rpb24gd3JhcEFzT3BlcmF0aW9uYWxFcnJvcihvYmopIHtcbiAgICB2YXIgcmV0O1xuICAgIGlmIChpc1VudHlwZWRFcnJvcihvYmopKSB7XG4gICAgICAgIHJldCA9IG5ldyBPcGVyYXRpb25hbEVycm9yKG9iaik7XG4gICAgICAgIHJldC5uYW1lID0gb2JqLm5hbWU7XG4gICAgICAgIHJldC5tZXNzYWdlID0gb2JqLm1lc3NhZ2U7XG4gICAgICAgIHJldC5zdGFjayA9IG9iai5zdGFjaztcbiAgICAgICAgdmFyIGtleXMgPSBlczUua2V5cyhvYmopO1xuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGtleXMubGVuZ3RoOyArK2kpIHtcbiAgICAgICAgICAgIHZhciBrZXkgPSBrZXlzW2ldO1xuICAgICAgICAgICAgaWYgKCFyRXJyb3JLZXkudGVzdChrZXkpKSB7XG4gICAgICAgICAgICAgICAgcmV0W2tleV0gPSBvYmpba2V5XTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gcmV0O1xuICAgIH1cbiAgICBlcnJvcnMubWFya0FzT3JpZ2luYXRpbmdGcm9tUmVqZWN0aW9uKG9iaik7XG4gICAgcmV0dXJuIG9iajtcbn1cblxuZnVuY3Rpb24gbm9kZWJhY2tGb3JQcm9taXNlKHByb21pc2UpIHtcbiAgICByZXR1cm4gZnVuY3Rpb24oZXJyLCB2YWx1ZSkge1xuICAgICAgICBpZiAocHJvbWlzZSA9PT0gbnVsbCkgcmV0dXJuO1xuXG4gICAgICAgIGlmIChlcnIpIHtcbiAgICAgICAgICAgIHZhciB3cmFwcGVkID0gd3JhcEFzT3BlcmF0aW9uYWxFcnJvcihtYXliZVdyYXBBc0Vycm9yKGVycikpO1xuICAgICAgICAgICAgcHJvbWlzZS5fYXR0YWNoRXh0cmFUcmFjZSh3cmFwcGVkKTtcbiAgICAgICAgICAgIHByb21pc2UuX3JlamVjdCh3cmFwcGVkKTtcbiAgICAgICAgfSBlbHNlIGlmIChhcmd1bWVudHMubGVuZ3RoID4gMikge1xuICAgICAgICAgICAgdmFyICRfbGVuID0gYXJndW1lbnRzLmxlbmd0aDt2YXIgYXJncyA9IG5ldyBBcnJheSgkX2xlbiAtIDEpOyBmb3IodmFyICRfaSA9IDE7ICRfaSA8ICRfbGVuOyArKyRfaSkge2FyZ3NbJF9pIC0gMV0gPSBhcmd1bWVudHNbJF9pXTt9XG4gICAgICAgICAgICBwcm9taXNlLl9mdWxmaWxsKGFyZ3MpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgcHJvbWlzZS5fZnVsZmlsbCh2YWx1ZSk7XG4gICAgICAgIH1cblxuICAgICAgICBwcm9taXNlID0gbnVsbDtcbiAgICB9O1xufVxuXG5cbnZhciBQcm9taXNlUmVzb2x2ZXI7XG5pZiAoIWhhdmVHZXR0ZXJzKSB7XG4gICAgUHJvbWlzZVJlc29sdmVyID0gZnVuY3Rpb24gKHByb21pc2UpIHtcbiAgICAgICAgdGhpcy5wcm9taXNlID0gcHJvbWlzZTtcbiAgICAgICAgdGhpcy5hc0NhbGxiYWNrID0gbm9kZWJhY2tGb3JQcm9taXNlKHByb21pc2UpO1xuICAgICAgICB0aGlzLmNhbGxiYWNrID0gdGhpcy5hc0NhbGxiYWNrO1xuICAgIH07XG59XG5lbHNlIHtcbiAgICBQcm9taXNlUmVzb2x2ZXIgPSBmdW5jdGlvbiAocHJvbWlzZSkge1xuICAgICAgICB0aGlzLnByb21pc2UgPSBwcm9taXNlO1xuICAgIH07XG59XG5pZiAoaGF2ZUdldHRlcnMpIHtcbiAgICB2YXIgcHJvcCA9IHtcbiAgICAgICAgZ2V0OiBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIHJldHVybiBub2RlYmFja0ZvclByb21pc2UodGhpcy5wcm9taXNlKTtcbiAgICAgICAgfVxuICAgIH07XG4gICAgZXM1LmRlZmluZVByb3BlcnR5KFByb21pc2VSZXNvbHZlci5wcm90b3R5cGUsIFwiYXNDYWxsYmFja1wiLCBwcm9wKTtcbiAgICBlczUuZGVmaW5lUHJvcGVydHkoUHJvbWlzZVJlc29sdmVyLnByb3RvdHlwZSwgXCJjYWxsYmFja1wiLCBwcm9wKTtcbn1cblxuUHJvbWlzZVJlc29sdmVyLl9ub2RlYmFja0ZvclByb21pc2UgPSBub2RlYmFja0ZvclByb21pc2U7XG5cblByb21pc2VSZXNvbHZlci5wcm90b3R5cGUudG9TdHJpbmcgPSBmdW5jdGlvbiAoKSB7XG4gICAgcmV0dXJuIFwiW29iamVjdCBQcm9taXNlUmVzb2x2ZXJdXCI7XG59O1xuXG5Qcm9taXNlUmVzb2x2ZXIucHJvdG90eXBlLnJlc29sdmUgPVxuUHJvbWlzZVJlc29sdmVyLnByb3RvdHlwZS5mdWxmaWxsID0gZnVuY3Rpb24gKHZhbHVlKSB7XG4gICAgaWYgKCEodGhpcyBpbnN0YW5jZW9mIFByb21pc2VSZXNvbHZlcikpIHtcbiAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcihcIklsbGVnYWwgaW52b2NhdGlvbiwgcmVzb2x2ZXIgcmVzb2x2ZS9yZWplY3QgbXVzdCBiZSBjYWxsZWQgd2l0aGluIGEgcmVzb2x2ZXIgY29udGV4dC4gQ29uc2lkZXIgdXNpbmcgdGhlIHByb21pc2UgY29uc3RydWN0b3IgaW5zdGVhZC5cXHUwMDBhXFx1MDAwYSAgICBTZWUgaHR0cDovL2dvby5nbC9zZGtYTDlcXHUwMDBhXCIpO1xuICAgIH1cblxuICAgIHZhciBwcm9taXNlID0gdGhpcy5wcm9taXNlO1xuICAgIGlmIChwcm9taXNlLl90cnlGb2xsb3codmFsdWUpKSB7XG4gICAgICAgIHJldHVybjtcbiAgICB9XG4gICAgYXN5bmMuaW52b2tlKHByb21pc2UuX2Z1bGZpbGwsIHByb21pc2UsIHZhbHVlKTtcbn07XG5cblByb21pc2VSZXNvbHZlci5wcm90b3R5cGUucmVqZWN0ID0gZnVuY3Rpb24gKHJlYXNvbikge1xuICAgIGlmICghKHRoaXMgaW5zdGFuY2VvZiBQcm9taXNlUmVzb2x2ZXIpKSB7XG4gICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoXCJJbGxlZ2FsIGludm9jYXRpb24sIHJlc29sdmVyIHJlc29sdmUvcmVqZWN0IG11c3QgYmUgY2FsbGVkIHdpdGhpbiBhIHJlc29sdmVyIGNvbnRleHQuIENvbnNpZGVyIHVzaW5nIHRoZSBwcm9taXNlIGNvbnN0cnVjdG9yIGluc3RlYWQuXFx1MDAwYVxcdTAwMGEgICAgU2VlIGh0dHA6Ly9nb28uZ2wvc2RrWEw5XFx1MDAwYVwiKTtcbiAgICB9XG5cbiAgICB2YXIgcHJvbWlzZSA9IHRoaXMucHJvbWlzZTtcbiAgICBlcnJvcnMubWFya0FzT3JpZ2luYXRpbmdGcm9tUmVqZWN0aW9uKHJlYXNvbik7XG4gICAgdmFyIHRyYWNlID0gZXJyb3JzLmVuc3VyZUVycm9yT2JqZWN0KHJlYXNvbik7XG4gICAgYXN5bmMuaW52b2tlKHByb21pc2UuX3JlamVjdCwgcHJvbWlzZSwgcmVhc29uKTtcbiAgICBpZiAodHJhY2UgIT09IHJlYXNvbikge1xuICAgICAgICBhc3luYy5pbnZva2UodGhpcy5fc2V0Q2FycmllZFN0YWNrVHJhY2UsIHRoaXMsIHRyYWNlKTtcbiAgICB9XG59O1xuXG5Qcm9taXNlUmVzb2x2ZXIucHJvdG90eXBlLnByb2dyZXNzID0gZnVuY3Rpb24gKHZhbHVlKSB7XG4gICAgaWYgKCEodGhpcyBpbnN0YW5jZW9mIFByb21pc2VSZXNvbHZlcikpIHtcbiAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcihcIklsbGVnYWwgaW52b2NhdGlvbiwgcmVzb2x2ZXIgcmVzb2x2ZS9yZWplY3QgbXVzdCBiZSBjYWxsZWQgd2l0aGluIGEgcmVzb2x2ZXIgY29udGV4dC4gQ29uc2lkZXIgdXNpbmcgdGhlIHByb21pc2UgY29uc3RydWN0b3IgaW5zdGVhZC5cXHUwMDBhXFx1MDAwYSAgICBTZWUgaHR0cDovL2dvby5nbC9zZGtYTDlcXHUwMDBhXCIpO1xuICAgIH1cbiAgICBhc3luYy5pbnZva2UodGhpcy5wcm9taXNlLl9wcm9ncmVzcywgdGhpcy5wcm9taXNlLCB2YWx1ZSk7XG59O1xuXG5Qcm9taXNlUmVzb2x2ZXIucHJvdG90eXBlLmNhbmNlbCA9IGZ1bmN0aW9uICgpIHtcbiAgICBhc3luYy5pbnZva2UodGhpcy5wcm9taXNlLmNhbmNlbCwgdGhpcy5wcm9taXNlLCB1bmRlZmluZWQpO1xufTtcblxuUHJvbWlzZVJlc29sdmVyLnByb3RvdHlwZS50aW1lb3V0ID0gZnVuY3Rpb24gKCkge1xuICAgIHRoaXMucmVqZWN0KG5ldyBUaW1lb3V0RXJyb3IoXCJ0aW1lb3V0XCIpKTtcbn07XG5cblByb21pc2VSZXNvbHZlci5wcm90b3R5cGUuaXNSZXNvbHZlZCA9IGZ1bmN0aW9uICgpIHtcbiAgICByZXR1cm4gdGhpcy5wcm9taXNlLmlzUmVzb2x2ZWQoKTtcbn07XG5cblByb21pc2VSZXNvbHZlci5wcm90b3R5cGUudG9KU09OID0gZnVuY3Rpb24gKCkge1xuICAgIHJldHVybiB0aGlzLnByb21pc2UudG9KU09OKCk7XG59O1xuXG5Qcm9taXNlUmVzb2x2ZXIucHJvdG90eXBlLl9zZXRDYXJyaWVkU3RhY2tUcmFjZSA9IGZ1bmN0aW9uICh0cmFjZSkge1xuICAgIGlmICh0aGlzLnByb21pc2UuaXNSZWplY3RlZCgpKSB7XG4gICAgICAgIHRoaXMucHJvbWlzZS5fc2V0Q2FycmllZFN0YWNrVHJhY2UodHJhY2UpO1xuICAgIH1cbn07XG5cbm1vZHVsZS5leHBvcnRzID0gUHJvbWlzZVJlc29sdmVyO1xuIiwiXCJ1c2Ugc3RyaWN0XCI7XG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uKFByb21pc2UsIElOVEVSTkFMKSB7XG52YXIgVEhJUyA9IHt9O1xudmFyIHV0aWwgPSByZXF1aXJlKFwiLi91dGlsLmpzXCIpO1xudmFyIG5vZGViYWNrRm9yUHJvbWlzZSA9IHJlcXVpcmUoXCIuL3Byb21pc2VfcmVzb2x2ZXIuanNcIilcbiAgICAuX25vZGViYWNrRm9yUHJvbWlzZTtcbnZhciB3aXRoQXBwZW5kZWQgPSB1dGlsLndpdGhBcHBlbmRlZDtcbnZhciBtYXliZVdyYXBBc0Vycm9yID0gdXRpbC5tYXliZVdyYXBBc0Vycm9yO1xudmFyIGNhbkV2YWx1YXRlID0gdXRpbC5jYW5FdmFsdWF0ZTtcbnZhciBUeXBlRXJyb3IgPSByZXF1aXJlKFwiLi9lcnJvcnNcIikuVHlwZUVycm9yO1xudmFyIGRlZmF1bHRTdWZmaXggPSBcIkFzeW5jXCI7XG52YXIgZGVmYXVsdEZpbHRlciA9IGZ1bmN0aW9uKG5hbWUsIGZ1bmMpIHtcbiAgICByZXR1cm4gdXRpbC5pc0lkZW50aWZpZXIobmFtZSkgJiZcbiAgICAgICAgbmFtZS5jaGFyQXQoMCkgIT09IFwiX1wiICYmXG4gICAgICAgICF1dGlsLmlzQ2xhc3MoZnVuYyk7XG59O1xudmFyIGRlZmF1bHRQcm9taXNpZmllZCA9IHtfX2lzUHJvbWlzaWZpZWRfXzogdHJ1ZX07XG5cblxuZnVuY3Rpb24gZXNjYXBlSWRlbnRSZWdleChzdHIpIHtcbiAgICByZXR1cm4gc3RyLnJlcGxhY2UoLyhbJF0pLywgXCJcXFxcJFwiKTtcbn1cblxuZnVuY3Rpb24gaXNQcm9taXNpZmllZChmbikge1xuICAgIHRyeSB7XG4gICAgICAgIHJldHVybiBmbi5fX2lzUHJvbWlzaWZpZWRfXyA9PT0gdHJ1ZTtcbiAgICB9XG4gICAgY2F0Y2ggKGUpIHtcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbn1cblxuZnVuY3Rpb24gaGFzUHJvbWlzaWZpZWQob2JqLCBrZXksIHN1ZmZpeCkge1xuICAgIHZhciB2YWwgPSB1dGlsLmdldERhdGFQcm9wZXJ0eU9yRGVmYXVsdChvYmosIGtleSArIHN1ZmZpeCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVmYXVsdFByb21pc2lmaWVkKTtcbiAgICByZXR1cm4gdmFsID8gaXNQcm9taXNpZmllZCh2YWwpIDogZmFsc2U7XG59XG5mdW5jdGlvbiBjaGVja1ZhbGlkKHJldCwgc3VmZml4LCBzdWZmaXhSZWdleHApIHtcbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IHJldC5sZW5ndGg7IGkgKz0gMikge1xuICAgICAgICB2YXIga2V5ID0gcmV0W2ldO1xuICAgICAgICBpZiAoc3VmZml4UmVnZXhwLnRlc3Qoa2V5KSkge1xuICAgICAgICAgICAgdmFyIGtleVdpdGhvdXRBc3luY1N1ZmZpeCA9IGtleS5yZXBsYWNlKHN1ZmZpeFJlZ2V4cCwgXCJcIik7XG4gICAgICAgICAgICBmb3IgKHZhciBqID0gMDsgaiA8IHJldC5sZW5ndGg7IGogKz0gMikge1xuICAgICAgICAgICAgICAgIGlmIChyZXRbal0gPT09IGtleVdpdGhvdXRBc3luY1N1ZmZpeCkge1xuICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKFwiQ2Fubm90IHByb21pc2lmeSBhbiBBUEkgdGhhdCBoYXMgbm9ybWFsIG1ldGhvZHMgd2l0aCAnJXMnLXN1ZmZpeFxcdTAwMGFcXHUwMDBhICAgIFNlZSBodHRwOi8vZ29vLmdsL2lXclpid1xcdTAwMGFcIlxuICAgICAgICAgICAgICAgICAgICAgICAgLnJlcGxhY2UoXCIlc1wiLCBzdWZmaXgpKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG59XG5cbmZ1bmN0aW9uIHByb21pc2lmaWFibGVNZXRob2RzKG9iaiwgc3VmZml4LCBzdWZmaXhSZWdleHAsIGZpbHRlcikge1xuICAgIHZhciBrZXlzID0gdXRpbC5pbmhlcml0ZWREYXRhS2V5cyhvYmopO1xuICAgIHZhciByZXQgPSBbXTtcbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IGtleXMubGVuZ3RoOyArK2kpIHtcbiAgICAgICAgdmFyIGtleSA9IGtleXNbaV07XG4gICAgICAgIHZhciB2YWx1ZSA9IG9ialtrZXldO1xuICAgICAgICB2YXIgcGFzc2VzRGVmYXVsdEZpbHRlciA9IGZpbHRlciA9PT0gZGVmYXVsdEZpbHRlclxuICAgICAgICAgICAgPyB0cnVlIDogZGVmYXVsdEZpbHRlcihrZXksIHZhbHVlLCBvYmopO1xuICAgICAgICBpZiAodHlwZW9mIHZhbHVlID09PSBcImZ1bmN0aW9uXCIgJiZcbiAgICAgICAgICAgICFpc1Byb21pc2lmaWVkKHZhbHVlKSAmJlxuICAgICAgICAgICAgIWhhc1Byb21pc2lmaWVkKG9iaiwga2V5LCBzdWZmaXgpICYmXG4gICAgICAgICAgICBmaWx0ZXIoa2V5LCB2YWx1ZSwgb2JqLCBwYXNzZXNEZWZhdWx0RmlsdGVyKSkge1xuICAgICAgICAgICAgcmV0LnB1c2goa2V5LCB2YWx1ZSk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgY2hlY2tWYWxpZChyZXQsIHN1ZmZpeCwgc3VmZml4UmVnZXhwKTtcbiAgICByZXR1cm4gcmV0O1xufVxuXG5mdW5jdGlvbiBzd2l0Y2hDYXNlQXJndW1lbnRPcmRlcihsaWtlbHlBcmd1bWVudENvdW50KSB7XG4gICAgdmFyIHJldCA9IFtsaWtlbHlBcmd1bWVudENvdW50XTtcbiAgICB2YXIgbWluID0gTWF0aC5tYXgoMCwgbGlrZWx5QXJndW1lbnRDb3VudCAtIDEgLSA1KTtcbiAgICBmb3IodmFyIGkgPSBsaWtlbHlBcmd1bWVudENvdW50IC0gMTsgaSA+PSBtaW47IC0taSkge1xuICAgICAgICBpZiAoaSA9PT0gbGlrZWx5QXJndW1lbnRDb3VudCkgY29udGludWU7XG4gICAgICAgIHJldC5wdXNoKGkpO1xuICAgIH1cbiAgICBmb3IodmFyIGkgPSBsaWtlbHlBcmd1bWVudENvdW50ICsgMTsgaSA8PSA1OyArK2kpIHtcbiAgICAgICAgcmV0LnB1c2goaSk7XG4gICAgfVxuICAgIHJldHVybiByZXQ7XG59XG5cbmZ1bmN0aW9uIGFyZ3VtZW50U2VxdWVuY2UoYXJndW1lbnRDb3VudCkge1xuICAgIHJldHVybiB1dGlsLmZpbGxlZFJhbmdlKGFyZ3VtZW50Q291bnQsIFwiYXJndW1lbnRzW1wiLCBcIl1cIik7XG59XG5cbmZ1bmN0aW9uIHBhcmFtZXRlckRlY2xhcmF0aW9uKHBhcmFtZXRlckNvdW50KSB7XG4gICAgcmV0dXJuIHV0aWwuZmlsbGVkUmFuZ2UocGFyYW1ldGVyQ291bnQsIFwiX2FyZ1wiLCBcIlwiKTtcbn1cblxuZnVuY3Rpb24gcGFyYW1ldGVyQ291bnQoZm4pIHtcbiAgICBpZiAodHlwZW9mIGZuLmxlbmd0aCA9PT0gXCJudW1iZXJcIikge1xuICAgICAgICByZXR1cm4gTWF0aC5tYXgoTWF0aC5taW4oZm4ubGVuZ3RoLCAxMDIzICsgMSksIDApO1xuICAgIH1cbiAgICByZXR1cm4gMDtcbn1cblxuZnVuY3Rpb24gZ2VuZXJhdGVQcm9wZXJ0eUFjY2VzcyhrZXkpIHtcbiAgICBpZiAodXRpbC5pc0lkZW50aWZpZXIoa2V5KSkge1xuICAgICAgICByZXR1cm4gXCIuXCIgKyBrZXk7XG4gICAgfVxuICAgIGVsc2UgcmV0dXJuIFwiWydcIiArIGtleS5yZXBsYWNlKC8oWydcXFxcXSkvZywgXCJcXFxcJDFcIikgKyBcIiddXCI7XG59XG5cbmZ1bmN0aW9uIG1ha2VOb2RlUHJvbWlzaWZpZWRFdmFsKGNhbGxiYWNrLCByZWNlaXZlciwgb3JpZ2luYWxOYW1lLCBmbiwgc3VmZml4KSB7XG4gICAgdmFyIG5ld1BhcmFtZXRlckNvdW50ID0gTWF0aC5tYXgoMCwgcGFyYW1ldGVyQ291bnQoZm4pIC0gMSk7XG4gICAgdmFyIGFyZ3VtZW50T3JkZXIgPSBzd2l0Y2hDYXNlQXJndW1lbnRPcmRlcihuZXdQYXJhbWV0ZXJDb3VudCk7XG4gICAgdmFyIGNhbGxiYWNrTmFtZSA9XG4gICAgICAgICh0eXBlb2Ygb3JpZ2luYWxOYW1lID09PSBcInN0cmluZ1wiICYmIHV0aWwuaXNJZGVudGlmaWVyKG9yaWdpbmFsTmFtZSlcbiAgICAgICAgICAgID8gb3JpZ2luYWxOYW1lICsgc3VmZml4XG4gICAgICAgICAgICA6IFwicHJvbWlzaWZpZWRcIik7XG5cbiAgICBmdW5jdGlvbiBnZW5lcmF0ZUNhbGxGb3JBcmd1bWVudENvdW50KGNvdW50KSB7XG4gICAgICAgIHZhciBhcmdzID0gYXJndW1lbnRTZXF1ZW5jZShjb3VudCkuam9pbihcIiwgXCIpO1xuICAgICAgICB2YXIgY29tbWEgPSBjb3VudCA+IDAgPyBcIiwgXCIgOiBcIlwiO1xuICAgICAgICB2YXIgcmV0O1xuICAgICAgICBpZiAodHlwZW9mIGNhbGxiYWNrID09PSBcInN0cmluZ1wiKSB7XG4gICAgICAgICAgICByZXQgPSBcIiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcXG5cXFxuICAgICAgICAgICAgICAgIHRoaXMubWV0aG9kKHt7YXJnc319LCBmbik7ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcXG5cXFxuICAgICAgICAgICAgICAgIGJyZWFrOyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcXG5cXFxuICAgICAgICAgICAgXCIucmVwbGFjZShcIi5tZXRob2RcIiwgZ2VuZXJhdGVQcm9wZXJ0eUFjY2VzcyhjYWxsYmFjaykpO1xuICAgICAgICB9IGVsc2UgaWYgKHJlY2VpdmVyID09PSBUSElTKSB7XG4gICAgICAgICAgICByZXQgPSAgXCIgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcXG5cXFxuICAgICAgICAgICAgICAgIGNhbGxiYWNrLmNhbGwodGhpcywge3thcmdzfX0sIGZuKTsgICAgICAgICAgICAgICAgICAgICAgICAgICBcXG5cXFxuICAgICAgICAgICAgICAgIGJyZWFrOyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcXG5cXFxuICAgICAgICAgICAgXCI7XG4gICAgICAgIH0gZWxzZSBpZiAocmVjZWl2ZXIgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgcmV0ID0gIFwiICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXFxuXFxcbiAgICAgICAgICAgICAgICBjYWxsYmFjay5jYWxsKHJlY2VpdmVyLCB7e2FyZ3N9fSwgZm4pOyAgICAgICAgICAgICAgICAgICAgICAgXFxuXFxcbiAgICAgICAgICAgICAgICBicmVhazsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXFxuXFxcbiAgICAgICAgICAgIFwiO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgcmV0ID0gIFwiICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXFxuXFxcbiAgICAgICAgICAgICAgICBjYWxsYmFjayh7e2FyZ3N9fSwgZm4pOyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXFxuXFxcbiAgICAgICAgICAgICAgICBicmVhazsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXFxuXFxcbiAgICAgICAgICAgIFwiO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiByZXQucmVwbGFjZShcInt7YXJnc319XCIsIGFyZ3MpLnJlcGxhY2UoXCIsIFwiLCBjb21tYSk7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gZ2VuZXJhdGVBcmd1bWVudFN3aXRjaENhc2UoKSB7XG4gICAgICAgIHZhciByZXQgPSBcIlwiO1xuICAgICAgICBmb3IodmFyIGkgPSAwOyBpIDwgYXJndW1lbnRPcmRlci5sZW5ndGg7ICsraSkge1xuICAgICAgICAgICAgcmV0ICs9IFwiY2FzZSBcIiArIGFyZ3VtZW50T3JkZXJbaV0gK1wiOlwiICtcbiAgICAgICAgICAgICAgICBnZW5lcmF0ZUNhbGxGb3JBcmd1bWVudENvdW50KGFyZ3VtZW50T3JkZXJbaV0pO1xuICAgICAgICB9XG4gICAgICAgIHZhciBjb2RlRm9yQ2FsbDtcbiAgICAgICAgaWYgKHR5cGVvZiBjYWxsYmFjayA9PT0gXCJzdHJpbmdcIikge1xuICAgICAgICAgICAgY29kZUZvckNhbGwgPSBcIiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXFxuXFxcbiAgICAgICAgICAgICAgICB0aGlzLnByb3BlcnR5LmFwcGx5KHRoaXMsIGFyZ3MpOyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXFxuXFxcbiAgICAgICAgICAgIFwiXG4gICAgICAgICAgICAgICAgLnJlcGxhY2UoXCIucHJvcGVydHlcIiwgZ2VuZXJhdGVQcm9wZXJ0eUFjY2VzcyhjYWxsYmFjaykpO1xuICAgICAgICB9IGVsc2UgaWYgKHJlY2VpdmVyID09PSBUSElTKSB7XG4gICAgICAgICAgICBjb2RlRm9yQ2FsbCA9IFwiICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcXG5cXFxuICAgICAgICAgICAgICAgIGNhbGxiYWNrLmFwcGx5KHRoaXMsIGFyZ3MpOyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcXG5cXFxuICAgICAgICAgICAgXCI7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBjb2RlRm9yQ2FsbCA9IFwiICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcXG5cXFxuICAgICAgICAgICAgICAgIGNhbGxiYWNrLmFwcGx5KHJlY2VpdmVyLCBhcmdzKTsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcXG5cXFxuICAgICAgICAgICAgXCI7XG4gICAgICAgIH1cblxuICAgICAgICByZXQgKz0gXCIgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXFxuXFxcbiAgICAgICAgZGVmYXVsdDogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXFxuXFxcbiAgICAgICAgICAgIHZhciBhcmdzID0gbmV3IEFycmF5KGxlbiArIDEpOyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXFxuXFxcbiAgICAgICAgICAgIHZhciBpID0gMDsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXFxuXFxcbiAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbGVuOyArK2kpIHsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXFxuXFxcbiAgICAgICAgICAgICAgIGFyZ3NbaV0gPSBhcmd1bWVudHNbaV07ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXFxuXFxcbiAgICAgICAgICAgIH0gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXFxuXFxcbiAgICAgICAgICAgIGFyZ3NbaV0gPSBmbjsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXFxuXFxcbiAgICAgICAgICAgIFtDb2RlRm9yQ2FsbF0gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXFxuXFxcbiAgICAgICAgICAgIGJyZWFrOyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXFxuXFxcbiAgICAgICAgXCIucmVwbGFjZShcIltDb2RlRm9yQ2FsbF1cIiwgY29kZUZvckNhbGwpO1xuICAgICAgICByZXR1cm4gcmV0O1xuICAgIH1cblxuICAgIHJldHVybiBuZXcgRnVuY3Rpb24oXCJQcm9taXNlXCIsXG4gICAgICAgICAgICAgICAgICAgICAgICBcImNhbGxiYWNrXCIsXG4gICAgICAgICAgICAgICAgICAgICAgICBcInJlY2VpdmVyXCIsXG4gICAgICAgICAgICAgICAgICAgICAgICBcIndpdGhBcHBlbmRlZFwiLFxuICAgICAgICAgICAgICAgICAgICAgICAgXCJtYXliZVdyYXBBc0Vycm9yXCIsXG4gICAgICAgICAgICAgICAgICAgICAgICBcIm5vZGViYWNrRm9yUHJvbWlzZVwiLFxuICAgICAgICAgICAgICAgICAgICAgICAgXCJJTlRFUk5BTFwiLFwiICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcXG5cXFxuICAgICAgICB2YXIgcmV0ID0gZnVuY3Rpb24gKFBhcmFtZXRlcnMpIHsgICAgICAgICAgICAgICAgICAgICAgICBcXG5cXFxuICAgICAgICAgICAgJ3VzZSBzdHJpY3QnOyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcXG5cXFxuICAgICAgICAgICAgdmFyIGxlbiA9IGFyZ3VtZW50cy5sZW5ndGg7ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcXG5cXFxuICAgICAgICAgICAgdmFyIHByb21pc2UgPSBuZXcgUHJvbWlzZShJTlRFUk5BTCk7ICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcXG5cXFxuICAgICAgICAgICAgcHJvbWlzZS5fY2FwdHVyZVN0YWNrVHJhY2UoKTsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcXG5cXFxuICAgICAgICAgICAgcHJvbWlzZS5fc2V0SXNTcHJlYWRhYmxlKCk7ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcXG5cXFxuICAgICAgICAgICAgdmFyIGZuID0gbm9kZWJhY2tGb3JQcm9taXNlKHByb21pc2UpOyAgICAgICAgICAgICAgICAgICAgICAgICAgICBcXG5cXFxuICAgICAgICAgICAgdHJ5IHsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcXG5cXFxuICAgICAgICAgICAgICAgIHN3aXRjaChsZW4pIHsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcXG5cXFxuICAgICAgICAgICAgICAgICAgICBbQ29kZUZvclN3aXRjaENhc2VdICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcXG5cXFxuICAgICAgICAgICAgICAgIH0gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcXG5cXFxuICAgICAgICAgICAgfSBjYXRjaCAoZSkgeyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcXG5cXFxuICAgICAgICAgICAgICAgIHZhciB3cmFwcGVkID0gbWF5YmVXcmFwQXNFcnJvcihlKTsgICAgICAgICAgICAgICAgICAgICAgICAgICBcXG5cXFxuICAgICAgICAgICAgICAgIHByb21pc2UuX2F0dGFjaEV4dHJhVHJhY2Uod3JhcHBlZCk7ICAgICAgICAgICAgICAgICAgICAgICAgICBcXG5cXFxuICAgICAgICAgICAgICAgIHByb21pc2UuX3JlamVjdCh3cmFwcGVkKTsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcXG5cXFxuICAgICAgICAgICAgfSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcXG5cXFxuICAgICAgICAgICAgcmV0dXJuIHByb21pc2U7ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcXG5cXFxuICAgICAgICB9OyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcXG5cXFxuICAgICAgICByZXQuX19pc1Byb21pc2lmaWVkX18gPSB0cnVlOyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcXG5cXFxuICAgICAgICByZXR1cm4gcmV0OyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcXG5cXFxuICAgICAgICBcIlxuICAgICAgICAucmVwbGFjZShcIkZ1bmN0aW9uTmFtZVwiLCBjYWxsYmFja05hbWUpXG4gICAgICAgIC5yZXBsYWNlKFwiUGFyYW1ldGVyc1wiLCBwYXJhbWV0ZXJEZWNsYXJhdGlvbihuZXdQYXJhbWV0ZXJDb3VudCkpXG4gICAgICAgIC5yZXBsYWNlKFwiW0NvZGVGb3JTd2l0Y2hDYXNlXVwiLCBnZW5lcmF0ZUFyZ3VtZW50U3dpdGNoQ2FzZSgpKSkoXG4gICAgICAgICAgICBQcm9taXNlLFxuICAgICAgICAgICAgY2FsbGJhY2ssXG4gICAgICAgICAgICByZWNlaXZlcixcbiAgICAgICAgICAgIHdpdGhBcHBlbmRlZCxcbiAgICAgICAgICAgIG1heWJlV3JhcEFzRXJyb3IsXG4gICAgICAgICAgICBub2RlYmFja0ZvclByb21pc2UsXG4gICAgICAgICAgICBJTlRFUk5BTFxuICAgICAgICApO1xufVxuXG5mdW5jdGlvbiBtYWtlTm9kZVByb21pc2lmaWVkQ2xvc3VyZShjYWxsYmFjaywgcmVjZWl2ZXIpIHtcbiAgICBmdW5jdGlvbiBwcm9taXNpZmllZCgpIHtcbiAgICAgICAgdmFyIF9yZWNlaXZlciA9IHJlY2VpdmVyO1xuICAgICAgICBpZiAocmVjZWl2ZXIgPT09IFRISVMpIF9yZWNlaXZlciA9IHRoaXM7XG4gICAgICAgIGlmICh0eXBlb2YgY2FsbGJhY2sgPT09IFwic3RyaW5nXCIpIHtcbiAgICAgICAgICAgIGNhbGxiYWNrID0gX3JlY2VpdmVyW2NhbGxiYWNrXTtcbiAgICAgICAgfVxuICAgICAgICB2YXIgcHJvbWlzZSA9IG5ldyBQcm9taXNlKElOVEVSTkFMKTtcbiAgICAgICAgcHJvbWlzZS5fY2FwdHVyZVN0YWNrVHJhY2UoKTtcbiAgICAgICAgcHJvbWlzZS5fc2V0SXNTcHJlYWRhYmxlKCk7XG4gICAgICAgIHZhciBmbiA9IG5vZGViYWNrRm9yUHJvbWlzZShwcm9taXNlKTtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGNhbGxiYWNrLmFwcGx5KF9yZWNlaXZlciwgd2l0aEFwcGVuZGVkKGFyZ3VtZW50cywgZm4pKTtcbiAgICAgICAgfSBjYXRjaChlKSB7XG4gICAgICAgICAgICB2YXIgd3JhcHBlZCA9IG1heWJlV3JhcEFzRXJyb3IoZSk7XG4gICAgICAgICAgICBwcm9taXNlLl9hdHRhY2hFeHRyYVRyYWNlKHdyYXBwZWQpO1xuICAgICAgICAgICAgcHJvbWlzZS5fcmVqZWN0KHdyYXBwZWQpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBwcm9taXNlO1xuICAgIH1cbiAgICBwcm9taXNpZmllZC5fX2lzUHJvbWlzaWZpZWRfXyA9IHRydWU7XG4gICAgcmV0dXJuIHByb21pc2lmaWVkO1xufVxuXG52YXIgbWFrZU5vZGVQcm9taXNpZmllZCA9IGNhbkV2YWx1YXRlXG4gICAgPyBtYWtlTm9kZVByb21pc2lmaWVkRXZhbFxuICAgIDogbWFrZU5vZGVQcm9taXNpZmllZENsb3N1cmU7XG5cbmZ1bmN0aW9uIHByb21pc2lmeUFsbChvYmosIHN1ZmZpeCwgZmlsdGVyLCBwcm9taXNpZmllcikge1xuICAgIHZhciBzdWZmaXhSZWdleHAgPSBuZXcgUmVnRXhwKGVzY2FwZUlkZW50UmVnZXgoc3VmZml4KSArIFwiJFwiKTtcbiAgICB2YXIgbWV0aG9kcyA9XG4gICAgICAgIHByb21pc2lmaWFibGVNZXRob2RzKG9iaiwgc3VmZml4LCBzdWZmaXhSZWdleHAsIGZpbHRlcik7XG5cbiAgICBmb3IgKHZhciBpID0gMCwgbGVuID0gbWV0aG9kcy5sZW5ndGg7IGkgPCBsZW47IGkrPSAyKSB7XG4gICAgICAgIHZhciBrZXkgPSBtZXRob2RzW2ldO1xuICAgICAgICB2YXIgZm4gPSBtZXRob2RzW2krMV07XG4gICAgICAgIHZhciBwcm9taXNpZmllZEtleSA9IGtleSArIHN1ZmZpeDtcbiAgICAgICAgb2JqW3Byb21pc2lmaWVkS2V5XSA9IHByb21pc2lmaWVyID09PSBtYWtlTm9kZVByb21pc2lmaWVkXG4gICAgICAgICAgICAgICAgPyBtYWtlTm9kZVByb21pc2lmaWVkKGtleSwgVEhJUywga2V5LCBmbiwgc3VmZml4KVxuICAgICAgICAgICAgICAgIDogcHJvbWlzaWZpZXIoZm4sIGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gbWFrZU5vZGVQcm9taXNpZmllZChrZXksIFRISVMsIGtleSwgZm4sIHN1ZmZpeCk7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgfVxuICAgIHV0aWwudG9GYXN0UHJvcGVydGllcyhvYmopO1xuICAgIHJldHVybiBvYmo7XG59XG5cbmZ1bmN0aW9uIHByb21pc2lmeShjYWxsYmFjaywgcmVjZWl2ZXIpIHtcbiAgICByZXR1cm4gbWFrZU5vZGVQcm9taXNpZmllZChjYWxsYmFjaywgcmVjZWl2ZXIsIHVuZGVmaW5lZCwgY2FsbGJhY2spO1xufVxuXG5Qcm9taXNlLnByb21pc2lmeSA9IGZ1bmN0aW9uIChmbiwgcmVjZWl2ZXIpIHtcbiAgICBpZiAodHlwZW9mIGZuICE9PSBcImZ1bmN0aW9uXCIpIHtcbiAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcihcImZuIG11c3QgYmUgYSBmdW5jdGlvblxcdTAwMGFcXHUwMDBhICAgIFNlZSBodHRwOi8vZ29vLmdsLzkxNmxKSlxcdTAwMGFcIik7XG4gICAgfVxuICAgIGlmIChpc1Byb21pc2lmaWVkKGZuKSkge1xuICAgICAgICByZXR1cm4gZm47XG4gICAgfVxuICAgIHJldHVybiBwcm9taXNpZnkoZm4sIGFyZ3VtZW50cy5sZW5ndGggPCAyID8gVEhJUyA6IHJlY2VpdmVyKTtcbn07XG5cblByb21pc2UucHJvbWlzaWZ5QWxsID0gZnVuY3Rpb24gKHRhcmdldCwgb3B0aW9ucykge1xuICAgIGlmICh0eXBlb2YgdGFyZ2V0ICE9PSBcImZ1bmN0aW9uXCIgJiYgdHlwZW9mIHRhcmdldCAhPT0gXCJvYmplY3RcIikge1xuICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKFwidGhlIHRhcmdldCBvZiBwcm9taXNpZnlBbGwgbXVzdCBiZSBhbiBvYmplY3Qgb3IgYSBmdW5jdGlvblxcdTAwMGFcXHUwMDBhICAgIFNlZSBodHRwOi8vZ29vLmdsLzlJVGxWMFxcdTAwMGFcIik7XG4gICAgfVxuICAgIG9wdGlvbnMgPSBPYmplY3Qob3B0aW9ucyk7XG4gICAgdmFyIHN1ZmZpeCA9IG9wdGlvbnMuc3VmZml4O1xuICAgIGlmICh0eXBlb2Ygc3VmZml4ICE9PSBcInN0cmluZ1wiKSBzdWZmaXggPSBkZWZhdWx0U3VmZml4O1xuICAgIHZhciBmaWx0ZXIgPSBvcHRpb25zLmZpbHRlcjtcbiAgICBpZiAodHlwZW9mIGZpbHRlciAhPT0gXCJmdW5jdGlvblwiKSBmaWx0ZXIgPSBkZWZhdWx0RmlsdGVyO1xuICAgIHZhciBwcm9taXNpZmllciA9IG9wdGlvbnMucHJvbWlzaWZpZXI7XG4gICAgaWYgKHR5cGVvZiBwcm9taXNpZmllciAhPT0gXCJmdW5jdGlvblwiKSBwcm9taXNpZmllciA9IG1ha2VOb2RlUHJvbWlzaWZpZWQ7XG5cbiAgICBpZiAoIXV0aWwuaXNJZGVudGlmaWVyKHN1ZmZpeCkpIHtcbiAgICAgICAgdGhyb3cgbmV3IFJhbmdlRXJyb3IoXCJzdWZmaXggbXVzdCBiZSBhIHZhbGlkIGlkZW50aWZpZXJcXHUwMDBhXFx1MDAwYSAgICBTZWUgaHR0cDovL2dvby5nbC84RlpvNVZcXHUwMDBhXCIpO1xuICAgIH1cblxuICAgIHZhciBrZXlzID0gdXRpbC5pbmhlcml0ZWREYXRhS2V5cyh0YXJnZXQsIHtpbmNsdWRlSGlkZGVuOiB0cnVlfSk7XG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCBrZXlzLmxlbmd0aDsgKytpKSB7XG4gICAgICAgIHZhciB2YWx1ZSA9IHRhcmdldFtrZXlzW2ldXTtcbiAgICAgICAgaWYgKGtleXNbaV0gIT09IFwiY29uc3RydWN0b3JcIiAmJlxuICAgICAgICAgICAgdXRpbC5pc0NsYXNzKHZhbHVlKSkge1xuICAgICAgICAgICAgcHJvbWlzaWZ5QWxsKHZhbHVlLnByb3RvdHlwZSwgc3VmZml4LCBmaWx0ZXIsIHByb21pc2lmaWVyKTtcbiAgICAgICAgICAgIHByb21pc2lmeUFsbCh2YWx1ZSwgc3VmZml4LCBmaWx0ZXIsIHByb21pc2lmaWVyKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIHJldHVybiBwcm9taXNpZnlBbGwodGFyZ2V0LCBzdWZmaXgsIGZpbHRlciwgcHJvbWlzaWZpZXIpO1xufTtcbn07XG5cbiIsIlwidXNlIHN0cmljdFwiO1xubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbihQcm9taXNlLCBQcm9taXNlQXJyYXksIHRyeUNvbnZlcnRUb1Byb21pc2UpIHtcbnZhciB1dGlsID0gcmVxdWlyZShcIi4vdXRpbC5qc1wiKTtcbnZhciBhcGlSZWplY3Rpb24gPSByZXF1aXJlKFwiLi9lcnJvcnNfYXBpX3JlamVjdGlvblwiKShQcm9taXNlKTtcbnZhciBpc09iamVjdCA9IHV0aWwuaXNPYmplY3Q7XG52YXIgZXM1ID0gcmVxdWlyZShcIi4vZXM1LmpzXCIpO1xuXG5mdW5jdGlvbiBQcm9wZXJ0aWVzUHJvbWlzZUFycmF5KG9iaikge1xuICAgIHZhciBrZXlzID0gZXM1LmtleXMob2JqKTtcbiAgICB2YXIgbGVuID0ga2V5cy5sZW5ndGg7XG4gICAgdmFyIHZhbHVlcyA9IG5ldyBBcnJheShsZW4gKiAyKTtcbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IGxlbjsgKytpKSB7XG4gICAgICAgIHZhciBrZXkgPSBrZXlzW2ldO1xuICAgICAgICB2YWx1ZXNbaV0gPSBvYmpba2V5XTtcbiAgICAgICAgdmFsdWVzW2kgKyBsZW5dID0ga2V5O1xuICAgIH1cbiAgICB0aGlzLmNvbnN0cnVjdG9yJCh2YWx1ZXMpO1xufVxudXRpbC5pbmhlcml0cyhQcm9wZXJ0aWVzUHJvbWlzZUFycmF5LCBQcm9taXNlQXJyYXkpO1xuXG5Qcm9wZXJ0aWVzUHJvbWlzZUFycmF5LnByb3RvdHlwZS5faW5pdCA9IGZ1bmN0aW9uICgpIHtcbiAgICB0aGlzLl9pbml0JCh1bmRlZmluZWQsIC0zKSA7XG59O1xuXG5Qcm9wZXJ0aWVzUHJvbWlzZUFycmF5LnByb3RvdHlwZS5fcHJvbWlzZUZ1bGZpbGxlZCA9IGZ1bmN0aW9uICh2YWx1ZSwgaW5kZXgpIHtcbiAgICB0aGlzLl92YWx1ZXNbaW5kZXhdID0gdmFsdWU7XG4gICAgdmFyIHRvdGFsUmVzb2x2ZWQgPSArK3RoaXMuX3RvdGFsUmVzb2x2ZWQ7XG4gICAgaWYgKHRvdGFsUmVzb2x2ZWQgPj0gdGhpcy5fbGVuZ3RoKSB7XG4gICAgICAgIHZhciB2YWwgPSB7fTtcbiAgICAgICAgdmFyIGtleU9mZnNldCA9IHRoaXMubGVuZ3RoKCk7XG4gICAgICAgIGZvciAodmFyIGkgPSAwLCBsZW4gPSB0aGlzLmxlbmd0aCgpOyBpIDwgbGVuOyArK2kpIHtcbiAgICAgICAgICAgIHZhbFt0aGlzLl92YWx1ZXNbaSArIGtleU9mZnNldF1dID0gdGhpcy5fdmFsdWVzW2ldO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuX3Jlc29sdmUodmFsKTtcbiAgICB9XG59O1xuXG5Qcm9wZXJ0aWVzUHJvbWlzZUFycmF5LnByb3RvdHlwZS5fcHJvbWlzZVByb2dyZXNzZWQgPSBmdW5jdGlvbiAodmFsdWUsIGluZGV4KSB7XG4gICAgdGhpcy5fcHJvbWlzZS5fcHJvZ3Jlc3Moe1xuICAgICAgICBrZXk6IHRoaXMuX3ZhbHVlc1tpbmRleCArIHRoaXMubGVuZ3RoKCldLFxuICAgICAgICB2YWx1ZTogdmFsdWVcbiAgICB9KTtcbn07XG5cblByb3BlcnRpZXNQcm9taXNlQXJyYXkucHJvdG90eXBlLnNob3VsZENvcHlWYWx1ZXMgPSBmdW5jdGlvbiAoKSB7XG4gICAgcmV0dXJuIGZhbHNlO1xufTtcblxuUHJvcGVydGllc1Byb21pc2VBcnJheS5wcm90b3R5cGUuZ2V0QWN0dWFsTGVuZ3RoID0gZnVuY3Rpb24gKGxlbikge1xuICAgIHJldHVybiBsZW4gPj4gMTtcbn07XG5cbmZ1bmN0aW9uIHByb3BzKHByb21pc2VzKSB7XG4gICAgdmFyIHJldDtcbiAgICB2YXIgY2FzdFZhbHVlID0gdHJ5Q29udmVydFRvUHJvbWlzZShwcm9taXNlcywgdW5kZWZpbmVkKTtcblxuICAgIGlmICghaXNPYmplY3QoY2FzdFZhbHVlKSkge1xuICAgICAgICByZXR1cm4gYXBpUmVqZWN0aW9uKFwiY2Fubm90IGF3YWl0IHByb3BlcnRpZXMgb2YgYSBub24tb2JqZWN0XFx1MDAwYVxcdTAwMGEgICAgU2VlIGh0dHA6Ly9nb28uZ2wvT3NGS0M4XFx1MDAwYVwiKTtcbiAgICB9IGVsc2UgaWYgKGNhc3RWYWx1ZSBpbnN0YW5jZW9mIFByb21pc2UpIHtcbiAgICAgICAgcmV0ID0gY2FzdFZhbHVlLl90aGVuKFxuICAgICAgICAgICAgUHJvbWlzZS5wcm9wcywgdW5kZWZpbmVkLCB1bmRlZmluZWQsIHVuZGVmaW5lZCwgdW5kZWZpbmVkKTtcbiAgICB9IGVsc2Uge1xuICAgICAgICByZXQgPSBuZXcgUHJvcGVydGllc1Byb21pc2VBcnJheShjYXN0VmFsdWUpLnByb21pc2UoKTtcbiAgICB9XG5cbiAgICBpZiAoY2FzdFZhbHVlIGluc3RhbmNlb2YgUHJvbWlzZSkge1xuICAgICAgICByZXQuX3Byb3BhZ2F0ZUZyb20oY2FzdFZhbHVlLCA0KTtcbiAgICB9XG4gICAgcmV0dXJuIHJldDtcbn1cblxuUHJvbWlzZS5wcm90b3R5cGUucHJvcHMgPSBmdW5jdGlvbiAoKSB7XG4gICAgcmV0dXJuIHByb3BzKHRoaXMpO1xufTtcblxuUHJvbWlzZS5wcm9wcyA9IGZ1bmN0aW9uIChwcm9taXNlcykge1xuICAgIHJldHVybiBwcm9wcyhwcm9taXNlcyk7XG59O1xufTtcbiIsIlwidXNlIHN0cmljdFwiO1xuZnVuY3Rpb24gYXJyYXlNb3ZlKHNyYywgc3JjSW5kZXgsIGRzdCwgZHN0SW5kZXgsIGxlbikge1xuICAgIGZvciAodmFyIGogPSAwOyBqIDwgbGVuOyArK2opIHtcbiAgICAgICAgZHN0W2ogKyBkc3RJbmRleF0gPSBzcmNbaiArIHNyY0luZGV4XTtcbiAgICAgICAgc3JjW2ogKyBzcmNJbmRleF0gPSB2b2lkIDA7XG4gICAgfVxufVxuXG5mdW5jdGlvbiBRdWV1ZShjYXBhY2l0eSkge1xuICAgIHRoaXMuX2NhcGFjaXR5ID0gY2FwYWNpdHk7XG4gICAgdGhpcy5fbGVuZ3RoID0gMDtcbiAgICB0aGlzLl9mcm9udCA9IDA7XG59XG5cblF1ZXVlLnByb3RvdHlwZS5fd2lsbEJlT3ZlckNhcGFjaXR5ID0gZnVuY3Rpb24gKHNpemUpIHtcbiAgICByZXR1cm4gdGhpcy5fY2FwYWNpdHkgPCBzaXplO1xufTtcblxuUXVldWUucHJvdG90eXBlLl9wdXNoT25lID0gZnVuY3Rpb24gKGFyZykge1xuICAgIHZhciBsZW5ndGggPSB0aGlzLmxlbmd0aCgpO1xuICAgIHRoaXMuX2NoZWNrQ2FwYWNpdHkobGVuZ3RoICsgMSk7XG4gICAgdmFyIGkgPSAodGhpcy5fZnJvbnQgKyBsZW5ndGgpICYgKHRoaXMuX2NhcGFjaXR5IC0gMSk7XG4gICAgdGhpc1tpXSA9IGFyZztcbiAgICB0aGlzLl9sZW5ndGggPSBsZW5ndGggKyAxO1xufTtcblxuUXVldWUucHJvdG90eXBlLl91bnNoaWZ0T25lID0gZnVuY3Rpb24odmFsdWUpIHtcbiAgICB2YXIgY2FwYWNpdHkgPSB0aGlzLl9jYXBhY2l0eTtcbiAgICB0aGlzLl9jaGVja0NhcGFjaXR5KHRoaXMubGVuZ3RoKCkgKyAxKTtcbiAgICB2YXIgZnJvbnQgPSB0aGlzLl9mcm9udDtcbiAgICB2YXIgaSA9ICgoKCggZnJvbnQgLSAxICkgJlxuICAgICAgICAgICAgICAgICAgICAoIGNhcGFjaXR5IC0gMSkgKSBeIGNhcGFjaXR5ICkgLSBjYXBhY2l0eSApO1xuICAgIHRoaXNbaV0gPSB2YWx1ZTtcbiAgICB0aGlzLl9mcm9udCA9IGk7XG4gICAgdGhpcy5fbGVuZ3RoID0gdGhpcy5sZW5ndGgoKSArIDE7XG59O1xuXG5RdWV1ZS5wcm90b3R5cGUudW5zaGlmdCA9IGZ1bmN0aW9uKGZuLCByZWNlaXZlciwgYXJnKSB7XG4gICAgdGhpcy5fdW5zaGlmdE9uZShhcmcpO1xuICAgIHRoaXMuX3Vuc2hpZnRPbmUocmVjZWl2ZXIpO1xuICAgIHRoaXMuX3Vuc2hpZnRPbmUoZm4pO1xufTtcblxuUXVldWUucHJvdG90eXBlLnB1c2ggPSBmdW5jdGlvbiAoZm4sIHJlY2VpdmVyLCBhcmcpIHtcbiAgICB2YXIgbGVuZ3RoID0gdGhpcy5sZW5ndGgoKSArIDM7XG4gICAgaWYgKHRoaXMuX3dpbGxCZU92ZXJDYXBhY2l0eShsZW5ndGgpKSB7XG4gICAgICAgIHRoaXMuX3B1c2hPbmUoZm4pO1xuICAgICAgICB0aGlzLl9wdXNoT25lKHJlY2VpdmVyKTtcbiAgICAgICAgdGhpcy5fcHVzaE9uZShhcmcpO1xuICAgICAgICByZXR1cm47XG4gICAgfVxuICAgIHZhciBqID0gdGhpcy5fZnJvbnQgKyBsZW5ndGggLSAzO1xuICAgIHRoaXMuX2NoZWNrQ2FwYWNpdHkobGVuZ3RoKTtcbiAgICB2YXIgd3JhcE1hc2sgPSB0aGlzLl9jYXBhY2l0eSAtIDE7XG4gICAgdGhpc1soaiArIDApICYgd3JhcE1hc2tdID0gZm47XG4gICAgdGhpc1soaiArIDEpICYgd3JhcE1hc2tdID0gcmVjZWl2ZXI7XG4gICAgdGhpc1soaiArIDIpICYgd3JhcE1hc2tdID0gYXJnO1xuICAgIHRoaXMuX2xlbmd0aCA9IGxlbmd0aDtcbn07XG5cblF1ZXVlLnByb3RvdHlwZS5zaGlmdCA9IGZ1bmN0aW9uICgpIHtcbiAgICB2YXIgZnJvbnQgPSB0aGlzLl9mcm9udCxcbiAgICAgICAgcmV0ID0gdGhpc1tmcm9udF07XG5cbiAgICB0aGlzW2Zyb250XSA9IHVuZGVmaW5lZDtcbiAgICB0aGlzLl9mcm9udCA9IChmcm9udCArIDEpICYgKHRoaXMuX2NhcGFjaXR5IC0gMSk7XG4gICAgdGhpcy5fbGVuZ3RoLS07XG4gICAgcmV0dXJuIHJldDtcbn07XG5cblF1ZXVlLnByb3RvdHlwZS5sZW5ndGggPSBmdW5jdGlvbiAoKSB7XG4gICAgcmV0dXJuIHRoaXMuX2xlbmd0aDtcbn07XG5cblF1ZXVlLnByb3RvdHlwZS5fY2hlY2tDYXBhY2l0eSA9IGZ1bmN0aW9uIChzaXplKSB7XG4gICAgaWYgKHRoaXMuX2NhcGFjaXR5IDwgc2l6ZSkge1xuICAgICAgICB0aGlzLl9yZXNpemVUbyh0aGlzLl9jYXBhY2l0eSA8PCAxKTtcbiAgICB9XG59O1xuXG5RdWV1ZS5wcm90b3R5cGUuX3Jlc2l6ZVRvID0gZnVuY3Rpb24gKGNhcGFjaXR5KSB7XG4gICAgdmFyIG9sZENhcGFjaXR5ID0gdGhpcy5fY2FwYWNpdHk7XG4gICAgdGhpcy5fY2FwYWNpdHkgPSBjYXBhY2l0eTtcbiAgICB2YXIgZnJvbnQgPSB0aGlzLl9mcm9udDtcbiAgICB2YXIgbGVuZ3RoID0gdGhpcy5fbGVuZ3RoO1xuICAgIGlmIChmcm9udCArIGxlbmd0aCA+IG9sZENhcGFjaXR5KSB7XG4gICAgICAgIHZhciBtb3ZlSXRlbXNDb3VudCA9IChmcm9udCArIGxlbmd0aCkgJiAob2xkQ2FwYWNpdHkgLSAxKTtcbiAgICAgICAgYXJyYXlNb3ZlKHRoaXMsIDAsIHRoaXMsIG9sZENhcGFjaXR5LCBtb3ZlSXRlbXNDb3VudCk7XG4gICAgfVxufTtcblxubW9kdWxlLmV4cG9ydHMgPSBRdWV1ZTtcbiIsIlwidXNlIHN0cmljdFwiO1xubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbihQcm9taXNlLCBJTlRFUk5BTCwgdHJ5Q29udmVydFRvUHJvbWlzZSkge1xudmFyIGFwaVJlamVjdGlvbiA9IHJlcXVpcmUoXCIuL2Vycm9yc19hcGlfcmVqZWN0aW9uLmpzXCIpKFByb21pc2UpO1xudmFyIGlzQXJyYXkgPSByZXF1aXJlKFwiLi91dGlsLmpzXCIpLmlzQXJyYXk7XG5cbnZhciByYWNlTGF0ZXIgPSBmdW5jdGlvbiAocHJvbWlzZSkge1xuICAgIHJldHVybiBwcm9taXNlLnRoZW4oZnVuY3Rpb24oYXJyYXkpIHtcbiAgICAgICAgcmV0dXJuIHJhY2UoYXJyYXksIHByb21pc2UpO1xuICAgIH0pO1xufTtcblxuZnVuY3Rpb24gcmFjZShwcm9taXNlcywgcGFyZW50KSB7XG4gICAgdmFyIG1heWJlUHJvbWlzZSA9IHRyeUNvbnZlcnRUb1Byb21pc2UocHJvbWlzZXMsIHVuZGVmaW5lZCk7XG5cbiAgICBpZiAobWF5YmVQcm9taXNlIGluc3RhbmNlb2YgUHJvbWlzZSkge1xuICAgICAgICByZXR1cm4gcmFjZUxhdGVyKG1heWJlUHJvbWlzZSk7XG4gICAgfSBlbHNlIGlmICghaXNBcnJheShwcm9taXNlcykpIHtcbiAgICAgICAgcmV0dXJuIGFwaVJlamVjdGlvbihcImV4cGVjdGluZyBhbiBhcnJheSwgYSBwcm9taXNlIG9yIGEgdGhlbmFibGVcXHUwMDBhXFx1MDAwYSAgICBTZWUgaHR0cDovL2dvby5nbC9zOE1NaGNcXHUwMDBhXCIpO1xuICAgIH1cblxuICAgIHZhciByZXQgPSBuZXcgUHJvbWlzZShJTlRFUk5BTCk7XG4gICAgaWYgKHBhcmVudCAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgIHJldC5fcHJvcGFnYXRlRnJvbShwYXJlbnQsIDQgfCAxKTtcbiAgICB9XG4gICAgdmFyIGZ1bGZpbGwgPSByZXQuX2Z1bGZpbGw7XG4gICAgdmFyIHJlamVjdCA9IHJldC5fcmVqZWN0O1xuICAgIGZvciAodmFyIGkgPSAwLCBsZW4gPSBwcm9taXNlcy5sZW5ndGg7IGkgPCBsZW47ICsraSkge1xuICAgICAgICB2YXIgdmFsID0gcHJvbWlzZXNbaV07XG5cbiAgICAgICAgaWYgKHZhbCA9PT0gdW5kZWZpbmVkICYmICEoaSBpbiBwcm9taXNlcykpIHtcbiAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICB9XG5cbiAgICAgICAgUHJvbWlzZS5jYXN0KHZhbCkuX3RoZW4oZnVsZmlsbCwgcmVqZWN0LCB1bmRlZmluZWQsIHJldCwgbnVsbCk7XG4gICAgfVxuICAgIHJldHVybiByZXQ7XG59XG5cblByb21pc2UucmFjZSA9IGZ1bmN0aW9uIChwcm9taXNlcykge1xuICAgIHJldHVybiByYWNlKHByb21pc2VzLCB1bmRlZmluZWQpO1xufTtcblxuUHJvbWlzZS5wcm90b3R5cGUucmFjZSA9IGZ1bmN0aW9uICgpIHtcbiAgICByZXR1cm4gcmFjZSh0aGlzLCB1bmRlZmluZWQpO1xufTtcblxufTtcbiIsIlwidXNlIHN0cmljdFwiO1xubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbihQcm9taXNlLFxuICAgICAgICAgICAgICAgICAgICAgICAgICBQcm9taXNlQXJyYXksXG4gICAgICAgICAgICAgICAgICAgICAgICAgIGFwaVJlamVjdGlvbixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgdHJ5Q29udmVydFRvUHJvbWlzZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgSU5URVJOQUwpIHtcbnZhciB1dGlsID0gcmVxdWlyZShcIi4vdXRpbC5qc1wiKTtcbnZhciB0cnlDYXRjaDQgPSB1dGlsLnRyeUNhdGNoNDtcbnZhciB0cnlDYXRjaDMgPSB1dGlsLnRyeUNhdGNoMztcbnZhciBlcnJvck9iaiA9IHV0aWwuZXJyb3JPYmo7XG5mdW5jdGlvbiBSZWR1Y3Rpb25Qcm9taXNlQXJyYXkocHJvbWlzZXMsIGZuLCBhY2N1bSwgX2VhY2gpIHtcbiAgICB0aGlzLmNvbnN0cnVjdG9yJChwcm9taXNlcyk7XG4gICAgdGhpcy5fcHJvbWlzZS5fY2FwdHVyZVN0YWNrVHJhY2UoKTtcbiAgICB0aGlzLl9wcmVzZXJ2ZWRWYWx1ZXMgPSBfZWFjaCA9PT0gSU5URVJOQUwgPyBbXSA6IG51bGw7XG4gICAgdGhpcy5femVyb3RoSXNBY2N1bSA9IChhY2N1bSA9PT0gdW5kZWZpbmVkKTtcbiAgICB0aGlzLl9nb3RBY2N1bSA9IGZhbHNlO1xuICAgIHRoaXMuX3JlZHVjaW5nSW5kZXggPSAodGhpcy5femVyb3RoSXNBY2N1bSA/IDEgOiAwKTtcbiAgICB0aGlzLl92YWx1ZXNQaGFzZSA9IHVuZGVmaW5lZDtcblxuICAgIHZhciBtYXliZVByb21pc2UgPSB0cnlDb252ZXJ0VG9Qcm9taXNlKGFjY3VtLCB1bmRlZmluZWQpO1xuICAgIHZhciByZWplY3RlZCA9IGZhbHNlO1xuICAgIHZhciBpc1Byb21pc2UgPSBtYXliZVByb21pc2UgaW5zdGFuY2VvZiBQcm9taXNlO1xuICAgIGlmIChpc1Byb21pc2UpIHtcbiAgICAgICAgbWF5YmVQcm9taXNlID0gbWF5YmVQcm9taXNlLl90YXJnZXQoKTtcbiAgICAgICAgaWYgKG1heWJlUHJvbWlzZS5faXNQZW5kaW5nKCkpIHtcbiAgICAgICAgICAgIG1heWJlUHJvbWlzZS5fcHJveHlQcm9taXNlQXJyYXkodGhpcywgLTEpO1xuICAgICAgICB9IGVsc2UgaWYgKG1heWJlUHJvbWlzZS5faXNGdWxmaWxsZWQoKSkge1xuICAgICAgICAgICAgYWNjdW0gPSBtYXliZVByb21pc2UuX3ZhbHVlKCk7XG4gICAgICAgICAgICB0aGlzLl9nb3RBY2N1bSA9IHRydWU7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBtYXliZVByb21pc2UuX3Vuc2V0UmVqZWN0aW9uSXNVbmhhbmRsZWQoKTtcbiAgICAgICAgICAgIHRoaXMuX3JlamVjdChtYXliZVByb21pc2UuX3JlYXNvbigpKTtcbiAgICAgICAgICAgIHJlamVjdGVkID0gdHJ1ZTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBpZiAoIShpc1Byb21pc2UgfHwgdGhpcy5femVyb3RoSXNBY2N1bSkpIHRoaXMuX2dvdEFjY3VtID0gdHJ1ZTtcbiAgICB0aGlzLl9jYWxsYmFjayA9IGZuO1xuICAgIHRoaXMuX2FjY3VtID0gYWNjdW07XG4gICAgaWYgKCFyZWplY3RlZCkgdGhpcy5faW5pdCQodW5kZWZpbmVkLCAtNSk7XG59XG51dGlsLmluaGVyaXRzKFJlZHVjdGlvblByb21pc2VBcnJheSwgUHJvbWlzZUFycmF5KTtcblxuUmVkdWN0aW9uUHJvbWlzZUFycmF5LnByb3RvdHlwZS5faW5pdCA9IGZ1bmN0aW9uICgpIHt9O1xuXG5SZWR1Y3Rpb25Qcm9taXNlQXJyYXkucHJvdG90eXBlLl9yZXNvbHZlRW1wdHlBcnJheSA9IGZ1bmN0aW9uICgpIHtcbiAgICBpZiAodGhpcy5fZ290QWNjdW0gfHwgdGhpcy5femVyb3RoSXNBY2N1bSkge1xuICAgICAgICB0aGlzLl9yZXNvbHZlKHRoaXMuX3ByZXNlcnZlZFZhbHVlcyAhPT0gbnVsbFxuICAgICAgICAgICAgICAgICAgICAgICAgPyBbXSA6IHRoaXMuX2FjY3VtKTtcbiAgICB9XG59O1xuXG5SZWR1Y3Rpb25Qcm9taXNlQXJyYXkucHJvdG90eXBlLl9wcm9taXNlRnVsZmlsbGVkID0gZnVuY3Rpb24gKHZhbHVlLCBpbmRleCkge1xuICAgIHZhciB2YWx1ZXMgPSB0aGlzLl92YWx1ZXM7XG4gICAgdmFsdWVzW2luZGV4XSA9IHZhbHVlO1xuICAgIHZhciBsZW5ndGggPSB0aGlzLmxlbmd0aCgpO1xuICAgIHZhciBwcmVzZXJ2ZWRWYWx1ZXMgPSB0aGlzLl9wcmVzZXJ2ZWRWYWx1ZXM7XG4gICAgdmFyIGlzRWFjaCA9IHByZXNlcnZlZFZhbHVlcyAhPT0gbnVsbDtcbiAgICB2YXIgZ290QWNjdW0gPSB0aGlzLl9nb3RBY2N1bTtcbiAgICB2YXIgdmFsdWVzUGhhc2UgPSB0aGlzLl92YWx1ZXNQaGFzZTtcbiAgICB2YXIgdmFsdWVzUGhhc2VJbmRleDtcbiAgICBpZiAoIXZhbHVlc1BoYXNlKSB7XG4gICAgICAgIHZhbHVlc1BoYXNlID0gdGhpcy5fdmFsdWVzUGhhc2UgPSBBcnJheShsZW5ndGgpO1xuICAgICAgICBmb3IgKHZhbHVlc1BoYXNlSW5kZXg9MDsgdmFsdWVzUGhhc2VJbmRleDxsZW5ndGg7ICsrdmFsdWVzUGhhc2VJbmRleCkge1xuICAgICAgICAgICAgdmFsdWVzUGhhc2VbdmFsdWVzUGhhc2VJbmRleF0gPSAwO1xuICAgICAgICB9XG4gICAgfVxuICAgIHZhbHVlc1BoYXNlSW5kZXggPSB2YWx1ZXNQaGFzZVtpbmRleF07XG5cbiAgICBpZiAoaW5kZXggPT09IDAgJiYgdGhpcy5femVyb3RoSXNBY2N1bSkge1xuICAgICAgICBpZiAoIWdvdEFjY3VtKSB7XG4gICAgICAgICAgICB0aGlzLl9hY2N1bSA9IHZhbHVlO1xuICAgICAgICAgICAgdGhpcy5fZ290QWNjdW0gPSBnb3RBY2N1bSA9IHRydWU7XG4gICAgICAgIH1cbiAgICAgICAgdmFsdWVzUGhhc2VbaW5kZXhdID0gKCh2YWx1ZXNQaGFzZUluZGV4ID09PSAwKVxuICAgICAgICAgICAgPyAxIDogMik7XG4gICAgfSBlbHNlIGlmIChpbmRleCA9PT0gLTEpIHtcbiAgICAgICAgaWYgKCFnb3RBY2N1bSkge1xuICAgICAgICAgICAgdGhpcy5fYWNjdW0gPSB2YWx1ZTtcbiAgICAgICAgICAgIHRoaXMuX2dvdEFjY3VtID0gZ290QWNjdW0gPSB0cnVlO1xuICAgICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgICAgaWYgKHZhbHVlc1BoYXNlSW5kZXggPT09IDApIHtcbiAgICAgICAgICAgIHZhbHVlc1BoYXNlW2luZGV4XSA9IDE7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICB2YWx1ZXNQaGFzZVtpbmRleF0gPSAyO1xuICAgICAgICAgICAgaWYgKGdvdEFjY3VtKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5fYWNjdW0gPSB2YWx1ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbiAgICBpZiAoIWdvdEFjY3VtKSByZXR1cm47XG5cbiAgICB2YXIgY2FsbGJhY2sgPSB0aGlzLl9jYWxsYmFjaztcbiAgICB2YXIgcmVjZWl2ZXIgPSB0aGlzLl9wcm9taXNlLl9ib3VuZFRvO1xuICAgIHZhciByZXQ7XG5cbiAgICBmb3IgKHZhciBpID0gdGhpcy5fcmVkdWNpbmdJbmRleDsgaSA8IGxlbmd0aDsgKytpKSB7XG4gICAgICAgIHZhbHVlc1BoYXNlSW5kZXggPSB2YWx1ZXNQaGFzZVtpXTtcbiAgICAgICAgaWYgKHZhbHVlc1BoYXNlSW5kZXggPT09IDIpIHtcbiAgICAgICAgICAgIHRoaXMuX3JlZHVjaW5nSW5kZXggPSBpICsgMTtcbiAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICB9XG4gICAgICAgIGlmICh2YWx1ZXNQaGFzZUluZGV4ICE9PSAxKSByZXR1cm47XG4gICAgICAgIHZhbHVlID0gdmFsdWVzW2ldO1xuICAgICAgICBpZiAodmFsdWUgaW5zdGFuY2VvZiBQcm9taXNlKSB7XG4gICAgICAgICAgICB2YWx1ZSA9IHZhbHVlLl90YXJnZXQoKTtcbiAgICAgICAgICAgIGlmICh2YWx1ZS5faXNGdWxmaWxsZWQoKSkge1xuICAgICAgICAgICAgICAgIHZhbHVlID0gdmFsdWUuX3ZhbHVlKCk7XG4gICAgICAgICAgICB9IGVsc2UgaWYgKHZhbHVlLl9pc1BlbmRpbmcoKSkge1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgdmFsdWUuX3Vuc2V0UmVqZWN0aW9uSXNVbmhhbmRsZWQoKTtcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5fcmVqZWN0KHZhbHVlLl9yZWFzb24oKSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICB0aGlzLl9wcm9taXNlLl9wdXNoQ29udGV4dCgpO1xuICAgICAgICBpZiAoaXNFYWNoKSB7XG4gICAgICAgICAgICBwcmVzZXJ2ZWRWYWx1ZXMucHVzaCh2YWx1ZSk7XG4gICAgICAgICAgICByZXQgPSB0cnlDYXRjaDMoY2FsbGJhY2ssIHJlY2VpdmVyLCB2YWx1ZSwgaSwgbGVuZ3RoKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHJldCA9IHRyeUNhdGNoNChjYWxsYmFjaywgcmVjZWl2ZXIsIHRoaXMuX2FjY3VtLCB2YWx1ZSwgaSwgbGVuZ3RoKTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLl9wcm9taXNlLl9wb3BDb250ZXh0KCk7XG5cbiAgICAgICAgaWYgKHJldCA9PT0gZXJyb3JPYmopIHJldHVybiB0aGlzLl9yZWplY3QocmV0LmUpO1xuXG4gICAgICAgIHZhciBtYXliZVByb21pc2UgPSB0cnlDb252ZXJ0VG9Qcm9taXNlKHJldCwgdGhpcy5fcHJvbWlzZSk7XG4gICAgICAgIGlmIChtYXliZVByb21pc2UgaW5zdGFuY2VvZiBQcm9taXNlKSB7XG4gICAgICAgICAgICBtYXliZVByb21pc2UgPSBtYXliZVByb21pc2UuX3RhcmdldCgpO1xuICAgICAgICAgICAgaWYgKG1heWJlUHJvbWlzZS5faXNQZW5kaW5nKCkpIHtcbiAgICAgICAgICAgICAgICB2YWx1ZXNQaGFzZVtpXSA9IDQ7XG4gICAgICAgICAgICAgICAgcmV0dXJuIG1heWJlUHJvbWlzZS5fcHJveHlQcm9taXNlQXJyYXkodGhpcywgaSk7XG4gICAgICAgICAgICB9IGVsc2UgaWYgKG1heWJlUHJvbWlzZS5faXNGdWxmaWxsZWQoKSkge1xuICAgICAgICAgICAgICAgIHJldCA9IG1heWJlUHJvbWlzZS5fdmFsdWUoKTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgbWF5YmVQcm9taXNlLl91bnNldFJlamVjdGlvbklzVW5oYW5kbGVkKCk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuX3JlamVjdChtYXliZVByb21pc2UuX3JlYXNvbigpKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIHRoaXMuX3JlZHVjaW5nSW5kZXggPSBpICsgMTtcbiAgICAgICAgdGhpcy5fYWNjdW0gPSByZXQ7XG4gICAgfVxuXG4gICAgaWYgKHRoaXMuX3JlZHVjaW5nSW5kZXggPCBsZW5ndGgpIHJldHVybjtcbiAgICB0aGlzLl9yZXNvbHZlKGlzRWFjaCA/IHByZXNlcnZlZFZhbHVlcyA6IHRoaXMuX2FjY3VtKTtcbn07XG5cbmZ1bmN0aW9uIHJlZHVjZShwcm9taXNlcywgZm4sIGluaXRpYWxWYWx1ZSwgX2VhY2gpIHtcbiAgICBpZiAodHlwZW9mIGZuICE9PSBcImZ1bmN0aW9uXCIpIHJldHVybiBhcGlSZWplY3Rpb24oXCJmbiBtdXN0IGJlIGEgZnVuY3Rpb25cXHUwMDBhXFx1MDAwYSAgICBTZWUgaHR0cDovL2dvby5nbC85MTZsSkpcXHUwMDBhXCIpO1xuICAgIHZhciBhcnJheSA9IG5ldyBSZWR1Y3Rpb25Qcm9taXNlQXJyYXkocHJvbWlzZXMsIGZuLCBpbml0aWFsVmFsdWUsIF9lYWNoKTtcbiAgICByZXR1cm4gYXJyYXkucHJvbWlzZSgpO1xufVxuXG5Qcm9taXNlLnByb3RvdHlwZS5yZWR1Y2UgPSBmdW5jdGlvbiAoZm4sIGluaXRpYWxWYWx1ZSkge1xuICAgIHJldHVybiByZWR1Y2UodGhpcywgZm4sIGluaXRpYWxWYWx1ZSwgbnVsbCk7XG59O1xuXG5Qcm9taXNlLnJlZHVjZSA9IGZ1bmN0aW9uIChwcm9taXNlcywgZm4sIGluaXRpYWxWYWx1ZSwgX2VhY2gpIHtcbiAgICByZXR1cm4gcmVkdWNlKHByb21pc2VzLCBmbiwgaW5pdGlhbFZhbHVlLCBfZWFjaCk7XG59O1xufTtcbiIsIihmdW5jdGlvbiAocHJvY2Vzcyl7XG5cInVzZSBzdHJpY3RcIjtcbnZhciBzY2hlZHVsZTtcbmlmICh0eXBlb2YgcHJvY2VzcyA9PT0gXCJvYmplY3RcIiAmJiB0eXBlb2YgcHJvY2Vzcy52ZXJzaW9uID09PSBcInN0cmluZ1wiKSB7XG4gICAgc2NoZWR1bGUgPSBwYXJzZUludChwcm9jZXNzLnZlcnNpb24uc3BsaXQoXCIuXCIpWzFdLCAxMCkgPiAxMFxuICAgICAgICA/IHNldEltbWVkaWF0ZSA6IHByb2Nlc3MubmV4dFRpY2s7XG59XG5lbHNlIGlmICh0eXBlb2YgTXV0YXRpb25PYnNlcnZlciAhPT0gXCJ1bmRlZmluZWRcIikge1xuICAgIHNjaGVkdWxlID0gZnVuY3Rpb24oZm4pIHtcbiAgICAgICAgdmFyIGRpdiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XG4gICAgICAgIHZhciBvYnNlcnZlciA9IG5ldyBNdXRhdGlvbk9ic2VydmVyKGZuKTtcbiAgICAgICAgb2JzZXJ2ZXIub2JzZXJ2ZShkaXYsIHthdHRyaWJ1dGVzOiB0cnVlfSk7XG4gICAgICAgIHJldHVybiBmdW5jdGlvbigpIHsgZGl2LmNsYXNzTGlzdC50b2dnbGUoXCJmb29cIik7IH07XG4gICAgfTtcbiAgICBzY2hlZHVsZS5pc1N0YXRpYyA9IHRydWU7XG59XG5lbHNlIGlmICh0eXBlb2Ygc2V0VGltZW91dCAhPT0gXCJ1bmRlZmluZWRcIikge1xuICAgIHNjaGVkdWxlID0gZnVuY3Rpb24gKGZuKSB7XG4gICAgICAgIHNldFRpbWVvdXQoZm4sIDApO1xuICAgIH07XG59XG5lbHNlIHtcbiAgICBzY2hlZHVsZSA9IGZ1bmN0aW9uKCkge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJObyBhc3luYyBzY2hlZHVsZXIgYXZhaWxhYmxlXFx1MDAwYVxcdTAwMGEgICAgU2VlIGh0dHA6Ly9nb28uZ2wvbTNPVFhrXFx1MDAwYVwiKTtcbiAgICB9O1xufVxubW9kdWxlLmV4cG9ydHMgPSBzY2hlZHVsZTtcblxufSkuY2FsbCh0aGlzLHJlcXVpcmUoJ19wcm9jZXNzJykpIiwiXCJ1c2Ugc3RyaWN0XCI7XG5tb2R1bGUuZXhwb3J0cyA9XG4gICAgZnVuY3Rpb24oUHJvbWlzZSwgUHJvbWlzZUFycmF5KSB7XG52YXIgUHJvbWlzZUluc3BlY3Rpb24gPSBQcm9taXNlLlByb21pc2VJbnNwZWN0aW9uO1xudmFyIHV0aWwgPSByZXF1aXJlKFwiLi91dGlsLmpzXCIpO1xuXG5mdW5jdGlvbiBTZXR0bGVkUHJvbWlzZUFycmF5KHZhbHVlcykge1xuICAgIHRoaXMuY29uc3RydWN0b3IkKHZhbHVlcyk7XG4gICAgdGhpcy5fcHJvbWlzZS5fc2V0SXNTcHJlYWRhYmxlKCk7XG59XG51dGlsLmluaGVyaXRzKFNldHRsZWRQcm9taXNlQXJyYXksIFByb21pc2VBcnJheSk7XG5cblNldHRsZWRQcm9taXNlQXJyYXkucHJvdG90eXBlLl9wcm9taXNlUmVzb2x2ZWQgPSBmdW5jdGlvbiAoaW5kZXgsIGluc3BlY3Rpb24pIHtcbiAgICB0aGlzLl92YWx1ZXNbaW5kZXhdID0gaW5zcGVjdGlvbjtcbiAgICB2YXIgdG90YWxSZXNvbHZlZCA9ICsrdGhpcy5fdG90YWxSZXNvbHZlZDtcbiAgICBpZiAodG90YWxSZXNvbHZlZCA+PSB0aGlzLl9sZW5ndGgpIHtcbiAgICAgICAgdGhpcy5fcmVzb2x2ZSh0aGlzLl92YWx1ZXMpO1xuICAgIH1cbn07XG5cblNldHRsZWRQcm9taXNlQXJyYXkucHJvdG90eXBlLl9wcm9taXNlRnVsZmlsbGVkID0gZnVuY3Rpb24gKHZhbHVlLCBpbmRleCkge1xuICAgIHZhciByZXQgPSBuZXcgUHJvbWlzZUluc3BlY3Rpb24oKTtcbiAgICByZXQuX2JpdEZpZWxkID0gMjY4NDM1NDU2O1xuICAgIHJldC5fc2V0dGxlZFZhbHVlID0gdmFsdWU7XG4gICAgdGhpcy5fcHJvbWlzZVJlc29sdmVkKGluZGV4LCByZXQpO1xufTtcblNldHRsZWRQcm9taXNlQXJyYXkucHJvdG90eXBlLl9wcm9taXNlUmVqZWN0ZWQgPSBmdW5jdGlvbiAocmVhc29uLCBpbmRleCkge1xuICAgIHZhciByZXQgPSBuZXcgUHJvbWlzZUluc3BlY3Rpb24oKTtcbiAgICByZXQuX2JpdEZpZWxkID0gMTM0MjE3NzI4O1xuICAgIHJldC5fc2V0dGxlZFZhbHVlID0gcmVhc29uO1xuICAgIHRoaXMuX3Byb21pc2VSZXNvbHZlZChpbmRleCwgcmV0KTtcbn07XG5cblByb21pc2Uuc2V0dGxlID0gZnVuY3Rpb24gKHByb21pc2VzKSB7XG4gICAgcmV0dXJuIG5ldyBTZXR0bGVkUHJvbWlzZUFycmF5KHByb21pc2VzKS5wcm9taXNlKCk7XG59O1xuXG5Qcm9taXNlLnByb3RvdHlwZS5zZXR0bGUgPSBmdW5jdGlvbiAoKSB7XG4gICAgcmV0dXJuIG5ldyBTZXR0bGVkUHJvbWlzZUFycmF5KHRoaXMpLnByb21pc2UoKTtcbn07XG59O1xuIiwiXCJ1c2Ugc3RyaWN0XCI7XG5tb2R1bGUuZXhwb3J0cyA9XG5mdW5jdGlvbihQcm9taXNlLCBQcm9taXNlQXJyYXksIGFwaVJlamVjdGlvbikge1xudmFyIHV0aWwgPSByZXF1aXJlKFwiLi91dGlsLmpzXCIpO1xudmFyIFJhbmdlRXJyb3IgPSByZXF1aXJlKFwiLi9lcnJvcnMuanNcIikuUmFuZ2VFcnJvcjtcbnZhciBBZ2dyZWdhdGVFcnJvciA9IHJlcXVpcmUoXCIuL2Vycm9ycy5qc1wiKS5BZ2dyZWdhdGVFcnJvcjtcbnZhciBpc0FycmF5ID0gdXRpbC5pc0FycmF5O1xuXG5cbmZ1bmN0aW9uIFNvbWVQcm9taXNlQXJyYXkodmFsdWVzKSB7XG4gICAgdGhpcy5jb25zdHJ1Y3RvciQodmFsdWVzKTtcbiAgICB0aGlzLl9ob3dNYW55ID0gMDtcbiAgICB0aGlzLl91bndyYXAgPSBmYWxzZTtcbiAgICB0aGlzLl9pbml0aWFsaXplZCA9IGZhbHNlO1xufVxudXRpbC5pbmhlcml0cyhTb21lUHJvbWlzZUFycmF5LCBQcm9taXNlQXJyYXkpO1xuXG5Tb21lUHJvbWlzZUFycmF5LnByb3RvdHlwZS5faW5pdCA9IGZ1bmN0aW9uICgpIHtcbiAgICBpZiAoIXRoaXMuX2luaXRpYWxpemVkKSB7XG4gICAgICAgIHJldHVybjtcbiAgICB9XG4gICAgdGhpcy5fcHJvbWlzZS5fc2V0SXNTcHJlYWRhYmxlKCk7XG4gICAgaWYgKHRoaXMuX2hvd01hbnkgPT09IDApIHtcbiAgICAgICAgdGhpcy5fcmVzb2x2ZShbXSk7XG4gICAgICAgIHJldHVybjtcbiAgICB9XG4gICAgdGhpcy5faW5pdCQodW5kZWZpbmVkLCAtNSk7XG4gICAgdmFyIGlzQXJyYXlSZXNvbHZlZCA9IGlzQXJyYXkodGhpcy5fdmFsdWVzKTtcbiAgICBpZiAoIXRoaXMuX2lzUmVzb2x2ZWQoKSAmJlxuICAgICAgICBpc0FycmF5UmVzb2x2ZWQgJiZcbiAgICAgICAgdGhpcy5faG93TWFueSA+IHRoaXMuX2NhblBvc3NpYmx5RnVsZmlsbCgpKSB7XG4gICAgICAgIHRoaXMuX3JlamVjdCh0aGlzLl9nZXRSYW5nZUVycm9yKHRoaXMubGVuZ3RoKCkpKTtcbiAgICB9XG59O1xuXG5Tb21lUHJvbWlzZUFycmF5LnByb3RvdHlwZS5pbml0ID0gZnVuY3Rpb24gKCkge1xuICAgIHRoaXMuX2luaXRpYWxpemVkID0gdHJ1ZTtcbiAgICB0aGlzLl9pbml0KCk7XG59O1xuXG5Tb21lUHJvbWlzZUFycmF5LnByb3RvdHlwZS5zZXRVbndyYXAgPSBmdW5jdGlvbiAoKSB7XG4gICAgdGhpcy5fdW53cmFwID0gdHJ1ZTtcbn07XG5cblNvbWVQcm9taXNlQXJyYXkucHJvdG90eXBlLmhvd01hbnkgPSBmdW5jdGlvbiAoKSB7XG4gICAgcmV0dXJuIHRoaXMuX2hvd01hbnk7XG59O1xuXG5Tb21lUHJvbWlzZUFycmF5LnByb3RvdHlwZS5zZXRIb3dNYW55ID0gZnVuY3Rpb24gKGNvdW50KSB7XG4gICAgaWYgKHRoaXMuX2lzUmVzb2x2ZWQoKSkgcmV0dXJuO1xuICAgIHRoaXMuX2hvd01hbnkgPSBjb3VudDtcbn07XG5cblNvbWVQcm9taXNlQXJyYXkucHJvdG90eXBlLl9wcm9taXNlRnVsZmlsbGVkID0gZnVuY3Rpb24gKHZhbHVlKSB7XG4gICAgdGhpcy5fYWRkRnVsZmlsbGVkKHZhbHVlKTtcbiAgICBpZiAodGhpcy5fZnVsZmlsbGVkKCkgPT09IHRoaXMuaG93TWFueSgpKSB7XG4gICAgICAgIHRoaXMuX3ZhbHVlcy5sZW5ndGggPSB0aGlzLmhvd01hbnkoKTtcbiAgICAgICAgaWYgKHRoaXMuaG93TWFueSgpID09PSAxICYmIHRoaXMuX3Vud3JhcCkge1xuICAgICAgICAgICAgdGhpcy5fcmVzb2x2ZSh0aGlzLl92YWx1ZXNbMF0pO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgdGhpcy5fcmVzb2x2ZSh0aGlzLl92YWx1ZXMpO1xuICAgICAgICB9XG4gICAgfVxuXG59O1xuU29tZVByb21pc2VBcnJheS5wcm90b3R5cGUuX3Byb21pc2VSZWplY3RlZCA9IGZ1bmN0aW9uIChyZWFzb24pIHtcbiAgICB0aGlzLl9hZGRSZWplY3RlZChyZWFzb24pO1xuICAgIGlmICh0aGlzLmhvd01hbnkoKSA+IHRoaXMuX2NhblBvc3NpYmx5RnVsZmlsbCgpKSB7XG4gICAgICAgIHZhciBlID0gbmV3IEFnZ3JlZ2F0ZUVycm9yKCk7XG4gICAgICAgIGZvciAodmFyIGkgPSB0aGlzLmxlbmd0aCgpOyBpIDwgdGhpcy5fdmFsdWVzLmxlbmd0aDsgKytpKSB7XG4gICAgICAgICAgICBlLnB1c2godGhpcy5fdmFsdWVzW2ldKTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLl9yZWplY3QoZSk7XG4gICAgfVxufTtcblxuU29tZVByb21pc2VBcnJheS5wcm90b3R5cGUuX2Z1bGZpbGxlZCA9IGZ1bmN0aW9uICgpIHtcbiAgICByZXR1cm4gdGhpcy5fdG90YWxSZXNvbHZlZDtcbn07XG5cblNvbWVQcm9taXNlQXJyYXkucHJvdG90eXBlLl9yZWplY3RlZCA9IGZ1bmN0aW9uICgpIHtcbiAgICByZXR1cm4gdGhpcy5fdmFsdWVzLmxlbmd0aCAtIHRoaXMubGVuZ3RoKCk7XG59O1xuXG5Tb21lUHJvbWlzZUFycmF5LnByb3RvdHlwZS5fYWRkUmVqZWN0ZWQgPSBmdW5jdGlvbiAocmVhc29uKSB7XG4gICAgdGhpcy5fdmFsdWVzLnB1c2gocmVhc29uKTtcbn07XG5cblNvbWVQcm9taXNlQXJyYXkucHJvdG90eXBlLl9hZGRGdWxmaWxsZWQgPSBmdW5jdGlvbiAodmFsdWUpIHtcbiAgICB0aGlzLl92YWx1ZXNbdGhpcy5fdG90YWxSZXNvbHZlZCsrXSA9IHZhbHVlO1xufTtcblxuU29tZVByb21pc2VBcnJheS5wcm90b3R5cGUuX2NhblBvc3NpYmx5RnVsZmlsbCA9IGZ1bmN0aW9uICgpIHtcbiAgICByZXR1cm4gdGhpcy5sZW5ndGgoKSAtIHRoaXMuX3JlamVjdGVkKCk7XG59O1xuXG5Tb21lUHJvbWlzZUFycmF5LnByb3RvdHlwZS5fZ2V0UmFuZ2VFcnJvciA9IGZ1bmN0aW9uIChjb3VudCkge1xuICAgIHZhciBtZXNzYWdlID0gXCJJbnB1dCBhcnJheSBtdXN0IGNvbnRhaW4gYXQgbGVhc3QgXCIgK1xuICAgICAgICAgICAgdGhpcy5faG93TWFueSArIFwiIGl0ZW1zIGJ1dCBjb250YWlucyBvbmx5IFwiICsgY291bnQgKyBcIiBpdGVtc1wiO1xuICAgIHJldHVybiBuZXcgUmFuZ2VFcnJvcihtZXNzYWdlKTtcbn07XG5cblNvbWVQcm9taXNlQXJyYXkucHJvdG90eXBlLl9yZXNvbHZlRW1wdHlBcnJheSA9IGZ1bmN0aW9uICgpIHtcbiAgICB0aGlzLl9yZWplY3QodGhpcy5fZ2V0UmFuZ2VFcnJvcigwKSk7XG59O1xuXG5mdW5jdGlvbiBzb21lKHByb21pc2VzLCBob3dNYW55KSB7XG4gICAgaWYgKChob3dNYW55IHwgMCkgIT09IGhvd01hbnkgfHwgaG93TWFueSA8IDApIHtcbiAgICAgICAgcmV0dXJuIGFwaVJlamVjdGlvbihcImV4cGVjdGluZyBhIHBvc2l0aXZlIGludGVnZXJcXHUwMDBhXFx1MDAwYSAgICBTZWUgaHR0cDovL2dvby5nbC8xd0FtSHhcXHUwMDBhXCIpO1xuICAgIH1cbiAgICB2YXIgcmV0ID0gbmV3IFNvbWVQcm9taXNlQXJyYXkocHJvbWlzZXMpO1xuICAgIHZhciBwcm9taXNlID0gcmV0LnByb21pc2UoKTtcbiAgICBpZiAocHJvbWlzZS5pc1JlamVjdGVkKCkpIHtcbiAgICAgICAgcmV0dXJuIHByb21pc2U7XG4gICAgfVxuICAgIHJldC5zZXRIb3dNYW55KGhvd01hbnkpO1xuICAgIHJldC5pbml0KCk7XG4gICAgcmV0dXJuIHByb21pc2U7XG59XG5cblByb21pc2Uuc29tZSA9IGZ1bmN0aW9uIChwcm9taXNlcywgaG93TWFueSkge1xuICAgIHJldHVybiBzb21lKHByb21pc2VzLCBob3dNYW55KTtcbn07XG5cblByb21pc2UucHJvdG90eXBlLnNvbWUgPSBmdW5jdGlvbiAoaG93TWFueSkge1xuICAgIHJldHVybiBzb21lKHRoaXMsIGhvd01hbnkpO1xufTtcblxuUHJvbWlzZS5fU29tZVByb21pc2VBcnJheSA9IFNvbWVQcm9taXNlQXJyYXk7XG59O1xuIiwiXCJ1c2Ugc3RyaWN0XCI7XG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uKFByb21pc2UpIHtcbmZ1bmN0aW9uIFByb21pc2VJbnNwZWN0aW9uKHByb21pc2UpIHtcbiAgICBpZiAocHJvbWlzZSAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgIHByb21pc2UgPSBwcm9taXNlLl90YXJnZXQoKTtcbiAgICAgICAgdGhpcy5fYml0RmllbGQgPSBwcm9taXNlLl9iaXRGaWVsZDtcbiAgICAgICAgdGhpcy5fc2V0dGxlZFZhbHVlID0gcHJvbWlzZS5faXNSZXNvbHZlZCgpXG4gICAgICAgICAgICA/IHByb21pc2UuX3NldHRsZWRWYWx1ZVxuICAgICAgICAgICAgOiB1bmRlZmluZWQ7XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgICB0aGlzLl9iaXRGaWVsZCA9IDA7XG4gICAgICAgIHRoaXMuX3NldHRsZWRWYWx1ZSA9IHVuZGVmaW5lZDtcbiAgICB9XG59XG5cblByb21pc2VJbnNwZWN0aW9uLnByb3RvdHlwZS52YWx1ZSA9IGZ1bmN0aW9uICgpIHtcbiAgICBpZiAoIXRoaXMuaXNGdWxmaWxsZWQoKSkge1xuICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKFwiY2Fubm90IGdldCBmdWxmaWxsbWVudCB2YWx1ZSBvZiBhIG5vbi1mdWxmaWxsZWQgcHJvbWlzZVxcdTAwMGFcXHUwMDBhICAgIFNlZSBodHRwOi8vZ29vLmdsL2hjMURMalxcdTAwMGFcIik7XG4gICAgfVxuICAgIHJldHVybiB0aGlzLl9zZXR0bGVkVmFsdWU7XG59O1xuXG5Qcm9taXNlSW5zcGVjdGlvbi5wcm90b3R5cGUuZXJyb3IgPVxuUHJvbWlzZUluc3BlY3Rpb24ucHJvdG90eXBlLnJlYXNvbiA9IGZ1bmN0aW9uICgpIHtcbiAgICBpZiAoIXRoaXMuaXNSZWplY3RlZCgpKSB7XG4gICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoXCJjYW5ub3QgZ2V0IHJlamVjdGlvbiByZWFzb24gb2YgYSBub24tcmVqZWN0ZWQgcHJvbWlzZVxcdTAwMGFcXHUwMDBhICAgIFNlZSBodHRwOi8vZ29vLmdsL2hQdWl3QlxcdTAwMGFcIik7XG4gICAgfVxuICAgIHJldHVybiB0aGlzLl9zZXR0bGVkVmFsdWU7XG59O1xuXG5Qcm9taXNlSW5zcGVjdGlvbi5wcm90b3R5cGUuaXNGdWxmaWxsZWQgPVxuUHJvbWlzZS5wcm90b3R5cGUuX2lzRnVsZmlsbGVkID0gZnVuY3Rpb24gKCkge1xuICAgIHJldHVybiAodGhpcy5fYml0RmllbGQgJiAyNjg0MzU0NTYpID4gMDtcbn07XG5cblByb21pc2VJbnNwZWN0aW9uLnByb3RvdHlwZS5pc1JlamVjdGVkID1cblByb21pc2UucHJvdG90eXBlLl9pc1JlamVjdGVkID0gZnVuY3Rpb24gKCkge1xuICAgIHJldHVybiAodGhpcy5fYml0RmllbGQgJiAxMzQyMTc3MjgpID4gMDtcbn07XG5cblByb21pc2VJbnNwZWN0aW9uLnByb3RvdHlwZS5pc1BlbmRpbmcgPVxuUHJvbWlzZS5wcm90b3R5cGUuX2lzUGVuZGluZyA9IGZ1bmN0aW9uICgpIHtcbiAgICByZXR1cm4gKHRoaXMuX2JpdEZpZWxkICYgNDAyNjUzMTg0KSA9PT0gMDtcbn07XG5cblByb21pc2VJbnNwZWN0aW9uLnByb3RvdHlwZS5pc1Jlc29sdmVkID1cblByb21pc2UucHJvdG90eXBlLl9pc1Jlc29sdmVkID0gZnVuY3Rpb24gKCkge1xuICAgIHJldHVybiAodGhpcy5fYml0RmllbGQgJiA0MDI2NTMxODQpID4gMDtcbn07XG5cblByb21pc2UucHJvdG90eXBlLmlzUGVuZGluZyA9IGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiB0aGlzLl90YXJnZXQoKS5faXNQZW5kaW5nKCk7XG59O1xuXG5Qcm9taXNlLnByb3RvdHlwZS5pc1JlamVjdGVkID0gZnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuIHRoaXMuX3RhcmdldCgpLl9pc1JlamVjdGVkKCk7XG59O1xuXG5Qcm9taXNlLnByb3RvdHlwZS5pc0Z1bGZpbGxlZCA9IGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiB0aGlzLl90YXJnZXQoKS5faXNGdWxmaWxsZWQoKTtcbn07XG5cblByb21pc2UucHJvdG90eXBlLmlzUmVzb2x2ZWQgPSBmdW5jdGlvbigpIHtcbiAgICByZXR1cm4gdGhpcy5fdGFyZ2V0KCkuX2lzUmVzb2x2ZWQoKTtcbn07XG5cblByb21pc2UucHJvdG90eXBlLl92YWx1ZSA9IGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiB0aGlzLl9zZXR0bGVkVmFsdWU7XG59O1xuXG5Qcm9taXNlLnByb3RvdHlwZS5fcmVhc29uID0gZnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuIHRoaXMuX3NldHRsZWRWYWx1ZTtcbn07XG5cblByb21pc2UucHJvdG90eXBlLnZhbHVlID0gZnVuY3Rpb24oKSB7XG4gICAgdmFyIHRhcmdldCA9IHRoaXMuX3RhcmdldCgpO1xuICAgIGlmICghdGFyZ2V0LmlzRnVsZmlsbGVkKCkpIHtcbiAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcihcImNhbm5vdCBnZXQgZnVsZmlsbG1lbnQgdmFsdWUgb2YgYSBub24tZnVsZmlsbGVkIHByb21pc2VcXHUwMDBhXFx1MDAwYSAgICBTZWUgaHR0cDovL2dvby5nbC9oYzFETGpcXHUwMDBhXCIpO1xuICAgIH1cbiAgICByZXR1cm4gdGFyZ2V0Ll9zZXR0bGVkVmFsdWU7XG59O1xuXG5Qcm9taXNlLnByb3RvdHlwZS5yZWFzb24gPSBmdW5jdGlvbigpIHtcbiAgICB2YXIgdGFyZ2V0ID0gdGhpcy5fdGFyZ2V0KCk7XG4gICAgaWYgKCF0YXJnZXQuaXNSZWplY3RlZCgpKSB7XG4gICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoXCJjYW5ub3QgZ2V0IHJlamVjdGlvbiByZWFzb24gb2YgYSBub24tcmVqZWN0ZWQgcHJvbWlzZVxcdTAwMGFcXHUwMDBhICAgIFNlZSBodHRwOi8vZ29vLmdsL2hQdWl3QlxcdTAwMGFcIik7XG4gICAgfVxuICAgIHJldHVybiB0YXJnZXQuX3NldHRsZWRWYWx1ZTtcbn07XG5cblxuUHJvbWlzZS5Qcm9taXNlSW5zcGVjdGlvbiA9IFByb21pc2VJbnNwZWN0aW9uO1xufTtcbiIsIlwidXNlIHN0cmljdFwiO1xubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbihQcm9taXNlLCBJTlRFUk5BTCkge1xudmFyIHV0aWwgPSByZXF1aXJlKFwiLi91dGlsLmpzXCIpO1xudmFyIGNhbkF0dGFjaFRyYWNlID0gcmVxdWlyZShcIi4vZXJyb3JzLmpzXCIpLmNhbkF0dGFjaFRyYWNlO1xudmFyIGVycm9yT2JqID0gdXRpbC5lcnJvck9iajtcbnZhciBpc09iamVjdCA9IHV0aWwuaXNPYmplY3Q7XG5cbmZ1bmN0aW9uIGdldFRoZW4ob2JqKSB7XG4gICAgdHJ5IHtcbiAgICAgICAgcmV0dXJuIG9iai50aGVuO1xuICAgIH1cbiAgICBjYXRjaChlKSB7XG4gICAgICAgIGVycm9yT2JqLmUgPSBlO1xuICAgICAgICByZXR1cm4gZXJyb3JPYmo7XG4gICAgfVxufVxuXG5mdW5jdGlvbiB0cnlDb252ZXJ0VG9Qcm9taXNlKG9iaiwgdHJhY2VQYXJlbnQpIHtcbiAgICBpZiAoaXNPYmplY3Qob2JqKSkge1xuICAgICAgICBpZiAob2JqIGluc3RhbmNlb2YgUHJvbWlzZSkge1xuICAgICAgICAgICAgcmV0dXJuIG9iajtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmIChpc0FueUJsdWViaXJkUHJvbWlzZShvYmopKSB7XG4gICAgICAgICAgICB2YXIgcmV0ID0gbmV3IFByb21pc2UoSU5URVJOQUwpO1xuICAgICAgICAgICAgb2JqLl90aGVuKFxuICAgICAgICAgICAgICAgIHJldC5fZnVsZmlsbFVuY2hlY2tlZCxcbiAgICAgICAgICAgICAgICByZXQuX3JlamVjdFVuY2hlY2tlZENoZWNrRXJyb3IsXG4gICAgICAgICAgICAgICAgcmV0Ll9wcm9ncmVzc1VuY2hlY2tlZCxcbiAgICAgICAgICAgICAgICByZXQsXG4gICAgICAgICAgICAgICAgbnVsbFxuICAgICAgICAgICAgKTtcbiAgICAgICAgICAgIHJldHVybiByZXQ7XG4gICAgICAgIH1cbiAgICAgICAgdmFyIHRoZW4gPSBnZXRUaGVuKG9iaik7XG4gICAgICAgIGlmICh0aGVuID09PSBlcnJvck9iaikge1xuICAgICAgICAgICAgaWYgKHRyYWNlUGFyZW50ICE9PSB1bmRlZmluZWQgJiYgY2FuQXR0YWNoVHJhY2UodGhlbi5lKSkge1xuICAgICAgICAgICAgICAgIHRyYWNlUGFyZW50Ll9hdHRhY2hFeHRyYVRyYWNlKHRoZW4uZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gUHJvbWlzZS5yZWplY3QodGhlbi5lKTtcbiAgICAgICAgfSBlbHNlIGlmICh0eXBlb2YgdGhlbiA9PT0gXCJmdW5jdGlvblwiKSB7XG4gICAgICAgICAgICByZXR1cm4gZG9UaGVuYWJsZShvYmosIHRoZW4sIHRyYWNlUGFyZW50KTtcbiAgICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gb2JqO1xufVxuXG52YXIgaGFzUHJvcCA9IHt9Lmhhc093blByb3BlcnR5O1xuZnVuY3Rpb24gaXNBbnlCbHVlYmlyZFByb21pc2Uob2JqKSB7XG4gICAgcmV0dXJuIGhhc1Byb3AuY2FsbChvYmosIFwiX3Byb21pc2UwXCIpO1xufVxuXG5mdW5jdGlvbiBkb1RoZW5hYmxlKHgsIHRoZW4sIHRyYWNlUGFyZW50KSB7XG4gICAgdmFyIHJlc29sdmVyID0gUHJvbWlzZS5kZWZlcigpO1xuICAgIHZhciBjYWxsZWQgPSBmYWxzZTtcbiAgICB0cnkge1xuICAgICAgICB0aGVuLmNhbGwoXG4gICAgICAgICAgICB4LFxuICAgICAgICAgICAgcmVzb2x2ZUZyb21UaGVuYWJsZSxcbiAgICAgICAgICAgIHJlamVjdEZyb21UaGVuYWJsZSxcbiAgICAgICAgICAgIHByb2dyZXNzRnJvbVRoZW5hYmxlXG4gICAgICAgICk7XG4gICAgfSBjYXRjaChlKSB7XG4gICAgICAgIGlmICghY2FsbGVkKSB7XG4gICAgICAgICAgICBjYWxsZWQgPSB0cnVlO1xuICAgICAgICAgICAgdmFyIHRyYWNlID0gY2FuQXR0YWNoVHJhY2UoZSkgPyBlIDogbmV3IEVycm9yKHV0aWwudG9TdHJpbmcoZSkpO1xuICAgICAgICAgICAgaWYgKHRyYWNlUGFyZW50ICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICB0cmFjZVBhcmVudC5fYXR0YWNoRXh0cmFUcmFjZSh0cmFjZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXNvbHZlci5wcm9taXNlLl9yZWplY3QoZSwgdHJhY2UpO1xuICAgICAgICB9XG4gICAgfVxuICAgIHJldHVybiByZXNvbHZlci5wcm9taXNlO1xuXG4gICAgZnVuY3Rpb24gcmVzb2x2ZUZyb21UaGVuYWJsZSh5KSB7XG4gICAgICAgIGlmIChjYWxsZWQpIHJldHVybjtcbiAgICAgICAgY2FsbGVkID0gdHJ1ZTtcblxuICAgICAgICBpZiAoeCA9PT0geSkge1xuICAgICAgICAgICAgdmFyIGUgPSBQcm9taXNlLl9tYWtlU2VsZlJlc29sdXRpb25FcnJvcigpO1xuICAgICAgICAgICAgaWYgKHRyYWNlUGFyZW50ICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICB0cmFjZVBhcmVudC5fYXR0YWNoRXh0cmFUcmFjZShlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJlc29sdmVyLnByb21pc2UuX3JlamVjdChlLCB1bmRlZmluZWQpO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIHJlc29sdmVyLnJlc29sdmUoeSk7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gcmVqZWN0RnJvbVRoZW5hYmxlKHIpIHtcbiAgICAgICAgaWYgKGNhbGxlZCkgcmV0dXJuO1xuICAgICAgICBjYWxsZWQgPSB0cnVlO1xuICAgICAgICB2YXIgdHJhY2UgPSBjYW5BdHRhY2hUcmFjZShyKSA/IHIgOiBuZXcgRXJyb3IodXRpbC50b1N0cmluZyhyKSk7XG4gICAgICAgIGlmICh0cmFjZVBhcmVudCAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICB0cmFjZVBhcmVudC5fYXR0YWNoRXh0cmFUcmFjZSh0cmFjZSk7XG4gICAgICAgIH1cbiAgICAgICAgcmVzb2x2ZXIucHJvbWlzZS5fcmVqZWN0KHIsIHRyYWNlKTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBwcm9ncmVzc0Zyb21UaGVuYWJsZSh2KSB7XG4gICAgICAgIGlmIChjYWxsZWQpIHJldHVybjtcbiAgICAgICAgdmFyIHByb21pc2UgPSByZXNvbHZlci5wcm9taXNlO1xuICAgICAgICBpZiAodHlwZW9mIHByb21pc2UuX3Byb2dyZXNzID09PSBcImZ1bmN0aW9uXCIpIHtcbiAgICAgICAgICAgIHByb21pc2UuX3Byb2dyZXNzKHYpO1xuICAgICAgICB9XG4gICAgfVxufVxuXG5yZXR1cm4gdHJ5Q29udmVydFRvUHJvbWlzZTtcbn07XG4iLCJcInVzZSBzdHJpY3RcIjtcbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24oUHJvbWlzZSwgSU5URVJOQUwsIHRyeUNvbnZlcnRUb1Byb21pc2UpIHtcbnZhciBlcnJvcnMgPSByZXF1aXJlKFwiLi9lcnJvcnMuanNcIik7XG52YXIgVGltZW91dEVycm9yID0gUHJvbWlzZS5UaW1lb3V0RXJyb3I7XG5cbnZhciBhZnRlclRpbWVvdXQgPSBmdW5jdGlvbiAocHJvbWlzZSwgbWVzc2FnZSkge1xuICAgIGlmICghcHJvbWlzZS5pc1BlbmRpbmcoKSkgcmV0dXJuO1xuICAgIGlmICh0eXBlb2YgbWVzc2FnZSAhPT0gXCJzdHJpbmdcIikge1xuICAgICAgICBtZXNzYWdlID0gXCJvcGVyYXRpb24gdGltZWQgb3V0XCI7XG4gICAgfVxuICAgIHZhciBlcnIgPSBuZXcgVGltZW91dEVycm9yKG1lc3NhZ2UpO1xuICAgIGVycm9ycy5tYXJrQXNPcmlnaW5hdGluZ0Zyb21SZWplY3Rpb24oZXJyKTtcbiAgICBwcm9taXNlLl9hdHRhY2hFeHRyYVRyYWNlKGVycik7XG4gICAgcHJvbWlzZS5fY2FuY2VsKGVycik7XG59O1xuXG52YXIgYWZ0ZXJEZWxheSA9IGZ1bmN0aW9uICh2YWx1ZSwgcHJvbWlzZSkge1xuICAgIHByb21pc2UuX2Z1bGZpbGwodmFsdWUpO1xufTtcblxudmFyIGRlbGF5ID0gUHJvbWlzZS5kZWxheSA9IGZ1bmN0aW9uICh2YWx1ZSwgbXMpIHtcbiAgICBpZiAobXMgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICBtcyA9IHZhbHVlO1xuICAgICAgICB2YWx1ZSA9IHVuZGVmaW5lZDtcbiAgICB9XG4gICAgbXMgPSArbXM7XG4gICAgdmFyIG1heWJlUHJvbWlzZSA9IHRyeUNvbnZlcnRUb1Byb21pc2UodmFsdWUsIHVuZGVmaW5lZCk7XG4gICAgdmFyIHByb21pc2UgPSBuZXcgUHJvbWlzZShJTlRFUk5BTCk7XG5cbiAgICBpZiAobWF5YmVQcm9taXNlIGluc3RhbmNlb2YgUHJvbWlzZSkge1xuICAgICAgICBwcm9taXNlLl9wcm9wYWdhdGVGcm9tKG1heWJlUHJvbWlzZSwgNCB8IDEpO1xuICAgICAgICBwcm9taXNlLl9mb2xsb3cobWF5YmVQcm9taXNlLl90YXJnZXQoKSk7XG4gICAgICAgIHJldHVybiBwcm9taXNlLnRoZW4oZnVuY3Rpb24odmFsdWUpIHtcbiAgICAgICAgICAgIHJldHVybiBQcm9taXNlLmRlbGF5KHZhbHVlLCBtcyk7XG4gICAgICAgIH0pO1xuICAgIH0gZWxzZSB7XG4gICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24gZGVsYXlUaW1lb3V0KCkge1xuICAgICAgICAgICAgYWZ0ZXJEZWxheSh2YWx1ZSwgcHJvbWlzZSk7XG4gICAgICAgIH0sIG1zKTtcbiAgICB9XG4gICAgcmV0dXJuIHByb21pc2U7XG59O1xuXG5Qcm9taXNlLnByb3RvdHlwZS5kZWxheSA9IGZ1bmN0aW9uIChtcykge1xuICAgIHJldHVybiBkZWxheSh0aGlzLCBtcyk7XG59O1xuXG5mdW5jdGlvbiBzdWNjZXNzQ2xlYXIodmFsdWUpIHtcbiAgICB2YXIgaGFuZGxlID0gdGhpcztcbiAgICBpZiAoaGFuZGxlIGluc3RhbmNlb2YgTnVtYmVyKSBoYW5kbGUgPSAraGFuZGxlO1xuICAgIGNsZWFyVGltZW91dChoYW5kbGUpO1xuICAgIHJldHVybiB2YWx1ZTtcbn1cblxuZnVuY3Rpb24gZmFpbHVyZUNsZWFyKHJlYXNvbikge1xuICAgIHZhciBoYW5kbGUgPSB0aGlzO1xuICAgIGlmIChoYW5kbGUgaW5zdGFuY2VvZiBOdW1iZXIpIGhhbmRsZSA9ICtoYW5kbGU7XG4gICAgY2xlYXJUaW1lb3V0KGhhbmRsZSk7XG4gICAgdGhyb3cgcmVhc29uO1xufVxuXG5Qcm9taXNlLnByb3RvdHlwZS50aW1lb3V0ID0gZnVuY3Rpb24gKG1zLCBtZXNzYWdlKSB7XG4gICAgdmFyIHRhcmdldCA9IHRoaXMuX3RhcmdldCgpO1xuICAgIG1zID0gK21zO1xuICAgIHZhciByZXQgPSBuZXcgUHJvbWlzZShJTlRFUk5BTCkuY2FuY2VsbGFibGUoKTtcbiAgICByZXQuX3Byb3BhZ2F0ZUZyb20odGhpcywgNCB8IDEpO1xuICAgIHJldC5fZm9sbG93KHRhcmdldCk7XG4gICAgdmFyIGhhbmRsZSA9IHNldFRpbWVvdXQoZnVuY3Rpb24gdGltZW91dFRpbWVvdXQoKSB7XG4gICAgICAgIGFmdGVyVGltZW91dChyZXQsIG1lc3NhZ2UpO1xuICAgIH0sIG1zKTtcbiAgICByZXR1cm4gcmV0Ll90aGVuKHN1Y2Nlc3NDbGVhciwgZmFpbHVyZUNsZWFyLCB1bmRlZmluZWQsIGhhbmRsZSwgdW5kZWZpbmVkKTtcbn07XG5cbn07XG4iLCJcInVzZSBzdHJpY3RcIjtcbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gKFByb21pc2UsIGFwaVJlamVjdGlvbiwgdHJ5Q29udmVydFRvUHJvbWlzZSxcbiAgICBjcmVhdGVDb250ZXh0KSB7XG4gICAgdmFyIFR5cGVFcnJvciA9IHJlcXVpcmUoXCIuL2Vycm9ycy5qc1wiKS5UeXBlRXJyb3I7XG4gICAgdmFyIGluaGVyaXRzID0gcmVxdWlyZShcIi4vdXRpbC5qc1wiKS5pbmhlcml0cztcbiAgICB2YXIgUHJvbWlzZUluc3BlY3Rpb24gPSBQcm9taXNlLlByb21pc2VJbnNwZWN0aW9uO1xuXG4gICAgZnVuY3Rpb24gaW5zcGVjdGlvbk1hcHBlcihpbnNwZWN0aW9ucykge1xuICAgICAgICB2YXIgbGVuID0gaW5zcGVjdGlvbnMubGVuZ3RoO1xuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGxlbjsgKytpKSB7XG4gICAgICAgICAgICB2YXIgaW5zcGVjdGlvbiA9IGluc3BlY3Rpb25zW2ldO1xuICAgICAgICAgICAgaWYgKGluc3BlY3Rpb24uaXNSZWplY3RlZCgpKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIFByb21pc2UucmVqZWN0KGluc3BlY3Rpb24uZXJyb3IoKSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpbnNwZWN0aW9uc1tpXSA9IGluc3BlY3Rpb24uX3NldHRsZWRWYWx1ZTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gaW5zcGVjdGlvbnM7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gdGhyb3dlcihlKSB7XG4gICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24oKXt0aHJvdyBlO30sIDApO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIGNhc3RQcmVzZXJ2aW5nRGlzcG9zYWJsZSh0aGVuYWJsZSkge1xuICAgICAgICB2YXIgbWF5YmVQcm9taXNlID0gdHJ5Q29udmVydFRvUHJvbWlzZSh0aGVuYWJsZSwgdW5kZWZpbmVkKTtcbiAgICAgICAgaWYgKG1heWJlUHJvbWlzZSAhPT0gdGhlbmFibGUgJiZcbiAgICAgICAgICAgIHR5cGVvZiB0aGVuYWJsZS5faXNEaXNwb3NhYmxlID09PSBcImZ1bmN0aW9uXCIgJiZcbiAgICAgICAgICAgIHR5cGVvZiB0aGVuYWJsZS5fZ2V0RGlzcG9zZXIgPT09IFwiZnVuY3Rpb25cIiAmJlxuICAgICAgICAgICAgdGhlbmFibGUuX2lzRGlzcG9zYWJsZSgpKSB7XG4gICAgICAgICAgICBtYXliZVByb21pc2UuX3NldERpc3Bvc2FibGUodGhlbmFibGUuX2dldERpc3Bvc2VyKCkpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBtYXliZVByb21pc2U7XG4gICAgfVxuICAgIGZ1bmN0aW9uIGRpc3Bvc2UocmVzb3VyY2VzLCBpbnNwZWN0aW9uKSB7XG4gICAgICAgIHZhciBpID0gMDtcbiAgICAgICAgdmFyIGxlbiA9IHJlc291cmNlcy5sZW5ndGg7XG4gICAgICAgIHZhciByZXQgPSBQcm9taXNlLmRlZmVyKCk7XG4gICAgICAgIGZ1bmN0aW9uIGl0ZXJhdG9yKCkge1xuICAgICAgICAgICAgaWYgKGkgPj0gbGVuKSByZXR1cm4gcmV0LnJlc29sdmUoKTtcbiAgICAgICAgICAgIHZhciBtYXliZVByb21pc2UgPSBjYXN0UHJlc2VydmluZ0Rpc3Bvc2FibGUocmVzb3VyY2VzW2krK10pO1xuICAgICAgICAgICAgaWYgKG1heWJlUHJvbWlzZSBpbnN0YW5jZW9mIFByb21pc2UgJiZcbiAgICAgICAgICAgICAgICBtYXliZVByb21pc2UuX2lzRGlzcG9zYWJsZSgpKSB7XG4gICAgICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICAgICAgbWF5YmVQcm9taXNlID0gdHJ5Q29udmVydFRvUHJvbWlzZShcbiAgICAgICAgICAgICAgICAgICAgICAgIG1heWJlUHJvbWlzZS5fZ2V0RGlzcG9zZXIoKS50cnlEaXNwb3NlKGluc3BlY3Rpb24pLFxuICAgICAgICAgICAgICAgICAgICAgICAgdW5kZWZpbmVkKTtcbiAgICAgICAgICAgICAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB0aHJvd2VyKGUpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAobWF5YmVQcm9taXNlIGluc3RhbmNlb2YgUHJvbWlzZSkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gbWF5YmVQcm9taXNlLl90aGVuKGl0ZXJhdG9yLCB0aHJvd2VyLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG51bGwsIG51bGwsIG51bGwpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGl0ZXJhdG9yKCk7XG4gICAgICAgIH1cbiAgICAgICAgaXRlcmF0b3IoKTtcbiAgICAgICAgcmV0dXJuIHJldC5wcm9taXNlO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIGRpc3Bvc2VyU3VjY2Vzcyh2YWx1ZSkge1xuICAgICAgICB2YXIgaW5zcGVjdGlvbiA9IG5ldyBQcm9taXNlSW5zcGVjdGlvbigpO1xuICAgICAgICBpbnNwZWN0aW9uLl9zZXR0bGVkVmFsdWUgPSB2YWx1ZTtcbiAgICAgICAgaW5zcGVjdGlvbi5fYml0RmllbGQgPSAyNjg0MzU0NTY7XG4gICAgICAgIHJldHVybiBkaXNwb3NlKHRoaXMsIGluc3BlY3Rpb24pLnRoZW5SZXR1cm4odmFsdWUpO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIGRpc3Bvc2VyRmFpbChyZWFzb24pIHtcbiAgICAgICAgdmFyIGluc3BlY3Rpb24gPSBuZXcgUHJvbWlzZUluc3BlY3Rpb24oKTtcbiAgICAgICAgaW5zcGVjdGlvbi5fc2V0dGxlZFZhbHVlID0gcmVhc29uO1xuICAgICAgICBpbnNwZWN0aW9uLl9iaXRGaWVsZCA9IDEzNDIxNzcyODtcbiAgICAgICAgcmV0dXJuIGRpc3Bvc2UodGhpcywgaW5zcGVjdGlvbikudGhlblRocm93KHJlYXNvbik7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gRGlzcG9zZXIoZGF0YSwgcHJvbWlzZSwgY29udGV4dCkge1xuICAgICAgICB0aGlzLl9kYXRhID0gZGF0YTtcbiAgICAgICAgdGhpcy5fcHJvbWlzZSA9IHByb21pc2U7XG4gICAgICAgIHRoaXMuX2NvbnRleHQgPSBjb250ZXh0O1xuICAgIH1cblxuICAgIERpc3Bvc2VyLnByb3RvdHlwZS5kYXRhID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5fZGF0YTtcbiAgICB9O1xuXG4gICAgRGlzcG9zZXIucHJvdG90eXBlLnByb21pc2UgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9wcm9taXNlO1xuICAgIH07XG5cbiAgICBEaXNwb3Nlci5wcm90b3R5cGUucmVzb3VyY2UgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIGlmICh0aGlzLnByb21pc2UoKS5pc0Z1bGZpbGxlZCgpKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5wcm9taXNlKCkudmFsdWUoKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gbnVsbDtcbiAgICB9O1xuXG4gICAgRGlzcG9zZXIucHJvdG90eXBlLnRyeURpc3Bvc2UgPSBmdW5jdGlvbihpbnNwZWN0aW9uKSB7XG4gICAgICAgIHZhciByZXNvdXJjZSA9IHRoaXMucmVzb3VyY2UoKTtcbiAgICAgICAgdmFyIGNvbnRleHQgPSB0aGlzLl9jb250ZXh0O1xuICAgICAgICBpZiAoY29udGV4dCAhPT0gdW5kZWZpbmVkKSBjb250ZXh0Ll9wdXNoQ29udGV4dCgpO1xuICAgICAgICB2YXIgcmV0ID0gcmVzb3VyY2UgIT09IG51bGxcbiAgICAgICAgICAgID8gdGhpcy5kb0Rpc3Bvc2UocmVzb3VyY2UsIGluc3BlY3Rpb24pIDogbnVsbDtcbiAgICAgICAgaWYgKGNvbnRleHQgIT09IHVuZGVmaW5lZCkgY29udGV4dC5fcG9wQ29udGV4dCgpO1xuICAgICAgICB0aGlzLl9wcm9taXNlLl91bnNldERpc3Bvc2FibGUoKTtcbiAgICAgICAgdGhpcy5fZGF0YSA9IG51bGw7XG4gICAgICAgIHJldHVybiByZXQ7XG4gICAgfTtcblxuICAgIERpc3Bvc2VyLmlzRGlzcG9zZXIgPSBmdW5jdGlvbiAoZCkge1xuICAgICAgICByZXR1cm4gKGQgIT0gbnVsbCAmJlxuICAgICAgICAgICAgICAgIHR5cGVvZiBkLnJlc291cmNlID09PSBcImZ1bmN0aW9uXCIgJiZcbiAgICAgICAgICAgICAgICB0eXBlb2YgZC50cnlEaXNwb3NlID09PSBcImZ1bmN0aW9uXCIpO1xuICAgIH07XG5cbiAgICBmdW5jdGlvbiBGdW5jdGlvbkRpc3Bvc2VyKGZuLCBwcm9taXNlKSB7XG4gICAgICAgIHRoaXMuY29uc3RydWN0b3IkKGZuLCBwcm9taXNlKTtcbiAgICB9XG4gICAgaW5oZXJpdHMoRnVuY3Rpb25EaXNwb3NlciwgRGlzcG9zZXIpO1xuXG4gICAgRnVuY3Rpb25EaXNwb3Nlci5wcm90b3R5cGUuZG9EaXNwb3NlID0gZnVuY3Rpb24gKHJlc291cmNlLCBpbnNwZWN0aW9uKSB7XG4gICAgICAgIHZhciBmbiA9IHRoaXMuZGF0YSgpO1xuICAgICAgICByZXR1cm4gZm4uY2FsbChyZXNvdXJjZSwgcmVzb3VyY2UsIGluc3BlY3Rpb24pO1xuICAgIH07XG5cbiAgICBmdW5jdGlvbiBtYXliZVVud3JhcERpc3Bvc2VyKHZhbHVlKSB7XG4gICAgICAgIGlmIChEaXNwb3Nlci5pc0Rpc3Bvc2VyKHZhbHVlKSkge1xuICAgICAgICAgICAgdGhpcy5yZXNvdXJjZXNbdGhpcy5pbmRleF0uX3NldERpc3Bvc2FibGUodmFsdWUpO1xuICAgICAgICAgICAgcmV0dXJuIHZhbHVlLnByb21pc2UoKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdmFsdWU7XG4gICAgfVxuXG4gICAgUHJvbWlzZS51c2luZyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIGxlbiA9IGFyZ3VtZW50cy5sZW5ndGg7XG4gICAgICAgIGlmIChsZW4gPCAyKSByZXR1cm4gYXBpUmVqZWN0aW9uKFxuICAgICAgICAgICAgICAgICAgICAgICAgXCJ5b3UgbXVzdCBwYXNzIGF0IGxlYXN0IDIgYXJndW1lbnRzIHRvIFByb21pc2UudXNpbmdcIik7XG4gICAgICAgIHZhciBmbiA9IGFyZ3VtZW50c1tsZW4gLSAxXTtcbiAgICAgICAgaWYgKHR5cGVvZiBmbiAhPT0gXCJmdW5jdGlvblwiKSByZXR1cm4gYXBpUmVqZWN0aW9uKFwiZm4gbXVzdCBiZSBhIGZ1bmN0aW9uXFx1MDAwYVxcdTAwMGEgICAgU2VlIGh0dHA6Ly9nb28uZ2wvOTE2bEpKXFx1MDAwYVwiKTtcbiAgICAgICAgbGVuLS07XG4gICAgICAgIHZhciByZXNvdXJjZXMgPSBuZXcgQXJyYXkobGVuKTtcbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBsZW47ICsraSkge1xuICAgICAgICAgICAgdmFyIHJlc291cmNlID0gYXJndW1lbnRzW2ldO1xuICAgICAgICAgICAgaWYgKERpc3Bvc2VyLmlzRGlzcG9zZXIocmVzb3VyY2UpKSB7XG4gICAgICAgICAgICAgICAgdmFyIGRpc3Bvc2VyID0gcmVzb3VyY2U7XG4gICAgICAgICAgICAgICAgcmVzb3VyY2UgPSByZXNvdXJjZS5wcm9taXNlKCk7XG4gICAgICAgICAgICAgICAgcmVzb3VyY2UuX3NldERpc3Bvc2FibGUoZGlzcG9zZXIpO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICB2YXIgbWF5YmVQcm9taXNlID0gdHJ5Q29udmVydFRvUHJvbWlzZShyZXNvdXJjZSwgdW5kZWZpbmVkKTtcbiAgICAgICAgICAgICAgICBpZiAobWF5YmVQcm9taXNlIGluc3RhbmNlb2YgUHJvbWlzZSkge1xuICAgICAgICAgICAgICAgICAgICByZXNvdXJjZSA9XG4gICAgICAgICAgICAgICAgICAgICAgICBtYXliZVByb21pc2UuX3RoZW4obWF5YmVVbndyYXBEaXNwb3NlciwgbnVsbCwgbnVsbCwge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlc291cmNlczogcmVzb3VyY2VzLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGluZGV4OiBpXG4gICAgICAgICAgICAgICAgICAgIH0sIHVuZGVmaW5lZCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmVzb3VyY2VzW2ldID0gcmVzb3VyY2U7XG4gICAgICAgIH1cblxuICAgICAgICB2YXIgcHJvbWlzZSA9IFByb21pc2Uuc2V0dGxlKHJlc291cmNlcylcbiAgICAgICAgICAgIC50aGVuKGluc3BlY3Rpb25NYXBwZXIpXG4gICAgICAgICAgICAudGhlbihmdW5jdGlvbih2YWxzKSB7XG4gICAgICAgICAgICAgICAgcHJvbWlzZS5fcHVzaENvbnRleHQoKTtcbiAgICAgICAgICAgICAgICB2YXIgcmV0O1xuICAgICAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgICAgIHJldCA9IGZuLmFwcGx5KHVuZGVmaW5lZCwgdmFscyk7XG4gICAgICAgICAgICAgICAgfSBmaW5hbGx5IHtcbiAgICAgICAgICAgICAgICAgICAgcHJvbWlzZS5fcG9wQ29udGV4dCgpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICByZXR1cm4gcmV0O1xuICAgICAgICAgICAgfSlcbiAgICAgICAgICAgIC5fdGhlbihcbiAgICAgICAgICAgICAgICBkaXNwb3NlclN1Y2Nlc3MsIGRpc3Bvc2VyRmFpbCwgdW5kZWZpbmVkLCByZXNvdXJjZXMsIHVuZGVmaW5lZCk7XG4gICAgICAgIHJldHVybiBwcm9taXNlO1xuICAgIH07XG5cbiAgICBQcm9taXNlLnByb3RvdHlwZS5fc2V0RGlzcG9zYWJsZSA9IGZ1bmN0aW9uIChkaXNwb3Nlcikge1xuICAgICAgICB0aGlzLl9iaXRGaWVsZCA9IHRoaXMuX2JpdEZpZWxkIHwgMjYyMTQ0O1xuICAgICAgICB0aGlzLl9kaXNwb3NlciA9IGRpc3Bvc2VyO1xuICAgIH07XG5cbiAgICBQcm9taXNlLnByb3RvdHlwZS5faXNEaXNwb3NhYmxlID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gKHRoaXMuX2JpdEZpZWxkICYgMjYyMTQ0KSA+IDA7XG4gICAgfTtcblxuICAgIFByb21pc2UucHJvdG90eXBlLl9nZXREaXNwb3NlciA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2Rpc3Bvc2VyO1xuICAgIH07XG5cbiAgICBQcm9taXNlLnByb3RvdHlwZS5fdW5zZXREaXNwb3NhYmxlID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB0aGlzLl9iaXRGaWVsZCA9IHRoaXMuX2JpdEZpZWxkICYgKH4yNjIxNDQpO1xuICAgICAgICB0aGlzLl9kaXNwb3NlciA9IHVuZGVmaW5lZDtcbiAgICB9O1xuXG4gICAgUHJvbWlzZS5wcm90b3R5cGUuZGlzcG9zZXIgPSBmdW5jdGlvbiAoZm4pIHtcbiAgICAgICAgaWYgKHR5cGVvZiBmbiA9PT0gXCJmdW5jdGlvblwiKSB7XG4gICAgICAgICAgICByZXR1cm4gbmV3IEZ1bmN0aW9uRGlzcG9zZXIoZm4sIHRoaXMsIGNyZWF0ZUNvbnRleHQoKSk7XG4gICAgICAgIH1cbiAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcigpO1xuICAgIH07XG5cbn07XG4iLCJcInVzZSBzdHJpY3RcIjtcbnZhciBlczUgPSByZXF1aXJlKFwiLi9lczUuanNcIik7XG52YXIgaGF2ZUdldHRlcnMgPSAoZnVuY3Rpb24oKXtcbiAgICB0cnkge1xuICAgICAgICB2YXIgbyA9IHt9O1xuICAgICAgICBlczUuZGVmaW5lUHJvcGVydHkobywgXCJmXCIsIHtcbiAgICAgICAgICAgIGdldDogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgIHJldHVybiAzO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgICAgcmV0dXJuIG8uZiA9PT0gMztcbiAgICB9XG4gICAgY2F0Y2ggKGUpIHtcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cblxufSkoKTtcbnZhciBjYW5FdmFsdWF0ZSA9IHR5cGVvZiBuYXZpZ2F0b3IgPT0gXCJ1bmRlZmluZWRcIjtcbnZhciBlcnJvck9iaiA9IHtlOiB7fX07XG5mdW5jdGlvbiB0cnlDYXRjaDAoZm4sIHJlY2VpdmVyKSB7XG4gICAgdHJ5IHsgcmV0dXJuIGZuLmNhbGwocmVjZWl2ZXIpOyB9XG4gICAgY2F0Y2ggKGUpIHtcbiAgICAgICAgZXJyb3JPYmouZSA9IGU7XG4gICAgICAgIHJldHVybiBlcnJvck9iajtcbiAgICB9XG59XG5cbmZ1bmN0aW9uIHRyeUNhdGNoMShmbiwgcmVjZWl2ZXIsIGFyZykge1xuICAgIHRyeSB7IHJldHVybiBmbi5jYWxsKHJlY2VpdmVyLCBhcmcpOyB9XG4gICAgY2F0Y2ggKGUpIHtcbiAgICAgICAgZXJyb3JPYmouZSA9IGU7XG4gICAgICAgIHJldHVybiBlcnJvck9iajtcbiAgICB9XG59XG5cbmZ1bmN0aW9uIHRyeUNhdGNoMihmbiwgcmVjZWl2ZXIsIGFyZywgYXJnMikge1xuICAgIHRyeSB7IHJldHVybiBmbi5jYWxsKHJlY2VpdmVyLCBhcmcsIGFyZzIpOyB9XG4gICAgY2F0Y2ggKGUpIHtcbiAgICAgICAgZXJyb3JPYmouZSA9IGU7XG4gICAgICAgIHJldHVybiBlcnJvck9iajtcbiAgICB9XG59XG5cbmZ1bmN0aW9uIHRyeUNhdGNoMyhmbiwgcmVjZWl2ZXIsIGFyZywgYXJnMiwgYXJnMykge1xuICAgIHRyeSB7IHJldHVybiBmbi5jYWxsKHJlY2VpdmVyLCBhcmcsIGFyZzIsIGFyZzMpOyB9XG4gICAgY2F0Y2ggKGUpIHtcbiAgICAgICAgZXJyb3JPYmouZSA9IGU7XG4gICAgICAgIHJldHVybiBlcnJvck9iajtcbiAgICB9XG59XG5cbmZ1bmN0aW9uIHRyeUNhdGNoNChmbiwgcmVjZWl2ZXIsIGFyZywgYXJnMiwgYXJnMywgYXJnNCkge1xuICAgIHRyeSB7IHJldHVybiBmbi5jYWxsKHJlY2VpdmVyLCBhcmcsIGFyZzIsIGFyZzMsIGFyZzQpOyB9XG4gICAgY2F0Y2ggKGUpIHtcbiAgICAgICAgZXJyb3JPYmouZSA9IGU7XG4gICAgICAgIHJldHVybiBlcnJvck9iajtcbiAgICB9XG59XG5cbmZ1bmN0aW9uIHRyeUNhdGNoQXBwbHkoZm4sIGFyZ3MsIHJlY2VpdmVyKSB7XG4gICAgdHJ5IHsgcmV0dXJuIGZuLmFwcGx5KHJlY2VpdmVyLCBhcmdzKTsgfVxuICAgIGNhdGNoIChlKSB7XG4gICAgICAgIGVycm9yT2JqLmUgPSBlO1xuICAgICAgICByZXR1cm4gZXJyb3JPYmo7XG4gICAgfVxufVxuXG52YXIgaW5oZXJpdHMgPSBmdW5jdGlvbihDaGlsZCwgUGFyZW50KSB7XG4gICAgdmFyIGhhc1Byb3AgPSB7fS5oYXNPd25Qcm9wZXJ0eTtcblxuICAgIGZ1bmN0aW9uIFQoKSB7XG4gICAgICAgIHRoaXMuY29uc3RydWN0b3IgPSBDaGlsZDtcbiAgICAgICAgdGhpcy5jb25zdHJ1Y3RvciQgPSBQYXJlbnQ7XG4gICAgICAgIGZvciAodmFyIHByb3BlcnR5TmFtZSBpbiBQYXJlbnQucHJvdG90eXBlKSB7XG4gICAgICAgICAgICBpZiAoaGFzUHJvcC5jYWxsKFBhcmVudC5wcm90b3R5cGUsIHByb3BlcnR5TmFtZSkgJiZcbiAgICAgICAgICAgICAgICBwcm9wZXJ0eU5hbWUuY2hhckF0KHByb3BlcnR5TmFtZS5sZW5ndGgtMSkgIT09IFwiJFwiXG4gICAgICAgICAgICkge1xuICAgICAgICAgICAgICAgIHRoaXNbcHJvcGVydHlOYW1lICsgXCIkXCJdID0gUGFyZW50LnByb3RvdHlwZVtwcm9wZXJ0eU5hbWVdO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuICAgIFQucHJvdG90eXBlID0gUGFyZW50LnByb3RvdHlwZTtcbiAgICBDaGlsZC5wcm90b3R5cGUgPSBuZXcgVCgpO1xuICAgIHJldHVybiBDaGlsZC5wcm90b3R5cGU7XG59O1xuXG5mdW5jdGlvbiBhc1N0cmluZyh2YWwpIHtcbiAgICByZXR1cm4gdHlwZW9mIHZhbCA9PT0gXCJzdHJpbmdcIiA/IHZhbCA6IChcIlwiICsgdmFsKTtcbn1cblxuZnVuY3Rpb24gaXNQcmltaXRpdmUodmFsKSB7XG4gICAgcmV0dXJuIHZhbCA9PSBudWxsIHx8IHZhbCA9PT0gdHJ1ZSB8fCB2YWwgPT09IGZhbHNlIHx8XG4gICAgICAgIHR5cGVvZiB2YWwgPT09IFwic3RyaW5nXCIgfHwgdHlwZW9mIHZhbCA9PT0gXCJudW1iZXJcIjtcblxufVxuXG5mdW5jdGlvbiBpc09iamVjdCh2YWx1ZSkge1xuICAgIHJldHVybiAhaXNQcmltaXRpdmUodmFsdWUpO1xufVxuXG5mdW5jdGlvbiBtYXliZVdyYXBBc0Vycm9yKG1heWJlRXJyb3IpIHtcbiAgICBpZiAoIWlzUHJpbWl0aXZlKG1heWJlRXJyb3IpKSByZXR1cm4gbWF5YmVFcnJvcjtcblxuICAgIHJldHVybiBuZXcgRXJyb3IoYXNTdHJpbmcobWF5YmVFcnJvcikpO1xufVxuXG5mdW5jdGlvbiB3aXRoQXBwZW5kZWQodGFyZ2V0LCBhcHBlbmRlZSkge1xuICAgIHZhciBsZW4gPSB0YXJnZXQubGVuZ3RoO1xuICAgIHZhciByZXQgPSBuZXcgQXJyYXkobGVuICsgMSk7XG4gICAgdmFyIGk7XG4gICAgZm9yIChpID0gMDsgaSA8IGxlbjsgKytpKSB7XG4gICAgICAgIHJldFtpXSA9IHRhcmdldFtpXTtcbiAgICB9XG4gICAgcmV0W2ldID0gYXBwZW5kZWU7XG4gICAgcmV0dXJuIHJldDtcbn1cblxuZnVuY3Rpb24gZ2V0RGF0YVByb3BlcnR5T3JEZWZhdWx0KG9iaiwga2V5LCBkZWZhdWx0VmFsdWUpIHtcbiAgICBpZiAoZXM1LmlzRVM1KSB7XG4gICAgICAgIHZhciBkZXNjID0gT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcihvYmosIGtleSk7XG4gICAgICAgIGlmIChkZXNjICE9IG51bGwpIHtcbiAgICAgICAgICAgIHJldHVybiBkZXNjLmdldCA9PSBudWxsICYmIGRlc2Muc2V0ID09IG51bGxcbiAgICAgICAgICAgICAgICAgICAgPyBkZXNjLnZhbHVlXG4gICAgICAgICAgICAgICAgICAgIDogZGVmYXVsdFZhbHVlO1xuICAgICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgICAgcmV0dXJuIHt9Lmhhc093blByb3BlcnR5LmNhbGwob2JqLCBrZXkpID8gb2JqW2tleV0gOiB1bmRlZmluZWQ7XG4gICAgfVxufVxuXG5mdW5jdGlvbiBub3RFbnVtZXJhYmxlUHJvcChvYmosIG5hbWUsIHZhbHVlKSB7XG4gICAgaWYgKGlzUHJpbWl0aXZlKG9iaikpIHJldHVybiBvYmo7XG4gICAgdmFyIGRlc2NyaXB0b3IgPSB7XG4gICAgICAgIHZhbHVlOiB2YWx1ZSxcbiAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgICBlbnVtZXJhYmxlOiBmYWxzZSxcbiAgICAgICAgd3JpdGFibGU6IHRydWVcbiAgICB9O1xuICAgIGVzNS5kZWZpbmVQcm9wZXJ0eShvYmosIG5hbWUsIGRlc2NyaXB0b3IpO1xuICAgIHJldHVybiBvYmo7XG59XG5cblxudmFyIHdyYXBzUHJpbWl0aXZlUmVjZWl2ZXIgPSAoZnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuIHRoaXMgIT09IFwic3RyaW5nXCI7XG59KS5jYWxsKFwic3RyaW5nXCIpO1xuXG5mdW5jdGlvbiB0aHJvd2VyKHIpIHtcbiAgICB0aHJvdyByO1xufVxuXG52YXIgaW5oZXJpdGVkRGF0YUtleXMgPSAoZnVuY3Rpb24oKSB7XG4gICAgaWYgKGVzNS5pc0VTNSkge1xuICAgICAgICByZXR1cm4gZnVuY3Rpb24ob2JqLCBvcHRzKSB7XG4gICAgICAgICAgICB2YXIgcmV0ID0gW107XG4gICAgICAgICAgICB2YXIgdmlzaXRlZEtleXMgPSBPYmplY3QuY3JlYXRlKG51bGwpO1xuICAgICAgICAgICAgdmFyIGdldEtleXMgPSBPYmplY3Qob3B0cykuaW5jbHVkZUhpZGRlblxuICAgICAgICAgICAgICAgID8gT2JqZWN0LmdldE93blByb3BlcnR5TmFtZXNcbiAgICAgICAgICAgICAgICA6IE9iamVjdC5rZXlzO1xuICAgICAgICAgICAgd2hpbGUgKG9iaiAhPSBudWxsKSB7XG4gICAgICAgICAgICAgICAgdmFyIGtleXM7XG4gICAgICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICAgICAga2V5cyA9IGdldEtleXMob2JqKTtcbiAgICAgICAgICAgICAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiByZXQ7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwga2V5cy5sZW5ndGg7ICsraSkge1xuICAgICAgICAgICAgICAgICAgICB2YXIga2V5ID0ga2V5c1tpXTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHZpc2l0ZWRLZXlzW2tleV0pIGNvbnRpbnVlO1xuICAgICAgICAgICAgICAgICAgICB2aXNpdGVkS2V5c1trZXldID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgdmFyIGRlc2MgPSBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKG9iaiwga2V5KTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGRlc2MgIT0gbnVsbCAmJiBkZXNjLmdldCA9PSBudWxsICYmIGRlc2Muc2V0ID09IG51bGwpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldC5wdXNoKGtleSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgb2JqID0gZXM1LmdldFByb3RvdHlwZU9mKG9iaik7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gcmV0O1xuICAgICAgICB9O1xuICAgIH0gZWxzZSB7XG4gICAgICAgIHJldHVybiBmdW5jdGlvbihvYmopIHtcbiAgICAgICAgICAgIHZhciByZXQgPSBbXTtcbiAgICAgICAgICAgIC8qanNoaW50IGZvcmluOmZhbHNlICovXG4gICAgICAgICAgICBmb3IgKHZhciBrZXkgaW4gb2JqKSB7XG4gICAgICAgICAgICAgICAgcmV0LnB1c2goa2V5KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiByZXQ7XG4gICAgICAgIH07XG4gICAgfVxuXG59KSgpO1xuXG5mdW5jdGlvbiBpc0NsYXNzKGZuKSB7XG4gICAgdHJ5IHtcbiAgICAgICAgaWYgKHR5cGVvZiBmbiA9PT0gXCJmdW5jdGlvblwiKSB7XG4gICAgICAgICAgICB2YXIga2V5cyA9IGVzNS5rZXlzKGZuLnByb3RvdHlwZSk7XG4gICAgICAgICAgICByZXR1cm4ga2V5cy5sZW5ndGggPiAwICYmXG4gICAgICAgICAgICAgICAgICAgIShrZXlzLmxlbmd0aCA9PT0gMSAmJiBrZXlzWzBdID09PSBcImNvbnN0cnVjdG9yXCIpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG59XG5cbmZ1bmN0aW9uIHRvRmFzdFByb3BlcnRpZXMob2JqKSB7XG4gICAgLypqc2hpbnQgLVcwMjcqL1xuICAgIGZ1bmN0aW9uIGYoKSB7fVxuICAgIGYucHJvdG90eXBlID0gb2JqO1xuICAgIHJldHVybiBmO1xuICAgIGV2YWwob2JqKTtcbn1cblxudmFyIHJpZGVudCA9IC9eW2EteiRfXVthLXokXzAtOV0qJC9pO1xuZnVuY3Rpb24gaXNJZGVudGlmaWVyKHN0cikge1xuICAgIHJldHVybiByaWRlbnQudGVzdChzdHIpO1xufVxuXG5mdW5jdGlvbiBmaWxsZWRSYW5nZShjb3VudCwgcHJlZml4LCBzdWZmaXgpIHtcbiAgICB2YXIgcmV0ID0gbmV3IEFycmF5KGNvdW50KTtcbiAgICBmb3IodmFyIGkgPSAwOyBpIDwgY291bnQ7ICsraSkge1xuICAgICAgICByZXRbaV0gPSBwcmVmaXggKyBpICsgc3VmZml4O1xuICAgIH1cbiAgICByZXR1cm4gcmV0O1xufVxuXG5mdW5jdGlvbiBzYWZlVG9TdHJpbmcob2JqKSB7XG4gICAgdHJ5IHtcbiAgICAgICAgcmV0dXJuIG9iaiArIFwiXCI7XG4gICAgfSBjYXRjaCAoZSkge1xuICAgICAgICByZXR1cm4gXCJbbm8gc3RyaW5nIHJlcHJlc2VudGF0aW9uXVwiO1xuICAgIH1cbn1cblxudmFyIHJldCA9IHtcbiAgICBpc0NsYXNzOiBpc0NsYXNzLFxuICAgIGlzSWRlbnRpZmllcjogaXNJZGVudGlmaWVyLFxuICAgIGluaGVyaXRlZERhdGFLZXlzOiBpbmhlcml0ZWREYXRhS2V5cyxcbiAgICBnZXREYXRhUHJvcGVydHlPckRlZmF1bHQ6IGdldERhdGFQcm9wZXJ0eU9yRGVmYXVsdCxcbiAgICB0aHJvd2VyOiB0aHJvd2VyLFxuICAgIGlzQXJyYXk6IGVzNS5pc0FycmF5LFxuICAgIGhhdmVHZXR0ZXJzOiBoYXZlR2V0dGVycyxcbiAgICBub3RFbnVtZXJhYmxlUHJvcDogbm90RW51bWVyYWJsZVByb3AsXG4gICAgaXNQcmltaXRpdmU6IGlzUHJpbWl0aXZlLFxuICAgIGlzT2JqZWN0OiBpc09iamVjdCxcbiAgICBjYW5FdmFsdWF0ZTogY2FuRXZhbHVhdGUsXG4gICAgZXJyb3JPYmo6IGVycm9yT2JqLFxuICAgIHRyeUNhdGNoMDogdHJ5Q2F0Y2gwLFxuICAgIHRyeUNhdGNoMTogdHJ5Q2F0Y2gxLFxuICAgIHRyeUNhdGNoMjogdHJ5Q2F0Y2gyLFxuICAgIHRyeUNhdGNoMzogdHJ5Q2F0Y2gzLFxuICAgIHRyeUNhdGNoNDogdHJ5Q2F0Y2g0LFxuICAgIHRyeUNhdGNoQXBwbHk6IHRyeUNhdGNoQXBwbHksXG4gICAgaW5oZXJpdHM6IGluaGVyaXRzLFxuICAgIHdpdGhBcHBlbmRlZDogd2l0aEFwcGVuZGVkLFxuICAgIGFzU3RyaW5nOiBhc1N0cmluZyxcbiAgICBtYXliZVdyYXBBc0Vycm9yOiBtYXliZVdyYXBBc0Vycm9yLFxuICAgIHdyYXBzUHJpbWl0aXZlUmVjZWl2ZXI6IHdyYXBzUHJpbWl0aXZlUmVjZWl2ZXIsXG4gICAgdG9GYXN0UHJvcGVydGllczogdG9GYXN0UHJvcGVydGllcyxcbiAgICBmaWxsZWRSYW5nZTogZmlsbGVkUmFuZ2UsXG4gICAgdG9TdHJpbmc6IHNhZmVUb1N0cmluZ1xufTtcbnRyeSB7dGhyb3cgbmV3IEVycm9yKCk7IH0gY2F0Y2ggKGUpIHtyZXQubGFzdExpbmVFcnJvciA9IGU7fVxubW9kdWxlLmV4cG9ydHMgPSByZXQ7XG4iLG51bGwsIihmdW5jdGlvbiAocHJvY2Vzcyl7XG4vLyBDb3B5cmlnaHQgSm95ZW50LCBJbmMuIGFuZCBvdGhlciBOb2RlIGNvbnRyaWJ1dG9ycy5cbi8vXG4vLyBQZXJtaXNzaW9uIGlzIGhlcmVieSBncmFudGVkLCBmcmVlIG9mIGNoYXJnZSwgdG8gYW55IHBlcnNvbiBvYnRhaW5pbmcgYVxuLy8gY29weSBvZiB0aGlzIHNvZnR3YXJlIGFuZCBhc3NvY2lhdGVkIGRvY3VtZW50YXRpb24gZmlsZXMgKHRoZVxuLy8gXCJTb2Z0d2FyZVwiKSwgdG8gZGVhbCBpbiB0aGUgU29mdHdhcmUgd2l0aG91dCByZXN0cmljdGlvbiwgaW5jbHVkaW5nXG4vLyB3aXRob3V0IGxpbWl0YXRpb24gdGhlIHJpZ2h0cyB0byB1c2UsIGNvcHksIG1vZGlmeSwgbWVyZ2UsIHB1Ymxpc2gsXG4vLyBkaXN0cmlidXRlLCBzdWJsaWNlbnNlLCBhbmQvb3Igc2VsbCBjb3BpZXMgb2YgdGhlIFNvZnR3YXJlLCBhbmQgdG8gcGVybWl0XG4vLyBwZXJzb25zIHRvIHdob20gdGhlIFNvZnR3YXJlIGlzIGZ1cm5pc2hlZCB0byBkbyBzbywgc3ViamVjdCB0byB0aGVcbi8vIGZvbGxvd2luZyBjb25kaXRpb25zOlxuLy9cbi8vIFRoZSBhYm92ZSBjb3B5cmlnaHQgbm90aWNlIGFuZCB0aGlzIHBlcm1pc3Npb24gbm90aWNlIHNoYWxsIGJlIGluY2x1ZGVkXG4vLyBpbiBhbGwgY29waWVzIG9yIHN1YnN0YW50aWFsIHBvcnRpb25zIG9mIHRoZSBTb2Z0d2FyZS5cbi8vXG4vLyBUSEUgU09GVFdBUkUgSVMgUFJPVklERUQgXCJBUyBJU1wiLCBXSVRIT1VUIFdBUlJBTlRZIE9GIEFOWSBLSU5ELCBFWFBSRVNTXG4vLyBPUiBJTVBMSUVELCBJTkNMVURJTkcgQlVUIE5PVCBMSU1JVEVEIFRPIFRIRSBXQVJSQU5USUVTIE9GXG4vLyBNRVJDSEFOVEFCSUxJVFksIEZJVE5FU1MgRk9SIEEgUEFSVElDVUxBUiBQVVJQT1NFIEFORCBOT05JTkZSSU5HRU1FTlQuIElOXG4vLyBOTyBFVkVOVCBTSEFMTCBUSEUgQVVUSE9SUyBPUiBDT1BZUklHSFQgSE9MREVSUyBCRSBMSUFCTEUgRk9SIEFOWSBDTEFJTSxcbi8vIERBTUFHRVMgT1IgT1RIRVIgTElBQklMSVRZLCBXSEVUSEVSIElOIEFOIEFDVElPTiBPRiBDT05UUkFDVCwgVE9SVCBPUlxuLy8gT1RIRVJXSVNFLCBBUklTSU5HIEZST00sIE9VVCBPRiBPUiBJTiBDT05ORUNUSU9OIFdJVEggVEhFIFNPRlRXQVJFIE9SIFRIRVxuLy8gVVNFIE9SIE9USEVSIERFQUxJTkdTIElOIFRIRSBTT0ZUV0FSRS5cblxuLy8gcmVzb2x2ZXMgLiBhbmQgLi4gZWxlbWVudHMgaW4gYSBwYXRoIGFycmF5IHdpdGggZGlyZWN0b3J5IG5hbWVzIHRoZXJlXG4vLyBtdXN0IGJlIG5vIHNsYXNoZXMsIGVtcHR5IGVsZW1lbnRzLCBvciBkZXZpY2UgbmFtZXMgKGM6XFwpIGluIHRoZSBhcnJheVxuLy8gKHNvIGFsc28gbm8gbGVhZGluZyBhbmQgdHJhaWxpbmcgc2xhc2hlcyAtIGl0IGRvZXMgbm90IGRpc3Rpbmd1aXNoXG4vLyByZWxhdGl2ZSBhbmQgYWJzb2x1dGUgcGF0aHMpXG5mdW5jdGlvbiBub3JtYWxpemVBcnJheShwYXJ0cywgYWxsb3dBYm92ZVJvb3QpIHtcbiAgLy8gaWYgdGhlIHBhdGggdHJpZXMgdG8gZ28gYWJvdmUgdGhlIHJvb3QsIGB1cGAgZW5kcyB1cCA+IDBcbiAgdmFyIHVwID0gMDtcbiAgZm9yICh2YXIgaSA9IHBhcnRzLmxlbmd0aCAtIDE7IGkgPj0gMDsgaS0tKSB7XG4gICAgdmFyIGxhc3QgPSBwYXJ0c1tpXTtcbiAgICBpZiAobGFzdCA9PT0gJy4nKSB7XG4gICAgICBwYXJ0cy5zcGxpY2UoaSwgMSk7XG4gICAgfSBlbHNlIGlmIChsYXN0ID09PSAnLi4nKSB7XG4gICAgICBwYXJ0cy5zcGxpY2UoaSwgMSk7XG4gICAgICB1cCsrO1xuICAgIH0gZWxzZSBpZiAodXApIHtcbiAgICAgIHBhcnRzLnNwbGljZShpLCAxKTtcbiAgICAgIHVwLS07XG4gICAgfVxuICB9XG5cbiAgLy8gaWYgdGhlIHBhdGggaXMgYWxsb3dlZCB0byBnbyBhYm92ZSB0aGUgcm9vdCwgcmVzdG9yZSBsZWFkaW5nIC4uc1xuICBpZiAoYWxsb3dBYm92ZVJvb3QpIHtcbiAgICBmb3IgKDsgdXAtLTsgdXApIHtcbiAgICAgIHBhcnRzLnVuc2hpZnQoJy4uJyk7XG4gICAgfVxuICB9XG5cbiAgcmV0dXJuIHBhcnRzO1xufVxuXG4vLyBTcGxpdCBhIGZpbGVuYW1lIGludG8gW3Jvb3QsIGRpciwgYmFzZW5hbWUsIGV4dF0sIHVuaXggdmVyc2lvblxuLy8gJ3Jvb3QnIGlzIGp1c3QgYSBzbGFzaCwgb3Igbm90aGluZy5cbnZhciBzcGxpdFBhdGhSZSA9XG4gICAgL14oXFwvP3wpKFtcXHNcXFNdKj8pKCg/OlxcLnsxLDJ9fFteXFwvXSs/fCkoXFwuW14uXFwvXSp8KSkoPzpbXFwvXSopJC87XG52YXIgc3BsaXRQYXRoID0gZnVuY3Rpb24oZmlsZW5hbWUpIHtcbiAgcmV0dXJuIHNwbGl0UGF0aFJlLmV4ZWMoZmlsZW5hbWUpLnNsaWNlKDEpO1xufTtcblxuLy8gcGF0aC5yZXNvbHZlKFtmcm9tIC4uLl0sIHRvKVxuLy8gcG9zaXggdmVyc2lvblxuZXhwb3J0cy5yZXNvbHZlID0gZnVuY3Rpb24oKSB7XG4gIHZhciByZXNvbHZlZFBhdGggPSAnJyxcbiAgICAgIHJlc29sdmVkQWJzb2x1dGUgPSBmYWxzZTtcblxuICBmb3IgKHZhciBpID0gYXJndW1lbnRzLmxlbmd0aCAtIDE7IGkgPj0gLTEgJiYgIXJlc29sdmVkQWJzb2x1dGU7IGktLSkge1xuICAgIHZhciBwYXRoID0gKGkgPj0gMCkgPyBhcmd1bWVudHNbaV0gOiBwcm9jZXNzLmN3ZCgpO1xuXG4gICAgLy8gU2tpcCBlbXB0eSBhbmQgaW52YWxpZCBlbnRyaWVzXG4gICAgaWYgKHR5cGVvZiBwYXRoICE9PSAnc3RyaW5nJykge1xuICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcignQXJndW1lbnRzIHRvIHBhdGgucmVzb2x2ZSBtdXN0IGJlIHN0cmluZ3MnKTtcbiAgICB9IGVsc2UgaWYgKCFwYXRoKSB7XG4gICAgICBjb250aW51ZTtcbiAgICB9XG5cbiAgICByZXNvbHZlZFBhdGggPSBwYXRoICsgJy8nICsgcmVzb2x2ZWRQYXRoO1xuICAgIHJlc29sdmVkQWJzb2x1dGUgPSBwYXRoLmNoYXJBdCgwKSA9PT0gJy8nO1xuICB9XG5cbiAgLy8gQXQgdGhpcyBwb2ludCB0aGUgcGF0aCBzaG91bGQgYmUgcmVzb2x2ZWQgdG8gYSBmdWxsIGFic29sdXRlIHBhdGgsIGJ1dFxuICAvLyBoYW5kbGUgcmVsYXRpdmUgcGF0aHMgdG8gYmUgc2FmZSAobWlnaHQgaGFwcGVuIHdoZW4gcHJvY2Vzcy5jd2QoKSBmYWlscylcblxuICAvLyBOb3JtYWxpemUgdGhlIHBhdGhcbiAgcmVzb2x2ZWRQYXRoID0gbm9ybWFsaXplQXJyYXkoZmlsdGVyKHJlc29sdmVkUGF0aC5zcGxpdCgnLycpLCBmdW5jdGlvbihwKSB7XG4gICAgcmV0dXJuICEhcDtcbiAgfSksICFyZXNvbHZlZEFic29sdXRlKS5qb2luKCcvJyk7XG5cbiAgcmV0dXJuICgocmVzb2x2ZWRBYnNvbHV0ZSA/ICcvJyA6ICcnKSArIHJlc29sdmVkUGF0aCkgfHwgJy4nO1xufTtcblxuLy8gcGF0aC5ub3JtYWxpemUocGF0aClcbi8vIHBvc2l4IHZlcnNpb25cbmV4cG9ydHMubm9ybWFsaXplID0gZnVuY3Rpb24ocGF0aCkge1xuICB2YXIgaXNBYnNvbHV0ZSA9IGV4cG9ydHMuaXNBYnNvbHV0ZShwYXRoKSxcbiAgICAgIHRyYWlsaW5nU2xhc2ggPSBzdWJzdHIocGF0aCwgLTEpID09PSAnLyc7XG5cbiAgLy8gTm9ybWFsaXplIHRoZSBwYXRoXG4gIHBhdGggPSBub3JtYWxpemVBcnJheShmaWx0ZXIocGF0aC5zcGxpdCgnLycpLCBmdW5jdGlvbihwKSB7XG4gICAgcmV0dXJuICEhcDtcbiAgfSksICFpc0Fic29sdXRlKS5qb2luKCcvJyk7XG5cbiAgaWYgKCFwYXRoICYmICFpc0Fic29sdXRlKSB7XG4gICAgcGF0aCA9ICcuJztcbiAgfVxuICBpZiAocGF0aCAmJiB0cmFpbGluZ1NsYXNoKSB7XG4gICAgcGF0aCArPSAnLyc7XG4gIH1cblxuICByZXR1cm4gKGlzQWJzb2x1dGUgPyAnLycgOiAnJykgKyBwYXRoO1xufTtcblxuLy8gcG9zaXggdmVyc2lvblxuZXhwb3J0cy5pc0Fic29sdXRlID0gZnVuY3Rpb24ocGF0aCkge1xuICByZXR1cm4gcGF0aC5jaGFyQXQoMCkgPT09ICcvJztcbn07XG5cbi8vIHBvc2l4IHZlcnNpb25cbmV4cG9ydHMuam9pbiA9IGZ1bmN0aW9uKCkge1xuICB2YXIgcGF0aHMgPSBBcnJheS5wcm90b3R5cGUuc2xpY2UuY2FsbChhcmd1bWVudHMsIDApO1xuICByZXR1cm4gZXhwb3J0cy5ub3JtYWxpemUoZmlsdGVyKHBhdGhzLCBmdW5jdGlvbihwLCBpbmRleCkge1xuICAgIGlmICh0eXBlb2YgcCAhPT0gJ3N0cmluZycpIHtcbiAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoJ0FyZ3VtZW50cyB0byBwYXRoLmpvaW4gbXVzdCBiZSBzdHJpbmdzJyk7XG4gICAgfVxuICAgIHJldHVybiBwO1xuICB9KS5qb2luKCcvJykpO1xufTtcblxuXG4vLyBwYXRoLnJlbGF0aXZlKGZyb20sIHRvKVxuLy8gcG9zaXggdmVyc2lvblxuZXhwb3J0cy5yZWxhdGl2ZSA9IGZ1bmN0aW9uKGZyb20sIHRvKSB7XG4gIGZyb20gPSBleHBvcnRzLnJlc29sdmUoZnJvbSkuc3Vic3RyKDEpO1xuICB0byA9IGV4cG9ydHMucmVzb2x2ZSh0bykuc3Vic3RyKDEpO1xuXG4gIGZ1bmN0aW9uIHRyaW0oYXJyKSB7XG4gICAgdmFyIHN0YXJ0ID0gMDtcbiAgICBmb3IgKDsgc3RhcnQgPCBhcnIubGVuZ3RoOyBzdGFydCsrKSB7XG4gICAgICBpZiAoYXJyW3N0YXJ0XSAhPT0gJycpIGJyZWFrO1xuICAgIH1cblxuICAgIHZhciBlbmQgPSBhcnIubGVuZ3RoIC0gMTtcbiAgICBmb3IgKDsgZW5kID49IDA7IGVuZC0tKSB7XG4gICAgICBpZiAoYXJyW2VuZF0gIT09ICcnKSBicmVhaztcbiAgICB9XG5cbiAgICBpZiAoc3RhcnQgPiBlbmQpIHJldHVybiBbXTtcbiAgICByZXR1cm4gYXJyLnNsaWNlKHN0YXJ0LCBlbmQgLSBzdGFydCArIDEpO1xuICB9XG5cbiAgdmFyIGZyb21QYXJ0cyA9IHRyaW0oZnJvbS5zcGxpdCgnLycpKTtcbiAgdmFyIHRvUGFydHMgPSB0cmltKHRvLnNwbGl0KCcvJykpO1xuXG4gIHZhciBsZW5ndGggPSBNYXRoLm1pbihmcm9tUGFydHMubGVuZ3RoLCB0b1BhcnRzLmxlbmd0aCk7XG4gIHZhciBzYW1lUGFydHNMZW5ndGggPSBsZW5ndGg7XG4gIGZvciAodmFyIGkgPSAwOyBpIDwgbGVuZ3RoOyBpKyspIHtcbiAgICBpZiAoZnJvbVBhcnRzW2ldICE9PSB0b1BhcnRzW2ldKSB7XG4gICAgICBzYW1lUGFydHNMZW5ndGggPSBpO1xuICAgICAgYnJlYWs7XG4gICAgfVxuICB9XG5cbiAgdmFyIG91dHB1dFBhcnRzID0gW107XG4gIGZvciAodmFyIGkgPSBzYW1lUGFydHNMZW5ndGg7IGkgPCBmcm9tUGFydHMubGVuZ3RoOyBpKyspIHtcbiAgICBvdXRwdXRQYXJ0cy5wdXNoKCcuLicpO1xuICB9XG5cbiAgb3V0cHV0UGFydHMgPSBvdXRwdXRQYXJ0cy5jb25jYXQodG9QYXJ0cy5zbGljZShzYW1lUGFydHNMZW5ndGgpKTtcblxuICByZXR1cm4gb3V0cHV0UGFydHMuam9pbignLycpO1xufTtcblxuZXhwb3J0cy5zZXAgPSAnLyc7XG5leHBvcnRzLmRlbGltaXRlciA9ICc6JztcblxuZXhwb3J0cy5kaXJuYW1lID0gZnVuY3Rpb24ocGF0aCkge1xuICB2YXIgcmVzdWx0ID0gc3BsaXRQYXRoKHBhdGgpLFxuICAgICAgcm9vdCA9IHJlc3VsdFswXSxcbiAgICAgIGRpciA9IHJlc3VsdFsxXTtcblxuICBpZiAoIXJvb3QgJiYgIWRpcikge1xuICAgIC8vIE5vIGRpcm5hbWUgd2hhdHNvZXZlclxuICAgIHJldHVybiAnLic7XG4gIH1cblxuICBpZiAoZGlyKSB7XG4gICAgLy8gSXQgaGFzIGEgZGlybmFtZSwgc3RyaXAgdHJhaWxpbmcgc2xhc2hcbiAgICBkaXIgPSBkaXIuc3Vic3RyKDAsIGRpci5sZW5ndGggLSAxKTtcbiAgfVxuXG4gIHJldHVybiByb290ICsgZGlyO1xufTtcblxuXG5leHBvcnRzLmJhc2VuYW1lID0gZnVuY3Rpb24ocGF0aCwgZXh0KSB7XG4gIHZhciBmID0gc3BsaXRQYXRoKHBhdGgpWzJdO1xuICAvLyBUT0RPOiBtYWtlIHRoaXMgY29tcGFyaXNvbiBjYXNlLWluc2Vuc2l0aXZlIG9uIHdpbmRvd3M/XG4gIGlmIChleHQgJiYgZi5zdWJzdHIoLTEgKiBleHQubGVuZ3RoKSA9PT0gZXh0KSB7XG4gICAgZiA9IGYuc3Vic3RyKDAsIGYubGVuZ3RoIC0gZXh0Lmxlbmd0aCk7XG4gIH1cbiAgcmV0dXJuIGY7XG59O1xuXG5cbmV4cG9ydHMuZXh0bmFtZSA9IGZ1bmN0aW9uKHBhdGgpIHtcbiAgcmV0dXJuIHNwbGl0UGF0aChwYXRoKVszXTtcbn07XG5cbmZ1bmN0aW9uIGZpbHRlciAoeHMsIGYpIHtcbiAgICBpZiAoeHMuZmlsdGVyKSByZXR1cm4geHMuZmlsdGVyKGYpO1xuICAgIHZhciByZXMgPSBbXTtcbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IHhzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgIGlmIChmKHhzW2ldLCBpLCB4cykpIHJlcy5wdXNoKHhzW2ldKTtcbiAgICB9XG4gICAgcmV0dXJuIHJlcztcbn1cblxuLy8gU3RyaW5nLnByb3RvdHlwZS5zdWJzdHIgLSBuZWdhdGl2ZSBpbmRleCBkb24ndCB3b3JrIGluIElFOFxudmFyIHN1YnN0ciA9ICdhYicuc3Vic3RyKC0xKSA9PT0gJ2InXG4gICAgPyBmdW5jdGlvbiAoc3RyLCBzdGFydCwgbGVuKSB7IHJldHVybiBzdHIuc3Vic3RyKHN0YXJ0LCBsZW4pIH1cbiAgICA6IGZ1bmN0aW9uIChzdHIsIHN0YXJ0LCBsZW4pIHtcbiAgICAgICAgaWYgKHN0YXJ0IDwgMCkgc3RhcnQgPSBzdHIubGVuZ3RoICsgc3RhcnQ7XG4gICAgICAgIHJldHVybiBzdHIuc3Vic3RyKHN0YXJ0LCBsZW4pO1xuICAgIH1cbjtcblxufSkuY2FsbCh0aGlzLHJlcXVpcmUoJ19wcm9jZXNzJykpIiwiLy8gc2hpbSBmb3IgdXNpbmcgcHJvY2VzcyBpbiBicm93c2VyXG5cbnZhciBwcm9jZXNzID0gbW9kdWxlLmV4cG9ydHMgPSB7fTtcblxucHJvY2Vzcy5uZXh0VGljayA9IChmdW5jdGlvbiAoKSB7XG4gICAgdmFyIGNhblNldEltbWVkaWF0ZSA9IHR5cGVvZiB3aW5kb3cgIT09ICd1bmRlZmluZWQnXG4gICAgJiYgd2luZG93LnNldEltbWVkaWF0ZTtcbiAgICB2YXIgY2FuTXV0YXRpb25PYnNlcnZlciA9IHR5cGVvZiB3aW5kb3cgIT09ICd1bmRlZmluZWQnXG4gICAgJiYgd2luZG93Lk11dGF0aW9uT2JzZXJ2ZXI7XG4gICAgdmFyIGNhblBvc3QgPSB0eXBlb2Ygd2luZG93ICE9PSAndW5kZWZpbmVkJ1xuICAgICYmIHdpbmRvdy5wb3N0TWVzc2FnZSAmJiB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lclxuICAgIDtcblxuICAgIGlmIChjYW5TZXRJbW1lZGlhdGUpIHtcbiAgICAgICAgcmV0dXJuIGZ1bmN0aW9uIChmKSB7IHJldHVybiB3aW5kb3cuc2V0SW1tZWRpYXRlKGYpIH07XG4gICAgfVxuXG4gICAgdmFyIHF1ZXVlID0gW107XG5cbiAgICBpZiAoY2FuTXV0YXRpb25PYnNlcnZlcikge1xuICAgICAgICB2YXIgaGlkZGVuRGl2ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcbiAgICAgICAgdmFyIG9ic2VydmVyID0gbmV3IE11dGF0aW9uT2JzZXJ2ZXIoZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdmFyIHF1ZXVlTGlzdCA9IHF1ZXVlLnNsaWNlKCk7XG4gICAgICAgICAgICBxdWV1ZS5sZW5ndGggPSAwO1xuICAgICAgICAgICAgcXVldWVMaXN0LmZvckVhY2goZnVuY3Rpb24gKGZuKSB7XG4gICAgICAgICAgICAgICAgZm4oKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9KTtcblxuICAgICAgICBvYnNlcnZlci5vYnNlcnZlKGhpZGRlbkRpdiwgeyBhdHRyaWJ1dGVzOiB0cnVlIH0pO1xuXG4gICAgICAgIHJldHVybiBmdW5jdGlvbiBuZXh0VGljayhmbikge1xuICAgICAgICAgICAgaWYgKCFxdWV1ZS5sZW5ndGgpIHtcbiAgICAgICAgICAgICAgICBoaWRkZW5EaXYuc2V0QXR0cmlidXRlKCd5ZXMnLCAnbm8nKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHF1ZXVlLnB1c2goZm4pO1xuICAgICAgICB9O1xuICAgIH1cblxuICAgIGlmIChjYW5Qb3N0KSB7XG4gICAgICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdtZXNzYWdlJywgZnVuY3Rpb24gKGV2KSB7XG4gICAgICAgICAgICB2YXIgc291cmNlID0gZXYuc291cmNlO1xuICAgICAgICAgICAgaWYgKChzb3VyY2UgPT09IHdpbmRvdyB8fCBzb3VyY2UgPT09IG51bGwpICYmIGV2LmRhdGEgPT09ICdwcm9jZXNzLXRpY2snKSB7XG4gICAgICAgICAgICAgICAgZXYuc3RvcFByb3BhZ2F0aW9uKCk7XG4gICAgICAgICAgICAgICAgaWYgKHF1ZXVlLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIGZuID0gcXVldWUuc2hpZnQoKTtcbiAgICAgICAgICAgICAgICAgICAgZm4oKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH0sIHRydWUpO1xuXG4gICAgICAgIHJldHVybiBmdW5jdGlvbiBuZXh0VGljayhmbikge1xuICAgICAgICAgICAgcXVldWUucHVzaChmbik7XG4gICAgICAgICAgICB3aW5kb3cucG9zdE1lc3NhZ2UoJ3Byb2Nlc3MtdGljaycsICcqJyk7XG4gICAgICAgIH07XG4gICAgfVxuXG4gICAgcmV0dXJuIGZ1bmN0aW9uIG5leHRUaWNrKGZuKSB7XG4gICAgICAgIHNldFRpbWVvdXQoZm4sIDApO1xuICAgIH07XG59KSgpO1xuXG5wcm9jZXNzLnRpdGxlID0gJ2Jyb3dzZXInO1xucHJvY2Vzcy5icm93c2VyID0gdHJ1ZTtcbnByb2Nlc3MuZW52ID0ge307XG5wcm9jZXNzLmFyZ3YgPSBbXTtcblxuZnVuY3Rpb24gbm9vcCgpIHt9XG5cbnByb2Nlc3Mub24gPSBub29wO1xucHJvY2Vzcy5hZGRMaXN0ZW5lciA9IG5vb3A7XG5wcm9jZXNzLm9uY2UgPSBub29wO1xucHJvY2Vzcy5vZmYgPSBub29wO1xucHJvY2Vzcy5yZW1vdmVMaXN0ZW5lciA9IG5vb3A7XG5wcm9jZXNzLnJlbW92ZUFsbExpc3RlbmVycyA9IG5vb3A7XG5wcm9jZXNzLmVtaXQgPSBub29wO1xuXG5wcm9jZXNzLmJpbmRpbmcgPSBmdW5jdGlvbiAobmFtZSkge1xuICAgIHRocm93IG5ldyBFcnJvcigncHJvY2Vzcy5iaW5kaW5nIGlzIG5vdCBzdXBwb3J0ZWQnKTtcbn07XG5cbi8vIFRPRE8oc2h0eWxtYW4pXG5wcm9jZXNzLmN3ZCA9IGZ1bmN0aW9uICgpIHsgcmV0dXJuICcvJyB9O1xucHJvY2Vzcy5jaGRpciA9IGZ1bmN0aW9uIChkaXIpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoJ3Byb2Nlc3MuY2hkaXIgaXMgbm90IHN1cHBvcnRlZCcpO1xufTtcbiIsIi8vIGRvVC5qc1xuLy8gMjAxMS0yMDE0LCBMYXVyYSBEb2t0b3JvdmEsIGh0dHBzOi8vZ2l0aHViLmNvbS9vbGFkby9kb1Rcbi8vIExpY2Vuc2VkIHVuZGVyIHRoZSBNSVQgbGljZW5zZS5cblxuKGZ1bmN0aW9uKCkge1xuXHRcInVzZSBzdHJpY3RcIjtcblxuXHR2YXIgZG9UID0ge1xuXHRcdHZlcnNpb246IFwiMS4wLjNcIixcblx0XHR0ZW1wbGF0ZVNldHRpbmdzOiB7XG5cdFx0XHRldmFsdWF0ZTogICAgL1xce1xceyhbXFxzXFxTXSs/KFxcfT8pKylcXH1cXH0vZyxcblx0XHRcdGludGVycG9sYXRlOiAvXFx7XFx7PShbXFxzXFxTXSs/KVxcfVxcfS9nLFxuXHRcdFx0ZW5jb2RlOiAgICAgIC9cXHtcXHshKFtcXHNcXFNdKz8pXFx9XFx9L2csXG5cdFx0XHR1c2U6ICAgICAgICAgL1xce1xceyMoW1xcc1xcU10rPylcXH1cXH0vZyxcblx0XHRcdHVzZVBhcmFtczogICAvKF58W15cXHckXSlkZWYoPzpcXC58XFxbW1xcJ1xcXCJdKShbXFx3JFxcLl0rKSg/OltcXCdcXFwiXVxcXSk/XFxzKlxcOlxccyooW1xcdyRcXC5dK3xcXFwiW15cXFwiXStcXFwifFxcJ1teXFwnXStcXCd8XFx7W15cXH1dK1xcfSkvZyxcblx0XHRcdGRlZmluZTogICAgICAvXFx7XFx7IyNcXHMqKFtcXHdcXC4kXSspXFxzKihcXDp8PSkoW1xcc1xcU10rPykjXFx9XFx9L2csXG5cdFx0XHRkZWZpbmVQYXJhbXM6L15cXHMqKFtcXHckXSspOihbXFxzXFxTXSspLyxcblx0XHRcdGNvbmRpdGlvbmFsOiAvXFx7XFx7XFw/KFxcPyk/XFxzKihbXFxzXFxTXSo/KVxccypcXH1cXH0vZyxcblx0XHRcdGl0ZXJhdGU6ICAgICAvXFx7XFx7flxccyooPzpcXH1cXH18KFtcXHNcXFNdKz8pXFxzKlxcOlxccyooW1xcdyRdKylcXHMqKD86XFw6XFxzKihbXFx3JF0rKSk/XFxzKlxcfVxcfSkvZyxcblx0XHRcdHZhcm5hbWU6XHRcIml0XCIsXG5cdFx0XHRzdHJpcDpcdFx0dHJ1ZSxcblx0XHRcdGFwcGVuZDpcdFx0dHJ1ZSxcblx0XHRcdHNlbGZjb250YWluZWQ6IGZhbHNlLFxuXHRcdFx0ZG9Ob3RTa2lwRW5jb2RlZDogZmFsc2Vcblx0XHR9LFxuXHRcdHRlbXBsYXRlOiB1bmRlZmluZWQsIC8vZm4sIGNvbXBpbGUgdGVtcGxhdGVcblx0XHRjb21waWxlOiAgdW5kZWZpbmVkICAvL2ZuLCBmb3IgZXhwcmVzc1xuXHR9LCBfZ2xvYmFscztcblxuXHRkb1QuZW5jb2RlSFRNTFNvdXJjZSA9IGZ1bmN0aW9uKGRvTm90U2tpcEVuY29kZWQpIHtcblx0XHR2YXIgZW5jb2RlSFRNTFJ1bGVzID0geyBcIiZcIjogXCImIzM4O1wiLCBcIjxcIjogXCImIzYwO1wiLCBcIj5cIjogXCImIzYyO1wiLCAnXCInOiBcIiYjMzQ7XCIsIFwiJ1wiOiBcIiYjMzk7XCIsIFwiL1wiOiBcIiYjNDc7XCIgfSxcblx0XHRcdG1hdGNoSFRNTCA9IGRvTm90U2tpcEVuY29kZWQgPyAvWyY8PlwiJ1xcL10vZyA6IC8mKD8hIz9cXHcrOyl8PHw+fFwifCd8XFwvL2c7XG5cdFx0cmV0dXJuIGZ1bmN0aW9uKGNvZGUpIHtcblx0XHRcdHJldHVybiBjb2RlID8gY29kZS50b1N0cmluZygpLnJlcGxhY2UobWF0Y2hIVE1MLCBmdW5jdGlvbihtKSB7cmV0dXJuIGVuY29kZUhUTUxSdWxlc1ttXSB8fCBtO30pIDogXCJcIjtcblx0XHR9O1xuXHR9O1xuXG5cdF9nbG9iYWxzID0gKGZ1bmN0aW9uKCl7IHJldHVybiB0aGlzIHx8ICgwLGV2YWwpKFwidGhpc1wiKTsgfSgpKTtcblxuXHRpZiAodHlwZW9mIG1vZHVsZSAhPT0gXCJ1bmRlZmluZWRcIiAmJiBtb2R1bGUuZXhwb3J0cykge1xuXHRcdG1vZHVsZS5leHBvcnRzID0gZG9UO1xuXHR9IGVsc2UgaWYgKHR5cGVvZiBkZWZpbmUgPT09IFwiZnVuY3Rpb25cIiAmJiBkZWZpbmUuYW1kKSB7XG5cdFx0ZGVmaW5lKGZ1bmN0aW9uKCl7cmV0dXJuIGRvVDt9KTtcblx0fSBlbHNlIHtcblx0XHRfZ2xvYmFscy5kb1QgPSBkb1Q7XG5cdH1cblxuXHR2YXIgc3RhcnRlbmQgPSB7XG5cdFx0YXBwZW5kOiB7IHN0YXJ0OiBcIicrKFwiLCAgICAgIGVuZDogXCIpKydcIiwgICAgICBzdGFydGVuY29kZTogXCInK2VuY29kZUhUTUwoXCIgfSxcblx0XHRzcGxpdDogIHsgc3RhcnQ6IFwiJztvdXQrPShcIiwgZW5kOiBcIik7b3V0Kz0nXCIsIHN0YXJ0ZW5jb2RlOiBcIic7b3V0Kz1lbmNvZGVIVE1MKFwiIH1cblx0fSwgc2tpcCA9IC8kXi87XG5cblx0ZnVuY3Rpb24gcmVzb2x2ZURlZnMoYywgYmxvY2ssIGRlZikge1xuXHRcdHJldHVybiAoKHR5cGVvZiBibG9jayA9PT0gXCJzdHJpbmdcIikgPyBibG9jayA6IGJsb2NrLnRvU3RyaW5nKCkpXG5cdFx0LnJlcGxhY2UoYy5kZWZpbmUgfHwgc2tpcCwgZnVuY3Rpb24obSwgY29kZSwgYXNzaWduLCB2YWx1ZSkge1xuXHRcdFx0aWYgKGNvZGUuaW5kZXhPZihcImRlZi5cIikgPT09IDApIHtcblx0XHRcdFx0Y29kZSA9IGNvZGUuc3Vic3RyaW5nKDQpO1xuXHRcdFx0fVxuXHRcdFx0aWYgKCEoY29kZSBpbiBkZWYpKSB7XG5cdFx0XHRcdGlmIChhc3NpZ24gPT09IFwiOlwiKSB7XG5cdFx0XHRcdFx0aWYgKGMuZGVmaW5lUGFyYW1zKSB2YWx1ZS5yZXBsYWNlKGMuZGVmaW5lUGFyYW1zLCBmdW5jdGlvbihtLCBwYXJhbSwgdikge1xuXHRcdFx0XHRcdFx0ZGVmW2NvZGVdID0ge2FyZzogcGFyYW0sIHRleHQ6IHZ9O1xuXHRcdFx0XHRcdH0pO1xuXHRcdFx0XHRcdGlmICghKGNvZGUgaW4gZGVmKSkgZGVmW2NvZGVdPSB2YWx1ZTtcblx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHRuZXcgRnVuY3Rpb24oXCJkZWZcIiwgXCJkZWZbJ1wiK2NvZGUrXCInXT1cIiArIHZhbHVlKShkZWYpO1xuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0XHRyZXR1cm4gXCJcIjtcblx0XHR9KVxuXHRcdC5yZXBsYWNlKGMudXNlIHx8IHNraXAsIGZ1bmN0aW9uKG0sIGNvZGUpIHtcblx0XHRcdGlmIChjLnVzZVBhcmFtcykgY29kZSA9IGNvZGUucmVwbGFjZShjLnVzZVBhcmFtcywgZnVuY3Rpb24obSwgcywgZCwgcGFyYW0pIHtcblx0XHRcdFx0aWYgKGRlZltkXSAmJiBkZWZbZF0uYXJnICYmIHBhcmFtKSB7XG5cdFx0XHRcdFx0dmFyIHJ3ID0gKGQrXCI6XCIrcGFyYW0pLnJlcGxhY2UoLyd8XFxcXC9nLCBcIl9cIik7XG5cdFx0XHRcdFx0ZGVmLl9fZXhwID0gZGVmLl9fZXhwIHx8IHt9O1xuXHRcdFx0XHRcdGRlZi5fX2V4cFtyd10gPSBkZWZbZF0udGV4dC5yZXBsYWNlKG5ldyBSZWdFeHAoXCIoXnxbXlxcXFx3JF0pXCIgKyBkZWZbZF0uYXJnICsgXCIoW15cXFxcdyRdKVwiLCBcImdcIiksIFwiJDFcIiArIHBhcmFtICsgXCIkMlwiKTtcblx0XHRcdFx0XHRyZXR1cm4gcyArIFwiZGVmLl9fZXhwWydcIitydytcIiddXCI7XG5cdFx0XHRcdH1cblx0XHRcdH0pO1xuXHRcdFx0dmFyIHYgPSBuZXcgRnVuY3Rpb24oXCJkZWZcIiwgXCJyZXR1cm4gXCIgKyBjb2RlKShkZWYpO1xuXHRcdFx0cmV0dXJuIHYgPyByZXNvbHZlRGVmcyhjLCB2LCBkZWYpIDogdjtcblx0XHR9KTtcblx0fVxuXG5cdGZ1bmN0aW9uIHVuZXNjYXBlKGNvZGUpIHtcblx0XHRyZXR1cm4gY29kZS5yZXBsYWNlKC9cXFxcKCd8XFxcXCkvZywgXCIkMVwiKS5yZXBsYWNlKC9bXFxyXFx0XFxuXS9nLCBcIiBcIik7XG5cdH1cblxuXHRkb1QudGVtcGxhdGUgPSBmdW5jdGlvbih0bXBsLCBjLCBkZWYpIHtcblx0XHRjID0gYyB8fCBkb1QudGVtcGxhdGVTZXR0aW5ncztcblx0XHR2YXIgY3NlID0gYy5hcHBlbmQgPyBzdGFydGVuZC5hcHBlbmQgOiBzdGFydGVuZC5zcGxpdCwgbmVlZGh0bWxlbmNvZGUsIHNpZCA9IDAsIGluZHYsXG5cdFx0XHRzdHIgID0gKGMudXNlIHx8IGMuZGVmaW5lKSA/IHJlc29sdmVEZWZzKGMsIHRtcGwsIGRlZiB8fCB7fSkgOiB0bXBsO1xuXG5cdFx0c3RyID0gKFwidmFyIG91dD0nXCIgKyAoYy5zdHJpcCA/IHN0ci5yZXBsYWNlKC8oXnxcXHJ8XFxuKVxcdCogK3wgK1xcdCooXFxyfFxcbnwkKS9nLFwiIFwiKVxuXHRcdFx0XHRcdC5yZXBsYWNlKC9cXHJ8XFxufFxcdHxcXC9cXCpbXFxzXFxTXSo/XFwqXFwvL2csXCJcIik6IHN0cilcblx0XHRcdC5yZXBsYWNlKC8nfFxcXFwvZywgXCJcXFxcJCZcIilcblx0XHRcdC5yZXBsYWNlKGMuaW50ZXJwb2xhdGUgfHwgc2tpcCwgZnVuY3Rpb24obSwgY29kZSkge1xuXHRcdFx0XHRyZXR1cm4gY3NlLnN0YXJ0ICsgdW5lc2NhcGUoY29kZSkgKyBjc2UuZW5kO1xuXHRcdFx0fSlcblx0XHRcdC5yZXBsYWNlKGMuZW5jb2RlIHx8IHNraXAsIGZ1bmN0aW9uKG0sIGNvZGUpIHtcblx0XHRcdFx0bmVlZGh0bWxlbmNvZGUgPSB0cnVlO1xuXHRcdFx0XHRyZXR1cm4gY3NlLnN0YXJ0ZW5jb2RlICsgdW5lc2NhcGUoY29kZSkgKyBjc2UuZW5kO1xuXHRcdFx0fSlcblx0XHRcdC5yZXBsYWNlKGMuY29uZGl0aW9uYWwgfHwgc2tpcCwgZnVuY3Rpb24obSwgZWxzZWNhc2UsIGNvZGUpIHtcblx0XHRcdFx0cmV0dXJuIGVsc2VjYXNlID9cblx0XHRcdFx0XHQoY29kZSA/IFwiJzt9ZWxzZSBpZihcIiArIHVuZXNjYXBlKGNvZGUpICsgXCIpe291dCs9J1wiIDogXCInO31lbHNle291dCs9J1wiKSA6XG5cdFx0XHRcdFx0KGNvZGUgPyBcIic7aWYoXCIgKyB1bmVzY2FwZShjb2RlKSArIFwiKXtvdXQrPSdcIiA6IFwiJzt9b3V0Kz0nXCIpO1xuXHRcdFx0fSlcblx0XHRcdC5yZXBsYWNlKGMuaXRlcmF0ZSB8fCBza2lwLCBmdW5jdGlvbihtLCBpdGVyYXRlLCB2bmFtZSwgaW5hbWUpIHtcblx0XHRcdFx0aWYgKCFpdGVyYXRlKSByZXR1cm4gXCInO30gfSBvdXQrPSdcIjtcblx0XHRcdFx0c2lkKz0xOyBpbmR2PWluYW1lIHx8IFwiaVwiK3NpZDsgaXRlcmF0ZT11bmVzY2FwZShpdGVyYXRlKTtcblx0XHRcdFx0cmV0dXJuIFwiJzt2YXIgYXJyXCIrc2lkK1wiPVwiK2l0ZXJhdGUrXCI7aWYoYXJyXCIrc2lkK1wiKXt2YXIgXCIrdm5hbWUrXCIsXCIraW5kditcIj0tMSxsXCIrc2lkK1wiPWFyclwiK3NpZCtcIi5sZW5ndGgtMTt3aGlsZShcIitpbmR2K1wiPGxcIitzaWQrXCIpe1wiXG5cdFx0XHRcdFx0K3ZuYW1lK1wiPWFyclwiK3NpZCtcIltcIitpbmR2K1wiKz0xXTtvdXQrPSdcIjtcblx0XHRcdH0pXG5cdFx0XHQucmVwbGFjZShjLmV2YWx1YXRlIHx8IHNraXAsIGZ1bmN0aW9uKG0sIGNvZGUpIHtcblx0XHRcdFx0cmV0dXJuIFwiJztcIiArIHVuZXNjYXBlKGNvZGUpICsgXCJvdXQrPSdcIjtcblx0XHRcdH0pXG5cdFx0XHQrIFwiJztyZXR1cm4gb3V0O1wiKVxuXHRcdFx0LnJlcGxhY2UoL1xcbi9nLCBcIlxcXFxuXCIpLnJlcGxhY2UoL1xcdC9nLCAnXFxcXHQnKS5yZXBsYWNlKC9cXHIvZywgXCJcXFxcclwiKVxuXHRcdFx0LnJlcGxhY2UoLyhcXHN8O3xcXH18XnxcXHspb3V0XFwrPScnOy9nLCAnJDEnKS5yZXBsYWNlKC9cXCsnJy9nLCBcIlwiKTtcblx0XHRcdC8vLnJlcGxhY2UoLyhcXHN8O3xcXH18XnxcXHspb3V0XFwrPScnXFwrL2csJyQxb3V0Kz0nKTtcblxuXHRcdGlmIChuZWVkaHRtbGVuY29kZSkge1xuXHRcdFx0aWYgKCFjLnNlbGZjb250YWluZWQgJiYgX2dsb2JhbHMgJiYgIV9nbG9iYWxzLl9lbmNvZGVIVE1MKSBfZ2xvYmFscy5fZW5jb2RlSFRNTCA9IGRvVC5lbmNvZGVIVE1MU291cmNlKGMuZG9Ob3RTa2lwRW5jb2RlZCk7XG5cdFx0XHRzdHIgPSBcInZhciBlbmNvZGVIVE1MID0gdHlwZW9mIF9lbmNvZGVIVE1MICE9PSAndW5kZWZpbmVkJyA/IF9lbmNvZGVIVE1MIDogKFwiXG5cdFx0XHRcdCsgZG9ULmVuY29kZUhUTUxTb3VyY2UudG9TdHJpbmcoKSArIFwiKFwiICsgKGMuZG9Ob3RTa2lwRW5jb2RlZCB8fCAnJykgKyBcIikpO1wiXG5cdFx0XHRcdCsgc3RyO1xuXHRcdH1cblx0XHR0cnkge1xuXHRcdFx0cmV0dXJuIG5ldyBGdW5jdGlvbihjLnZhcm5hbWUsIHN0cik7XG5cdFx0fSBjYXRjaCAoZSkge1xuXHRcdFx0aWYgKHR5cGVvZiBjb25zb2xlICE9PSBcInVuZGVmaW5lZFwiKSBjb25zb2xlLmxvZyhcIkNvdWxkIG5vdCBjcmVhdGUgYSB0ZW1wbGF0ZSBmdW5jdGlvbjogXCIgKyBzdHIpO1xuXHRcdFx0dGhyb3cgZTtcblx0XHR9XG5cdH07XG5cblx0ZG9ULmNvbXBpbGUgPSBmdW5jdGlvbih0bXBsLCBkZWYpIHtcblx0XHRyZXR1cm4gZG9ULnRlbXBsYXRlKHRtcGwsIG51bGwsIGRlZik7XG5cdH07XG59KCkpO1xuIiwiLyogZG9UICsgYXV0by1jb21waWxhdGlvbiBvZiBkb1QgdGVtcGxhdGVzXG4gKlxuICogMjAxMiwgTGF1cmEgRG9rdG9yb3ZhLCBodHRwczovL2dpdGh1Yi5jb20vb2xhZG8vZG9UXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgTUlUIGxpY2Vuc2VcbiAqXG4gKiBDb21waWxlcyAuZGVmLCAuZG90LCAuanN0IGZpbGVzIGZvdW5kIHVuZGVyIHRoZSBzcGVjaWZpZWQgcGF0aC5cbiAqIEl0IGlnbm9yZXMgc3ViLWRpcmVjdG9yaWVzLlxuICogVGVtcGxhdGUgZmlsZXMgY2FuIGhhdmUgbXVsdGlwbGUgZXh0ZW5zaW9ucyBhdCB0aGUgc2FtZSB0aW1lLlxuICogRmlsZXMgd2l0aCAuZGVmIGV4dGVuc2lvbiBjYW4gYmUgaW5jbHVkZWQgaW4gb3RoZXIgZmlsZXMgdmlhIHt7I2RlZi5uYW1lfX1cbiAqIEZpbGVzIHdpdGggLmRvdCBleHRlbnNpb24gYXJlIGNvbXBpbGVkIGludG8gZnVuY3Rpb25zIHdpdGggdGhlIHNhbWUgbmFtZSBhbmRcbiAqIGNhbiBiZSBhY2Nlc3NlZCBhcyByZW5kZXJlci5maWxlbmFtZVxuICogRmlsZXMgd2l0aCAuanN0IGV4dGVuc2lvbiBhcmUgY29tcGlsZWQgaW50byAuanMgZmlsZXMuIFByb2R1Y2VkIC5qcyBmaWxlIGNhbiBiZVxuICogbG9hZGVkIGFzIGEgY29tbW9uSlMsIEFNRCBtb2R1bGUsIG9yIGp1c3QgaW5zdGFsbGVkIGludG8gYSBnbG9iYWwgdmFyaWFibGVcbiAqIChkZWZhdWx0IGlzIHNldCB0byB3aW5kb3cucmVuZGVyKS5cbiAqIEFsbCBpbmxpbmUgZGVmaW5lcyBkZWZpbmVkIGluIHRoZSAuanN0IGZpbGUgYXJlXG4gKiBjb21waWxlZCBpbnRvIHNlcGFyYXRlIGZ1bmN0aW9ucyBhbmQgYXJlIGF2YWlsYWJsZSB2aWEgX3JlbmRlci5maWxlbmFtZS5kZWZpbmVuYW1lXG4gKlxuICogQmFzaWMgdXNhZ2U6XG4gKiB2YXIgZG90cyA9IHJlcXVpcmUoXCJkb3RcIikucHJvY2Vzcyh7cGF0aDogXCIuL3ZpZXdzXCJ9KTtcbiAqIGRvdHMubXl0ZW1wbGF0ZSh7Zm9vOlwiaGVsbG8gd29ybGRcIn0pO1xuICpcbiAqIFRoZSBhYm92ZSBzbmlwcGV0IHdpbGw6XG4gKiAxLiBDb21waWxlIGFsbCB0ZW1wbGF0ZXMgaW4gdmlld3MgZm9sZGVyICguZG90LCAuZGVmLCAuanN0KVxuICogMi4gUGxhY2UgLmpzIGZpbGVzIGNvbXBpbGVkIGZyb20gLmpzdCB0ZW1wbGF0ZXMgaW50byB0aGUgc2FtZSBmb2xkZXIuXG4gKiAgICBUaGVzZSBmaWxlcyBjYW4gYmUgdXNlZCB3aXRoIHJlcXVpcmUsIGkuZS4gcmVxdWlyZShcIi4vdmlld3MvbXl0ZW1wbGF0ZVwiKS5cbiAqIDMuIFJldHVybiBhbiBvYmplY3Qgd2l0aCBmdW5jdGlvbnMgY29tcGlsZWQgZnJvbSAuZG90IHRlbXBsYXRlcyBhcyBpdHMgcHJvcGVydGllcy5cbiAqIDQuIFJlbmRlciBteXRlbXBsYXRlIHRlbXBsYXRlLlxuICovXG5cbnZhciBmcyA9IHJlcXVpcmUoXCJmc1wiKSxcblx0ZG9UID0gbW9kdWxlLmV4cG9ydHMgPSByZXF1aXJlKFwiLi9kb1RcIik7XG5cbmRvVC5wcm9jZXNzID0gZnVuY3Rpb24ob3B0aW9ucykge1xuXHQvL3BhdGgsIGRlc3RpbmF0aW9uLCBnbG9iYWwsIHJlbmRlcm1vZHVsZSwgdGVtcGxhdGVTZXR0aW5nc1xuXHRyZXR1cm4gbmV3IEluc3RhbGxEb3RzKG9wdGlvbnMpLmNvbXBpbGVBbGwoKTtcbn07XG5cbmZ1bmN0aW9uIEluc3RhbGxEb3RzKG8pIHtcblx0dGhpcy5fX3BhdGggXHRcdD0gby5wYXRoIHx8IFwiLi9cIjtcblx0aWYgKHRoaXMuX19wYXRoW3RoaXMuX19wYXRoLmxlbmd0aC0xXSAhPT0gJy8nKSB0aGlzLl9fcGF0aCArPSAnLyc7XG5cdHRoaXMuX19kZXN0aW5hdGlvblx0PSBvLmRlc3RpbmF0aW9uIHx8IHRoaXMuX19wYXRoO1xuXHRpZiAodGhpcy5fX2Rlc3RpbmF0aW9uW3RoaXMuX19kZXN0aW5hdGlvbi5sZW5ndGgtMV0gIT09ICcvJykgdGhpcy5fX2Rlc3RpbmF0aW9uICs9ICcvJztcblx0dGhpcy5fX2dsb2JhbFx0XHQ9IG8uZ2xvYmFsIHx8IFwid2luZG93LnJlbmRlclwiO1xuXHR0aGlzLl9fcmVuZGVybW9kdWxlXHQ9IG8ucmVuZGVybW9kdWxlIHx8IHt9O1xuXHR0aGlzLl9fc2V0dGluZ3MgXHQ9IG8udGVtcGxhdGVTZXR0aW5ncyA/IGNvcHkoby50ZW1wbGF0ZVNldHRpbmdzLCBjb3B5KGRvVC50ZW1wbGF0ZVNldHRpbmdzKSkgOiB1bmRlZmluZWQ7XG5cdHRoaXMuX19pbmNsdWRlc1x0XHQ9IHt9O1xufVxuXG5JbnN0YWxsRG90cy5wcm90b3R5cGUuY29tcGlsZVRvRmlsZSA9IGZ1bmN0aW9uKHBhdGgsIHRlbXBsYXRlLCBkZWYpIHtcblx0ZGVmID0gZGVmIHx8IHt9O1xuXHR2YXIgbW9kdWxlbmFtZSA9IHBhdGguc3Vic3RyaW5nKHBhdGgubGFzdEluZGV4T2YoXCIvXCIpKzEsIHBhdGgubGFzdEluZGV4T2YoXCIuXCIpKVxuXHRcdCwgZGVmcyA9IGNvcHkodGhpcy5fX2luY2x1ZGVzLCBjb3B5KGRlZikpXG5cdFx0LCBzZXR0aW5ncyA9IHRoaXMuX19zZXR0aW5ncyB8fCBkb1QudGVtcGxhdGVTZXR0aW5nc1xuXHRcdCwgY29tcGlsZW9wdGlvbnMgPSBjb3B5KHNldHRpbmdzKVxuXHRcdCwgZGVmYXVsdGNvbXBpbGVkID0gZG9ULnRlbXBsYXRlKHRlbXBsYXRlLCBzZXR0aW5ncywgZGVmcylcblx0XHQsIGV4cG9ydHMgPSBbXVxuXHRcdCwgY29tcGlsZWQgPSBcIlwiXG5cdFx0LCBmbjtcblxuXHRmb3IgKHZhciBwcm9wZXJ0eSBpbiBkZWZzKSB7XG5cdFx0aWYgKGRlZnNbcHJvcGVydHldICE9PSBkZWZbcHJvcGVydHldICYmIGRlZnNbcHJvcGVydHldICE9PSB0aGlzLl9faW5jbHVkZXNbcHJvcGVydHldKSB7XG5cdFx0XHRmbiA9IHVuZGVmaW5lZDtcblx0XHRcdGlmICh0eXBlb2YgZGVmc1twcm9wZXJ0eV0gPT09ICdzdHJpbmcnKSB7XG5cdFx0XHRcdGZuID0gZG9ULnRlbXBsYXRlKGRlZnNbcHJvcGVydHldLCBzZXR0aW5ncywgZGVmcyk7XG5cdFx0XHR9IGVsc2UgaWYgKHR5cGVvZiBkZWZzW3Byb3BlcnR5XSA9PT0gJ2Z1bmN0aW9uJykge1xuXHRcdFx0XHRmbiA9IGRlZnNbcHJvcGVydHldO1xuXHRcdFx0fSBlbHNlIGlmIChkZWZzW3Byb3BlcnR5XS5hcmcpIHtcblx0XHRcdFx0Y29tcGlsZW9wdGlvbnMudmFybmFtZSA9IGRlZnNbcHJvcGVydHldLmFyZztcblx0XHRcdFx0Zm4gPSBkb1QudGVtcGxhdGUoZGVmc1twcm9wZXJ0eV0udGV4dCwgY29tcGlsZW9wdGlvbnMsIGRlZnMpO1xuXHRcdFx0fVxuXHRcdFx0aWYgKGZuKSB7XG5cdFx0XHRcdGNvbXBpbGVkICs9IGZuLnRvU3RyaW5nKCkucmVwbGFjZSgnYW5vbnltb3VzJywgcHJvcGVydHkpO1xuXHRcdFx0XHRleHBvcnRzLnB1c2gocHJvcGVydHkpO1xuXHRcdFx0fVxuXHRcdH1cblx0fVxuXHRjb21waWxlZCArPSBkZWZhdWx0Y29tcGlsZWQudG9TdHJpbmcoKS5yZXBsYWNlKCdhbm9ueW1vdXMnLCBtb2R1bGVuYW1lKTtcblx0ZnMud3JpdGVGaWxlU3luYyhwYXRoLCBcIihmdW5jdGlvbigpe1wiICsgY29tcGlsZWRcblx0XHQrIFwidmFyIGl0c2VsZj1cIiArIG1vZHVsZW5hbWUgKyBcIiwgX2VuY29kZUhUTUw9KFwiICsgZG9ULmVuY29kZUhUTUxTb3VyY2UudG9TdHJpbmcoKSArIFwiKFwiICsgKHNldHRpbmdzLmRvTm90U2tpcEVuY29kZWQgfHwgJycpICsgXCIpKTtcIlxuXHRcdCsgYWRkZXhwb3J0cyhleHBvcnRzKVxuXHRcdCsgXCJpZih0eXBlb2YgbW9kdWxlIT09J3VuZGVmaW5lZCcgJiYgbW9kdWxlLmV4cG9ydHMpIG1vZHVsZS5leHBvcnRzPWl0c2VsZjtlbHNlIGlmKHR5cGVvZiBkZWZpbmU9PT0nZnVuY3Rpb24nKWRlZmluZShmdW5jdGlvbigpe3JldHVybiBpdHNlbGY7fSk7ZWxzZSB7XCJcblx0XHQrIHRoaXMuX19nbG9iYWwgKyBcIj1cIiArIHRoaXMuX19nbG9iYWwgKyBcInx8e307XCIgKyB0aGlzLl9fZ2xvYmFsICsgXCJbJ1wiICsgbW9kdWxlbmFtZSArIFwiJ109aXRzZWxmO319KCkpO1wiKTtcbn07XG5cbmZ1bmN0aW9uIGFkZGV4cG9ydHMoZXhwb3J0cykge1xuXHRmb3IgKHZhciByZXQgPScnLCBpPTA7IGk8IGV4cG9ydHMubGVuZ3RoOyBpKyspIHtcblx0XHRyZXQgKz0gXCJpdHNlbGYuXCIgKyBleHBvcnRzW2ldKyBcIj1cIiArIGV4cG9ydHNbaV0rXCI7XCI7XG5cdH1cblx0cmV0dXJuIHJldDtcbn1cblxuZnVuY3Rpb24gY29weShvLCB0bykge1xuXHR0byA9IHRvIHx8IHt9O1xuXHRmb3IgKHZhciBwcm9wZXJ0eSBpbiBvKSB7XG5cdFx0dG9bcHJvcGVydHldID0gb1twcm9wZXJ0eV07XG5cdH1cblx0cmV0dXJuIHRvO1xufVxuXG5mdW5jdGlvbiByZWFkZGF0YShwYXRoKSB7XG5cdHZhciBkYXRhID0gZnMucmVhZEZpbGVTeW5jKHBhdGgpO1xuXHRpZiAoZGF0YSkgcmV0dXJuIGRhdGEudG9TdHJpbmcoKTtcblx0Y29uc29sZS5sb2coXCJwcm9ibGVtcyB3aXRoIFwiICsgcGF0aCk7XG59XG5cbkluc3RhbGxEb3RzLnByb3RvdHlwZS5jb21waWxlUGF0aCA9IGZ1bmN0aW9uKHBhdGgpIHtcblx0dmFyIGRhdGEgPSByZWFkZGF0YShwYXRoKTtcblx0aWYgKGRhdGEpIHtcblx0XHRyZXR1cm4gZG9ULnRlbXBsYXRlKGRhdGEsXG5cdFx0XHRcdFx0dGhpcy5fX3NldHRpbmdzIHx8IGRvVC50ZW1wbGF0ZVNldHRpbmdzLFxuXHRcdFx0XHRcdGNvcHkodGhpcy5fX2luY2x1ZGVzKSk7XG5cdH1cbn07XG5cbkluc3RhbGxEb3RzLnByb3RvdHlwZS5jb21waWxlQWxsID0gZnVuY3Rpb24oKSB7XG5cdGNvbnNvbGUubG9nKFwiQ29tcGlsaW5nIGFsbCBkb1QgdGVtcGxhdGVzLi4uXCIpO1xuXG5cdHZhciBkZWZGb2xkZXIgPSB0aGlzLl9fcGF0aCxcblx0XHRzb3VyY2VzID0gZnMucmVhZGRpclN5bmMoZGVmRm9sZGVyKSxcblx0XHRrLCBsLCBuYW1lO1xuXG5cdGZvciggayA9IDAsIGwgPSBzb3VyY2VzLmxlbmd0aDsgayA8IGw7IGsrKykge1xuXHRcdG5hbWUgPSBzb3VyY2VzW2tdO1xuXHRcdGlmICgvXFwuZGVmKFxcLmRvdHxcXC5qc3QpPyQvLnRlc3QobmFtZSkpIHtcblx0XHRcdGNvbnNvbGUubG9nKFwiTG9hZGVkIGRlZiBcIiArIG5hbWUpO1xuXHRcdFx0dGhpcy5fX2luY2x1ZGVzW25hbWUuc3Vic3RyaW5nKDAsIG5hbWUuaW5kZXhPZignLicpKV0gPSByZWFkZGF0YShkZWZGb2xkZXIgKyBuYW1lKTtcblx0XHR9XG5cdH1cblxuXHRmb3IoIGsgPSAwLCBsID0gc291cmNlcy5sZW5ndGg7IGsgPCBsOyBrKyspIHtcblx0XHRuYW1lID0gc291cmNlc1trXTtcblx0XHRpZiAoL1xcLmRvdChcXC5kZWZ8XFwuanN0KT8kLy50ZXN0KG5hbWUpKSB7XG5cdFx0XHRjb25zb2xlLmxvZyhcIkNvbXBpbGluZyBcIiArIG5hbWUgKyBcIiB0byBmdW5jdGlvblwiKTtcblx0XHRcdHRoaXMuX19yZW5kZXJtb2R1bGVbbmFtZS5zdWJzdHJpbmcoMCwgbmFtZS5pbmRleE9mKCcuJykpXSA9IHRoaXMuY29tcGlsZVBhdGgoZGVmRm9sZGVyICsgbmFtZSk7XG5cdFx0fVxuXHRcdGlmICgvXFwuanN0KFxcLmRvdHxcXC5kZWYpPyQvLnRlc3QobmFtZSkpIHtcblx0XHRcdGNvbnNvbGUubG9nKFwiQ29tcGlsaW5nIFwiICsgbmFtZSArIFwiIHRvIGZpbGVcIik7XG5cdFx0XHR0aGlzLmNvbXBpbGVUb0ZpbGUodGhpcy5fX2Rlc3RpbmF0aW9uICsgbmFtZS5zdWJzdHJpbmcoMCwgbmFtZS5pbmRleE9mKCcuJykpICsgJy5qcycsXG5cdFx0XHRcdFx0cmVhZGRhdGEoZGVmRm9sZGVyICsgbmFtZSkpO1xuXHRcdH1cblx0fVxuXHRyZXR1cm4gdGhpcy5fX3JlbmRlcm1vZHVsZTtcbn07XG4iLCIndXNlIHN0cmljdCc7XG5cbm1vZHVsZS5leHBvcnRzID0gcmVxdWlyZSgnLi9pcy1pbXBsZW1lbnRlZCcpKCkgPyBTeW1ib2wgOiByZXF1aXJlKCcuL3BvbHlmaWxsJyk7XG4iLCIndXNlIHN0cmljdCc7XG5cbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gKCkge1xuXHR2YXIgc3ltYm9sO1xuXHRpZiAodHlwZW9mIFN5bWJvbCAhPT0gJ2Z1bmN0aW9uJykgcmV0dXJuIGZhbHNlO1xuXHRzeW1ib2wgPSBTeW1ib2woJ3Rlc3Qgc3ltYm9sJyk7XG5cdHRyeSB7IFN0cmluZyhzeW1ib2wpOyB9IGNhdGNoIChlKSB7IHJldHVybiBmYWxzZTsgfVxuXHRpZiAodHlwZW9mIFN5bWJvbC5pdGVyYXRvciA9PT0gJ3N5bWJvbCcpIHJldHVybiB0cnVlO1xuXG5cdC8vIFJldHVybiAndHJ1ZScgZm9yIHBvbHlmaWxsc1xuXHRpZiAodHlwZW9mIFN5bWJvbC5pc0NvbmNhdFNwcmVhZGFibGUgIT09ICdvYmplY3QnKSByZXR1cm4gZmFsc2U7XG5cdGlmICh0eXBlb2YgU3ltYm9sLmlzUmVnRXhwICE9PSAnb2JqZWN0JykgcmV0dXJuIGZhbHNlO1xuXHRpZiAodHlwZW9mIFN5bWJvbC5pdGVyYXRvciAhPT0gJ29iamVjdCcpIHJldHVybiBmYWxzZTtcblx0aWYgKHR5cGVvZiBTeW1ib2wudG9QcmltaXRpdmUgIT09ICdvYmplY3QnKSByZXR1cm4gZmFsc2U7XG5cdGlmICh0eXBlb2YgU3ltYm9sLnRvU3RyaW5nVGFnICE9PSAnb2JqZWN0JykgcmV0dXJuIGZhbHNlO1xuXHRpZiAodHlwZW9mIFN5bWJvbC51bnNjb3BhYmxlcyAhPT0gJ29iamVjdCcpIHJldHVybiBmYWxzZTtcblxuXHRyZXR1cm4gdHJ1ZTtcbn07XG4iLCIndXNlIHN0cmljdCc7XG5cbnZhciBhc3NpZ24gICAgICAgID0gcmVxdWlyZSgnZXM1LWV4dC9vYmplY3QvYXNzaWduJylcbiAgLCBub3JtYWxpemVPcHRzID0gcmVxdWlyZSgnZXM1LWV4dC9vYmplY3Qvbm9ybWFsaXplLW9wdGlvbnMnKVxuICAsIGlzQ2FsbGFibGUgICAgPSByZXF1aXJlKCdlczUtZXh0L29iamVjdC9pcy1jYWxsYWJsZScpXG4gICwgY29udGFpbnMgICAgICA9IHJlcXVpcmUoJ2VzNS1leHQvc3RyaW5nLyMvY29udGFpbnMnKVxuXG4gICwgZDtcblxuZCA9IG1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gKGRzY3IsIHZhbHVlLyosIG9wdGlvbnMqLykge1xuXHR2YXIgYywgZSwgdywgb3B0aW9ucywgZGVzYztcblx0aWYgKChhcmd1bWVudHMubGVuZ3RoIDwgMikgfHwgKHR5cGVvZiBkc2NyICE9PSAnc3RyaW5nJykpIHtcblx0XHRvcHRpb25zID0gdmFsdWU7XG5cdFx0dmFsdWUgPSBkc2NyO1xuXHRcdGRzY3IgPSBudWxsO1xuXHR9IGVsc2Uge1xuXHRcdG9wdGlvbnMgPSBhcmd1bWVudHNbMl07XG5cdH1cblx0aWYgKGRzY3IgPT0gbnVsbCkge1xuXHRcdGMgPSB3ID0gdHJ1ZTtcblx0XHRlID0gZmFsc2U7XG5cdH0gZWxzZSB7XG5cdFx0YyA9IGNvbnRhaW5zLmNhbGwoZHNjciwgJ2MnKTtcblx0XHRlID0gY29udGFpbnMuY2FsbChkc2NyLCAnZScpO1xuXHRcdHcgPSBjb250YWlucy5jYWxsKGRzY3IsICd3Jyk7XG5cdH1cblxuXHRkZXNjID0geyB2YWx1ZTogdmFsdWUsIGNvbmZpZ3VyYWJsZTogYywgZW51bWVyYWJsZTogZSwgd3JpdGFibGU6IHcgfTtcblx0cmV0dXJuICFvcHRpb25zID8gZGVzYyA6IGFzc2lnbihub3JtYWxpemVPcHRzKG9wdGlvbnMpLCBkZXNjKTtcbn07XG5cbmQuZ3MgPSBmdW5jdGlvbiAoZHNjciwgZ2V0LCBzZXQvKiwgb3B0aW9ucyovKSB7XG5cdHZhciBjLCBlLCBvcHRpb25zLCBkZXNjO1xuXHRpZiAodHlwZW9mIGRzY3IgIT09ICdzdHJpbmcnKSB7XG5cdFx0b3B0aW9ucyA9IHNldDtcblx0XHRzZXQgPSBnZXQ7XG5cdFx0Z2V0ID0gZHNjcjtcblx0XHRkc2NyID0gbnVsbDtcblx0fSBlbHNlIHtcblx0XHRvcHRpb25zID0gYXJndW1lbnRzWzNdO1xuXHR9XG5cdGlmIChnZXQgPT0gbnVsbCkge1xuXHRcdGdldCA9IHVuZGVmaW5lZDtcblx0fSBlbHNlIGlmICghaXNDYWxsYWJsZShnZXQpKSB7XG5cdFx0b3B0aW9ucyA9IGdldDtcblx0XHRnZXQgPSBzZXQgPSB1bmRlZmluZWQ7XG5cdH0gZWxzZSBpZiAoc2V0ID09IG51bGwpIHtcblx0XHRzZXQgPSB1bmRlZmluZWQ7XG5cdH0gZWxzZSBpZiAoIWlzQ2FsbGFibGUoc2V0KSkge1xuXHRcdG9wdGlvbnMgPSBzZXQ7XG5cdFx0c2V0ID0gdW5kZWZpbmVkO1xuXHR9XG5cdGlmIChkc2NyID09IG51bGwpIHtcblx0XHRjID0gdHJ1ZTtcblx0XHRlID0gZmFsc2U7XG5cdH0gZWxzZSB7XG5cdFx0YyA9IGNvbnRhaW5zLmNhbGwoZHNjciwgJ2MnKTtcblx0XHRlID0gY29udGFpbnMuY2FsbChkc2NyLCAnZScpO1xuXHR9XG5cblx0ZGVzYyA9IHsgZ2V0OiBnZXQsIHNldDogc2V0LCBjb25maWd1cmFibGU6IGMsIGVudW1lcmFibGU6IGUgfTtcblx0cmV0dXJuICFvcHRpb25zID8gZGVzYyA6IGFzc2lnbihub3JtYWxpemVPcHRzKG9wdGlvbnMpLCBkZXNjKTtcbn07XG4iLCIndXNlIHN0cmljdCc7XG5cbm1vZHVsZS5leHBvcnRzID0gcmVxdWlyZSgnLi9pcy1pbXBsZW1lbnRlZCcpKClcblx0PyBPYmplY3QuYXNzaWduXG5cdDogcmVxdWlyZSgnLi9zaGltJyk7XG4iLCIndXNlIHN0cmljdCc7XG5cbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gKCkge1xuXHR2YXIgYXNzaWduID0gT2JqZWN0LmFzc2lnbiwgb2JqO1xuXHRpZiAodHlwZW9mIGFzc2lnbiAhPT0gJ2Z1bmN0aW9uJykgcmV0dXJuIGZhbHNlO1xuXHRvYmogPSB7IGZvbzogJ3JheicgfTtcblx0YXNzaWduKG9iaiwgeyBiYXI6ICdkd2EnIH0sIHsgdHJ6eTogJ3RyenknIH0pO1xuXHRyZXR1cm4gKG9iai5mb28gKyBvYmouYmFyICsgb2JqLnRyenkpID09PSAncmF6ZHdhdHJ6eSc7XG59O1xuIiwiJ3VzZSBzdHJpY3QnO1xuXG52YXIga2V5cyAgPSByZXF1aXJlKCcuLi9rZXlzJylcbiAgLCB2YWx1ZSA9IHJlcXVpcmUoJy4uL3ZhbGlkLXZhbHVlJylcblxuICAsIG1heCA9IE1hdGgubWF4O1xuXG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uIChkZXN0LCBzcmMvKiwg4oCmc3JjbiovKSB7XG5cdHZhciBlcnJvciwgaSwgbCA9IG1heChhcmd1bWVudHMubGVuZ3RoLCAyKSwgYXNzaWduO1xuXHRkZXN0ID0gT2JqZWN0KHZhbHVlKGRlc3QpKTtcblx0YXNzaWduID0gZnVuY3Rpb24gKGtleSkge1xuXHRcdHRyeSB7IGRlc3Rba2V5XSA9IHNyY1trZXldOyB9IGNhdGNoIChlKSB7XG5cdFx0XHRpZiAoIWVycm9yKSBlcnJvciA9IGU7XG5cdFx0fVxuXHR9O1xuXHRmb3IgKGkgPSAxOyBpIDwgbDsgKytpKSB7XG5cdFx0c3JjID0gYXJndW1lbnRzW2ldO1xuXHRcdGtleXMoc3JjKS5mb3JFYWNoKGFzc2lnbik7XG5cdH1cblx0aWYgKGVycm9yICE9PSB1bmRlZmluZWQpIHRocm93IGVycm9yO1xuXHRyZXR1cm4gZGVzdDtcbn07XG4iLCIvLyBEZXByZWNhdGVkXG5cbid1c2Ugc3RyaWN0JztcblxubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiAob2JqKSB7IHJldHVybiB0eXBlb2Ygb2JqID09PSAnZnVuY3Rpb24nOyB9O1xuIiwiJ3VzZSBzdHJpY3QnO1xuXG5tb2R1bGUuZXhwb3J0cyA9IHJlcXVpcmUoJy4vaXMtaW1wbGVtZW50ZWQnKSgpXG5cdD8gT2JqZWN0LmtleXNcblx0OiByZXF1aXJlKCcuL3NoaW0nKTtcbiIsIid1c2Ugc3RyaWN0JztcblxubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiAoKSB7XG5cdHRyeSB7XG5cdFx0T2JqZWN0LmtleXMoJ3ByaW1pdGl2ZScpO1xuXHRcdHJldHVybiB0cnVlO1xuXHR9IGNhdGNoIChlKSB7IHJldHVybiBmYWxzZTsgfVxufTtcbiIsIid1c2Ugc3RyaWN0JztcblxudmFyIGtleXMgPSBPYmplY3Qua2V5cztcblxubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiAob2JqZWN0KSB7XG5cdHJldHVybiBrZXlzKG9iamVjdCA9PSBudWxsID8gb2JqZWN0IDogT2JqZWN0KG9iamVjdCkpO1xufTtcbiIsIid1c2Ugc3RyaWN0JztcblxudmFyIGFzc2lnbiA9IHJlcXVpcmUoJy4vYXNzaWduJylcblxuICAsIGZvckVhY2ggPSBBcnJheS5wcm90b3R5cGUuZm9yRWFjaFxuICAsIGNyZWF0ZSA9IE9iamVjdC5jcmVhdGUsIGdldFByb3RvdHlwZU9mID0gT2JqZWN0LmdldFByb3RvdHlwZU9mXG5cbiAgLCBwcm9jZXNzO1xuXG5wcm9jZXNzID0gZnVuY3Rpb24gKHNyYywgb2JqKSB7XG5cdHZhciBwcm90byA9IGdldFByb3RvdHlwZU9mKHNyYyk7XG5cdHJldHVybiBhc3NpZ24ocHJvdG8gPyBwcm9jZXNzKHByb3RvLCBvYmopIDogb2JqLCBzcmMpO1xufTtcblxubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiAob3B0aW9ucy8qLCDigKZvcHRpb25zKi8pIHtcblx0dmFyIHJlc3VsdCA9IGNyZWF0ZShudWxsKTtcblx0Zm9yRWFjaC5jYWxsKGFyZ3VtZW50cywgZnVuY3Rpb24gKG9wdGlvbnMpIHtcblx0XHRpZiAob3B0aW9ucyA9PSBudWxsKSByZXR1cm47XG5cdFx0cHJvY2VzcyhPYmplY3Qob3B0aW9ucyksIHJlc3VsdCk7XG5cdH0pO1xuXHRyZXR1cm4gcmVzdWx0O1xufTtcbiIsIid1c2Ugc3RyaWN0JztcblxubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiAodmFsdWUpIHtcblx0aWYgKHZhbHVlID09IG51bGwpIHRocm93IG5ldyBUeXBlRXJyb3IoXCJDYW5ub3QgdXNlIG51bGwgb3IgdW5kZWZpbmVkXCIpO1xuXHRyZXR1cm4gdmFsdWU7XG59O1xuIiwiJ3VzZSBzdHJpY3QnO1xuXG5tb2R1bGUuZXhwb3J0cyA9IHJlcXVpcmUoJy4vaXMtaW1wbGVtZW50ZWQnKSgpXG5cdD8gU3RyaW5nLnByb3RvdHlwZS5jb250YWluc1xuXHQ6IHJlcXVpcmUoJy4vc2hpbScpO1xuIiwiJ3VzZSBzdHJpY3QnO1xuXG52YXIgc3RyID0gJ3JhemR3YXRyenknO1xuXG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uICgpIHtcblx0aWYgKHR5cGVvZiBzdHIuY29udGFpbnMgIT09ICdmdW5jdGlvbicpIHJldHVybiBmYWxzZTtcblx0cmV0dXJuICgoc3RyLmNvbnRhaW5zKCdkd2EnKSA9PT0gdHJ1ZSkgJiYgKHN0ci5jb250YWlucygnZm9vJykgPT09IGZhbHNlKSk7XG59O1xuIiwiJ3VzZSBzdHJpY3QnO1xuXG52YXIgaW5kZXhPZiA9IFN0cmluZy5wcm90b3R5cGUuaW5kZXhPZjtcblxubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiAoc2VhcmNoU3RyaW5nLyosIHBvc2l0aW9uKi8pIHtcblx0cmV0dXJuIGluZGV4T2YuY2FsbCh0aGlzLCBzZWFyY2hTdHJpbmcsIGFyZ3VtZW50c1sxXSkgPiAtMTtcbn07XG4iLCIndXNlIHN0cmljdCc7XG5cbnZhciBkID0gcmVxdWlyZSgnZCcpXG5cbiAgLCBjcmVhdGUgPSBPYmplY3QuY3JlYXRlLCBkZWZpbmVQcm9wZXJ0aWVzID0gT2JqZWN0LmRlZmluZVByb3BlcnRpZXNcbiAgLCBnZW5lcmF0ZU5hbWUsIFN5bWJvbDtcblxuZ2VuZXJhdGVOYW1lID0gKGZ1bmN0aW9uICgpIHtcblx0dmFyIGNyZWF0ZWQgPSBjcmVhdGUobnVsbCk7XG5cdHJldHVybiBmdW5jdGlvbiAoZGVzYykge1xuXHRcdHZhciBwb3N0Zml4ID0gMDtcblx0XHR3aGlsZSAoY3JlYXRlZFtkZXNjICsgKHBvc3RmaXggfHwgJycpXSkgKytwb3N0Zml4O1xuXHRcdGRlc2MgKz0gKHBvc3RmaXggfHwgJycpO1xuXHRcdGNyZWF0ZWRbZGVzY10gPSB0cnVlO1xuXHRcdHJldHVybiAnQEAnICsgZGVzYztcblx0fTtcbn0oKSk7XG5cbm1vZHVsZS5leHBvcnRzID0gU3ltYm9sID0gZnVuY3Rpb24gKGRlc2NyaXB0aW9uKSB7XG5cdHZhciBzeW1ib2w7XG5cdGlmICh0aGlzIGluc3RhbmNlb2YgU3ltYm9sKSB7XG5cdFx0dGhyb3cgbmV3IFR5cGVFcnJvcignVHlwZUVycm9yOiBTeW1ib2wgaXMgbm90IGEgY29uc3RydWN0b3InKTtcblx0fVxuXHRzeW1ib2wgPSBjcmVhdGUoU3ltYm9sLnByb3RvdHlwZSk7XG5cdGRlc2NyaXB0aW9uID0gKGRlc2NyaXB0aW9uID09PSB1bmRlZmluZWQgPyAnJyA6IFN0cmluZyhkZXNjcmlwdGlvbikpO1xuXHRyZXR1cm4gZGVmaW5lUHJvcGVydGllcyhzeW1ib2wsIHtcblx0XHRfX2Rlc2NyaXB0aW9uX186IGQoJycsIGRlc2NyaXB0aW9uKSxcblx0XHRfX25hbWVfXzogZCgnJywgZ2VuZXJhdGVOYW1lKGRlc2NyaXB0aW9uKSlcblx0fSk7XG59O1xuXG5PYmplY3QuZGVmaW5lUHJvcGVydGllcyhTeW1ib2wsIHtcblx0Y3JlYXRlOiBkKCcnLCBTeW1ib2woJ2NyZWF0ZScpKSxcblx0aGFzSW5zdGFuY2U6IGQoJycsIFN5bWJvbCgnaGFzSW5zdGFuY2UnKSksXG5cdGlzQ29uY2F0U3ByZWFkYWJsZTogZCgnJywgU3ltYm9sKCdpc0NvbmNhdFNwcmVhZGFibGUnKSksXG5cdGlzUmVnRXhwOiBkKCcnLCBTeW1ib2woJ2lzUmVnRXhwJykpLFxuXHRpdGVyYXRvcjogZCgnJywgU3ltYm9sKCdpdGVyYXRvcicpKSxcblx0dG9QcmltaXRpdmU6IGQoJycsIFN5bWJvbCgndG9QcmltaXRpdmUnKSksXG5cdHRvU3RyaW5nVGFnOiBkKCcnLCBTeW1ib2woJ3RvU3RyaW5nVGFnJykpLFxuXHR1bnNjb3BhYmxlczogZCgnJywgU3ltYm9sKCd1bnNjb3BhYmxlcycpKVxufSk7XG5cbmRlZmluZVByb3BlcnRpZXMoU3ltYm9sLnByb3RvdHlwZSwge1xuXHRwcm9wZXJUb1N0cmluZzogZChmdW5jdGlvbiAoKSB7XG5cdFx0cmV0dXJuICdTeW1ib2wgKCcgKyB0aGlzLl9fZGVzY3JpcHRpb25fXyArICcpJztcblx0fSksXG5cdHRvU3RyaW5nOiBkKCcnLCBmdW5jdGlvbiAoKSB7IHJldHVybiB0aGlzLl9fbmFtZV9fOyB9KVxufSk7XG5PYmplY3QuZGVmaW5lUHJvcGVydHkoU3ltYm9sLnByb3RvdHlwZSwgU3ltYm9sLnRvUHJpbWl0aXZlLCBkKCcnLFxuXHRmdW5jdGlvbiAoaGludCkge1xuXHRcdHRocm93IG5ldyBUeXBlRXJyb3IoXCJDb252ZXJzaW9uIG9mIHN5bWJvbCBvYmplY3RzIGlzIG5vdCBhbGxvd2VkXCIpO1xuXHR9KSk7XG5PYmplY3QuZGVmaW5lUHJvcGVydHkoU3ltYm9sLnByb3RvdHlwZSwgU3ltYm9sLnRvU3RyaW5nVGFnLCBkKCdjJywgJ1N5bWJvbCcpKTtcbiIsIlwidXNlIHN0cmljdFwiO1xuLyohXG4gKiBDb3B5cmlnaHQgKGMpIDIwMTMtMjAxNSA5ZWxlbWVudHMgR21iSFxuICpcbiAqIFJlbGVhc2VkIHVuZGVyIEF0dHJpYnV0aW9uLU5vbkNvbW1lcmNpYWwgMy4wIFVucG9ydGVkXG4gKiBodHRwOi8vY3JlYXRpdmVjb21tb25zLm9yZy9saWNlbnNlcy9ieS1uYy8zLjAvXG4gKlxuICogRm9yIGNvbW1lcmNpYWwgdXNlLCBwbGVhc2UgY29udGFjdCB1cyBhdCBjb250YWN0QDllbGVtZW50cy5jb21cbiAqL1xuXG4vKipcbiAqIFRoZSBhdmFpbGFibGUgcmVuZGVyIHR5cGVzXG4gKiBAZW51bSB7c3RyaW5nfVxuICogQGFsaWFzIEltZ2x5S2l0LlJlbmRlclR5cGVcbiAqL1xuZXhwb3J0IHZhciBSZW5kZXJUeXBlID0ge1xuICBJTUFHRTogXCJpbWFnZVwiLFxuICBEQVRBVVJMOiBcImRhdGEtdXJsXCJcbn07XG5cbi8qKlxuICogVGhlIGF2YWlsYWJsZSBvdXRwdXQgaW1hZ2UgZm9ybWF0c1xuICogQGVudW0ge3N0cmluZ31cbiAqIEBhbGlhcyBJbWdseUtpdC5JbWFnZUZvcm1hdFxuICovXG5leHBvcnQgdmFyIEltYWdlRm9ybWF0ID0ge1xuICBQTkc6IFwiaW1hZ2UvcG5nXCIsXG4gIEpQRUc6IFwiaW1hZ2UvanBlZ1wiXG59O1xuIiwiXCJ1c2Ugc3RyaWN0XCI7XG4vKiFcbiAqIENvcHlyaWdodCAoYykgMjAxMy0yMDE1IDllbGVtZW50cyBHbWJIXG4gKlxuICogUmVsZWFzZWQgdW5kZXIgQXR0cmlidXRpb24tTm9uQ29tbWVyY2lhbCAzLjAgVW5wb3J0ZWRcbiAqIGh0dHA6Ly9jcmVhdGl2ZWNvbW1vbnMub3JnL2xpY2Vuc2VzL2J5LW5jLzMuMC9cbiAqXG4gKiBGb3IgY29tbWVyY2lhbCB1c2UsIHBsZWFzZSBjb250YWN0IHVzIGF0IGNvbnRhY3RAOWVsZW1lbnRzLmNvbVxuICovXG5cbmltcG9ydCBfIGZyb20gXCJsb2Rhc2hcIjtcbmltcG9ydCBibHVlYmlyZCBmcm9tIFwiYmx1ZWJpcmRcIjtcbmltcG9ydCBSZW5kZXJJbWFnZSBmcm9tIFwiLi9saWIvcmVuZGVyLWltYWdlXCI7XG5pbXBvcnQgSW1hZ2VFeHBvcnRlciBmcm9tIFwiLi9saWIvaW1hZ2UtZXhwb3J0ZXJcIjtcbmltcG9ydCB7IFJlbmRlclR5cGUsIEltYWdlRm9ybWF0IH0gZnJvbSBcIi4vY29uc3RhbnRzXCI7XG5pbXBvcnQgVXRpbHMgZnJvbSBcIi4vbGliL3V0aWxzXCI7XG5cbi8vIERlZmF1bHQgVUlzXG5pbXBvcnQgTmlnaHRVSSBmcm9tIFwiLi91aS9uaWdodC91aVwiO1xuXG4vLyBEb24ndCBjYXRjaCBlcnJvcnNcbmJsdWViaXJkLm9uUG9zc2libHlVbmhhbmRsZWRSZWplY3Rpb24oKGVycm9yKSA9PiB7IHRocm93IGVycm9yOyB9KTtcblxuLyoqXG4gKiBAY2xhc3NcbiAqIEBwYXJhbSB7T2JqZWN0fSBvcHRpb25zXG4gKiBAcGFyYW0ge0hUTUxFbGVtZW50fSBbb3B0aW9ucy5jb250YWluZXJdIC0gU3BlY2lmaWVzIHdoZXJlIHRoZSBVSSBzaG91bGQgYmVcbiAqICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYWRkZWQgdG8uIElmIG5vbmUgaXMgZ2l2ZW4sIHRoZSBVSVxuICogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB3aWxsIGF1dG9tYXRpY2FsbHkgYmUgZGlzYWJsZWQuXG4gKiBAcGFyYW0ge0ltYWdlfSBvcHRpb25zLmltYWdlIC0gVGhlIHNvdXJjZSBpbWFnZVxuICovXG5jbGFzcyBJbWdseUtpdCB7XG4gIGNvbnN0cnVjdG9yIChvcHRpb25zKSB7XG5cbiAgICAvLyBgb3B0aW9uc2AgaXMgcmVxdWlyZWRcbiAgICBpZiAodHlwZW9mIG9wdGlvbnMgPT09IFwidW5kZWZpbmVkXCIpIHRocm93IG5ldyBFcnJvcihcIk5vIG9wdGlvbnMgZ2l2ZW4uXCIpO1xuXG4gICAgLy8gU2V0IGRlZmF1bHQgb3B0aW9uc1xuICAgIG9wdGlvbnMgPSBfLmRlZmF1bHRzKG9wdGlvbnMsIHtcbiAgICAgIGFzc2V0c1VybDogXCJhc3NldHNcIixcbiAgICAgIGNvbnRhaW5lcjogbnVsbCxcbiAgICAgIHVpOiB0cnVlLFxuICAgICAgcmVuZGVyT25XaW5kb3dSZXNpemU6IGZhbHNlXG4gICAgfSk7XG5cbiAgICAvKipcbiAgICAgKiBAdHlwZSB7T2JqZWN0fVxuICAgICAqIEBwcml2YXRlXG4gICAgICovXG4gICAgdGhpcy5fb3B0aW9ucyA9IG9wdGlvbnM7XG5cbiAgICAvKipcbiAgICAgKiBUaGUgc3RhY2sgb2Yge0BsaW5rIE9wZXJhdGlvbn0gaW5zdGFuY2VzIHRoYXQgd2lsbCBiZSB1c2VkXG4gICAgICogdG8gcmVuZGVyIHRoZSBmaW5hbCBJbWFnZVxuICAgICAqIEB0eXBlIHtBcnJheS48SW1nbHlLaXQuT3BlcmF0aW9uPn1cbiAgICAgKi9cbiAgICB0aGlzLm9wZXJhdGlvbnNTdGFjayA9IFtdO1xuXG4gICAgLyoqXG4gICAgICogVGhlIHJlZ2lzdGVyZWQgVUkgdHlwZXMgdGhhdCBjYW4gYmUgc2VsZWN0ZWQgdmlhIHRoZSBgdWlgIG9wdGlvblxuICAgICAqIEB0eXBlIHtPYmplY3QuPFN0cmluZywgVUk+fVxuICAgICAqIEBwcml2YXRlXG4gICAgICovXG4gICAgdGhpcy5fcmVnaXN0ZXJlZFVJcyA9IHt9O1xuXG4gICAgLy8gUmVnaXN0ZXIgdGhlIGRlZmF1bHQgVUlzXG4gICAgdGhpcy5fcmVnaXN0ZXJVSXMoKTtcblxuICAgIC8qKlxuICAgICAqIFRoZSByZWdpc3RlcmVkIG9wZXJhdGlvbnNcbiAgICAgKiBAdHlwZSB7T2JqZWN0LjxTdHJpbmcsIEltZ2x5S2l0Lk9wZXJhdGlvbj59XG4gICAgICovXG4gICAgdGhpcy5fcmVnaXN0ZXJlZE9wZXJhdGlvbnMgPSB7fTtcblxuICAgIC8vIFJlZ2lzdGVyIHRoZSBkZWZhdWx0IG9wZXJhdGlvbnNcbiAgICB0aGlzLl9yZWdpc3Rlck9wZXJhdGlvbnMoKTtcblxuICAgIGlmICh0aGlzLl9vcHRpb25zLnVpKSB7XG4gICAgICB0aGlzLl9pbml0VUkoKTtcbiAgICAgIGlmICh0aGlzLl9vcHRpb25zLnJlbmRlck9uV2luZG93UmVzaXplKSB7XG4gICAgICAgIHRoaXMuX2hhbmRsZVdpbmRvd1Jlc2l6ZSgpO1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBSZW5kZXJzIHRoZSBpbWFnZVxuICAgKiBAcGFyYW0gIHtJbWdseUtpdC5SZW5kZXJUeXBlfSBbcmVuZGVyVHlwZT1JbWdseUtpdC5SZW5kZXJUeXBlLkRBVEFfVVJMXSAtIFRoZSBvdXRwdXQgdHlwZVxuICAgKiBAcGFyYW0gIHtJbWdseUtpdC5JbWFnZUZvcm1hdH0gW2ltYWdlRm9ybWF0PUltZ2x5S2l0LkltYWdlRm9ybWF0LlBOR10gLSBUaGUgb3V0cHV0IGltYWdlIGZvcm1hdFxuICAgKiBAcGFyYW0gIHtzdHJpbmd9IFtkaW1lbnNpb25zXSAtIFRoZSBmaW5hbCBkaW1lbnNpb25zIG9mIHRoZSBpbWFnZVxuICAgKiBAcmV0dXJuIHtQcm9taXNlfVxuICAgKi9cbiAgcmVuZGVyIChyZW5kZXJUeXBlLCBpbWFnZUZvcm1hdCwgZGltZW5zaW9ucykge1xuICAgIC8vIGBvcHRpb25zLmltYWdlYCBpcyByZXF1aXJlZFxuICAgIGlmICh0eXBlb2YgdGhpcy5fb3B0aW9ucy5pbWFnZSA9PT0gXCJ1bmRlZmluZWRcIikgdGhyb3cgbmV3IEVycm9yKFwiYG9wdGlvbnMuaW1hZ2VgIGlzIHVuZGVmaW5lZC5cIik7XG5cbiAgICB2YXIgc2V0dGluZ3MgPSBJbWFnZUV4cG9ydGVyLnZhbGlkYXRlU2V0dGluZ3MocmVuZGVyVHlwZSwgaW1hZ2VGb3JtYXQpO1xuXG4gICAgcmVuZGVyVHlwZSA9IHNldHRpbmdzLnJlbmRlclR5cGU7XG4gICAgaW1hZ2VGb3JtYXQgPSBzZXR0aW5ncy5pbWFnZUZvcm1hdDtcblxuICAgIC8vIENyZWF0ZSBhIFJlbmRlckltYWdlXG4gICAgdmFyIHJlbmRlckltYWdlID0gbmV3IFJlbmRlckltYWdlKHRoaXMuX29wdGlvbnMuaW1hZ2UsIHRoaXMub3BlcmF0aW9uc1N0YWNrLCBkaW1lbnNpb25zLCB0aGlzLl9vcHRpb25zLnJlbmRlcmVyKTtcblxuICAgIC8vIFNldCBhbGwgb3BlcmF0aW9ucyB0byBkaXJ0eSwgc2luY2Ugd2UgaGF2ZSBhbm90aGVyIHdlYmdsIHJlbmRlcmVyXG4gICAgZm9yIChsZXQgb3BlcmF0aW9uIG9mIHRoaXMub3BlcmF0aW9uc1N0YWNrKSB7XG4gICAgICBvcGVyYXRpb24uZGlydHkgPSB0cnVlO1xuICAgIH1cblxuICAgIC8vIEluaXRpYXRlIGltYWdlIHJlbmRlcmluZ1xuICAgIHJldHVybiByZW5kZXJJbWFnZS5yZW5kZXIoKVxuICAgICAgLnRoZW4oZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgY2FudmFzID0gcmVuZGVySW1hZ2UuZ2V0UmVuZGVyZXIoKS5nZXRDYW52YXMoKTtcbiAgICAgICAgcmV0dXJuIEltYWdlRXhwb3J0ZXIuZXhwb3J0KGNhbnZhcywgcmVuZGVyVHlwZSwgaW1hZ2VGb3JtYXQpO1xuICAgICAgfSk7XG4gIH1cblxuICAvKipcbiAgICogUmVzZXRzIGFsbCBjdXN0b20gYW5kIHNlbGVjdGVkIG9wZXJhdGlvbnNcbiAgICovXG4gIHJlc2V0ICgpIHtcblxuICB9XG5cbiAgLyoqXG4gICAqIFJldHVybnMgdGhlIGFzc2V0IHBhdGggZm9yIHRoZSBnaXZlbiBmaWxlbmFtZVxuICAgKiBAcGFyYW0gIHtTdHJpbmd9IGFzc2V0XG4gICAqIEByZXR1cm4ge1N0cmluZ31cbiAgICovXG4gIGdldEFzc2V0UGF0aCAoYXNzZXQpIHtcbiAgICB2YXIgaXNCcm93c2VyID0gdHlwZW9mIHdpbmRvdyAhPT0gXCJ1bmRlZmluZWRcIjtcbiAgICBpZiAoaXNCcm93c2VyKSB7XG4gICAgICAvKiBpc3RhbmJ1bCBpZ25vcmUgbmV4dCAqL1xuICAgICAgcmV0dXJuIHRoaXMuX29wdGlvbnMuYXNzZXRzVXJsICsgXCIvXCIgKyBhc3NldDtcbiAgICB9IGVsc2Uge1xuICAgICAgdmFyIHBhdGggPSByZXF1aXJlKFwicGF0aFwiKTtcbiAgICAgIHJldHVybiBwYXRoLnJlc29sdmUodGhpcy5fb3B0aW9ucy5hc3NldHNVcmwsIGFzc2V0KTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogSWYgYG9wdGlvbnMucmVuZGVyT25XaW5kb3dSZXNpemVgIGlzIHNldCB0byB0cnVlLCB0aGlzIGZ1bmN0aW9uXG4gICAqIHdpbGwgcmUtcmVuZGVyIHRoZSBjYW52YXMgd2l0aCBhIHNsaWdodCBkZWxheSBzbyB0aGF0IGl0IHdvbid0XG4gICAqIGNhdXNlIGxhZ2dpbmcgb2YgdGhlIHJlc2l6ZVxuICAgKiBAcHJpdmF0ZVxuICAgKi9cbiAgX2hhbmRsZVdpbmRvd1Jlc2l6ZSAoKSB7XG4gICAgbGV0IHRpbWVyID0gbnVsbDtcbiAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcihcInJlc2l6ZVwiLCAoKSA9PiB7XG4gICAgICBpZiAodGltZXIgIT09IG51bGwpIHtcbiAgICAgICAgY2xlYXJUaW1lb3V0KHRpbWVyKTtcbiAgICAgIH1cblxuICAgICAgdGltZXIgPSBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgICAgdGltZXIgPSBudWxsO1xuICAgICAgICB0aGlzLnVpLnJlbmRlcigpO1xuICAgICAgfSwgMzAwKTtcbiAgICB9KTtcbiAgfVxuXG4gIC8qKlxuICAgKiBSZWdpc3RlcnMgYWxsIGRlZmF1bHQgVUlzXG4gICAqIEBwcml2YXRlXG4gICAqL1xuICBfcmVnaXN0ZXJVSXMgKCkge1xuICAgIHRoaXMucmVnaXN0ZXJVSShOaWdodFVJKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBSZWdpc3RlcnMgYWxsIGRlZmF1bHQgb3BlcmF0aW9uc1xuICAgKiBAcHJpdmF0ZVxuICAgKi9cbiAgX3JlZ2lzdGVyT3BlcmF0aW9ucyAoKSB7XG4gICAgZm9yIChsZXQgb3BlcmF0aW9uTmFtZSBpbiBJbWdseUtpdC5PcGVyYXRpb25zKSB7XG4gICAgICB0aGlzLnJlZ2lzdGVyT3BlcmF0aW9uKEltZ2x5S2l0Lk9wZXJhdGlvbnNbb3BlcmF0aW9uTmFtZV0pO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBSZWdpc3RlcnMgdGhlIGdpdmVuIG9wZXJhdGlvblxuICAgKiBAcGFyYW0ge0ltZ2x5S2l0Lk9wZXJhdGlvbn0gb3BlcmF0aW9uIC0gVGhlIG9wZXJhdGlvbiBjbGFzc1xuICAgKi9cbiAgcmVnaXN0ZXJPcGVyYXRpb24gKG9wZXJhdGlvbikge1xuICAgIHRoaXMuX3JlZ2lzdGVyZWRPcGVyYXRpb25zW29wZXJhdGlvbi5wcm90b3R5cGUuaWRlbnRpZmllcl0gPSBvcGVyYXRpb247XG4gIH1cblxuICAvKipcbiAgICogUmVnaXN0ZXJzIHRoZSBnaXZlbiBVSVxuICAgKiBAcGFyYW0ge1VJfSB1aVxuICAgKi9cbiAgcmVnaXN0ZXJVSSAodWkpIHtcbiAgICB0aGlzLl9yZWdpc3RlcmVkVUlzW3VpLnByb3RvdHlwZS5pZGVudGlmaWVyXSA9IHVpO1xuICB9XG5cbiAgLyoqXG4gICAqIEluaXRpYWxpemVzIHRoZSBVSVxuICAgKiBAcHJpdmF0ZVxuICAgKi9cbiAgLyogaXN0YW5idWwgaWdub3JlIG5leHQgKi9cbiAgX2luaXRVSSAoKSB7XG4gICAgdmFyIFVJO1xuXG4gICAgaWYgKHRoaXMuX29wdGlvbnMudWkgPT09IHRydWUpIHtcbiAgICAgIC8vIFNlbGVjdCB0aGUgZmlyc3QgVUkgYnkgZGVmYXVsdFxuICAgICAgVUkgPSBVdGlscy52YWx1ZXModGhpcy5fcmVnaXN0ZXJlZFVJcylbMF07XG4gICAgfSBlbHNlIHtcbiAgICAgIC8vIFNlbGVjdCB0aGUgVUkgd2l0aCB0aGUgZ2l2ZW4gaWRlbnRpZmllclxuICAgICAgVUkgPSB0aGlzLl9yZWdpc3RlcmVkVUlzW3RoaXMuX29wdGlvbnMudWldO1xuICAgIH1cblxuICAgIC8vIENoZWNrIGlmIFVJIGV4aXN0c1xuICAgIGlmICh0eXBlb2YgVUkgPT09IFwidW5kZWZpbmVkXCIpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcihcIkltZ2x5S2l0OiBVbmtub3duIFVJOiBcIiArIHRoaXMuX29wdGlvbnMudWkpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEB0eXBlIHtJbWdseUtpdC5VSX1cbiAgICAgKi9cbiAgICB0aGlzLnVpID0gbmV3IFVJKHRoaXMsIHRoaXMuX29wdGlvbnMpO1xuICB9XG5cbiAgZ2V0IHJlZ2lzdGVyZWRPcGVyYXRpb25zICgpIHtcbiAgICByZXR1cm4gdGhpcy5fcmVnaXN0ZXJlZE9wZXJhdGlvbnM7XG4gIH1cblxuICBydW4gKCkge1xuICAgIGlmICh0eXBlb2YgdGhpcy51aSAhPT0gXCJ1bmRlZmluZWRcIikge1xuICAgICAgdGhpcy51aS5ydW4oKTtcbiAgICB9XG5cbiAgfVxufVxuXG4vKipcbiAqIFRoZSBjdXJyZW50IHZlcnNpb24gb2YgdGhlIFNES1xuICogQG5hbWUgSW1nbHlLaXQudmVyc2lvblxuICogQGludGVybmFsIEtlZXAgaW4gc3luYyB3aXRoIHBhY2thZ2UuanNvblxuICovXG5JbWdseUtpdC52ZXJzaW9uID0gXCIwLjAuMVwiO1xuXG4vLyBFeHBvc2VkIGNsYXNzZXNcbkltZ2x5S2l0LlJlbmRlckltYWdlID0gUmVuZGVySW1hZ2U7XG5JbWdseUtpdC5Db2xvciA9IHJlcXVpcmUoXCIuL2xpYi9jb2xvclwiKTtcbkltZ2x5S2l0Lk9wZXJhdGlvbiA9IHJlcXVpcmUoXCIuL29wZXJhdGlvbnMvb3BlcmF0aW9uXCIpO1xuSW1nbHlLaXQuT3BlcmF0aW9ucyA9IHt9O1xuSW1nbHlLaXQuT3BlcmF0aW9ucy5GaWx0ZXJzT3BlcmF0aW9uID0gcmVxdWlyZShcIi4vb3BlcmF0aW9ucy9maWx0ZXJzLW9wZXJhdGlvblwiKTtcbkltZ2x5S2l0Lk9wZXJhdGlvbnMuQ3JvcE9wZXJhdGlvbiA9IHJlcXVpcmUoXCIuL29wZXJhdGlvbnMvY3JvcC1vcGVyYXRpb25cIik7XG5JbWdseUtpdC5PcGVyYXRpb25zLlJvdGF0aW9uT3BlcmF0aW9uID0gcmVxdWlyZShcIi4vb3BlcmF0aW9ucy9yb3RhdGlvbi1vcGVyYXRpb25cIik7XG5JbWdseUtpdC5PcGVyYXRpb25zLlNhdHVyYXRpb25PcGVyYXRpb24gPSByZXF1aXJlKFwiLi9vcGVyYXRpb25zL3NhdHVyYXRpb24tb3BlcmF0aW9uXCIpO1xuSW1nbHlLaXQuT3BlcmF0aW9ucy5Db250cmFzdE9wZXJhdGlvbiA9IHJlcXVpcmUoXCIuL29wZXJhdGlvbnMvY29udHJhc3Qtb3BlcmF0aW9uXCIpO1xuSW1nbHlLaXQuT3BlcmF0aW9ucy5CcmlnaHRuZXNzT3BlcmF0aW9uID0gcmVxdWlyZShcIi4vb3BlcmF0aW9ucy9icmlnaHRuZXNzLW9wZXJhdGlvblwiKTtcbkltZ2x5S2l0Lk9wZXJhdGlvbnMuRmxpcE9wZXJhdGlvbiA9IHJlcXVpcmUoXCIuL29wZXJhdGlvbnMvZmxpcC1vcGVyYXRpb25cIik7XG5JbWdseUtpdC5PcGVyYXRpb25zLlRpbHRTaGlmdE9wZXJhdGlvbiA9IHJlcXVpcmUoXCIuL29wZXJhdGlvbnMvdGlsdC1zaGlmdC1vcGVyYXRpb25cIik7XG5JbWdseUtpdC5PcGVyYXRpb25zLlJhZGlhbEJsdXJPcGVyYXRpb24gPSByZXF1aXJlKFwiLi9vcGVyYXRpb25zL3JhZGlhbC1ibHVyLW9wZXJhdGlvblwiKTtcbkltZ2x5S2l0Lk9wZXJhdGlvbnMuVGV4dE9wZXJhdGlvbiA9IHJlcXVpcmUoXCIuL29wZXJhdGlvbnMvdGV4dC1vcGVyYXRpb25cIik7XG5JbWdseUtpdC5PcGVyYXRpb25zLlN0aWNrZXJzT3BlcmF0aW9uID0gcmVxdWlyZShcIi4vb3BlcmF0aW9ucy9zdGlja2Vycy1vcGVyYXRpb25cIik7XG5JbWdseUtpdC5PcGVyYXRpb25zLkZyYW1lc09wZXJhdGlvbiA9IHJlcXVpcmUoXCIuL29wZXJhdGlvbnMvZnJhbWVzLW9wZXJhdGlvblwiKTtcblxuSW1nbHlLaXQuRmlsdGVycyA9IHt9O1xuSW1nbHlLaXQuRmlsdGVycy5BMTUgPSByZXF1aXJlKFwiLi9vcGVyYXRpb25zL2ZpbHRlcnMvYTE1LWZpbHRlclwiKTtcbkltZ2x5S2l0LkZpbHRlcnMuQnJlZXplID0gcmVxdWlyZShcIi4vb3BlcmF0aW9ucy9maWx0ZXJzL2JyZWV6ZS1maWx0ZXJcIik7XG5cbi8vIEV4cG9zZWQgY29uc3RhbnRzXG5JbWdseUtpdC5SZW5kZXJUeXBlID0gUmVuZGVyVHlwZTtcbkltZ2x5S2l0LkltYWdlRm9ybWF0ID0gSW1hZ2VGb3JtYXQ7XG5JbWdseUtpdC5WZWN0b3IyID0gcmVxdWlyZShcIi4vbGliL21hdGgvdmVjdG9yMlwiKTtcblxuZXhwb3J0IGRlZmF1bHQgSW1nbHlLaXQ7XG4iLCJcInVzZSBzdHJpY3RcIjtcbi8qIVxuICogQ29weXJpZ2h0IChjKSAyMDEzLTIwMTUgOWVsZW1lbnRzIEdtYkhcbiAqXG4gKiBSZWxlYXNlZCB1bmRlciBBdHRyaWJ1dGlvbi1Ob25Db21tZXJjaWFsIDMuMCBVbnBvcnRlZFxuICogaHR0cDovL2NyZWF0aXZlY29tbW9ucy5vcmcvbGljZW5zZXMvYnktbmMvMy4wL1xuICpcbiAqIEZvciBjb21tZXJjaWFsIHVzZSwgcGxlYXNlIGNvbnRhY3QgdXMgYXQgY29udGFjdEA5ZWxlbWVudHMuY29tXG4gKi9cblxuLyoqXG4gKiBSZXByZXNlbnRzIGEgY29sb3JcbiAqIEBjbGFzc1xuICogQGFsaWFzIEltZ2x5S2l0LkNvbG9yXG4gKiBAcGFyYW0ge051bWJlcn0gclxuICogQHBhcmFtIHtOdW1iZXJ9IGdcbiAqIEBwYXJhbSB7TnVtYmVyfSBiXG4gKiBAcGFyYW0ge051bWJlcn0gW2FdXG4gKiBAcHJpdmF0ZVxuICovXG5jbGFzcyBDb2xvciB7XG4gIGNvbnN0cnVjdG9yIChyLCBnLCBiLCBhKSB7XG4gICAgaWYgKHR5cGVvZiBhID09PSBcInVuZGVmaW5lZFwiKSBhID0gMS4wO1xuXG4gICAgdGhpcy5yID0gcjtcbiAgICB0aGlzLmcgPSBnO1xuICAgIHRoaXMuYiA9IGI7XG4gICAgdGhpcy5hID0gYTtcbiAgfVxuXG4gIC8qKlxuICAgKiBSZXR1cm5zIGFuIHJnYmEoKSByZXByZXNlbnRhdGlvbiBvZiB0aGlzIGNvbG9yXG4gICAqIEByZXR1cm4ge1N0cmluZ31cbiAgICovXG4gIHRvUkdCQSAoKSB7XG4gICAgdmFyIGNvbG9ycyA9IFtcbiAgICAgIE1hdGgucm91bmQodGhpcy5yICogMjU1KSxcbiAgICAgIE1hdGgucm91bmQodGhpcy5nICogMjU1KSxcbiAgICAgIE1hdGgucm91bmQodGhpcy5iICogMjU1KSxcbiAgICAgIHRoaXMuYVxuICAgIF07XG4gICAgcmV0dXJuIFwicmdiYShcIiArIGNvbG9ycy5qb2luKFwiLFwiKSArIFwiKVwiO1xuICB9XG5cbiAgLyoqXG4gICAqIFJldHVybnMgYSBoZXggcmVwcmVzZW50YXRpb24gb2YgdGhpcyBjb2xvclxuICAgKiBAcmV0dXJuIHtTdHJpbmd9XG4gICAqL1xuICB0b0hleCAoKSB7XG4gICAgdmFyIGNvbXBvbmVudHMgPSBbXG4gICAgICB0aGlzLl9jb21wb25lbnRUb0hleChNYXRoLnJvdW5kKHRoaXMuciAqIDI1NSkpLFxuICAgICAgdGhpcy5fY29tcG9uZW50VG9IZXgoTWF0aC5yb3VuZCh0aGlzLmcgKiAyNTUpKSxcbiAgICAgIHRoaXMuX2NvbXBvbmVudFRvSGV4KE1hdGgucm91bmQodGhpcy5iICogMjU1KSlcbiAgICBdO1xuICAgIHJldHVybiBcIiNcIiArIGNvbXBvbmVudHMuam9pbihcIlwiKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBSZXR1cm5zIGFuIGFycmF5IHdpdGggNCB2YWx1ZXMgKDAuLi4xKVxuICAgKiBAcmV0dXJuIHtBcnJheS48TnVtYmVyPn1cbiAgICovXG4gIHRvR0xDb2xvciAoKSB7XG4gICAgcmV0dXJuIFt0aGlzLnIsIHRoaXMuZywgdGhpcy5iLCB0aGlzLmFdO1xuICB9XG5cbiAgLyoqXG4gICAqIFJldHVybnMgYW4gYXJyYXkgd2l0aCAzIHZhbHVlcyAoMC4uLjEpXG4gICAqIEByZXR1cm4ge0FycmF5LjxOdW1iZXI+fVxuICAgKi9cbiAgdG9SR0JHTENvbG9yICgpIHtcbiAgICByZXR1cm4gW3RoaXMuciwgdGhpcy5nLCB0aGlzLmJdO1xuICB9XG5cbiAgLyoqXG4gICAqIENvbnZlcnRzIHRoZSBSR0IgdmFsdWUgdG8gSFNWXG4gICAqIEByZXR1cm4ge0FycmF5LjxOdW1iZXI+fVxuICAgKi9cbiAgdG9IU1YgKCkge1xuICAgIGxldCBtYXggPSBNYXRoLm1heCh0aGlzLnIsIHRoaXMuZywgdGhpcy5iKTtcbiAgICBsZXQgbWluID0gTWF0aC5taW4odGhpcy5yLCB0aGlzLmcsIHRoaXMuYik7XG4gICAgbGV0IGgsIHMsIHYgPSBtYXg7XG4gICAgbGV0IGQgPSBtYXggLSBtaW47XG4gICAgcyA9IG1heCA9PT0gMCA/IDAgOiBkIC8gbWF4O1xuXG4gICAgaWYgKG1heCA9PSBtaW4pIHtcbiAgICAgIGggPSAwOyAvLyBhY2hyb21hdGljXG4gICAgfSBlbHNlIHtcbiAgICAgIHN3aXRjaCAobWF4KXtcbiAgICAgICAgY2FzZSB0aGlzLnI6XG4gICAgICAgICAgaCA9ICh0aGlzLmcgLSB0aGlzLmIpIC8gZCArICh0aGlzLmcgPCB0aGlzLmIgPyA2IDogMCk7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIGNhc2UgdGhpcy5nOlxuICAgICAgICAgIGggPSAodGhpcy5iIC0gdGhpcy5yKSAvIGQgKyAyO1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlIHRoaXMuYjpcbiAgICAgICAgICBoID0gKHRoaXMuciAtIHRoaXMuZykgLyBkICsgNDtcbiAgICAgICAgICBicmVhaztcbiAgICAgIH1cbiAgICAgIGggLz0gNjtcbiAgICB9XG5cbiAgICByZXR1cm4gW2gsIHMsIHZdO1xuICB9XG5cbiAgLyoqXG4gICAqIFNldHMgdGhlIFJHQiB2YWx1ZXMgb2YgdGhpcyBjb2xvciB0byBtYXRjaCB0aGUgZ2l2ZW4gSFNWIHZhbHVlc1xuICAgKiBAcGFyYW0ge051bWJlcn0gaFxuICAgKiBAcGFyYW0ge051bWJlcn0gc1xuICAgKiBAcGFyYW0ge051bWJlcn0gdlxuICAgKi9cbiAgZnJvbUhTViAoaCwgcywgdikge1xuICAgIGxldCB7ciwgZywgYn0gPSB0aGlzO1xuXG4gICAgbGV0IGkgPSBNYXRoLmZsb29yKGggKiA2KTtcbiAgICBsZXQgZiA9IGggKiA2IC0gaTtcbiAgICBsZXQgcCA9IHYgKiAoMSAtIHMpO1xuICAgIGxldCBxID0gdiAqICgxIC0gZiAqIHMpO1xuICAgIGxldCB0ID0gdiAqICgxIC0gKDEgLSBmKSAqIHMpO1xuXG4gICAgc3dpdGNoKGkgJSA2KXtcbiAgICAgICAgY2FzZSAwOiByID0gdiwgZyA9IHQsIGIgPSBwOyBicmVhaztcbiAgICAgICAgY2FzZSAxOiByID0gcSwgZyA9IHYsIGIgPSBwOyBicmVhaztcbiAgICAgICAgY2FzZSAyOiByID0gcCwgZyA9IHYsIGIgPSB0OyBicmVhaztcbiAgICAgICAgY2FzZSAzOiByID0gcCwgZyA9IHEsIGIgPSB2OyBicmVhaztcbiAgICAgICAgY2FzZSA0OiByID0gdCwgZyA9IHAsIGIgPSB2OyBicmVhaztcbiAgICAgICAgY2FzZSA1OiByID0gdiwgZyA9IHAsIGIgPSBxOyBicmVhaztcbiAgICB9XG5cbiAgICB0aGlzLnIgPSByO1xuICAgIHRoaXMuZyA9IGc7XG4gICAgdGhpcy5iID0gYjtcbiAgfVxuXG4gIC8qKlxuICAgKiBSZXR1cm5zIGEgY2xvbmUgb2YgdGhlIGN1cnJlbnQgY29sb3JcbiAgICogQHJldHVybiB7Q29sb3J9XG4gICAqL1xuICBjbG9uZSAoKSB7XG4gICAgcmV0dXJuIG5ldyBDb2xvcih0aGlzLnIsIHRoaXMuZywgdGhpcy5iLCB0aGlzLmEpO1xuICB9XG5cbiAgLyoqXG4gICAqIFJldHVybnMgdGhlIGdpdmVuIG51bWJlciBhcyBoZXhcbiAgICogQHBhcmFtICB7TnVtYmVyfSBjb21wb25lbnRcbiAgICogQHJldHVybiB7U3RyaW5nfVxuICAgKiBAcHJpdmF0ZVxuICAgKi9cbiAgX2NvbXBvbmVudFRvSGV4IChjb21wb25lbnQpIHtcbiAgICB2YXIgaGV4ID0gY29tcG9uZW50LnRvU3RyaW5nKDE2KTtcbiAgICByZXR1cm4gaGV4Lmxlbmd0aCA9PSAxID8gXCIwXCIgKyBoZXggOiBoZXg7XG4gIH1cblxuICAvKipcbiAgICogUmV0dXJucyB0aGUgc3RyaW5nIHJlcHJlc2VudGF0aW9uIG9mIHRoaXMgY29sb3JcbiAgICogQHJldHVybnMge1N0cmluZ31cbiAgICovXG4gIHRvU3RyaW5nICgpIHtcbiAgICByZXR1cm4gYENvbG9yKCR7dGhpcy5yfSwke3RoaXMuZ30sJHt0aGlzLmJ9LCR7dGhpcy5hfSlgO1xuICB9XG59XG5cbmV4cG9ydCBkZWZhdWx0IENvbG9yO1xuIiwiXCJ1c2Ugc3RyaWN0XCI7XG4vKipcbiAqIEV2ZW50RW1pdHRlciAoRVM2KSBmcm9tOlxuICogaHR0cHM6Ly9naXN0LmdpdGh1Yi5jb20vYmxvb2R5b3dsLzQxYjFkZTMzODhjNjI2Nzk2ZWNhXG4gKi9cblxuY29uc3QgREVGQVVMVF9NQVhfTElTVEVORVJTID0gMTI7XG5cbmZ1bmN0aW9uIGVycm9yIChtZXNzYWdlLCAuLi5hcmdzKSB7XG4gIGNvbnNvbGUuZXJyb3IuYXBwbHkoY29uc29sZSwgW21lc3NhZ2VdLmNvbmNhdChhcmdzKSk7XG4gIGNvbnNvbGUudHJhY2UoKTtcbn1cblxuY2xhc3MgRXZlbnRFbWl0dGVyIHtcbiAgY29uc3RydWN0b3IgKCkge1xuICAgIHRoaXMuX21heExpc3RlbmVycyA9IERFRkFVTFRfTUFYX0xJU1RFTkVSUztcbiAgICB0aGlzLl9ldmVudHMgPSB7fTtcbiAgfVxuXG4gIG9uICh0eXBlLCBsaXN0ZW5lcikge1xuICAgIGlmKHR5cGVvZiBsaXN0ZW5lciAhPSBcImZ1bmN0aW9uXCIpIHtcbiAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoKTtcbiAgICB9XG5cbiAgICBsZXQgbGlzdGVuZXJzID0gdGhpcy5fZXZlbnRzW3R5cGVdIHx8KHRoaXMuX2V2ZW50c1t0eXBlXSA9IFtdKTtcbiAgICBpZiAobGlzdGVuZXJzLmluZGV4T2YobGlzdGVuZXIpICE9IC0xKSB7XG4gICAgICByZXR1cm4gdGhpcztcbiAgICB9XG4gICAgbGlzdGVuZXJzLnB1c2gobGlzdGVuZXIpO1xuXG4gICAgaWYgKGxpc3RlbmVycy5sZW5ndGggPiB0aGlzLl9tYXhMaXN0ZW5lcnMpIHtcbiAgICAgIGVycm9yKFxuICAgICAgICBcInBvc3NpYmxlIG1lbW9yeSBsZWFrLCBhZGRlZCAlaSAlcyBsaXN0ZW5lcnMsIFwiK1xuICAgICAgICBcInVzZSBFdmVudEVtaXR0ZXIjc2V0TWF4TGlzdGVuZXJzKG51bWJlcikgaWYgeW91IFwiICtcbiAgICAgICAgXCJ3YW50IHRvIGluY3JlYXNlIHRoZSBsaW1pdCAoJWkgbm93KVwiLFxuICAgICAgICBsaXN0ZW5lcnMubGVuZ3RoLFxuICAgICAgICB0eXBlLFxuICAgICAgICB0aGlzLl9tYXhMaXN0ZW5lcnNcbiAgICAgICk7XG4gICAgfVxuICAgIHJldHVybiB0aGlzO1xuICB9XG5cbiAgb25jZSAodHlwZSwgbGlzdGVuZXIpIHtcbiAgICBsZXQgZXZlbnRzSW5zdGFuY2UgPSB0aGlzO1xuICAgIGZ1bmN0aW9uIG9uY2VDYWxsYmFjayAoKSB7XG4gICAgICBldmVudHNJbnN0YW5jZS5vZmYodHlwZSwgb25jZUNhbGxiYWNrKTtcbiAgICAgIGxpc3RlbmVyLmFwcGx5KG51bGwsIGFyZ3VtZW50cyk7XG4gICAgfVxuICAgIHJldHVybiB0aGlzLm9uKHR5cGUsIG9uY2VDYWxsYmFjayk7XG4gIH1cblxuICBvZmYgKHR5cGUsIC4uLmFyZ3MpIHtcbiAgICBpZiAoYXJncy5sZW5ndGggPT09IDApIHtcbiAgICAgIHRoaXMuX2V2ZW50c1t0eXBlXSA9IG51bGw7XG4gICAgfVxuXG4gICAgbGV0IGxpc3RlbmVyID0gYXJnc1swXTtcbiAgICBpZiAodHlwZW9mIGxpc3RlbmVyICE9IFwiZnVuY3Rpb25cIikge1xuICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcigpO1xuICAgIH1cblxuICAgIGxldCBsaXN0ZW5lcnMgPSB0aGlzLl9ldmVudHNbdHlwZV07XG4gICAgaWYgKCFsaXN0ZW5lcnMgfHwgIWxpc3RlbmVycy5sZW5ndGgpIHtcbiAgICAgIHJldHVybiB0aGlzO1xuICAgIH1cblxuICAgIGxldCBpbmRleE9mTGlzdGVuZXIgPSBsaXN0ZW5lcnMuaW5kZXhPZihsaXN0ZW5lcik7XG4gICAgaWYgKGluZGV4T2ZMaXN0ZW5lciA9PSAtMSkge1xuICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfVxuXG4gICAgbGlzdGVuZXJzLnNwbGljZShpbmRleE9mTGlzdGVuZXIsIDEpO1xuICAgIHJldHVybiB0aGlzO1xuICB9XG5cbiAgZW1pdCAodHlwZSwgLi4uYXJncykge1xuICAgIGxldCBsaXN0ZW5lcnMgPSB0aGlzLl9ldmVudHNbdHlwZV07XG4gICAgaWYoIWxpc3RlbmVycyB8fCAhbGlzdGVuZXJzLmxlbmd0aCkge1xuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cblxuICAgIGxpc3RlbmVycy5mb3JFYWNoKGZuID0+IGZuLmFwcGx5KG51bGwsIGFyZ3MpKTtcblxuICAgIHJldHVybiB0cnVlO1xuICB9XG5cbiAgc2V0TWF4TGlzdGVuZXJzIChuZXdNYXhMaXN0ZW5lcnMpIHtcbiAgICBpZiAocGFyc2VJbnQobmV3TWF4TGlzdGVuZXJzKSAhPT0gbmV3TWF4TGlzdGVuZXJzKSB7XG4gICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCk7XG4gICAgfVxuXG4gICAgdGhpcy5fbWF4TGlzdGVuZXJzID0gbmV3TWF4TGlzdGVuZXJzO1xuICB9XG59XG5cbmV4cG9ydCBkZWZhdWx0IEV2ZW50RW1pdHRlcjtcbiIsIlwidXNlIHN0cmljdFwiO1xuLyohXG4gKiBDb3B5cmlnaHQgKGMpIDIwMTMtMjAxNSA5ZWxlbWVudHMgR21iSFxuICpcbiAqIFJlbGVhc2VkIHVuZGVyIEF0dHJpYnV0aW9uLU5vbkNvbW1lcmNpYWwgMy4wIFVucG9ydGVkXG4gKiBodHRwOi8vY3JlYXRpdmVjb21tb25zLm9yZy9saWNlbnNlcy9ieS1uYy8zLjAvXG4gKlxuICogRm9yIGNvbW1lcmNpYWwgdXNlLCBwbGVhc2UgY29udGFjdCB1cyBhdCBjb250YWN0QDllbGVtZW50cy5jb21cbiAqL1xuXG4vKipcbiAqIEhlbHBlciBmdW5jdGlvbiB0byBjb3JyZWN0bHkgc2V0IHVwIHRoZSBwcm90b3R5cGUgY2hhaW5cbiAqIEJhc2VkIG9uIHRoZSBiYWNrYm9uZS5qcyBleHRlbmQgZnVuY3Rpb246XG4gKiBodHRwczovL2dpdGh1Yi5jb20vamFzaGtlbmFzL2JhY2tib25lL2Jsb2IvbWFzdGVyL2JhY2tib25lLmpzXG4gKiBAcGFyYW0gIHtPYmplY3R9IHByb3RvdHlwZVByb3BlcnRpZXNcbiAqIEBwYXJhbSAge09iamVjdH0gY2xhc3NQcm9wZXJ0aWVzXG4gKiBAcmV0dXJuIHtPYmplY3R9XG4gKi9cbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24ocHJvdG90eXBlUHJvcGVydGllcywgY2xhc3NQcm9wZXJ0aWVzKSB7XG4gIC8qanNoaW50IHZhbGlkdGhpczp0cnVlKi9cbiAgdmFyIHBhcmVudCA9IHRoaXM7XG4gIHZhciBjaGlsZDtcblxuICAvLyBUaGUgY29uc3RydWN0b3IgZnVuY3Rpb24gZm9yIHRoZSBuZXcgc3ViY2xhc3MgaXMgZWl0aGVyIGRlZmluZWQgYnkgeW91XG4gIC8vICh0aGUgXCJjb25zdHJ1Y3RvclwiIHByb3BlcnR5IGluIHlvdXIgYGV4dGVuZGAgZGVmaW5pdGlvbiksIG9yIGRlZmF1bHRlZFxuICAvLyBieSB1cyB0byBzaW1wbHkgY2FsbCB0aGUgcGFyZW50J3MgY29uc3RydWN0b3IuXG4gIGlmIChwcm90b3R5cGVQcm9wZXJ0aWVzICYmXG4gICAgcHJvdG90eXBlUHJvcGVydGllcy5oYXNPd25Qcm9wZXJ0eShcImNvbnN0cnVjdG9yXCIpKSB7XG4gICAgICBjaGlsZCA9IHByb3RvdHlwZVByb3BlcnRpZXMuY29uc3RydWN0b3I7XG4gIH0gZWxzZSB7XG4gICAgY2hpbGQgPSBmdW5jdGlvbigpeyByZXR1cm4gcGFyZW50LmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7IH07XG4gIH1cblxuICAvLyBBZGQgc3RhdGljIHByb3BlcnRpZXMgdG8gdGhlIGNvbnN0cnVjdG9yIGZ1bmN0aW9uLCBpZiBzdXBwbGllZC5cbiAgdmFyIGtleTtcbiAgZm9yIChrZXkgaW4gcGFyZW50KSB7XG4gICAgY2hpbGRba2V5XSA9IHBhcmVudFtrZXldO1xuICB9XG4gIGlmICh0eXBlb2YgY2xhc3NQcm9wZXJ0aWVzICE9PSBcInVuZGVmaW5lZFwiKSB7XG4gICAgZm9yIChrZXkgaW4gY2xhc3NQcm9wZXJ0aWVzKSB7XG4gICAgICBjaGlsZFtrZXldID0gY2xhc3NQcm9wZXJ0aWVzW2tleV07XG4gICAgfVxuICB9XG5cbiAgLy8gU2V0IHRoZSBwcm90b3R5cGUgY2hhaW4gdG8gaW5oZXJpdCBmcm9tIGBwYXJlbnRgLCB3aXRob3V0IGNhbGxpbmdcbiAgLy8gYHBhcmVudGAncyBjb25zdHJ1Y3RvciBmdW5jdGlvbi5cbiAgdmFyIFN1cnJvZ2F0ZSA9IGZ1bmN0aW9uKCl7IHRoaXMuY29uc3RydWN0b3IgPSBjaGlsZDsgfTtcbiAgU3Vycm9nYXRlLnByb3RvdHlwZSA9IHBhcmVudC5wcm90b3R5cGU7XG4gIGNoaWxkLnByb3RvdHlwZSA9IG5ldyBTdXJyb2dhdGUoKTtcblxuICAvLyBBZGQgcHJvdG90eXBlIHByb3BlcnRpZXMgKGluc3RhbmNlIHByb3BlcnRpZXMpIHRvIHRoZSBzdWJjbGFzcyxcbiAgLy8gaWYgc3VwcGxpZWQuXG4gIGlmIChwcm90b3R5cGVQcm9wZXJ0aWVzKSB7XG4gICAgZm9yIChrZXkgaW4gcHJvdG90eXBlUHJvcGVydGllcykge1xuICAgICAgY2hpbGQucHJvdG90eXBlW2tleV0gPSBwcm90b3R5cGVQcm9wZXJ0aWVzW2tleV07XG4gICAgfVxuICB9XG5cbiAgLy8gU2V0IGEgY29udmVuaWVuY2UgcHJvcGVydHkgaW4gY2FzZSB0aGUgcGFyZW50J3MgcHJvdG90eXBlIGlzIG5lZWRlZFxuICAvLyBsYXRlci5cbiAgY2hpbGQuX19zdXBlcl9fID0gcGFyZW50LnByb3RvdHlwZTtcblxuICByZXR1cm4gY2hpbGQ7XG59O1xuIiwiXCJ1c2Ugc3RyaWN0XCI7XG4vKiFcbiAqIENvcHlyaWdodCAoYykgMjAxMy0yMDE1IDllbGVtZW50cyBHbWJIXG4gKlxuICogUmVsZWFzZWQgdW5kZXIgQXR0cmlidXRpb24tTm9uQ29tbWVyY2lhbCAzLjAgVW5wb3J0ZWRcbiAqIGh0dHA6Ly9jcmVhdGl2ZWNvbW1vbnMub3JnL2xpY2Vuc2VzL2J5LW5jLzMuMC9cbiAqXG4gKiBGb3IgY29tbWVyY2lhbCB1c2UsIHBsZWFzZSBjb250YWN0IHVzIGF0IGNvbnRhY3RAOWVsZW1lbnRzLmNvbVxuICovXG5cbi8qKlxuICogUGFyc2VzIHRoZSBkaW1lbnNpb25zIHN0cmluZyBhbmQgcHJvdmlkZXMgY2FsY3VsYXRpb24gZnVuY3Rpb25zXG4gKiBAY2xhc3NcbiAqIEBhbGlhcyBJbWdseUtpdC5JbWFnZURpbWVuc2lvbnNcbiAqIEBwYXJhbSB7c3RyaW5nfSBkaW1lbnNpb25zXG4gKiBAcHJpdmF0ZVxuICovXG5jbGFzcyBJbWFnZURpbWVuc2lvbnMge1xuICBjb25zdHJ1Y3RvciAoZGltZW5zaW9ucykge1xuICAgIC8qKlxuICAgICAqIFRoZSBhdmFpbGFibGUgZGltZW5zaW9uIG1vZGlmaWVyc1xuICAgICAqIEB0eXBlIHtPYmplY3R9XG4gICAgICogQHByaXZhdGVcbiAgICAgKi9cbiAgICB0aGlzLl9tb2RpZmllcnMgPSB7XG4gICAgICBGSVhFRDogXCIhXCJcbiAgICB9O1xuXG4gICAgLyoqXG4gICAgICogQHR5cGUge3N0cmluZ31cbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqL1xuICAgIHRoaXMuX2RpbWVuc2lvbnNTdHJpbmcgPSBkaW1lbnNpb25zO1xuXG4gICAgLyoqXG4gICAgICogQW4gb2JqZWN0IHRoYXQgcmVwcmVzZW50cyB0aGUgcGFyc2VkIGRpbWVuc2lvbnMgc3RyaW5nXG4gICAgICogQHR5cGUge09iamVjdH1cbiAgICAgKi9cbiAgICB0aGlzLl9ydWxlcyA9IHRoaXMuX3BhcnNlKCk7XG5cbiAgICB0aGlzLl92YWxpZGF0ZVJ1bGVzKCk7XG4gIH1cblxuICAvKipcbiAgICogUGFyc2VzIHRoZSBkaW1lbnNpb25zIHN0cmluZ1xuICAgKiBAcHJpdmF0ZVxuICAgKi9cbiAgX3BhcnNlICgpIHtcbiAgICBpZiAodHlwZW9mIHRoaXMuX2RpbWVuc2lvbnNTdHJpbmcgPT09IFwidW5kZWZpbmVkXCIpIHtcbiAgICAgIHJldHVybiBudWxsO1xuICAgIH1cblxuICAgIHZhciBtYXRjaCA9IHRoaXMuX2RpbWVuc2lvbnNTdHJpbmcubWF0Y2goL14oWzAtOV0rKT94KFswLTldKyk/KFtcXCFdKT8kL2kpO1xuICAgIGlmICghbWF0Y2gpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcihcIkludmFsaWQgc2l6ZSBvcHRpb246IFwiICsgdGhpcy5fZGltZW5zaW9uc1N0cmluZyk7XG4gICAgfVxuXG4gICAgcmV0dXJuIHtcbiAgICAgIHg6IGlzTmFOKG1hdGNoWzFdKSA/IG51bGwgOiBwYXJzZUludChtYXRjaFsxXSksXG4gICAgICB5OiBpc05hTihtYXRjaFsyXSkgPyBudWxsIDogcGFyc2VJbnQobWF0Y2hbMl0pLFxuICAgICAgbW9kaWZpZXI6IG1hdGNoWzNdXG4gICAgfTtcbiAgfVxuXG4gIC8qKlxuICAgKiBWYWxpZGF0ZXMgdGhlIHJ1bGVzXG4gICAqIEBwcml2YXRlXG4gICAqL1xuICBfdmFsaWRhdGVSdWxlcyAoKSB7XG4gICAgaWYgKHRoaXMuX3J1bGVzID09PSBudWxsKSByZXR1cm47XG5cbiAgICB2YXIgeEF2YWlsYWJsZSA9IHRoaXMuX3J1bGVzLnggIT09IG51bGw7XG4gICAgdmFyIHlBdmFpbGFibGUgPSB0aGlzLl9ydWxlcy55ICE9PSBudWxsO1xuXG4gICAgaWYgKHRoaXMuX3J1bGVzLm1vZGlmaWVyID09PSB0aGlzLl9tb2RpZmllcnMuRklYRUQgJiYgISh4QXZhaWxhYmxlICYmIHlBdmFpbGFibGUpKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoXCJCb3RoIGB4YCBhbmQgYHlgIGhhdmUgdG8gYmUgc2V0IHdoZW4gdXNpbmcgdGhlIGZpeGVkICghKSBtb2RpZmllci5cIik7XG4gICAgfVxuXG4gICAgaWYgKCF4QXZhaWxhYmxlICYmICF5QXZhaWxhYmxlKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoXCJOZWl0aGVyIGB4YCBub3IgYHlgIGFyZSBnaXZlbi5cIik7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIENhbGN1bGF0ZXMgdGhlIGZpbmFsIGRpbWVuc2lvbnMgdXNpbmcgdGhlIGRpbWVuc2lvbnMgc3RyaW5nIGFuZCB0aGVcbiAgICogZ2l2ZW4gaW5pdGlhbCBkaW1lbnNpb25zXG4gICAqIEBwYXJhbSAge1ZlY3RvcjJ9IGluaXRpYWxEaW1lbnNpb25zXG4gICAqIEByZXR1cm4ge1ZlY3RvcjJ9XG4gICAqL1xuICBjYWxjdWxhdGVGaW5hbERpbWVuc2lvbnMgKGluaXRpYWxEaW1lbnNpb25zKSB7XG4gICAgdmFyIGRpbWVuc2lvbnMgPSBpbml0aWFsRGltZW5zaW9ucy5jbG9uZSgpLCByYXRpbztcblxuICAgIGlmICh0aGlzLl9ydWxlcyA9PT0gbnVsbCkgcmV0dXJuIGRpbWVuc2lvbnM7XG5cbiAgICAvKiBpc3RhbmJ1bCBpZ25vcmUgZWxzZSAqL1xuICAgIGlmICh0aGlzLl9ydWxlcy5tb2RpZmllciA9PT0gdGhpcy5fbW9kaWZpZXJzLkZJWEVEKSB7XG4gICAgICAvLyBGaXhlZCBkaW1lbnNpb25zXG4gICAgICBkaW1lbnNpb25zLnNldCh0aGlzLl9ydWxlcy54LCB0aGlzLl9ydWxlcy55KTtcbiAgICB9IGVsc2UgaWYgKHRoaXMuX3J1bGVzLnggIT09IG51bGwgJiYgdGhpcy5fcnVsZXMueSAhPT0gbnVsbCkge1xuICAgICAgLy8gQm90aCB4IGFuZCB5IGdpdmVuLCByZXNpemUgdG8gZml0XG4gICAgICByYXRpbyA9IE1hdGgubWluKHRoaXMuX3J1bGVzLnggLyBkaW1lbnNpb25zLngsIHRoaXMuX3J1bGVzLnkgLyBkaW1lbnNpb25zLnkpO1xuICAgICAgZGltZW5zaW9ucy5tdWx0aXBseShyYXRpbyk7XG4gICAgfSBlbHNlIGlmICh0aGlzLl9ydWxlcy54ICE9PSBudWxsKSB7XG4gICAgICAvLyBGaXhlZCB4LCB5IGJ5IHJhdGlvXG4gICAgICByYXRpbyA9IGluaXRpYWxEaW1lbnNpb25zLnkgLyBpbml0aWFsRGltZW5zaW9ucy54O1xuICAgICAgZGltZW5zaW9ucy54ID0gdGhpcy5fcnVsZXMueDtcbiAgICAgIGRpbWVuc2lvbnMueSA9IGRpbWVuc2lvbnMueCAqIHJhdGlvO1xuICAgIH0gZWxzZSBpZiAodGhpcy5fcnVsZXMueSAhPT0gbnVsbCkge1xuICAgICAgLy8gRml4ZWQgeSwgeCBieSByYXRpb1xuICAgICAgcmF0aW8gPSBpbml0aWFsRGltZW5zaW9ucy54IC8gaW5pdGlhbERpbWVuc2lvbnMueTtcbiAgICAgIGRpbWVuc2lvbnMueSA9IHRoaXMuX3J1bGVzLnk7XG4gICAgICBkaW1lbnNpb25zLnggPSBkaW1lbnNpb25zLnkgKiByYXRpbztcbiAgICB9XG5cbiAgICByZXR1cm4gZGltZW5zaW9ucztcbiAgfVxufVxuXG5leHBvcnQgZGVmYXVsdCBJbWFnZURpbWVuc2lvbnM7XG4iLCJcInVzZSBzdHJpY3RcIjtcbi8qIVxuICogQ29weXJpZ2h0IChjKSAyMDEzLTIwMTUgOWVsZW1lbnRzIEdtYkhcbiAqXG4gKiBSZWxlYXNlZCB1bmRlciBBdHRyaWJ1dGlvbi1Ob25Db21tZXJjaWFsIDMuMCBVbnBvcnRlZFxuICogaHR0cDovL2NyZWF0aXZlY29tbW9ucy5vcmcvbGljZW5zZXMvYnktbmMvMy4wL1xuICpcbiAqIEZvciBjb21tZXJjaWFsIHVzZSwgcGxlYXNlIGNvbnRhY3QgdXMgYXQgY29udGFjdEA5ZWxlbWVudHMuY29tXG4gKi9cbmltcG9ydCB7IFJlbmRlclR5cGUsIEltYWdlRm9ybWF0IH0gZnJvbSBcIi4uL2NvbnN0YW50c1wiO1xuaW1wb3J0IFV0aWxzIGZyb20gXCIuL3V0aWxzXCI7XG5cbi8qKlxuICogQGNsYXNzXG4gKiBAYWxpYXMgSW1nbHlLaXQuSW1hZ2VFeHBvcnRlclxuICogQHByaXZhdGVcbiAqL1xuY2xhc3MgSW1hZ2VFeHBvcnRlciB7XG5cbiAgc3RhdGljIHZhbGlkYXRlU2V0dGluZ3MgKHJlbmRlclR5cGUsIGltYWdlRm9ybWF0KSB7XG4gICAgdmFyIHNldHRpbmdzID0ge1xuICAgICAgcmVuZGVyVHlwZTogcmVuZGVyVHlwZSxcbiAgICAgIGltYWdlRm9ybWF0OiBpbWFnZUZvcm1hdFxuICAgIH07XG5cbiAgICAvLyBWYWxpZGF0ZSBSZW5kZXJUeXBlXG4gICAgaWYgKCh0eXBlb2Ygc2V0dGluZ3MucmVuZGVyVHlwZSAhPT0gXCJ1bmRlZmluZWRcIiAmJiBzZXR0aW5ncy5yZW5kZXJUeXBlICE9PSBudWxsKSAmJlxuICAgICAgVXRpbHMudmFsdWVzKFJlbmRlclR5cGUpLmluZGV4T2Yoc2V0dGluZ3MucmVuZGVyVHlwZSkgPT09IC0xKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcihcIkludmFsaWQgcmVuZGVyIHR5cGU6IFwiICsgc2V0dGluZ3MucmVuZGVyVHlwZSk7XG4gICAgfSBlbHNlIGlmICh0eXBlb2YgcmVuZGVyVHlwZSA9PT0gXCJ1bmRlZmluZWRcIikge1xuICAgICAgc2V0dGluZ3MucmVuZGVyVHlwZSA9IFJlbmRlclR5cGUuREFUQV9VUkw7XG4gICAgfVxuXG4gICAgLy8gVmFsaWRhdGUgSW1hZ2VGb3JtYXRcbiAgICBpZiAoKHR5cGVvZiBzZXR0aW5ncy5pbWFnZUZvcm1hdCAhPT0gXCJ1bmRlZmluZWRcIiAmJiBzZXR0aW5ncy5pbWFnZUZvcm1hdCAhPT0gbnVsbCkgJiZcbiAgICAgIFV0aWxzLnZhbHVlcyhJbWFnZUZvcm1hdCkuaW5kZXhPZihzZXR0aW5ncy5pbWFnZUZvcm1hdCkgPT09IC0xKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcihcIkludmFsaWQgaW1hZ2UgZm9ybWF0OiBcIiArIHNldHRpbmdzLmltYWdlRm9ybWF0KTtcbiAgICB9IGVsc2UgaWYgKHR5cGVvZiBpbWFnZUZvcm1hdCA9PT0gXCJ1bmRlZmluZWRcIikge1xuICAgICAgc2V0dGluZ3MuaW1hZ2VGb3JtYXQgPSBJbWFnZUZvcm1hdC5QTkc7XG4gICAgfVxuXG4gICAgcmV0dXJuIHNldHRpbmdzO1xuICB9XG5cbiAgLyoqXG4gICAqIEV4cG9ydHMgdGhlIGltYWdlIGZyb20gdGhlIGdpdmVuIGNhbnZhcyB3aXRoIHRoZSBnaXZlbiBvcHRpb25zXG4gICAqIEBwYXJhbSAge0NhbnZhc30gY2FudmFzXG4gICAqIEBwYXJhbSAge0ltZ2x5S2l0LlJlbmRlclR5cGV9IHJlbmRlclR5cGVcbiAgICogQHBhcmFtICB7SW1nbHlLaXQuSW1hZ2VGb3JtYXR9IGltYWdlRm9ybWF0XG4gICAqIEByZXR1cm4ge3N0cmluZ3xpbWFnZX1cbiAgICovXG4gIHN0YXRpYyBleHBvcnQgKGNhbnZhcywgcmVuZGVyVHlwZSwgaW1hZ2VGb3JtYXQpIHtcbiAgICB2YXIgcmVzdWx0ID0gY2FudmFzLnRvRGF0YVVSTChpbWFnZUZvcm1hdCk7XG4gICAgaWYgKHJlbmRlclR5cGUgPT0gUmVuZGVyVHlwZS5JTUFHRSkge1xuICAgICAgdmFyIGltYWdlO1xuXG4gICAgICAvKiBpc3RhbmJ1bCBpZ25vcmUgZWxzZSAgKi9cbiAgICAgIGlmICh0eXBlb2Ygd2luZG93ID09PSBcInVuZGVmaW5lZFwiKSB7XG4gICAgICAgIC8vIE5vdCBhIGJyb3dzZXIgZW52aXJvbm1lbnRcbiAgICAgICAgdmFyIENhbnZhc0ltYWdlID0gcmVxdWlyZShcImNhbnZhc1wiKS5JbWFnZTtcbiAgICAgICAgaW1hZ2UgPSBuZXcgQ2FudmFzSW1hZ2UoKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGltYWdlID0gbmV3IEltYWdlKCk7XG4gICAgICB9XG5cbiAgICAgIGltYWdlLnNyYyA9IHJlc3VsdDtcbiAgICAgIHJlc3VsdCA9IGltYWdlO1xuICAgIH1cbiAgICByZXR1cm4gcmVzdWx0O1xuICB9XG5cbn1cblxuZXhwb3J0IGRlZmF1bHQgSW1hZ2VFeHBvcnRlcjtcbiIsIlwidXNlIHN0cmljdFwiO1xuLyohXG4gKiBDb3B5cmlnaHQgKGMpIDIwMTMtMjAxNSA5ZWxlbWVudHMgR21iSFxuICpcbiAqIFJlbGVhc2VkIHVuZGVyIEF0dHJpYnV0aW9uLU5vbkNvbW1lcmNpYWwgMy4wIFVucG9ydGVkXG4gKiBodHRwOi8vY3JlYXRpdmVjb21tb25zLm9yZy9saWNlbnNlcy9ieS1uYy8zLjAvXG4gKlxuICogRm9yIGNvbW1lcmNpYWwgdXNlLCBwbGVhc2UgY29udGFjdCB1cyBhdCBjb250YWN0QDllbGVtZW50cy5jb21cbiAqL1xuXG4vKipcbiAqIFJlcHJlc2VudHMgYSAyLWRpbWVuc2lvbmFsIHZlY3RvciB3aGlsZSBwcm92aWRpbmcgbWF0aCBmdW5jdGlvbnMgdG9cbiAqIG1vZGlmeSAvIGNsb25lIHRoZSB2ZWN0b3IuIEZ1bGx5IGNoYWluYWJsZS5cbiAqIEBjbGFzc1xuICogQGFsaWFzIEltZ2x5S2l0LlZlY3RvcjJcbiAqIEBwYXJhbSB7bnVtYmVyfSB4XG4gKiBAcGFyYW0ge251bWJlcn0geVxuICogQHByaXZhdGVcbiAqL1xuY2xhc3MgVmVjdG9yMiB7XG4gIGNvbnN0cnVjdG9yICh4LCB5KSB7XG4gICAgdGhpcy54ID0geDtcbiAgICB0aGlzLnkgPSB5O1xuICAgIGlmICh0eXBlb2YgdGhpcy54ID09PSBcInVuZGVmaW5lZFwiKSB7XG4gICAgICB0aGlzLnggPSAwO1xuICAgIH1cbiAgICBpZiAodHlwZW9mIHRoaXMueSA9PT0gXCJ1bmRlZmluZWRcIikge1xuICAgICAgdGhpcy55ID0gMDtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogU2V0cyB0aGUgZ2l2ZW4gdmFsdWVzXG4gICAqIEBwYXJhbSB7bnVtYmVyfSB4XG4gICAqIEBwYXJhbSB7bnVtYmVyfSB5XG4gICAqIEByZXR1cm4ge1ZlY3RvcjJ9XG4gICAqL1xuICBzZXQgKHgsIHkpIHtcbiAgICB0aGlzLnggPSB4O1xuICAgIHRoaXMueSA9IHk7XG4gICAgcmV0dXJuIHRoaXM7XG4gIH1cblxuICAvKipcbiAgICogQ3JlYXRlcyBhIGNsb25lIG9mIHRoaXMgdmVjdG9yXG4gICAqIEByZXR1cm4ge1ZlY3RvcjJ9XG4gICAqL1xuICBjbG9uZSAoKSB7XG4gICAgcmV0dXJuIG5ldyBWZWN0b3IyKHRoaXMueCwgdGhpcy55KTtcbiAgfVxuXG4gIC8qKlxuICAgKiBDb3BpZXMgdGhlIHZhbHVlcyBvZiB0aGUgZ2l2ZW4gdmVjdG9yXG4gICAqIEBwYXJhbSAge1ZlY3RvcjJ9IG90aGVyXG4gICAqIEByZXR1cm4ge1ZlY3RvcjJ9XG4gICAqL1xuICBjb3B5IChvdGhlcikge1xuICAgIHRoaXMueCA9IG90aGVyLng7XG4gICAgdGhpcy55ID0gb3RoZXIueTtcbiAgICByZXR1cm4gdGhpcztcbiAgfVxuXG4gIC8qKlxuICAgKiBDbGFtcHMgdGhpcyB2ZWN0b3Igd2l0aCB0aGUgZ2l2ZW4gVmVjdG9yMiAvIG51bWJlclxuICAgKiBAcGFyYW0gIHsobnVtYmVyfFZlY3RvcjIpfSBtaW5pbXVtXG4gICAqIEBwYXJhbSAgeyhudW1iZXJ8VmVjdG9yMil9IG1heGltdW1cbiAgICogQHJldHVybiB7VmVjdG9yMn1cbiAgICovXG4gIGNsYW1wIChtaW5pbXVtLCBtYXhpbXVtKSB7XG4gICAgbGV0IG1pbmltdW1TZXQgPSBtaW5pbXVtICE9PSBudWxsICYmIHR5cGVvZiBtaW5pbXVtICE9PSBcInVuZGVmaW5lZFwiO1xuICAgIGxldCBtYXhpbXVtU2V0ID0gbWF4aW11bSAhPT0gbnVsbCAmJiB0eXBlb2YgbWF4aW11bSAhPT0gXCJ1bmRlZmluZWRcIjtcblxuICAgIC8qIGlzdGFuYnVsIGlnbm9yZSBlbHNlICAqL1xuICAgIGlmICghKG1pbmltdW0gaW5zdGFuY2VvZiBWZWN0b3IyKSAmJiBtaW5pbXVtU2V0KSB7XG4gICAgICBtaW5pbXVtID0gbmV3IFZlY3RvcjIobWluaW11bSwgbWluaW11bSk7XG4gICAgfVxuICAgIC8qIGlzdGFuYnVsIGlnbm9yZSBlbHNlICAqL1xuICAgIGlmICghKG1heGltdW0gaW5zdGFuY2VvZiBWZWN0b3IyKSAmJiBtYXhpbXVtU2V0KSB7XG4gICAgICBtYXhpbXVtID0gbmV3IFZlY3RvcjIobWF4aW11bSwgbWF4aW11bSk7XG4gICAgfVxuXG4gICAgaWYgKG1pbmltdW1TZXQpIHtcbiAgICAgIHRoaXMueCA9IE1hdGgubWF4KG1pbmltdW0ueCwgdGhpcy54KTtcbiAgICAgIHRoaXMueSA9IE1hdGgubWF4KG1pbmltdW0ueSwgdGhpcy55KTtcbiAgICB9XG5cbiAgICBpZiAobWF4aW11bVNldCkge1xuICAgICAgdGhpcy54ID0gTWF0aC5taW4obWF4aW11bS54LCB0aGlzLngpO1xuICAgICAgdGhpcy55ID0gTWF0aC5taW4obWF4aW11bS55LCB0aGlzLnkpO1xuICAgIH1cbiAgICByZXR1cm4gdGhpcztcbiAgfVxuXG4gIC8qKlxuICAgKiBEaXZpZGVzIHRoaXMgdmVjdG9yIGJ5IHRoZSBnaXZlbiBWZWN0b3IyIC8gbnVtYmVyXG4gICAqIEBwYXJhbSAgeyhudW1iZXJ8VmVjdG9yMil9IGRpdmlzb3JcbiAgICogQHBhcmFtICB7bnVtYmVyfSBbeV1cbiAgICogQHJldHVybiB7VmVjdG9yMn1cbiAgICovXG4gIGRpdmlkZSAoZGl2aXNvciwgeSkge1xuICAgIGlmIChkaXZpc29yIGluc3RhbmNlb2YgVmVjdG9yMikge1xuICAgICAgdGhpcy54IC89IGRpdmlzb3IueDtcbiAgICAgIHRoaXMueSAvPSBkaXZpc29yLnk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMueCAvPSBkaXZpc29yO1xuICAgICAgdGhpcy55IC89ICh0eXBlb2YgeSA9PT0gXCJ1bmRlZmluZWRcIiA/IGRpdmlzb3IgOiB5KTtcbiAgICB9XG4gICAgcmV0dXJuIHRoaXM7XG4gIH1cblxuICAvKipcbiAgICogU3VidHJhY3RzIHRoZSBnaXZlbiBWZWN0b3IyIC8gbnVtYmVyIGZyb20gdGhpcyB2ZWN0b3JcbiAgICogQHBhcmFtICB7KG51bWJlcnxWZWN0b3IyKX0gc3VidHJhaGVuZFxuICAgKiBAcGFyYW0gIHtudW1iZXJ9IFt5XVxuICAgKiBAcmV0dXJuIHtWZWN0b3IyfVxuICAgKi9cbiAgc3VidHJhY3QgKHN1YnRyYWhlbmQsIHkpIHtcbiAgICBpZiAoc3VidHJhaGVuZCBpbnN0YW5jZW9mIFZlY3RvcjIpIHtcbiAgICAgIHRoaXMueCAtPSBzdWJ0cmFoZW5kLng7XG4gICAgICB0aGlzLnkgLT0gc3VidHJhaGVuZC55O1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLnggLT0gc3VidHJhaGVuZDtcbiAgICAgIHRoaXMueSAtPSAodHlwZW9mIHkgPT09IFwidW5kZWZpbmVkXCIgPyBzdWJ0cmFoZW5kIDogeSk7XG4gICAgfVxuICAgIHJldHVybiB0aGlzO1xuICB9XG5cbiAgLyoqXG4gICAqIE11bHRpcGxpZXMgdGhlIGdpdmVuIFZlY3RvcjIgLyBudW1iZXIgd2l0aCB0aGlzIHZlY3RvclxuICAgKiBAcGFyYW0gIHsobnVtYmVyfFZlY3RvcjIpfSBzdWJ0cmFoZW5kXG4gICAqIEBwYXJhbSAge251bWJlcn0gW3ldXG4gICAqIEByZXR1cm4ge1ZlY3RvcjJ9XG4gICAqL1xuICBtdWx0aXBseSAoZmFjdG9yLCB5KSB7XG4gICAgaWYgKGZhY3RvciBpbnN0YW5jZW9mIFZlY3RvcjIpIHtcbiAgICAgIHRoaXMueCAqPSBmYWN0b3IueDtcbiAgICAgIHRoaXMueSAqPSBmYWN0b3IueTtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy54ICo9IGZhY3RvcjtcbiAgICAgIHRoaXMueSAqPSAodHlwZW9mIHkgPT09IFwidW5kZWZpbmVkXCIgPyBmYWN0b3IgOiB5KTtcbiAgICB9XG4gICAgcmV0dXJuIHRoaXM7XG4gIH1cblxuICAvKipcbiAgICogQWRkcyB0aGUgZ2l2ZW4gVmVjdG9yMiAvIG51bWJlcnMgdG8gdGhpcyB2ZWN0b3JcbiAgICogQHBhcmFtIHsobnVtYmVyfFZlY3RvcjIpfSBhZGRlbmRcbiAgICogQHBhcmFtIHtudW1iZXJ9IFt5XVxuICAgKi9cbiAgYWRkIChhZGRlbmQsIHkpIHtcbiAgICBpZiAoYWRkZW5kIGluc3RhbmNlb2YgVmVjdG9yMikge1xuICAgICAgdGhpcy54ICs9IGFkZGVuZC54O1xuICAgICAgdGhpcy55ICs9IGFkZGVuZC55O1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLnggKz0gYWRkZW5kO1xuICAgICAgdGhpcy55ICs9ICh0eXBlb2YgeSA9PT0gXCJ1bmRlZmluZWRcIiA/IGFkZGVuZCA6IHkpO1xuICAgIH1cbiAgICByZXR1cm4gdGhpcztcbiAgfVxuXG4gIC8qKlxuICAgKiBDaGVja3Mgd2hldGhlciB0aGUgeCBhbmQgeSB2YWx1ZSBhcmUgdGhlIHNhbWUgYXMgdGhlIGdpdmVuIG9uZXNcbiAgICogQHBhcmFtICB7KG51bWJlcnxWZWN0b3IyKX0gdmVjXG4gICAqIEBwYXJhbSAge251bWJlcn0geVxuICAgKiBAcmV0dXJuIHtib29sZWFufVxuICAgKi9cbiAgZXF1YWxzICh2ZWMsIHkpIHtcbiAgICBpZiAodmVjIGluc3RhbmNlb2YgVmVjdG9yMikge1xuICAgICAgcmV0dXJuIHZlYy54ID09PSB0aGlzLnggJiYgdmVjLnkgPT09IHRoaXMueTtcbiAgICB9IGVsc2Uge1xuICAgICAgcmV0dXJuIHZlYyA9PT0gdGhpcy54ICYmIHkgPT09IHRoaXMueTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogRmxpcHMgdGhlIHggYW5kIHkgdmFsdWVzIG9mIHRoaXMgdmVjdG9yXG4gICAqIEByZXR1cm4ge1ZlY3RvcjJ9XG4gICAqL1xuICBmbGlwICgpIHtcbiAgICBsZXQgdGVtcFggPSB0aGlzLng7XG4gICAgdGhpcy54ID0gdGhpcy55O1xuICAgIHRoaXMueSA9IHRlbXBYO1xuICAgIHJldHVybiB0aGlzO1xuICB9XG5cbiAgLyoqXG4gICAqIFJldHVybnMgYSBzdHJpbmcgcmVwcmVzZW50YXRpb24gb2YgdGhpcyB2ZWN0b3JcbiAgICogQHJldHVybiB7U3RyaW5nfVxuICAgKi9cbiAgdG9TdHJpbmcgKCkge1xuICAgIHJldHVybiBcIlZlY3RvcjIoeyB4OiBcIiArIHRoaXMueCArIFwiLCB5OiBcIiArIHRoaXMueSArIFwiIH0pXCI7XG4gIH1cblxufVxuXG5leHBvcnQgZGVmYXVsdCBWZWN0b3IyO1xuIiwiXCJ1c2Ugc3RyaWN0XCI7XG4vKiFcbiAqIENvcHlyaWdodCAoYykgMjAxMy0yMDE1IDllbGVtZW50cyBHbWJIXG4gKlxuICogUmVsZWFzZWQgdW5kZXIgQXR0cmlidXRpb24tTm9uQ29tbWVyY2lhbCAzLjAgVW5wb3J0ZWRcbiAqIGh0dHA6Ly9jcmVhdGl2ZWNvbW1vbnMub3JnL2xpY2Vuc2VzL2J5LW5jLzMuMC9cbiAqXG4gKiBGb3IgY29tbWVyY2lhbCB1c2UsIHBsZWFzZSBjb250YWN0IHVzIGF0IGNvbnRhY3RAOWVsZW1lbnRzLmNvbVxuICovXG5pbXBvcnQgYmx1ZWJpcmQgZnJvbSBcImJsdWViaXJkXCI7XG5pbXBvcnQgSW1hZ2VEaW1lbnNpb25zIGZyb20gXCIuL2ltYWdlLWRpbWVuc2lvbnNcIjtcbmltcG9ydCBWZWN0b3IyIGZyb20gXCIuL21hdGgvdmVjdG9yMlwiO1xuaW1wb3J0IENhbnZhc1JlbmRlcmVyIGZyb20gXCIuLi9yZW5kZXJlcnMvY2FudmFzLXJlbmRlcmVyXCI7XG5pbXBvcnQgV2ViR0xSZW5kZXJlciBmcm9tIFwiLi4vcmVuZGVyZXJzL3dlYmdsLXJlbmRlcmVyXCI7XG5cbi8qKlxuICogSGFuZGxlcyB0aGUgaW1hZ2UgcmVuZGVyaW5nIHByb2Nlc3NcbiAqIEBjbGFzc1xuICogQGFsaWFzIEltZ2x5S2l0LlJlbmRlckltYWdlXG4gKiBAcGFyYW0ge0ltYWdlfSBpbWFnZVxuICogQHBhcmFtIHtBcnJheS48SW1nbHlLaXQuT3BlcmF0aW9uPn0gb3BlcmF0aW9uc1N0YWNrXG4gKiBAcGFyYW0ge3N0cmluZ30gZGltZW5zaW9uc1xuICogQHBhcmFtIHtzdHJpbmd9IHByZWZlcnJlZFJlbmRlcmVyXG4gKiBAcHJpdmF0ZVxuICovXG5jbGFzcyBSZW5kZXJJbWFnZSB7XG4gIGNvbnN0cnVjdG9yIChpbWFnZSwgb3BlcmF0aW9uc1N0YWNrLCBkaW1lbnNpb25zLCBwcmVmZXJyZWRSZW5kZXJlcikge1xuICAgIC8qKlxuICAgICAqIEB0eXBlIHtPYmplY3R9XG4gICAgICogQHByaXZhdGVcbiAgICAgKi9cbiAgICB0aGlzLl9vcHRpb25zID0ge1xuICAgICAgcHJlZmVycmVkUmVuZGVyZXI6IHByZWZlcnJlZFJlbmRlcmVyXG4gICAgfTtcblxuICAgIC8qKlxuICAgICAqIEB0eXBlIHtCb29sZWFufVxuICAgICAqIEBwcml2YXRlXG4gICAgICogQGRlZmF1bHQgZmFsc2VcbiAgICAgKi9cbiAgICB0aGlzLl93ZWJnbEVuYWJsZWQgPSBmYWxzZTtcblxuICAgIC8qKlxuICAgICAqIEB0eXBlIHtSZW5kZXJlcn1cbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqL1xuICAgIHRoaXMuX3JlbmRlcmVyID0gbnVsbDtcblxuICAgIC8qKlxuICAgICAqIEB0eXBlIHtJbWFnZX1cbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqL1xuICAgIHRoaXMuX2ltYWdlID0gaW1hZ2U7XG5cbiAgICAvKipcbiAgICAgKiBAdHlwZSB7QXJyYXkuPEltZ2x5S2l0Lk9wZXJhdGlvbj59XG4gICAgICogQHByaXZhdGVcbiAgICAgKi9cbiAgICB0aGlzLl9zdGFjayA9IG9wZXJhdGlvbnNTdGFjaztcblxuICAgIC8qKlxuICAgICAqIEB0eXBlIHtJbWdseUtpdC5JbWFnZURpbWVuc2lvbnN9XG4gICAgICogQHByaXZhdGVcbiAgICAgKi9cbiAgICB0aGlzLl9kaW1lbnNpb25zID0gbmV3IEltYWdlRGltZW5zaW9ucyhkaW1lbnNpb25zKTtcblxuICAgIC8qKlxuICAgICAqIEB0eXBlIHtWZWN0b3IyfVxuICAgICAqIEBwcml2YXRlXG4gICAgICovXG4gICAgdGhpcy5faW5pdGlhbERpbWVuc2lvbnMgPSBuZXcgVmVjdG9yMih0aGlzLl9pbWFnZS53aWR0aCwgdGhpcy5faW1hZ2UuaGVpZ2h0KTtcblxuICAgIHRoaXMuX2luaXRSZW5kZXJlcigpO1xuICB9XG5cbiAgLyoqXG4gICAqIENyZWF0ZXMgYSByZW5kZXJlciAoY2FudmFzIG9yIHdlYmdsLCBkZXBlbmRpbmcgb24gc3VwcG9ydClcbiAgICogQHJldHVybiB7UHJvbWlzZX1cbiAgICogQHByaXZhdGVcbiAgICovXG4gIF9pbml0UmVuZGVyZXIgKCkge1xuICAgIC8qIGlzdGFuYnVsIGlnbm9yZSBpZiAqL1xuICAgIGlmIChXZWJHTFJlbmRlcmVyLmlzU3VwcG9ydGVkKCkgJiYgdGhpcy5fb3B0aW9ucy5wcmVmZXJyZWRSZW5kZXJlciAhPT0gXCJjYW52YXNcIikge1xuICAgICAgdGhpcy5fcmVuZGVyZXIgPSBuZXcgV2ViR0xSZW5kZXJlcih0aGlzLl9pbml0aWFsRGltZW5zaW9ucyk7XG4gICAgICB0aGlzLl93ZWJnbEVuYWJsZWQgPSB0cnVlO1xuICAgIH0gZWxzZSBpZiAoQ2FudmFzUmVuZGVyZXIuaXNTdXBwb3J0ZWQoKSkge1xuICAgICAgdGhpcy5fcmVuZGVyZXIgPSBuZXcgQ2FudmFzUmVuZGVyZXIodGhpcy5faW5pdGlhbERpbWVuc2lvbnMpO1xuICAgICAgdGhpcy5fd2ViZ2xFbmFibGVkID0gZmFsc2U7XG4gICAgfVxuXG4gICAgLyogaXN0YW5idWwgaWdub3JlIGlmICovXG4gICAgaWYgKHRoaXMuX3JlbmRlcmVyID09PSBudWxsKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoXCJOZWl0aGVyIENhbnZhcyBub3IgV2ViR0wgcmVuZGVyZXIgYXJlIHN1cHBvcnRlZC5cIik7XG4gICAgfVxuXG4gICAgdGhpcy5fcmVuZGVyZXIuZHJhd0ltYWdlKHRoaXMuX2ltYWdlKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBSZW5kZXJzIHRoZSBpbWFnZVxuICAgKiBAcmV0dXJuIHtQcm9taXNlfVxuICAgKi9cbiAgcmVuZGVyICgpIHtcbiAgICB2YXIgc2VsZiA9IHRoaXM7XG4gICAgcmV0dXJuIGJsdWViaXJkXG4gICAgICAubWFwKHRoaXMuX3N0YWNrLCBmdW5jdGlvbiAob3BlcmF0aW9uKSB7XG4gICAgICAgIHJldHVybiBvcGVyYXRpb24udmFsaWRhdGVTZXR0aW5ncygpO1xuICAgICAgfSlcbiAgICAgIC50aGVuKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIGJsdWViaXJkLm1hcChzZWxmLl9zdGFjaywgZnVuY3Rpb24gKG9wZXJhdGlvbikge1xuICAgICAgICAgIHJldHVybiBvcGVyYXRpb24ucmVuZGVyKHNlbGYuX3JlbmRlcmVyKTtcbiAgICAgICAgfSwgeyBjb25jdXJyZW5jeTogMSB9KS50aGVuKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICByZXR1cm4gc2VsZi5fcmVuZGVyZXIucmVuZGVyRmluYWwoKTtcbiAgICAgICAgfSk7XG4gICAgICB9KVxuICAgICAgLnRoZW4oZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgaW5pdGlhbFNpemUgPSBzZWxmLl9yZW5kZXJlci5nZXRTaXplKCk7XG4gICAgICAgIHZhciBmaW5hbERpbWVuc2lvbnMgPSBzZWxmLl9kaW1lbnNpb25zLmNhbGN1bGF0ZUZpbmFsRGltZW5zaW9ucyhpbml0aWFsU2l6ZSk7XG5cbiAgICAgICAgaWYgKGZpbmFsRGltZW5zaW9ucy5lcXVhbHMoaW5pdGlhbFNpemUpKSB7XG4gICAgICAgICAgLy8gTm8gbmVlZCB0byByZXNpemVcbiAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gc2VsZi5fcmVuZGVyZXIucmVzaXplVG8oZmluYWxEaW1lbnNpb25zKTtcbiAgICAgIH0pO1xuICB9XG5cbiAgLyoqXG4gICAqIFJldHVybnMgdGhlIHJlbmRlcmVyXG4gICAqIEByZXR1cm4ge1JlbmRlcmVyfVxuICAgKi9cbiAgZ2V0UmVuZGVyZXIgKCkge1xuICAgIHJldHVybiB0aGlzLl9yZW5kZXJlcjtcbiAgfVxufVxuXG5leHBvcnQgZGVmYXVsdCBSZW5kZXJJbWFnZTtcbiIsIlwidXNlIHN0cmljdFwiO1xuLyohXG4gKiBDb3B5cmlnaHQgKGMpIDIwMTMtMjAxNSA5ZWxlbWVudHMgR21iSFxuICpcbiAqIFJlbGVhc2VkIHVuZGVyIEF0dHJpYnV0aW9uLU5vbkNvbW1lcmNpYWwgMy4wIFVucG9ydGVkXG4gKiBodHRwOi8vY3JlYXRpdmVjb21tb25zLm9yZy9saWNlbnNlcy9ieS1uYy8zLjAvXG4gKlxuICogRm9yIGNvbW1lcmNpYWwgdXNlLCBwbGVhc2UgY29udGFjdCB1cyBhdCBjb250YWN0QDllbGVtZW50cy5jb21cbiAqL1xuXG5pbXBvcnQgVmVjdG9yMiBmcm9tIFwiLi9tYXRoL3ZlY3RvcjJcIjtcblxuLyoqXG4gKiBQcm92aWRlcyB1dGlsaXR5IGZ1bmN0aW9ucyBmb3IgaW50ZXJuYWwgdXNlXG4gKiBAY2xhc3NcbiAqIEBhbGlhcyBJbWdseUtpdC5VdGlsc1xuICogQHByaXZhdGVcbiAqL1xuY2xhc3MgVXRpbHMge1xuXG4gIC8qKlxuICAgKiBDaGVja3MgaWYgdGhlIGdpdmVuIG9iamVjdCBpcyBhbiBBcnJheVxuICAgKiBAcGFyYW0gIHtPYmplY3R9ICBvYmplY3RcbiAgICogQHJldHVybiB7Qm9vbGVhbn1cbiAgICovXG4gIHN0YXRpYyBpc0FycmF5IChvYmplY3QpIHtcbiAgICByZXR1cm4gT2JqZWN0LnByb3RvdHlwZS50b1N0cmluZy5jYWxsKG9iamVjdCkgPT09IFwiW29iamVjdCBBcnJheV1cIjtcbiAgfVxuXG4gIC8qKlxuICAgKiBSZXR1cm5zIHRoZSBpdGVtcyBzZWxlY3RlZCBieSB0aGUgZ2l2ZW4gc2VsZWN0b3JcbiAgICogQHBhcmFtICB7QXJyYXl9IGl0ZW1zXG4gICAqIEBwYXJhbSAge0ltZ2x5S2l0flNlbGVjdG9yfSBzZWxlY3RvciAtIFRoZSBzZWxlY3RvclxuICAgKiBAcmV0dXJuIHtBcnJheX0gVGhlIHNlbGVjdGVkIGl0ZW1zXG4gICAqL1xuICBzdGF0aWMgc2VsZWN0IChpdGVtcywgc2VsZWN0b3IpIHtcbiAgICBpZiAoc2VsZWN0b3IgPT09IG51bGwpIHtcbiAgICAgIHJldHVybiBpdGVtcztcbiAgICB9XG5cbiAgICAvLyBUdXJuIHN0cmluZyBwYXJhbWV0ZXIgaW50byBhbiBhcnJheVxuICAgIGlmICh0eXBlb2Ygc2VsZWN0b3IgPT09IFwic3RyaW5nXCIpIHtcbiAgICAgIHNlbGVjdG9yID0gc2VsZWN0b3Iuc3BsaXQoXCIsXCIpLm1hcChmdW5jdGlvbiAoaWRlbnRpZmllcikge1xuICAgICAgICByZXR1cm4gaWRlbnRpZmllci50cmltKCk7XG4gICAgICB9KTtcbiAgICB9XG5cbiAgICAvLyBUdXJuIGFycmF5IHBhcmFtZXRlciBpbnRvIGFuIG9iamVjdCB3aXRoIGBvbmx5YFxuICAgIGlmIChVdGlscy5pc0FycmF5KHNlbGVjdG9yKSkge1xuICAgICAgc2VsZWN0b3IgPSB7IG9ubHk6IHNlbGVjdG9yIH07XG4gICAgfVxuXG4gICAgaWYgKHR5cGVvZiBzZWxlY3Rvci5vbmx5ICE9PSBcInVuZGVmaW5lZFwiKSB7XG4gICAgICAvLyBTZWxlY3Qgb25seSB0aGUgZ2l2ZW4gaWRlbnRpZmllcnNcbiAgICAgIHJldHVybiBpdGVtcy5maWx0ZXIoZnVuY3Rpb24gKGl0ZW0pIHtcbiAgICAgICAgcmV0dXJuIHNlbGVjdG9yLm9ubHkuaW5kZXhPZihpdGVtKSAhPT0gLTE7XG4gICAgICB9KTtcbiAgICB9IGVsc2UgaWYodHlwZW9mIHNlbGVjdG9yLmV4Y2VwdCAhPT0gXCJ1bmRlZmluZWRcIikge1xuICAgICAgLy8gU2VsZWN0IGFsbCBidXQgdGhlIGdpdmVuIGlkZW50aWZpZXJzXG4gICAgICByZXR1cm4gaXRlbXMuZmlsdGVyKGZ1bmN0aW9uIChpdGVtKSB7XG4gICAgICAgIHJldHVybiBzZWxlY3Rvci5leGNlcHQuaW5kZXhPZihpdGVtKSA9PT0gLTE7XG4gICAgICB9KTtcbiAgICB9XG5cbiAgICB0aHJvdyBuZXcgRXJyb3IoXCJVdGlscyNzZWxlY3QgZmFpbGVkIHRvIGZpbHRlciBpdGVtcy5cIik7XG4gIH1cblxuICAvKipcbiAgICogUmV0dXJucyB0aGUgZ2l2ZW4gb2JqZWN0J3MgdmFsdWVzIGFzIGFuIGFycmF5XG4gICAqIEBwYXJhbSB7T2JqZWN0fSBvYmplY3RcbiAgICogQHJldHVybnMge0FycmF5PCo+fVxuICAgKi9cbiAgc3RhdGljIHZhbHVlcyAob2JqZWN0KSB7XG4gICAgdmFyIHZhbHVlcyA9IFtdO1xuICAgIGZvciAodmFyIGtleSBpbiBvYmplY3QpIHtcbiAgICAgIHZhbHVlcy5wdXNoKG9iamVjdFtrZXldKTtcbiAgICB9XG4gICAgcmV0dXJuIHZhbHVlcztcbiAgfVxuXG4gIC8qKlxuICAgKiBDaGVja3MgaWYgdGhlIGdpdmVuIG9iamVjdCBpcyBhIERPTSBlbGVtZW50XG4gICAqIEBwYXJhbSAge09iamVjdH0gIG9cbiAgICogQHJldHVybiB7Qm9vbGVhbn1cbiAgICovXG4gIC8qIGlzdGFuYnVsIGlnbm9yZSBuZXh0ICovXG4gIHN0YXRpYyBpc0RPTUVsZW1lbnQgKG8pIHtcbiAgICByZXR1cm4gKFxuICAgICAgdHlwZW9mIEhUTUxFbGVtZW50ID09PSBcIm9iamVjdFwiID8gbyBpbnN0YW5jZW9mIEhUTUxFbGVtZW50IDpcbiAgICAgIG8gJiYgdHlwZW9mIG8gPT09IFwib2JqZWN0XCIgJiYgbyAhPT0gbnVsbCAmJiBvLm5vZGVUeXBlID09PSAxICYmIHR5cGVvZiBvLm5vZGVOYW1lPT09XCJzdHJpbmdcIlxuICAgICk7XG4gIH1cblxuICAvKipcbiAgICogR2V0cyB0aGUgeCBhbmQgeSBwb3NpdGlvbiBmb3IgdGhlIGdpdmVuIGV2ZW50LlxuICAgKiBAcGFyYW0ge0V2ZW50fSBlXG4gICAqIEByZXR1cm4ge1ZlY3RvcjJ9XG4gICAqL1xuICBzdGF0aWMgZ2V0RXZlbnRQb3NpdGlvbiAoZSkge1xuICAgIGxldCB4ID0gZS5wYWdlWDtcbiAgICBsZXQgeSA9IGUucGFnZVk7XG4gICAgaWYgKGUudHlwZS5pbmRleE9mKFwidG91Y2hcIikgIT09IC0xKSB7XG4gICAgICB4ID0gZS50b3VjaGVzWzBdLnBhZ2VYO1xuICAgICAgeSA9IGUudG91Y2hlc1swXS5wYWdlWTtcbiAgICB9XG4gICAgcmV0dXJuIG5ldyBWZWN0b3IyKHgsIHkpO1xuICB9XG5cbn1cblxuZXhwb3J0IGRlZmF1bHQgVXRpbHM7XG4iLCJcInVzZSBzdHJpY3RcIjtcbi8qIVxuICogQ29weXJpZ2h0IChjKSAyMDEzLTIwMTUgOWVsZW1lbnRzIEdtYkhcbiAqXG4gKiBSZWxlYXNlZCB1bmRlciBBdHRyaWJ1dGlvbi1Ob25Db21tZXJjaWFsIDMuMCBVbnBvcnRlZFxuICogaHR0cDovL2NyZWF0aXZlY29tbW9ucy5vcmcvbGljZW5zZXMvYnktbmMvMy4wL1xuICpcbiAqIEZvciBjb21tZXJjaWFsIHVzZSwgcGxlYXNlIGNvbnRhY3QgdXMgYXQgY29udGFjdEA5ZWxlbWVudHMuY29tXG4gKi9cblxuaW1wb3J0IE9wZXJhdGlvbiBmcm9tIFwiLi9vcGVyYXRpb25cIjtcbmltcG9ydCBQcmltaXRpdmVzU3RhY2sgZnJvbSBcIi4vZmlsdGVycy9wcmltaXRpdmVzLXN0YWNrXCI7XG5pbXBvcnQgQnJpZ2h0bmVzc1ByaW1pdGl2ZSBmcm9tIFwiLi9maWx0ZXJzL3ByaW1pdGl2ZXMvYnJpZ2h0bmVzc1wiO1xuXG4vKipcbiAqIEBjbGFzc1xuICogQGFsaWFzIEltZ2x5S2l0Lk9wZXJhdGlvbnMuQnJpZ2h0bmVzc09wZXJhdGlvblxuICogQGV4dGVuZHMgSW1nbHlLaXQuT3BlcmF0aW9uXG4gKi9cbmNsYXNzIEJyaWdodG5lc3NPcGVyYXRpb24gZXh0ZW5kcyBPcGVyYXRpb24ge1xuICBjb25zdHJ1Y3RvciAoLi4uYXJncykge1xuICAgIHRoaXMuYXZhaWxhYmxlT3B0aW9ucyA9IHtcbiAgICAgIGJyaWdodG5lc3M6IHsgdHlwZTogXCJudW1iZXJcIiwgZGVmYXVsdDogMCB9XG4gICAgfTtcblxuICAgIHN1cGVyKC4uLmFyZ3MpO1xuICB9XG5cbiAgLyoqXG4gICAqIEEgdW5pcXVlIHN0cmluZyB0aGF0IGlkZW50aWZpZXMgdGhpcyBvcGVyYXRpb24uIENhbiBiZSB1c2VkIHRvIHNlbGVjdFxuICAgKiBvcGVyYXRpb25zLlxuICAgKiBAdHlwZSB7U3RyaW5nfVxuICAgKi9cbiAgZ2V0IGlkZW50aWZpZXIgKCkge1xuICAgIHJldHVybiBcImJyaWdodG5lc3NcIjtcbiAgfVxuXG4gIC8qKlxuICAgKiBSZW5kZXJzIHRoZSBicmlnaHRuZXNzIHVzaW5nIFdlYkdMXG4gICAqIEBwYXJhbSAge1dlYkdMUmVuZGVyZXJ9IHJlbmRlcmVyXG4gICAqIEBvdmVycmlkZVxuICAgKi9cbiAgX3JlbmRlcldlYkdMIChyZW5kZXJlcikge1xuICAgIHRoaXMuX3JlbmRlcihyZW5kZXJlcik7XG4gIH1cblxuICAvKipcbiAgICogUmVuZGVycyB0aGUgYnJpZ2h0bmVzcyB1c2luZyBDYW52YXMyRFxuICAgKiBAcGFyYW0ge0NhbnZhc1JlbmRlcmVyfSByZW5kZXJlclxuICAgKiBAb3ZlcnJpZGVcbiAgICovXG4gIF9yZW5kZXJDYW52YXMgKHJlbmRlcmVyKSB7XG4gICAgdGhpcy5fcmVuZGVyKHJlbmRlcmVyKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBSZW5kZXJzIHRoZSBicmlnaHRuZXNzIChhbGwgcmVuZGVyZXJzIHN1cHBvcnRlZClcbiAgICogQHBhcmFtIHtSZW5kZXJlcn0gcmVuZGVyZXJcbiAgICogQHByaXZhdGVcbiAgICovXG4gIF9yZW5kZXIgKHJlbmRlcmVyKSB7XG4gICAgdmFyIHN0YWNrID0gbmV3IFByaW1pdGl2ZXNTdGFjaygpO1xuXG4gICAgc3RhY2suYWRkKG5ldyBCcmlnaHRuZXNzUHJpbWl0aXZlKHtcbiAgICAgIGJyaWdodG5lc3M6IHRoaXMuX29wdGlvbnMuYnJpZ2h0bmVzc1xuICAgIH0pKTtcblxuICAgIHN0YWNrLnJlbmRlcihyZW5kZXJlcik7XG4gIH1cbn1cblxuZXhwb3J0IGRlZmF1bHQgQnJpZ2h0bmVzc09wZXJhdGlvbjtcbiIsIlwidXNlIHN0cmljdFwiO1xuLyohXG4gKiBDb3B5cmlnaHQgKGMpIDIwMTMtMjAxNSA5ZWxlbWVudHMgR21iSFxuICpcbiAqIFJlbGVhc2VkIHVuZGVyIEF0dHJpYnV0aW9uLU5vbkNvbW1lcmNpYWwgMy4wIFVucG9ydGVkXG4gKiBodHRwOi8vY3JlYXRpdmVjb21tb25zLm9yZy9saWNlbnNlcy9ieS1uYy8zLjAvXG4gKlxuICogRm9yIGNvbW1lcmNpYWwgdXNlLCBwbGVhc2UgY29udGFjdCB1cyBhdCBjb250YWN0QDllbGVtZW50cy5jb21cbiAqL1xuXG5pbXBvcnQgT3BlcmF0aW9uIGZyb20gXCIuL29wZXJhdGlvblwiO1xuaW1wb3J0IFByaW1pdGl2ZXNTdGFjayBmcm9tIFwiLi9maWx0ZXJzL3ByaW1pdGl2ZXMtc3RhY2tcIjtcbmltcG9ydCBDb250cmFzdFByaW1pdGl2ZSBmcm9tIFwiLi9maWx0ZXJzL3ByaW1pdGl2ZXMvY29udHJhc3RcIjtcblxuLyoqXG4gKiBAY2xhc3NcbiAqIEBhbGlhcyBJbWdseUtpdC5PcGVyYXRpb25zLkNvbnRyYXN0T3BlcmF0aW9uXG4gKiBAZXh0ZW5kcyBJbWdseUtpdC5PcGVyYXRpb25cbiAqL1xuY2xhc3MgQ29udHJhc3RPcGVyYXRpb24gZXh0ZW5kcyBPcGVyYXRpb24ge1xuICBjb25zdHJ1Y3RvciAoLi4uYXJncykge1xuICAgIHRoaXMuYXZhaWxhYmxlT3B0aW9ucyA9IHtcbiAgICAgIGNvbnRyYXN0OiB7IHR5cGU6IFwibnVtYmVyXCIsIGRlZmF1bHQ6IDEuMCB9XG4gICAgfTtcblxuICAgIHN1cGVyKC4uLmFyZ3MpO1xuICB9XG5cbiAgLyoqXG4gICAqIEEgdW5pcXVlIHN0cmluZyB0aGF0IGlkZW50aWZpZXMgdGhpcyBvcGVyYXRpb24uIENhbiBiZSB1c2VkIHRvIHNlbGVjdFxuICAgKiBvcGVyYXRpb25zLlxuICAgKiBAdHlwZSB7U3RyaW5nfVxuICAgKi9cbiAgZ2V0IGlkZW50aWZpZXIgKCkge1xuICAgIHJldHVybiBcImNvbnRyYXN0XCI7XG4gIH1cblxuICAvKipcbiAgICogUmVuZGVycyB0aGUgY29udHJhc3QgdXNpbmcgV2ViR0xcbiAgICogQHBhcmFtICB7V2ViR0xSZW5kZXJlcn0gcmVuZGVyZXJcbiAgICogQG92ZXJyaWRlXG4gICAqL1xuICBfcmVuZGVyV2ViR0wgKHJlbmRlcmVyKSB7XG4gICAgdGhpcy5fcmVuZGVyKHJlbmRlcmVyKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBSZW5kZXJzIHRoZSBjb250cmFzdCB1c2luZyBDYW52YXMyRFxuICAgKiBAcGFyYW0ge0NhbnZhc1JlbmRlcmVyfSByZW5kZXJlclxuICAgKiBAb3ZlcnJpZGVcbiAgICovXG4gIF9yZW5kZXJDYW52YXMgKHJlbmRlcmVyKSB7XG4gICAgdGhpcy5fcmVuZGVyKHJlbmRlcmVyKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBSZW5kZXJzIHRoZSBjb250cmFzdCAoYWxsIHJlbmRlcmVycyBzdXBwb3J0ZWQpXG4gICAqIEBwYXJhbSAge1JlbmRlcmVyfSByZW5kZXJlclxuICAgKiBAcHJpdmF0ZVxuICAgKi9cbiAgX3JlbmRlciAocmVuZGVyZXIpIHtcbiAgICB2YXIgc3RhY2sgPSBuZXcgUHJpbWl0aXZlc1N0YWNrKCk7XG5cbiAgICBzdGFjay5hZGQobmV3IENvbnRyYXN0UHJpbWl0aXZlKHtcbiAgICAgIGNvbnRyYXN0OiB0aGlzLl9vcHRpb25zLmNvbnRyYXN0XG4gICAgfSkpO1xuXG4gICAgc3RhY2sucmVuZGVyKHJlbmRlcmVyKTtcbiAgfVxufVxuXG5leHBvcnQgZGVmYXVsdCBDb250cmFzdE9wZXJhdGlvbjtcbiIsIlwidXNlIHN0cmljdFwiO1xuLyohXG4gKiBDb3B5cmlnaHQgKGMpIDIwMTMtMjAxNSA5ZWxlbWVudHMgR21iSFxuICpcbiAqIFJlbGVhc2VkIHVuZGVyIEF0dHJpYnV0aW9uLU5vbkNvbW1lcmNpYWwgMy4wIFVucG9ydGVkXG4gKiBodHRwOi8vY3JlYXRpdmVjb21tb25zLm9yZy9saWNlbnNlcy9ieS1uYy8zLjAvXG4gKlxuICogRm9yIGNvbW1lcmNpYWwgdXNlLCBwbGVhc2UgY29udGFjdCB1cyBhdCBjb250YWN0QDllbGVtZW50cy5jb21cbiAqL1xuXG5pbXBvcnQgT3BlcmF0aW9uIGZyb20gXCIuL29wZXJhdGlvblwiO1xuaW1wb3J0IFZlY3RvcjIgZnJvbSBcIi4uL2xpYi9tYXRoL3ZlY3RvcjJcIjtcblxuLyoqXG4gKiBBbiBvcGVyYXRpb24gdGhhdCBjYW4gY3JvcCBvdXQgYSBwYXJ0IG9mIHRoZSBpbWFnZVxuICpcbiAqIEBjbGFzc1xuICogQGFsaWFzIEltZ2x5S2l0Lk9wZXJhdGlvbnMuQ3JvcE9wZXJhdGlvblxuICogQGV4dGVuZHMgSW1nbHlLaXQuT3BlcmF0aW9uXG4gKi9cbmNsYXNzIENyb3BPcGVyYXRpb24gZXh0ZW5kcyBPcGVyYXRpb24ge1xuICBjb25zdHJ1Y3RvciAoLi4uYXJncykge1xuICAgIHRoaXMuYXZhaWxhYmxlT3B0aW9ucyA9IHtcbiAgICAgIHN0YXJ0OiB7IHR5cGU6IFwidmVjdG9yMlwiLCByZXF1aXJlZDogdHJ1ZSwgZGVmYXVsdDogbmV3IFZlY3RvcjIoMCwgMCkgfSxcbiAgICAgIGVuZDogeyB0eXBlOiBcInZlY3RvcjJcIiwgcmVxdWlyZWQ6IHRydWUsIGRlZmF1bHQ6IG5ldyBWZWN0b3IyKDEsIDEpIH1cbiAgICB9O1xuXG4gICAgLyoqXG4gICAgICogVGhlIGZyYWdtZW50IHNoYWRlciB1c2VkIGZvciB0aGlzIG9wZXJhdGlvblxuICAgICAqL1xuICAgIHRoaXMuZnJhZ21lbnRTaGFkZXIgPSBgXG4gICAgICBwcmVjaXNpb24gbWVkaXVtcCBmbG9hdDtcbiAgICAgIHVuaWZvcm0gc2FtcGxlcjJEIHVfaW1hZ2U7XG4gICAgICB2YXJ5aW5nIHZlYzIgdl90ZXhDb29yZDtcbiAgICAgIHVuaWZvcm0gdmVjMiB1X2Nyb3BTdGFydDtcbiAgICAgIHVuaWZvcm0gdmVjMiB1X2Nyb3BFbmQ7XG5cbiAgICAgIHZvaWQgbWFpbigpIHtcbiAgICAgICAgdmVjMiBzaXplID0gdV9jcm9wRW5kIC0gdV9jcm9wU3RhcnQ7XG4gICAgICAgIGdsX0ZyYWdDb2xvciA9IHRleHR1cmUyRCh1X2ltYWdlLCB2X3RleENvb3JkICogc2l6ZSArIHVfY3JvcFN0YXJ0KTtcbiAgICAgIH1cbiAgICBgO1xuXG4gICAgc3VwZXIoLi4uYXJncyk7XG4gIH1cblxuICAvKipcbiAgICogQSB1bmlxdWUgc3RyaW5nIHRoYXQgaWRlbnRpZmllcyB0aGlzIG9wZXJhdGlvbi4gQ2FuIGJlIHVzZWQgdG8gc2VsZWN0XG4gICAqIG9wZXJhdGlvbnMuXG4gICAqIEB0eXBlIHtTdHJpbmd9XG4gICAqL1xuICBnZXQgaWRlbnRpZmllciAoKSB7XG4gICAgcmV0dXJuIFwiY3JvcFwiO1xuICB9XG5cbiAgLyoqXG4gICAqIFJvdGF0ZXMgYW5kIGNyb3BzIHRoZSBpbWFnZSB1c2luZyBXZWJHTFxuICAgKiBAcGFyYW0gIHtXZWJHTFJlbmRlcmVyfSByZW5kZXJlclxuICAgKiBAb3ZlcnJpZGVcbiAgICogQHByaXZhdGVcbiAgICovXG4gIC8qIGlzdGFuYnVsIGlnbm9yZSBuZXh0ICovXG4gIF9yZW5kZXJXZWJHTCAocmVuZGVyZXIpIHtcbiAgICB2YXIgY2FudmFzID0gcmVuZGVyZXIuZ2V0Q2FudmFzKCk7XG4gICAgdmFyIGNhbnZhc1NpemUgPSBuZXcgVmVjdG9yMihjYW52YXMud2lkdGgsIGNhbnZhcy5oZWlnaHQpO1xuXG4gICAgdmFyIHN0YXJ0ID0gdGhpcy5fb3B0aW9ucy5zdGFydC5jbG9uZSgpO1xuICAgIHZhciBlbmQgPSB0aGlzLl9vcHRpb25zLmVuZC5jbG9uZSgpO1xuXG4gICAgaWYgKHRoaXMuX29wdGlvbnMubnVtYmVyRm9ybWF0ID09PSBcImFic29sdXRlXCIpIHtcbiAgICAgIHN0YXJ0LmRpdmlkZShjYW52YXNTaXplKTtcbiAgICAgIGVuZC5kaXZpZGUoY2FudmFzU2l6ZSk7XG4gICAgfVxuXG4gICAgLy8gMC4uMSA+IDEuLjAgb24geS1heGlzXG4gICAgdmFyIG9yaWdpbmFsU3RhcnRZID0gc3RhcnQueTtcbiAgICBzdGFydC55ID0gMSAtIGVuZC55O1xuICAgIGVuZC55ID0gMSAtIG9yaWdpbmFsU3RhcnRZO1xuXG4gICAgLy8gVGhlIG5ldyBzaXplXG4gICAgdmFyIG5ld0RpbWVuc2lvbnMgPSB0aGlzLmdldE5ld0RpbWVuc2lvbnMocmVuZGVyZXIpO1xuXG4gICAgLy8gUmVzaXplIHRoZSBjYW52YXNcbiAgICBjYW52YXMud2lkdGggPSBuZXdEaW1lbnNpb25zLng7XG4gICAgY2FudmFzLmhlaWdodCA9IG5ld0RpbWVuc2lvbnMueTtcblxuICAgIC8vIFJ1biB0aGUgY3JvcHBpbmcgc2hhZGVyXG4gICAgcmVuZGVyZXIucnVuU2hhZGVyKG51bGwsIHRoaXMuZnJhZ21lbnRTaGFkZXIsIHtcbiAgICAgIHVuaWZvcm1zOiB7XG4gICAgICAgIHVfY3JvcFN0YXJ0OiB7IHR5cGU6IFwiMmZcIiwgdmFsdWU6IFtzdGFydC54LCBzdGFydC55XSB9LFxuICAgICAgICB1X2Nyb3BFbmQ6IHsgdHlwZTogXCIyZlwiLCB2YWx1ZTogW2VuZC54LCBlbmQueV0gfVxuICAgICAgfVxuICAgIH0pO1xuICB9XG5cbiAgLyoqXG4gICAqIENyb3BzIHRoZSBpbWFnZSB1c2luZyBDYW52YXNcbiAgICogQHBhcmFtIHtDYW52YXNSZW5kZXJlcn0gcmVuZGVyZXJcbiAgICogQG92ZXJyaWRlXG4gICAqIEBwcml2YXRlXG4gICAqL1xuICBfcmVuZGVyQ2FudmFzIChyZW5kZXJlcikge1xuICAgIHZhciBjYW52YXMgPSByZW5kZXJlci5nZXRDYW52YXMoKTtcbiAgICB2YXIgZGltZW5zaW9ucyA9IG5ldyBWZWN0b3IyKGNhbnZhcy53aWR0aCwgY2FudmFzLmhlaWdodCk7XG5cbiAgICB2YXIgbmV3RGltZW5zaW9ucyA9IHRoaXMuZ2V0TmV3RGltZW5zaW9ucyhyZW5kZXJlcik7XG5cbiAgICAvLyBDcmVhdGUgYSB0ZW1wb3JhcnkgY2FudmFzIHRvIGRyYXcgdG9cbiAgICB2YXIgbmV3Q2FudmFzID0gcmVuZGVyZXIuY3JlYXRlQ2FudmFzKCk7XG4gICAgbmV3Q2FudmFzLndpZHRoID0gbmV3RGltZW5zaW9ucy54O1xuICAgIG5ld0NhbnZhcy5oZWlnaHQgPSBuZXdEaW1lbnNpb25zLnk7XG4gICAgdmFyIG5ld0NvbnRleHQgPSBuZXdDYW52YXMuZ2V0Q29udGV4dChcIjJkXCIpO1xuXG4gICAgLy8gVGhlIHVwcGVyIGxlZnQgY29ybmVyIG9mIHRoZSBjcm9wcGVkIGFyZWEgb24gdGhlIG9yaWdpbmFsIGltYWdlXG4gICAgdmFyIHN0YXJ0UG9zaXRpb24gPSB0aGlzLl9vcHRpb25zLnN0YXJ0LmNsb25lKCk7XG5cbiAgICBpZiAodGhpcy5fb3B0aW9ucy5udW1iZXJGb3JtYXQgPT09IFwicmVsYXRpdmVcIikge1xuICAgICAgc3RhcnRQb3NpdGlvbi5tdWx0aXBseShkaW1lbnNpb25zKTtcbiAgICB9XG5cbiAgICAvLyBEcmF3IHRoZSBzb3VyY2UgY2FudmFzIG9udG8gdGhlIG5ldyBvbmVcbiAgICBuZXdDb250ZXh0LmRyYXdJbWFnZShjYW52YXMsXG4gICAgICBzdGFydFBvc2l0aW9uLngsIHN0YXJ0UG9zaXRpb24ueSwgLy8gc291cmNlIHgsIHlcbiAgICAgIG5ld0RpbWVuc2lvbnMueCwgbmV3RGltZW5zaW9ucy55LCAvLyBzb3VyY2UgZGltZW5zaW9uc1xuICAgICAgMCwgMCwgLy8gZGVzdGluYXRpb24geCwgeVxuICAgICAgbmV3RGltZW5zaW9ucy54LCBuZXdEaW1lbnNpb25zLnkgLy8gZGVzdGluYXRpb24gZGltZW5zaW9uc1xuICAgICAgKTtcblxuICAgIC8vIFNldCB0aGUgbmV3IGNhbnZhc1xuICAgIHJlbmRlcmVyLnNldENhbnZhcyhuZXdDYW52YXMpO1xuICB9XG5cbiAgLyoqXG4gICAqIEdldHMgdGhlIG5ldyBkaW1lbnNpb25zXG4gICAqIEBwYXJhbSB7UmVuZGVyZXJ9IHJlbmRlcmVyXG4gICAqIEBwYXJhbSB7VmVjdG9yMn0gW2RpbWVuc2lvbnNdXG4gICAqIEByZXR1cm4ge1ZlY3RvcjJ9XG4gICAqL1xuICBnZXROZXdEaW1lbnNpb25zIChyZW5kZXJlciwgZGltZW5zaW9ucykge1xuICAgIGxldCBjYW52YXMgPSByZW5kZXJlci5nZXRDYW52YXMoKTtcbiAgICBkaW1lbnNpb25zID0gZGltZW5zaW9ucyB8fCBuZXcgVmVjdG9yMihjYW52YXMud2lkdGgsIGNhbnZhcy5oZWlnaHQpO1xuXG4gICAgbGV0IG5ld0RpbWVuc2lvbnMgPSB0aGlzLl9vcHRpb25zLmVuZFxuICAgICAgLmNsb25lKClcbiAgICAgIC5zdWJ0cmFjdCh0aGlzLl9vcHRpb25zLnN0YXJ0KTtcblxuICAgIGlmICh0aGlzLl9vcHRpb25zLm51bWJlckZvcm1hdCA9PT0gXCJyZWxhdGl2ZVwiKSB7XG4gICAgICBuZXdEaW1lbnNpb25zLm11bHRpcGx5KGRpbWVuc2lvbnMpO1xuICAgIH1cblxuICAgIHJldHVybiBuZXdEaW1lbnNpb25zO1xuICB9XG59XG5cbmV4cG9ydCBkZWZhdWx0IENyb3BPcGVyYXRpb247XG4iLCJcInVzZSBzdHJpY3RcIjtcbi8qIVxuICogQ29weXJpZ2h0IChjKSAyMDEzLTIwMTUgOWVsZW1lbnRzIEdtYkhcbiAqXG4gKiBSZWxlYXNlZCB1bmRlciBBdHRyaWJ1dGlvbi1Ob25Db21tZXJjaWFsIDMuMCBVbnBvcnRlZFxuICogaHR0cDovL2NyZWF0aXZlY29tbW9ucy5vcmcvbGljZW5zZXMvYnktbmMvMy4wL1xuICpcbiAqIEZvciBjb21tZXJjaWFsIHVzZSwgcGxlYXNlIGNvbnRhY3QgdXMgYXQgY29udGFjdEA5ZWxlbWVudHMuY29tXG4gKi9cblxuaW1wb3J0IE9wZXJhdGlvbiBmcm9tIFwiLi9vcGVyYXRpb25cIjtcbmltcG9ydCBJZGVudGl0eUZpbHRlciBmcm9tIFwiLi9maWx0ZXJzL2lkZW50aXR5LWZpbHRlclwiO1xuXG4vKipcbiAqIEFuIG9wZXJhdGlvbiB0aGF0IGNhbiBhcHBseSBhIHNlbGVjdGVkIGZpbHRlclxuICpcbiAqIEBjbGFzc1xuICogQGFsaWFzIEltZ2x5S2l0Lk9wZXJhdGlvbnMuRmlsdGVyc09wZXJhdGlvblxuICogQGV4dGVuZHMgSW1nbHlLaXQuT3BlcmF0aW9uXG4gKi9cbmNsYXNzIEZpbHRlcnNPcGVyYXRpb24gZXh0ZW5kcyBPcGVyYXRpb24ge1xuICBjb25zdHJ1Y3RvciAoLi4uYXJncykge1xuICAgIHRoaXMuYXZhaWxhYmxlT3B0aW9ucyA9IHtcbiAgICAgIGZpbHRlcjogeyB0eXBlOiBcIm9iamVjdFwiLCBkZWZhdWx0OiBJZGVudGl0eUZpbHRlcixcbiAgICAgICAgc2V0dGVyOiBmdW5jdGlvbiAoRmlsdGVyKSB7XG4gICAgICAgICAgdGhpcy5fc2VsZWN0ZWRGaWx0ZXIgPSBuZXcgRmlsdGVyKCk7XG4gICAgICAgICAgcmV0dXJuIEZpbHRlcjtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH07XG5cbiAgICBzdXBlciguLi5hcmdzKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBBIHVuaXF1ZSBzdHJpbmcgdGhhdCBpZGVudGlmaWVzIHRoaXMgb3BlcmF0aW9uLiBDYW4gYmUgdXNlZCB0byBzZWxlY3RcbiAgICogb3BlcmF0aW9ucy5cbiAgICogQHR5cGUge1N0cmluZ31cbiAgICovXG4gIGdldCBpZGVudGlmaWVyICgpIHtcbiAgICByZXR1cm4gXCJmaWx0ZXJzXCI7XG4gIH1cblxuICAvKipcbiAgICogUmVuZGVycyB0aGUgZmlsdGVyIHVzaW5nIFdlYkdMXG4gICAqIEBwYXJhbSAge1dlYkdMUmVuZGVyZXJ9IHJlbmRlcmVyXG4gICAqIEBvdmVycmlkZVxuICAgKi9cbiAgX3JlbmRlcldlYkdMIChyZW5kZXJlcikge1xuICAgIHRoaXMuX3JlbmRlcihyZW5kZXJlcik7XG4gIH1cblxuICAvKipcbiAgICogUmVuZGVycyB0aGUgZmlsdGVyIHVzaW5nIENhbnZhczJEXG4gICAqIEBwYXJhbSB7Q2FudmFzUmVuZGVyZXJ9IHJlbmRlcmVyXG4gICAqIEBvdmVycmlkZVxuICAgKi9cbiAgX3JlbmRlckNhbnZhcyAocmVuZGVyZXIpIHtcbiAgICB0aGlzLl9yZW5kZXIocmVuZGVyZXIpO1xuICB9XG5cbiAgLyoqXG4gICAqIFJlbmRlcnMgdGhlIGZpbHRlciAoYWxsIHJlbmRlcmVycyBzdXBwb3J0ZWQpXG4gICAqIEBwYXJhbSB7UmVuZGVyZXJ9IHJlbmRlcmVyXG4gICAqIEBwcml2YXRlXG4gICAqL1xuICBfcmVuZGVyIChyZW5kZXJlcikge1xuICAgIHRoaXMuX3NlbGVjdGVkRmlsdGVyLnJlbmRlcihyZW5kZXJlcik7XG4gIH1cbn1cblxuZXhwb3J0IGRlZmF1bHQgRmlsdGVyc09wZXJhdGlvbjtcbiIsIlwidXNlIHN0cmljdFwiO1xuLyohXG4gKiBDb3B5cmlnaHQgKGMpIDIwMTMtMjAxNSA5ZWxlbWVudHMgR21iSFxuICpcbiAqIFJlbGVhc2VkIHVuZGVyIEF0dHJpYnV0aW9uLU5vbkNvbW1lcmNpYWwgMy4wIFVucG9ydGVkXG4gKiBodHRwOi8vY3JlYXRpdmVjb21tb25zLm9yZy9saWNlbnNlcy9ieS1uYy8zLjAvXG4gKlxuICogRm9yIGNvbW1lcmNpYWwgdXNlLCBwbGVhc2UgY29udGFjdCB1cyBhdCBjb250YWN0QDllbGVtZW50cy5jb21cbiAqL1xuXG5pbXBvcnQgRmlsdGVyIGZyb20gXCIuL2ZpbHRlclwiO1xuXG4vKipcbiAqIEExNSBGaWx0ZXJcbiAqIEBjbGFzc1xuICogQGFsaWFzIEltZ2x5S2l0LkZpbHRlcnMuQTE1RmlsdGVyXG4gKiBAZXh0ZW5kcyB7SW1nbHlLaXQuRmlsdGVyfVxuICovXG5jbGFzcyBBMTVGaWx0ZXIgZXh0ZW5kcyBGaWx0ZXIge1xuICAvKipcbiAgICogQSB1bmlxdWUgc3RyaW5nIHRoYXQgaWRlbnRpZmllcyB0aGlzIG9wZXJhdGlvbi4gQ2FuIGJlIHVzZWQgdG8gc2VsZWN0XG4gICAqIHRoZSBhY3RpdmUgZmlsdGVyLlxuICAgKiBAdHlwZSB7U3RyaW5nfVxuICAgKi9cbiAgc3RhdGljIGdldCBpZGVudGlmaWVyICgpIHtcbiAgICByZXR1cm4gXCJhMTVcIjtcbiAgfVxuXG5cbiAgLyoqXG4gICAqIFJlbmRlcnMgdGhlIGZpbHRlclxuICAgKiBAcGFyYW0gIHtSZW5kZXJlcn0gcmVuZGVyZXJcbiAgICogQHJldHVybiB7UHJvbWlzZX1cbiAgICovXG4gIHJlbmRlciAocmVuZGVyZXIpIHtcbiAgICB2YXIgc3RhY2sgPSBuZXcgRmlsdGVyLlByaW1pdGl2ZXNTdGFjaygpO1xuXG4gICAgc3RhY2suYWRkKG5ldyBGaWx0ZXIuUHJpbWl0aXZlcy5Db250cmFzdCh7XG4gICAgICBjb250cmFzdDogMC42M1xuICAgIH0pKTtcblxuICAgIHN0YWNrLmFkZChuZXcgRmlsdGVyLlByaW1pdGl2ZXMuQnJpZ2h0bmVzcyh7XG4gICAgICBicmlnaHRuZXNzOiAwLjEyXG4gICAgfSkpO1xuXG4gICAgc3RhY2suYWRkKG5ldyBGaWx0ZXIuUHJpbWl0aXZlcy5Ub25lQ3VydmUoe1xuICAgICAgcmdiQ29udHJvbFBvaW50czoge1xuICAgICAgICByZWQ6IFtcbiAgICAgICAgICBbMCwgMzhdLFxuICAgICAgICAgIFs5NCwgOTRdLFxuICAgICAgICAgIFsxNDgsIDE0Ml0sXG4gICAgICAgICAgWzE3NSwgMTg3XSxcbiAgICAgICAgICBbMjU1LCAyNTVdXG4gICAgICAgIF0sXG4gICAgICAgIGdyZWVuOiBbXG4gICAgICAgICAgWzAsIDBdLFxuICAgICAgICAgIFs3NywgNTNdLFxuICAgICAgICAgIFsxNzEsIDE5MF0sXG4gICAgICAgICAgWzI1NSwgMjU1XVxuICAgICAgICBdLFxuICAgICAgICBibHVlOiBbXG4gICAgICAgICAgWzAsIDEwXSxcbiAgICAgICAgICBbNDgsIDg1XSxcbiAgICAgICAgICBbMTc0LCAyMjhdLFxuICAgICAgICAgIFsyNTUsIDI1NV1cbiAgICAgICAgXVxuICAgICAgfVxuICAgIH0pKTtcblxuICAgIHN0YWNrLnJlbmRlcihyZW5kZXJlcik7XG4gIH1cbn1cblxuZXhwb3J0IGRlZmF1bHQgQTE1RmlsdGVyO1xuIiwiXCJ1c2Ugc3RyaWN0XCI7XG4vKiFcbiAqIENvcHlyaWdodCAoYykgMjAxMy0yMDE1IDllbGVtZW50cyBHbWJIXG4gKlxuICogUmVsZWFzZWQgdW5kZXIgQXR0cmlidXRpb24tTm9uQ29tbWVyY2lhbCAzLjAgVW5wb3J0ZWRcbiAqIGh0dHA6Ly9jcmVhdGl2ZWNvbW1vbnMub3JnL2xpY2Vuc2VzL2J5LW5jLzMuMC9cbiAqXG4gKiBGb3IgY29tbWVyY2lhbCB1c2UsIHBsZWFzZSBjb250YWN0IHVzIGF0IGNvbnRhY3RAOWVsZW1lbnRzLmNvbVxuICovXG5cbmltcG9ydCBGaWx0ZXIgZnJvbSBcIi4vZmlsdGVyXCI7XG5cbi8qKlxuICogQnJlZXplIEZpbHRlclxuICogQGNsYXNzXG4gKiBAYWxpYXMgSW1nbHlLaXQuRmlsdGVycy5CcmVlemVGaWx0ZXJcbiAqIEBleHRlbmRzIHtJbWdseUtpdC5GaWx0ZXJ9XG4gKi9cbmNsYXNzIEJyZWV6ZUZpbHRlciBleHRlbmRzIEZpbHRlciB7XG5cbiAgLyoqXG4gICAqIEEgdW5pcXVlIHN0cmluZyB0aGF0IGlkZW50aWZpZXMgdGhpcyBvcGVyYXRpb24uIENhbiBiZSB1c2VkIHRvIHNlbGVjdFxuICAgKiB0aGUgYWN0aXZlIGZpbHRlci5cbiAgICogQHR5cGUge1N0cmluZ31cbiAgICovXG4gIHN0YXRpYyBnZXQgaWRlbnRpZmllciAoKSB7XG4gICAgcmV0dXJuIFwiYnJlZXplXCI7XG4gIH1cblxuICAvKipcbiAgICogUmVuZGVycyB0aGUgZmlsdGVyXG4gICAqIEBwYXJhbSAge1JlbmRlcmVyfSByZW5kZXJlclxuICAgKiBAcmV0dXJuIHtQcm9taXNlfVxuICAgKi9cbiAgcmVuZGVyIChyZW5kZXJlcikge1xuICAgIHZhciBzdGFjayA9IG5ldyBGaWx0ZXIuUHJpbWl0aXZlc1N0YWNrKCk7XG5cbiAgICAvLyBEZXNhdHVyYXRpb25cbiAgICBzdGFjay5hZGQobmV3IEZpbHRlci5QcmltaXRpdmVzLkRlc2F0dXJhdGlvbih7XG4gICAgICBkZXNhdHVyYXRpb246IDAuNVxuICAgIH0pKTtcblxuICAgIC8vIFRvbmUgY3VydmVcbiAgICBzdGFjay5hZGQobmV3IEZpbHRlci5QcmltaXRpdmVzLlRvbmVDdXJ2ZSh7XG4gICAgICByZ2JDb250cm9sUG9pbnRzOiB7XG4gICAgICAgIHJlZDogW1xuICAgICAgICAgIFswLCAwXSxcbiAgICAgICAgICBbMTcwLCAxNzBdLFxuICAgICAgICAgIFsyMTIsIDIxOV0sXG4gICAgICAgICAgWzIzNCwgMjQyXSxcbiAgICAgICAgICBbMjU1LCAyNTVdXG4gICAgICAgIF0sXG4gICAgICAgIGdyZWVuOiBbXG4gICAgICAgICAgWzAsIDBdLFxuICAgICAgICAgIFsxNzAsIDE2OF0sXG4gICAgICAgICAgWzIzNCwgMjMxXSxcbiAgICAgICAgICBbMjU1LCAyNTVdXG4gICAgICAgIF0sXG4gICAgICAgIGJsdWU6IFtcbiAgICAgICAgICBbMCwgMF0sXG4gICAgICAgICAgWzE3MCwgMTcwXSxcbiAgICAgICAgICBbMjEyLCAyMDhdLFxuICAgICAgICAgIFsyNTUsIDI1NV1cbiAgICAgICAgXVxuICAgICAgfVxuICAgIH0pKTtcblxuICAgIHN0YWNrLnJlbmRlcihyZW5kZXJlcik7XG4gIH1cbn1cblxuZXhwb3J0IGRlZmF1bHQgQnJlZXplRmlsdGVyO1xuIiwiXCJ1c2Ugc3RyaWN0XCI7XG4vKiFcbiAqIENvcHlyaWdodCAoYykgMjAxMy0yMDE1IDllbGVtZW50cyBHbWJIXG4gKlxuICogUmVsZWFzZWQgdW5kZXIgQXR0cmlidXRpb24tTm9uQ29tbWVyY2lhbCAzLjAgVW5wb3J0ZWRcbiAqIGh0dHA6Ly9jcmVhdGl2ZWNvbW1vbnMub3JnL2xpY2Vuc2VzL2J5LW5jLzMuMC9cbiAqXG4gKiBGb3IgY29tbWVyY2lhbCB1c2UsIHBsZWFzZSBjb250YWN0IHVzIGF0IGNvbnRhY3RAOWVsZW1lbnRzLmNvbVxuICovXG5cbmltcG9ydCBGaWx0ZXIgZnJvbSBcIi4vZmlsdGVyXCI7XG5cbi8qKlxuICogQlcgRmlsdGVyXG4gKiBAY2xhc3NcbiAqIEBhbGlhcyBJbWdseUtpdC5GaWx0ZXJzLkJXRmlsdGVyXG4gKiBAZXh0ZW5kcyB7SW1nbHlLaXQuRmlsdGVyfVxuICovXG5jbGFzcyBCV0ZpbHRlciBleHRlbmRzIEZpbHRlciB7XG4gIC8qKlxuICAgKiBBIHVuaXF1ZSBzdHJpbmcgdGhhdCBpZGVudGlmaWVzIHRoaXMgb3BlcmF0aW9uLiBDYW4gYmUgdXNlZCB0byBzZWxlY3RcbiAgICogdGhlIGFjdGl2ZSBmaWx0ZXIuXG4gICAqIEB0eXBlIHtTdHJpbmd9XG4gICAqL1xuICBzdGF0aWMgZ2V0IGlkZW50aWZpZXIgKCkge1xuICAgIHJldHVybiBcImJ3XCI7XG4gIH1cblxuICAvKipcbiAgICogUmVuZGVycyB0aGUgZmlsdGVyXG4gICAqIEBwYXJhbSAge1JlbmRlcmVyfSByZW5kZXJlclxuICAgKiBAcmV0dXJuIHtQcm9taXNlfVxuICAgKi9cbiAgcmVuZGVyIChyZW5kZXJlcikge1xuICAgIHZhciBzdGFjayA9IG5ldyBGaWx0ZXIuUHJpbWl0aXZlc1N0YWNrKCk7XG5cbiAgICBzdGFjay5hZGQobmV3IEZpbHRlci5QcmltaXRpdmVzLkdyYXlzY2FsZSgpKTtcblxuICAgIHN0YWNrLnJlbmRlcihyZW5kZXJlcik7XG4gIH1cbn1cblxuZXhwb3J0IGRlZmF1bHQgQldGaWx0ZXI7XG4iLCJcInVzZSBzdHJpY3RcIjtcbi8qIVxuICogQ29weXJpZ2h0IChjKSAyMDEzLTIwMTUgOWVsZW1lbnRzIEdtYkhcbiAqXG4gKiBSZWxlYXNlZCB1bmRlciBBdHRyaWJ1dGlvbi1Ob25Db21tZXJjaWFsIDMuMCBVbnBvcnRlZFxuICogaHR0cDovL2NyZWF0aXZlY29tbW9ucy5vcmcvbGljZW5zZXMvYnktbmMvMy4wL1xuICpcbiAqIEZvciBjb21tZXJjaWFsIHVzZSwgcGxlYXNlIGNvbnRhY3QgdXMgYXQgY29udGFjdEA5ZWxlbWVudHMuY29tXG4gKi9cblxuaW1wb3J0IEZpbHRlciBmcm9tIFwiLi9maWx0ZXJcIjtcblxuLyoqXG4gKiBCV0hhcmQgRmlsdGVyXG4gKiBAY2xhc3NcbiAqIEBhbGlhcyBJbWdseUtpdC5GaWx0ZXJzLkJXSGFyZEZpbHRlclxuICogQGV4dGVuZHMge0ltZ2x5S2l0LkZpbHRlcn1cbiAqL1xuY2xhc3MgQldIYXJkRmlsdGVyIGV4dGVuZHMgRmlsdGVyIHtcbiAgLyoqXG4gICAqIEEgdW5pcXVlIHN0cmluZyB0aGF0IGlkZW50aWZpZXMgdGhpcyBvcGVyYXRpb24uIENhbiBiZSB1c2VkIHRvIHNlbGVjdFxuICAgKiB0aGUgYWN0aXZlIGZpbHRlci5cbiAgICogQHR5cGUge1N0cmluZ31cbiAgICovXG4gIHN0YXRpYyBnZXQgaWRlbnRpZmllciAoKSB7XG4gICAgcmV0dXJuIFwiYndoYXJkXCI7XG4gIH1cblxuICAvKipcbiAgICogUmVuZGVycyB0aGUgZmlsdGVyXG4gICAqIEBwYXJhbSAge1JlbmRlcmVyfSByZW5kZXJlclxuICAgKiBAcmV0dXJuIHtQcm9taXNlfVxuICAgKi9cbiAgcmVuZGVyIChyZW5kZXJlcikge1xuICAgIHZhciBzdGFjayA9IG5ldyBGaWx0ZXIuUHJpbWl0aXZlc1N0YWNrKCk7XG5cbiAgICBzdGFjay5hZGQobmV3IEZpbHRlci5QcmltaXRpdmVzLkdyYXlzY2FsZSgpKTtcbiAgICBzdGFjay5hZGQobmV3IEZpbHRlci5QcmltaXRpdmVzLkNvbnRyYXN0KHtcbiAgICAgIGNvbnRyYXN0OiAxLjVcbiAgICB9KSk7XG5cbiAgICBzdGFjay5yZW5kZXIocmVuZGVyZXIpO1xuICB9XG59XG5cbmV4cG9ydCBkZWZhdWx0IEJXSGFyZEZpbHRlcjtcbiIsIlwidXNlIHN0cmljdFwiO1xuLyohXG4gKiBDb3B5cmlnaHQgKGMpIDIwMTMtMjAxNSA5ZWxlbWVudHMgR21iSFxuICpcbiAqIFJlbGVhc2VkIHVuZGVyIEF0dHJpYnV0aW9uLU5vbkNvbW1lcmNpYWwgMy4wIFVucG9ydGVkXG4gKiBodHRwOi8vY3JlYXRpdmVjb21tb25zLm9yZy9saWNlbnNlcy9ieS1uYy8zLjAvXG4gKlxuICogRm9yIGNvbW1lcmNpYWwgdXNlLCBwbGVhc2UgY29udGFjdCB1cyBhdCBjb250YWN0QDllbGVtZW50cy5jb21cbiAqL1xuXG5pbXBvcnQgRmlsdGVyIGZyb20gXCIuL2ZpbHRlclwiO1xuXG4vKipcbiAqIENlbHNpdXMgRmlsdGVyXG4gKiBAY2xhc3NcbiAqIEBhbGlhcyBJbWdseUtpdC5GaWx0ZXJzLkNlbHNpdXNGaWx0ZXJcbiAqIEBleHRlbmRzIHtJbWdseUtpdC5GaWx0ZXJ9XG4gKi9cbmNsYXNzIENlbHNpdXNGaWx0ZXIgZXh0ZW5kcyBGaWx0ZXIge1xuICAvKipcbiAgICogQSB1bmlxdWUgc3RyaW5nIHRoYXQgaWRlbnRpZmllcyB0aGlzIG9wZXJhdGlvbi4gQ2FuIGJlIHVzZWQgdG8gc2VsZWN0XG4gICAqIHRoZSBhY3RpdmUgZmlsdGVyLlxuICAgKiBAdHlwZSB7U3RyaW5nfVxuICAgKi9cbiAgc3RhdGljIGdldCBpZGVudGlmaWVyICgpIHtcbiAgICByZXR1cm4gXCJjZWxzaXVzXCI7XG4gIH1cblxuICAvKipcbiAgICogUmVuZGVycyB0aGUgZmlsdGVyXG4gICAqIEBwYXJhbSAge1JlbmRlcmVyfSByZW5kZXJlclxuICAgKiBAcmV0dXJuIHtQcm9taXNlfVxuICAgKi9cbiAgcmVuZGVyIChyZW5kZXJlcikge1xuICAgIHZhciBzdGFjayA9IG5ldyBGaWx0ZXIuUHJpbWl0aXZlc1N0YWNrKCk7XG5cbiAgICBzdGFjay5hZGQobmV3IEZpbHRlci5QcmltaXRpdmVzLlRvbmVDdXJ2ZSh7XG4gICAgICByZ2JDb250cm9sUG9pbnRzOiB7XG4gICAgICAgIHJlZDogW1xuICAgICAgICAgIFswLCA2OV0sXG4gICAgICAgICAgWzU1LCAxMTBdLFxuICAgICAgICAgIFsyMDIsIDIzMF0sXG4gICAgICAgICAgWzI1NSwgMjU1XVxuICAgICAgICBdLFxuICAgICAgICBncmVlbjogW1xuICAgICAgICAgIFswLCA0NF0sXG4gICAgICAgICAgWzg5LCA5M10sXG4gICAgICAgICAgWzE4NSwgMTQxXSxcbiAgICAgICAgICBbMjU1LCAxODldXG4gICAgICAgIF0sXG4gICAgICAgIGJsdWU6IFtcbiAgICAgICAgICBbMCwgNzZdLFxuICAgICAgICAgIFszOSwgODJdLFxuICAgICAgICAgIFsyMTgsIDEzOF0sXG4gICAgICAgICAgWzI1NSwgMTcxXVxuICAgICAgICBdXG4gICAgICB9XG4gICAgfSkpO1xuXG4gICAgc3RhY2sucmVuZGVyKHJlbmRlcmVyKTtcbiAgfVxufVxuXG5leHBvcnQgZGVmYXVsdCBDZWxzaXVzRmlsdGVyO1xuIiwiXCJ1c2Ugc3RyaWN0XCI7XG4vKiFcbiAqIENvcHlyaWdodCAoYykgMjAxMy0yMDE1IDllbGVtZW50cyBHbWJIXG4gKlxuICogUmVsZWFzZWQgdW5kZXIgQXR0cmlidXRpb24tTm9uQ29tbWVyY2lhbCAzLjAgVW5wb3J0ZWRcbiAqIGh0dHA6Ly9jcmVhdGl2ZWNvbW1vbnMub3JnL2xpY2Vuc2VzL2J5LW5jLzMuMC9cbiAqXG4gKiBGb3IgY29tbWVyY2lhbCB1c2UsIHBsZWFzZSBjb250YWN0IHVzIGF0IGNvbnRhY3RAOWVsZW1lbnRzLmNvbVxuICovXG5cbmltcG9ydCBGaWx0ZXIgZnJvbSBcIi4vZmlsdGVyXCI7XG5cbi8qKlxuICogQ2hlc3QgRmlsdGVyXG4gKiBAY2xhc3NcbiAqIEBhbGlhcyBJbWdseUtpdC5GaWx0ZXJzLkNoZXN0RmlsdGVyXG4gKiBAZXh0ZW5kcyB7SW1nbHlLaXQuRmlsdGVyfVxuICovXG5jbGFzcyBDaGVzdEZpbHRlciBleHRlbmRzIEZpbHRlciB7XG4gIC8qKlxuICAgKiBBIHVuaXF1ZSBzdHJpbmcgdGhhdCBpZGVudGlmaWVzIHRoaXMgb3BlcmF0aW9uLiBDYW4gYmUgdXNlZCB0byBzZWxlY3RcbiAgICogdGhlIGFjdGl2ZSBmaWx0ZXIuXG4gICAqIEB0eXBlIHtTdHJpbmd9XG4gICAqL1xuICBzdGF0aWMgZ2V0IGlkZW50aWZpZXIgKCkge1xuICAgIHJldHVybiBcImNoZXN0XCI7XG4gIH1cblxuICAvKipcbiAgICogUmVuZGVycyB0aGUgZmlsdGVyXG4gICAqIEBwYXJhbSAge1JlbmRlcmVyfSByZW5kZXJlclxuICAgKiBAcmV0dXJuIHtQcm9taXNlfVxuICAgKi9cbiAgcmVuZGVyIChyZW5kZXJlcikge1xuICAgIHZhciBzdGFjayA9IG5ldyBGaWx0ZXIuUHJpbWl0aXZlc1N0YWNrKCk7XG5cbiAgICAvLyBUb25lIGN1cnZlXG4gICAgc3RhY2suYWRkKG5ldyBGaWx0ZXIuUHJpbWl0aXZlcy5Ub25lQ3VydmUoe1xuICAgICAgcmdiQ29udHJvbFBvaW50czoge1xuICAgICAgICByZWQ6IFtcbiAgICAgICAgICBbMCwgMF0sXG4gICAgICAgICAgWzQ0LCA0NF0sXG4gICAgICAgICAgWzEyNCwgMTQzXSxcbiAgICAgICAgICBbMjIxLCAyMDRdLFxuICAgICAgICAgIFsyNTUsIDI1NV1cbiAgICAgICAgXSxcbiAgICAgICAgZ3JlZW46IFtcbiAgICAgICAgICBbMCwgMF0sXG4gICAgICAgICAgWzEzMCwgMTI3XSxcbiAgICAgICAgICBbMjEzLCAxOTldLFxuICAgICAgICAgIFsyNTUsIDI1NV1cbiAgICAgICAgXSxcbiAgICAgICAgYmx1ZTogW1xuICAgICAgICAgIFswLCAwXSxcbiAgICAgICAgICBbNTEsIDUyXSxcbiAgICAgICAgICBbMjE5LCAyMDRdLFxuICAgICAgICAgIFsyNTUsIDI1NV1cbiAgICAgICAgXVxuICAgICAgfVxuICAgIH0pKTtcblxuICAgIHN0YWNrLnJlbmRlcihyZW5kZXJlcik7XG4gIH1cbn1cblxuZXhwb3J0IGRlZmF1bHQgQ2hlc3RGaWx0ZXI7XG4iLCIvKiBqc2hpbnQgdW51c2VkOiBmYWxzZSAqL1xuXCJ1c2Ugc3RyaWN0XCI7XG4vKiFcbiAqIENvcHlyaWdodCAoYykgMjAxMy0yMDE1IDllbGVtZW50cyBHbWJIXG4gKlxuICogUmVsZWFzZWQgdW5kZXIgQXR0cmlidXRpb24tTm9uQ29tbWVyY2lhbCAzLjAgVW5wb3J0ZWRcbiAqIGh0dHA6Ly9jcmVhdGl2ZWNvbW1vbnMub3JnL2xpY2Vuc2VzL2J5LW5jLzMuMC9cbiAqXG4gKiBGb3IgY29tbWVyY2lhbCB1c2UsIHBsZWFzZSBjb250YWN0IHVzIGF0IGNvbnRhY3RAOWVsZW1lbnRzLmNvbVxuICovXG5cbi8qKlxuICogQmFzZSBjbGFzcyBmb3IgZmlsdGVycy4gRXh0ZW5kYWJsZSB2aWEge0BsaW5rIEltZ2x5S2l0LkZpbHRlciNleHRlbmR9XG4gKiBAY2xhc3NcbiAqIEBhbGlhcyBJbWdseUtpdC5GaWx0ZXJcbiAqL1xuY2xhc3MgRmlsdGVyIHtcbiAgLyoqXG4gICAqIEEgdW5pcXVlIHN0cmluZyB0aGF0IGlkZW50aWZpZXMgdGhpcyBvcGVyYXRpb24uIENhbiBiZSB1c2VkIHRvIHNlbGVjdFxuICAgKiB0aGUgYWN0aXZlIGZpbHRlci5cbiAgICogQHR5cGUge1N0cmluZ31cbiAgICovXG4gIHN0YXRpYyBnZXQgaWRlbnRpZmllciAoKSB7IHJldHVybiBudWxsOyB9XG5cbiAgLyoqXG4gICAqIFJlbmRlcnMgdGhlIGZpbHRlclxuICAgKiBAcGFyYW0gIHtSZW5kZXJlcn0gcmVuZGVyZXJcbiAgICogQHJldHVybiB7UHJvbWlzZX1cbiAgICovXG4gIHJlbmRlciAocmVuZGVyZXIpIHtcbiAgICAvKiBpc3RhbmJ1bCBpZ25vcmUgbmV4dCAqL1xuICAgIHRocm93IG5ldyBFcnJvcihcIkZpbHRlciNyZW5kZXIgaXMgYWJzdHJhY3QgYW5kIG5vdCBpbXBsZW1lbnRlZCBpbiBpbmhlcml0ZWQgY2xhc3MuXCIpO1xuICB9XG59XG5cbi8qKlxuICogVG8gY3JlYXRlIGFuIHtAbGluayBJbWdseUtpdC5GaWx0ZXJ9IGNsYXNzIG9mIHlvdXIgb3duLCBjYWxsIHRoaXNcbiAqIG1ldGhvZCBhbmQgcHJvdmlkZSBpbnN0YW5jZSBwcm9wZXJ0aWVzIGFuZCBmdW5jdGlvbnMuXG4gKiBAZnVuY3Rpb25cbiAqL1xuRmlsdGVyLmV4dGVuZCA9IHJlcXVpcmUoXCIuLi8uLi9saWIvZXh0ZW5kXCIpO1xuXG4vLyBFeHBvc2VkIGNsYXNzZXNcbkZpbHRlci5QcmltaXRpdmVzU3RhY2sgPSByZXF1aXJlKFwiLi9wcmltaXRpdmVzLXN0YWNrXCIpO1xuRmlsdGVyLlByaW1pdGl2ZXMgPSB7fTtcbkZpbHRlci5QcmltaXRpdmVzLlNhdHVyYXRpb24gPSByZXF1aXJlKFwiLi9wcmltaXRpdmVzL3NhdHVyYXRpb25cIik7XG5GaWx0ZXIuUHJpbWl0aXZlcy5Mb29rdXBUYWJsZSA9IHJlcXVpcmUoXCIuL3ByaW1pdGl2ZXMvbG9va3VwLXRhYmxlXCIpO1xuRmlsdGVyLlByaW1pdGl2ZXMuVG9uZUN1cnZlID0gcmVxdWlyZShcIi4vcHJpbWl0aXZlcy90b25lLWN1cnZlXCIpO1xuRmlsdGVyLlByaW1pdGl2ZXMuU29mdENvbG9yT3ZlcmxheSA9IHJlcXVpcmUoXCIuL3ByaW1pdGl2ZXMvc29mdC1jb2xvci1vdmVybGF5XCIpO1xuRmlsdGVyLlByaW1pdGl2ZXMuRGVzYXR1cmF0aW9uID0gcmVxdWlyZShcIi4vcHJpbWl0aXZlcy9kZXNhdHVyYXRpb25cIik7XG5GaWx0ZXIuUHJpbWl0aXZlcy5YNDAwID0gcmVxdWlyZShcIi4vcHJpbWl0aXZlcy94NDAwXCIpO1xuRmlsdGVyLlByaW1pdGl2ZXMuR3JheXNjYWxlID0gcmVxdWlyZShcIi4vcHJpbWl0aXZlcy9ncmF5c2NhbGVcIik7XG5GaWx0ZXIuUHJpbWl0aXZlcy5Db250cmFzdCA9IHJlcXVpcmUoXCIuL3ByaW1pdGl2ZXMvY29udHJhc3RcIik7XG5GaWx0ZXIuUHJpbWl0aXZlcy5HbG93ID0gcmVxdWlyZShcIi4vcHJpbWl0aXZlcy9nbG93XCIpO1xuRmlsdGVyLlByaW1pdGl2ZXMuR29iYmxpbiA9IHJlcXVpcmUoXCIuL3ByaW1pdGl2ZXMvZ29iYmxpblwiKTtcbkZpbHRlci5QcmltaXRpdmVzLkJyaWdodG5lc3MgPSByZXF1aXJlKFwiLi9wcmltaXRpdmVzL2JyaWdodG5lc3NcIik7XG5cbmV4cG9ydCBkZWZhdWx0IEZpbHRlcjtcbiIsIlwidXNlIHN0cmljdFwiO1xuLyohXG4gKiBDb3B5cmlnaHQgKGMpIDIwMTMtMjAxNSA5ZWxlbWVudHMgR21iSFxuICpcbiAqIFJlbGVhc2VkIHVuZGVyIEF0dHJpYnV0aW9uLU5vbkNvbW1lcmNpYWwgMy4wIFVucG9ydGVkXG4gKiBodHRwOi8vY3JlYXRpdmVjb21tb25zLm9yZy9saWNlbnNlcy9ieS1uYy8zLjAvXG4gKlxuICogRm9yIGNvbW1lcmNpYWwgdXNlLCBwbGVhc2UgY29udGFjdCB1cyBhdCBjb250YWN0QDllbGVtZW50cy5jb21cbiAqL1xuXG5pbXBvcnQgRmlsdGVyIGZyb20gXCIuL2ZpbHRlclwiO1xuXG4vKipcbiAqIEZpeGllIEZpbHRlclxuICogQGNsYXNzXG4gKiBAYWxpYXMgSW1nbHlLaXQuRmlsdGVycy5GaXhpZUZpbHRlclxuICogQGV4dGVuZHMge0ltZ2x5S2l0LkZpbHRlcn1cbiAqL1xuY2xhc3MgRml4aWVGaWx0ZXIgZXh0ZW5kcyBGaWx0ZXIge1xuICAvKipcbiAgICogQSB1bmlxdWUgc3RyaW5nIHRoYXQgaWRlbnRpZmllcyB0aGlzIG9wZXJhdGlvbi4gQ2FuIGJlIHVzZWQgdG8gc2VsZWN0XG4gICAqIHRoZSBhY3RpdmUgZmlsdGVyLlxuICAgKiBAdHlwZSB7U3RyaW5nfVxuICAgKi9cbiAgc3RhdGljIGdldCBpZGVudGlmaWVyICgpIHtcbiAgICByZXR1cm4gXCJmaXhpZVwiO1xuICB9XG5cbiAgLyoqXG4gICAqIFJlbmRlcnMgdGhlIGZpbHRlclxuICAgKiBAcGFyYW0gIHtSZW5kZXJlcn0gcmVuZGVyZXJcbiAgICogQHJldHVybiB7UHJvbWlzZX1cbiAgICovXG4gIHJlbmRlciAocmVuZGVyZXIpIHtcbiAgICB2YXIgc3RhY2sgPSBuZXcgRmlsdGVyLlByaW1pdGl2ZXNTdGFjaygpO1xuXG4gICAgLy8gVG9uZSBjdXJ2ZVxuICAgIHN0YWNrLmFkZChuZXcgRmlsdGVyLlByaW1pdGl2ZXMuVG9uZUN1cnZlKHtcbiAgICAgIHJnYkNvbnRyb2xQb2ludHM6IHtcbiAgICAgICAgcmVkOiBbXG4gICAgICAgICAgWzAsIDBdLFxuICAgICAgICAgIFs0NCwgMjhdLFxuICAgICAgICAgIFs2MywgNDhdLFxuICAgICAgICAgIFsxMjgsIDEzMl0sXG4gICAgICAgICAgWzIzNSwgMjQ4XSxcbiAgICAgICAgICBbMjU1LCAyNTVdXG4gICAgICAgIF0sXG4gICAgICAgIGdyZWVuOiBbXG4gICAgICAgICAgWzAsIDBdLFxuICAgICAgICAgIFsyMCwgMTBdLFxuICAgICAgICAgIFs2MCwgNDVdLFxuICAgICAgICAgIFsxOTAsIDIwOV0sXG4gICAgICAgICAgWzIxMSwgMjMxXSxcbiAgICAgICAgICBbMjU1LCAyNTVdXG4gICAgICAgIF0sXG4gICAgICAgIGJsdWU6IFtcbiAgICAgICAgICBbMCwgMzFdLFxuICAgICAgICAgIFs0MSwgNjJdLFxuICAgICAgICAgIFsxNTAsIDE0Ml0sXG4gICAgICAgICAgWzIzNCwgMjEyXSxcbiAgICAgICAgICBbMjU1LCAyMjRdXG4gICAgICAgIF1cbiAgICAgIH1cbiAgICB9KSk7XG5cbiAgICBzdGFjay5yZW5kZXIocmVuZGVyZXIpO1xuICB9XG59XG5cbmV4cG9ydCBkZWZhdWx0IEZpeGllRmlsdGVyO1xuIiwiXCJ1c2Ugc3RyaWN0XCI7XG4vKiFcbiAqIENvcHlyaWdodCAoYykgMjAxMy0yMDE1IDllbGVtZW50cyBHbWJIXG4gKlxuICogUmVsZWFzZWQgdW5kZXIgQXR0cmlidXRpb24tTm9uQ29tbWVyY2lhbCAzLjAgVW5wb3J0ZWRcbiAqIGh0dHA6Ly9jcmVhdGl2ZWNvbW1vbnMub3JnL2xpY2Vuc2VzL2J5LW5jLzMuMC9cbiAqXG4gKiBGb3IgY29tbWVyY2lhbCB1c2UsIHBsZWFzZSBjb250YWN0IHVzIGF0IGNvbnRhY3RAOWVsZW1lbnRzLmNvbVxuICovXG5cbmltcG9ydCBGaWx0ZXIgZnJvbSBcIi4vZmlsdGVyXCI7XG5cbi8qKlxuICogRm9vZCBGaWx0ZXJcbiAqIEBjbGFzc1xuICogQGFsaWFzIEltZ2x5S2l0LkZpbHRlcnMuRm9vZEZpbHRlclxuICogQGV4dGVuZHMge0ltZ2x5S2l0LkZpbHRlcn1cbiAqL1xuY2xhc3MgRm9vZEZpbHRlciBleHRlbmRzIEZpbHRlciB7XG4gIC8qKlxuICAgKiBBIHVuaXF1ZSBzdHJpbmcgdGhhdCBpZGVudGlmaWVzIHRoaXMgb3BlcmF0aW9uLiBDYW4gYmUgdXNlZCB0byBzZWxlY3RcbiAgICogdGhlIGFjdGl2ZSBmaWx0ZXIuXG4gICAqIEB0eXBlIHtTdHJpbmd9XG4gICAqL1xuICBzdGF0aWMgZ2V0IGlkZW50aWZpZXIgKCkge1xuICAgIHJldHVybiBcImZvb2RcIjtcbiAgfVxuXG4gIC8qKlxuICAgKiBSZW5kZXJzIHRoZSBmaWx0ZXJcbiAgICogQHBhcmFtICB7UmVuZGVyZXJ9IHJlbmRlcmVyXG4gICAqIEByZXR1cm4ge1Byb21pc2V9XG4gICAqL1xuICByZW5kZXIgKHJlbmRlcmVyKSB7XG4gICAgdmFyIHN0YWNrID0gbmV3IEZpbHRlci5QcmltaXRpdmVzU3RhY2soKTtcblxuICAgIHN0YWNrLmFkZChuZXcgRmlsdGVyLlByaW1pdGl2ZXMuU2F0dXJhdGlvbih7XG4gICAgICBzYXR1cmF0aW9uOiAxLjM1XG4gICAgfSkpO1xuXG4gICAgc3RhY2suYWRkKG5ldyBGaWx0ZXIuUHJpbWl0aXZlcy5Db250cmFzdCh7XG4gICAgICBjb250cmFzdDogMS4xXG4gICAgfSkpO1xuXG4gICAgc3RhY2sucmVuZGVyKHJlbmRlcmVyKTtcbiAgfVxufVxuXG5leHBvcnQgZGVmYXVsdCBGb29kRmlsdGVyO1xuIiwiXCJ1c2Ugc3RyaWN0XCI7XG4vKiFcbiAqIENvcHlyaWdodCAoYykgMjAxMy0yMDE1IDllbGVtZW50cyBHbWJIXG4gKlxuICogUmVsZWFzZWQgdW5kZXIgQXR0cmlidXRpb24tTm9uQ29tbWVyY2lhbCAzLjAgVW5wb3J0ZWRcbiAqIGh0dHA6Ly9jcmVhdGl2ZWNvbW1vbnMub3JnL2xpY2Vuc2VzL2J5LW5jLzMuMC9cbiAqXG4gKiBGb3IgY29tbWVyY2lhbCB1c2UsIHBsZWFzZSBjb250YWN0IHVzIGF0IGNvbnRhY3RAOWVsZW1lbnRzLmNvbVxuICovXG5cbmltcG9ydCBGaWx0ZXIgZnJvbSBcIi4vZmlsdGVyXCI7XG5cbi8qKlxuICogRnJpZGdlIEZpbHRlclxuICogQGNsYXNzXG4gKiBAYWxpYXMgSW1nbHlLaXQuRmlsdGVycy5GcmlkZ2VGaWx0ZXJcbiAqIEBleHRlbmRzIHtJbWdseUtpdC5GaWx0ZXJ9XG4gKi9cbmNsYXNzIEZyaWRnZUZpbHRlciBleHRlbmRzIEZpbHRlciB7XG4gIC8qKlxuICAgKiBBIHVuaXF1ZSBzdHJpbmcgdGhhdCBpZGVudGlmaWVzIHRoaXMgb3BlcmF0aW9uLiBDYW4gYmUgdXNlZCB0byBzZWxlY3RcbiAgICogdGhlIGFjdGl2ZSBmaWx0ZXIuXG4gICAqIEB0eXBlIHtTdHJpbmd9XG4gICAqL1xuICBzdGF0aWMgZ2V0IGlkZW50aWZpZXIgKCkge1xuICAgIHJldHVybiBcImZyaWRnZVwiO1xuICB9XG5cbiAgLyoqXG4gICAqIFJlbmRlcnMgdGhlIGZpbHRlclxuICAgKiBAcGFyYW0gIHtSZW5kZXJlcn0gcmVuZGVyZXJcbiAgICogQHJldHVybiB7UHJvbWlzZX1cbiAgICovXG4gIHJlbmRlciAocmVuZGVyZXIpIHtcbiAgICB2YXIgc3RhY2sgPSBuZXcgRmlsdGVyLlByaW1pdGl2ZXNTdGFjaygpO1xuXG4gICAgLy8gVG9uZSBjdXJ2ZVxuICAgIHN0YWNrLmFkZChuZXcgRmlsdGVyLlByaW1pdGl2ZXMuVG9uZUN1cnZlKHtcbiAgICAgIHJnYkNvbnRyb2xQb2ludHM6IHtcbiAgICAgICAgcmVkOiBbXG4gICAgICAgICAgWzAsIDldLFxuICAgICAgICAgIFsyMSwgMTFdLFxuICAgICAgICAgIFs0NSwgMjRdLFxuICAgICAgICAgIFsyNTUsIDIyMF1cbiAgICAgICAgXSxcbiAgICAgICAgZ3JlZW46IFtcbiAgICAgICAgICBbMCwgMTJdLFxuICAgICAgICAgIFsyMSwgMjFdLFxuICAgICAgICAgIFs0MiwgNDJdLFxuICAgICAgICAgIFsxNTAsIDE1MF0sXG4gICAgICAgICAgWzE3MCwgMTczXSxcbiAgICAgICAgICBbMjU1LCAyMTBdXG4gICAgICAgIF0sXG4gICAgICAgIGJsdWU6IFtcbiAgICAgICAgICBbMCwgMjhdLFxuICAgICAgICAgIFs0MywgNzJdLFxuICAgICAgICAgIFsxMjgsIDE4NV0sXG4gICAgICAgICAgWzI1NSwgMjIwXVxuICAgICAgICBdXG4gICAgICB9XG4gICAgfSkpO1xuXG4gICAgc3RhY2sucmVuZGVyKHJlbmRlcmVyKTtcbiAgfVxufVxuXG5leHBvcnQgZGVmYXVsdCBGcmlkZ2VGaWx0ZXI7XG4iLCJcInVzZSBzdHJpY3RcIjtcbi8qIVxuICogQ29weXJpZ2h0IChjKSAyMDEzLTIwMTUgOWVsZW1lbnRzIEdtYkhcbiAqXG4gKiBSZWxlYXNlZCB1bmRlciBBdHRyaWJ1dGlvbi1Ob25Db21tZXJjaWFsIDMuMCBVbnBvcnRlZFxuICogaHR0cDovL2NyZWF0aXZlY29tbW9ucy5vcmcvbGljZW5zZXMvYnktbmMvMy4wL1xuICpcbiAqIEZvciBjb21tZXJjaWFsIHVzZSwgcGxlYXNlIGNvbnRhY3QgdXMgYXQgY29udGFjdEA5ZWxlbWVudHMuY29tXG4gKi9cblxuaW1wb3J0IEZpbHRlciBmcm9tIFwiLi9maWx0ZXJcIjtcblxuLyoqXG4gKiBGcm9udCBGaWx0ZXJcbiAqIEBjbGFzc1xuICogQGFsaWFzIEltZ2x5S2l0LkZpbHRlcnMuRnJvbnRGaWx0ZXJcbiAqIEBleHRlbmRzIHtJbWdseUtpdC5GaWx0ZXJ9XG4gKi9cbmNsYXNzIEZyb250RmlsdGVyIGV4dGVuZHMgRmlsdGVyIHtcbiAgLyoqXG4gICAqIEEgdW5pcXVlIHN0cmluZyB0aGF0IGlkZW50aWZpZXMgdGhpcyBvcGVyYXRpb24uIENhbiBiZSB1c2VkIHRvIHNlbGVjdFxuICAgKiB0aGUgYWN0aXZlIGZpbHRlci5cbiAgICogQHR5cGUge1N0cmluZ31cbiAgICovXG4gIHN0YXRpYyBnZXQgaWRlbnRpZmllciAoKSB7XG4gICAgcmV0dXJuIFwiZnJvbnRcIjtcbiAgfVxuXG4gIC8qKlxuICAgKiBSZW5kZXJzIHRoZSBmaWx0ZXJcbiAgICogQHBhcmFtICB7UmVuZGVyZXJ9IHJlbmRlcmVyXG4gICAqIEByZXR1cm4ge1Byb21pc2V9XG4gICAqL1xuICByZW5kZXIgKHJlbmRlcmVyKSB7XG4gICAgdmFyIHN0YWNrID0gbmV3IEZpbHRlci5QcmltaXRpdmVzU3RhY2soKTtcblxuICAgIC8vIFRvbmUgY3VydmVcbiAgICBzdGFjay5hZGQobmV3IEZpbHRlci5QcmltaXRpdmVzLlRvbmVDdXJ2ZSh7XG4gICAgICByZ2JDb250cm9sUG9pbnRzOiB7XG4gICAgICAgIHJlZDogW1xuICAgICAgICAgIFswLCA2NV0sXG4gICAgICAgICAgWzI4LCA2N10sXG4gICAgICAgICAgWzY3LCAxMTNdLFxuICAgICAgICAgIFsxMjUsIDE4M10sXG4gICAgICAgICAgWzE4NywgMjE3XSxcbiAgICAgICAgICBbMjU1LCAyMjldXG4gICAgICAgIF0sXG4gICAgICAgIGdyZWVuOiBbXG4gICAgICAgICAgWzAsIDUyXSxcbiAgICAgICAgICBbNDIsIDU5XSxcbiAgICAgICAgICBbMTA0LCAxMzRdLFxuICAgICAgICAgIFsxNjksIDIwOV0sXG4gICAgICAgICAgWzI1NSwgMjQwXVxuICAgICAgICBdLFxuICAgICAgICBibHVlOiBbXG4gICAgICAgICAgWzAsIDUyXSxcbiAgICAgICAgICBbNjUsIDY4XSxcbiAgICAgICAgICBbOTMsIDEwNF0sXG4gICAgICAgICAgWzE1MCwgMTUzXSxcbiAgICAgICAgICBbMjU1LCAxOThdXG4gICAgICAgIF1cbiAgICAgIH1cbiAgICB9KSk7XG5cbiAgICBzdGFjay5yZW5kZXIocmVuZGVyZXIpO1xuICB9XG59XG5cbmV4cG9ydCBkZWZhdWx0IEZyb250RmlsdGVyO1xuIiwiXCJ1c2Ugc3RyaWN0XCI7XG4vKiFcbiAqIENvcHlyaWdodCAoYykgMjAxMy0yMDE1IDllbGVtZW50cyBHbWJIXG4gKlxuICogUmVsZWFzZWQgdW5kZXIgQXR0cmlidXRpb24tTm9uQ29tbWVyY2lhbCAzLjAgVW5wb3J0ZWRcbiAqIGh0dHA6Ly9jcmVhdGl2ZWNvbW1vbnMub3JnL2xpY2Vuc2VzL2J5LW5jLzMuMC9cbiAqXG4gKiBGb3IgY29tbWVyY2lhbCB1c2UsIHBsZWFzZSBjb250YWN0IHVzIGF0IGNvbnRhY3RAOWVsZW1lbnRzLmNvbVxuICovXG5cbmltcG9ydCBGaWx0ZXIgZnJvbSBcIi4vZmlsdGVyXCI7XG5cbi8qKlxuICogR2xhbSBGaWx0ZXJcbiAqIEBjbGFzc1xuICogQGFsaWFzIEltZ2x5S2l0LkZpbHRlcnMuR2xhbUZpbHRlclxuICogQGV4dGVuZHMge0ltZ2x5S2l0LkZpbHRlcn1cbiAqL1xuY2xhc3MgR2xhbUZpbHRlciBleHRlbmRzIEZpbHRlciB7XG4gIC8qKlxuICAgKiBBIHVuaXF1ZSBzdHJpbmcgdGhhdCBpZGVudGlmaWVzIHRoaXMgb3BlcmF0aW9uLiBDYW4gYmUgdXNlZCB0byBzZWxlY3RcbiAgICogdGhlIGFjdGl2ZSBmaWx0ZXIuXG4gICAqIEB0eXBlIHtTdHJpbmd9XG4gICAqL1xuICBzdGF0aWMgZ2V0IGlkZW50aWZpZXIgKCkge1xuICAgIHJldHVybiBcImdsYW1cIjtcbiAgfVxuXG4gIC8qKlxuICAgKiBSZW5kZXJzIHRoZSBmaWx0ZXJcbiAgICogQHBhcmFtICB7UmVuZGVyZXJ9IHJlbmRlcmVyXG4gICAqIEByZXR1cm4ge1Byb21pc2V9XG4gICAqL1xuICByZW5kZXIgKHJlbmRlcmVyKSB7XG4gICAgdmFyIHN0YWNrID0gbmV3IEZpbHRlci5QcmltaXRpdmVzU3RhY2soKTtcblxuICAgIHN0YWNrLmFkZChuZXcgRmlsdGVyLlByaW1pdGl2ZXMuQ29udHJhc3Qoe1xuICAgICAgY29udHJhc3Q6IDEuMVxuICAgIH0pKTtcblxuICAgIHN0YWNrLmFkZChuZXcgRmlsdGVyLlByaW1pdGl2ZXMuVG9uZUN1cnZlKHtcbiAgICAgIHJnYkNvbnRyb2xQb2ludHM6IHtcbiAgICAgICAgcmVkOiBbXG4gICAgICAgICAgWzAsIDBdLFxuICAgICAgICAgIFs5NCwgNzRdLFxuICAgICAgICAgIFsxODEsIDIwNV0sXG4gICAgICAgICAgWzI1NSwgMjU1XVxuICAgICAgICBdLFxuICAgICAgICBncmVlbjogW1xuICAgICAgICAgIFswLCAwXSxcbiAgICAgICAgICBbMTI3LCAxMjddLFxuICAgICAgICAgIFsyNTUsIDI1NV1cbiAgICAgICAgXSxcbiAgICAgICAgYmx1ZTogW1xuICAgICAgICAgIFswLCAwXSxcbiAgICAgICAgICBbMTAyLCA3M10sXG4gICAgICAgICAgWzIyNywgMjEzXSxcbiAgICAgICAgICBbMjU1LCAyNTVdXG4gICAgICAgIF1cbiAgICAgIH1cbiAgICB9KSk7XG5cbiAgICBzdGFjay5yZW5kZXIocmVuZGVyZXIpO1xuICB9XG59XG5cbmV4cG9ydCBkZWZhdWx0IEdsYW1GaWx0ZXI7XG4iLCJcInVzZSBzdHJpY3RcIjtcbi8qIVxuICogQ29weXJpZ2h0IChjKSAyMDEzLTIwMTUgOWVsZW1lbnRzIEdtYkhcbiAqXG4gKiBSZWxlYXNlZCB1bmRlciBBdHRyaWJ1dGlvbi1Ob25Db21tZXJjaWFsIDMuMCBVbnBvcnRlZFxuICogaHR0cDovL2NyZWF0aXZlY29tbW9ucy5vcmcvbGljZW5zZXMvYnktbmMvMy4wL1xuICpcbiAqIEZvciBjb21tZXJjaWFsIHVzZSwgcGxlYXNlIGNvbnRhY3QgdXMgYXQgY29udGFjdEA5ZWxlbWVudHMuY29tXG4gKi9cblxuaW1wb3J0IEZpbHRlciBmcm9tIFwiLi9maWx0ZXJcIjtcblxuLyoqXG4gKiBHb2JibGluIEZpbHRlclxuICogQGNsYXNzXG4gKiBAYWxpYXMgSW1nbHlLaXQuRmlsdGVycy5Hb2JibGluRmlsdGVyXG4gKiBAZXh0ZW5kcyB7SW1nbHlLaXQuRmlsdGVyfVxuICovXG5jbGFzcyBHb2JibGluRmlsdGVyIGV4dGVuZHMgRmlsdGVyIHtcbiAgLyoqXG4gICAqIEEgdW5pcXVlIHN0cmluZyB0aGF0IGlkZW50aWZpZXMgdGhpcyBvcGVyYXRpb24uIENhbiBiZSB1c2VkIHRvIHNlbGVjdFxuICAgKiB0aGUgYWN0aXZlIGZpbHRlci5cbiAgICogQHR5cGUge1N0cmluZ31cbiAgICovXG4gIHN0YXRpYyBnZXQgaWRlbnRpZmllciAoKSB7XG4gICAgcmV0dXJuIFwiZ29iYmxpblwiO1xuICB9XG5cbiAgLyoqXG4gICAqIFJlbmRlcnMgdGhlIGZpbHRlclxuICAgKiBAcGFyYW0gIHtSZW5kZXJlcn0gcmVuZGVyZXJcbiAgICogQHJldHVybiB7UHJvbWlzZX1cbiAgICovXG4gIHJlbmRlciAocmVuZGVyZXIpIHtcbiAgICB2YXIgc3RhY2sgPSBuZXcgRmlsdGVyLlByaW1pdGl2ZXNTdGFjaygpO1xuXG4gICAgc3RhY2suYWRkKG5ldyBGaWx0ZXIuUHJpbWl0aXZlcy5Hb2JibGluKCkpO1xuXG4gICAgc3RhY2sucmVuZGVyKHJlbmRlcmVyKTtcbiAgfVxufVxuXG5leHBvcnQgZGVmYXVsdCBHb2JibGluRmlsdGVyO1xuIiwiXCJ1c2Ugc3RyaWN0XCI7XG4vKiFcbiAqIENvcHlyaWdodCAoYykgMjAxMy0yMDE1IDllbGVtZW50cyBHbWJIXG4gKlxuICogUmVsZWFzZWQgdW5kZXIgQXR0cmlidXRpb24tTm9uQ29tbWVyY2lhbCAzLjAgVW5wb3J0ZWRcbiAqIGh0dHA6Ly9jcmVhdGl2ZWNvbW1vbnMub3JnL2xpY2Vuc2VzL2J5LW5jLzMuMC9cbiAqXG4gKiBGb3IgY29tbWVyY2lhbCB1c2UsIHBsZWFzZSBjb250YWN0IHVzIGF0IGNvbnRhY3RAOWVsZW1lbnRzLmNvbVxuICovXG5cbmltcG9ydCBGaWx0ZXIgZnJvbSBcIi4vZmlsdGVyXCI7XG5cbi8qKlxuICogSWRlbnRpdHkgRmlsdGVyXG4gKiBAY2xhc3NcbiAqIEBhbGlhcyBJbWdseUtpdC5GaWx0ZXJzLklkZW50aXR5RmlsdGVyXG4gKiBAZXh0ZW5kcyB7SW1nbHlLaXQuRmlsdGVyfVxuICovXG5jbGFzcyBJZGVudGl0eUZpbHRlciBleHRlbmRzIEZpbHRlciB7XG4gIC8qKlxuICAgKiBBIHVuaXF1ZSBzdHJpbmcgdGhhdCBpZGVudGlmaWVzIHRoaXMgb3BlcmF0aW9uLiBDYW4gYmUgdXNlZCB0byBzZWxlY3RcbiAgICogdGhlIGFjdGl2ZSBmaWx0ZXIuXG4gICAqIEB0eXBlIHtTdHJpbmd9XG4gICAqL1xuICBzdGF0aWMgZ2V0IGlkZW50aWZpZXIgKCkge1xuICAgIHJldHVybiBcImlkZW50aXR5XCI7XG4gIH1cblxuICAvKipcbiAgICogUmVuZGVycyB0aGUgZmlsdGVyXG4gICAqIEBwYXJhbSAge1JlbmRlcmVyfSByZW5kZXJlclxuICAgKiBAcmV0dXJuIHtQcm9taXNlfVxuICAgKi9cbiAgcmVuZGVyIChyZW5kZXJlcikge1xuICAgIC8vIFRoaXMgaXMgdGhlIGlkZW50aXR5IGZpbHRlciwgaXQgZG9lc24ndCBoYXZlIGFueSBlZmZlY3QuXG4gIH1cbn1cblxuZXhwb3J0IGRlZmF1bHQgSWRlbnRpdHlGaWx0ZXI7XG4iLCJcInVzZSBzdHJpY3RcIjtcbi8qIVxuICogQ29weXJpZ2h0IChjKSAyMDEzLTIwMTUgOWVsZW1lbnRzIEdtYkhcbiAqXG4gKiBSZWxlYXNlZCB1bmRlciBBdHRyaWJ1dGlvbi1Ob25Db21tZXJjaWFsIDMuMCBVbnBvcnRlZFxuICogaHR0cDovL2NyZWF0aXZlY29tbW9ucy5vcmcvbGljZW5zZXMvYnktbmMvMy4wL1xuICpcbiAqIEZvciBjb21tZXJjaWFsIHVzZSwgcGxlYXNlIGNvbnRhY3QgdXMgYXQgY29udGFjdEA5ZWxlbWVudHMuY29tXG4gKi9cblxuaW1wb3J0IEZpbHRlciBmcm9tIFwiLi9maWx0ZXJcIjtcblxuLyoqXG4gKiBLMSBGaWx0ZXJcbiAqIEBjbGFzc1xuICogQGFsaWFzIEltZ2x5S2l0LkZpbHRlcnMuSzFGaWx0ZXJcbiAqIEBleHRlbmRzIHtJbWdseUtpdC5GaWx0ZXJ9XG4gKi9cbmNsYXNzIEsxRmlsdGVyIGV4dGVuZHMgRmlsdGVyIHtcbiAgLyoqXG4gICAqIEEgdW5pcXVlIHN0cmluZyB0aGF0IGlkZW50aWZpZXMgdGhpcyBvcGVyYXRpb24uIENhbiBiZSB1c2VkIHRvIHNlbGVjdFxuICAgKiB0aGUgYWN0aXZlIGZpbHRlci5cbiAgICogQHR5cGUge1N0cmluZ31cbiAgICovXG4gIHN0YXRpYyBnZXQgaWRlbnRpZmllciAoKSB7XG4gICAgcmV0dXJuIFwiazFcIjtcbiAgfVxuXG4gIC8qKlxuICAgKiBSZW5kZXJzIHRoZSBmaWx0ZXJcbiAgICogQHBhcmFtICB7UmVuZGVyZXJ9IHJlbmRlcmVyXG4gICAqIEByZXR1cm4ge1Byb21pc2V9XG4gICAqL1xuICByZW5kZXIgKHJlbmRlcmVyKSB7XG4gICAgdmFyIHN0YWNrID0gbmV3IEZpbHRlci5QcmltaXRpdmVzU3RhY2soKTtcblxuICAgIC8vIFRvbmUgY3VydmVcbiAgICBzdGFjay5hZGQobmV3IEZpbHRlci5QcmltaXRpdmVzLlRvbmVDdXJ2ZSh7XG4gICAgICBjb250cm9sUG9pbnRzOiBbXG4gICAgICAgIFswLCAwXSxcbiAgICAgICAgWzUzLCAzMl0sXG4gICAgICAgIFs5MSwgODBdLFxuICAgICAgICBbMTc2LCAyMDVdLFxuICAgICAgICBbMjU1LCAyNTVdXG4gICAgICBdXG4gICAgfSkpO1xuXG4gICAgLy8gU2F0dXJhdGlvblxuICAgIHN0YWNrLmFkZChuZXcgRmlsdGVyLlByaW1pdGl2ZXMuU2F0dXJhdGlvbih7XG4gICAgICBzYXR1cmF0aW9uOiAwLjlcbiAgICB9KSk7XG5cbiAgICBzdGFjay5yZW5kZXIocmVuZGVyZXIpO1xuICB9XG59XG5cbmV4cG9ydCBkZWZhdWx0IEsxRmlsdGVyO1xuIiwiXCJ1c2Ugc3RyaWN0XCI7XG4vKiFcbiAqIENvcHlyaWdodCAoYykgMjAxMy0yMDE1IDllbGVtZW50cyBHbWJIXG4gKlxuICogUmVsZWFzZWQgdW5kZXIgQXR0cmlidXRpb24tTm9uQ29tbWVyY2lhbCAzLjAgVW5wb3J0ZWRcbiAqIGh0dHA6Ly9jcmVhdGl2ZWNvbW1vbnMub3JnL2xpY2Vuc2VzL2J5LW5jLzMuMC9cbiAqXG4gKiBGb3IgY29tbWVyY2lhbCB1c2UsIHBsZWFzZSBjb250YWN0IHVzIGF0IGNvbnRhY3RAOWVsZW1lbnRzLmNvbVxuICovXG5cbmltcG9ydCBGaWx0ZXIgZnJvbSBcIi4vZmlsdGVyXCI7XG5pbXBvcnQgQ29sb3IgZnJvbSBcIi4uLy4uL2xpYi9jb2xvclwiO1xuXG4vKipcbiAqIEsyIEZpbHRlclxuICogQGNsYXNzXG4gKiBAYWxpYXMgSW1nbHlLaXQuRmlsdGVycy5LMkZpbHRlclxuICogQGV4dGVuZHMge0ltZ2x5S2l0LkZpbHRlcn1cbiAqL1xuY2xhc3MgSzJGaWx0ZXIgZXh0ZW5kcyBGaWx0ZXIge1xuICAvKipcbiAgICogQSB1bmlxdWUgc3RyaW5nIHRoYXQgaWRlbnRpZmllcyB0aGlzIG9wZXJhdGlvbi4gQ2FuIGJlIHVzZWQgdG8gc2VsZWN0XG4gICAqIHRoZSBhY3RpdmUgZmlsdGVyLlxuICAgKiBAdHlwZSB7U3RyaW5nfVxuICAgKi9cbiAgc3RhdGljIGdldCBpZGVudGlmaWVyICgpIHtcbiAgICByZXR1cm4gXCJrMlwiO1xuICB9XG5cbiAgLyoqXG4gICAqIFJlbmRlcnMgdGhlIGZpbHRlclxuICAgKiBAcGFyYW0gIHtSZW5kZXJlcn0gcmVuZGVyZXJcbiAgICogQHJldHVybiB7UHJvbWlzZX1cbiAgICovXG4gIHJlbmRlciAocmVuZGVyZXIpIHtcbiAgICB2YXIgc3RhY2sgPSBuZXcgRmlsdGVyLlByaW1pdGl2ZXNTdGFjaygpO1xuXG4gICAgLy8gVG9uZSBjdXJ2ZVxuICAgIHN0YWNrLmFkZChuZXcgRmlsdGVyLlByaW1pdGl2ZXMuVG9uZUN1cnZlKHtcbiAgICAgIGNvbnRyb2xQb2ludHM6IFtcbiAgICAgICAgWzAsIDBdLFxuICAgICAgICBbNTQsIDMzXSxcbiAgICAgICAgWzc3LCA4Ml0sXG4gICAgICAgIFs5NCwgMTAzXSxcbiAgICAgICAgWzEyMiwgMTI2XSxcbiAgICAgICAgWzE3NywgMTkzXSxcbiAgICAgICAgWzIyOSwgMjMyXSxcbiAgICAgICAgWzI1NSwgMjU1XVxuICAgICAgXVxuICAgIH0pKTtcblxuICAgIC8vIFNvZnQgY29sb3Igb3ZlcmxheVxuICAgIHN0YWNrLmFkZChuZXcgRmlsdGVyLlByaW1pdGl2ZXMuU29mdENvbG9yT3ZlcmxheSh7XG4gICAgICBjb2xvcjogbmV3IENvbG9yKDQwIC8gMjU1LCA0MCAvIDI1NSwgNDAgLyAyNTUpXG4gICAgfSkpO1xuXG4gICAgc3RhY2sucmVuZGVyKHJlbmRlcmVyKTtcbiAgfVxufVxuXG5leHBvcnQgZGVmYXVsdCBLMkZpbHRlcjtcbiIsIlwidXNlIHN0cmljdFwiO1xuLyohXG4gKiBDb3B5cmlnaHQgKGMpIDIwMTMtMjAxNSA5ZWxlbWVudHMgR21iSFxuICpcbiAqIFJlbGVhc2VkIHVuZGVyIEF0dHJpYnV0aW9uLU5vbkNvbW1lcmNpYWwgMy4wIFVucG9ydGVkXG4gKiBodHRwOi8vY3JlYXRpdmVjb21tb25zLm9yZy9saWNlbnNlcy9ieS1uYy8zLjAvXG4gKlxuICogRm9yIGNvbW1lcmNpYWwgdXNlLCBwbGVhc2UgY29udGFjdCB1cyBhdCBjb250YWN0QDllbGVtZW50cy5jb21cbiAqL1xuXG5pbXBvcnQgRmlsdGVyIGZyb20gXCIuL2ZpbHRlclwiO1xuXG4vKipcbiAqIEs2IEZpbHRlclxuICogQGNsYXNzXG4gKiBAYWxpYXMgSW1nbHlLaXQuRmlsdGVycy5LNkZpbHRlclxuICogQGV4dGVuZHMge0ltZ2x5S2l0LkZpbHRlcn1cbiAqL1xuY2xhc3MgSzZGaWx0ZXIgZXh0ZW5kcyBGaWx0ZXIge1xuICAvKipcbiAgICogQSB1bmlxdWUgc3RyaW5nIHRoYXQgaWRlbnRpZmllcyB0aGlzIG9wZXJhdGlvbi4gQ2FuIGJlIHVzZWQgdG8gc2VsZWN0XG4gICAqIHRoZSBhY3RpdmUgZmlsdGVyLlxuICAgKiBAdHlwZSB7U3RyaW5nfVxuICAgKi9cbiAgc3RhdGljIGdldCBpZGVudGlmaWVyICgpIHtcbiAgICByZXR1cm4gXCJrNlwiO1xuICB9XG5cbiAgLyoqXG4gICAqIFJlbmRlcnMgdGhlIGZpbHRlclxuICAgKiBAcGFyYW0gIHtSZW5kZXJlcn0gcmVuZGVyZXJcbiAgICogQHJldHVybiB7UHJvbWlzZX1cbiAgICovXG4gIHJlbmRlciAocmVuZGVyZXIpIHtcbiAgICB2YXIgc3RhY2sgPSBuZXcgRmlsdGVyLlByaW1pdGl2ZXNTdGFjaygpO1xuXG4gICAgLy8gU2F0dXJhdGlvblxuICAgIHN0YWNrLmFkZChuZXcgRmlsdGVyLlByaW1pdGl2ZXMuU2F0dXJhdGlvbih7XG4gICAgICBzYXR1cmF0aW9uOiAwLjVcbiAgICB9KSk7XG5cbiAgICBzdGFjay5yZW5kZXIocmVuZGVyZXIpO1xuICB9XG59XG5cbmV4cG9ydCBkZWZhdWx0IEs2RmlsdGVyO1xuIiwiXCJ1c2Ugc3RyaWN0XCI7XG4vKiFcbiAqIENvcHlyaWdodCAoYykgMjAxMy0yMDE1IDllbGVtZW50cyBHbWJIXG4gKlxuICogUmVsZWFzZWQgdW5kZXIgQXR0cmlidXRpb24tTm9uQ29tbWVyY2lhbCAzLjAgVW5wb3J0ZWRcbiAqIGh0dHA6Ly9jcmVhdGl2ZWNvbW1vbnMub3JnL2xpY2Vuc2VzL2J5LW5jLzMuMC9cbiAqXG4gKiBGb3IgY29tbWVyY2lhbCB1c2UsIHBsZWFzZSBjb250YWN0IHVzIGF0IGNvbnRhY3RAOWVsZW1lbnRzLmNvbVxuICovXG5cbmltcG9ydCBGaWx0ZXIgZnJvbSBcIi4vZmlsdGVyXCI7XG5cbi8qKlxuICogS0R5bmFtaWMgRmlsdGVyXG4gKiBAY2xhc3NcbiAqIEBhbGlhcyBJbWdseUtpdC5GaWx0ZXJzLktEeW5hbWljRmlsdGVyXG4gKiBAZXh0ZW5kcyB7SW1nbHlLaXQuRmlsdGVyfVxuICovXG5jbGFzcyBLRHluYW1pY0ZpbHRlciBleHRlbmRzIEZpbHRlciB7XG4gIC8qKlxuICAgKiBBIHVuaXF1ZSBzdHJpbmcgdGhhdCBpZGVudGlmaWVzIHRoaXMgb3BlcmF0aW9uLiBDYW4gYmUgdXNlZCB0byBzZWxlY3RcbiAgICogdGhlIGFjdGl2ZSBmaWx0ZXIuXG4gICAqIEB0eXBlIHtTdHJpbmd9XG4gICAqL1xuICBzdGF0aWMgZ2V0IGlkZW50aWZpZXIgKCkge1xuICAgIHJldHVybiBcImtkeW5hbWljXCI7XG4gIH1cblxuICAvKipcbiAgICogUmVuZGVycyB0aGUgZmlsdGVyXG4gICAqIEBwYXJhbSAge1JlbmRlcmVyfSByZW5kZXJlclxuICAgKiBAcmV0dXJuIHtQcm9taXNlfVxuICAgKi9cbiAgcmVuZGVyIChyZW5kZXJlcikge1xuICAgIHZhciBzdGFjayA9IG5ldyBGaWx0ZXIuUHJpbWl0aXZlc1N0YWNrKCk7XG5cbiAgICAvLyBUb25lIGN1cnZlXG4gICAgc3RhY2suYWRkKG5ldyBGaWx0ZXIuUHJpbWl0aXZlcy5Ub25lQ3VydmUoe1xuICAgICAgY29udHJvbFBvaW50czogW1xuICAgICAgICBbMCwgMF0sXG4gICAgICAgIFsxNywgMjddLFxuICAgICAgICBbNDYsIDY5XSxcbiAgICAgICAgWzkwLCAxMTJdLFxuICAgICAgICBbMTU2LCAyMDBdLFxuICAgICAgICBbMjAzLCAyNDNdLFxuICAgICAgICBbMjU1LCAyNTVdXG4gICAgICBdXG4gICAgfSkpO1xuXG4gICAgLy8gU2F0dXJhdGlvblxuICAgIHN0YWNrLmFkZChuZXcgRmlsdGVyLlByaW1pdGl2ZXMuU2F0dXJhdGlvbih7XG4gICAgICBzYXR1cmF0aW9uOiAwLjdcbiAgICB9KSk7XG5cbiAgICBzdGFjay5yZW5kZXIocmVuZGVyZXIpO1xuICB9XG59XG5cbmV4cG9ydCBkZWZhdWx0IEtEeW5hbWljRmlsdGVyO1xuIiwiXCJ1c2Ugc3RyaWN0XCI7XG4vKiFcbiAqIENvcHlyaWdodCAoYykgMjAxMy0yMDE1IDllbGVtZW50cyBHbWJIXG4gKlxuICogUmVsZWFzZWQgdW5kZXIgQXR0cmlidXRpb24tTm9uQ29tbWVyY2lhbCAzLjAgVW5wb3J0ZWRcbiAqIGh0dHA6Ly9jcmVhdGl2ZWNvbW1vbnMub3JnL2xpY2Vuc2VzL2J5LW5jLzMuMC9cbiAqXG4gKiBGb3IgY29tbWVyY2lhbCB1c2UsIHBsZWFzZSBjb250YWN0IHVzIGF0IGNvbnRhY3RAOWVsZW1lbnRzLmNvbVxuICovXG5cbmltcG9ydCBGaWx0ZXIgZnJvbSBcIi4vZmlsdGVyXCI7XG5cbi8qKlxuICogTGVuaW4gRmlsdGVyXG4gKiBAY2xhc3NcbiAqIEBhbGlhcyBJbWdseUtpdC5GaWx0ZXJzLkxlbmluRmlsdGVyXG4gKiBAZXh0ZW5kcyB7SW1nbHlLaXQuRmlsdGVyfVxuICovXG5jbGFzcyBMZW5pbkZpbHRlciBleHRlbmRzIEZpbHRlciB7XG4gIC8qKlxuICAgKiBBIHVuaXF1ZSBzdHJpbmcgdGhhdCBpZGVudGlmaWVzIHRoaXMgb3BlcmF0aW9uLiBDYW4gYmUgdXNlZCB0byBzZWxlY3RcbiAgICogdGhlIGFjdGl2ZSBmaWx0ZXIuXG4gICAqIEB0eXBlIHtTdHJpbmd9XG4gICAqL1xuICBzdGF0aWMgZ2V0IGlkZW50aWZpZXIgKCkge1xuICAgIHJldHVybiBcImxlbmluXCI7XG4gIH1cblxuICAvKipcbiAgICogUmVuZGVycyB0aGUgZmlsdGVyXG4gICAqIEBwYXJhbSAge1JlbmRlcmVyfSByZW5kZXJlclxuICAgKiBAcmV0dXJuIHtQcm9taXNlfVxuICAgKi9cbiAgcmVuZGVyIChyZW5kZXJlcikge1xuICAgIHZhciBzdGFjayA9IG5ldyBGaWx0ZXIuUHJpbWl0aXZlc1N0YWNrKCk7XG5cbiAgICAvLyBEZXNhdHVyYXRpb25cbiAgICBzdGFjay5hZGQobmV3IEZpbHRlci5QcmltaXRpdmVzLkRlc2F0dXJhdGlvbih7XG4gICAgICBkZXNhdHVyYXRpb246IDAuNFxuICAgIH0pKTtcblxuICAgIC8vIFRvbmUgY3VydmVcbiAgICBzdGFjay5hZGQobmV3IEZpbHRlci5QcmltaXRpdmVzLlRvbmVDdXJ2ZSh7XG4gICAgICByZ2JDb250cm9sUG9pbnRzOiB7XG4gICAgICAgIHJlZDogW1xuICAgICAgICAgIFswLCAyMF0sXG4gICAgICAgICAgWzQwLCAyMF0sXG4gICAgICAgICAgWzEwNiwgMTExXSxcbiAgICAgICAgICBbMTI5LCAxNTNdLFxuICAgICAgICAgIFsxOTAsIDIyM10sXG4gICAgICAgICAgWzI1NSwgMjU1XVxuICAgICAgICBdLFxuICAgICAgICBncmVlbjogW1xuICAgICAgICAgIFswLCAyMF0sXG4gICAgICAgICAgWzQwLCAyMF0sXG4gICAgICAgICAgWzYyLCA0MV0sXG4gICAgICAgICAgWzEwNiwgMTA4XSxcbiAgICAgICAgICBbMTMyLCAxNTldLFxuICAgICAgICAgIFsyMDMsIDIzN10sXG4gICAgICAgICAgWzI1NSwgMjU1XVxuICAgICAgICBdLFxuICAgICAgICBibHVlOiBbXG4gICAgICAgICAgWzAsIDQwXSxcbiAgICAgICAgICBbNDAsIDQwXSxcbiAgICAgICAgICBbNzMsIDYwXSxcbiAgICAgICAgICBbMTMzLCAxNjBdLFxuICAgICAgICAgIFsxOTEsIDI5N10sXG4gICAgICAgICAgWzIwMywgMjM3XSxcbiAgICAgICAgICBbMjM3LCAyMzldLFxuICAgICAgICAgIFsyNTUsIDI1NV1cbiAgICAgICAgXVxuICAgICAgfVxuICAgIH0pKTtcblxuICAgIHN0YWNrLnJlbmRlcihyZW5kZXJlcik7XG4gIH1cbn1cblxuZXhwb3J0IGRlZmF1bHQgTGVuaW5GaWx0ZXI7XG4iLCJcInVzZSBzdHJpY3RcIjtcbi8qIVxuICogQ29weXJpZ2h0IChjKSAyMDEzLTIwMTUgOWVsZW1lbnRzIEdtYkhcbiAqXG4gKiBSZWxlYXNlZCB1bmRlciBBdHRyaWJ1dGlvbi1Ob25Db21tZXJjaWFsIDMuMCBVbnBvcnRlZFxuICogaHR0cDovL2NyZWF0aXZlY29tbW9ucy5vcmcvbGljZW5zZXMvYnktbmMvMy4wL1xuICpcbiAqIEZvciBjb21tZXJjaWFsIHVzZSwgcGxlYXNlIGNvbnRhY3QgdXMgYXQgY29udGFjdEA5ZWxlbWVudHMuY29tXG4gKi9cblxuaW1wb3J0IEZpbHRlciBmcm9tIFwiLi9maWx0ZXJcIjtcblxuLyoqXG4gKiBMb21vIEZpbHRlclxuICogQGNsYXNzXG4gKiBAYWxpYXMgSW1nbHlLaXQuRmlsdGVycy5Mb21vRmlsdGVyXG4gKiBAZXh0ZW5kcyB7SW1nbHlLaXQuRmlsdGVyfVxuICovXG5jbGFzcyBMb21vRmlsdGVyIGV4dGVuZHMgRmlsdGVyIHtcblxuICAvKipcbiAgICogQSB1bmlxdWUgc3RyaW5nIHRoYXQgaWRlbnRpZmllcyB0aGlzIG9wZXJhdGlvbi4gQ2FuIGJlIHVzZWQgdG8gc2VsZWN0XG4gICAqIHRoZSBhY3RpdmUgZmlsdGVyLlxuICAgKiBAdHlwZSB7U3RyaW5nfVxuICAgKi9cbiAgc3RhdGljIGdldCBpZGVudGlmaWVyICgpIHtcbiAgICByZXR1cm4gXCJsb21vXCI7XG4gIH1cblxuICAvKipcbiAgICogUmVuZGVycyB0aGUgZmlsdGVyXG4gICAqIEBwYXJhbSAge1JlbmRlcmVyfSByZW5kZXJlclxuICAgKiBAcmV0dXJuIHtQcm9taXNlfVxuICAgKi9cbiAgcmVuZGVyIChyZW5kZXJlcikge1xuICAgIHZhciBzdGFjayA9IG5ldyBGaWx0ZXIuUHJpbWl0aXZlc1N0YWNrKCk7XG5cbiAgICBzdGFjay5hZGQobmV3IEZpbHRlci5QcmltaXRpdmVzLlRvbmVDdXJ2ZSh7XG4gICAgICBjb250cm9sUG9pbnRzOiBbXG4gICAgICAgIFswLCAwXSxcbiAgICAgICAgWzg3LCAyMF0sXG4gICAgICAgIFsxMzEsIDE1Nl0sXG4gICAgICAgIFsxODMsIDIwNV0sXG4gICAgICAgIFsyNTUsIDIwMF1cbiAgICAgIF1cbiAgICB9KSk7XG5cbiAgICBzdGFjay5yZW5kZXIocmVuZGVyZXIpO1xuICB9XG59XG5cbmV4cG9ydCBkZWZhdWx0IExvbW9GaWx0ZXI7XG4iLCJcInVzZSBzdHJpY3RcIjtcbi8qIVxuICogQ29weXJpZ2h0IChjKSAyMDEzLTIwMTUgOWVsZW1lbnRzIEdtYkhcbiAqXG4gKiBSZWxlYXNlZCB1bmRlciBBdHRyaWJ1dGlvbi1Ob25Db21tZXJjaWFsIDMuMCBVbnBvcnRlZFxuICogaHR0cDovL2NyZWF0aXZlY29tbW9ucy5vcmcvbGljZW5zZXMvYnktbmMvMy4wL1xuICpcbiAqIEZvciBjb21tZXJjaWFsIHVzZSwgcGxlYXNlIGNvbnRhY3QgdXMgYXQgY29udGFjdEA5ZWxlbWVudHMuY29tXG4gKi9cblxuaW1wb3J0IEZpbHRlciBmcm9tIFwiLi9maWx0ZXJcIjtcblxuLyoqXG4gKiBNZWxsb3cgRmlsdGVyXG4gKiBAY2xhc3NcbiAqIEBhbGlhcyBJbWdseUtpdC5GaWx0ZXJzLk1lbGxvd0ZpbHRlclxuICogQGV4dGVuZHMge0ltZ2x5S2l0LkZpbHRlcn1cbiAqL1xuY2xhc3MgTWVsbG93RmlsdGVyIGV4dGVuZHMgRmlsdGVyIHtcbiAgLyoqXG4gICAqIEEgdW5pcXVlIHN0cmluZyB0aGF0IGlkZW50aWZpZXMgdGhpcyBvcGVyYXRpb24uIENhbiBiZSB1c2VkIHRvIHNlbGVjdFxuICAgKiB0aGUgYWN0aXZlIGZpbHRlci5cbiAgICogQHR5cGUge1N0cmluZ31cbiAgICovXG4gIHN0YXRpYyBnZXQgaWRlbnRpZmllciAoKSB7XG4gICAgcmV0dXJuIFwibWVsbG93XCI7XG4gIH1cblxuICAvKipcbiAgICogUmVuZGVycyB0aGUgZmlsdGVyXG4gICAqIEBwYXJhbSAge1JlbmRlcmVyfSByZW5kZXJlclxuICAgKiBAcmV0dXJuIHtQcm9taXNlfVxuICAgKi9cbiAgcmVuZGVyIChyZW5kZXJlcikge1xuICAgIHZhciBzdGFjayA9IG5ldyBGaWx0ZXIuUHJpbWl0aXZlc1N0YWNrKCk7XG5cbiAgICBzdGFjay5hZGQobmV3IEZpbHRlci5QcmltaXRpdmVzLlRvbmVDdXJ2ZSh7XG4gICAgICByZ2JDb250cm9sUG9pbnRzOiB7XG4gICAgICAgIHJlZDogW1xuICAgICAgICAgIFswLCAwXSxcbiAgICAgICAgICBbNDEsIDg0XSxcbiAgICAgICAgICBbODcsIDEzNF0sXG4gICAgICAgICAgWzI1NSwgMjU1XVxuICAgICAgICBdLFxuICAgICAgICBncmVlbjogW1xuICAgICAgICAgIFswLCAwXSxcbiAgICAgICAgICBbMjU1LCAyMTZdXG4gICAgICAgIF0sXG4gICAgICAgIGJsdWU6IFtcbiAgICAgICAgICBbMCwgMF0sXG4gICAgICAgICAgWzI1NSwgMTMxXVxuICAgICAgICBdXG4gICAgICB9XG4gICAgfSkpO1xuXG4gICAgc3RhY2sucmVuZGVyKHJlbmRlcmVyKTtcbiAgfVxufVxuXG5leHBvcnQgZGVmYXVsdCBNZWxsb3dGaWx0ZXI7XG4iLCJcInVzZSBzdHJpY3RcIjtcbi8qIVxuICogQ29weXJpZ2h0IChjKSAyMDEzLTIwMTUgOWVsZW1lbnRzIEdtYkhcbiAqXG4gKiBSZWxlYXNlZCB1bmRlciBBdHRyaWJ1dGlvbi1Ob25Db21tZXJjaWFsIDMuMCBVbnBvcnRlZFxuICogaHR0cDovL2NyZWF0aXZlY29tbW9ucy5vcmcvbGljZW5zZXMvYnktbmMvMy4wL1xuICpcbiAqIEZvciBjb21tZXJjaWFsIHVzZSwgcGxlYXNlIGNvbnRhY3QgdXMgYXQgY29udGFjdEA5ZWxlbWVudHMuY29tXG4gKi9cblxuaW1wb3J0IEZpbHRlciBmcm9tIFwiLi9maWx0ZXJcIjtcblxuLyoqXG4gKiBNb3JuaW5nIEZpbHRlclxuICogQGNsYXNzXG4gKiBAYWxpYXMgSW1nbHlLaXQuRmlsdGVycy5Nb3JuaW5nRmlsdGVyXG4gKiBAZXh0ZW5kcyB7SW1nbHlLaXQuRmlsdGVyfVxuICovXG5jbGFzcyBNb3JuaW5nRmlsdGVyIGV4dGVuZHMgRmlsdGVyIHtcbiAgLyoqXG4gICAqIEEgdW5pcXVlIHN0cmluZyB0aGF0IGlkZW50aWZpZXMgdGhpcyBvcGVyYXRpb24uIENhbiBiZSB1c2VkIHRvIHNlbGVjdFxuICAgKiB0aGUgYWN0aXZlIGZpbHRlci5cbiAgICogQHR5cGUge1N0cmluZ31cbiAgICovXG4gIHN0YXRpYyBnZXQgaWRlbnRpZmllciAoKSB7XG4gICAgcmV0dXJuIFwibW9ybmluZ1wiO1xuICB9XG5cbiAgLyoqXG4gICAqIFJlbmRlcnMgdGhlIGZpbHRlclxuICAgKiBAcGFyYW0gIHtSZW5kZXJlcn0gcmVuZGVyZXJcbiAgICogQHJldHVybiB7UHJvbWlzZX1cbiAgICovXG4gIHJlbmRlciAocmVuZGVyZXIpIHtcbiAgICB2YXIgc3RhY2sgPSBuZXcgRmlsdGVyLlByaW1pdGl2ZXNTdGFjaygpO1xuXG4gICAgc3RhY2suYWRkKG5ldyBGaWx0ZXIuUHJpbWl0aXZlcy5Ub25lQ3VydmUoe1xuICAgICAgcmdiQ29udHJvbFBvaW50czoge1xuICAgICAgICByZWQ6IFtcbiAgICAgICAgICBbMCwgNDBdLFxuICAgICAgICAgIFsyNTUsIDIzMF1cbiAgICAgICAgXSxcbiAgICAgICAgZ3JlZW46IFtcbiAgICAgICAgICBbMCwgMTBdLFxuICAgICAgICAgIFsyNTUsIDIyNV1cbiAgICAgICAgXSxcbiAgICAgICAgYmx1ZTogW1xuICAgICAgICAgIFswLCAyMF0sXG4gICAgICAgICAgWzI1NSwgMTgxXVxuICAgICAgICBdXG4gICAgICB9XG4gICAgfSkpO1xuXG4gICAgc3RhY2suYWRkKG5ldyBGaWx0ZXIuUHJpbWl0aXZlcy5HbG93KCkpO1xuXG4gICAgc3RhY2sucmVuZGVyKHJlbmRlcmVyKTtcbiAgfVxufVxuXG5leHBvcnQgZGVmYXVsdCBNb3JuaW5nRmlsdGVyO1xuIiwiXCJ1c2Ugc3RyaWN0XCI7XG4vKiFcbiAqIENvcHlyaWdodCAoYykgMjAxMy0yMDE1IDllbGVtZW50cyBHbWJIXG4gKlxuICogUmVsZWFzZWQgdW5kZXIgQXR0cmlidXRpb24tTm9uQ29tbWVyY2lhbCAzLjAgVW5wb3J0ZWRcbiAqIGh0dHA6Ly9jcmVhdGl2ZWNvbW1vbnMub3JnL2xpY2Vuc2VzL2J5LW5jLzMuMC9cbiAqXG4gKiBGb3IgY29tbWVyY2lhbCB1c2UsIHBsZWFzZSBjb250YWN0IHVzIGF0IGNvbnRhY3RAOWVsZW1lbnRzLmNvbVxuICovXG5cbmltcG9ydCBGaWx0ZXIgZnJvbSBcIi4vZmlsdGVyXCI7XG5cbi8qKlxuICogT3JjaGlkIEZpbHRlclxuICogQGNsYXNzXG4gKiBAYWxpYXMgSW1nbHlLaXQuRmlsdGVycy5PcmNoaWRGaWx0ZXJcbiAqIEBleHRlbmRzIHtJbWdseUtpdC5GaWx0ZXJ9XG4gKi9cbmNsYXNzIE9yY2hpZEZpbHRlciBleHRlbmRzIEZpbHRlciB7XG4gIC8qKlxuICAgKiBBIHVuaXF1ZSBzdHJpbmcgdGhhdCBpZGVudGlmaWVzIHRoaXMgb3BlcmF0aW9uLiBDYW4gYmUgdXNlZCB0byBzZWxlY3RcbiAgICogdGhlIGFjdGl2ZSBmaWx0ZXIuXG4gICAqIEB0eXBlIHtTdHJpbmd9XG4gICAqL1xuICBzdGF0aWMgZ2V0IGlkZW50aWZpZXIgKCkge1xuICAgIHJldHVybiBcIm9yY2hpZFwiO1xuICB9XG5cbiAgLyoqXG4gICAqIFJlbmRlcnMgdGhlIGZpbHRlclxuICAgKiBAcGFyYW0gIHtSZW5kZXJlcn0gcmVuZGVyZXJcbiAgICogQHJldHVybiB7UHJvbWlzZX1cbiAgICovXG4gIHJlbmRlciAocmVuZGVyZXIpIHtcbiAgICB2YXIgc3RhY2sgPSBuZXcgRmlsdGVyLlByaW1pdGl2ZXNTdGFjaygpO1xuXG4gICAgLy8gVG9uZSBjdXJ2ZVxuICAgIHN0YWNrLmFkZChuZXcgRmlsdGVyLlByaW1pdGl2ZXMuVG9uZUN1cnZlKHtcbiAgICAgIHJnYkNvbnRyb2xQb2ludHM6IHtcbiAgICAgICAgcmVkOiBbXG4gICAgICAgICAgWzAsIDBdLFxuICAgICAgICAgIFsxMTUsIDEzMF0sXG4gICAgICAgICAgWzE5NSwgMjE1XSxcbiAgICAgICAgICBbMjU1LCAyNTVdXG4gICAgICAgIF0sXG4gICAgICAgIGdyZWVuOiBbXG4gICAgICAgICAgWzAsIDBdLFxuICAgICAgICAgIFsxNDgsIDE1M10sXG4gICAgICAgICAgWzE3MiwgMjE1XSxcbiAgICAgICAgICBbMjU1LCAyNTVdXG4gICAgICAgIF0sXG4gICAgICAgIGJsdWU6IFtcbiAgICAgICAgICBbMCwgNDZdLFxuICAgICAgICAgIFs1OCwgNzVdLFxuICAgICAgICAgIFsxNzgsIDIwNV0sXG4gICAgICAgICAgWzI1NSwgMjU1XVxuICAgICAgICBdXG4gICAgICB9XG4gICAgfSkpO1xuXG4gICAgLy8gVG9uZSBjdXJ2ZVxuICAgIHN0YWNrLmFkZChuZXcgRmlsdGVyLlByaW1pdGl2ZXMuVG9uZUN1cnZlKHtcbiAgICAgIGNvbnRyb2xQb2ludHM6IFtcbiAgICAgICAgWzAsIDBdLFxuICAgICAgICBbMTE3LCAxNTFdLFxuICAgICAgICBbMTg5LCAyMTddLFxuICAgICAgICBbMjU1LCAyNTVdXG4gICAgICBdXG4gICAgfSkpO1xuXG4gICAgLy8gRGVzYXR1cmF0aW9uXG4gICAgc3RhY2suYWRkKG5ldyBGaWx0ZXIuUHJpbWl0aXZlcy5EZXNhdHVyYXRpb24oe1xuICAgICAgZGVzYXR1cmF0aW9uOiAwLjY1XG4gICAgfSkpO1xuXG4gICAgc3RhY2sucmVuZGVyKHJlbmRlcmVyKTtcbiAgfVxufVxuXG5leHBvcnQgZGVmYXVsdCBPcmNoaWRGaWx0ZXI7XG4iLCJcInVzZSBzdHJpY3RcIjtcbi8qIVxuICogQ29weXJpZ2h0IChjKSAyMDEzLTIwMTUgOWVsZW1lbnRzIEdtYkhcbiAqXG4gKiBSZWxlYXNlZCB1bmRlciBBdHRyaWJ1dGlvbi1Ob25Db21tZXJjaWFsIDMuMCBVbnBvcnRlZFxuICogaHR0cDovL2NyZWF0aXZlY29tbW9ucy5vcmcvbGljZW5zZXMvYnktbmMvMy4wL1xuICpcbiAqIEZvciBjb21tZXJjaWFsIHVzZSwgcGxlYXNlIGNvbnRhY3QgdXMgYXQgY29udGFjdEA5ZWxlbWVudHMuY29tXG4gKi9cblxuaW1wb3J0IEZpbHRlciBmcm9tIFwiLi9maWx0ZXJcIjtcblxuLyoqXG4gKiBQb2xhIEZpbHRlclxuICogQGNsYXNzXG4gKiBAYWxpYXMgSW1nbHlLaXQuRmlsdGVycy5Qb2xhRmlsdGVyXG4gKiBAZXh0ZW5kcyB7SW1nbHlLaXQuRmlsdGVyfVxuICovXG5jbGFzcyBQb2xhRmlsdGVyIGV4dGVuZHMgRmlsdGVyIHtcbiAgLyoqXG4gICAqIEEgdW5pcXVlIHN0cmluZyB0aGF0IGlkZW50aWZpZXMgdGhpcyBvcGVyYXRpb24uIENhbiBiZSB1c2VkIHRvIHNlbGVjdFxuICAgKiB0aGUgYWN0aXZlIGZpbHRlci5cbiAgICogQHR5cGUge1N0cmluZ31cbiAgICovXG4gIHN0YXRpYyBnZXQgaWRlbnRpZmllciAoKSB7XG4gICAgcmV0dXJuIFwicG9sYVwiO1xuICB9XG5cbiAgLyoqXG4gICAqIFJlbmRlcnMgdGhlIGZpbHRlclxuICAgKiBAcGFyYW0gIHtSZW5kZXJlcn0gcmVuZGVyZXJcbiAgICogQHJldHVybiB7UHJvbWlzZX1cbiAgICovXG4gIHJlbmRlciAocmVuZGVyZXIpIHtcbiAgICB2YXIgc3RhY2sgPSBuZXcgRmlsdGVyLlByaW1pdGl2ZXNTdGFjaygpO1xuXG4gICAgc3RhY2suYWRkKG5ldyBGaWx0ZXIuUHJpbWl0aXZlcy5Ub25lQ3VydmUoe1xuICAgICAgcmdiQ29udHJvbFBvaW50czoge1xuICAgICAgICByZWQ6IFtcbiAgICAgICAgICBbMCwgMF0sXG4gICAgICAgICAgWzk0LCA3NF0sXG4gICAgICAgICAgWzE4MSwgMjA1XSxcbiAgICAgICAgICBbMjU1LCAyNTVdXG4gICAgICAgIF0sXG4gICAgICAgIGdyZWVuOiBbXG4gICAgICAgICAgWzAsIDBdLFxuICAgICAgICAgIFszNCwgMzRdLFxuICAgICAgICAgIFs5OSwgNzZdLFxuICAgICAgICAgIFsxNzYsIDE5MF0sXG4gICAgICAgICAgWzI1NSwgMjU1XVxuICAgICAgICBdLFxuICAgICAgICBibHVlOiBbXG4gICAgICAgICAgWzAsIDBdLFxuICAgICAgICAgIFsxMDIsIDczXSxcbiAgICAgICAgICBbMjI3LCAyMTNdLFxuICAgICAgICAgIFsyNTUsIDI1NV1cbiAgICAgICAgXVxuICAgICAgfVxuICAgIH0pKTtcblxuICAgIHN0YWNrLmFkZChuZXcgRmlsdGVyLlByaW1pdGl2ZXMuU2F0dXJhdGlvbih7XG4gICAgICBzYXR1cmF0aW9uOiAwLjhcbiAgICB9KSk7XG5cbiAgICBzdGFjay5hZGQobmV3IEZpbHRlci5QcmltaXRpdmVzLkNvbnRyYXN0KHtcbiAgICAgIGNvbnRyYXN0OiAxLjVcbiAgICB9KSk7XG5cbiAgICBzdGFjay5yZW5kZXIocmVuZGVyZXIpO1xuICB9XG59XG5cbmV4cG9ydCBkZWZhdWx0IFBvbGFGaWx0ZXI7XG4iLCJcInVzZSBzdHJpY3RcIjtcbi8qIVxuICogQ29weXJpZ2h0IChjKSAyMDEzLTIwMTUgOWVsZW1lbnRzIEdtYkhcbiAqXG4gKiBSZWxlYXNlZCB1bmRlciBBdHRyaWJ1dGlvbi1Ob25Db21tZXJjaWFsIDMuMCBVbnBvcnRlZFxuICogaHR0cDovL2NyZWF0aXZlY29tbW9ucy5vcmcvbGljZW5zZXMvYnktbmMvMy4wL1xuICpcbiAqIEZvciBjb21tZXJjaWFsIHVzZSwgcGxlYXNlIGNvbnRhY3QgdXMgYXQgY29udGFjdEA5ZWxlbWVudHMuY29tXG4gKi9cblxuaW1wb3J0IEZpbHRlciBmcm9tIFwiLi9maWx0ZXJcIjtcblxuLyoqXG4gKiBQb2xhNjY5IEZpbHRlclxuICogQGNsYXNzXG4gKiBAYWxpYXMgSW1nbHlLaXQuRmlsdGVycy5Qb2xhNjY5RmlsdGVyXG4gKiBAZXh0ZW5kcyB7SW1nbHlLaXQuRmlsdGVyfVxuICovXG5jbGFzcyBQb2xhNjY5RmlsdGVyIGV4dGVuZHMgRmlsdGVyIHtcbiAgLyoqXG4gICAqIEEgdW5pcXVlIHN0cmluZyB0aGF0IGlkZW50aWZpZXMgdGhpcyBvcGVyYXRpb24uIENhbiBiZSB1c2VkIHRvIHNlbGVjdFxuICAgKiB0aGUgYWN0aXZlIGZpbHRlci5cbiAgICogQHR5cGUge1N0cmluZ31cbiAgICovXG4gIHN0YXRpYyBnZXQgaWRlbnRpZmllciAoKSB7XG4gICAgcmV0dXJuIFwicG9sYTY2OVwiO1xuICB9XG5cbiAgLyoqXG4gICAqIFJlbmRlcnMgdGhlIGZpbHRlclxuICAgKiBAcGFyYW0gIHtSZW5kZXJlcn0gcmVuZGVyZXJcbiAgICogQHJldHVybiB7UHJvbWlzZX1cbiAgICovXG4gIHJlbmRlciAocmVuZGVyZXIpIHtcbiAgICB2YXIgc3RhY2sgPSBuZXcgRmlsdGVyLlByaW1pdGl2ZXNTdGFjaygpO1xuXG4gICAgc3RhY2suYWRkKG5ldyBGaWx0ZXIuUHJpbWl0aXZlcy5Ub25lQ3VydmUoe1xuICAgICAgcmdiQ29udHJvbFBvaW50czoge1xuICAgICAgICByZWQ6IFtcbiAgICAgICAgICBbMCwgMF0sXG4gICAgICAgICAgWzU2LCAxOF0sXG4gICAgICAgICAgWzE5NiwgMjA5XSxcbiAgICAgICAgICBbMjU1LCAyNTVdXG4gICAgICAgIF0sXG4gICAgICAgIGdyZWVuOiBbXG4gICAgICAgICAgWzAsIDM4XSxcbiAgICAgICAgICBbNzEsIDg0XSxcbiAgICAgICAgICBbMjU1LCAyNTVdXG4gICAgICAgIF0sXG4gICAgICAgIGJsdWU6IFtcbiAgICAgICAgICBbMCwgMF0sXG4gICAgICAgICAgWzEzMSwgMTMzXSxcbiAgICAgICAgICBbMjA0LCAyMTFdLFxuICAgICAgICAgIFsyNTUsIDI1NV1cbiAgICAgICAgXVxuICAgICAgfVxuICAgIH0pKTtcblxuICAgIHN0YWNrLmFkZChuZXcgRmlsdGVyLlByaW1pdGl2ZXMuU2F0dXJhdGlvbih7XG4gICAgICBzYXR1cmF0aW9uOiAwLjhcbiAgICB9KSk7XG5cbiAgICBzdGFjay5hZGQobmV3IEZpbHRlci5QcmltaXRpdmVzLkNvbnRyYXN0KHtcbiAgICAgIGNvbnRyYXN0OiAxLjVcbiAgICB9KSk7XG5cbiAgICBzdGFjay5yZW5kZXIocmVuZGVyZXIpO1xuICB9XG59XG5cbmV4cG9ydCBkZWZhdWx0IFBvbGE2NjlGaWx0ZXI7XG4iLCJcInVzZSBzdHJpY3RcIjtcbi8qIVxuICogQ29weXJpZ2h0IChjKSAyMDEzLTIwMTUgOWVsZW1lbnRzIEdtYkhcbiAqXG4gKiBSZWxlYXNlZCB1bmRlciBBdHRyaWJ1dGlvbi1Ob25Db21tZXJjaWFsIDMuMCBVbnBvcnRlZFxuICogaHR0cDovL2NyZWF0aXZlY29tbW9ucy5vcmcvbGljZW5zZXMvYnktbmMvMy4wL1xuICpcbiAqIEZvciBjb21tZXJjaWFsIHVzZSwgcGxlYXNlIGNvbnRhY3QgdXMgYXQgY29udGFjdEA5ZWxlbWVudHMuY29tXG4gKi9cblxuLyoqXG4gKiBBIGhlbHBlciBjbGFzcyB0aGF0IGNhbiBjb2xsZWN0IHtAbGluayBQcmltaXRpdmV9IGluc3RhbmNlcyBhbmQgcmVuZGVyXG4gKiB0aGUgc3RhY2tcbiAqIEBjbGFzc1xuICogQGFsaWFzIEltZ2x5S2l0LkZpbHRlci5QcmltaXRpdmVzU3RhY2tcbiAqL1xuY2xhc3MgUHJpbWl0aXZlc1N0YWNrIHtcbiAgY29uc3RydWN0b3IgKC4uLmFyZ3MpIHtcbiAgICBzdXBlciguLi5hcmdzKTtcblxuICAgIC8qKlxuICAgICAqIFRoZSBzdGFjayBvZiB7QGxpbmsgSW1nbHlLaXQuRmlsdGVyLlByaW1pdGl2ZX0gaW5zdGFuY2VzXG4gICAgICogQHR5cGUge0FycmF5fVxuICAgICAqIEBwcml2YXRlXG4gICAgICovXG4gICAgdGhpcy5fc3RhY2sgPSBbXTtcbiAgfVxuXG4gIC8qKlxuICAgKiBBZGRzIHRoZSBnaXZlbiBwcmltaXRpdmUgdG8gdGhlIHN0YWNrXG4gICAqIEBwYXJhbSB7SW1nbHlLaXQuRmlsdGVyLlByaW1pdGl2ZX0gcHJpbWl0aXZlXG4gICAqL1xuICBhZGQgKHByaW1pdGl2ZSkge1xuICAgIHRoaXMuX3N0YWNrLnB1c2gocHJpbWl0aXZlKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBSZW5kZXJzIHRoZSBzdGFjayBvZiBwcmltaXRpdmVzIG9uIHRoZSByZW5kZXJlclxuICAgKiBAcGFyYW0gIHtSZW5kZXJlcn0gcmVuZGVyZXJcbiAgICovXG4gIHJlbmRlciAocmVuZGVyZXIpIHtcbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IHRoaXMuX3N0YWNrLmxlbmd0aDsgaSsrKSB7XG4gICAgICB2YXIgcHJpbWl0aXZlID0gdGhpcy5fc3RhY2tbaV07XG4gICAgICBwcmltaXRpdmUucmVuZGVyKHJlbmRlcmVyKTtcbiAgICB9XG4gIH1cbn1cblxuZXhwb3J0IGRlZmF1bHQgUHJpbWl0aXZlc1N0YWNrO1xuIiwiXCJ1c2Ugc3RyaWN0XCI7XG4vKiFcbiAqIENvcHlyaWdodCAoYykgMjAxMy0yMDE1IDllbGVtZW50cyBHbWJIXG4gKlxuICogUmVsZWFzZWQgdW5kZXIgQXR0cmlidXRpb24tTm9uQ29tbWVyY2lhbCAzLjAgVW5wb3J0ZWRcbiAqIGh0dHA6Ly9jcmVhdGl2ZWNvbW1vbnMub3JnL2xpY2Vuc2VzL2J5LW5jLzMuMC9cbiAqXG4gKiBGb3IgY29tbWVyY2lhbCB1c2UsIHBsZWFzZSBjb250YWN0IHVzIGF0IGNvbnRhY3RAOWVsZW1lbnRzLmNvbVxuICovXG5cbmltcG9ydCBfIGZyb20gXCJsb2Rhc2hcIjtcbmltcG9ydCBQcmltaXRpdmUgZnJvbSBcIi4vcHJpbWl0aXZlXCI7XG5cbi8qKlxuICogQnJpZ2h0bmVzcyBwcmltaXRpdmVcbiAqIEBjbGFzc1xuICogQGFsaWFzIEltZ2x5S2l0LkZpbHRlci5QcmltaXRpdmVzLkJyaWdodG5lc3NcbiAqIEBleHRlbmRzIHtJbWdseUtpdC5GaWx0ZXIuUHJpbWl0aXZlfVxuICovXG5jbGFzcyBCcmlnaHRuZXNzIGV4dGVuZHMgUHJpbWl0aXZlIHtcbiAgY29uc3RydWN0b3IgKC4uLmFyZ3MpIHtcbiAgICBzdXBlciguLi5hcmdzKTtcblxuICAgIHRoaXMuX29wdGlvbnMgPSBfLmRlZmF1bHRzKHRoaXMuX29wdGlvbnMsIHtcbiAgICAgIGJyaWdodG5lc3M6IDEuMFxuICAgIH0pO1xuXG4gICAgLyoqXG4gICAgICogVGhlIGZyYWdtZW50IHNoYWRlciBmb3IgdGhpcyBwcmltaXRpdmVcbiAgICAgKiBAcmV0dXJuIHtTdHJpbmd9XG4gICAgICogQHByaXZhdGVcbiAgICAgKi9cbiAgICB0aGlzLl9mcmFnbWVudFNoYWRlciA9IGBcblxuICAgICAgcHJlY2lzaW9uIG1lZGl1bXAgZmxvYXQ7XG4gICAgICB2YXJ5aW5nIHZlYzIgdl90ZXhDb29yZDtcbiAgICAgIHVuaWZvcm0gc2FtcGxlcjJEIHVfaW1hZ2U7XG4gICAgICB1bmlmb3JtIGZsb2F0IHVfYnJpZ2h0bmVzcztcblxuICAgICAgdm9pZCBtYWluKCkge1xuICAgICAgICB2ZWM0IHRleENvbG9yID0gdGV4dHVyZTJEKHVfaW1hZ2UsIHZfdGV4Q29vcmQpO1xuICAgICAgICBnbF9GcmFnQ29sb3IgPSB2ZWM0KCh0ZXhDb2xvci5yZ2IgKyB2ZWMzKHVfYnJpZ2h0bmVzcykpLCB0ZXhDb2xvci5hKTtcbiAgICAgIH1cblxuICAgIGA7XG5cbiAgfVxuXG4gIC8qKlxuICAgKiBSZW5kZXJzIHRoZSBwcmltaXRpdmUgKFdlYkdMKVxuICAgKiBAcGFyYW0gIHtXZWJHTFJlbmRlcmVyfSByZW5kZXJlclxuICAgKi9cbiAgLyogaXN0YW5idWwgaWdub3JlIG5leHQgKi9cbiAgcmVuZGVyV2ViR0wgKHJlbmRlcmVyKSB7XG4gICAgcmVuZGVyZXIucnVuU2hhZGVyKG51bGwsIHRoaXMuX2ZyYWdtZW50U2hhZGVyLCB7XG4gICAgICB1bmlmb3Jtczoge1xuICAgICAgICB1X2JyaWdodG5lc3M6IHsgdHlwZTogXCJmXCIsIHZhbHVlOiB0aGlzLl9vcHRpb25zLmJyaWdodG5lc3MgfVxuICAgICAgfVxuICAgIH0pO1xuICB9XG5cbiAgLyoqXG4gICAqIFJlbmRlcnMgdGhlIHByaW1pdGl2ZSAoQ2FudmFzKVxuICAgKiBAcGFyYW0gIHtDYW52YXNSZW5kZXJlcn0gcmVuZGVyZXJcbiAgICovXG4gIHJlbmRlckNhbnZhcyAocmVuZGVyZXIpIHtcbiAgICB2YXIgY2FudmFzID0gcmVuZGVyZXIuZ2V0Q2FudmFzKCk7XG4gICAgdmFyIGltYWdlRGF0YSA9IHJlbmRlcmVyLmdldENvbnRleHQoKS5nZXRJbWFnZURhdGEoMCwgMCwgY2FudmFzLndpZHRoLCBjYW52YXMuaGVpZ2h0KTtcbiAgICB2YXIgYnJpZ2h0bmVzcyA9IHRoaXMuX29wdGlvbnMuYnJpZ2h0bmVzcztcblxuICAgIGZvciAodmFyIHggPSAwOyB4IDwgY2FudmFzLndpZHRoOyB4KyspIHtcbiAgICAgIGZvciAodmFyIHkgPSAwOyB5IDwgY2FudmFzLmhlaWdodDsgeSsrKSB7XG4gICAgICAgIHZhciBpbmRleCA9IChjYW52YXMud2lkdGggKiB5ICsgeCkgKiA0O1xuXG4gICAgICAgIGltYWdlRGF0YS5kYXRhW2luZGV4XSAgICAgPSBpbWFnZURhdGEuZGF0YVtpbmRleF0gKyBicmlnaHRuZXNzICogMjU1O1xuICAgICAgICBpbWFnZURhdGEuZGF0YVtpbmRleCArIDFdID0gaW1hZ2VEYXRhLmRhdGFbaW5kZXggKyAxXSArIGJyaWdodG5lc3MgKiAyNTU7XG4gICAgICAgIGltYWdlRGF0YS5kYXRhW2luZGV4ICsgMl0gPSBpbWFnZURhdGEuZGF0YVtpbmRleCArIDJdICsgYnJpZ2h0bmVzcyAqIDI1NTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICByZW5kZXJlci5nZXRDb250ZXh0KCkucHV0SW1hZ2VEYXRhKGltYWdlRGF0YSwgMCwgMCk7XG4gIH1cbn1cblxuZXhwb3J0IGRlZmF1bHQgQnJpZ2h0bmVzcztcbiIsIlwidXNlIHN0cmljdFwiO1xuLyohXG4gKiBDb3B5cmlnaHQgKGMpIDIwMTMtMjAxNSA5ZWxlbWVudHMgR21iSFxuICpcbiAqIFJlbGVhc2VkIHVuZGVyIEF0dHJpYnV0aW9uLU5vbkNvbW1lcmNpYWwgMy4wIFVucG9ydGVkXG4gKiBodHRwOi8vY3JlYXRpdmVjb21tb25zLm9yZy9saWNlbnNlcy9ieS1uYy8zLjAvXG4gKlxuICogRm9yIGNvbW1lcmNpYWwgdXNlLCBwbGVhc2UgY29udGFjdCB1cyBhdCBjb250YWN0QDllbGVtZW50cy5jb21cbiAqL1xuXG5pbXBvcnQgXyBmcm9tIFwibG9kYXNoXCI7XG5pbXBvcnQgUHJpbWl0aXZlIGZyb20gXCIuL3ByaW1pdGl2ZVwiO1xuXG4vKipcbiAqIENvbnRyYXN0IHByaW1pdGl2ZVxuICogQGNsYXNzXG4gKiBAYWxpYXMgSW1nbHlLaXQuRmlsdGVyLlByaW1pdGl2ZXMuQ29udHJhc3RcbiAqIEBleHRlbmRzIHtJbWdseUtpdC5GaWx0ZXIuUHJpbWl0aXZlfVxuICovXG5jbGFzcyBDb250cmFzdCBleHRlbmRzIFByaW1pdGl2ZSB7XG4gIGNvbnN0cnVjdG9yICguLi5hcmdzKSB7XG4gICAgc3VwZXIoLi4uYXJncyk7XG5cbiAgICB0aGlzLl9vcHRpb25zID0gXy5kZWZhdWx0cyh0aGlzLl9vcHRpb25zLCB7XG4gICAgICBjb250cmFzdDogMS4wXG4gICAgfSk7XG5cbiAgICAvKipcbiAgICAgKiBUaGUgZnJhZ21lbnQgc2hhZGVyIGZvciB0aGlzIHByaW1pdGl2ZVxuICAgICAqIEByZXR1cm4ge1N0cmluZ31cbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqL1xuICAgIHRoaXMuX2ZyYWdtZW50U2hhZGVyID0gYFxuXG4gICAgICBwcmVjaXNpb24gbWVkaXVtcCBmbG9hdDtcbiAgICAgIHZhcnlpbmcgdmVjMiB2X3RleENvb3JkO1xuICAgICAgdW5pZm9ybSBzYW1wbGVyMkQgdV9pbWFnZTtcbiAgICAgIHVuaWZvcm0gZmxvYXQgdV9jb250cmFzdDtcblxuICAgICAgdm9pZCBtYWluKCkge1xuICAgICAgICB2ZWM0IHRleENvbG9yID0gdGV4dHVyZTJEKHVfaW1hZ2UsIHZfdGV4Q29vcmQpO1xuICAgICAgICBnbF9GcmFnQ29sb3IgPSB2ZWM0KCgodGV4Q29sb3IucmdiIC0gdmVjMygwLjUpKSAqIHVfY29udHJhc3QgKyB2ZWMzKDAuNSkpLCB0ZXhDb2xvci5hKTtcbiAgICAgIH1cblxuICAgIGA7XG4gIH1cblxuICAvKipcbiAgICogUmVuZGVycyB0aGUgcHJpbWl0aXZlIChXZWJHTClcbiAgICogQHBhcmFtICB7V2ViR0xSZW5kZXJlcn0gcmVuZGVyZXJcbiAgICovXG4gIC8qIGlzdGFuYnVsIGlnbm9yZSBuZXh0ICovXG4gIHJlbmRlcldlYkdMIChyZW5kZXJlcikge1xuICAgIHJlbmRlcmVyLnJ1blNoYWRlcihudWxsLCB0aGlzLl9mcmFnbWVudFNoYWRlciwge1xuICAgICAgdW5pZm9ybXM6IHtcbiAgICAgICAgdV9jb250cmFzdDogeyB0eXBlOiBcImZcIiwgdmFsdWU6IHRoaXMuX29wdGlvbnMuY29udHJhc3QgfVxuICAgICAgfVxuICAgIH0pO1xuICB9XG5cbiAgLyoqXG4gICAqIFJlbmRlcnMgdGhlIHByaW1pdGl2ZSAoQ2FudmFzKVxuICAgKiBAcGFyYW0gIHtDYW52YXNSZW5kZXJlcn0gcmVuZGVyZXJcbiAgICovXG4gIHJlbmRlckNhbnZhcyAocmVuZGVyZXIpIHtcbiAgICB2YXIgY2FudmFzID0gcmVuZGVyZXIuZ2V0Q2FudmFzKCk7XG4gICAgdmFyIGltYWdlRGF0YSA9IHJlbmRlcmVyLmdldENvbnRleHQoKS5nZXRJbWFnZURhdGEoMCwgMCwgY2FudmFzLndpZHRoLCBjYW52YXMuaGVpZ2h0KTtcbiAgICB2YXIgY29udHJhc3QgPSB0aGlzLl9vcHRpb25zLmNvbnRyYXN0O1xuXG4gICAgZm9yICh2YXIgeCA9IDA7IHggPCBjYW52YXMud2lkdGg7IHgrKykge1xuICAgICAgZm9yICh2YXIgeSA9IDA7IHkgPCBjYW52YXMuaGVpZ2h0OyB5KyspIHtcbiAgICAgICAgdmFyIGluZGV4ID0gKGNhbnZhcy53aWR0aCAqIHkgKyB4KSAqIDQ7XG5cbiAgICAgICAgaW1hZ2VEYXRhLmRhdGFbaW5kZXhdICAgICA9IChpbWFnZURhdGEuZGF0YVtpbmRleF0gLSAxMjcpICogY29udHJhc3QgKyAxMjc7XG4gICAgICAgIGltYWdlRGF0YS5kYXRhW2luZGV4ICsgMV0gPSAoaW1hZ2VEYXRhLmRhdGFbaW5kZXggKyAxXSAtIDEyNykgKiBjb250cmFzdCArIDEyNztcbiAgICAgICAgaW1hZ2VEYXRhLmRhdGFbaW5kZXggKyAyXSA9IChpbWFnZURhdGEuZGF0YVtpbmRleCArIDJdIC0gMTI3KSAqIGNvbnRyYXN0ICsgMTI3O1xuICAgICAgfVxuICAgIH1cblxuICAgIHJlbmRlcmVyLmdldENvbnRleHQoKS5wdXRJbWFnZURhdGEoaW1hZ2VEYXRhLCAwLCAwKTtcbiAgfVxufVxuXG5leHBvcnQgZGVmYXVsdCBDb250cmFzdDtcbiIsIlwidXNlIHN0cmljdFwiO1xuLyohXG4gKiBDb3B5cmlnaHQgKGMpIDIwMTMtMjAxNSA5ZWxlbWVudHMgR21iSFxuICpcbiAqIFJlbGVhc2VkIHVuZGVyIEF0dHJpYnV0aW9uLU5vbkNvbW1lcmNpYWwgMy4wIFVucG9ydGVkXG4gKiBodHRwOi8vY3JlYXRpdmVjb21tb25zLm9yZy9saWNlbnNlcy9ieS1uYy8zLjAvXG4gKlxuICogRm9yIGNvbW1lcmNpYWwgdXNlLCBwbGVhc2UgY29udGFjdCB1cyBhdCBjb250YWN0QDllbGVtZW50cy5jb21cbiAqL1xuXG5pbXBvcnQgXyBmcm9tIFwibG9kYXNoXCI7XG5pbXBvcnQgUHJpbWl0aXZlIGZyb20gXCIuL3ByaW1pdGl2ZVwiO1xuXG4vKipcbiAqIERlc2F0dXJhdGlvbiBwcmltaXRpdmVcbiAqIEBjbGFzc1xuICogQGFsaWFzIEltZ2x5S2l0LkZpbHRlci5QcmltaXRpdmVzLkRlc2F0dXJhdGlvblxuICogQGV4dGVuZHMge0ltZ2x5S2l0LkZpbHRlci5QcmltaXRpdmV9XG4gKi9cbmNsYXNzIERlc2F0dXJhdGlvbiBleHRlbmRzIFByaW1pdGl2ZSB7XG4gIGNvbnN0cnVjdG9yICguLi5hcmdzKSB7XG4gICAgc3VwZXIoLi4uYXJncyk7XG5cbiAgICB0aGlzLl9vcHRpb25zID0gXy5kZWZhdWx0cyh0aGlzLl9vcHRpb25zLCB7XG4gICAgICBkZXNhdHVyYXRpb246IDEuMFxuICAgIH0pO1xuXG4gICAgLyoqXG4gICAgICogVGhlIGZyYWdtZW50IHNoYWRlciBmb3IgdGhpcyBwcmltaXRpdmVcbiAgICAgKiBAcmV0dXJuIHtTdHJpbmd9XG4gICAgICogQHByaXZhdGVcbiAgICAgKi9cbiAgICB0aGlzLl9mcmFnbWVudFNoYWRlciA9IGBcbiAgICAgIHByZWNpc2lvbiBtZWRpdW1wIGZsb2F0O1xuICAgICAgdmFyeWluZyB2ZWMyIHZfdGV4Q29vcmQ7XG4gICAgICB1bmlmb3JtIHNhbXBsZXIyRCB1X2ltYWdlO1xuICAgICAgdW5pZm9ybSBmbG9hdCB1X2Rlc2F0dXJhdGlvbjtcblxuICAgICAgY29uc3QgdmVjMyBsdW1pbmFuY2VXZWlnaHRpbmcgPSB2ZWMzKDAuMjEyNSwgMC43MTU0LCAwLjA3MjEpO1xuXG4gICAgICB2b2lkIG1haW4oKSB7XG4gICAgICAgIHZlYzMgdGV4Q29sb3IgPSB0ZXh0dXJlMkQodV9pbWFnZSwgdl90ZXhDb29yZCkueHl6O1xuICAgICAgICB2ZWMzIGdyYXlYZmVyID0gdmVjMygwLjMsIDAuNTksIDAuMTEpO1xuICAgICAgICB2ZWMzIGdyYXkgPSB2ZWMzKGRvdChncmF5WGZlciwgdGV4Q29sb3IpKTtcbiAgICAgICAgZ2xfRnJhZ0NvbG9yID0gdmVjNChtaXgodGV4Q29sb3IsIGdyYXksIHVfZGVzYXR1cmF0aW9uKSwgMS4wKTtcbiAgICAgIH1cbiAgICBgO1xuICB9XG5cbiAgLyoqXG4gICAqIFJlbmRlcnMgdGhlIHByaW1pdGl2ZSAoV2ViR0wpXG4gICAqIEBwYXJhbSAge1dlYkdMUmVuZGVyZXJ9IHJlbmRlcmVyXG4gICAqIEByZXR1cm4ge1Byb21pc2V9XG4gICAqL1xuICAvKiBpc3RhbmJ1bCBpZ25vcmUgbmV4dCAqL1xuICByZW5kZXJXZWJHTCAocmVuZGVyZXIpIHtcbiAgICByZW5kZXJlci5ydW5TaGFkZXIobnVsbCwgdGhpcy5fZnJhZ21lbnRTaGFkZXIsIHtcbiAgICAgIHVuaWZvcm1zOiB7XG4gICAgICAgIHVfZGVzYXR1cmF0aW9uOiB7IHR5cGU6IFwiZlwiLCB2YWx1ZTogdGhpcy5fb3B0aW9ucy5kZXNhdHVyYXRpb24gfVxuICAgICAgfVxuICAgIH0pO1xuICB9XG5cbiAgLyoqXG4gICAqIFJlbmRlcnMgdGhlIHByaW1pdGl2ZSAoQ2FudmFzKVxuICAgKiBAcGFyYW0gIHtDYW52YXNSZW5kZXJlcn0gcmVuZGVyZXJcbiAgICovXG4gIHJlbmRlckNhbnZhcyAocmVuZGVyZXIpIHtcbiAgICB2YXIgY2FudmFzID0gcmVuZGVyZXIuZ2V0Q2FudmFzKCk7XG4gICAgdmFyIGltYWdlRGF0YSA9IHJlbmRlcmVyLmdldENvbnRleHQoKS5nZXRJbWFnZURhdGEoMCwgMCwgY2FudmFzLndpZHRoLCBjYW52YXMuaGVpZ2h0KTtcbiAgICB2YXIgZGVzYXR1cmF0aW9uID0gdGhpcy5fb3B0aW9ucy5kZXNhdHVyYXRpb247XG5cbiAgICBmb3IgKHZhciB4ID0gMDsgeCA8IGNhbnZhcy53aWR0aDsgeCsrKSB7XG4gICAgICBmb3IgKHZhciB5ID0gMDsgeSA8IGNhbnZhcy5oZWlnaHQ7IHkrKykge1xuICAgICAgICB2YXIgaW5kZXggPSAoY2FudmFzLndpZHRoICogeSArIHgpICogNDtcblxuICAgICAgICB2YXIgbHVtaW5hbmNlID0gaW1hZ2VEYXRhLmRhdGFbaW5kZXhdICogMC4zICsgaW1hZ2VEYXRhLmRhdGFbaW5kZXggKyAxXSAqIDAuNTkgKyBpbWFnZURhdGEuZGF0YVtpbmRleCArIDJdICogMC4xMTtcbiAgICAgICAgaW1hZ2VEYXRhLmRhdGFbaW5kZXhdID0gbHVtaW5hbmNlICogKDEgLSBkZXNhdHVyYXRpb24pICsgKGltYWdlRGF0YS5kYXRhW2luZGV4XSAqIGRlc2F0dXJhdGlvbik7XG4gICAgICAgIGltYWdlRGF0YS5kYXRhW2luZGV4ICsgMV0gPSBsdW1pbmFuY2UgKiAoMSAtIGRlc2F0dXJhdGlvbikgKyAoaW1hZ2VEYXRhLmRhdGFbaW5kZXggKyAxXSAqIGRlc2F0dXJhdGlvbik7XG4gICAgICAgIGltYWdlRGF0YS5kYXRhW2luZGV4ICsgMl0gPSBsdW1pbmFuY2UgKiAoMSAtIGRlc2F0dXJhdGlvbikgKyAoaW1hZ2VEYXRhLmRhdGFbaW5kZXggKyAyXSAqIGRlc2F0dXJhdGlvbik7XG4gICAgICB9XG4gICAgfVxuXG4gICAgcmVuZGVyZXIuZ2V0Q29udGV4dCgpLnB1dEltYWdlRGF0YShpbWFnZURhdGEsIDAsIDApO1xuICB9XG59XG5cbmV4cG9ydCBkZWZhdWx0IERlc2F0dXJhdGlvbjtcbiIsIlwidXNlIHN0cmljdFwiO1xuLyohXG4gKiBDb3B5cmlnaHQgKGMpIDIwMTMtMjAxNSA5ZWxlbWVudHMgR21iSFxuICpcbiAqIFJlbGVhc2VkIHVuZGVyIEF0dHJpYnV0aW9uLU5vbkNvbW1lcmNpYWwgMy4wIFVucG9ydGVkXG4gKiBodHRwOi8vY3JlYXRpdmVjb21tb25zLm9yZy9saWNlbnNlcy9ieS1uYy8zLjAvXG4gKlxuICogRm9yIGNvbW1lcmNpYWwgdXNlLCBwbGVhc2UgY29udGFjdCB1cyBhdCBjb250YWN0QDllbGVtZW50cy5jb21cbiAqL1xuXG5pbXBvcnQgXyBmcm9tIFwibG9kYXNoXCI7XG5pbXBvcnQgUHJpbWl0aXZlIGZyb20gXCIuL3ByaW1pdGl2ZVwiO1xuaW1wb3J0IENvbG9yIGZyb20gXCIuLi8uLi8uLi9saWIvY29sb3JcIjtcblxuLyoqXG4gKiBHbG93IHByaW1pdGl2ZVxuICogQGNsYXNzXG4gKiBAYWxpYXMgSW1nbHlLaXQuRmlsdGVyLlByaW1pdGl2ZXMuR2xvd1xuICogQGV4dGVuZHMge0ltZ2x5S2l0LkZpbHRlci5QcmltaXRpdmV9XG4gKi9cbmNsYXNzIEdsb3cgZXh0ZW5kcyBQcmltaXRpdmUge1xuICBjb25zdHJ1Y3RvciAoLi4uYXJncykge1xuICAgIHN1cGVyKC4uLmFyZ3MpO1xuXG4gICAgdGhpcy5fb3B0aW9ucyA9IF8uZGVmYXVsdHModGhpcy5fb3B0aW9ucywge1xuICAgICAgY29sb3I6IG5ldyBDb2xvcigxLCAxLCAxKVxuICAgIH0pO1xuXG4gICAgLyoqXG4gICAgICogVGhlIGZyYWdtZW50IHNoYWRlciBmb3IgdGhpcyBwcmltaXRpdmVcbiAgICAgKiBAcmV0dXJuIHtTdHJpbmd9XG4gICAgICogQHByaXZhdGVcbiAgICAgKi9cbiAgICB0aGlzLl9mcmFnbWVudFNoYWRlciA9IGBcbiAgICAgIHByZWNpc2lvbiBtZWRpdW1wIGZsb2F0O1xuICAgICAgdmFyeWluZyB2ZWMyIHZfdGV4Q29vcmQ7XG4gICAgICB1bmlmb3JtIHNhbXBsZXIyRCB1X2ltYWdlO1xuXG4gICAgICB1bmlmb3JtIHZlYzMgdV9jb2xvcjtcblxuICAgICAgdm9pZCBtYWluKCkge1xuICAgICAgICB2ZWMzIHRleENvbG9yID0gdGV4dHVyZTJEKHVfaW1hZ2UsIHZfdGV4Q29vcmQpLnJnYjtcblxuICAgICAgICB2ZWMyIHRleHR1cmVDb29yZCA9IHZfdGV4Q29vcmQgLSB2ZWMyKDAuNSwgMC41KTtcbiAgICAgICAgdGV4dHVyZUNvb3JkIC89IDAuNzU7XG5cbiAgICAgICAgZmxvYXQgZCA9IDEuMCAtIGRvdCh0ZXh0dXJlQ29vcmQsIHRleHR1cmVDb29yZCk7XG4gICAgICAgIGQgPSBjbGFtcChkLCAwLjIsIDEuMCk7XG4gICAgICAgIHZlYzMgbmV3Q29sb3IgPSB0ZXhDb2xvciAqIGQgKiB1X2NvbG9yLnJnYjtcbiAgICAgICAgZ2xfRnJhZ0NvbG9yID0gdmVjNCh2ZWMzKG5ld0NvbG9yKSwxLjApO1xuICAgICAgfVxuICAgIGA7XG4gIH1cblxuICAvKipcbiAgICogUmVuZGVycyB0aGUgcHJpbWl0aXZlIChXZWJHTClcbiAgICogQHBhcmFtICB7V2ViR0xSZW5kZXJlcn0gcmVuZGVyZXJcbiAgICogQHJldHVybiB7UHJvbWlzZX1cbiAgICovXG4gIC8qIGlzdGFuYnVsIGlnbm9yZSBuZXh0ICovXG4gIHJlbmRlcldlYkdMIChyZW5kZXJlcikge1xuICAgIHJlbmRlcmVyLnJ1blNoYWRlcihudWxsLCB0aGlzLl9mcmFnbWVudFNoYWRlciwge1xuICAgICAgdW5pZm9ybXM6IHtcbiAgICAgICAgdV9jb2xvcjogeyB0eXBlOiBcIjNmXCIsIHZhbHVlOiB0aGlzLl9vcHRpb25zLmNvbG9yLnRvUkdCR0xDb2xvcigpfVxuICAgICAgfVxuICAgIH0pO1xuICB9XG5cbiAgLyoqXG4gICAqIFJlbmRlcnMgdGhlIHByaW1pdGl2ZSAoQ2FudmFzKVxuICAgKiBAcGFyYW0gIHtDYW52YXNSZW5kZXJlcn0gcmVuZGVyZXJcbiAgICogQHJldHVybiB7UHJvbWlzZX1cbiAgICovXG4gIHJlbmRlckNhbnZhcyAocmVuZGVyZXIpIHtcbiAgICB2YXIgY2FudmFzID0gcmVuZGVyZXIuZ2V0Q2FudmFzKCk7XG4gICAgdmFyIGltYWdlRGF0YSA9IHJlbmRlcmVyLmdldENvbnRleHQoKS5nZXRJbWFnZURhdGEoMCwgMCwgY2FudmFzLndpZHRoLCBjYW52YXMuaGVpZ2h0KTtcbiAgICB2YXIgY29sb3IgPSB0aGlzLl9vcHRpb25zLmNvbG9yO1xuXG4gICAgdmFyIGQ7XG4gICAgZm9yICh2YXIgeCA9IDA7IHggPCBjYW52YXMud2lkdGg7IHgrKykge1xuICAgICAgZm9yICh2YXIgeSA9IDA7IHkgPCBjYW52YXMuaGVpZ2h0OyB5KyspIHtcbiAgICAgICAgdmFyIGluZGV4ID0gKGNhbnZhcy53aWR0aCAqIHkgKyB4KSAqIDQ7XG5cbiAgICAgICAgdmFyIHgwMSA9IHggLyBjYW52YXMud2lkdGg7XG4gICAgICAgIHZhciB5MDEgPSB5IC8gY2FudmFzLmhlaWdodDtcblxuICAgICAgICB2YXIgbnggPSAoeDAxIC0gMC41KSAvIDAuNzU7XG4gICAgICAgIHZhciBueSA9ICh5MDEgLSAwLjUpIC8gMC43NTtcblxuICAgICAgICB2YXIgc2NhbGFyWCA9IG54ICogbng7XG4gICAgICAgIHZhciBzY2FsYXJZID0gbnkgKiBueTtcbiAgICAgICAgZCA9IDEgLSAoc2NhbGFyWCArIHNjYWxhclkpO1xuICAgICAgICBkID0gTWF0aC5taW4oTWF0aC5tYXgoZCwgMC4xKSwgMS4wKTtcblxuICAgICAgICBpbWFnZURhdGEuZGF0YVtpbmRleF0gPSBpbWFnZURhdGEuZGF0YVtpbmRleF0gKiAoZCAqIGNvbG9yLnIpO1xuICAgICAgICBpbWFnZURhdGEuZGF0YVtpbmRleCArIDFdID0gaW1hZ2VEYXRhLmRhdGFbaW5kZXggKyAxXSAqIChkICogY29sb3IuZyk7XG4gICAgICAgIGltYWdlRGF0YS5kYXRhW2luZGV4ICsgMl0gPSBpbWFnZURhdGEuZGF0YVtpbmRleCArIDJdICogKGQgKiBjb2xvci5iKTtcbiAgICAgICAgaW1hZ2VEYXRhLmRhdGFbaW5kZXggKyAzXSA9IDI1NTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICByZW5kZXJlci5nZXRDb250ZXh0KCkucHV0SW1hZ2VEYXRhKGltYWdlRGF0YSwgMCwgMCk7XG4gIH1cbn1cblxuZXhwb3J0IGRlZmF1bHQgR2xvdztcbiIsIlwidXNlIHN0cmljdFwiO1xuLyohXG4gKiBDb3B5cmlnaHQgKGMpIDIwMTMtMjAxNSA5ZWxlbWVudHMgR21iSFxuICpcbiAqIFJlbGVhc2VkIHVuZGVyIEF0dHJpYnV0aW9uLU5vbkNvbW1lcmNpYWwgMy4wIFVucG9ydGVkXG4gKiBodHRwOi8vY3JlYXRpdmVjb21tb25zLm9yZy9saWNlbnNlcy9ieS1uYy8zLjAvXG4gKlxuICogRm9yIGNvbW1lcmNpYWwgdXNlLCBwbGVhc2UgY29udGFjdCB1cyBhdCBjb250YWN0QDllbGVtZW50cy5jb21cbiAqL1xuXG5pbXBvcnQgUHJpbWl0aXZlIGZyb20gXCIuL3ByaW1pdGl2ZVwiO1xuXG4vKipcbiAqIEdvYmJsaW4gcHJpbWl0aXZlXG4gKiBAY2xhc3NcbiAqIEBhbGlhcyBJbWdseUtpdC5GaWx0ZXIuUHJpbWl0aXZlcy5Hb2JibGluXG4gKiBAZXh0ZW5kcyB7SW1nbHlLaXQuRmlsdGVyLlByaW1pdGl2ZX1cbiAqL1xuY2xhc3MgR29iYmxpbiBleHRlbmRzIFByaW1pdGl2ZSB7XG4gIGNvbnN0cnVjdG9yICguLi5hcmdzKSB7XG4gICAgc3VwZXIoLi4uYXJncyk7XG5cbiAgICAvKipcbiAgICAgKiBUaGUgZnJhZ21lbnQgc2hhZGVyIGZvciB0aGlzIHByaW1pdGl2ZVxuICAgICAqIEByZXR1cm4ge1N0cmluZ31cbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqL1xuICAgIHRoaXMuX2ZyYWdtZW50U2hhZGVyID0gYFxuICAgICAgcHJlY2lzaW9uIG1lZGl1bXAgZmxvYXQ7XG4gICAgICB2YXJ5aW5nIHZlYzIgdl90ZXhDb29yZDtcbiAgICAgIHVuaWZvcm0gc2FtcGxlcjJEIHVfaW1hZ2U7XG5cbiAgICAgIHZvaWQgbWFpbigpIHtcbiAgICAgICAgdmVjNCB0ZXhDb2xvciA9IHRleHR1cmUyRCh1X2ltYWdlLCB2X3RleENvb3JkKTtcbiAgICAgICAgdGV4Q29sb3IuYiA9IHRleENvbG9yLmcgKiAwLjMzO1xuICAgICAgICB0ZXhDb2xvci5yID0gdGV4Q29sb3IuciAqIDAuNjtcbiAgICAgICAgdGV4Q29sb3IuYiArPSB0ZXhDb2xvci5yICogMC4zMztcbiAgICAgICAgdGV4Q29sb3IuZyA9IHRleENvbG9yLmcgKiAwLjc7XG4gICAgICAgIGdsX0ZyYWdDb2xvciA9IHRleENvbG9yO1xuICAgICAgfVxuICAgIGA7XG4gIH1cblxuICAvKipcbiAgICogUmVuZGVycyB0aGUgcHJpbWl0aXZlIChXZWJHTClcbiAgICogQHBhcmFtICB7V2ViR0xSZW5kZXJlcn0gcmVuZGVyZXJcbiAgICogQHJldHVybiB7UHJvbWlzZX1cbiAgICovXG4gIC8qIGlzdGFuYnVsIGlnbm9yZSBuZXh0ICovXG4gIHJlbmRlcldlYkdMIChyZW5kZXJlcikge1xuICAgIHJlbmRlcmVyLnJ1blNoYWRlcihudWxsLCB0aGlzLl9mcmFnbWVudFNoYWRlcik7XG4gIH1cblxuICAvKipcbiAgICogUmVuZGVycyB0aGUgcHJpbWl0aXZlIChDYW52YXMpXG4gICAqIEBwYXJhbSAge0NhbnZhc1JlbmRlcmVyfSByZW5kZXJlclxuICAgKi9cbiAgcmVuZGVyQ2FudmFzIChyZW5kZXJlcikge1xuICAgIHZhciBjYW52YXMgPSByZW5kZXJlci5nZXRDYW52YXMoKTtcbiAgICB2YXIgaW1hZ2VEYXRhID0gcmVuZGVyZXIuZ2V0Q29udGV4dCgpLmdldEltYWdlRGF0YSgwLCAwLCBjYW52YXMud2lkdGgsIGNhbnZhcy5oZWlnaHQpO1xuXG4gICAgZm9yICh2YXIgeCA9IDA7IHggPCBjYW52YXMud2lkdGg7IHgrKykge1xuICAgICAgZm9yICh2YXIgeSA9IDA7IHkgPCBjYW52YXMuaGVpZ2h0OyB5KyspIHtcbiAgICAgICAgdmFyIGluZGV4ID0gKGNhbnZhcy53aWR0aCAqIHkgKyB4KSAqIDQ7XG5cbiAgICAgICAgaW1hZ2VEYXRhLmRhdGFbaW5kZXggKyAyXSA9IGltYWdlRGF0YS5kYXRhW2luZGV4ICsgMV0gKiAwLjMzO1xuICAgICAgICBpbWFnZURhdGEuZGF0YVtpbmRleF0gPSBpbWFnZURhdGEuZGF0YVtpbmRleF0gKiAwLjY7XG4gICAgICAgIGltYWdlRGF0YS5kYXRhW2luZGV4ICsgMl0gKz0gaW1hZ2VEYXRhLmRhdGFbaW5kZXhdICogMC4zMztcbiAgICAgICAgaW1hZ2VEYXRhLmRhdGFbaW5kZXggKyAxXSA9IGltYWdlRGF0YS5kYXRhW2luZGV4ICsgMV0gKiAwLjc7XG4gICAgICAgIGltYWdlRGF0YS5kYXRhW2luZGV4ICsgM10gPSAyNTU7XG4gICAgICB9XG4gICAgfVxuXG4gICAgcmVuZGVyZXIuZ2V0Q29udGV4dCgpLnB1dEltYWdlRGF0YShpbWFnZURhdGEsIDAsIDApO1xuICB9XG59XG5cbmV4cG9ydCBkZWZhdWx0IEdvYmJsaW47XG4iLCJcInVzZSBzdHJpY3RcIjtcbi8qIVxuICogQ29weXJpZ2h0IChjKSAyMDEzLTIwMTUgOWVsZW1lbnRzIEdtYkhcbiAqXG4gKiBSZWxlYXNlZCB1bmRlciBBdHRyaWJ1dGlvbi1Ob25Db21tZXJjaWFsIDMuMCBVbnBvcnRlZFxuICogaHR0cDovL2NyZWF0aXZlY29tbW9ucy5vcmcvbGljZW5zZXMvYnktbmMvMy4wL1xuICpcbiAqIEZvciBjb21tZXJjaWFsIHVzZSwgcGxlYXNlIGNvbnRhY3QgdXMgYXQgY29udGFjdEA5ZWxlbWVudHMuY29tXG4gKi9cblxuaW1wb3J0IFByaW1pdGl2ZSBmcm9tIFwiLi9wcmltaXRpdmVcIjtcblxuLyoqXG4gKiBHcmF5c2NhbGUgcHJpbWl0aXZlXG4gKiBAY2xhc3NcbiAqIEBhbGlhcyBJbWdseUtpdC5GaWx0ZXIuUHJpbWl0aXZlcy5HcmF5c2NhbGVcbiAqIEBleHRlbmRzIHtJbWdseUtpdC5GaWx0ZXIuUHJpbWl0aXZlfVxuICovXG5jbGFzcyBHcmF5c2NhbGUgZXh0ZW5kcyBQcmltaXRpdmUge1xuICBjb25zdHJ1Y3RvciAoLi4uYXJncykge1xuICAgIHN1cGVyKC4uLmFyZ3MpO1xuXG4gICAgLyoqXG4gICAgICogVGhlIGZyYWdtZW50IHNoYWRlciBmb3IgdGhpcyBwcmltaXRpdmVcbiAgICAgKiBAcmV0dXJuIHtTdHJpbmd9XG4gICAgICogQHByaXZhdGVcbiAgICAgKi9cbiAgICB0aGlzLl9mcmFnbWVudFNoYWRlciA9IGBcbiAgICAgIHByZWNpc2lvbiBtZWRpdW1wIGZsb2F0O1xuICAgICAgdmFyeWluZyB2ZWMyIHZfdGV4Q29vcmQ7XG4gICAgICB1bmlmb3JtIHNhbXBsZXIyRCB1X2ltYWdlO1xuICAgICAgdmVjMyBXID0gdmVjMygwLjIxMjUsIDAuNzE1NCwgMC4wNzIxKTtcblxuICAgICAgdm9pZCBtYWluKCkge1xuICAgICAgICB2ZWMzIHRleENvbG9yID0gdGV4dHVyZTJEKHVfaW1hZ2UsIHZfdGV4Q29vcmQpLnJnYjtcbiAgICAgICAgZmxvYXQgbHVtaW5hbmNlID0gZG90KHRleENvbG9yLCBXKTtcbiAgICAgICAgZ2xfRnJhZ0NvbG9yID0gdmVjNCh2ZWMzKGx1bWluYW5jZSksIDEuMCk7XG4gICAgICB9XG4gICAgYDtcbiAgfVxuXG4gIC8qKlxuICAgKiBSZW5kZXJzIHRoZSBwcmltaXRpdmUgKFdlYkdMKVxuICAgKiBAcGFyYW0gIHtXZWJHTFJlbmRlcmVyfSByZW5kZXJlclxuICAgKiBAcmV0dXJuIHtQcm9taXNlfVxuICAgKi9cbiAgLyogaXN0YW5idWwgaWdub3JlIG5leHQgKi9cbiAgcmVuZGVyV2ViR0wgKHJlbmRlcmVyKSB7XG4gICAgcmVuZGVyZXIucnVuU2hhZGVyKG51bGwsIHRoaXMuX2ZyYWdtZW50U2hhZGVyKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBSZW5kZXJzIHRoZSBwcmltaXRpdmUgKENhbnZhcylcbiAgICogQHBhcmFtICB7Q2FudmFzUmVuZGVyZXJ9IHJlbmRlcmVyXG4gICAqL1xuICByZW5kZXJDYW52YXMgKHJlbmRlcmVyKSB7XG4gICAgdmFyIGNhbnZhcyA9IHJlbmRlcmVyLmdldENhbnZhcygpO1xuICAgIHZhciBpbWFnZURhdGEgPSByZW5kZXJlci5nZXRDb250ZXh0KCkuZ2V0SW1hZ2VEYXRhKDAsIDAsIGNhbnZhcy53aWR0aCwgY2FudmFzLmhlaWdodCk7XG5cbiAgICBmb3IgKHZhciB4ID0gMDsgeCA8IGNhbnZhcy53aWR0aDsgeCsrKSB7XG4gICAgICBmb3IgKHZhciB5ID0gMDsgeSA8IGNhbnZhcy5oZWlnaHQ7IHkrKykge1xuICAgICAgICB2YXIgaW5kZXggPSAoY2FudmFzLndpZHRoICogeSArIHgpICogNDtcblxuICAgICAgICB2YXIgbHVtaW5hbmNlID0gaW1hZ2VEYXRhLmRhdGFbaW5kZXhdICogMC4yMTI1ICsgaW1hZ2VEYXRhLmRhdGFbaW5kZXggKyAxXSAqIDAuNzE1NCArIGltYWdlRGF0YS5kYXRhW2luZGV4ICsgMl0gKiAwLjA3MjE7XG5cbiAgICAgICAgaW1hZ2VEYXRhLmRhdGFbaW5kZXhdID0gbHVtaW5hbmNlO1xuICAgICAgICBpbWFnZURhdGEuZGF0YVtpbmRleCArIDFdID0gbHVtaW5hbmNlO1xuICAgICAgICBpbWFnZURhdGEuZGF0YVtpbmRleCArIDJdID0gbHVtaW5hbmNlO1xuICAgICAgfVxuICAgIH1cblxuICAgIHJlbmRlcmVyLmdldENvbnRleHQoKS5wdXRJbWFnZURhdGEoaW1hZ2VEYXRhLCAwLCAwKTtcbiAgfVxufVxuXG5leHBvcnQgZGVmYXVsdCBHcmF5c2NhbGU7XG4iLCJcInVzZSBzdHJpY3RcIjtcbi8qIVxuICogQ29weXJpZ2h0IChjKSAyMDEzLTIwMTUgOWVsZW1lbnRzIEdtYkhcbiAqXG4gKiBSZWxlYXNlZCB1bmRlciBBdHRyaWJ1dGlvbi1Ob25Db21tZXJjaWFsIDMuMCBVbnBvcnRlZFxuICogaHR0cDovL2NyZWF0aXZlY29tbW9ucy5vcmcvbGljZW5zZXMvYnktbmMvMy4wL1xuICpcbiAqIEZvciBjb21tZXJjaWFsIHVzZSwgcGxlYXNlIGNvbnRhY3QgdXMgYXQgY29udGFjdEA5ZWxlbWVudHMuY29tXG4gKi9cblxuaW1wb3J0IFByaW1pdGl2ZSBmcm9tIFwiLi9wcmltaXRpdmVcIjtcblxuLyoqXG4gKiBTdG9yZXMgYSAyNTYgYnl0ZSBsb25nIGxvb2t1cCB0YWJsZSBpbiBhIDJkIHRleHR1cmUgd2hpY2ggd2lsbCBiZVxuICogdXNlZCB0byBsb29rIHVwIHRoZSBjb3JyZXNwb25kaW5nIHZhbHVlIGZvciBlYWNoIGNoYW5uZWwuXG4gKiBAY2xhc3NcbiAqIEBhbGlhcyBJbWdseUtpdC5GaWx0ZXIuUHJpbWl0aXZlcy5Mb29rdXBUYWJsZVxuICogQGV4dGVuZHMge0ltZ2x5S2l0LkZpbHRlci5QcmltaXRpdmV9XG4gKi9cbmNsYXNzIExvb2t1cFRhYmxlIGV4dGVuZHMgUHJpbWl0aXZlIHtcbiAgY29uc3RydWN0b3IgKCkge1xuICAgIFByaW1pdGl2ZS5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xuXG4gICAgdGhpcy5fdGV4dHVyZUluZGV4ID0gMztcblxuICAgIC8qKlxuICAgICAqIFRoZSBmcmFnbWVudCBzaGFkZXIgZm9yIHRoaXMgcHJpbWl0aXZlXG4gICAgICogQHJldHVybiB7U3RyaW5nfVxuICAgICAqIEBwcml2YXRlXG4gICAgICovXG4gICAgdGhpcy5fZnJhZ21lbnRTaGFkZXIgPSBgXG4gICAgICBwcmVjaXNpb24gbWVkaXVtcCBmbG9hdDtcbiAgICAgIHZhcnlpbmcgdmVjMiB2X3RleENvb3JkO1xuICAgICAgdW5pZm9ybSBzYW1wbGVyMkQgdV9pbWFnZTtcbiAgICAgIHVuaWZvcm0gc2FtcGxlcjJEIHVfbG9va3VwVGFibGU7XG5cbiAgICAgIHZvaWQgbWFpbigpIHtcbiAgICAgICAgdmVjNCB0ZXhDb2xvciA9IHRleHR1cmUyRCh1X2ltYWdlLCB2X3RleENvb3JkKTtcbiAgICAgICAgZmxvYXQgciA9IHRleHR1cmUyRCh1X2xvb2t1cFRhYmxlLCB2ZWMyKHRleENvbG9yLnIsIDAuMCkpLnI7XG4gICAgICAgIGZsb2F0IGcgPSB0ZXh0dXJlMkQodV9sb29rdXBUYWJsZSwgdmVjMih0ZXhDb2xvci5nLCAwLjApKS5nO1xuICAgICAgICBmbG9hdCBiID0gdGV4dHVyZTJEKHVfbG9va3VwVGFibGUsIHZlYzIodGV4Q29sb3IuYiwgMC4wKSkuYjtcblxuICAgICAgICBnbF9GcmFnQ29sb3IgPSB2ZWM0KHIsIGcsIGIsIHRleENvbG9yLmEpO1xuICAgICAgfVxuICAgIGA7XG4gIH1cblxuICAvKipcbiAgICogUmVuZGVycyB0aGUgcHJpbWl0aXZlIChXZWJHTClcbiAgICogQHBhcmFtICB7V2ViR0xSZW5kZXJlcn0gcmVuZGVyZXJcbiAgICovXG4gIC8qIGlzdGFuYnVsIGlnbm9yZSBuZXh0ICovXG4gIHJlbmRlcldlYkdMIChyZW5kZXJlcikge1xuICAgIHRoaXMuX3VwZGF0ZVRleHR1cmUocmVuZGVyZXIpO1xuXG4gICAgcmVuZGVyZXIucnVuU2hhZGVyKG51bGwsIHRoaXMuX2ZyYWdtZW50U2hhZGVyLCB7XG4gICAgICB1bmlmb3Jtczoge1xuICAgICAgICB1X2xvb2t1cFRhYmxlOiB7IHR5cGU6IFwiaVwiLCB2YWx1ZTogMyB9XG4gICAgICB9XG4gICAgfSk7XG4gIH1cblxuICAvKipcbiAgICogUmVuZGVycyB0aGUgcHJpbWl0aXZlIChDYW52YXMpXG4gICAqIEBwYXJhbSAge0NhbnZhc1JlbmRlcmVyfSByZW5kZXJlclxuICAgKi9cbiAgcmVuZGVyQ2FudmFzIChyZW5kZXJlcikge1xuICAgIHZhciBjYW52YXMgPSByZW5kZXJlci5nZXRDYW52YXMoKTtcbiAgICB2YXIgaW1hZ2VEYXRhID0gcmVuZGVyZXIuZ2V0Q29udGV4dCgpLmdldEltYWdlRGF0YSgwLCAwLCBjYW52YXMud2lkdGgsIGNhbnZhcy5oZWlnaHQpO1xuICAgIHZhciB0YWJsZSA9IHRoaXMuX29wdGlvbnMuZGF0YTtcblxuICAgIGZvciAodmFyIHggPSAwOyB4IDwgY2FudmFzLndpZHRoOyB4KyspIHtcbiAgICAgIGZvciAodmFyIHkgPSAwOyB5IDwgY2FudmFzLmhlaWdodDsgeSsrKSB7XG4gICAgICAgIHZhciBpbmRleCA9IChjYW52YXMud2lkdGggKiB5ICsgeCkgKiA0O1xuXG4gICAgICAgIHZhciByID0gaW1hZ2VEYXRhLmRhdGFbaW5kZXhdO1xuICAgICAgICBpbWFnZURhdGEuZGF0YVtpbmRleF0gPSB0YWJsZVtyICogNF07XG4gICAgICAgIHZhciBnID0gaW1hZ2VEYXRhLmRhdGFbaW5kZXggKyAxXTtcbiAgICAgICAgaW1hZ2VEYXRhLmRhdGFbaW5kZXggKyAxXSA9IHRhYmxlWzEgKyBnICogNF07XG4gICAgICAgIHZhciBiID0gaW1hZ2VEYXRhLmRhdGFbaW5kZXggKyAyXTtcbiAgICAgICAgaW1hZ2VEYXRhLmRhdGFbaW5kZXggKyAyXSA9IHRhYmxlWzIgKyBiICogNF07XG4gICAgICB9XG4gICAgfVxuXG4gICAgcmVuZGVyZXIuZ2V0Q29udGV4dCgpLnB1dEltYWdlRGF0YShpbWFnZURhdGEsIDAsIDApO1xuICB9XG5cbiAgLyoqXG4gICAqIFVwZGF0ZXMgdGhlIGxvb2t1cCB0YWJsZSB0ZXh0dXJlIChXZWJHTCBvbmx5KVxuICAgKiBAcHJpdmF0ZVxuICAgKi9cbiAgLyogaXN0YW5idWwgaWdub3JlIG5leHQgKi9cbiAgX3VwZGF0ZVRleHR1cmUgKHJlbmRlcmVyKSB7XG4gICAgdmFyIGdsID0gcmVuZGVyZXIuZ2V0Q29udGV4dCgpO1xuXG4gICAgaWYgKHR5cGVvZiB0aGlzLl9vcHRpb25zLmRhdGEgPT09IFwidW5kZWZpbmVkXCIpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcihcIkxvb2t1cFRhYmxlOiBObyBkYXRhIHNwZWNpZmllZC5cIik7XG4gICAgfVxuXG4gICAgdmFyIGRhdGFUeXBlZEFycmF5ID0gbmV3IFVpbnQ4QXJyYXkodGhpcy5fb3B0aW9ucy5kYXRhKTtcblxuICAgIGdsLmFjdGl2ZVRleHR1cmUoZ2wuVEVYVFVSRTAgKyB0aGlzLl90ZXh0dXJlSW5kZXgpO1xuICAgIGlmICghdGhpcy5fdGV4dHVyZSkge1xuICAgICAgdGhpcy5fdGV4dHVyZSA9IGdsLmNyZWF0ZVRleHR1cmUoKTtcbiAgICB9XG4gICAgZ2wuYmluZFRleHR1cmUoZ2wuVEVYVFVSRV8yRCwgdGhpcy5fdGV4dHVyZSk7XG5cbiAgICBnbC50ZXhQYXJhbWV0ZXJpKGdsLlRFWFRVUkVfMkQsIGdsLlRFWFRVUkVfTUlOX0ZJTFRFUiwgZ2wuTElORUFSKTtcbiAgICBnbC50ZXhQYXJhbWV0ZXJpKGdsLlRFWFRVUkVfMkQsIGdsLlRFWFRVUkVfTUFHX0ZJTFRFUiwgZ2wuTElORUFSKTtcbiAgICBnbC50ZXhQYXJhbWV0ZXJpKGdsLlRFWFRVUkVfMkQsIGdsLlRFWFRVUkVfV1JBUF9TLCBnbC5DTEFNUF9UT19FREdFKTtcbiAgICBnbC50ZXhQYXJhbWV0ZXJpKGdsLlRFWFRVUkVfMkQsIGdsLlRFWFRVUkVfV1JBUF9ULCBnbC5DTEFNUF9UT19FREdFKTtcblxuICAgIGdsLnRleEltYWdlMkQoZ2wuVEVYVFVSRV8yRCwgMCwgZ2wuUkdCQSwgMjU2LCAxLCAwLCBnbC5SR0JBLCBnbC5VTlNJR05FRF9CWVRFLCBkYXRhVHlwZWRBcnJheSk7XG4gICAgZ2wuYWN0aXZlVGV4dHVyZShnbC5URVhUVVJFMCk7XG4gIH1cbn1cblxuZXhwb3J0IGRlZmF1bHQgTG9va3VwVGFibGU7XG4iLCIvKiBqc2hpbnQgdW51c2VkOiBmYWxzZSAqL1xuXCJ1c2Ugc3RyaWN0XCI7XG4vKiFcbiAqIENvcHlyaWdodCAoYykgMjAxMy0yMDE1IDllbGVtZW50cyBHbWJIXG4gKlxuICogUmVsZWFzZWQgdW5kZXIgQXR0cmlidXRpb24tTm9uQ29tbWVyY2lhbCAzLjAgVW5wb3J0ZWRcbiAqIGh0dHA6Ly9jcmVhdGl2ZWNvbW1vbnMub3JnL2xpY2Vuc2VzL2J5LW5jLzMuMC9cbiAqXG4gKiBGb3IgY29tbWVyY2lhbCB1c2UsIHBsZWFzZSBjb250YWN0IHVzIGF0IGNvbnRhY3RAOWVsZW1lbnRzLmNvbVxuICovXG5cbi8qKlxuICogQmFzZSBjbGFzcyBmb3IgcHJpbWl0aXZlcy4gRXh0ZW5kYWJsZSB2aWEge0BsaW5rIEltZ2x5S2l0LkZpbHRlci5QcmltaXRpdmUjZXh0ZW5kfVxuICogQGNsYXNzXG4gKiBAYWxpYXMgSW1nbHlLaXQuRmlsdGVyLlByaW1pdGl2ZVxuICovXG5jbGFzcyBQcmltaXRpdmUge1xuICBjb25zdHJ1Y3RvciAob3B0aW9ucykge1xuICAgIG9wdGlvbnMgPSBvcHRpb25zIHx8IHt9O1xuXG4gICAgdGhpcy5fb3B0aW9ucyA9IG9wdGlvbnM7XG4gIH1cblxuICAvKipcbiAgICogUmVuZGVycyB0aGUgcHJpbWl0aXZlXG4gICAqIEBwYXJhbSAge1JlbmRlcmVyfSByZW5kZXJlclxuICAgKiBAcmV0dXJuIHtQcm9taXNlfVxuICAgKi9cbiAgcmVuZGVyIChyZW5kZXJlcikge1xuICAgIGlmIChyZW5kZXJlci5pZGVudGlmaWVyID09PSBcIndlYmdsXCIpIHtcbiAgICAgIHRoaXMucmVuZGVyV2ViR0wocmVuZGVyZXIpO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLnJlbmRlckNhbnZhcyhyZW5kZXJlcik7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIFJlbmRlcnMgdGhlIHByaW1pdGl2ZSAoV2ViR0wpXG4gICAqIEBwYXJhbSAge0NhbnZhc1JlbmRlcmVyfSByZW5kZXJlclxuICAgKi9cbiAgLyogaXN0YW5idWwgaWdub3JlIG5leHQgKi9cbiAgcmVuZGVyV2ViR0wgKHJlbmRlcmVyKSB7XG4gICAgLyogaXN0YW5idWwgaWdub3JlIG5leHQgKi9cbiAgICB0aHJvdyBuZXcgRXJyb3IoXCJQcmltaXRpdmUjcmVuZGVyV2ViR0wgaXMgYWJzdHJhY3QgYW5kIG5vdCBpbXBsZW1lbnRlZCBpbiBpbmhlcml0ZWQgY2xhc3MuXCIpO1xuICB9XG5cbiAgLyoqXG4gICAqIFJlbmRlcnMgdGhlIHByaW1pdGl2ZSAoQ2FudmFzMkQpXG4gICAqIEBwYXJhbSAge0NhbnZhc1JlbmRlcmVyfSByZW5kZXJlclxuICAgKi9cbiAgcmVuZGVyQ2FudmFzIChyZW5kZXJlcikge1xuICAgIC8qIGlzdGFuYnVsIGlnbm9yZSBuZXh0ICovXG4gICAgdGhyb3cgbmV3IEVycm9yKFwiUHJpbWl0aXZlI3JlbmRlckNhbnZhcyBpcyBhYnN0cmFjdCBhbmQgbm90IGltcGxlbWVudGVkIGluIGluaGVyaXRlZCBjbGFzcy5cIik7XG4gIH1cbn1cblxuZXhwb3J0IGRlZmF1bHQgUHJpbWl0aXZlO1xuIiwiXCJ1c2Ugc3RyaWN0XCI7XG4vKiFcbiAqIENvcHlyaWdodCAoYykgMjAxMy0yMDE1IDllbGVtZW50cyBHbWJIXG4gKlxuICogUmVsZWFzZWQgdW5kZXIgQXR0cmlidXRpb24tTm9uQ29tbWVyY2lhbCAzLjAgVW5wb3J0ZWRcbiAqIGh0dHA6Ly9jcmVhdGl2ZWNvbW1vbnMub3JnL2xpY2Vuc2VzL2J5LW5jLzMuMC9cbiAqXG4gKiBGb3IgY29tbWVyY2lhbCB1c2UsIHBsZWFzZSBjb250YWN0IHVzIGF0IGNvbnRhY3RAOWVsZW1lbnRzLmNvbVxuICovXG5cbmltcG9ydCBfIGZyb20gXCJsb2Rhc2hcIjtcbmltcG9ydCBQcmltaXRpdmUgZnJvbSBcIi4vcHJpbWl0aXZlXCI7XG5cbi8qKlxuICogU2F0dXJhdGlvbiBwcmltaXRpdmVcbiAqIEBjbGFzc1xuICogQGFsaWFzIEltZ2x5S2l0LkZpbHRlci5QcmltaXRpdmVzLlNhdHVyYXRpb25cbiAqIEBleHRlbmRzIHtJbWdseUtpdC5GaWx0ZXIuUHJpbWl0aXZlfVxuICovXG5jbGFzcyBTYXR1cmF0aW9uIGV4dGVuZHMgUHJpbWl0aXZlIHtcbiAgY29uc3RydWN0b3IgKC4uLmFyZ3MpIHtcbiAgICBzdXBlciguLi5hcmdzKTtcblxuICAgIHRoaXMuX29wdGlvbnMgPSBfLmRlZmF1bHRzKHRoaXMuX29wdGlvbnMsIHtcbiAgICAgIHNhdHVyYXRpb246IDBcbiAgICB9KTtcblxuICAgIC8qKlxuICAgICAqIFRoZSBmcmFnbWVudCBzaGFkZXIgZm9yIHRoaXMgcHJpbWl0aXZlXG4gICAgICogQHJldHVybiB7U3RyaW5nfVxuICAgICAqIEBwcml2YXRlXG4gICAgICovXG4gICAgdGhpcy5fZnJhZ21lbnRTaGFkZXIgPSBgXG4gICAgICBwcmVjaXNpb24gbWVkaXVtcCBmbG9hdDtcbiAgICAgIHZhcnlpbmcgdmVjMiB2X3RleENvb3JkO1xuICAgICAgdW5pZm9ybSBzYW1wbGVyMkQgdV9pbWFnZTtcbiAgICAgIHVuaWZvcm0gZmxvYXQgdV9zYXR1cmF0aW9uO1xuXG4gICAgICBjb25zdCB2ZWMzIGx1bWluYW5jZVdlaWdodGluZyA9IHZlYzMoMC4yMTI1LCAwLjcxNTQsIDAuMDcyMSk7XG5cbiAgICAgIHZvaWQgbWFpbigpIHtcbiAgICAgICAgdmVjNCB0ZXhDb2xvciA9IHRleHR1cmUyRCh1X2ltYWdlLCB2X3RleENvb3JkKTtcbiAgICAgICAgZmxvYXQgbHVtaW5hbmNlID0gZG90KHRleENvbG9yLnJnYiwgbHVtaW5hbmNlV2VpZ2h0aW5nKTtcblxuICAgICAgICB2ZWMzIGdyZXlTY2FsZUNvbG9yID0gdmVjMyhsdW1pbmFuY2UpO1xuXG4gICAgICAgIGdsX0ZyYWdDb2xvciA9IHZlYzQobWl4KGdyZXlTY2FsZUNvbG9yLCB0ZXhDb2xvci5yZ2IsIHVfc2F0dXJhdGlvbiksIHRleENvbG9yLmEpO1xuICAgICAgfVxuICAgIGA7XG4gIH1cblxuICAvKipcbiAgICogUmVuZGVycyB0aGUgcHJpbWl0aXZlIChXZWJHTClcbiAgICogQHBhcmFtICB7V2ViR0xSZW5kZXJlcn0gcmVuZGVyZXJcbiAgICovXG4gIC8qIGlzdGFuYnVsIGlnbm9yZSBuZXh0ICovXG4gIHJlbmRlcldlYkdMIChyZW5kZXJlcikge1xuICAgIHJlbmRlcmVyLnJ1blNoYWRlcihudWxsLCB0aGlzLl9mcmFnbWVudFNoYWRlciwge1xuICAgICAgdW5pZm9ybXM6IHtcbiAgICAgICAgdV9zYXR1cmF0aW9uOiB7IHR5cGU6IFwiZlwiLCB2YWx1ZTogdGhpcy5fb3B0aW9ucy5zYXR1cmF0aW9uIH1cbiAgICAgIH1cbiAgICB9KTtcbiAgfVxuXG4gIC8qKlxuICAgKiBSZW5kZXJzIHRoZSBwcmltaXRpdmUgKENhbnZhcylcbiAgICogQHBhcmFtICB7Q2FudmFzUmVuZGVyZXJ9IHJlbmRlcmVyXG4gICAqIEByZXR1cm4ge1Byb21pc2V9XG4gICAqL1xuICByZW5kZXJDYW52YXMgKHJlbmRlcmVyKSB7XG4gICAgdmFyIGNhbnZhcyA9IHJlbmRlcmVyLmdldENhbnZhcygpO1xuICAgIHZhciBpbWFnZURhdGEgPSByZW5kZXJlci5nZXRDb250ZXh0KCkuZ2V0SW1hZ2VEYXRhKDAsIDAsIGNhbnZhcy53aWR0aCwgY2FudmFzLmhlaWdodCk7XG4gICAgdmFyIHNhdHVyYXRpb24gPSB0aGlzLl9vcHRpb25zLnNhdHVyYXRpb247XG5cbiAgICB2YXIgZDtcbiAgICBmb3IgKHZhciB4ID0gMDsgeCA8IGNhbnZhcy53aWR0aDsgeCsrKSB7XG4gICAgICBmb3IgKHZhciB5ID0gMDsgeSA8IGNhbnZhcy5oZWlnaHQ7IHkrKykge1xuICAgICAgICB2YXIgaW5kZXggPSAoY2FudmFzLndpZHRoICogeSArIHgpICogNDtcblxuICAgICAgICB2YXIgbHVtaW5hbmNlID0gaW1hZ2VEYXRhLmRhdGFbaW5kZXhdICogMC4yMTI1ICsgaW1hZ2VEYXRhLmRhdGFbaW5kZXggKyAxXSAqIDAuNzE1NCArIGltYWdlRGF0YS5kYXRhW2luZGV4ICsgMl0gKiAwLjA3MjE7XG4gICAgICAgIGltYWdlRGF0YS5kYXRhW2luZGV4XSA9IGx1bWluYW5jZSAqICgxIC0gc2F0dXJhdGlvbikgKyAoaW1hZ2VEYXRhLmRhdGFbaW5kZXhdICogc2F0dXJhdGlvbik7XG4gICAgICAgIGltYWdlRGF0YS5kYXRhW2luZGV4ICsgMV0gPSBsdW1pbmFuY2UgKiAoMSAtIHNhdHVyYXRpb24pICsgKGltYWdlRGF0YS5kYXRhW2luZGV4ICsgMV0gKiBzYXR1cmF0aW9uKTtcbiAgICAgICAgaW1hZ2VEYXRhLmRhdGFbaW5kZXggKyAyXSA9IGx1bWluYW5jZSAqICgxIC0gc2F0dXJhdGlvbikgKyAoaW1hZ2VEYXRhLmRhdGFbaW5kZXggKyAyXSAqIHNhdHVyYXRpb24pO1xuICAgICAgfVxuICAgIH1cblxuICAgIHJlbmRlcmVyLmdldENvbnRleHQoKS5wdXRJbWFnZURhdGEoaW1hZ2VEYXRhLCAwLCAwKTtcbiAgfVxufVxuXG5leHBvcnQgZGVmYXVsdCBTYXR1cmF0aW9uO1xuIiwiXCJ1c2Ugc3RyaWN0XCI7XG4vKiFcbiAqIENvcHlyaWdodCAoYykgMjAxMy0yMDE1IDllbGVtZW50cyBHbWJIXG4gKlxuICogUmVsZWFzZWQgdW5kZXIgQXR0cmlidXRpb24tTm9uQ29tbWVyY2lhbCAzLjAgVW5wb3J0ZWRcbiAqIGh0dHA6Ly9jcmVhdGl2ZWNvbW1vbnMub3JnL2xpY2Vuc2VzL2J5LW5jLzMuMC9cbiAqXG4gKiBGb3IgY29tbWVyY2lhbCB1c2UsIHBsZWFzZSBjb250YWN0IHVzIGF0IGNvbnRhY3RAOWVsZW1lbnRzLmNvbVxuICovXG5cbmltcG9ydCBfIGZyb20gXCJsb2Rhc2hcIjtcbmltcG9ydCBQcmltaXRpdmUgZnJvbSBcIi4vcHJpbWl0aXZlXCI7XG5pbXBvcnQgQ29sb3IgZnJvbSBcIi4uLy4uLy4uL2xpYi9jb2xvclwiO1xuXG4vKipcbiAqIFNvZnRDb2xvck92ZXJsYXkgcHJpbWl0aXZlXG4gKiBAY2xhc3NcbiAqIEBhbGlhcyBJbWdseUtpdC5GaWx0ZXIuUHJpbWl0aXZlcy5Tb2Z0Q29sb3JPdmVybGF5XG4gKiBAZXh0ZW5kcyB7SW1nbHlLaXQuRmlsdGVyLlByaW1pdGl2ZX1cbiAqL1xuY2xhc3MgU29mdENvbG9yT3ZlcmxheSBleHRlbmRzIFByaW1pdGl2ZSB7XG4gIGNvbnN0cnVjdG9yICguLi5hcmdzKSB7XG4gICAgc3VwZXIoLi4uYXJncyk7XG5cbiAgICB0aGlzLl9vcHRpb25zID0gXy5kZWZhdWx0cyh0aGlzLl9vcHRpb25zLCB7XG4gICAgICBjb2xvcjogbmV3IENvbG9yKDEuMCwgMS4wLCAxLjApXG4gICAgfSk7XG5cbiAgICAvKipcbiAgICAgKiBUaGUgZnJhZ21lbnQgc2hhZGVyIGZvciB0aGlzIHByaW1pdGl2ZVxuICAgICAqIEByZXR1cm4ge1N0cmluZ31cbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqL1xuICAgIHRoaXMuX2ZyYWdtZW50U2hhZGVyID0gYFxuICAgICAgcHJlY2lzaW9uIG1lZGl1bXAgZmxvYXQ7XG4gICAgICB2YXJ5aW5nIHZlYzIgdl90ZXhDb29yZDtcbiAgICAgIHVuaWZvcm0gc2FtcGxlcjJEIHVfaW1hZ2U7XG4gICAgICB1bmlmb3JtIHZlYzMgdV9vdmVybGF5O1xuXG4gICAgICB2b2lkIG1haW4oKSB7XG4gICAgICAgIHZlYzQgdGV4Q29sb3IgPSB0ZXh0dXJlMkQodV9pbWFnZSwgdl90ZXhDb29yZCk7XG4gICAgICAgIHZlYzQgb3ZlcmxheVZlYzQgPSB2ZWM0KHVfb3ZlcmxheSwgdGV4Q29sb3IuYSk7XG4gICAgICAgIGdsX0ZyYWdDb2xvciA9IG1heChvdmVybGF5VmVjNCwgdGV4Q29sb3IpO1xuICAgICAgfVxuICAgIGA7XG4gIH1cblxuICAvKipcbiAgICogUmVuZGVycyB0aGUgcHJpbWl0aXZlIChXZWJHTClcbiAgICogQHBhcmFtICB7V2ViR0xSZW5kZXJlcn0gcmVuZGVyZXJcbiAgICovXG4gIC8qIGlzdGFuYnVsIGlnbm9yZSBuZXh0ICovXG4gIHJlbmRlcldlYkdMIChyZW5kZXJlcikge1xuICAgIHJlbmRlcmVyLnJ1blNoYWRlcihudWxsLCB0aGlzLl9mcmFnbWVudFNoYWRlciwge1xuICAgICAgdW5pZm9ybXM6IHtcbiAgICAgICAgdV9vdmVybGF5OiB7IHR5cGU6IFwiM2ZcIiwgdmFsdWU6IHRoaXMuX29wdGlvbnMuY29sb3IudG9SR0JHTENvbG9yKCkgfVxuICAgICAgfVxuICAgIH0pO1xuICB9XG5cbiAgLyoqXG4gICAqIFJlbmRlcnMgdGhlIHByaW1pdGl2ZSAoQ2FudmFzKVxuICAgKiBAcGFyYW0gIHtDYW52YXNSZW5kZXJlcn0gcmVuZGVyZXJcbiAgICovXG4gIHJlbmRlckNhbnZhcyAocmVuZGVyZXIpIHtcbiAgICB2YXIgY2FudmFzID0gcmVuZGVyZXIuZ2V0Q2FudmFzKCk7XG4gICAgdmFyIGltYWdlRGF0YSA9IHJlbmRlcmVyLmdldENvbnRleHQoKS5nZXRJbWFnZURhdGEoMCwgMCwgY2FudmFzLndpZHRoLCBjYW52YXMuaGVpZ2h0KTtcblxuICAgIGZvciAodmFyIHggPSAwOyB4IDwgY2FudmFzLndpZHRoOyB4KyspIHtcbiAgICAgIGZvciAodmFyIHkgPSAwOyB5IDwgY2FudmFzLmhlaWdodDsgeSsrKSB7XG4gICAgICAgIHZhciBpbmRleCA9IChjYW52YXMud2lkdGggKiB5ICsgeCkgKiA0O1xuXG4gICAgICAgIGltYWdlRGF0YS5kYXRhW2luZGV4XSA9IE1hdGgubWF4KHRoaXMuX29wdGlvbnMuY29sb3IuciwgaW1hZ2VEYXRhLmRhdGFbaW5kZXhdKTtcbiAgICAgICAgaW1hZ2VEYXRhLmRhdGFbaW5kZXggKyAxXSA9IE1hdGgubWF4KHRoaXMuX29wdGlvbnMuY29sb3IuZywgaW1hZ2VEYXRhLmRhdGFbaW5kZXggKyAxXSk7XG4gICAgICAgIGltYWdlRGF0YS5kYXRhW2luZGV4ICsgMl0gPSBNYXRoLm1heCh0aGlzLl9vcHRpb25zLmNvbG9yLmIsIGltYWdlRGF0YS5kYXRhW2luZGV4ICsgMl0pO1xuICAgICAgfVxuICAgIH1cblxuICAgIHJlbmRlcmVyLmdldENvbnRleHQoKS5wdXRJbWFnZURhdGEoaW1hZ2VEYXRhLCAwLCAwKTtcbiAgfVxufVxuXG5leHBvcnQgZGVmYXVsdCBTb2Z0Q29sb3JPdmVybGF5O1xuIiwiXCJ1c2Ugc3RyaWN0XCI7XG4vKiFcbiAqIENvcHlyaWdodCAoYykgMjAxMy0yMDE1IDllbGVtZW50cyBHbWJIXG4gKlxuICogUmVsZWFzZWQgdW5kZXIgQXR0cmlidXRpb24tTm9uQ29tbWVyY2lhbCAzLjAgVW5wb3J0ZWRcbiAqIGh0dHA6Ly9jcmVhdGl2ZWNvbW1vbnMub3JnL2xpY2Vuc2VzL2J5LW5jLzMuMC9cbiAqXG4gKiBGb3IgY29tbWVyY2lhbCB1c2UsIHBsZWFzZSBjb250YWN0IHVzIGF0IGNvbnRhY3RAOWVsZW1lbnRzLmNvbVxuICovXG5cbmltcG9ydCBfIGZyb20gXCJsb2Rhc2hcIjtcbmltcG9ydCBMb29rdXBUYWJsZSBmcm9tIFwiLi9sb29rdXAtdGFibGVcIjtcblxuLyoqXG4gKiBUb25lIGN1cnZlIHByaW1pdGl2ZVxuICogQGNsYXNzXG4gKiBAYWxpYXMgSW1nbHlLaXQuRmlsdGVyLlByaW1pdGl2ZXMuVG9uZUN1cnZlXG4gKiBAZXh0ZW5kcyB7SW1nbHlLaXQuRmlsdGVyLlByaW1pdGl2ZXMuTG9va3VwVGFibGV9XG4gKi9cbmNsYXNzIFRvbmVDdXJ2ZSBleHRlbmRzIExvb2t1cFRhYmxlIHtcbiAgY29uc3RydWN0b3IgKC4uLmFyZ3MpIHtcbiAgICBzdXBlciguLi5hcmdzKTtcblxuICAgIHRoaXMuX29wdGlvbnMgPSBfLmRlZmF1bHRzKHRoaXMuX29wdGlvbnMsIHtcbiAgICAgIHJnYkNvbnRyb2xQb2ludHM6IHtcbiAgICAgICAgcmVkOiB0aGlzLl9vcHRpb25zLmNvbnRyb2xQb2ludHMsXG4gICAgICAgIGdyZWVuOiB0aGlzLl9vcHRpb25zLmNvbnRyb2xQb2ludHMsXG4gICAgICAgIGJsdWU6IHRoaXMuX29wdGlvbnMuY29udHJvbFBvaW50c1xuICAgICAgfVxuICAgIH0pO1xuXG4gICAgaWYgKHR5cGVvZiB0aGlzLl9vcHRpb25zLnJnYkNvbnRyb2xQb2ludHMgIT09IFwidW5kZWZpbmVkXCIpIHtcbiAgICAgIHRoaXMuX3VwZGF0ZUxvb2t1cFRhYmxlKCk7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIENhbGN1bGF0ZXMgdGhlIGxvb2t1cCB0YWJsZVxuICAgKiBAcHJpdmF0ZVxuICAgKi9cbiAgX3VwZGF0ZUxvb2t1cFRhYmxlICgpIHtcbiAgICB2YXIgciA9IHRoaXMuX2NhbGN1bGF0ZVNwbGluZUN1cnZlKHRoaXMuX29wdGlvbnMucmdiQ29udHJvbFBvaW50cy5yZWQpO1xuICAgIHZhciBnID0gdGhpcy5fY2FsY3VsYXRlU3BsaW5lQ3VydmUodGhpcy5fb3B0aW9ucy5yZ2JDb250cm9sUG9pbnRzLmdyZWVuKTtcbiAgICB2YXIgYiA9IHRoaXMuX2NhbGN1bGF0ZVNwbGluZUN1cnZlKHRoaXMuX29wdGlvbnMucmdiQ29udHJvbFBvaW50cy5ibHVlKTtcblxuICAgIHRoaXMuX29wdGlvbnMuZGF0YSA9IHRoaXMuX2J1aWxkTG9va3VwVGFibGUociwgZywgYik7XG4gIH1cblxuICAvKipcbiAgICogQnVpbGRzIHRoZSBsb29rdXAgdGFibGVcbiAgICogQHBhcmFtICB7QXJyYXl9IHJcbiAgICogQHBhcmFtICB7QXJyYXl9IGdcbiAgICogQHBhcmFtICB7QXJyYXl9IGJcbiAgICogQHJldHVybiB7QXJyYXl9XG4gICAqIEBwcml2YXRlXG4gICAqL1xuICBfYnVpbGRMb29rdXBUYWJsZSAociwgZywgYikge1xuICAgIHZhciBkYXRhID0gW107XG5cbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IDI1NjsgaSsrKSB7XG4gICAgICBkYXRhLnB1c2goTWF0aC5taW4oTWF0aC5tYXgoaSArIHJbaV0sIDApLCAyNTUpKTtcbiAgICAgIGRhdGEucHVzaChNYXRoLm1pbihNYXRoLm1heChpICsgZ1tpXSwgMCksIDI1NSkpO1xuICAgICAgZGF0YS5wdXNoKE1hdGgubWluKE1hdGgubWF4KGkgKyBiW2ldLCAwKSwgMjU1KSk7XG4gICAgICBkYXRhLnB1c2goMjU1KTtcbiAgICB9XG5cbiAgICByZXR1cm4gZGF0YTtcbiAgfVxuXG4gIC8qKlxuICAgKiBDYWxjdWxhdGVzIHRoZSBzcGxpbmUgY3VydmUgZGF0YSBmb3IgdGhlIGdpdmVuIHBvaW50c1xuICAgKiBAcGFyYW0gIHtBcnJheS48QXJyYXkuPE51bWJlcj4+fSBwb2ludHNcbiAgICogQHJldHVybiB7QXJyYXkuPE51bWJlcj59XG4gICAqL1xuICBfY2FsY3VsYXRlU3BsaW5lQ3VydmUgKHBvaW50cykge1xuICAgIHBvaW50cyA9IHBvaW50cy5zb3J0KGZ1bmN0aW9uIChhLCBiKSB7XG4gICAgICByZXR1cm4gYVswXSA+IGJbMF07XG4gICAgfSk7XG5cbiAgICB2YXIgc3BsaW5lUG9pbnRzID0gdGhpcy5fZ2V0U3BsaW5lQ3VydmUocG9pbnRzKTtcbiAgICB2YXIgZmlyc3RTcGxpbmVQb2ludCA9IHNwbGluZVBvaW50c1swXTtcbiAgICB2YXIgaTtcblxuICAgIGlmIChmaXJzdFNwbGluZVBvaW50WzBdID4gMCkge1xuICAgICAgZm9yIChpID0gMDsgaSA8IGZpcnN0U3BsaW5lUG9pbnRbMF07IGkrKykge1xuICAgICAgICBzcGxpbmVQb2ludHMudW5zaGlmdChbMCwgMF0pO1xuICAgICAgfVxuICAgIH1cblxuICAgIHZhciBwcmVwYXJlZFBvaW50cyA9IFtdO1xuICAgIGZvciAoaSA9IDA7IGkgPCBzcGxpbmVQb2ludHMubGVuZ3RoOyBpKyspIHtcbiAgICAgIHZhciBuZXdQb2ludCA9IHNwbGluZVBvaW50c1tpXTtcbiAgICAgIHZhciBvcmlnUG9pbnQgPSBbbmV3UG9pbnRbMF0sIG5ld1BvaW50WzBdXTtcblxuICAgICAgdmFyIGRpc3RhbmNlID0gTWF0aC5zcXJ0KFxuICAgICAgICBNYXRoLnBvdyhvcmlnUG9pbnRbMF0gLSBuZXdQb2ludFswXSwgMikgK1xuICAgICAgICBNYXRoLnBvdyhvcmlnUG9pbnRbMV0gLSBuZXdQb2ludFsxXSwgMilcbiAgICAgICk7XG5cbiAgICAgIGlmIChvcmlnUG9pbnRbMV0gPiBuZXdQb2ludFsxXSkge1xuICAgICAgICBkaXN0YW5jZSA9IC1kaXN0YW5jZTtcbiAgICAgIH1cblxuICAgICAgcHJlcGFyZWRQb2ludHMucHVzaChkaXN0YW5jZSk7XG4gICAgfVxuXG4gICAgcmV0dXJuIHByZXBhcmVkUG9pbnRzO1xuICB9XG5cbiAgX2dldFNwbGluZUN1cnZlIChwb2ludHMpIHtcbiAgICB2YXIgc2RBID0gdGhpcy5fc2Vjb25kRGVyaXZhdGl2ZShwb2ludHMpO1xuXG4gICAgdmFyIG4gPSBzZEEubGVuZ3RoO1xuICAgIHZhciBzZCA9IFtdO1xuICAgIHZhciBpO1xuXG4gICAgZm9yIChpID0gMDsgaSA8IG47IGkrKykge1xuICAgICAgc2RbaV0gPSBzZEFbaV07XG4gICAgfVxuXG4gICAgdmFyIG91dHB1dCA9IFtdO1xuXG4gICAgZm9yIChpID0gMDsgaSA8IG4tMTsgaSsrKSB7XG4gICAgICB2YXIgY3VyID0gcG9pbnRzW2ldO1xuICAgICAgdmFyIG5leHQgPSBwb2ludHNbaSsxXTtcblxuICAgICAgZm9yICh2YXIgeCA9IGN1clswXTsgeCA8IG5leHRbMF07IHgrKykge1xuICAgICAgICB2YXIgdCA9ICh4IC0gY3VyWzBdKSAvIChuZXh0WzBdIC0gY3VyWzBdKTtcblxuICAgICAgICB2YXIgYSA9IDEgLSB0O1xuICAgICAgICB2YXIgYiA9IHQ7XG4gICAgICAgIHZhciBoID0gbmV4dFswXSAtIGN1clswXTtcblxuICAgICAgICB2YXIgeSA9IGEgKiBjdXJbMV0gKyBiICogbmV4dFsxXSArIChoKmgvNikgKiAoIChhKmEqYS1hKSpzZFtpXSsoYipiKmItYikqc2RbaSsxXSk7XG5cbiAgICAgICAgaWYgKHkgPiAyNTUpIHtcbiAgICAgICAgICB5ID0gMjU1O1xuICAgICAgICB9IGVsc2UgaWYgKHkgPCAwKSB7XG4gICAgICAgICAgeSA9IDA7XG4gICAgICAgIH1cblxuICAgICAgICBvdXRwdXQucHVzaChbeCwgeV0pO1xuICAgICAgfVxuICAgIH1cblxuICAgIGlmIChvdXRwdXQubGVuZ3RoID09PSAyNTUpIHtcbiAgICAgIG91dHB1dC5wdXNoKHBvaW50c1twb2ludHMubGVuZ3RoIC0gMV0pO1xuICAgIH1cblxuICAgIHJldHVybiBvdXRwdXQ7XG4gIH1cblxuICBfc2Vjb25kRGVyaXZhdGl2ZSAocG9pbnRzKSB7XG4gICAgdmFyIG4gPSBwb2ludHMubGVuZ3RoO1xuICAgIGlmIChuIDw9IDAgfHwgbiA9PT0gMSkge1xuICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxuXG4gICAgdmFyIG1hdHJpeCA9IFtdO1xuICAgIHZhciByZXN1bHQgPSBbXTtcbiAgICB2YXIgaSwgaztcblxuICAgIG1hdHJpeFswXSA9IFswLCAxLCAwXTtcblxuICAgIGZvciAoaSA9IDE7IGkgPCBuLTE7IGkrKykge1xuICAgICAgdmFyIFAxID0gcG9pbnRzW2kgLSAxXTtcbiAgICAgIHZhciBQMiA9IHBvaW50c1tpXTtcbiAgICAgIHZhciBQMyA9IHBvaW50c1tpICsgMV07XG5cbiAgICAgIG1hdHJpeFtpXSA9IG1hdHJpeFtpXSB8fCBbXTtcbiAgICAgIG1hdHJpeFtpXVswXSA9IChQMlswXSAtIFAxWzBdKSAvIDY7XG4gICAgICBtYXRyaXhbaV1bMV0gPSAoUDNbMF0gLSBQMVswXSkgLyAzO1xuICAgICAgbWF0cml4W2ldWzJdID0gKFAzWzBdIC0gUDJbMF0pIC8gNjtcbiAgICAgIHJlc3VsdFtpXSA9IChQM1sxXSAtIFAyWzFdKSAvIChQM1swXSAtIFAyWzBdKSAtIChQMlsxXSAtIFAxWzFdKSAvIChQMlswXSAtIFAxWzBdKTtcbiAgICB9XG5cbiAgICByZXN1bHRbMF0gPSAwO1xuICAgIHJlc3VsdFtuIC0gMV0gPSAwO1xuXG4gICAgbWF0cml4W24gLSAxXSA9IFswLCAxLCAwXTtcblxuICAgIC8vIFBhc3MgMVxuICAgIGZvciAoaSA9IDE7IGkgPCBuOyBpKyspIHtcbiAgICAgIGsgPSBtYXRyaXhbMV1bMF0gLyBtYXRyaXhbaS0xXVsxXTtcbiAgICAgIG1hdHJpeFtpXVsxXSAtPSBrICogbWF0cml4W2ktMV1bMl07XG4gICAgICBtYXRyaXhbaV1bMF0gPSAwO1xuICAgICAgcmVzdWx0W2ldIC09IGsgKiByZXN1bHRbaS0xXTtcbiAgICB9XG5cbiAgICAvLyBQYXNzIDJcbiAgICBmb3IgKGkgPSBuIC0gMjsgaSA+IDA7IGktLSkge1xuICAgICAgayA9IG1hdHJpeFtpXVsyXSAvIG1hdHJpeFtpKzFdWzFdO1xuICAgICAgbWF0cml4W2ldWzFdIC09IGsgKiBtYXRyaXhbaSsxXVswXTtcbiAgICAgIG1hdHJpeFtpXVsyXSA9IDA7XG4gICAgICByZXN1bHRbaV0gLT0gayAqIHJlc3VsdFtpKzFdO1xuICAgIH1cblxuICAgIHZhciB5MiA9IFtdO1xuICAgIGZvciAoaSA9IDA7IGkgPCBuOyBpKyspIHtcbiAgICAgIHkyW2ldID0gcmVzdWx0W2ldIC8gbWF0cml4W2ldWzFdO1xuICAgIH1cblxuICAgIHJldHVybiB5MjtcbiAgfVxufVxuXG5leHBvcnQgZGVmYXVsdCBUb25lQ3VydmU7XG4iLCJcInVzZSBzdHJpY3RcIjtcbi8qIVxuICogQ29weXJpZ2h0IChjKSAyMDEzLTIwMTUgOWVsZW1lbnRzIEdtYkhcbiAqXG4gKiBSZWxlYXNlZCB1bmRlciBBdHRyaWJ1dGlvbi1Ob25Db21tZXJjaWFsIDMuMCBVbnBvcnRlZFxuICogaHR0cDovL2NyZWF0aXZlY29tbW9ucy5vcmcvbGljZW5zZXMvYnktbmMvMy4wL1xuICpcbiAqIEZvciBjb21tZXJjaWFsIHVzZSwgcGxlYXNlIGNvbnRhY3QgdXMgYXQgY29udGFjdEA5ZWxlbWVudHMuY29tXG4gKi9cblxuaW1wb3J0IFByaW1pdGl2ZSBmcm9tIFwiLi9wcmltaXRpdmVcIjtcblxuLyoqXG4gKiBYNDAwIHByaW1pdGl2ZVxuICogQGNsYXNzXG4gKiBAYWxpYXMgSW1nbHlLaXQuRmlsdGVyLlByaW1pdGl2ZXMuWDQwMFxuICogQGV4dGVuZHMge0ltZ2x5S2l0LkZpbHRlci5QcmltaXRpdmV9XG4gKi9cbmNsYXNzIFg0MDAgZXh0ZW5kcyBQcmltaXRpdmUge1xuICBjb25zdHJ1Y3RvciAoLi4uYXJncykge1xuICAgIHN1cGVyKC4uLmFyZ3MpO1xuXG4gICAgLyoqXG4gICAgICogVGhlIGZyYWdtZW50IHNoYWRlciBmb3IgdGhpcyBwcmltaXRpdmVcbiAgICAgKiBAcmV0dXJuIHtTdHJpbmd9XG4gICAgICogQHByaXZhdGVcbiAgICAgKi9cbiAgICB0aGlzLl9mcmFnbWVudFNoYWRlciA9IGBcbiAgICAgIHByZWNpc2lvbiBtZWRpdW1wIGZsb2F0O1xuICAgICAgdmFyeWluZyB2ZWMyIHZfdGV4Q29vcmQ7XG4gICAgICB1bmlmb3JtIHNhbXBsZXIyRCB1X2ltYWdlO1xuXG4gICAgICB2b2lkIG1haW4oKSB7XG4gICAgICAgIHZlYzQgdGV4Q29sb3IgPSB0ZXh0dXJlMkQodV9pbWFnZSwgdl90ZXhDb29yZCk7XG4gICAgICAgIGZsb2F0IGdyYXkgPSB0ZXhDb2xvci5yICogMC4zICsgdGV4Q29sb3IuZyAqIDAuMyArIHRleENvbG9yLmIgKiAwLjM7XG4gICAgICAgIGdyYXkgLT0gMC4yO1xuICAgICAgICBncmF5ID0gY2xhbXAoZ3JheSwgMC4wLCAxLjApO1xuICAgICAgICBncmF5ICs9IDAuMTU7XG4gICAgICAgIGdyYXkgKj0gMS40O1xuICAgICAgICBnbF9GcmFnQ29sb3IgPSB2ZWM0KHZlYzMoZ3JheSksIDEuMCk7XG4gICAgICB9XG4gICAgYDtcbiAgfVxuXG4gIC8qKlxuICAgKiBSZW5kZXJzIHRoZSBwcmltaXRpdmUgKFdlYkdMKVxuICAgKiBAcGFyYW0gIHtXZWJHTFJlbmRlcmVyfSByZW5kZXJlclxuICAgKi9cbiAgLyogaXN0YW5idWwgaWdub3JlIG5leHQgKi9cbiAgcmVuZGVyV2ViR0wgKHJlbmRlcmVyKSB7XG4gICAgcmVuZGVyZXIucnVuU2hhZGVyKG51bGwsIHRoaXMuX2ZyYWdtZW50U2hhZGVyKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBSZW5kZXJzIHRoZSBwcmltaXRpdmUgKENhbnZhcylcbiAgICogQHBhcmFtICB7Q2FudmFzUmVuZGVyZXJ9IHJlbmRlcmVyXG4gICAqL1xuICByZW5kZXJDYW52YXMgKHJlbmRlcmVyKSB7XG4gICAgdmFyIGNhbnZhcyA9IHJlbmRlcmVyLmdldENhbnZhcygpO1xuICAgIHZhciBpbWFnZURhdGEgPSByZW5kZXJlci5nZXRDb250ZXh0KCkuZ2V0SW1hZ2VEYXRhKDAsIDAsIGNhbnZhcy53aWR0aCwgY2FudmFzLmhlaWdodCk7XG5cbiAgICBmb3IgKHZhciB4ID0gMDsgeCA8IGNhbnZhcy53aWR0aDsgeCsrKSB7XG4gICAgICBmb3IgKHZhciB5ID0gMDsgeSA8IGNhbnZhcy5oZWlnaHQ7IHkrKykge1xuICAgICAgICB2YXIgaW5kZXggPSAoY2FudmFzLndpZHRoICogeSArIHgpICogNDtcblxuICAgICAgICB2YXIgZ3JheSA9IGltYWdlRGF0YS5kYXRhW2luZGV4XSAvIDI1NSAqIDAuMyArIGltYWdlRGF0YS5kYXRhW2luZGV4ICsgMV0gLyAyNTUgKiAwLjMgKyBpbWFnZURhdGEuZGF0YVtpbmRleCArIDJdIC8gMjU1ICogMC4zO1xuICAgICAgICBncmF5IC09IDAuMjtcbiAgICAgICAgZ3JheSA9IE1hdGgubWF4KDAuMCwgTWF0aC5taW4oMS4wLCBncmF5KSk7XG4gICAgICAgIGdyYXkgKz0gMC4xNTtcbiAgICAgICAgZ3JheSAqPSAxLjQ7XG5cbiAgICAgICAgZ3JheSAqPSAyNTU7XG4gICAgICAgIGltYWdlRGF0YS5kYXRhW2luZGV4XSA9IGdyYXk7XG4gICAgICAgIGltYWdlRGF0YS5kYXRhW2luZGV4ICsgMV0gPSBncmF5O1xuICAgICAgICBpbWFnZURhdGEuZGF0YVtpbmRleCArIDJdID0gZ3JheTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICByZW5kZXJlci5nZXRDb250ZXh0KCkucHV0SW1hZ2VEYXRhKGltYWdlRGF0YSwgMCwgMCk7XG4gIH1cbn1cblxuZXhwb3J0IGRlZmF1bHQgWDQwMDtcbiIsIlwidXNlIHN0cmljdFwiO1xuLyohXG4gKiBDb3B5cmlnaHQgKGMpIDIwMTMtMjAxNSA5ZWxlbWVudHMgR21iSFxuICpcbiAqIFJlbGVhc2VkIHVuZGVyIEF0dHJpYnV0aW9uLU5vbkNvbW1lcmNpYWwgMy4wIFVucG9ydGVkXG4gKiBodHRwOi8vY3JlYXRpdmVjb21tb25zLm9yZy9saWNlbnNlcy9ieS1uYy8zLjAvXG4gKlxuICogRm9yIGNvbW1lcmNpYWwgdXNlLCBwbGVhc2UgY29udGFjdCB1cyBhdCBjb250YWN0QDllbGVtZW50cy5jb21cbiAqL1xuXG5pbXBvcnQgRmlsdGVyIGZyb20gXCIuL2ZpbHRlclwiO1xuXG4vKipcbiAqIFF1b3ppIEZpbHRlclxuICogQGNsYXNzXG4gKiBAYWxpYXMgSW1nbHlLaXQuRmlsdGVycy5RdW96aUZpbHRlclxuICogQGV4dGVuZHMge0ltZ2x5S2l0LkZpbHRlcn1cbiAqL1xuY2xhc3MgUXVvemlGaWx0ZXIgZXh0ZW5kcyBGaWx0ZXIge1xuICAvKipcbiAgICogQSB1bmlxdWUgc3RyaW5nIHRoYXQgaWRlbnRpZmllcyB0aGlzIG9wZXJhdGlvbi4gQ2FuIGJlIHVzZWQgdG8gc2VsZWN0XG4gICAqIHRoZSBhY3RpdmUgZmlsdGVyLlxuICAgKiBAdHlwZSB7U3RyaW5nfVxuICAgKi9cbiAgc3RhdGljIGdldCBpZGVudGlmaWVyICgpIHtcbiAgICByZXR1cm4gXCJxdW96aVwiO1xuICB9XG5cbiAgLyoqXG4gICAqIFJlbmRlcnMgdGhlIGZpbHRlclxuICAgKiBAcGFyYW0gIHtSZW5kZXJlcn0gcmVuZGVyZXJcbiAgICogQHJldHVybiB7UHJvbWlzZX1cbiAgICovXG4gIHJlbmRlciAocmVuZGVyZXIpIHtcbiAgICB2YXIgc3RhY2sgPSBuZXcgRmlsdGVyLlByaW1pdGl2ZXNTdGFjaygpO1xuXG4gICAgLy8gRGVzYXR1cmF0aW9uXG4gICAgc3RhY2suYWRkKG5ldyBGaWx0ZXIuUHJpbWl0aXZlcy5EZXNhdHVyYXRpb24oe1xuICAgICAgZGVzYXR1cmF0aW9uOiAwLjY1XG4gICAgfSkpO1xuXG4gICAgLy8gVG9uZSBjdXJ2ZVxuICAgIHN0YWNrLmFkZChuZXcgRmlsdGVyLlByaW1pdGl2ZXMuVG9uZUN1cnZlKHtcbiAgICAgIHJnYkNvbnRyb2xQb2ludHM6IHtcbiAgICAgICAgcmVkOiBbXG4gICAgICAgICAgWzAsIDUwXSxcbiAgICAgICAgICBbNDAsIDc4XSxcbiAgICAgICAgICBbMTE4LCAxNzBdLFxuICAgICAgICAgIFsxODEsIDIxMV0sXG4gICAgICAgICAgWzI1NSwgMjU1XVxuICAgICAgICBdLFxuICAgICAgICBncmVlbjogW1xuICAgICAgICAgIFswLCAyN10sXG4gICAgICAgICAgWzI4LCA0NV0sXG4gICAgICAgICAgWzEwOSwgMTU3XSxcbiAgICAgICAgICBbMTU3LCAxOTVdLFxuICAgICAgICAgIFsxNzksIDIwOF0sXG4gICAgICAgICAgWzIwNiwgMjEyXSxcbiAgICAgICAgICBbMjU1LCAyNDBdXG4gICAgICAgIF0sXG4gICAgICAgIGJsdWU6IFtcbiAgICAgICAgICBbMCwgNTBdLFxuICAgICAgICAgIFsxMiwgNTVdLFxuICAgICAgICAgIFs0NiwgMTAzXSxcbiAgICAgICAgICBbMTAzLCAxNjJdLFxuICAgICAgICAgIFsxOTQsIDE4Ml0sXG4gICAgICAgICAgWzI0MSwgMjAxXSxcbiAgICAgICAgICBbMjU1LCAyMTldXG4gICAgICAgIF1cbiAgICAgIH1cbiAgICB9KSk7XG5cbiAgICBzdGFjay5yZW5kZXIocmVuZGVyZXIpO1xuICB9XG59XG5cbmV4cG9ydCBkZWZhdWx0IFF1b3ppRmlsdGVyO1xuIiwiXCJ1c2Ugc3RyaWN0XCI7XG4vKiFcbiAqIENvcHlyaWdodCAoYykgMjAxMy0yMDE1IDllbGVtZW50cyBHbWJIXG4gKlxuICogUmVsZWFzZWQgdW5kZXIgQXR0cmlidXRpb24tTm9uQ29tbWVyY2lhbCAzLjAgVW5wb3J0ZWRcbiAqIGh0dHA6Ly9jcmVhdGl2ZWNvbW1vbnMub3JnL2xpY2Vuc2VzL2J5LW5jLzMuMC9cbiAqXG4gKiBGb3IgY29tbWVyY2lhbCB1c2UsIHBsZWFzZSBjb250YWN0IHVzIGF0IGNvbnRhY3RAOWVsZW1lbnRzLmNvbVxuICovXG5cbmltcG9ydCBGaWx0ZXIgZnJvbSBcIi4vZmlsdGVyXCI7XG5cbi8qKlxuICogU2VtaXJlZCBGaWx0ZXJcbiAqIEBjbGFzc1xuICogQGFsaWFzIEltZ2x5S2l0LkZpbHRlcnMuU2VtaXJlZEZpbHRlclxuICogQGV4dGVuZHMge0ltZ2x5S2l0LkZpbHRlcn1cbiAqL1xuY2xhc3MgU2VtaXJlZEZpbHRlciBleHRlbmRzIEZpbHRlciB7XG4gIC8qKlxuICAgKiBBIHVuaXF1ZSBzdHJpbmcgdGhhdCBpZGVudGlmaWVzIHRoaXMgb3BlcmF0aW9uLiBDYW4gYmUgdXNlZCB0byBzZWxlY3RcbiAgICogdGhlIGFjdGl2ZSBmaWx0ZXIuXG4gICAqIEB0eXBlIHtTdHJpbmd9XG4gICAqL1xuICBzdGF0aWMgZ2V0IGlkZW50aWZpZXIgKCkge1xuICAgIHJldHVybiBcInNlbWlyZWRcIjtcbiAgfVxuXG4gIC8qKlxuICAgKiBSZW5kZXJzIHRoZSBmaWx0ZXJcbiAgICogQHBhcmFtICB7UmVuZGVyZXJ9IHJlbmRlcmVyXG4gICAqIEByZXR1cm4ge1Byb21pc2V9XG4gICAqL1xuICByZW5kZXIgKHJlbmRlcmVyKSB7XG4gICAgdmFyIHN0YWNrID0gbmV3IEZpbHRlci5QcmltaXRpdmVzU3RhY2soKTtcblxuICAgIHN0YWNrLmFkZChuZXcgRmlsdGVyLlByaW1pdGl2ZXMuVG9uZUN1cnZlKHtcbiAgICAgIHJnYkNvbnRyb2xQb2ludHM6IHtcbiAgICAgICAgcmVkOiBbXG4gICAgICAgICAgWzAsIDEyOV0sXG4gICAgICAgICAgWzc1LCAxNTNdLFxuICAgICAgICAgIFsxODEsIDIyN10sXG4gICAgICAgICAgWzI1NSwgMjU1XVxuICAgICAgICBdLFxuICAgICAgICBncmVlbjogW1xuICAgICAgICAgIFswLCA4XSxcbiAgICAgICAgICBbMTExLCA4NV0sXG4gICAgICAgICAgWzIxMiwgMTU4XSxcbiAgICAgICAgICBbMjU1LCAyMjZdXG4gICAgICAgIF0sXG4gICAgICAgIGJsdWU6IFtcbiAgICAgICAgICBbMCwgNV0sXG4gICAgICAgICAgWzc1LCAyMl0sXG4gICAgICAgICAgWzE5MywgOTBdLFxuICAgICAgICAgIFsyNTUsIDIyOV1cbiAgICAgICAgXVxuICAgICAgfVxuICAgIH0pKTtcblxuICAgIHN0YWNrLmFkZChuZXcgRmlsdGVyLlByaW1pdGl2ZXMuR2xvdygpKTtcblxuICAgIHN0YWNrLnJlbmRlcihyZW5kZXJlcik7XG4gIH1cbn1cblxuZXhwb3J0IGRlZmF1bHQgU2VtaXJlZEZpbHRlcjtcbiIsIlwidXNlIHN0cmljdFwiO1xuLyohXG4gKiBDb3B5cmlnaHQgKGMpIDIwMTMtMjAxNSA5ZWxlbWVudHMgR21iSFxuICpcbiAqIFJlbGVhc2VkIHVuZGVyIEF0dHJpYnV0aW9uLU5vbkNvbW1lcmNpYWwgMy4wIFVucG9ydGVkXG4gKiBodHRwOi8vY3JlYXRpdmVjb21tb25zLm9yZy9saWNlbnNlcy9ieS1uYy8zLjAvXG4gKlxuICogRm9yIGNvbW1lcmNpYWwgdXNlLCBwbGVhc2UgY29udGFjdCB1cyBhdCBjb250YWN0QDllbGVtZW50cy5jb21cbiAqL1xuXG5pbXBvcnQgRmlsdGVyIGZyb20gXCIuL2ZpbHRlclwiO1xuXG4vKipcbiAqIFN1bm55IEZpbHRlclxuICogQGNsYXNzXG4gKiBAYWxpYXMgSW1nbHlLaXQuRmlsdGVycy5TdW5ueUZpbHRlclxuICogQGV4dGVuZHMge0ltZ2x5S2l0LkZpbHRlcn1cbiAqL1xuY2xhc3MgU3VubnlGaWx0ZXIgZXh0ZW5kcyBGaWx0ZXIge1xuICAvKipcbiAgICogQSB1bmlxdWUgc3RyaW5nIHRoYXQgaWRlbnRpZmllcyB0aGlzIG9wZXJhdGlvbi4gQ2FuIGJlIHVzZWQgdG8gc2VsZWN0XG4gICAqIHRoZSBhY3RpdmUgZmlsdGVyLlxuICAgKiBAdHlwZSB7U3RyaW5nfVxuICAgKi9cbiAgc3RhdGljIGdldCBpZGVudGlmaWVyICgpIHtcbiAgICByZXR1cm4gXCJzdW5ueVwiO1xuICB9XG5cbiAgLyoqXG4gICAqIFJlbmRlcnMgdGhlIGZpbHRlclxuICAgKiBAcGFyYW0gIHtSZW5kZXJlcn0gcmVuZGVyZXJcbiAgICogQHJldHVybiB7UHJvbWlzZX1cbiAgICovXG4gIHJlbmRlciAocmVuZGVyZXIpIHtcbiAgICB2YXIgc3RhY2sgPSBuZXcgRmlsdGVyLlByaW1pdGl2ZXNTdGFjaygpO1xuXG4gICAgc3RhY2suYWRkKG5ldyBGaWx0ZXIuUHJpbWl0aXZlcy5Ub25lQ3VydmUoe1xuICAgICAgcmdiQ29udHJvbFBvaW50czoge1xuICAgICAgICByZWQ6IFtcbiAgICAgICAgICBbMCwgMF0sXG4gICAgICAgICAgWzYyLCA4Ml0sXG4gICAgICAgICAgWzE0MSwgMTU0XSxcbiAgICAgICAgICBbMjU1LCAyNTVdXG4gICAgICAgIF0sXG4gICAgICAgIGdyZWVuOiBbXG4gICAgICAgICAgWzAsIDM5XSxcbiAgICAgICAgICBbNTYsIDk2XSxcbiAgICAgICAgICBbMTkyLCAxNzZdLFxuICAgICAgICAgIFsyNTUsIDI1NV1cbiAgICAgICAgXSxcbiAgICAgICAgYmx1ZTogW1xuICAgICAgICAgIFswLCAwXSxcbiAgICAgICAgICBbMTc0LCA5OV0sXG4gICAgICAgICAgWzI1NSwgMjM1XVxuICAgICAgICBdXG4gICAgICB9XG4gICAgfSkpO1xuXG4gICAgc3RhY2suYWRkKG5ldyBGaWx0ZXIuUHJpbWl0aXZlcy5Ub25lQ3VydmUoe1xuICAgICAgY29udHJvbFBvaW50czogW1xuICAgICAgICBbMCwgMF0sXG4gICAgICAgIFs1NSwgMjBdLFxuICAgICAgICBbMTU4LCAxOTFdLFxuICAgICAgICBbMjU1LCAyNTVdXG4gICAgICBdXG4gICAgfSkpO1xuXG4gICAgc3RhY2sucmVuZGVyKHJlbmRlcmVyKTtcbiAgfVxufVxuXG5leHBvcnQgZGVmYXVsdCBTdW5ueUZpbHRlcjtcbiIsIlwidXNlIHN0cmljdFwiO1xuLyohXG4gKiBDb3B5cmlnaHQgKGMpIDIwMTMtMjAxNSA5ZWxlbWVudHMgR21iSFxuICpcbiAqIFJlbGVhc2VkIHVuZGVyIEF0dHJpYnV0aW9uLU5vbkNvbW1lcmNpYWwgMy4wIFVucG9ydGVkXG4gKiBodHRwOi8vY3JlYXRpdmVjb21tb25zLm9yZy9saWNlbnNlcy9ieS1uYy8zLjAvXG4gKlxuICogRm9yIGNvbW1lcmNpYWwgdXNlLCBwbGVhc2UgY29udGFjdCB1cyBhdCBjb250YWN0QDllbGVtZW50cy5jb21cbiAqL1xuXG5pbXBvcnQgRmlsdGVyIGZyb20gXCIuL2ZpbHRlclwiO1xuXG4vKipcbiAqIFRleGFzIEZpbHRlclxuICogQGNsYXNzXG4gKiBAYWxpYXMgSW1nbHlLaXQuRmlsdGVycy5UZXhhc0ZpbHRlclxuICogQGV4dGVuZHMge0ltZ2x5S2l0LkZpbHRlcn1cbiAqL1xuY2xhc3MgVGV4YXNGaWx0ZXIgZXh0ZW5kcyBGaWx0ZXIge1xuICAvKipcbiAgICogQSB1bmlxdWUgc3RyaW5nIHRoYXQgaWRlbnRpZmllcyB0aGlzIG9wZXJhdGlvbi4gQ2FuIGJlIHVzZWQgdG8gc2VsZWN0XG4gICAqIHRoZSBhY3RpdmUgZmlsdGVyLlxuICAgKiBAdHlwZSB7U3RyaW5nfVxuICAgKi9cbiAgc3RhdGljIGdldCBpZGVudGlmaWVyICgpIHtcbiAgICByZXR1cm4gXCJ0ZXhhc1wiO1xuICB9XG5cbiAgLyoqXG4gICAqIFJlbmRlcnMgdGhlIGZpbHRlclxuICAgKiBAcGFyYW0gIHtSZW5kZXJlcn0gcmVuZGVyZXJcbiAgICogQHJldHVybiB7UHJvbWlzZX1cbiAgICovXG4gIHJlbmRlciAocmVuZGVyZXIpIHtcbiAgICB2YXIgc3RhY2sgPSBuZXcgRmlsdGVyLlByaW1pdGl2ZXNTdGFjaygpO1xuXG4gICAgc3RhY2suYWRkKG5ldyBGaWx0ZXIuUHJpbWl0aXZlcy5Ub25lQ3VydmUoe1xuICAgICAgcmdiQ29udHJvbFBvaW50czoge1xuICAgICAgICByZWQ6IFtcbiAgICAgICAgICBbMCwgNzJdLFxuICAgICAgICAgIFs4OSwgOTldLFxuICAgICAgICAgIFsxNzYsIDIxMl0sXG4gICAgICAgICAgWzI1NSwgMjM3XVxuICAgICAgICBdLFxuICAgICAgICBncmVlbjogW1xuICAgICAgICAgIFswLCA0OV0sXG4gICAgICAgICAgWzI1NSwgMTkyXVxuICAgICAgICBdLFxuICAgICAgICBibHVlOiBbXG4gICAgICAgICAgWzAsIDcyXSxcbiAgICAgICAgICBbMjU1LCAxNTFdXG4gICAgICAgIF1cbiAgICAgIH1cbiAgICB9KSk7XG5cbiAgICBzdGFjay5yZW5kZXIocmVuZGVyZXIpO1xuICB9XG59XG5cbmV4cG9ydCBkZWZhdWx0IFRleGFzRmlsdGVyO1xuIiwiXCJ1c2Ugc3RyaWN0XCI7XG4vKiFcbiAqIENvcHlyaWdodCAoYykgMjAxMy0yMDE1IDllbGVtZW50cyBHbWJIXG4gKlxuICogUmVsZWFzZWQgdW5kZXIgQXR0cmlidXRpb24tTm9uQ29tbWVyY2lhbCAzLjAgVW5wb3J0ZWRcbiAqIGh0dHA6Ly9jcmVhdGl2ZWNvbW1vbnMub3JnL2xpY2Vuc2VzL2J5LW5jLzMuMC9cbiAqXG4gKiBGb3IgY29tbWVyY2lhbCB1c2UsIHBsZWFzZSBjb250YWN0IHVzIGF0IGNvbnRhY3RAOWVsZW1lbnRzLmNvbVxuICovXG5cbmltcG9ydCBGaWx0ZXIgZnJvbSBcIi4vZmlsdGVyXCI7XG5cbi8qKlxuICogWDQwMCBGaWx0ZXJcbiAqIEBjbGFzc1xuICogQGFsaWFzIEltZ2x5S2l0LkZpbHRlcnMuWDQwMEZpbHRlclxuICogQGV4dGVuZHMge0ltZ2x5S2l0LkZpbHRlcn1cbiAqL1xuY2xhc3MgWDQwMEZpbHRlciBleHRlbmRzIEZpbHRlciB7XG4gIC8qKlxuICAgKiBBIHVuaXF1ZSBzdHJpbmcgdGhhdCBpZGVudGlmaWVzIHRoaXMgb3BlcmF0aW9uLiBDYW4gYmUgdXNlZCB0byBzZWxlY3RcbiAgICogdGhlIGFjdGl2ZSBmaWx0ZXIuXG4gICAqIEB0eXBlIHtTdHJpbmd9XG4gICAqL1xuICBzdGF0aWMgZ2V0IGlkZW50aWZpZXIgKCkge1xuICAgIHJldHVybiBcIng0MDBcIjtcbiAgfVxuXG4gIC8qKlxuICAgKiBSZW5kZXJzIHRoZSBmaWx0ZXJcbiAgICogQHBhcmFtICB7UmVuZGVyZXJ9IHJlbmRlcmVyXG4gICAqIEByZXR1cm4ge1Byb21pc2V9XG4gICAqL1xuICByZW5kZXIgKHJlbmRlcmVyKSB7XG4gICAgdmFyIHN0YWNrID0gbmV3IEZpbHRlci5QcmltaXRpdmVzU3RhY2soKTtcblxuICAgIHN0YWNrLmFkZChuZXcgRmlsdGVyLlByaW1pdGl2ZXMuWDQwMCgpKTtcblxuICAgIHN0YWNrLnJlbmRlcihyZW5kZXJlcik7XG4gIH1cbn1cblxuZXhwb3J0IGRlZmF1bHQgWDQwMEZpbHRlcjtcbiIsIlwidXNlIHN0cmljdFwiO1xuLyohXG4gKiBDb3B5cmlnaHQgKGMpIDIwMTMtMjAxNSA5ZWxlbWVudHMgR21iSFxuICpcbiAqIFJlbGVhc2VkIHVuZGVyIEF0dHJpYnV0aW9uLU5vbkNvbW1lcmNpYWwgMy4wIFVucG9ydGVkXG4gKiBodHRwOi8vY3JlYXRpdmVjb21tb25zLm9yZy9saWNlbnNlcy9ieS1uYy8zLjAvXG4gKlxuICogRm9yIGNvbW1lcmNpYWwgdXNlLCBwbGVhc2UgY29udGFjdCB1cyBhdCBjb250YWN0QDllbGVtZW50cy5jb21cbiAqL1xuXG5pbXBvcnQgT3BlcmF0aW9uIGZyb20gXCIuL29wZXJhdGlvblwiO1xuXG4vKipcbiAqIEFuIG9wZXJhdGlvbiB0aGF0IGNhbiBmbGlwIHRoZSBjYW52YXNcbiAqXG4gKiBAY2xhc3NcbiAqIEBhbGlhcyBJbWdseUtpdC5PcGVyYXRpb25zLkZsaXBPcGVyYXRpb25cbiAqIEBleHRlbmRzIEltZ2x5S2l0Lk9wZXJhdGlvblxuICovXG5jbGFzcyBGbGlwT3BlcmF0aW9uIGV4dGVuZHMgT3BlcmF0aW9uIHtcbiAgY29uc3RydWN0b3IgKC4uLmFyZ3MpIHtcbiAgICB0aGlzLmF2YWlsYWJsZU9wdGlvbnMgPSB7XG4gICAgICBob3Jpem9udGFsOiB7IHR5cGU6IFwiYm9vbGVhblwiLCBkZWZhdWx0OiBmYWxzZSB9LFxuICAgICAgdmVydGljYWw6IHsgdHlwZTogXCJib29sZWFuXCIsIGRlZmF1bHQ6IGZhbHNlIH1cbiAgICB9O1xuXG4gICAgLyoqXG4gICAgICogVGhlIGZyYWdtZW50IHNoYWRlciB1c2VkIGZvciB0aGlzIG9wZXJhdGlvblxuICAgICAqL1xuICAgIHRoaXMuZnJhZ21lbnRTaGFkZXIgPSBgXG4gICAgICBwcmVjaXNpb24gbWVkaXVtcCBmbG9hdDtcbiAgICAgIHVuaWZvcm0gc2FtcGxlcjJEIHVfaW1hZ2U7XG4gICAgICB2YXJ5aW5nIHZlYzIgdl90ZXhDb29yZDtcbiAgICAgIHVuaWZvcm0gYm9vbCB1X2ZsaXBWZXJ0aWNhbDtcbiAgICAgIHVuaWZvcm0gYm9vbCB1X2ZsaXBIb3Jpem9udGFsO1xuXG4gICAgICB2b2lkIG1haW4oKSB7XG4gICAgICAgIHZlYzIgdGV4Q29vcmQgPSB2ZWMyKHZfdGV4Q29vcmQpO1xuICAgICAgICBpZiAodV9mbGlwVmVydGljYWwpIHtcbiAgICAgICAgICB0ZXhDb29yZC55ID0gMS4wIC0gdGV4Q29vcmQueTtcbiAgICAgICAgfVxuICAgICAgICBpZiAodV9mbGlwSG9yaXpvbnRhbCkge1xuICAgICAgICAgIHRleENvb3JkLnggPSAxLjAgLSB0ZXhDb29yZC54O1xuICAgICAgICB9XG4gICAgICAgIGdsX0ZyYWdDb2xvciA9IHRleHR1cmUyRCh1X2ltYWdlLCB0ZXhDb29yZCk7XG4gICAgICB9XG4gICAgYDtcblxuICAgIHN1cGVyKC4uLmFyZ3MpO1xuICB9XG5cbiAgLyoqXG4gICAqIEEgdW5pcXVlIHN0cmluZyB0aGF0IGlkZW50aWZpZXMgdGhpcyBvcGVyYXRpb24uIENhbiBiZSB1c2VkIHRvIHNlbGVjdFxuICAgKiBvcGVyYXRpb25zLlxuICAgKiBAdHlwZSB7U3RyaW5nfVxuICAgKi9cbiAgZ2V0IGlkZW50aWZpZXIgKCkge1xuICAgIHJldHVybiBcImZsaXBcIjtcbiAgfVxuXG4gIC8qKlxuICAgKiBDcm9wcyB0aGlzIGltYWdlIHVzaW5nIFdlYkdMXG4gICAqIEBwYXJhbSAge1dlYkdMUmVuZGVyZXJ9IHJlbmRlcmVyXG4gICAqL1xuICAvKiBpc3RhbmJ1bCBpZ25vcmUgbmV4dCAqL1xuICBfcmVuZGVyV2ViR0wgKHJlbmRlcmVyKSB7XG4gICAgcmVuZGVyZXIucnVuU2hhZGVyKG51bGwsIHRoaXMuZnJhZ21lbnRTaGFkZXIsIHtcbiAgICAgIHVuaWZvcm1zOiB7XG4gICAgICAgIHVfZmxpcFZlcnRpY2FsOiB7IHR5cGU6IFwiZlwiLCB2YWx1ZTogdGhpcy5fb3B0aW9ucy52ZXJ0aWNhbCB9LFxuICAgICAgICB1X2ZsaXBIb3Jpem9udGFsOiB7IHR5cGU6IFwiZlwiLCB2YWx1ZTogdGhpcy5fb3B0aW9ucy5ob3Jpem9udGFsIH1cbiAgICAgIH1cbiAgICB9KTtcbiAgfVxuXG4gIC8qKlxuICAgKiBDcm9wcyB0aGUgaW1hZ2UgdXNpbmcgQ2FudmFzMkRcbiAgICogQHBhcmFtICB7Q2FudmFzUmVuZGVyZXJ9IHJlbmRlcmVyXG4gICAqL1xuICBfcmVuZGVyQ2FudmFzIChyZW5kZXJlcikge1xuICAgIHZhciBjYW52YXMgPSByZW5kZXJlci5nZXRDYW52YXMoKTtcbiAgICB2YXIgY29udGV4dCA9IHJlbmRlcmVyLmdldENvbnRleHQoKTtcblxuICAgIHZhciBzY2FsZVggPSAxLCBzY2FsZVkgPSAxO1xuICAgIHZhciB0cmFuc2xhdGVYID0gMCwgdHJhbnNsYXRlWSA9IDA7XG5cbiAgICBpZiAodGhpcy5fb3B0aW9ucy5ob3Jpem9udGFsKSB7XG4gICAgICBzY2FsZVggPSAtMTtcbiAgICAgIHRyYW5zbGF0ZVggPSBjYW52YXMud2lkdGg7XG4gICAgfVxuXG4gICAgaWYgKHRoaXMuX29wdGlvbnMudmVydGljYWwpIHtcbiAgICAgIHNjYWxlWSA9IC0xO1xuICAgICAgdHJhbnNsYXRlWSA9IGNhbnZhcy5oZWlnaHQ7XG4gICAgfVxuXG4gICAgLy8gU2F2ZSB0aGUgY3VycmVudCBzdGF0ZVxuICAgIGNvbnRleHQuc2F2ZSgpO1xuXG4gICAgLy8gQXBwbHkgdGhlIHRyYW5zZm9ybWF0aW9uXG4gICAgY29udGV4dC50cmFuc2xhdGUodHJhbnNsYXRlWCwgdHJhbnNsYXRlWSk7XG4gICAgY29udGV4dC5zY2FsZShzY2FsZVgsIHNjYWxlWSk7XG5cbiAgICAvLyBDcmVhdGUgYSB0ZW1wb3JhcnkgY2FudmFzIHNvIHRoYXQgd2UgY2FuIGRyYXcgdGhlIGltYWdlXG4gICAgLy8gd2l0aCB0aGUgYXBwbGllZCB0cmFuc2Zvcm1hdGlvblxuICAgIHZhciB0ZW1wQ2FudmFzID0gcmVuZGVyZXIuY2xvbmVDYW52YXMoKTtcbiAgICBjb250ZXh0LmRyYXdJbWFnZSh0ZW1wQ2FudmFzLCAwLCAwKTtcblxuICAgIC8vIFJlc3RvcmUgb2xkIHRyYW5zZm9ybWF0aW9uXG4gICAgY29udGV4dC5yZXN0b3JlKCk7XG4gIH1cbn1cblxuZXhwb3J0IGRlZmF1bHQgRmxpcE9wZXJhdGlvbjtcbiIsIlwidXNlIHN0cmljdFwiO1xuLyohXG4gKiBDb3B5cmlnaHQgKGMpIDIwMTMtMjAxNSA5ZWxlbWVudHMgR21iSFxuICpcbiAqIFJlbGVhc2VkIHVuZGVyIEF0dHJpYnV0aW9uLU5vbkNvbW1lcmNpYWwgMy4wIFVucG9ydGVkXG4gKiBodHRwOi8vY3JlYXRpdmVjb21tb25zLm9yZy9saWNlbnNlcy9ieS1uYy8zLjAvXG4gKlxuICogRm9yIGNvbW1lcmNpYWwgdXNlLCBwbGVhc2UgY29udGFjdCB1cyBhdCBjb250YWN0QDllbGVtZW50cy5jb21cbiAqL1xuXG5pbXBvcnQgT3BlcmF0aW9uIGZyb20gXCIuL29wZXJhdGlvblwiO1xuaW1wb3J0IENvbG9yIGZyb20gXCIuLi9saWIvY29sb3JcIjtcblxuLyoqXG4gKiBBbiBvcGVyYXRpb24gdGhhdCBjYW4gZnJhbWVzIG9uIHRoZSBjYW52YXNcbiAqXG4gKiBAY2xhc3NcbiAqIEBhbGlhcyBJbWdseUtpdC5PcGVyYXRpb25zLkZyYW1lc09wZXJhdGlvblxuICogQGV4dGVuZHMgSW1nbHlLaXQuT3BlcmF0aW9uXG4gKi9cbmNsYXNzIEZyYW1lc09wZXJhdGlvbiBleHRlbmRzIE9wZXJhdGlvbiB7XG4gIGNvbnN0cnVjdG9yICguLi5hcmdzKSB7XG4gICAgdGhpcy5hdmFpbGFibGVPcHRpb25zID0ge1xuICAgICAgY29sb3I6IHsgdHlwZTogXCJjb2xvclwiLCBkZWZhdWx0OiBuZXcgQ29sb3IoMCwgMCwgMCwgMSkgfSxcbiAgICAgIHRoaWNrbmVzczogeyB0eXBlOiBcIm51bWJlclwiLCBkZWZhdWx0OiAwLjAyIH1cbiAgICB9O1xuXG4gICAgLyoqXG4gICAgICogVGhlIHRleHR1cmUgaW5kZXggdXNlZCBmb3IgdGhlIGZyYW1lXG4gICAgICogQHR5cGUge051bWJlcn1cbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqL1xuICAgIHRoaXMuX3RleHR1cmVJbmRleCA9IDE7XG5cbiAgICAvKipcbiAgICAgKiBUaGUgZnJhZ21lbnQgc2hhZGVyIHVzZWQgZm9yIHRoaXMgb3BlcmF0aW9uXG4gICAgICovXG4gICAgdGhpcy5fZnJhZ21lbnRTaGFkZXIgPSBgXG4gICAgICBwcmVjaXNpb24gbWVkaXVtcCBmbG9hdDtcbiAgICAgIHZhcnlpbmcgdmVjMiB2X3RleENvb3JkO1xuICAgICAgdW5pZm9ybSBzYW1wbGVyMkQgdV9pbWFnZTtcbiAgICAgIHVuaWZvcm0gc2FtcGxlcjJEIHVfZnJhbWVJbWFnZTtcbiAgICAgIHVuaWZvcm0gdmVjNCB1X2NvbG9yO1xuICAgICAgdW5pZm9ybSB2ZWMyIHVfdGhpY2tuZXNzO1xuXG4gICAgICB2b2lkIG1haW4oKSB7XG4gICAgICAgIHZlYzQgZnJhZ0NvbG9yID0gdGV4dHVyZTJEKHVfaW1hZ2UsIHZfdGV4Q29vcmQpO1xuICAgICAgICBpZiAodl90ZXhDb29yZC54IDwgdV90aGlja25lc3MueCB8fCB2X3RleENvb3JkLnggPiAxLjAgLSB1X3RoaWNrbmVzcy54IHx8XG4gICAgICAgICAgdl90ZXhDb29yZC55IDwgdV90aGlja25lc3MueSB8fCB2X3RleENvb3JkLnkgPiAxLjAgLSB1X3RoaWNrbmVzcy55KSB7XG4gICAgICAgICAgICBmcmFnQ29sb3IgPSBtaXgoZnJhZ0NvbG9yLCB1X2NvbG9yLCB1X2NvbG9yLmEpO1xuICAgICAgICAgIH1cblxuICAgICAgICBnbF9GcmFnQ29sb3IgPSBmcmFnQ29sb3I7XG4gICAgICB9XG4gICAgYDtcblxuICAgIHN1cGVyKC4uLmFyZ3MpO1xuICB9XG5cbiAgLyoqXG4gICAqIEEgdW5pcXVlIHN0cmluZyB0aGF0IGlkZW50aWZpZXMgdGhpcyBvcGVyYXRpb24uIENhbiBiZSB1c2VkIHRvIHNlbGVjdFxuICAgKiBvcGVyYXRpb25zLlxuICAgKiBAdHlwZSB7U3RyaW5nfVxuICAgKi9cbiAgZ2V0IGlkZW50aWZpZXIgKCkge1xuICAgIHJldHVybiBcImZyYW1lc1wiO1xuICB9XG5cbiAgLyoqXG4gICAqIENyb3BzIHRoaXMgaW1hZ2UgdXNpbmcgV2ViR0xcbiAgICogQHBhcmFtICB7V2ViR0xSZW5kZXJlcn0gcmVuZGVyZXJcbiAgICogQHByaXZhdGVcbiAgICovXG4gIC8qIGlzdGFuYnVsIGlnbm9yZSBuZXh0ICovXG4gIF9yZW5kZXJXZWJHTCAocmVuZGVyZXIpIHtcbiAgICB2YXIgY2FudmFzID0gcmVuZGVyZXIuZ2V0Q2FudmFzKCk7XG5cbiAgICB2YXIgY29sb3IgPSB0aGlzLl9vcHRpb25zLmNvbG9yO1xuICAgIHZhciB0aGlja25lc3MgPSB0aGlzLl9vcHRpb25zLnRoaWNrbmVzcyAqIGNhbnZhcy5oZWlnaHQ7XG4gICAgdmFyIHRoaWNrbmVzc1ZlYzIgPSBbdGhpY2tuZXNzIC8gY2FudmFzLndpZHRoLCB0aGlja25lc3MgLyBjYW52YXMuaGVpZ2h0XTtcblxuICAgIHJlbmRlcmVyLnJ1blNoYWRlcihudWxsLCB0aGlzLl9mcmFnbWVudFNoYWRlciwge1xuICAgICAgdW5pZm9ybXM6IHtcbiAgICAgICAgdV9jb2xvcjogeyB0eXBlOiBcIjRmXCIsIHZhbHVlOiBjb2xvci50b0dMQ29sb3IoKSB9LFxuICAgICAgICB1X3RoaWNrbmVzczogeyB0eXBlOiBcIjJmXCIsIHZhbHVlOiB0aGlja25lc3NWZWMyIH1cbiAgICAgIH1cbiAgICB9KTtcbiAgfVxuXG4gIC8qKlxuICAgKiBDcm9wcyB0aGUgaW1hZ2UgdXNpbmcgQ2FudmFzMkRcbiAgICogQHBhcmFtICB7Q2FudmFzUmVuZGVyZXJ9IHJlbmRlcmVyXG4gICAqIEBwcml2YXRlXG4gICAqL1xuICBfcmVuZGVyQ2FudmFzIChyZW5kZXJlcikge1xuICAgIHZhciBjYW52YXMgPSByZW5kZXJlci5nZXRDYW52YXMoKTtcbiAgICB2YXIgY29udGV4dCA9IHJlbmRlcmVyLmdldENvbnRleHQoKTtcblxuICAgIHZhciBjb2xvciA9IHRoaXMuX29wdGlvbnMuY29sb3I7XG4gICAgdmFyIHRoaWNrbmVzcyA9IHRoaXMuX29wdGlvbnMudGhpY2tuZXNzICogY2FudmFzLmhlaWdodDtcblxuICAgIGNvbnRleHQuc2F2ZSgpO1xuICAgIGNvbnRleHQuYmVnaW5QYXRoKCk7XG4gICAgY29udGV4dC5saW5lV2lkdGggPSB0aGlja25lc3MgKiAyO1xuICAgIGNvbnRleHQuc3Ryb2tlU3R5bGUgPSBjb2xvci50b1JHQkEoKTtcbiAgICBjb250ZXh0LnJlY3QoMCwgMCwgY2FudmFzLndpZHRoLCBjYW52YXMuaGVpZ2h0KTtcbiAgICBjb250ZXh0LnN0cm9rZSgpO1xuICAgIGNvbnRleHQucmVzdG9yZSgpO1xuICB9XG59XG5cbmV4cG9ydCBkZWZhdWx0IEZyYW1lc09wZXJhdGlvbjtcbiIsIi8qIGpzaGludCB1bnVzZWQ6ZmFsc2UgKi9cbi8qIGpzaGludCAtVzA4MyAqL1xuXCJ1c2Ugc3RyaWN0XCI7XG4vKiFcbiAqIENvcHlyaWdodCAoYykgMjAxMy0yMDE1IDllbGVtZW50cyBHbWJIXG4gKlxuICogUmVsZWFzZWQgdW5kZXIgQXR0cmlidXRpb24tTm9uQ29tbWVyY2lhbCAzLjAgVW5wb3J0ZWRcbiAqIGh0dHA6Ly9jcmVhdGl2ZWNvbW1vbnMub3JnL2xpY2Vuc2VzL2J5LW5jLzMuMC9cbiAqXG4gKiBGb3IgY29tbWVyY2lhbCB1c2UsIHBsZWFzZSBjb250YWN0IHVzIGF0IGNvbnRhY3RAOWVsZW1lbnRzLmNvbVxuICovXG5cbmltcG9ydCBfIGZyb20gXCJsb2Rhc2hcIjtcbmltcG9ydCBWZWN0b3IyIGZyb20gXCIuLi9saWIvbWF0aC92ZWN0b3IyXCI7XG5pbXBvcnQgQ29sb3IgZnJvbSBcIi4uL2xpYi9jb2xvclwiO1xuaW1wb3J0IEV2ZW50RW1pdHRlciBmcm9tIFwiLi4vbGliL2V2ZW50LWVtaXR0ZXJcIjtcblxuLyoqXG4gKiBCYXNlIGNsYXNzIGZvciBPcGVyYXRpb25zLiBFeHRlbmRhYmxlIHZpYSB7QGxpbmsgSW1nbHlLaXQuT3BlcmF0aW9uI2V4dGVuZH0uXG4gKiBAY2xhc3NcbiAqIEBhbGlhcyBJbWdseUtpdC5PcGVyYXRpb25cbiAqL1xuY2xhc3MgT3BlcmF0aW9uIGV4dGVuZHMgRXZlbnRFbWl0dGVyIHtcbiAgY29uc3RydWN0b3IgKGtpdCwgb3B0aW9ucykge1xuICAgIHN1cGVyKCk7XG5cbiAgICBpZiAoa2l0LmNvbnN0cnVjdG9yLm5hbWUgIT09IFwiSW1nbHlLaXRcIikge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKFwiT3BlcmF0aW9uOiBGaXJzdCBwYXJhbWV0ZXIgZm9yIGNvbnN0cnVjdG9yIGhhcyB0byBiZSBhbiBJbWdseUtpdCBpbnN0YW5jZS5cIik7XG4gICAgfVxuXG4gICAgdGhpcy5fa2l0ID0ga2l0O1xuICAgIHRoaXMuYXZhaWxhYmxlT3B0aW9ucyA9IF8uZXh0ZW5kKHRoaXMuYXZhaWxhYmxlT3B0aW9ucyB8fCB7fSwge1xuICAgICAgbnVtYmVyRm9ybWF0OiB7IHR5cGU6IFwic3RyaW5nXCIsIGRlZmF1bHQ6IFwicmVsYXRpdmVcIiwgYXZhaWxhYmxlOiBbXCJhYnNvbHV0ZVwiLCBcInJlbGF0aXZlXCJdIH1cbiAgICB9KTtcbiAgICB0aGlzLl9kaXJ0eSA9IHRydWU7XG5cbiAgICB0aGlzLl91dWlkID0gXCJ4eHh4eHh4eC14eHh4LTR4eHgteXh4eC14eHh4eHh4eHh4eHhcIi5yZXBsYWNlKC9beHldL2csIGZ1bmN0aW9uKGMpIHtcbiAgICAgIGxldCByID0gTWF0aC5yYW5kb20oKSoxNnwwO1xuICAgICAgbGV0IHYgPSBjID09IFwieFwiID8gciA6IChyJjB4M3wweDgpO1xuICAgICAgcmV0dXJuIHYudG9TdHJpbmcoMTYpO1xuICAgIH0pO1xuXG4gICAgdGhpcy5faW5pdE9wdGlvbnMob3B0aW9ucyB8fCB7fSk7XG4gIH1cblxuICAvKipcbiAgICogQSB1bmlxdWUgc3RyaW5nIHRoYXQgaWRlbnRpZmllcyB0aGlzIG9wZXJhdGlvbi4gQ2FuIGJlIHVzZWQgdG8gc2VsZWN0XG4gICAqIG9wZXJhdGlvbnMuXG4gICAqIEB0eXBlIHtTdHJpbmd9XG4gICAqL1xuICBnZXQgaWRlbnRpZmllciAoKSB7XG4gICAgcmV0dXJuIG51bGw7XG4gIH1cblxuICAvKipcbiAgICogQ2hlY2tzIHdoZXRoZXIgdGhpcyBPcGVyYXRpb24gY2FuIGJlIGFwcGxpZWQgdGhlIHdheSBpdCBpcyBjb25maWd1cmVkXG4gICAqL1xuICB2YWxpZGF0ZVNldHRpbmdzICgpIHtcbiAgICB2YXIgaWRlbnRpZmllciA9IHRoaXMuaWRlbnRpZmllcjtcblxuICAgIC8vIENoZWNrIGZvciByZXF1aXJlZCBvcHRpb25zXG4gICAgZm9yICh2YXIgb3B0aW9uTmFtZSBpbiB0aGlzLmF2YWlsYWJsZU9wdGlvbnMpIHtcbiAgICAgIHZhciBvcHRpb25Db25maWcgPSB0aGlzLmF2YWlsYWJsZU9wdGlvbnNbb3B0aW9uTmFtZV07XG4gICAgICBpZiAob3B0aW9uQ29uZmlnLnJlcXVpcmVkICYmIHR5cGVvZiB0aGlzLl9vcHRpb25zW29wdGlvbk5hbWVdID09PSBcInVuZGVmaW5lZFwiKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcihcIk9wZXJhdGlvbiBgXCIgKyBpZGVudGlmaWVyICsgXCJgOiBPcHRpb24gYFwiICsgb3B0aW9uTmFtZSArIFwiYCBpcyByZXF1aXJlZC5cIik7XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIEFwcGxpZXMgdGhpcyBvcGVyYXRpb25cbiAgICogQHBhcmFtICB7UmVuZGVyZXJ9IHJlbmRlcmVyXG4gICAqIEByZXR1cm4ge1Byb21pc2V9XG4gICAqIEBhYnN0cmFjdFxuICAgKi9cbiAgcmVuZGVyIChyZW5kZXJlcikge1xuICAgIGxldCByZW5kZXJGbjtcbiAgICBpZiAocmVuZGVyZXIuaWRlbnRpZmllciA9PT0gXCJ3ZWJnbFwiKSB7XG4gICAgICAvKiBpc3RhbmJ1bCBpZ25vcmUgbmV4dCAqL1xuICAgICAgcmVuZGVyRm4gPSB0aGlzLl9yZW5kZXJXZWJHTC5iaW5kKHRoaXMpO1xuICAgIH0gZWxzZSB7XG4gICAgICByZW5kZXJGbiA9IHRoaXMuX3JlbmRlckNhbnZhcy5iaW5kKHRoaXMpO1xuICAgIH1cblxuICAgIC8vIEhhbmRsZSBjYWNoaW5nXG4gICAgaWYgKHRoaXMuX2RpcnR5KSB7XG4gICAgICByZW5kZXJGbihyZW5kZXJlcik7XG4gICAgICByZW5kZXJlci5jYWNoZSh0aGlzLl91dWlkKTtcbiAgICAgIHRoaXMuX2RpcnR5ID0gZmFsc2U7XG4gICAgfSBlbHNlIHtcbiAgICAgIHJlbmRlcmVyLmRyYXdDYWNoZWQodGhpcy5fdXVpZCk7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIEFwcGxpZXMgdGhpcyBvcGVyYXRpb24gdXNpbmcgV2ViR0xcbiAgICogQHJldHVybiB7V2ViR0xSZW5kZXJlcn0gcmVuZGVyZXJcbiAgICogQHByaXZhdGVcbiAgICovXG4gIF9yZW5kZXJXZWJHTCAoKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKFwiT3BlcmF0aW9uI19yZW5kZXJXZWJHTCBpcyBhYnN0cmFjdCBhbmQgbm90IGltcGxlbWVudGVkIGluIGluaGVyaXRlZCBjbGFzcy5cIik7XG4gIH1cblxuICAvKipcbiAgICogQXBwbGllcyB0aGlzIG9wZXJhdGlvbiB1c2luZyBDYW52YXMyRFxuICAgKiBAcmV0dXJuIHtDYW52YXNSZW5kZXJlcn0gcmVuZGVyZXJcbiAgICogQHByaXZhdGVcbiAgICovXG4gIF9yZW5kZXJDYW52YXMgKCkge1xuICAgIHRocm93IG5ldyBFcnJvcihcIk9wZXJhdGlvbiNfcmVuZGVyQ2FudmFzIGlzIGFic3RyYWN0IGFuZCBub3QgaW1wbGVtZW50ZWQgaW4gaW5oZXJpdGVkIGNsYXNzLlwiKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBHb2VzIHRocm91Z2ggdGhlIGF2YWlsYWJsZSBvcHRpb25zLCBzZXRzIF9vcHRpb25zIGRlZmF1bHRzXG4gICAqIEBwYXJhbSB7T2JqZWN0fSB1c2VyT3B0aW9uc1xuICAgKiBAcHJpdmF0ZVxuICAgKi9cbiAgX2luaXRPcHRpb25zICh1c2VyT3B0aW9ucykge1xuICAgIHRoaXMuX29wdGlvbnMgPSB7fTtcblxuICAgIC8vIFNldCBkZWZhdWx0cywgY3JlYXRlIGdldHRlcnMgYW5kIHNldHRlcnNcbiAgICB2YXIgb3B0aW9uTmFtZSwgb3B0aW9uLCBjYXBpdGFsaXplZDtcbiAgICB2YXIgc2VsZiA9IHRoaXM7XG4gICAgZm9yIChvcHRpb25OYW1lIGluIHRoaXMuYXZhaWxhYmxlT3B0aW9ucykge1xuICAgICAgY2FwaXRhbGl6ZWQgPSBvcHRpb25OYW1lLmNoYXJBdCgwKS50b1VwcGVyQ2FzZSgpICsgb3B0aW9uTmFtZS5zbGljZSgxKTtcbiAgICAgIG9wdGlvbiA9IHRoaXMuYXZhaWxhYmxlT3B0aW9uc1tvcHRpb25OYW1lXTtcblxuICAgICAgLy8gQ3JlYXRlIHNldHRlciBhbmQgZ2V0dGVyXG4gICAgICAoZnVuY3Rpb24gKG9wdGlvbk5hbWUsIG9wdGlvbikge1xuICAgICAgICBzZWxmW1wic2V0XCIgKyBjYXBpdGFsaXplZF0gPSBmdW5jdGlvbiAodmFsdWUpIHtcbiAgICAgICAgICBpZiAodHlwZW9mIG9wdGlvbi5zZXR0ZXIgIT09IFwidW5kZWZpbmVkXCIpIHtcbiAgICAgICAgICAgIHZhbHVlID0gb3B0aW9uLnNldHRlci5jYWxsKHRoaXMsIHZhbHVlKTtcbiAgICAgICAgICB9XG4gICAgICAgICAgc2VsZi5fc2V0T3B0aW9uKG9wdGlvbk5hbWUsIHZhbHVlKTtcbiAgICAgICAgfTtcblxuICAgICAgICAvLyBEZWZhdWx0IGdldHRlclxuICAgICAgICBzZWxmW1wiZ2V0XCIgKyBjYXBpdGFsaXplZF0gPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgcmV0dXJuIHNlbGYuX2dldE9wdGlvbihvcHRpb25OYW1lKTtcbiAgICAgICAgfTtcbiAgICAgIH0pKG9wdGlvbk5hbWUsIG9wdGlvbik7XG5cbiAgICAgIC8vIFNldCBkZWZhdWx0IGlmIGF2YWlsYWJsZVxuICAgICAgaWYgKHR5cGVvZiBvcHRpb24uZGVmYXVsdCAhPT0gXCJ1bmRlZmluZWRcIikge1xuICAgICAgICB0aGlzW1wic2V0XCIgKyBjYXBpdGFsaXplZF0ob3B0aW9uLmRlZmF1bHQpO1xuICAgICAgfVxuICAgIH1cblxuICAgIC8vIE92ZXJ3cml0ZSBvcHRpb25zIHdpdGggdGhlIG9uZXMgZ2l2ZW4gYnkgdXNlclxuICAgIGZvciAob3B0aW9uTmFtZSBpbiB1c2VyT3B0aW9ucykge1xuICAgICAgLy8gQ2hlY2sgaWYgb3B0aW9uIGlzIGF2YWlsYWJsZVxuICAgICAgaWYgKHR5cGVvZiB0aGlzLmF2YWlsYWJsZU9wdGlvbnNbb3B0aW9uTmFtZV0gPT09IFwidW5kZWZpbmVkXCIpIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiSW52YWxpZCBvcHRpb246IFwiICsgb3B0aW9uTmFtZSk7XG4gICAgICB9XG5cbiAgICAgIC8vIENhbGwgc2V0dGVyXG4gICAgICBjYXBpdGFsaXplZCA9IG9wdGlvbk5hbWUuY2hhckF0KDApLnRvVXBwZXJDYXNlKCkgKyBvcHRpb25OYW1lLnNsaWNlKDEpO1xuICAgICAgdGhpc1tcInNldFwiICsgY2FwaXRhbGl6ZWRdKHVzZXJPcHRpb25zW29wdGlvbk5hbWVdKTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogU2V0cyB0aGUgZ2l2ZW4gb3B0aW9uc1xuICAgKiBAcGFyYW0ge09iamVjdH0gb3B0aW9uc1xuICAgKi9cbiAgc2V0IChvcHRpb25zKSB7XG4gICAgZm9yIChsZXQgb3B0aW9uTmFtZSBpbiBvcHRpb25zKSB7XG4gICAgICB0aGlzLl9zZXRPcHRpb24ob3B0aW9uTmFtZSwgb3B0aW9uc1tvcHRpb25OYW1lXSwgZmFsc2UpO1xuICAgIH1cblxuICAgIHRoaXMuZW1pdChcInVwZGF0ZVwiKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBSZXR1cm5zIHRoZSB2YWx1ZSBmb3IgdGhlIGdpdmVuIG9wdGlvblxuICAgKiBAcGFyYW0ge1N0cmluZ30gb3B0aW9uTmFtZVxuICAgKiBAcmV0dXJuIHsqfVxuICAgKiBAcHJpdmF0ZVxuICAgKi9cbiAgX2dldE9wdGlvbiAob3B0aW9uTmFtZSkge1xuICAgIHJldHVybiB0aGlzLl9vcHRpb25zW29wdGlvbk5hbWVdO1xuICB9XG5cbiAgLyoqXG4gICAqIFNldHMgdGhlIHZhbHVlIGZvciB0aGUgZ2l2ZW4gb3B0aW9uLCB2YWxpZGF0ZXMgaXRcbiAgICogQHBhcmFtIHtTdHJpbmd9IG9wdGlvbk5hbWVcbiAgICogQHBhcmFtIHsqfSB2YWx1ZVxuICAgKiBAcGFyYW0ge0Jvb2xlYW59IHVwZGF0ZVxuICAgKiBAcHJpdmF0ZVxuICAgKi9cbiAgX3NldE9wdGlvbiAob3B0aW9uTmFtZSwgdmFsdWUsIHVwZGF0ZT10cnVlKSB7XG4gICAgdmFyIG9wdGlvbkNvbmZpZyA9IHRoaXMuYXZhaWxhYmxlT3B0aW9uc1tvcHRpb25OYW1lXTtcbiAgICB2YXIgaWRlbnRpZmllciA9IHRoaXMuaWRlbnRpZmllcjtcblxuICAgIGlmICh0eXBlb2Ygb3B0aW9uQ29uZmlnLnZhbGlkYXRpb24gIT09IFwidW5kZWZpbmVkXCIpIHtcbiAgICAgIG9wdGlvbkNvbmZpZy52YWxpZGF0aW9uKHZhbHVlKTtcbiAgICB9XG5cbiAgICBzd2l0Y2ggKG9wdGlvbkNvbmZpZy50eXBlKSB7XG4gICAgICAvLyBTdHJpbmcgb3B0aW9uc1xuICAgICAgY2FzZSBcInN0cmluZ1wiOlxuICAgICAgICBpZiAodHlwZW9mIHZhbHVlICE9PSBcInN0cmluZ1wiKSB7XG4gICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiT3BlcmF0aW9uIGBcIiArIGlkZW50aWZpZXIgKyBcImA6IE9wdGlvbiBgXCIgKyBvcHRpb25OYW1lICsgXCJgIGhhcyB0byBiZSBhIHN0cmluZy5cIik7XG4gICAgICAgIH1cblxuICAgICAgICAvLyBTdHJpbmcgdmFsdWUgcmVzdHJpY3Rpb25zXG4gICAgICAgIHZhciBhdmFpbGFibGUgPSBvcHRpb25Db25maWcuYXZhaWxhYmxlO1xuICAgICAgICBpZiAodHlwZW9mIGF2YWlsYWJsZSAhPT0gXCJ1bmRlZmluZWRcIiAmJiBhdmFpbGFibGUuaW5kZXhPZih2YWx1ZSkgPT09IC0xKSB7XG4gICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiT3BlcmF0aW9uIGBcIiArIGlkZW50aWZpZXIgKyBcImA6IEludmFsaWQgdmFsdWUgZm9yIGBcIiArIG9wdGlvbk5hbWUgKyBcImAgKHZhbGlkIHZhbHVlcyBhcmU6IFwiICsgb3B0aW9uQ29uZmlnLmF2YWlsYWJsZS5qb2luKFwiLCBcIikgKyBcIilcIik7XG4gICAgICAgIH1cblxuICAgICAgICB0aGlzLl9vcHRpb25zW29wdGlvbk5hbWVdID0gdmFsdWU7XG4gICAgICAgIGJyZWFrO1xuXG4gICAgICAvLyBOdW1iZXIgb3B0aW9uc1xuICAgICAgY2FzZSBcIm51bWJlclwiOlxuICAgICAgICBpZiAodHlwZW9mIHZhbHVlICE9PSBcIm51bWJlclwiKSB7XG4gICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiT3BlcmF0aW9uIGBcIiArIGlkZW50aWZpZXIgKyBcImA6IE9wdGlvbiBgXCIgKyBvcHRpb25OYW1lICsgXCJgIGhhcyB0byBiZSBhIG51bWJlci5cIik7XG4gICAgICAgIH1cblxuICAgICAgICB0aGlzLl9vcHRpb25zW29wdGlvbk5hbWVdID0gdmFsdWU7XG4gICAgICAgIGJyZWFrO1xuXG4gICAgICAvLyBCb29sZWFuIG9wdGlvbnNcbiAgICAgIGNhc2UgXCJib29sZWFuXCI6XG4gICAgICAgIGlmICh0eXBlb2YgdmFsdWUgIT09IFwiYm9vbGVhblwiKSB7XG4gICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiT3BlcmF0aW9uIGBcIiArIGlkZW50aWZpZXIgKyBcImA6IE9wdGlvbiBgXCIgKyBvcHRpb25OYW1lICsgXCJgIGhhcyB0byBiZSBhIGJvb2xlYW4uXCIpO1xuICAgICAgICB9XG5cbiAgICAgICAgdGhpcy5fb3B0aW9uc1tvcHRpb25OYW1lXSA9IHZhbHVlO1xuICAgICAgICBicmVhaztcblxuICAgICAgLy8gVmVjdG9yMiBvcHRpb25zXG4gICAgICBjYXNlIFwidmVjdG9yMlwiOlxuICAgICAgICBpZiAoISh2YWx1ZSBpbnN0YW5jZW9mIFZlY3RvcjIpKSB7XG4gICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiT3BlcmF0aW9uIGBcIiArIGlkZW50aWZpZXIgKyBcImA6IE9wdGlvbiBgXCIgKyBvcHRpb25OYW1lICsgXCJgIGhhcyB0byBiZSBhbiBpbnN0YW5jZSBvZiBJbWdseUtpdC5WZWN0b3IyLlwiKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHRoaXMuX29wdGlvbnNbb3B0aW9uTmFtZV0gPSB2YWx1ZS5jbG9uZSgpO1xuXG4gICAgICAgIGJyZWFrO1xuXG4gICAgICAvLyBDb2xvciBvcHRpb25zXG4gICAgICBjYXNlIFwiY29sb3JcIjpcbiAgICAgICAgaWYgKCEodmFsdWUgaW5zdGFuY2VvZiBDb2xvcikpIHtcbiAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJPcGVyYXRpb24gYFwiICsgaWRlbnRpZmllciArIFwiYDogT3B0aW9uIGBcIiArIG9wdGlvbk5hbWUgKyBcImAgaGFzIHRvIGJlIGFuIGluc3RhbmNlIG9mIEltZ2x5S2l0LkNvbG9yLlwiKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHRoaXMuX29wdGlvbnNbb3B0aW9uTmFtZV0gPSB2YWx1ZTtcbiAgICAgICAgYnJlYWs7XG5cbiAgICAgIC8vIE9iamVjdCBvcHRpb25zXG4gICAgICBjYXNlIFwib2JqZWN0XCI6XG4gICAgICAgIHRoaXMuX29wdGlvbnNbb3B0aW9uTmFtZV0gPSB2YWx1ZTtcbiAgICAgICAgYnJlYWs7XG4gICAgfVxuXG4gICAgdGhpcy5fZGlydHkgPSB0cnVlO1xuICAgIGlmICh1cGRhdGUpIHtcbiAgICAgIHRoaXMuZW1pdChcInVwZGF0ZVwiKTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogR2V0cyB0aGUgbmV3IGRpbWVuc2lvbnNcbiAgICogQHBhcmFtIHtSZW5kZXJlcn0gcmVuZGVyZXJcbiAgICogQHBhcmFtIHtWZWN0b3IyfSBbZGltZW5zaW9uc11cbiAgICogQHJldHVybiB7VmVjdG9yMn1cbiAgICogQHByaXZhdGVcbiAgICovXG4gIGdldE5ld0RpbWVuc2lvbnMgKHJlbmRlcmVyLCBkaW1lbnNpb25zKSB7XG4gICAgbGV0IGNhbnZhcyA9IHJlbmRlcmVyLmdldENhbnZhcygpO1xuICAgIGRpbWVuc2lvbnMgPSBkaW1lbnNpb25zIHx8IG5ldyBWZWN0b3IyKGNhbnZhcy53aWR0aCwgY2FudmFzLmhlaWdodCk7XG5cbiAgICByZXR1cm4gZGltZW5zaW9ucztcbiAgfVxuXG4gIC8qKlxuICAgKiBTZXRzIHRoaXMgb3BlcmF0aW9uIHRvIGRpcnR5LCBzbyB0aGF0IGl0IHdpbGwgcmUtcmVuZGVyIG5leHQgdGltZVxuICAgKiBAcGFyYW0ge0Jvb2xlYW59IGRpcnR5ID0gdHJ1ZVxuICAgKi9cbiAgc2V0IGRpcnR5IChkaXJ0eSkge1xuICAgIHRoaXMuX2RpcnR5ID0gZGlydHk7XG4gIH1cblxuICAvKipcbiAgICogUmV0dXJucyB0aGUgZGlydHkgc3RhdGVcbiAgICogQHR5cGUge0Jvb2xlYW59XG4gICAqL1xuICBnZXQgZGlydHkgKCkge1xuICAgIHJldHVybiB0aGlzLl9kaXJ0eTtcbiAgfVxufVxuXG4vKipcbiAqIFRvIGNyZWF0ZSBhbiB7QGxpbmsgSW1nbHlLaXQuT3BlcmF0aW9ufSBjbGFzcyBvZiB5b3VyIG93biwgY2FsbCB0aGlzXG4gKiBtZXRob2QgYW5kIHByb3ZpZGUgaW5zdGFuY2UgcHJvcGVydGllcyBhbmQgZnVuY3Rpb25zLlxuICogQGZ1bmN0aW9uXG4gKi9cbmltcG9ydCBleHRlbmQgZnJvbSBcIi4uL2xpYi9leHRlbmRcIjtcbk9wZXJhdGlvbi5leHRlbmQgPSBleHRlbmQ7XG5cbmV4cG9ydCBkZWZhdWx0IE9wZXJhdGlvbjtcbiIsIlwidXNlIHN0cmljdFwiO1xuLyohXG4gKiBDb3B5cmlnaHQgKGMpIDIwMTMtMjAxNSA5ZWxlbWVudHMgR21iSFxuICpcbiAqIFJlbGVhc2VkIHVuZGVyIEF0dHJpYnV0aW9uLU5vbkNvbW1lcmNpYWwgMy4wIFVucG9ydGVkXG4gKiBodHRwOi8vY3JlYXRpdmVjb21tb25zLm9yZy9saWNlbnNlcy9ieS1uYy8zLjAvXG4gKlxuICogRm9yIGNvbW1lcmNpYWwgdXNlLCBwbGVhc2UgY29udGFjdCB1cyBhdCBjb250YWN0QDllbGVtZW50cy5jb21cbiAqL1xuXG5pbXBvcnQgT3BlcmF0aW9uIGZyb20gXCIuL29wZXJhdGlvblwiO1xuaW1wb3J0IFZlY3RvcjIgZnJvbSBcIi4uL2xpYi9tYXRoL3ZlY3RvcjJcIjtcbmltcG9ydCBTdGFja0JsdXIgZnJvbSBcIi4uL3ZlbmRvci9zdGFjay1ibHVyXCI7XG5cbi8qKlxuICogQW4gb3BlcmF0aW9uIHRoYXQgY2FuIGNyb3Agb3V0IGEgcGFydCBvZiB0aGUgaW1hZ2VcbiAqXG4gKiBAY2xhc3NcbiAqIEBhbGlhcyBJbWdseUtpdC5PcGVyYXRpb25zLlJhZGlhbEJsdXJPcGVyYXRpb25cbiAqIEBleHRlbmRzIEltZ2x5S2l0Lk9wZXJhdGlvblxuICovXG5jbGFzcyBSYWRpYWxCbHVyT3BlcmF0aW9uIGV4dGVuZHMgT3BlcmF0aW9uIHtcbiAgY29uc3RydWN0b3IgKC4uLmFyZ3MpIHtcbiAgICB0aGlzLmF2YWlsYWJsZU9wdGlvbnMgPSB7XG4gICAgICBwb3NpdGlvbjogeyB0eXBlOiBcInZlY3RvcjJcIiwgZGVmYXVsdDogbmV3IFZlY3RvcjIoMC41LCAwLjUpIH0sXG4gICAgICBncmFkaWVudFJhZGl1czogeyB0eXBlOiBcIm51bWJlclwiLCBkZWZhdWx0OiA1MCB9LFxuICAgICAgYmx1clJhZGl1czogeyB0eXBlOiBcIm51bWJlclwiLCBkZWZhdWx0OiAyMCB9XG4gICAgfTtcblxuICAgIC8qKlxuICAgICAqIFRoZSBmcmFnbWVudCBzaGFkZXIgdXNlZCBmb3IgdGhpcyBvcGVyYXRpb25cbiAgICAgKiBAaW50ZXJuYWwgQmFzZWQgb24gZXZhbncncyBnbGZ4LmpzIHRpbHQgc2hpZnQgc2hhZGVyOlxuICAgICAqICAgICAgICAgICBodHRwczovL2dpdGh1Yi5jb20vZXZhbncvZ2xmeC5qcy9ibG9iL21hc3Rlci9zcmMvZmlsdGVycy9ibHVyL3RpbHRzaGlmdC5qc1xuICAgICAqL1xuICAgIHRoaXMuZnJhZ21lbnRTaGFkZXIgPSBgXG4gICAgICBwcmVjaXNpb24gbWVkaXVtcCBmbG9hdDtcbiAgICAgIHVuaWZvcm0gc2FtcGxlcjJEIHVfaW1hZ2U7XG4gICAgICB1bmlmb3JtIGZsb2F0IGJsdXJSYWRpdXM7XG4gICAgICB1bmlmb3JtIGZsb2F0IGdyYWRpZW50UmFkaXVzO1xuICAgICAgdW5pZm9ybSB2ZWMyIHBvc2l0aW9uO1xuICAgICAgdW5pZm9ybSB2ZWMyIGRlbHRhO1xuICAgICAgdW5pZm9ybSB2ZWMyIHRleFNpemU7XG4gICAgICB2YXJ5aW5nIHZlYzIgdl90ZXhDb29yZDtcblxuICAgICAgZmxvYXQgcmFuZG9tKHZlYzMgc2NhbGUsIGZsb2F0IHNlZWQpIHtcbiAgICAgICAgcmV0dXJuIGZyYWN0KHNpbihkb3QoZ2xfRnJhZ0Nvb3JkLnh5eiArIHNlZWQsIHNjYWxlKSkgKiA0Mzc1OC41NDUzICsgc2VlZCk7XG4gICAgICB9XG5cbiAgICAgIHZvaWQgbWFpbigpIHtcbiAgICAgICAgICB2ZWM0IGNvbG9yID0gdmVjNCgwLjApO1xuICAgICAgICAgIGZsb2F0IHRvdGFsID0gMC4wO1xuXG4gICAgICAgICAgZmxvYXQgb2Zmc2V0ID0gcmFuZG9tKHZlYzMoMTIuOTg5OCwgNzguMjMzLCAxNTEuNzE4MiksIDAuMCk7XG4gICAgICAgICAgZmxvYXQgcmFkaXVzID0gc21vb3Roc3RlcCgwLjAsIDEuMCwgYWJzKGRpc3RhbmNlKHZfdGV4Q29vcmQgKiB0ZXhTaXplLCBwb3NpdGlvbikpIC8gKGdyYWRpZW50UmFkaXVzICogMi4wKSkgKiBibHVyUmFkaXVzO1xuICAgICAgICAgIGZvciAoZmxvYXQgdCA9IC0zMC4wOyB0IDw9IDMwLjA7IHQrKykge1xuICAgICAgICAgICAgICBmbG9hdCBwZXJjZW50ID0gKHQgKyBvZmZzZXQgLSAwLjUpIC8gMzAuMDtcbiAgICAgICAgICAgICAgZmxvYXQgd2VpZ2h0ID0gMS4wIC0gYWJzKHBlcmNlbnQpO1xuICAgICAgICAgICAgICB2ZWM0IHNhbXBsZSA9IHRleHR1cmUyRCh1X2ltYWdlLCB2X3RleENvb3JkICsgZGVsdGEgKiBwZXJjZW50ICogcmFkaXVzIC8gdGV4U2l6ZSk7XG5cbiAgICAgICAgICAgICAgc2FtcGxlLnJnYiAqPSBzYW1wbGUuYTtcblxuICAgICAgICAgICAgICBjb2xvciArPSBzYW1wbGUgKiB3ZWlnaHQ7XG4gICAgICAgICAgICAgIHRvdGFsICs9IHdlaWdodDtcbiAgICAgICAgICB9XG5cbiAgICAgICAgICBnbF9GcmFnQ29sb3IgPSBjb2xvciAvIHRvdGFsO1xuICAgICAgICAgIGdsX0ZyYWdDb2xvci5yZ2IgLz0gZ2xfRnJhZ0NvbG9yLmEgKyAwLjAwMDAxO1xuICAgICAgfVxuICAgIGA7XG5cbiAgICBzdXBlciguLi5hcmdzKTtcblxuICAgIHRoaXMuX2NhY2hlZEJsdXJyZWRDYW52YXMgPSBudWxsO1xuICAgIHRoaXMuX2xhc3RCbHVyUmFkaXVzID0gdGhpcy5fb3B0aW9ucy5ibHVyUmFkaXVzO1xuICAgIHRoaXMuX2xhc3RHcmFkaWVudFJhZGl1cyA9IHRoaXMuX29wdGlvbnMuZ3JhZGllbnRSYWRpdXM7XG4gIH1cblxuICAvKipcbiAgICogQSB1bmlxdWUgc3RyaW5nIHRoYXQgaWRlbnRpZmllcyB0aGlzIG9wZXJhdGlvbi4gQ2FuIGJlIHVzZWQgdG8gc2VsZWN0XG4gICAqIG9wZXJhdGlvbnMuXG4gICAqIEB0eXBlIHtTdHJpbmd9XG4gICAqL1xuICBnZXQgaWRlbnRpZmllciAoKSB7XG4gICAgcmV0dXJuIFwicmFkaWFsLWJsdXJcIjtcbiAgfVxuXG4gIC8qKlxuICAgKiBDcm9wcyB0aGlzIGltYWdlIHVzaW5nIFdlYkdMXG4gICAqIEBwYXJhbSAge1dlYkdMUmVuZGVyZXJ9IHJlbmRlcmVyXG4gICAqL1xuICAvKiBpc3RhbmJ1bCBpZ25vcmUgbmV4dCAqL1xuICBfcmVuZGVyV2ViR0wgKHJlbmRlcmVyKSB7XG4gICAgdmFyIGNhbnZhcyA9IHJlbmRlcmVyLmdldENhbnZhcygpO1xuICAgIHZhciBjYW52YXNTaXplID0gbmV3IFZlY3RvcjIoY2FudmFzLndpZHRoLCBjYW52YXMuaGVpZ2h0KTtcblxuICAgIHZhciBwb3NpdGlvbiA9IHRoaXMuX29wdGlvbnMucG9zaXRpb24uY2xvbmUoKTtcbiAgICBwb3NpdGlvbi55ID0gMSAtIHBvc2l0aW9uLnk7XG5cbiAgICBpZiAodGhpcy5fb3B0aW9ucy5udW1iZXJGb3JtYXQgPT09IFwicmVsYXRpdmVcIikge1xuICAgICAgcG9zaXRpb24ubXVsdGlwbHkoY2FudmFzU2l6ZSk7XG4gICAgfVxuXG4gICAgdmFyIHVuaWZvcm1zID0ge1xuICAgICAgYmx1clJhZGl1czogeyB0eXBlOiBcImZcIiwgdmFsdWU6IHRoaXMuX29wdGlvbnMuYmx1clJhZGl1cyB9LFxuICAgICAgZ3JhZGllbnRSYWRpdXM6IHsgdHlwZTogXCJmXCIsIHZhbHVlOiB0aGlzLl9vcHRpb25zLmdyYWRpZW50UmFkaXVzIH0sXG4gICAgICBwb3NpdGlvbjogeyB0eXBlOiBcIjJmXCIsIHZhbHVlOiBbcG9zaXRpb24ueCwgcG9zaXRpb24ueV0gfSxcbiAgICAgIHRleFNpemU6IHsgdHlwZTogXCIyZlwiLCB2YWx1ZTogW2NhbnZhcy53aWR0aCwgY2FudmFzLmhlaWdodF0gfSxcbiAgICAgIGRlbHRhOiB7IHR5cGU6IFwiMmZcIiwgdmFsdWU6IFsxLCAxXSB9XG4gICAgfTtcblxuICAgIC8vIEZpcnN0IHBhc3NcbiAgICByZW5kZXJlci5ydW5TaGFkZXIobnVsbCwgdGhpcy5mcmFnbWVudFNoYWRlciwge1xuICAgICAgdW5pZm9ybXM6IHVuaWZvcm1zXG4gICAgfSk7XG5cbiAgICAvLyBVcGRhdGUgZGVsdGEgZm9yIHNlY29uZCBwYXNzXG4gICAgdW5pZm9ybXMuZGVsdGEudmFsdWUgPSBbLTEsIDFdO1xuXG4gICAgcmVuZGVyZXIucnVuU2hhZGVyKG51bGwsIHRoaXMuZnJhZ21lbnRTaGFkZXIsIHtcbiAgICAgIHVuaWZvcm1zOiB1bmlmb3Jtc1xuICAgIH0pO1xuICB9XG5cbiAgLyoqXG4gICAqIENyb3BzIHRoZSBpbWFnZSB1c2luZyBDYW52YXMyRFxuICAgKiBAcGFyYW0gIHtDYW52YXNSZW5kZXJlcn0gcmVuZGVyZXJcbiAgICovXG4gIF9yZW5kZXJDYW52YXMgKHJlbmRlcmVyKSB7XG4gICAgdmFyIGNhbnZhcyA9IHJlbmRlcmVyLmdldENhbnZhcygpO1xuXG4gICAgbGV0IGJsdXJSYWRpdXNDaGFuZ2VkID0gdGhpcy5fb3B0aW9ucy5ibHVyUmFkaXVzICE9PSB0aGlzLl9sYXN0Qmx1clJhZGl1cztcbiAgICBsZXQgYmx1cnJ5Q2FudmFzO1xuICAgIGlmIChibHVyUmFkaXVzQ2hhbmdlZCB8fCB0aGlzLl9jYWNoZWRCbHVycmVkQ2FudmFzID09PSBudWxsKSB7XG4gICAgICAvLyBCbHVyIGFuZCBjYWNoZSBjYW52YXNcbiAgICAgIGJsdXJyeUNhbnZhcyA9IHRoaXMuX2JsdXJDYW52YXMocmVuZGVyZXIpO1xuICAgICAgdGhpcy5fY2FjaGVkQmx1cnJlZENhbnZhcyA9IGJsdXJyeUNhbnZhcztcbiAgICAgIHRoaXMuX2xhc3RCbHVyUmFkaXVzID0gdGhpcy5fb3B0aW9ucy5ibHVyUmFkaXVzO1xuICAgICAgdGhpcy5fbGFzdEdyYWRpZW50UmFkaXVzID0gdGhpcy5fb3B0aW9ucy5ncmFkaWVudFJhZGl1cztcbiAgICB9IGVsc2Uge1xuICAgICAgLy8gVXNlIGNhY2hlZCBjYW52YXNcbiAgICAgIGJsdXJyeUNhbnZhcyA9IHRoaXMuX2NhY2hlZEJsdXJyZWRDYW52YXM7XG4gICAgfVxuXG4gICAgdmFyIG1hc2tDYW52YXMgPSB0aGlzLl9jcmVhdGVNYXNrKHJlbmRlcmVyKTtcblxuICAgIHRoaXMuX2FwcGx5TWFzayhjYW52YXMsIGJsdXJyeUNhbnZhcywgbWFza0NhbnZhcyk7XG4gIH1cblxuICAvKipcbiAgICogQ3JlYXRlcyBhIGJsdXJyZWQgY29weSBvZiB0aGUgY2FudmFzXG4gICAqIEBwYXJhbSAge0NhbnZhc1JlbmRlcmVyfSByZW5kZXJlclxuICAgKiBAcmV0dXJuIHtDYW52YXN9XG4gICAqIEBwcml2YXRlXG4gICAqL1xuICBfYmx1ckNhbnZhcyAocmVuZGVyZXIpIHtcbiAgICB2YXIgbmV3Q2FudmFzID0gcmVuZGVyZXIuY2xvbmVDYW52YXMoKTtcbiAgICB2YXIgYmx1cnJ5Q29udGV4dCA9IG5ld0NhbnZhcy5nZXRDb250ZXh0KFwiMmRcIik7XG4gICAgdmFyIGJsdXJyeUltYWdlRGF0YSA9IGJsdXJyeUNvbnRleHQuZ2V0SW1hZ2VEYXRhKDAsIDAsIG5ld0NhbnZhcy53aWR0aCwgbmV3Q2FudmFzLmhlaWdodCk7XG4gICAgU3RhY2tCbHVyLnN0YWNrQmx1ckNhbnZhc1JHQkEoYmx1cnJ5SW1hZ2VEYXRhLCAwLCAwLCBuZXdDYW52YXMud2lkdGgsIG5ld0NhbnZhcy5oZWlnaHQsIHRoaXMuX29wdGlvbnMuYmx1clJhZGl1cyk7XG4gICAgYmx1cnJ5Q29udGV4dC5wdXRJbWFnZURhdGEoYmx1cnJ5SW1hZ2VEYXRhLCAwLCAwKTtcblxuICAgIHJldHVybiBuZXdDYW52YXM7XG4gIH1cblxuICAvKipcbiAgICogQ3JlYXRlcyB0aGUgbWFzayBjYW52YXNcbiAgICogQHBhcmFtICB7Q2FudmFzUmVuZGVyZXJ9IHJlbmRlcmVyXG4gICAqIEByZXR1cm4ge0NhbnZhc31cbiAgICogQHByaXZhdGVcbiAgICovXG4gIF9jcmVhdGVNYXNrIChyZW5kZXJlcikge1xuICAgIHZhciBjYW52YXMgPSByZW5kZXJlci5nZXRDYW52YXMoKTtcblxuICAgIHZhciBjYW52YXNTaXplID0gbmV3IFZlY3RvcjIoY2FudmFzLndpZHRoLCBjYW52YXMuaGVpZ2h0KTtcbiAgICB2YXIgZ3JhZGllbnRSYWRpdXMgPSB0aGlzLl9vcHRpb25zLmdyYWRpZW50UmFkaXVzO1xuXG4gICAgdmFyIG1hc2tDYW52YXMgPSByZW5kZXJlci5jcmVhdGVDYW52YXMoY2FudmFzLndpZHRoLCBjYW52YXMuaGVpZ2h0KTtcbiAgICB2YXIgbWFza0NvbnRleHQgPSBtYXNrQ2FudmFzLmdldENvbnRleHQoXCIyZFwiKTtcblxuICAgIHZhciBwb3NpdGlvbiA9IHRoaXMuX29wdGlvbnMucG9zaXRpb24uY2xvbmUoKTtcblxuICAgIGlmICh0aGlzLl9vcHRpb25zLm51bWJlckZvcm1hdCA9PT0gXCJyZWxhdGl2ZVwiKSB7XG4gICAgICBwb3NpdGlvbi5tdWx0aXBseShjYW52YXNTaXplKTtcbiAgICB9XG5cbiAgICAvLyBCdWlsZCBncmFkaWVudFxuICAgIHZhciBncmFkaWVudCA9IG1hc2tDb250ZXh0LmNyZWF0ZVJhZGlhbEdyYWRpZW50KFxuICAgICAgcG9zaXRpb24ueCwgcG9zaXRpb24ueSwgMCxcbiAgICAgIHBvc2l0aW9uLngsIHBvc2l0aW9uLnksIGdyYWRpZW50UmFkaXVzXG4gICAgKTtcbiAgICBncmFkaWVudC5hZGRDb2xvclN0b3AoMCwgXCIjRkZGRkZGXCIpO1xuICAgIGdyYWRpZW50LmFkZENvbG9yU3RvcCgxLCBcIiMwMDAwMDBcIik7XG5cbiAgICAvLyBEcmF3IGdyYWRpZW50XG4gICAgbWFza0NvbnRleHQuZmlsbFN0eWxlID0gZ3JhZGllbnQ7XG4gICAgbWFza0NvbnRleHQuZmlsbFJlY3QoMCwgMCwgY2FudmFzLndpZHRoLCBjYW52YXMuaGVpZ2h0KTtcblxuICAgIHJldHVybiBtYXNrQ2FudmFzO1xuICB9XG5cbiAgLyoqXG4gICAqIEFwcGxpZXMgdGhlIGJsdXIgYW5kIG1hc2sgdG8gdGhlIGlucHV0IGNhbnZhc1xuICAgKiBAcGFyYW0gIHtDYW52YXN9IGlucHV0Q2FudmFzXG4gICAqIEBwYXJhbSAge0NhbnZhc30gYmx1cnJ5Q2FudmFzXG4gICAqIEBwYXJhbSAge0NhbnZhc30gbWFza0NhbnZhc1xuICAgKiBAcHJpdmF0ZVxuICAgKi9cbiAgX2FwcGx5TWFzayAoaW5wdXRDYW52YXMsIGJsdXJyeUNhbnZhcywgbWFza0NhbnZhcykge1xuICAgIHZhciBpbnB1dENvbnRleHQgPSBpbnB1dENhbnZhcy5nZXRDb250ZXh0KFwiMmRcIik7XG4gICAgdmFyIGJsdXJyeUNvbnRleHQgPSBibHVycnlDYW52YXMuZ2V0Q29udGV4dChcIjJkXCIpO1xuICAgIHZhciBtYXNrQ29udGV4dCA9IG1hc2tDYW52YXMuZ2V0Q29udGV4dChcIjJkXCIpO1xuXG4gICAgdmFyIGlucHV0SW1hZ2VEYXRhID0gaW5wdXRDb250ZXh0LmdldEltYWdlRGF0YSgwLCAwLCBpbnB1dENhbnZhcy53aWR0aCwgaW5wdXRDYW52YXMuaGVpZ2h0KTtcbiAgICB2YXIgcGl4ZWxzID0gaW5wdXRJbWFnZURhdGEuZGF0YTtcbiAgICB2YXIgYmx1cnJ5UGl4ZWxzID0gYmx1cnJ5Q29udGV4dC5nZXRJbWFnZURhdGEoMCwgMCwgaW5wdXRDYW52YXMud2lkdGgsIGlucHV0Q2FudmFzLmhlaWdodCkuZGF0YTtcbiAgICB2YXIgbWFza1BpeGVscyA9IG1hc2tDb250ZXh0LmdldEltYWdlRGF0YSgwLCAwLCBpbnB1dENhbnZhcy53aWR0aCwgaW5wdXRDYW52YXMuaGVpZ2h0KS5kYXRhO1xuXG4gICAgdmFyIGluZGV4LCBhbHBoYTtcbiAgICBmb3IgKHZhciB5ID0gMDsgeSA8IGlucHV0Q2FudmFzLmhlaWdodDsgeSsrKSB7XG4gICAgICBmb3IgKHZhciB4ID0gMDsgeCA8IGlucHV0Q2FudmFzLndpZHRoOyB4KyspIHtcbiAgICAgICAgaW5kZXggPSAoeSAqIGlucHV0Q2FudmFzLndpZHRoICsgeCkgKiA0O1xuICAgICAgICBhbHBoYSA9IG1hc2tQaXhlbHNbaW5kZXhdIC8gMjU1O1xuXG4gICAgICAgIHBpeGVsc1tpbmRleF0gPSBhbHBoYSAqIHBpeGVsc1tpbmRleF0gKyAoMSAtIGFscGhhKSAqIGJsdXJyeVBpeGVsc1tpbmRleF07XG4gICAgICAgIHBpeGVsc1tpbmRleCArIDFdID0gYWxwaGEgKiBwaXhlbHNbaW5kZXggKyAxXSArICgxIC0gYWxwaGEpICogYmx1cnJ5UGl4ZWxzW2luZGV4ICsgMV07XG4gICAgICAgIHBpeGVsc1tpbmRleCArIDJdID0gYWxwaGEgKiBwaXhlbHNbaW5kZXggKyAyXSArICgxIC0gYWxwaGEpICogYmx1cnJ5UGl4ZWxzW2luZGV4ICsgMl07XG4gICAgICB9XG4gICAgfVxuXG4gICAgaW5wdXRDb250ZXh0LnB1dEltYWdlRGF0YShpbnB1dEltYWdlRGF0YSwgMCwgMCk7XG4gIH1cblxuICAvKipcbiAgICogU2V0cyB0aGUgZGlydHkgc3RhdGUgb2YgdGhpcyBvcGVyYXRpb25cbiAgICogQHBhcmFtIHtCb29sZWFufSBkaXJ0eVxuICAgKiBAY29tbWVudCBTaW5jZSBibHVyIG9wZXJhdGlvbnMgZG8gc2VwZXJhdGUgY2FjaGluZyBvZiB0aGVcbiAgICogICAgICAgICAgYmx1cnJlZCBjYW52YXMsIHdlIG5lZWQgdG8gaW52YWxpZGF0ZSB0aGUgY2FjaGUgd2hlbiB0aGVcbiAgICogICAgICAgICAgZGlydHkgc3RhdGUgY2hhbmdlcy5cbiAgICovXG4gIHNldCBkaXJ0eSAoZGlydHkpIHtcbiAgICBzdXBlci5kaXJ0eSA9IGRpcnR5O1xuICAgIHRoaXMuX2NhY2hlZEJsdXJyZWRDYW52YXMgPSBudWxsO1xuICB9XG5cbiAgLyoqXG4gICAqIFJldHVybnMgdGhlIGRpcnR5IHN0YXRlXG4gICAqIEB0eXBlIHtCb29sZWFufVxuICAgKi9cbiAgZ2V0IGRpcnR5ICgpIHtcbiAgICByZXR1cm4gc3VwZXIuZGlydHk7XG4gIH1cbn1cblxuZXhwb3J0IGRlZmF1bHQgUmFkaWFsQmx1ck9wZXJhdGlvbjtcbiIsIlwidXNlIHN0cmljdFwiO1xuLyohXG4gKiBDb3B5cmlnaHQgKGMpIDIwMTMtMjAxNSA5ZWxlbWVudHMgR21iSFxuICpcbiAqIFJlbGVhc2VkIHVuZGVyIEF0dHJpYnV0aW9uLU5vbkNvbW1lcmNpYWwgMy4wIFVucG9ydGVkXG4gKiBodHRwOi8vY3JlYXRpdmVjb21tb25zLm9yZy9saWNlbnNlcy9ieS1uYy8zLjAvXG4gKlxuICogRm9yIGNvbW1lcmNpYWwgdXNlLCBwbGVhc2UgY29udGFjdCB1cyBhdCBjb250YWN0QDllbGVtZW50cy5jb21cbiAqL1xuXG5pbXBvcnQgT3BlcmF0aW9uIGZyb20gXCIuL29wZXJhdGlvblwiO1xuaW1wb3J0IFZlY3RvcjIgZnJvbSBcIi4uL2xpYi9tYXRoL3ZlY3RvcjJcIjtcblxuLyoqXG4gKiBBbiBvcGVyYXRpb24gdGhhdCBjYW4gY3JvcCBvdXQgYSBwYXJ0IG9mIHRoZSBpbWFnZSBhbmQgcm90YXRlcyBpdFxuICpcbiAqIEBjbGFzc1xuICogQGFsaWFzIEltZ2x5S2l0Lk9wZXJhdGlvbnMuUm90YXRpb25PcGVyYXRpb25cbiAqIEBleHRlbmRzIEltZ2x5S2l0Lk9wZXJhdGlvblxuICovXG5jbGFzcyBSb3RhdGlvbk9wZXJhdGlvbiBleHRlbmRzIE9wZXJhdGlvbiB7XG4gIGNvbnN0cnVjdG9yICguLi5hcmdzKSB7XG4gICAgdGhpcy5hdmFpbGFibGVPcHRpb25zID0ge1xuICAgICAgZGVncmVlczogeyB0eXBlOiBcIm51bWJlclwiLCBkZWZhdWx0OiAwLCB2YWxpZGF0aW9uOiBmdW5jdGlvbiAodmFsdWUpIHtcbiAgICAgICAgaWYgKHZhbHVlICUgOTAgIT09IDApIHtcbiAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJSb3RhdGlvbk9wZXJhdGlvbjogYHJvdGF0aW9uYCBoYXMgdG8gYmUgYSBtdWx0aXBsZSBvZiA5MC5cIik7XG4gICAgICAgIH1cbiAgICAgIH19XG4gICAgfTtcblxuICAgIC8qKlxuICAgICAqIFRoZSBmcmFnbWVudCBzaGFkZXIgdXNlZCBmb3IgdGhpcyBvcGVyYXRpb25cbiAgICAgKi9cbiAgICB0aGlzLnZlcnRleFNoYWRlciA9IGBcbiAgICAgIGF0dHJpYnV0ZSB2ZWMyIGFfcG9zaXRpb247XG4gICAgICBhdHRyaWJ1dGUgdmVjMiBhX3RleENvb3JkO1xuICAgICAgdmFyeWluZyB2ZWMyIHZfdGV4Q29vcmQ7XG4gICAgICB1bmlmb3JtIG1hdDMgdV9tYXRyaXg7XG5cbiAgICAgIHZvaWQgbWFpbigpIHtcbiAgICAgICAgZ2xfUG9zaXRpb24gPSB2ZWM0KCh1X21hdHJpeCAqIHZlYzMoYV9wb3NpdGlvbiwgMSkpLnh5LCAwLCAxKTtcbiAgICAgICAgdl90ZXhDb29yZCA9IGFfdGV4Q29vcmQ7XG4gICAgICB9XG4gICAgYDtcblxuICAgIHN1cGVyKC4uLmFyZ3MpO1xuICB9XG5cbiAgLyoqXG4gICAqIEEgdW5pcXVlIHN0cmluZyB0aGF0IGlkZW50aWZpZXMgdGhpcyBvcGVyYXRpb24uIENhbiBiZSB1c2VkIHRvIHNlbGVjdFxuICAgKiBvcGVyYXRpb25zLlxuICAgKiBAdHlwZSB7U3RyaW5nfVxuICAgKi9cbiAgZ2V0IGlkZW50aWZpZXIgKCkge1xuICAgIHJldHVybiBcInJvdGF0aW9uXCI7XG4gIH1cblxuICAvKipcbiAgICogUm90YXRlcyB0aGUgaW1hZ2UgdXNpbmcgV2ViR0xcbiAgICogQHBhcmFtICB7V2ViR0xSZW5kZXJlcn0gcmVuZGVyZXJcbiAgICovXG4gIC8qIGlzdGFuYnVsIGlnbm9yZSBuZXh0ICovXG4gIF9yZW5kZXJXZWJHTCAocmVuZGVyZXIpIHtcbiAgICB2YXIgY2FudmFzID0gcmVuZGVyZXIuZ2V0Q2FudmFzKCk7XG5cbiAgICB2YXIgYWN0dWFsRGVncmVlcyA9IHRoaXMuX29wdGlvbnMuZGVncmVlcyAlIDM2MDtcblxuICAgIC8vIElmIHdlJ3JlIG5vdCByb3RhdGluZyBieSAxODAgZGVncmVlcywgd2UgbmVlZCB0byByZXNpemUgdGhlIGNhbnZhc1xuICAgIC8vIGFuZCB0aGUgdGV4dHVyZVxuICAgIGlmIChhY3R1YWxEZWdyZWVzICUgMTgwICE9PSAwKSB7XG4gICAgICBsZXQgbmV3RGltZW5zaW9ucyA9IHRoaXMuZ2V0TmV3RGltZW5zaW9ucyhyZW5kZXJlcik7XG5cbiAgICAgIC8vIFJlc2l6ZSB0aGUgY2FudmFzXG4gICAgICBjYW52YXMud2lkdGggPSBuZXdEaW1lbnNpb25zLng7XG4gICAgICBjYW52YXMuaGVpZ2h0ID0gbmV3RGltZW5zaW9ucy55O1xuICAgIH1cblxuICAgIC8vIEJ1aWxkIHRoZSByb3RhdGlvbiBtYXRyaXhcbiAgICB2YXIgcmFkaWFucyA9IGFjdHVhbERlZ3JlZXMgKiAoTWF0aC5QSSAvIDE4MCk7XG4gICAgdmFyIGMgPSBNYXRoLmNvcyhyYWRpYW5zKTtcbiAgICB2YXIgcyA9IE1hdGguc2luKHJhZGlhbnMpO1xuICAgIHZhciByb3RhdGlvbk1hdHJpeCA9IFtcbiAgICAgIGMsLXMsIDAsXG4gICAgICBzLCBjLCAwLFxuICAgICAgMCwgMCwgMVxuICAgIF07XG5cbiAgICAvLyBSdW4gdGhlIHNoYWRlclxuICAgIHJlbmRlcmVyLnJ1blNoYWRlcih0aGlzLnZlcnRleFNoYWRlciwgbnVsbCwge1xuICAgICAgdW5pZm9ybXM6IHtcbiAgICAgICAgdV9tYXRyaXg6IHsgdHlwZTogXCJtYXQzZnZcIiwgdmFsdWU6IHJvdGF0aW9uTWF0cml4IH1cbiAgICAgIH1cbiAgICB9KTtcbiAgfVxuXG4gIC8qKlxuICAgKiBDcm9wcyB0aGUgaW1hZ2UgdXNpbmcgQ2FudmFzMkRcbiAgICogQHBhcmFtICB7Q2FudmFzUmVuZGVyZXJ9IHJlbmRlcmVyXG4gICAqL1xuICBfcmVuZGVyQ2FudmFzIChyZW5kZXJlcikge1xuICAgIHZhciBjYW52YXMgPSByZW5kZXJlci5nZXRDYW52YXMoKTtcblxuICAgIHZhciBhY3R1YWxEZWdyZWVzID0gdGhpcy5fb3B0aW9ucy5kZWdyZWVzICUgMzYwO1xuICAgIGxldCBuZXdEaW1lbnNpb25zID0gdGhpcy5nZXROZXdEaW1lbnNpb25zKHJlbmRlcmVyKTtcblxuICAgIC8vIENyZWF0ZSBhIHJvdGF0ZWQgY2FudmFzXG4gICAgdmFyIG5ld0NhbnZhcyA9IHJlbmRlcmVyLmNyZWF0ZUNhbnZhcygpO1xuICAgIG5ld0NhbnZhcy53aWR0aCA9IG5ld0RpbWVuc2lvbnMueDtcbiAgICBuZXdDYW52YXMuaGVpZ2h0ID0gbmV3RGltZW5zaW9ucy55O1xuICAgIHZhciBuZXdDb250ZXh0ID0gbmV3Q2FudmFzLmdldENvbnRleHQoXCIyZFwiKTtcblxuICAgIG5ld0NvbnRleHQuc2F2ZSgpO1xuXG4gICAgLy8gVHJhbnNsYXRlIHRoZSBjYW52YXNcbiAgICBuZXdDb250ZXh0LnRyYW5zbGF0ZShuZXdDYW52YXMud2lkdGggLyAyLCBuZXdDYW52YXMuaGVpZ2h0IC8gMik7XG5cbiAgICAvLyBSb3RhdGUgdGhlIGNhbnZhc1xuICAgIG5ld0NvbnRleHQucm90YXRlKGFjdHVhbERlZ3JlZXMgKiAoTWF0aC5QSSAvIDE4MCkpO1xuXG4gICAgLy8gQ3JlYXRlIGEgdGVtcG9yYXJ5IGNhbnZhcyBzbyB0aGF0IHdlIGNhbiBkcmF3IHRoZSBpbWFnZVxuICAgIC8vIHdpdGggdGhlIGFwcGxpZWQgdHJhbnNmb3JtYXRpb25cbiAgICB2YXIgdGVtcENhbnZhcyA9IHJlbmRlcmVyLmNsb25lQ2FudmFzKCk7XG4gICAgbmV3Q29udGV4dC5kcmF3SW1hZ2UodGVtcENhbnZhcywgLWNhbnZhcy53aWR0aCAvIDIsIC1jYW52YXMuaGVpZ2h0IC8gMik7XG5cbiAgICAvLyBSZXN0b3JlIG9sZCB0cmFuc2Zvcm1hdGlvblxuICAgIG5ld0NvbnRleHQucmVzdG9yZSgpO1xuXG4gICAgcmVuZGVyZXIuc2V0Q2FudmFzKG5ld0NhbnZhcyk7XG4gIH1cblxuICAvKipcbiAgICogR2V0cyB0aGUgbmV3IGRpbWVuc2lvbnNcbiAgICogQHBhcmFtIHtSZW5kZXJlcn0gcmVuZGVyZXJcbiAgICogQHBhcmFtIHtWZWN0b3IyfSBbZGltZW5zaW9uc11cbiAgICogQHJldHVybiB7VmVjdG9yMn1cbiAgICovXG4gIGdldE5ld0RpbWVuc2lvbnMgKHJlbmRlcmVyLCBkaW1lbnNpb25zKSB7XG4gICAgbGV0IGNhbnZhcyA9IHJlbmRlcmVyLmdldENhbnZhcygpO1xuICAgIGRpbWVuc2lvbnMgPSBkaW1lbnNpb25zIHx8IG5ldyBWZWN0b3IyKGNhbnZhcy53aWR0aCwgY2FudmFzLmhlaWdodCk7XG5cbiAgICBsZXQgYWN0dWFsRGVncmVlcyA9IHRoaXMuX29wdGlvbnMuZGVncmVlcyAlIDM2MDtcbiAgICBpZiAoYWN0dWFsRGVncmVlcyAlIDE4MCAhPT0gMCkge1xuICAgICAgbGV0IHRlbXBYID0gZGltZW5zaW9ucy54O1xuICAgICAgZGltZW5zaW9ucy54ID0gZGltZW5zaW9ucy55O1xuICAgICAgZGltZW5zaW9ucy55ID0gdGVtcFg7XG4gICAgfVxuXG4gICAgcmV0dXJuIGRpbWVuc2lvbnM7XG4gIH1cbn1cblxuZXhwb3J0IGRlZmF1bHQgUm90YXRpb25PcGVyYXRpb247XG4iLCJcInVzZSBzdHJpY3RcIjtcbi8qIVxuICogQ29weXJpZ2h0IChjKSAyMDEzLTIwMTUgOWVsZW1lbnRzIEdtYkhcbiAqXG4gKiBSZWxlYXNlZCB1bmRlciBBdHRyaWJ1dGlvbi1Ob25Db21tZXJjaWFsIDMuMCBVbnBvcnRlZFxuICogaHR0cDovL2NyZWF0aXZlY29tbW9ucy5vcmcvbGljZW5zZXMvYnktbmMvMy4wL1xuICpcbiAqIEZvciBjb21tZXJjaWFsIHVzZSwgcGxlYXNlIGNvbnRhY3QgdXMgYXQgY29udGFjdEA5ZWxlbWVudHMuY29tXG4gKi9cblxuaW1wb3J0IE9wZXJhdGlvbiBmcm9tIFwiLi9vcGVyYXRpb25cIjtcbmltcG9ydCBQcmltaXRpdmVzU3RhY2sgZnJvbSBcIi4vZmlsdGVycy9wcmltaXRpdmVzLXN0YWNrXCI7XG5pbXBvcnQgU2F0dXJhdGlvblByaW1pdGl2ZSBmcm9tIFwiLi9maWx0ZXJzL3ByaW1pdGl2ZXMvc2F0dXJhdGlvblwiO1xuXG4vKipcbiAqIEBjbGFzc1xuICogQGFsaWFzIEltZ2x5S2l0Lk9wZXJhdGlvbnMuU2F0dXJhdGlvbk9wZXJhdGlvblxuICogQGV4dGVuZHMgSW1nbHlLaXQuT3BlcmF0aW9uXG4gKi9cbmNsYXNzIFNhdHVyYXRpb25PcGVyYXRpb24gZXh0ZW5kcyBPcGVyYXRpb24ge1xuICBjb25zdHJ1Y3RvciAoLi4uYXJncykge1xuICAgIHRoaXMuYXZhaWxhYmxlT3B0aW9ucyA9IHtcbiAgICAgIHNhdHVyYXRpb246IHsgdHlwZTogXCJudW1iZXJcIiwgZGVmYXVsdDogMS4wIH1cbiAgICB9O1xuXG4gICAgc3VwZXIoLi4uYXJncyk7XG4gIH1cblxuICAvKipcbiAgICogQSB1bmlxdWUgc3RyaW5nIHRoYXQgaWRlbnRpZmllcyB0aGlzIG9wZXJhdGlvbi4gQ2FuIGJlIHVzZWQgdG8gc2VsZWN0XG4gICAqIG9wZXJhdGlvbnMuXG4gICAqIEB0eXBlIHtTdHJpbmd9XG4gICAqL1xuICBnZXQgaWRlbnRpZmllciAoKSB7XG4gICAgcmV0dXJuIFwic2F0dXJhdGlvblwiO1xuICB9XG5cbiAgLyoqXG4gICAqIFJlbmRlcnMgdGhlIHNhdHVyYXRpb24gdXNpbmcgV2ViR0xcbiAgICogQHBhcmFtICB7V2ViR0xSZW5kZXJlcn0gcmVuZGVyZXJcbiAgICogQG92ZXJyaWRlXG4gICAqL1xuICBfcmVuZGVyV2ViR0wgKHJlbmRlcmVyKSB7XG4gICAgdGhpcy5fcmVuZGVyKHJlbmRlcmVyKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBSZW5kZXJzIHRoZSBzYXR1cmF0aW9uIHVzaW5nIENhbnZhczJEXG4gICAqIEBwYXJhbSB7Q2FudmFzUmVuZGVyZXJ9IHJlbmRlcmVyXG4gICAqIEBvdmVycmlkZVxuICAgKi9cbiAgX3JlbmRlckNhbnZhcyAocmVuZGVyZXIpIHtcbiAgICB0aGlzLl9yZW5kZXIocmVuZGVyZXIpO1xuICB9XG5cbiAgLyoqXG4gICAqIFJlbmRlcnMgdGhlIHNhdHVyYXRpb24gKGFsbCByZW5kZXJlcnMgc3VwcG9ydGVkKVxuICAgKiBAcGFyYW0gIHtSZW5kZXJlcn0gcmVuZGVyZXJcbiAgICogQHByaXZhdGVcbiAgICovXG4gIF9yZW5kZXIgKHJlbmRlcmVyKSB7XG4gICAgdmFyIHN0YWNrID0gbmV3IFByaW1pdGl2ZXNTdGFjaygpO1xuXG4gICAgc3RhY2suYWRkKG5ldyBTYXR1cmF0aW9uUHJpbWl0aXZlKHtcbiAgICAgIHNhdHVyYXRpb246IHRoaXMuX29wdGlvbnMuc2F0dXJhdGlvblxuICAgIH0pKTtcblxuICAgIHN0YWNrLnJlbmRlcihyZW5kZXJlcik7XG4gIH1cbn1cblxuZXhwb3J0IGRlZmF1bHQgU2F0dXJhdGlvbk9wZXJhdGlvbjtcbiIsIlwidXNlIHN0cmljdFwiO1xuLyohXG4gKiBDb3B5cmlnaHQgKGMpIDIwMTMtMjAxNSA5ZWxlbWVudHMgR21iSFxuICpcbiAqIFJlbGVhc2VkIHVuZGVyIEF0dHJpYnV0aW9uLU5vbkNvbW1lcmNpYWwgMy4wIFVucG9ydGVkXG4gKiBodHRwOi8vY3JlYXRpdmVjb21tb25zLm9yZy9saWNlbnNlcy9ieS1uYy8zLjAvXG4gKlxuICogRm9yIGNvbW1lcmNpYWwgdXNlLCBwbGVhc2UgY29udGFjdCB1cyBhdCBjb250YWN0QDllbGVtZW50cy5jb21cbiAqL1xuXG5pbXBvcnQgT3BlcmF0aW9uIGZyb20gXCIuL29wZXJhdGlvblwiO1xuaW1wb3J0IFZlY3RvcjIgZnJvbSBcIi4uL2xpYi9tYXRoL3ZlY3RvcjJcIjtcbmltcG9ydCBVdGlscyBmcm9tIFwiLi4vbGliL3V0aWxzXCI7XG5pbXBvcnQgYmx1ZWJpcmQgZnJvbSBcImJsdWViaXJkXCI7XG5cbi8qKlxuICogQW4gb3BlcmF0aW9uIHRoYXQgY2FuIGRyYXcgdGV4dCBvbiB0aGUgY2FudmFzXG4gKlxuICogQGNsYXNzXG4gKiBAYWxpYXMgSW1nbHlLaXQuT3BlcmF0aW9ucy5TdGlja2Vyc09wZXJhdGlvblxuICogQGV4dGVuZHMgSW1nbHlLaXQuT3BlcmF0aW9uXG4gKi9cbmNsYXNzIFN0aWNrZXJzT3BlcmF0aW9uIGV4dGVuZHMgT3BlcmF0aW9uIHtcbiAgY29uc3RydWN0b3IgKC4uLmFyZ3MpIHtcbiAgICB0aGlzLmF2YWlsYWJsZU9wdGlvbnMgPSB7XG4gICAgICBzdGlja2VyOiB7IHR5cGU6IFwic3RyaW5nXCIsIHJlcXVpcmVkOiB0cnVlIH0sXG4gICAgICBwb3NpdGlvbjogeyB0eXBlOiBcInZlY3RvcjJcIiwgZGVmYXVsdDogbmV3IFZlY3RvcjIoMCwgMCkgfSxcbiAgICAgIHNpemU6IHsgdHlwZTogXCJ2ZWN0b3IyXCIsIGRlZmF1bHQ6IG5ldyBWZWN0b3IyKDAsIDApIH1cbiAgICB9O1xuXG4gICAgLyoqXG4gICAgICogVGhlIHRleHR1cmUgaW5kZXggdXNlZCBmb3IgdGhlIHN0aWNrZXJcbiAgICAgKiBAdHlwZSB7TnVtYmVyfVxuICAgICAqIEBwcml2YXRlXG4gICAgICovXG4gICAgdGhpcy5fdGV4dHVyZUluZGV4ID0gMTtcblxuICAgIC8qKlxuICAgICAqIFRoZSBmcmFnbWVudCBzaGFkZXIgdXNlZCBmb3IgdGhpcyBvcGVyYXRpb25cbiAgICAgKi9cbiAgICB0aGlzLl9mcmFnbWVudFNoYWRlciA9IGBcbiAgICAgIHByZWNpc2lvbiBtZWRpdW1wIGZsb2F0O1xuICAgICAgdmFyeWluZyB2ZWMyIHZfdGV4Q29vcmQ7XG4gICAgICB1bmlmb3JtIHNhbXBsZXIyRCB1X2ltYWdlO1xuICAgICAgdW5pZm9ybSBzYW1wbGVyMkQgdV9zdGlja2VySW1hZ2U7XG4gICAgICB1bmlmb3JtIHZlYzIgdV9wb3NpdGlvbjtcbiAgICAgIHVuaWZvcm0gdmVjMiB1X3NpemU7XG5cbiAgICAgIHZvaWQgbWFpbigpIHtcbiAgICAgICAgdmVjNCBjb2xvcjAgPSB0ZXh0dXJlMkQodV9pbWFnZSwgdl90ZXhDb29yZCk7XG4gICAgICAgIHZlYzIgcmVsYXRpdmUgPSAodl90ZXhDb29yZCAtIHVfcG9zaXRpb24pIC8gdV9zaXplO1xuXG4gICAgICAgIGlmIChyZWxhdGl2ZS54ID49IDAuMCAmJiByZWxhdGl2ZS54IDw9IDEuMCAmJlxuICAgICAgICAgIHJlbGF0aXZlLnkgPj0gMC4wICYmIHJlbGF0aXZlLnkgPD0gMS4wKSB7XG5cbiAgICAgICAgICAgIHZlYzQgY29sb3IxID0gdGV4dHVyZTJEKHVfc3RpY2tlckltYWdlLCByZWxhdGl2ZSk7XG4gICAgICAgICAgICBnbF9GcmFnQ29sb3IgPSB2ZWM0KG1peChjb2xvcjAucmdiLCBjb2xvcjEucmdiLCBjb2xvcjEuYSksIDEuMCk7XG5cbiAgICAgICAgfSBlbHNlIHtcblxuICAgICAgICAgIGdsX0ZyYWdDb2xvciA9IGNvbG9yMDtcblxuICAgICAgICB9XG4gICAgICB9XG4gICAgYDtcblxuICAgIHRoaXMuX2xvYWRlZFN0aWNrZXJzID0ge307XG5cbiAgICBzdXBlciguLi5hcmdzKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBBIHVuaXF1ZSBzdHJpbmcgdGhhdCBpZGVudGlmaWVzIHRoaXMgb3BlcmF0aW9uLiBDYW4gYmUgdXNlZCB0byBzZWxlY3RcbiAgICogb3BlcmF0aW9ucy5cbiAgICogQHR5cGUge1N0cmluZ31cbiAgICovXG4gIGdldCBpZGVudGlmaWVyICgpIHtcbiAgICByZXR1cm4gXCJzdGlja2Vyc1wiO1xuICB9XG5cbiAgLyoqXG4gICAqIEFwcGxpZXMgdGhpcyBvcGVyYXRpb25cbiAgICogQHBhcmFtICB7UmVuZGVyZXJ9IHJlbmRlcmVyXG4gICAqIEByZXR1cm4ge1Byb21pc2V9XG4gICAqIEBhYnN0cmFjdFxuICAgKi9cbiAgcmVuZGVyIChyZW5kZXJlcikge1xuICAgIHZhciBzZWxmID0gdGhpcztcbiAgICByZXR1cm4gdGhpcy5fbG9hZFN0aWNrZXIoKVxuICAgICAgLnRoZW4oZnVuY3Rpb24gKGltYWdlKSB7XG4gICAgICAgIGlmIChyZW5kZXJlci5pZGVudGlmaWVyID09PSBcIndlYmdsXCIpIHtcbiAgICAgICAgICAvKiBpc3RhbmJ1bCBpZ25vcmUgbmV4dCAqL1xuICAgICAgICAgIHJldHVybiBzZWxmLl9yZW5kZXJXZWJHTChyZW5kZXJlciwgaW1hZ2UpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHJldHVybiBzZWxmLl9yZW5kZXJDYW52YXMocmVuZGVyZXIsIGltYWdlKTtcbiAgICAgICAgfVxuICAgICAgfSk7XG4gIH1cblxuICAvKipcbiAgICogQ3JvcHMgdGhpcyBpbWFnZSB1c2luZyBXZWJHTFxuICAgKiBAcGFyYW0gIHtXZWJHTFJlbmRlcmVyfSByZW5kZXJlclxuICAgKiBAcGFyYW0gIHtJbWFnZX0gaW1hZ2VcbiAgICogQHByaXZhdGVcbiAgICovXG4gIC8qIGlzdGFuYnVsIGlnbm9yZSBuZXh0ICovXG4gIF9yZW5kZXJXZWJHTCAocmVuZGVyZXIsIGltYWdlKSB7XG4gICAgdmFyIGNhbnZhcyA9IHJlbmRlcmVyLmdldENhbnZhcygpO1xuICAgIHZhciBnbCA9IHJlbmRlcmVyLmdldENvbnRleHQoKTtcblxuICAgIHZhciBwb3NpdGlvbiA9IHRoaXMuX29wdGlvbnMucG9zaXRpb24uY2xvbmUoKTtcbiAgICB2YXIgY2FudmFzU2l6ZSA9IG5ldyBWZWN0b3IyKGNhbnZhcy53aWR0aCwgY2FudmFzLmhlaWdodCk7XG5cbiAgICBpZiAodGhpcy5fb3B0aW9ucy5udW1iZXJGb3JtYXQgPT09IFwiYWJzb2x1dGVcIikge1xuICAgICAgcG9zaXRpb24uZGl2aWRlKGNhbnZhc1NpemUpO1xuICAgIH1cblxuICAgIHZhciBzaXplID0gbmV3IFZlY3RvcjIoaW1hZ2Uud2lkdGgsIGltYWdlLmhlaWdodCk7XG4gICAgaWYgKHR5cGVvZiB0aGlzLl9vcHRpb25zLnNpemUgIT09IFwidW5kZWZpbmVkXCIpIHtcbiAgICAgIHNpemUuY29weSh0aGlzLl9vcHRpb25zLnNpemUpO1xuXG4gICAgICBpZiAodGhpcy5fb3B0aW9ucy5udW1iZXJGb3JtYXQgPT09IFwicmVsYXRpdmVcIikge1xuICAgICAgICBzaXplLm11bHRpcGx5KGNhbnZhc1NpemUpO1xuICAgICAgfVxuXG4gICAgICAvLyBDYWxjdWxhdGUgaW1hZ2UgcmF0aW8sIHNjYWxlIGJ5IHdpZHRoXG4gICAgICBsZXQgcmF0aW8gPSBpbWFnZS5oZWlnaHQgLyBpbWFnZS53aWR0aDtcbiAgICAgIHNpemUueSA9IHNpemUueCAqIHJhdGlvO1xuICAgIH1cbiAgICBzaXplLmRpdmlkZShjYW52YXNTaXplKTtcblxuICAgIHBvc2l0aW9uLnkgPSAxIC0gcG9zaXRpb24ueTsgLy8gSW52ZXJ0IHlcbiAgICBwb3NpdGlvbi55IC09IHNpemUueTsgLy8gRml4IHlcblxuICAgIC8vIFVwbG9hZCB0aGUgdGV4dHVyZVxuICAgIGdsLmFjdGl2ZVRleHR1cmUoZ2wuVEVYVFVSRTAgKyB0aGlzLl90ZXh0dXJlSW5kZXgpO1xuICAgIHRoaXMuX3RleHR1cmUgPSBnbC5jcmVhdGVUZXh0dXJlKCk7XG4gICAgZ2wuYmluZFRleHR1cmUoZ2wuVEVYVFVSRV8yRCwgdGhpcy5fdGV4dHVyZSk7XG5cbiAgICBnbC50ZXhQYXJhbWV0ZXJpKGdsLlRFWFRVUkVfMkQsIGdsLlRFWFRVUkVfTUlOX0ZJTFRFUiwgZ2wuTElORUFSKTtcbiAgICBnbC50ZXhQYXJhbWV0ZXJpKGdsLlRFWFRVUkVfMkQsIGdsLlRFWFRVUkVfTUFHX0ZJTFRFUiwgZ2wuTElORUFSKTtcbiAgICBnbC50ZXhQYXJhbWV0ZXJpKGdsLlRFWFRVUkVfMkQsIGdsLlRFWFRVUkVfV1JBUF9TLCBnbC5DTEFNUF9UT19FREdFKTtcbiAgICBnbC50ZXhQYXJhbWV0ZXJpKGdsLlRFWFRVUkVfMkQsIGdsLlRFWFRVUkVfV1JBUF9ULCBnbC5DTEFNUF9UT19FREdFKTtcblxuICAgIGdsLnRleEltYWdlMkQoZ2wuVEVYVFVSRV8yRCwgMCwgZ2wuUkdCQSwgZ2wuUkdCQSwgZ2wuVU5TSUdORURfQllURSwgaW1hZ2UpO1xuICAgIGdsLmFjdGl2ZVRleHR1cmUoZ2wuVEVYVFVSRTApO1xuXG4gICAgLy8gRXhlY3V0ZSB0aGUgc2hhZGVyXG4gICAgcmVuZGVyZXIucnVuU2hhZGVyKG51bGwsIHRoaXMuX2ZyYWdtZW50U2hhZGVyLCB7XG4gICAgICB1bmlmb3Jtczoge1xuICAgICAgICB1X3N0aWNrZXJJbWFnZTogeyB0eXBlOiBcImlcIiwgdmFsdWU6IHRoaXMuX3RleHR1cmVJbmRleCB9LFxuICAgICAgICB1X3Bvc2l0aW9uOiB7IHR5cGU6IFwiMmZcIiwgdmFsdWU6IFtwb3NpdGlvbi54LCBwb3NpdGlvbi55XSB9LFxuICAgICAgICB1X3NpemU6IHsgdHlwZTogXCIyZlwiLCB2YWx1ZTogW3NpemUueCwgc2l6ZS55XSB9XG4gICAgICB9XG4gICAgfSk7XG4gIH1cblxuICAvKipcbiAgICogQ3JvcHMgdGhlIGltYWdlIHVzaW5nIENhbnZhczJEXG4gICAqIEBwYXJhbSAge0NhbnZhc1JlbmRlcmVyfSByZW5kZXJlclxuICAgKiBAcGFyYW0gIHtJbWFnZX0gaW1hZ2VcbiAgICogQHByaXZhdGVcbiAgICovXG4gIF9yZW5kZXJDYW52YXMgKHJlbmRlcmVyLCBpbWFnZSkge1xuICAgIHZhciBjYW52YXMgPSByZW5kZXJlci5nZXRDYW52YXMoKTtcbiAgICB2YXIgY29udGV4dCA9IHJlbmRlcmVyLmdldENvbnRleHQoKTtcblxuICAgIHZhciBjYW52YXNTaXplID0gbmV3IFZlY3RvcjIoY2FudmFzLndpZHRoLCBjYW52YXMuaGVpZ2h0KTtcbiAgICB2YXIgc2NhbGVkUG9zaXRpb24gPSB0aGlzLl9vcHRpb25zLnBvc2l0aW9uLmNsb25lKCk7XG5cbiAgICBpZiAodGhpcy5fb3B0aW9ucy5udW1iZXJGb3JtYXQgPT09IFwicmVsYXRpdmVcIikge1xuICAgICAgc2NhbGVkUG9zaXRpb24ubXVsdGlwbHkoY2FudmFzU2l6ZSk7XG4gICAgfVxuXG4gICAgdmFyIHNpemUgPSBuZXcgVmVjdG9yMihpbWFnZS53aWR0aCwgaW1hZ2UuaGVpZ2h0KTtcbiAgICBpZiAodHlwZW9mIHRoaXMuX29wdGlvbnMuc2l6ZSAhPT0gXCJ1bmRlZmluZWRcIikge1xuICAgICAgc2l6ZS5jb3B5KHRoaXMuX29wdGlvbnMuc2l6ZSk7XG5cbiAgICAgIGlmICh0aGlzLl9vcHRpb25zLm51bWJlckZvcm1hdCA9PT0gXCJyZWxhdGl2ZVwiKSB7XG4gICAgICAgIHNpemUubXVsdGlwbHkoY2FudmFzU2l6ZSk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgY29udGV4dC5kcmF3SW1hZ2UoaW1hZ2UsXG4gICAgICAwLCAwLFxuICAgICAgaW1hZ2Uud2lkdGgsIGltYWdlLmhlaWdodCxcbiAgICAgIHNjYWxlZFBvc2l0aW9uLngsIHNjYWxlZFBvc2l0aW9uLnksXG4gICAgICBzaXplLngsIHNpemUueSk7XG4gIH1cblxuICAvKipcbiAgICogTG9hZHMgdGhlIHN0aWNrZXJcbiAgICogQHJldHVybiB7UHJvbWlzZX1cbiAgICogQHByaXZhdGVcbiAgICovXG4gIF9sb2FkU3RpY2tlciAoKSB7XG4gICAgdmFyIGlzQnJvd3NlciA9IHR5cGVvZiB3aW5kb3cgIT09IFwidW5kZWZpbmVkXCI7XG4gICAgaWYgKGlzQnJvd3Nlcikge1xuICAgICAgcmV0dXJuIHRoaXMuX2xvYWRJbWFnZUJyb3dzZXIodGhpcy5fb3B0aW9ucy5zdGlja2VyKTtcbiAgICB9IGVsc2Uge1xuICAgICAgcmV0dXJuIHRoaXMuX2xvYWRJbWFnZU5vZGUodGhpcy5fb3B0aW9ucy5zdGlja2VyKTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogTG9hZHMgdGhlIGdpdmVuIGltYWdlIHVzaW5nIHRoZSBicm93c2VyJ3MgYEltYWdlYCBjbGFzc1xuICAgKiBAcGFyYW0gIHtTdHJpbmd9IGZpbGVOYW1lXG4gICAqIEByZXR1cm4ge1Byb21pc2V9XG4gICAqIEBwcml2YXRlXG4gICAqL1xuICBfbG9hZEltYWdlQnJvd3NlciAoZmlsZU5hbWUpIHtcbiAgICB2YXIgc2VsZiA9IHRoaXM7XG4gICAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHtcbiAgICAgIC8vIFJldHVybiBwcmVsb2FkZWQgc3RpY2tlciBpZiBhdmFpbGFibGVcbiAgICAgIGlmIChzZWxmLl9sb2FkZWRTdGlja2Vyc1tmaWxlTmFtZV0pIHtcbiAgICAgICAgcmV0dXJuIHJlc29sdmUoc2VsZi5fbG9hZGVkU3RpY2tlcnNbZmlsZU5hbWVdKTtcbiAgICAgIH1cblxuICAgICAgdmFyIGltYWdlID0gbmV3IEltYWdlKCk7XG5cbiAgICAgIGltYWdlLmFkZEV2ZW50TGlzdGVuZXIoXCJsb2FkXCIsICgpID0+IHtcbiAgICAgICAgc2VsZi5fbG9hZGVkU3RpY2tlcnNbZmlsZU5hbWVdID0gaW1hZ2U7XG4gICAgICAgIHJlc29sdmUoaW1hZ2UpO1xuICAgICAgfSk7XG4gICAgICBpbWFnZS5hZGRFdmVudExpc3RlbmVyKFwiZXJyb3JcIiwgKCkgPT4ge1xuICAgICAgICByZWplY3QobmV3IEVycm9yKFwiQ291bGQgbm90IGxvYWQgc3RpY2tlcjogXCIgKyBmaWxlTmFtZSkpO1xuICAgICAgfSk7XG5cbiAgICAgIGltYWdlLnNyYyA9IHNlbGYuX2tpdC5nZXRBc3NldFBhdGgoZmlsZU5hbWUpO1xuICAgIH0pO1xuICB9XG5cbiAgLyoqXG4gICAqIExvYWRzIHRoZSBnaXZlbiBpbWFnZSB1c2luZyBub2RlLmpzJyBgZnNgIGFuZCBub2RlLWNhbnZhcyBgSW1hZ2VgXG4gICAqIEBwYXJhbSAge1N0cmluZ30gZmlsZU5hbWVcbiAgICogQHJldHVybiB7UHJvbWlzZX1cbiAgICogQHByaXZhdGVcbiAgICovXG4gIF9sb2FkSW1hZ2VOb2RlIChmaWxlTmFtZSkge1xuICAgIHZhciBDYW52YXMgPSByZXF1aXJlKFwiY2FudmFzXCIpO1xuICAgIHZhciBmcyA9IHJlcXVpcmUoXCJmc1wiKTtcblxuICAgIHZhciBzZWxmID0gdGhpcztcbiAgICB2YXIgaW1hZ2UgPSBuZXcgQ2FudmFzLkltYWdlKCk7XG4gICAgdmFyIHBhdGggPSBzZWxmLl9raXQuZ2V0QXNzZXRQYXRoKGZpbGVOYW1lKTtcblxuICAgIHJldHVybiBibHVlYmlyZC5wcm9taXNpZnkoZnMucmVhZEZpbGUpKHBhdGgpXG4gICAgICAudGhlbihmdW5jdGlvbihidWZmZXIpIHtcbiAgICAgICAgaW1hZ2Uuc3JjID0gYnVmZmVyO1xuICAgICAgICByZXR1cm4gaW1hZ2U7XG4gICAgICB9KTtcbiAgfVxuXG4gIC8qKlxuICAgKiBUaGUgcmVnaXN0ZXJlZCBzdGlja2Vyc1xuICAgKiBAdHlwZSB7T2JqZWN0LjxTdHJpbmcsU3RyaW5nPn1cbiAgICovXG4gIGdldCBzdGlja2VycyAoKSB7XG4gICAgcmV0dXJuIHRoaXMuX3N0aWNrZXJzO1xuICB9XG59XG5cbmV4cG9ydCBkZWZhdWx0IFN0aWNrZXJzT3BlcmF0aW9uO1xuIiwiXCJ1c2Ugc3RyaWN0XCI7XG4vKiFcbiAqIENvcHlyaWdodCAoYykgMjAxMy0yMDE1IDllbGVtZW50cyBHbWJIXG4gKlxuICogUmVsZWFzZWQgdW5kZXIgQXR0cmlidXRpb24tTm9uQ29tbWVyY2lhbCAzLjAgVW5wb3J0ZWRcbiAqIGh0dHA6Ly9jcmVhdGl2ZWNvbW1vbnMub3JnL2xpY2Vuc2VzL2J5LW5jLzMuMC9cbiAqXG4gKiBGb3IgY29tbWVyY2lhbCB1c2UsIHBsZWFzZSBjb250YWN0IHVzIGF0IGNvbnRhY3RAOWVsZW1lbnRzLmNvbVxuICovXG5cbmltcG9ydCBPcGVyYXRpb24gZnJvbSBcIi4vb3BlcmF0aW9uXCI7XG5pbXBvcnQgVmVjdG9yMiBmcm9tIFwiLi4vbGliL21hdGgvdmVjdG9yMlwiO1xuaW1wb3J0IENvbG9yIGZyb20gXCIuLi9saWIvY29sb3JcIjtcblxuLyoqXG4gKiBBbiBvcGVyYXRpb24gdGhhdCBjYW4gZHJhdyB0ZXh0IG9uIHRoZSBjYW52YXNcbiAqXG4gKiBAY2xhc3NcbiAqIEBhbGlhcyBJbWdseUtpdC5PcGVyYXRpb25zLlRleHRPcGVyYXRpb25cbiAqIEBleHRlbmRzIEltZ2x5S2l0Lk9wZXJhdGlvblxuICovXG5jbGFzcyBUZXh0T3BlcmF0aW9uIGV4dGVuZHMgT3BlcmF0aW9uIHtcbiAgY29uc3RydWN0b3IgKC4uLmFyZ3MpIHtcbiAgICB0aGlzLmF2YWlsYWJsZU9wdGlvbnMgPSB7XG4gICAgICBmb250U2l6ZTogeyB0eXBlOiBcIm51bWJlclwiLCBkZWZhdWx0OiAwLjEgfSxcbiAgICAgIGxpbmVIZWlnaHQ6IHsgdHlwZTogXCJudW1iZXJcIiwgZGVmYXVsdDogMS4xIH0sXG4gICAgICBmb250RmFtaWx5OiB7IHR5cGU6IFwic3RyaW5nXCIsIGRlZmF1bHQ6IFwiVGltZXMgTmV3IFJvbWFuXCIgfSxcbiAgICAgIGZvbnRXZWlnaHQ6IHsgdHlwZTogXCJzdHJpbmdcIiwgZGVmYXVsdDogXCJub3JtYWxcIiB9LFxuICAgICAgYWxpZ25tZW50OiB7IHR5cGU6IFwic3RyaW5nXCIsIGRlZmF1bHQ6IFwibGVmdFwiLCBhdmFpbGFibGU6IFtcImxlZnRcIiwgXCJjZW50ZXJcIiwgXCJyaWdodFwiXSB9LFxuICAgICAgdmVydGljYWxBbGlnbm1lbnQ6IHsgdHlwZTogXCJzdHJpbmdcIiwgZGVmYXVsdDogXCJ0b3BcIiwgYXZhaWxhYmxlOiBbXCJ0b3BcIiwgXCJjZW50ZXJcIiwgXCJib3R0b21cIl0gfSxcbiAgICAgIGNvbG9yOiB7IHR5cGU6IFwiY29sb3JcIiwgZGVmYXVsdDogbmV3IENvbG9yKDEsIDEsIDEsIDEpIH0sXG4gICAgICBiYWNrZ3JvdW5kQ29sb3I6IHsgdHlwZTogXCJjb2xvclwiLCBkZWZhdWx0OiBuZXcgQ29sb3IoMCwgMCwgMCwgMCkgfSxcbiAgICAgIHBvc2l0aW9uOiB7IHR5cGU6IFwidmVjdG9yMlwiLCBkZWZhdWx0OiBuZXcgVmVjdG9yMigwLCAwKSB9LFxuICAgICAgdGV4dDogeyB0eXBlOiBcInN0cmluZ1wiLCByZXF1aXJlZDogdHJ1ZSB9LFxuICAgICAgbWF4V2lkdGg6IHsgdHlwZTogXCJudW1iZXJcIiwgZGVmYXVsdDogMS4wIH1cbiAgICB9O1xuXG4gICAgLyoqXG4gICAgICogVGhlIHRleHR1cmUgaW5kZXggdXNlZCBmb3IgdGhlIHRleHRcbiAgICAgKiBAdHlwZSB7TnVtYmVyfVxuICAgICAqIEBwcml2YXRlXG4gICAgICovXG4gICAgdGhpcy5fdGV4dHVyZUluZGV4ID0gMTtcblxuICAgIC8qKlxuICAgICAqIFRoZSBmcmFnbWVudCBzaGFkZXIgdXNlZCBmb3IgdGhpcyBvcGVyYXRpb25cbiAgICAgKi9cbiAgICB0aGlzLl9mcmFnbWVudFNoYWRlciA9IGBcbiAgICAgIHByZWNpc2lvbiBtZWRpdW1wIGZsb2F0O1xuICAgICAgdmFyeWluZyB2ZWMyIHZfdGV4Q29vcmQ7XG4gICAgICB1bmlmb3JtIHNhbXBsZXIyRCB1X2ltYWdlO1xuICAgICAgdW5pZm9ybSBzYW1wbGVyMkQgdV90ZXh0SW1hZ2U7XG4gICAgICB1bmlmb3JtIHZlYzIgdV9wb3NpdGlvbjtcbiAgICAgIHVuaWZvcm0gdmVjMiB1X3NpemU7XG5cbiAgICAgIHZvaWQgbWFpbigpIHtcbiAgICAgICAgdmVjNCBjb2xvcjAgPSB0ZXh0dXJlMkQodV9pbWFnZSwgdl90ZXhDb29yZCk7XG4gICAgICAgIHZlYzIgcmVsYXRpdmUgPSAodl90ZXhDb29yZCAtIHVfcG9zaXRpb24pIC8gdV9zaXplO1xuXG4gICAgICAgIGlmIChyZWxhdGl2ZS54ID49IDAuMCAmJiByZWxhdGl2ZS54IDw9IDEuMCAmJlxuICAgICAgICAgIHJlbGF0aXZlLnkgPj0gMC4wICYmIHJlbGF0aXZlLnkgPD0gMS4wKSB7XG5cbiAgICAgICAgICAgIHZlYzQgY29sb3IxID0gdGV4dHVyZTJEKHVfdGV4dEltYWdlLCByZWxhdGl2ZSk7XG4gICAgICAgICAgICBnbF9GcmFnQ29sb3IgPSB2ZWM0KG1peChjb2xvcjAucmdiLCBjb2xvcjEucmdiLCBjb2xvcjEuYSksIDEuMCk7XG5cbiAgICAgICAgfSBlbHNlIHtcblxuICAgICAgICAgIGdsX0ZyYWdDb2xvciA9IGNvbG9yMDtcblxuICAgICAgICB9XG4gICAgICB9XG4gICAgYDtcblxuICAgIHN1cGVyKC4uLmFyZ3MpO1xuICB9XG5cbiAgLyoqXG4gICAqIEEgdW5pcXVlIHN0cmluZyB0aGF0IGlkZW50aWZpZXMgdGhpcyBvcGVyYXRpb24uIENhbiBiZSB1c2VkIHRvIHNlbGVjdFxuICAgKiBvcGVyYXRpb25zLlxuICAgKiBAdHlwZSB7U3RyaW5nfVxuICAgKi9cbiAgZ2V0IGlkZW50aWZpZXIgKCkge1xuICAgIHJldHVybiBcInRleHRcIjtcbiAgfVxuXG5cbiAgLyoqXG4gICAqIENyb3BzIHRoaXMgaW1hZ2UgdXNpbmcgV2ViR0xcbiAgICogQHBhcmFtICB7V2ViR0xSZW5kZXJlcn0gcmVuZGVyZXJcbiAgICovXG4gIC8qIGlzdGFuYnVsIGlnbm9yZSBuZXh0ICovXG4gIF9yZW5kZXJXZWJHTCAocmVuZGVyZXIpIHtcbiAgICB2YXIgdGV4dENhbnZhcyA9IHRoaXMuX3JlbmRlclRleHRDYW52YXMocmVuZGVyZXIpO1xuXG4gICAgdmFyIGNhbnZhcyA9IHJlbmRlcmVyLmdldENhbnZhcygpO1xuICAgIHZhciBnbCA9IHJlbmRlcmVyLmdldENvbnRleHQoKTtcblxuICAgIHZhciBwb3NpdGlvbiA9IHRoaXMuX29wdGlvbnMucG9zaXRpb24uY2xvbmUoKTtcbiAgICB2YXIgY2FudmFzU2l6ZSA9IG5ldyBWZWN0b3IyKGNhbnZhcy53aWR0aCwgY2FudmFzLmhlaWdodCk7XG4gICAgdmFyIHNpemUgPSBuZXcgVmVjdG9yMih0ZXh0Q2FudmFzLndpZHRoLCB0ZXh0Q2FudmFzLmhlaWdodCkuZGl2aWRlKGNhbnZhc1NpemUpO1xuXG4gICAgaWYgKHRoaXMuX29wdGlvbnMubnVtYmVyRm9ybWF0ID09PSBcImFic29sdXRlXCIpIHtcbiAgICAgIHBvc2l0aW9uLmRpdmlkZShjYW52YXNTaXplKTtcbiAgICB9XG5cbiAgICBwb3NpdGlvbi55ID0gMSAtIHBvc2l0aW9uLnk7IC8vIEludmVydCB5XG4gICAgcG9zaXRpb24ueSAtPSBzaXplLnk7IC8vIEZpeCB5XG5cbiAgICAvLyBBZGp1c3QgdmVydGljYWwgYWxpZ25tZW50XG4gICAgaWYgKHRoaXMuX29wdGlvbnMudmVydGljYWxBbGlnbm1lbnQgPT09IFwiY2VudGVyXCIpIHtcbiAgICAgIHBvc2l0aW9uLnkgKz0gc2l6ZS55IC8gMjtcbiAgICB9IGVsc2UgaWYgKHRoaXMuX29wdGlvbnMudmVydGljYWxBbGlnbm1lbnQgPT09IFwiYm90dG9tXCIpIHtcbiAgICAgIHBvc2l0aW9uLnkgKz0gc2l6ZS55O1xuICAgIH1cblxuICAgIC8vIEFkanVzdCBob3Jpem9udGFsIGFsaWdubWVudFxuICAgIGlmICh0aGlzLl9vcHRpb25zLmFsaWdubWVudCA9PT0gXCJjZW50ZXJcIikge1xuICAgICAgcG9zaXRpb24ueCAtPSBzaXplLnggLyAyO1xuICAgIH0gZWxzZSBpZiAodGhpcy5fb3B0aW9ucy5hbGlnbm1lbnQgPT09IFwicmlnaHRcIikge1xuICAgICAgcG9zaXRpb24ueCAtPSBzaXplLng7XG4gICAgfVxuXG4gICAgLy8gVXBsb2FkIHRoZSB0ZXh0dXJlXG4gICAgZ2wuYWN0aXZlVGV4dHVyZShnbC5URVhUVVJFMCArIHRoaXMuX3RleHR1cmVJbmRleCk7XG4gICAgdGhpcy5fdGV4dHVyZSA9IGdsLmNyZWF0ZVRleHR1cmUoKTtcbiAgICBnbC5iaW5kVGV4dHVyZShnbC5URVhUVVJFXzJELCB0aGlzLl90ZXh0dXJlKTtcblxuICAgIGdsLnRleFBhcmFtZXRlcmkoZ2wuVEVYVFVSRV8yRCwgZ2wuVEVYVFVSRV9NSU5fRklMVEVSLCBnbC5MSU5FQVIpO1xuICAgIGdsLnRleFBhcmFtZXRlcmkoZ2wuVEVYVFVSRV8yRCwgZ2wuVEVYVFVSRV9NQUdfRklMVEVSLCBnbC5MSU5FQVIpO1xuICAgIGdsLnRleFBhcmFtZXRlcmkoZ2wuVEVYVFVSRV8yRCwgZ2wuVEVYVFVSRV9XUkFQX1MsIGdsLkNMQU1QX1RPX0VER0UpO1xuICAgIGdsLnRleFBhcmFtZXRlcmkoZ2wuVEVYVFVSRV8yRCwgZ2wuVEVYVFVSRV9XUkFQX1QsIGdsLkNMQU1QX1RPX0VER0UpO1xuXG4gICAgZ2wudGV4SW1hZ2UyRChnbC5URVhUVVJFXzJELCAwLCBnbC5SR0JBLCBnbC5SR0JBLCBnbC5VTlNJR05FRF9CWVRFLCB0ZXh0Q2FudmFzKTtcbiAgICBnbC5hY3RpdmVUZXh0dXJlKGdsLlRFWFRVUkUwKTtcblxuICAgIC8vIEV4ZWN1dGUgdGhlIHNoYWRlclxuICAgIHJlbmRlcmVyLnJ1blNoYWRlcihudWxsLCB0aGlzLl9mcmFnbWVudFNoYWRlciwge1xuICAgICAgdW5pZm9ybXM6IHtcbiAgICAgICAgdV90ZXh0SW1hZ2U6IHsgdHlwZTogXCJpXCIsIHZhbHVlOiB0aGlzLl90ZXh0dXJlSW5kZXggfSxcbiAgICAgICAgdV9wb3NpdGlvbjogeyB0eXBlOiBcIjJmXCIsIHZhbHVlOiBbcG9zaXRpb24ueCwgcG9zaXRpb24ueV0gfSxcbiAgICAgICAgdV9zaXplOiB7IHR5cGU6IFwiMmZcIiwgdmFsdWU6IFtzaXplLngsIHNpemUueV0gfVxuICAgICAgfVxuICAgIH0pO1xuICB9XG5cbiAgLyoqXG4gICAqIENyb3BzIHRoZSBpbWFnZSB1c2luZyBDYW52YXMyRFxuICAgKiBAcGFyYW0gIHtDYW52YXNSZW5kZXJlcn0gcmVuZGVyZXJcbiAgICovXG4gIF9yZW5kZXJDYW52YXMgKHJlbmRlcmVyKSB7XG4gICAgdmFyIHRleHRDYW52YXMgPSB0aGlzLl9yZW5kZXJUZXh0Q2FudmFzKHJlbmRlcmVyKTtcblxuICAgIHZhciBjYW52YXMgPSByZW5kZXJlci5nZXRDYW52YXMoKTtcbiAgICB2YXIgY29udGV4dCA9IHJlbmRlcmVyLmdldENvbnRleHQoKTtcblxuICAgIHZhciBjYW52YXNTaXplID0gbmV3IFZlY3RvcjIoY2FudmFzLndpZHRoLCBjYW52YXMuaGVpZ2h0KTtcbiAgICB2YXIgc2NhbGVkUG9zaXRpb24gPSB0aGlzLl9vcHRpb25zLnBvc2l0aW9uLmNsb25lKCk7XG5cbiAgICBpZiAodGhpcy5fb3B0aW9ucy5udW1iZXJGb3JtYXQgPT09IFwicmVsYXRpdmVcIikge1xuICAgICAgc2NhbGVkUG9zaXRpb24ubXVsdGlwbHkoY2FudmFzU2l6ZSk7XG4gICAgfVxuXG4gICAgLy8gQWRqdXN0IHZlcnRpY2FsIGFsaWdubWVudFxuICAgIGlmICh0aGlzLl9vcHRpb25zLnZlcnRpY2FsQWxpZ25tZW50ID09PSBcImNlbnRlclwiKSB7XG4gICAgICBzY2FsZWRQb3NpdGlvbi55IC09IHRleHRDYW52YXMuaGVpZ2h0IC8gMjtcbiAgICB9IGVsc2UgaWYgKHRoaXMuX29wdGlvbnMudmVydGljYWxBbGlnbm1lbnQgPT09IFwiYm90dG9tXCIpIHtcbiAgICAgIHNjYWxlZFBvc2l0aW9uLnkgLT0gdGV4dENhbnZhcy5oZWlnaHQ7XG4gICAgfVxuXG4gICAgLy8gQWRqdXN0IGhvcml6b250YWwgYWxpZ25tZW50XG4gICAgaWYgKHRoaXMuX29wdGlvbnMuYWxpZ25tZW50ID09PSBcImNlbnRlclwiKSB7XG4gICAgICBzY2FsZWRQb3NpdGlvbi54IC09IHRleHRDYW52YXMud2lkdGggLyAyO1xuICAgIH0gZWxzZSBpZiAodGhpcy5fb3B0aW9ucy5hbGlnbm1lbnQgPT09IFwicmlnaHRcIikge1xuICAgICAgc2NhbGVkUG9zaXRpb24ueCAtPSB0ZXh0Q2FudmFzLndpZHRoO1xuICAgIH1cblxuICAgIGNvbnRleHQuZHJhd0ltYWdlKHRleHRDYW52YXMsIHNjYWxlZFBvc2l0aW9uLngsIHNjYWxlZFBvc2l0aW9uLnkpO1xuICB9XG5cbiAgLyoqXG4gICAqIFJlbmRlcnMgdGhlIHRleHQgY2FudmFzIHRoYXQgd2lsbCBiZSB1c2VkIGFzIGEgdGV4dHVyZSBpbiBXZWJHTFxuICAgKiBhbmQgYXMgYW4gaW1hZ2UgaW4gY2FudmFzXG4gICAqIEByZXR1cm4ge0NhbnZhc31cbiAgICogQHByaXZhdGVcbiAgICovXG4gIF9yZW5kZXJUZXh0Q2FudmFzIChyZW5kZXJlcikge1xuICAgIGxldCBsaW5lLCBsaW5lTnVtO1xuICAgIGxldCBjYW52YXMgPSByZW5kZXJlci5jcmVhdGVDYW52YXMoKTtcbiAgICBsZXQgY29udGV4dCA9IGNhbnZhcy5nZXRDb250ZXh0KFwiMmRcIik7XG5cbiAgICBsZXQgb3V0cHV0Q2FudmFzID0gcmVuZGVyZXIuZ2V0Q2FudmFzKCk7XG4gICAgbGV0IGNhbnZhc1NpemUgPSBuZXcgVmVjdG9yMihvdXRwdXRDYW52YXMud2lkdGgsIG91dHB1dENhbnZhcy5oZWlnaHQpO1xuXG4gICAgbGV0IG1heFdpZHRoID0gdGhpcy5fb3B0aW9ucy5tYXhXaWR0aDtcbiAgICBsZXQgYWN0dWFsRm9udFNpemUgPSB0aGlzLl9vcHRpb25zLmZvbnRTaXplICogY2FudmFzU2l6ZS55O1xuICAgIGxldCBhY3R1YWxMaW5lSGVpZ2h0ID0gdGhpcy5fb3B0aW9ucy5saW5lSGVpZ2h0ICogYWN0dWFsRm9udFNpemU7XG5cbiAgICBpZiAodGhpcy5fb3B0aW9ucy5udW1iZXJGb3JtYXQgPT09IFwicmVsYXRpdmVcIikge1xuICAgICAgbWF4V2lkdGggKj0gcmVuZGVyZXIuZ2V0Q2FudmFzKCkud2lkdGg7XG4gICAgfVxuXG4gICAgLy8gQXBwbHkgdGV4dCBvcHRpb25zXG4gICAgdGhpcy5fYXBwbHlUZXh0T3B0aW9ucyhyZW5kZXJlciwgY29udGV4dCk7XG5cbiAgICBsZXQgYm91bmRpbmdCb3ggPSBuZXcgVmVjdG9yMigpO1xuXG4gICAgbGV0IGxpbmVzID0gdGhpcy5fb3B0aW9ucy50ZXh0LnNwbGl0KFwiXFxuXCIpO1xuICAgIGlmICh0eXBlb2YgbWF4V2lkdGggIT09IFwidW5kZWZpbmVkXCIpIHtcbiAgICAgIC8vIENhbGN1bGF0ZSB0aGUgYm91bmRpbmcgYm94XG4gICAgICBib3VuZGluZ0JveC54ID0gbWF4V2lkdGg7XG4gICAgICBsaW5lcyA9IHRoaXMuX2J1aWxkT3V0cHV0TGluZXMoY29udGV4dCwgbWF4V2lkdGgpO1xuICAgIH0gZWxzZSB7XG4gICAgICBmb3IgKGxpbmVOdW0gPSAwOyBsaW5lTnVtIDwgbGluZXMubGVuZ3RoOyBsaW5lTnVtKyspIHtcbiAgICAgICAgbGluZSA9IGxpbmVzW2xpbmVOdW1dO1xuICAgICAgICBib3VuZGluZ0JveC54ID0gTWF0aC5tYXgoYm91bmRpbmdCb3gueCwgY29udGV4dC5tZWFzdXJlVGV4dChsaW5lKS53aWR0aCk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgLy8gQ2FsY3VsYXRlIGJvdW5kaW5nYm94IGhlaWdodFxuICAgIGJvdW5kaW5nQm94LnkgPSBhY3R1YWxMaW5lSGVpZ2h0ICogbGluZXMubGVuZ3RoO1xuXG4gICAgLy8gUmVzaXplIHRoZSBjYW52YXNcbiAgICBjYW52YXMud2lkdGggPSBib3VuZGluZ0JveC54O1xuICAgIGNhbnZhcy5oZWlnaHQgPSBib3VuZGluZ0JveC55O1xuXG4gICAgLy8gR2V0IHRoZSBjb250ZXh0IGFnYWluXG4gICAgY29udGV4dCA9IGNhbnZhcy5nZXRDb250ZXh0KFwiMmRcIik7XG5cbiAgICAvLyBSZW5kZXIgYmFja2dyb3VuZCBjb2xvclxuICAgIGNvbnRleHQuZmlsbFN0eWxlID0gdGhpcy5fb3B0aW9ucy5iYWNrZ3JvdW5kQ29sb3IudG9SR0JBKCk7XG4gICAgY29udGV4dC5maWxsUmVjdCgwLCAwLCBjYW52YXMud2lkdGgsIGNhbnZhcy5oZWlnaHQpO1xuXG4gICAgLy8gQXBwbHkgdGV4dCBvcHRpb25zXG4gICAgdGhpcy5fYXBwbHlUZXh0T3B0aW9ucyhyZW5kZXJlciwgY29udGV4dCk7XG5cbiAgICAvLyBEcmF3IGxpbmVzXG4gICAgZm9yIChsaW5lTnVtID0gMDsgbGluZU51bSA8IGxpbmVzLmxlbmd0aDsgbGluZU51bSsrKSB7XG4gICAgICBsaW5lID0gbGluZXNbbGluZU51bV07XG4gICAgICB0aGlzLl9kcmF3VGV4dChjb250ZXh0LCBsaW5lLCBhY3R1YWxMaW5lSGVpZ2h0ICogbGluZU51bSk7XG4gICAgfVxuXG4gICAgcmV0dXJuIGNhbnZhcztcbiAgfVxuXG4gIC8qKlxuICAgKiBBcHBsaWVzIHRoZSB0ZXh0IG9wdGlvbnMgb24gdGhlIGdpdmVuIGNvbnRleHRcbiAgICogQHBhcmFtICB7UmVuZGVyZXJ9IHJlbmRlcmVyXG4gICAqIEBwYXJhbSAge1JlbmRlcmluZ0NvbnRleHQyRH0gY29udGV4dFxuICAgKiBAcHJpdmF0ZVxuICAgKi9cbiAgX2FwcGx5VGV4dE9wdGlvbnMgKHJlbmRlcmVyLCBjb250ZXh0KSB7XG4gICAgbGV0IGNhbnZhcyA9IHJlbmRlcmVyLmdldENhbnZhcygpO1xuICAgIGxldCBjYW52YXNTaXplID0gbmV3IFZlY3RvcjIoY2FudmFzLndpZHRoLCBjYW52YXMuaGVpZ2h0KTtcbiAgICBsZXQgYWN0dWFsRm9udFNpemUgPSB0aGlzLl9vcHRpb25zLmZvbnRTaXplICogY2FudmFzU2l6ZS55O1xuXG4gICAgY29udGV4dC5mb250ID0gdGhpcy5fb3B0aW9ucy5mb250V2VpZ2h0ICsgXCIgXCIgK1xuICAgICAgYWN0dWFsRm9udFNpemUgKyBcInB4IFwiICtcbiAgICAgIHRoaXMuX29wdGlvbnMuZm9udEZhbWlseTtcbiAgICBjb250ZXh0LnRleHRCYXNlbGluZSA9IFwidG9wXCI7XG4gICAgY29udGV4dC50ZXh0QWxpZ24gPSB0aGlzLl9vcHRpb25zLmFsaWdubWVudDtcbiAgICBjb250ZXh0LmZpbGxTdHlsZSA9IHRoaXMuX29wdGlvbnMuY29sb3IudG9SR0JBKCk7XG4gIH1cblxuICAvKipcbiAgICogSXRlcmF0ZSBvdmVyIGFsbCBsaW5lcyBhbmQgc3BsaXQgdGhlbSBpbnRvIG11bHRpcGxlIGxpbmVzLCBkZXBlbmRpbmdcbiAgICogb24gdGhlIHdpZHRoIHRoZXkgbmVlZFxuICAgKiBAcGFyYW0ge1JlbmRlcmluZ0NvbnRleHQyZH0gY29udGV4dFxuICAgKiBAcGFyYW0ge051bWJlcn0gbWF4V2lkdGhcbiAgICogQHJldHVybiB7QXJyYXkuPHN0cmluZz59XG4gICAqIEBwcml2YXRlXG4gICAqL1xuICBfYnVpbGRPdXRwdXRMaW5lcyAoY29udGV4dCwgbWF4V2lkdGgpIHtcbiAgICB2YXIgaW5wdXRMaW5lcyA9IHRoaXMuX29wdGlvbnMudGV4dC5zcGxpdChcIlxcblwiKTtcbiAgICB2YXIgb3V0cHV0TGluZXMgPSBbXTtcbiAgICB2YXIgY3VycmVudENoYXJzID0gW107XG5cbiAgICBmb3IgKHZhciBsaW5lTnVtID0gMDsgbGluZU51bSA8IGlucHV0TGluZXMubGVuZ3RoOyBsaW5lTnVtKyspIHtcbiAgICAgIHZhciBpbnB1dExpbmUgPSBpbnB1dExpbmVzW2xpbmVOdW1dO1xuICAgICAgdmFyIGxpbmVDaGFycyA9IGlucHV0TGluZS5zcGxpdChcIlwiKTtcblxuICAgICAgaWYgKGxpbmVDaGFycy5sZW5ndGggPT09IDApIHtcbiAgICAgICAgb3V0cHV0TGluZXMucHVzaChcIlwiKTtcbiAgICAgIH1cblxuICAgICAgZm9yICh2YXIgY2hhck51bSA9IDA7IGNoYXJOdW0gPCBsaW5lQ2hhcnMubGVuZ3RoOyBjaGFyTnVtKyspIHtcbiAgICAgICAgdmFyIGN1cnJlbnRDaGFyID0gbGluZUNoYXJzW2NoYXJOdW1dO1xuICAgICAgICBjdXJyZW50Q2hhcnMucHVzaChjdXJyZW50Q2hhcik7XG4gICAgICAgIHZhciBjdXJyZW50TGluZSA9IGN1cnJlbnRDaGFycy5qb2luKFwiXCIpO1xuICAgICAgICB2YXIgbGluZVdpZHRoID0gY29udGV4dC5tZWFzdXJlVGV4dChjdXJyZW50TGluZSkud2lkdGg7XG5cbiAgICAgICAgaWYgKGxpbmVXaWR0aCA+IG1heFdpZHRoICYmIGN1cnJlbnRDaGFycy5sZW5ndGggPT09IDEpIHtcbiAgICAgICAgICBvdXRwdXRMaW5lcy5wdXNoKGN1cnJlbnRDaGFyc1swXSk7XG4gICAgICAgICAgY3VycmVudENoYXJzID0gW107XG4gICAgICAgIH0gZWxzZSBpZiAobGluZVdpZHRoID4gbWF4V2lkdGgpIHtcbiAgICAgICAgICAvLyBSZW1vdmUgdGhlIGxhc3Qgd29yZFxuICAgICAgICAgIHZhciBsYXN0V29yZCA9IGN1cnJlbnRDaGFycy5wb3AoKTtcblxuICAgICAgICAgIC8vIEFkZCB0aGUgbGluZSwgY2xlYXIgdGhlIHdvcmRzXG4gICAgICAgICAgb3V0cHV0TGluZXMucHVzaChjdXJyZW50Q2hhcnMuam9pbihcIlwiKSk7XG4gICAgICAgICAgY3VycmVudENoYXJzID0gW107XG5cbiAgICAgICAgICAvLyBNYWtlIHN1cmUgdG8gdXNlIHRoZSBsYXN0IHdvcmQgZm9yIHRoZSBuZXh0IGxpbmVcbiAgICAgICAgICBjdXJyZW50Q2hhcnMgPSBbbGFzdFdvcmRdO1xuICAgICAgICB9IGVsc2UgaWYgKGNoYXJOdW0gPT09IGxpbmVDaGFycy5sZW5ndGggLSAxKSB7XG4gICAgICAgICAgLy8gQWRkIHRoZSBsaW5lLCBjbGVhciB0aGUgd29yZHNcbiAgICAgICAgICBvdXRwdXRMaW5lcy5wdXNoKGN1cnJlbnRDaGFycy5qb2luKFwiXCIpKTtcbiAgICAgICAgICBjdXJyZW50Q2hhcnMgPSBbXTtcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICAvLyBMaW5lIGVuZGVkLCBidXQgdGhlcmUncyB3b3JkcyBsZWZ0XG4gICAgICBpZiAoY3VycmVudENoYXJzLmxlbmd0aCkge1xuICAgICAgICBvdXRwdXRMaW5lcy5wdXNoKGN1cnJlbnRDaGFycy5qb2luKFwiXCIpKTtcbiAgICAgICAgY3VycmVudENoYXJzID0gW107XG4gICAgICB9XG5cbiAgICB9XG4gICAgcmV0dXJuIG91dHB1dExpbmVzO1xuICB9XG5cbiAgLyoqXG4gICAqIERyYXdzIHRoZSBnaXZlbiBsaW5lIG9udG8gdGhlIGdpdmVuIGNvbnRleHQgYXQgdGhlIGdpdmVuIFkgcG9zaXRpb25cbiAgICogQHBhcmFtICB7UmVuZGVyaW5nQ29udGV4dDJEfSBjb250ZXh0XG4gICAqIEBwYXJhbSAge1N0cmluZ30gdGV4dFxuICAgKiBAcGFyYW0gIHtOdW1iZXJ9IHlcbiAgICogQHByaXZhdGVcbiAgICovXG4gIF9kcmF3VGV4dCAoY29udGV4dCwgdGV4dCwgeSkge1xuICAgIHZhciBjYW52YXMgPSBjb250ZXh0LmNhbnZhcztcbiAgICBpZiAodGhpcy5fb3B0aW9ucy5hbGlnbm1lbnQgPT09IFwiY2VudGVyXCIpIHtcbiAgICAgIGNvbnRleHQuZmlsbFRleHQodGV4dCwgY2FudmFzLndpZHRoIC8gMiwgeSk7XG4gICAgfSBlbHNlIGlmICh0aGlzLl9vcHRpb25zLmFsaWdubWVudCA9PT0gXCJsZWZ0XCIpIHtcbiAgICAgIGNvbnRleHQuZmlsbFRleHQodGV4dCwgMCwgeSk7XG4gICAgfSBlbHNlIGlmICh0aGlzLl9vcHRpb25zLmFsaWdubWVudCA9PT0gXCJyaWdodFwiKSB7XG4gICAgICBjb250ZXh0LmZpbGxUZXh0KHRleHQsIGNhbnZhcy53aWR0aCwgeSk7XG4gICAgfVxuICB9XG59XG5cbmV4cG9ydCBkZWZhdWx0IFRleHRPcGVyYXRpb247XG4iLCJcInVzZSBzdHJpY3RcIjtcbi8qIVxuICogQ29weXJpZ2h0IChjKSAyMDEzLTIwMTUgOWVsZW1lbnRzIEdtYkhcbiAqXG4gKiBSZWxlYXNlZCB1bmRlciBBdHRyaWJ1dGlvbi1Ob25Db21tZXJjaWFsIDMuMCBVbnBvcnRlZFxuICogaHR0cDovL2NyZWF0aXZlY29tbW9ucy5vcmcvbGljZW5zZXMvYnktbmMvMy4wL1xuICpcbiAqIEZvciBjb21tZXJjaWFsIHVzZSwgcGxlYXNlIGNvbnRhY3QgdXMgYXQgY29udGFjdEA5ZWxlbWVudHMuY29tXG4gKi9cblxuaW1wb3J0IE9wZXJhdGlvbiBmcm9tIFwiLi9vcGVyYXRpb25cIjtcbmltcG9ydCBWZWN0b3IyIGZyb20gXCIuLi9saWIvbWF0aC92ZWN0b3IyXCI7XG5pbXBvcnQgU3RhY2tCbHVyIGZyb20gXCIuLi92ZW5kb3Ivc3RhY2stYmx1clwiO1xuXG4vKipcbiAqIEFuIG9wZXJhdGlvbiB0aGF0IGNhbiBjcm9wIG91dCBhIHBhcnQgb2YgdGhlIGltYWdlXG4gKlxuICogQGNsYXNzXG4gKiBAYWxpYXMgSW1nbHlLaXQuT3BlcmF0aW9ucy5UaWx0U2hpZnRPcGVyYXRpb25cbiAqIEBleHRlbmRzIEltZ2x5S2l0Lk9wZXJhdGlvblxuICovXG5jbGFzcyBUaWx0U2hpZnRPcGVyYXRpb24gZXh0ZW5kcyBPcGVyYXRpb24ge1xuICBjb25zdHJ1Y3RvciAoLi4uYXJncykge1xuICAgIHRoaXMuYXZhaWxhYmxlT3B0aW9ucyA9IHtcbiAgICAgIHN0YXJ0OiB7IHR5cGU6IFwidmVjdG9yMlwiLCBkZWZhdWx0OiBuZXcgVmVjdG9yMigwLjAsIDAuNSkgfSxcbiAgICAgIGVuZDogeyB0eXBlOiBcInZlY3RvcjJcIiwgZGVmYXVsdDogbmV3IFZlY3RvcjIoMS4wLCAwLjUpIH0sXG4gICAgICBibHVyUmFkaXVzOiB7IHR5cGU6IFwibnVtYmVyXCIsIGRlZmF1bHQ6IDMwIH0sXG4gICAgICBncmFkaWVudFJhZGl1czogeyB0eXBlOiBcIm51bWJlclwiLCBkZWZhdWx0OiA1MCB9XG4gICAgfTtcblxuICAgIC8qKlxuICAgICAqIFRoZSBmcmFnbWVudCBzaGFkZXIgdXNlZCBmb3IgdGhpcyBvcGVyYXRpb25cbiAgICAgKiBAaW50ZXJuYWwgQmFzZWQgb24gZXZhbncncyBnbGZ4LmpzIHRpbHQgc2hpZnQgc2hhZGVyOlxuICAgICAqICAgICAgICAgICBodHRwczovL2dpdGh1Yi5jb20vZXZhbncvZ2xmeC5qcy9ibG9iL21hc3Rlci9zcmMvZmlsdGVycy9ibHVyL3RpbHRzaGlmdC5qc1xuICAgICAqL1xuICAgIHRoaXMuZnJhZ21lbnRTaGFkZXIgPSBgXG4gICAgICBwcmVjaXNpb24gbWVkaXVtcCBmbG9hdDtcbiAgICAgIHVuaWZvcm0gc2FtcGxlcjJEIHVfaW1hZ2U7XG4gICAgICB1bmlmb3JtIGZsb2F0IGJsdXJSYWRpdXM7XG4gICAgICB1bmlmb3JtIGZsb2F0IGdyYWRpZW50UmFkaXVzO1xuICAgICAgdW5pZm9ybSB2ZWMyIHN0YXJ0O1xuICAgICAgdW5pZm9ybSB2ZWMyIGVuZDtcbiAgICAgIHVuaWZvcm0gdmVjMiBkZWx0YTtcbiAgICAgIHVuaWZvcm0gdmVjMiB0ZXhTaXplO1xuICAgICAgdmFyeWluZyB2ZWMyIHZfdGV4Q29vcmQ7XG5cbiAgICAgIGZsb2F0IHJhbmRvbSh2ZWMzIHNjYWxlLCBmbG9hdCBzZWVkKSB7XG4gICAgICAgIHJldHVybiBmcmFjdChzaW4oZG90KGdsX0ZyYWdDb29yZC54eXogKyBzZWVkLCBzY2FsZSkpICogNDM3NTguNTQ1MyArIHNlZWQpO1xuICAgICAgfVxuXG4gICAgICB2b2lkIG1haW4oKSB7XG4gICAgICAgICAgdmVjNCBjb2xvciA9IHZlYzQoMC4wKTtcbiAgICAgICAgICBmbG9hdCB0b3RhbCA9IDAuMDtcblxuICAgICAgICAgIGZsb2F0IG9mZnNldCA9IHJhbmRvbSh2ZWMzKDEyLjk4OTgsIDc4LjIzMywgMTUxLjcxODIpLCAwLjApO1xuXG4gICAgICAgICAgdmVjMiBub3JtYWwgPSBub3JtYWxpemUodmVjMihzdGFydC55IC0gZW5kLnksIGVuZC54IC0gc3RhcnQueCkpO1xuICAgICAgICAgIGZsb2F0IHJhZGl1cyA9IHNtb290aHN0ZXAoMC4wLCAxLjAsIGFicyhkb3Qodl90ZXhDb29yZCAqIHRleFNpemUgLSBzdGFydCwgbm9ybWFsKSkgLyBncmFkaWVudFJhZGl1cykgKiBibHVyUmFkaXVzO1xuICAgICAgICAgIGZvciAoZmxvYXQgdCA9IC0zMC4wOyB0IDw9IDMwLjA7IHQrKykge1xuICAgICAgICAgICAgICBmbG9hdCBwZXJjZW50ID0gKHQgKyBvZmZzZXQgLSAwLjUpIC8gMzAuMDtcbiAgICAgICAgICAgICAgZmxvYXQgd2VpZ2h0ID0gMS4wIC0gYWJzKHBlcmNlbnQpO1xuICAgICAgICAgICAgICB2ZWM0IHNhbXBsZSA9IHRleHR1cmUyRCh1X2ltYWdlLCB2X3RleENvb3JkICsgZGVsdGEgKiBwZXJjZW50ICogcmFkaXVzIC8gdGV4U2l6ZSk7XG5cbiAgICAgICAgICAgICAgc2FtcGxlLnJnYiAqPSBzYW1wbGUuYTtcblxuICAgICAgICAgICAgICBjb2xvciArPSBzYW1wbGUgKiB3ZWlnaHQ7XG4gICAgICAgICAgICAgIHRvdGFsICs9IHdlaWdodDtcbiAgICAgICAgICB9XG5cbiAgICAgICAgICBnbF9GcmFnQ29sb3IgPSBjb2xvciAvIHRvdGFsO1xuICAgICAgICAgIGdsX0ZyYWdDb2xvci5yZ2IgLz0gZ2xfRnJhZ0NvbG9yLmEgKyAwLjAwMDAxO1xuICAgICAgfVxuICAgIGA7XG5cbiAgICBzdXBlciguLi5hcmdzKTtcblxuICAgIHRoaXMuX2NhY2hlZEJsdXJyZWRDYW52YXMgPSBudWxsO1xuICAgIHRoaXMuX2xhc3RCbHVyUmFkaXVzID0gdGhpcy5fb3B0aW9ucy5ibHVyUmFkaXVzO1xuICAgIHRoaXMuX2xhc3RHcmFkaWVudFJhZGl1cyA9IHRoaXMuX29wdGlvbnMuZ3JhZGllbnRSYWRpdXM7XG4gIH1cblxuICAvKipcbiAgICogQSB1bmlxdWUgc3RyaW5nIHRoYXQgaWRlbnRpZmllcyB0aGlzIG9wZXJhdGlvbi4gQ2FuIGJlIHVzZWQgdG8gc2VsZWN0XG4gICAqIG9wZXJhdGlvbnMuXG4gICAqIEB0eXBlIHtTdHJpbmd9XG4gICAqL1xuICBnZXQgaWRlbnRpZmllciAoKSB7XG4gICAgcmV0dXJuIFwidGlsdC1zaGlmdFwiO1xuICB9XG5cbiAgLyoqXG4gICAqIENyb3BzIHRoaXMgaW1hZ2UgdXNpbmcgV2ViR0xcbiAgICogQHBhcmFtICB7V2ViR0xSZW5kZXJlcn0gcmVuZGVyZXJcbiAgICovXG4gIC8qIGlzdGFuYnVsIGlnbm9yZSBuZXh0ICovXG4gIF9yZW5kZXJXZWJHTCAocmVuZGVyZXIpIHtcbiAgICB2YXIgY2FudmFzID0gcmVuZGVyZXIuZ2V0Q2FudmFzKCk7XG4gICAgdmFyIGNhbnZhc1NpemUgPSBuZXcgVmVjdG9yMihjYW52YXMud2lkdGgsIGNhbnZhcy5oZWlnaHQpO1xuXG4gICAgdmFyIHN0YXJ0ID0gdGhpcy5fb3B0aW9ucy5zdGFydC5jbG9uZSgpO1xuICAgIHZhciBlbmQgPSB0aGlzLl9vcHRpb25zLmVuZC5jbG9uZSgpO1xuXG4gICAgaWYgKHRoaXMuX29wdGlvbnMubnVtYmVyRm9ybWF0ID09PSBcInJlbGF0aXZlXCIpIHtcbiAgICAgIHN0YXJ0Lm11bHRpcGx5KGNhbnZhc1NpemUpO1xuICAgICAgZW5kLm11bHRpcGx5KGNhbnZhc1NpemUpO1xuICAgIH1cblxuICAgIHN0YXJ0LnkgPSBjYW52YXNTaXplLnkgLSBzdGFydC55O1xuICAgIGVuZC55ID0gY2FudmFzU2l6ZS55IC0gZW5kLnk7XG5cbiAgICB2YXIgZGVsdGEgPSBlbmQuY2xvbmUoKS5zdWJ0cmFjdChzdGFydCk7XG4gICAgdmFyIGQgPSBNYXRoLnNxcnQoZGVsdGEueCAqIGRlbHRhLnggKyBkZWx0YS55ICogZGVsdGEueSk7XG5cbiAgICB2YXIgdW5pZm9ybXMgPSB7XG4gICAgICBibHVyUmFkaXVzOiB7IHR5cGU6IFwiZlwiLCB2YWx1ZTogdGhpcy5fb3B0aW9ucy5ibHVyUmFkaXVzIH0sXG4gICAgICBncmFkaWVudFJhZGl1czogeyB0eXBlOiBcImZcIiwgdmFsdWU6IHRoaXMuX29wdGlvbnMuZ3JhZGllbnRSYWRpdXMgfSxcbiAgICAgIHN0YXJ0OiB7IHR5cGU6IFwiMmZcIiwgdmFsdWU6IFtzdGFydC54LCBzdGFydC55XSB9LFxuICAgICAgZW5kOiB7IHR5cGU6IFwiMmZcIiwgdmFsdWU6IFtlbmQueCwgZW5kLnldIH0sXG4gICAgICBkZWx0YTogeyB0eXBlOiBcIjJmXCIsIHZhbHVlOiBbZGVsdGEueCAvIGQsIGRlbHRhLnkgLyBkXSB9LFxuICAgICAgdGV4U2l6ZTogeyB0eXBlOiBcIjJmXCIsIHZhbHVlOiBbY2FudmFzLndpZHRoLCBjYW52YXMuaGVpZ2h0XSB9XG4gICAgfTtcblxuICAgIHJlbmRlcmVyLnJ1blNoYWRlcihudWxsLCB0aGlzLmZyYWdtZW50U2hhZGVyLCB7XG4gICAgICB1bmlmb3JtczogdW5pZm9ybXNcbiAgICB9KTtcblxuICAgIHVuaWZvcm1zLmRlbHRhLnZhbHVlID0gWy1kZWx0YS55IC8gZCwgZGVsdGEueCAvIGRdO1xuXG4gICAgcmVuZGVyZXIucnVuU2hhZGVyKG51bGwsIHRoaXMuZnJhZ21lbnRTaGFkZXIsIHtcbiAgICAgIHVuaWZvcm1zOiB1bmlmb3Jtc1xuICAgIH0pO1xuICB9XG5cbiAgLyoqXG4gICAqIENyb3BzIHRoZSBpbWFnZSB1c2luZyBDYW52YXMyRFxuICAgKiBAcGFyYW0gIHtDYW52YXNSZW5kZXJlcn0gcmVuZGVyZXJcbiAgICovXG4gIF9yZW5kZXJDYW52YXMgKHJlbmRlcmVyKSB7XG4gICAgdmFyIGNhbnZhcyA9IHJlbmRlcmVyLmdldENhbnZhcygpO1xuXG4gICAgbGV0IG9wdGlvbnNDaGFuZ2VkID0gdGhpcy5fb3B0aW9ucy5ibHVyUmFkaXVzICE9PSB0aGlzLl9sYXN0Qmx1clJhZGl1cyB8fFxuICAgICAgdGhpcy5fb3B0aW9ucy5ncmFkaWVudFJhZGl1cyAhPT0gdGhpcy5fbGFzdEdyYWRpZW50UmFkaXVzO1xuICAgIGxldCBibHVycnlDYW52YXM7XG4gICAgaWYgKG9wdGlvbnNDaGFuZ2VkIHx8IHRoaXMuX2NhY2hlZEJsdXJyZWRDYW52YXMgPT09IG51bGwpIHtcbiAgICAgIC8vIEJsdXIgYW5kIGNhY2hlIGNhbnZhc1xuICAgICAgYmx1cnJ5Q2FudmFzID0gdGhpcy5fYmx1ckNhbnZhcyhyZW5kZXJlcik7XG4gICAgICB0aGlzLl9jYWNoZWRCbHVycmVkQ2FudmFzID0gYmx1cnJ5Q2FudmFzO1xuICAgICAgdGhpcy5fbGFzdEJsdXJSYWRpdXMgPSB0aGlzLl9vcHRpb25zLmJsdXJSYWRpdXM7XG4gICAgICB0aGlzLl9sYXN0R3JhZGllbnRSYWRpdXMgPSB0aGlzLl9vcHRpb25zLmdyYWRpZW50UmFkaXVzO1xuICAgIH0gZWxzZSB7XG4gICAgICAvLyBVc2UgY2FjaGVkIGNhbnZhc1xuICAgICAgYmx1cnJ5Q2FudmFzID0gdGhpcy5fY2FjaGVkQmx1cnJlZENhbnZhcztcbiAgICB9XG5cbiAgICB2YXIgbWFza0NhbnZhcyA9IHRoaXMuX2NyZWF0ZU1hc2socmVuZGVyZXIpO1xuXG4gICAgdGhpcy5fYXBwbHlNYXNrKGNhbnZhcywgYmx1cnJ5Q2FudmFzLCBtYXNrQ2FudmFzKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBDcmVhdGVzIGEgYmx1cnJlZCBjb3B5IG9mIHRoZSBjYW52YXNcbiAgICogQHBhcmFtICB7Q2FudmFzUmVuZGVyZXJ9IHJlbmRlcmVyXG4gICAqIEByZXR1cm4ge0NhbnZhc31cbiAgICogQHByaXZhdGVcbiAgICovXG4gIF9ibHVyQ2FudmFzIChyZW5kZXJlcikge1xuICAgIHZhciBuZXdDYW52YXMgPSByZW5kZXJlci5jbG9uZUNhbnZhcygpO1xuICAgIHZhciBibHVycnlDb250ZXh0ID0gbmV3Q2FudmFzLmdldENvbnRleHQoXCIyZFwiKTtcbiAgICB2YXIgYmx1cnJ5SW1hZ2VEYXRhID0gYmx1cnJ5Q29udGV4dC5nZXRJbWFnZURhdGEoMCwgMCwgbmV3Q2FudmFzLndpZHRoLCBuZXdDYW52YXMuaGVpZ2h0KTtcbiAgICBTdGFja0JsdXIuc3RhY2tCbHVyQ2FudmFzUkdCQShibHVycnlJbWFnZURhdGEsIDAsIDAsIG5ld0NhbnZhcy53aWR0aCwgbmV3Q2FudmFzLmhlaWdodCwgdGhpcy5fb3B0aW9ucy5ibHVyUmFkaXVzKTtcbiAgICBibHVycnlDb250ZXh0LnB1dEltYWdlRGF0YShibHVycnlJbWFnZURhdGEsIDAsIDApO1xuXG4gICAgcmV0dXJuIG5ld0NhbnZhcztcbiAgfVxuXG4gIC8qKlxuICAgKiBDcmVhdGVzIHRoZSBtYXNrIGNhbnZhc1xuICAgKiBAcGFyYW0gIHtDYW52YXNSZW5kZXJlcn0gcmVuZGVyZXJcbiAgICogQHJldHVybiB7Q2FudmFzfVxuICAgKiBAcHJpdmF0ZVxuICAgKi9cbiAgX2NyZWF0ZU1hc2sgKHJlbmRlcmVyKSB7XG4gICAgdmFyIGNhbnZhcyA9IHJlbmRlcmVyLmdldENhbnZhcygpO1xuXG4gICAgdmFyIGNhbnZhc1NpemUgPSBuZXcgVmVjdG9yMihjYW52YXMud2lkdGgsIGNhbnZhcy5oZWlnaHQpO1xuICAgIHZhciBncmFkaWVudFJhZGl1cyA9IHRoaXMuX29wdGlvbnMuZ3JhZGllbnRSYWRpdXM7XG5cbiAgICB2YXIgbWFza0NhbnZhcyA9IHJlbmRlcmVyLmNyZWF0ZUNhbnZhcyhjYW52YXMud2lkdGgsIGNhbnZhcy5oZWlnaHQpO1xuICAgIHZhciBtYXNrQ29udGV4dCA9IG1hc2tDYW52YXMuZ2V0Q29udGV4dChcIjJkXCIpO1xuXG4gICAgdmFyIHN0YXJ0ID0gdGhpcy5fb3B0aW9ucy5zdGFydC5jbG9uZSgpO1xuICAgIHZhciBlbmQgPSB0aGlzLl9vcHRpb25zLmVuZC5jbG9uZSgpO1xuXG4gICAgaWYgKHRoaXMuX29wdGlvbnMubnVtYmVyRm9ybWF0ID09PSBcInJlbGF0aXZlXCIpIHtcbiAgICAgIHN0YXJ0Lm11bHRpcGx5KGNhbnZhc1NpemUpO1xuICAgICAgZW5kLm11bHRpcGx5KGNhbnZhc1NpemUpO1xuICAgIH1cblxuICAgIGxldCBkaXN0ID0gZW5kLmNsb25lKCkuc3VidHJhY3Qoc3RhcnQpO1xuICAgIGxldCBtaWRkbGUgPSBzdGFydC5jbG9uZSgpLmFkZChkaXN0LmNsb25lKCkuZGl2aWRlKDIpKTtcblxuICAgIGxldCB0b3RhbERpc3QgPSBNYXRoLnNxcnQoTWF0aC5wb3coZGlzdC54LCAyKSArIE1hdGgucG93KGRpc3QueSwgMikpO1xuICAgIGxldCBmYWN0b3IgPSBkaXN0LmNsb25lKCkuZGl2aWRlKHRvdGFsRGlzdCk7XG5cbiAgICBsZXQgZ3JhZGllbnRTdGFydCA9IG1pZGRsZS5jbG9uZSgpXG4gICAgICAuYWRkKGdyYWRpZW50UmFkaXVzICogZmFjdG9yLnksIC1ncmFkaWVudFJhZGl1cyAqIGZhY3Rvci54KTtcbiAgICBsZXQgZ3JhZGllbnRFbmQgPSBtaWRkbGUuY2xvbmUoKVxuICAgICAgLmFkZCgtZ3JhZGllbnRSYWRpdXMgKiBmYWN0b3IueSwgZ3JhZGllbnRSYWRpdXMgKiBmYWN0b3IueCk7XG5cbiAgICAvLyBCdWlsZCBncmFkaWVudFxuICAgIHZhciBncmFkaWVudCA9IG1hc2tDb250ZXh0LmNyZWF0ZUxpbmVhckdyYWRpZW50KFxuICAgICAgZ3JhZGllbnRTdGFydC54LCBncmFkaWVudFN0YXJ0LnksXG4gICAgICBncmFkaWVudEVuZC54LCAgIGdyYWRpZW50RW5kLnlcbiAgICApO1xuICAgIGdyYWRpZW50LmFkZENvbG9yU3RvcCgwLCBcIiMwMDAwMDBcIik7XG4gICAgZ3JhZGllbnQuYWRkQ29sb3JTdG9wKDAuNSwgXCIjRkZGRkZGXCIpO1xuICAgIGdyYWRpZW50LmFkZENvbG9yU3RvcCgxLCBcIiMwMDAwMDBcIik7XG5cbiAgICAvLyBEcmF3IGdyYWRpZW50XG4gICAgbWFza0NvbnRleHQuZmlsbFN0eWxlID0gZ3JhZGllbnQ7XG4gICAgbWFza0NvbnRleHQuZmlsbFJlY3QoMCwgMCwgY2FudmFzLndpZHRoLCBjYW52YXMuaGVpZ2h0KTtcblxuICAgIHJldHVybiBtYXNrQ2FudmFzO1xuICB9XG5cbiAgLyoqXG4gICAqIEFwcGxpZXMgdGhlIGJsdXIgYW5kIG1hc2sgdG8gdGhlIGlucHV0IGNhbnZhc1xuICAgKiBAcGFyYW0gIHtDYW52YXN9IGlucHV0Q2FudmFzXG4gICAqIEBwYXJhbSAge0NhbnZhc30gYmx1cnJ5Q2FudmFzXG4gICAqIEBwYXJhbSAge0NhbnZhc30gbWFza0NhbnZhc1xuICAgKiBAcHJpdmF0ZVxuICAgKi9cbiAgX2FwcGx5TWFzayAoaW5wdXRDYW52YXMsIGJsdXJyeUNhbnZhcywgbWFza0NhbnZhcykge1xuICAgIHZhciBpbnB1dENvbnRleHQgPSBpbnB1dENhbnZhcy5nZXRDb250ZXh0KFwiMmRcIik7XG4gICAgdmFyIGJsdXJyeUNvbnRleHQgPSBibHVycnlDYW52YXMuZ2V0Q29udGV4dChcIjJkXCIpO1xuICAgIHZhciBtYXNrQ29udGV4dCA9IG1hc2tDYW52YXMuZ2V0Q29udGV4dChcIjJkXCIpO1xuXG4gICAgdmFyIGlucHV0SW1hZ2VEYXRhID0gaW5wdXRDb250ZXh0LmdldEltYWdlRGF0YSgwLCAwLCBpbnB1dENhbnZhcy53aWR0aCwgaW5wdXRDYW52YXMuaGVpZ2h0KTtcbiAgICB2YXIgcGl4ZWxzID0gaW5wdXRJbWFnZURhdGEuZGF0YTtcbiAgICB2YXIgYmx1cnJ5UGl4ZWxzID0gYmx1cnJ5Q29udGV4dC5nZXRJbWFnZURhdGEoMCwgMCwgaW5wdXRDYW52YXMud2lkdGgsIGlucHV0Q2FudmFzLmhlaWdodCkuZGF0YTtcbiAgICB2YXIgbWFza1BpeGVscyA9IG1hc2tDb250ZXh0LmdldEltYWdlRGF0YSgwLCAwLCBpbnB1dENhbnZhcy53aWR0aCwgaW5wdXRDYW52YXMuaGVpZ2h0KS5kYXRhO1xuXG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBtYXNrUGl4ZWxzLmxlbmd0aDsgaSsrKSB7XG4gICAgICBsZXQgYWxwaGEgPSBtYXNrUGl4ZWxzW2ldIC8gMjU1O1xuICAgICAgcGl4ZWxzW2ldID0gYWxwaGEgKiBwaXhlbHNbaV0gKyAoMSAtIGFscGhhKSAqIGJsdXJyeVBpeGVsc1tpXTtcbiAgICB9XG5cbiAgICBpbnB1dENvbnRleHQucHV0SW1hZ2VEYXRhKGlucHV0SW1hZ2VEYXRhLCAwLCAwKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBTZXRzIHRoZSBkaXJ0eSBzdGF0ZSBvZiB0aGlzIG9wZXJhdGlvblxuICAgKiBAcGFyYW0ge0Jvb2xlYW59IGRpcnR5XG4gICAqIEBjb21tZW50IFNpbmNlIGJsdXIgb3BlcmF0aW9ucyBkbyBzZXBlcmF0ZSBjYWNoaW5nIG9mIHRoZVxuICAgKiAgICAgICAgICBibHVycmVkIGNhbnZhcywgd2UgbmVlZCB0byBpbnZhbGlkYXRlIHRoZSBjYWNoZSB3aGVuIHRoZVxuICAgKiAgICAgICAgICBkaXJ0eSBzdGF0ZSBjaGFuZ2VzLlxuICAgKi9cbiAgc2V0IGRpcnR5IChkaXJ0eSkge1xuICAgIHN1cGVyLmRpcnR5ID0gZGlydHk7XG4gICAgdGhpcy5fY2FjaGVkQmx1cnJlZENhbnZhcyA9IG51bGw7XG4gIH1cblxuICAvKipcbiAgICogUmV0dXJucyB0aGUgZGlydHkgc3RhdGVcbiAgICogQHR5cGUge0Jvb2xlYW59XG4gICAqL1xuICBnZXQgZGlydHkgKCkge1xuICAgIHJldHVybiBzdXBlci5kaXJ0eTtcbiAgfVxufVxuXG5leHBvcnQgZGVmYXVsdCBUaWx0U2hpZnRPcGVyYXRpb247XG4iLCJcInVzZSBzdHJpY3RcIjtcbi8qIVxuICogQ29weXJpZ2h0IChjKSAyMDEzLTIwMTUgOWVsZW1lbnRzIEdtYkhcbiAqXG4gKiBSZWxlYXNlZCB1bmRlciBBdHRyaWJ1dGlvbi1Ob25Db21tZXJjaWFsIDMuMCBVbnBvcnRlZFxuICogaHR0cDovL2NyZWF0aXZlY29tbW9ucy5vcmcvbGljZW5zZXMvYnktbmMvMy4wL1xuICpcbiAqIEZvciBjb21tZXJjaWFsIHVzZSwgcGxlYXNlIGNvbnRhY3QgdXMgYXQgY29udGFjdEA5ZWxlbWVudHMuY29tXG4gKi9cbmltcG9ydCBSZW5kZXJlciBmcm9tIFwiLi9yZW5kZXJlclwiO1xuaW1wb3J0IFZlY3RvcjIgZnJvbSBcIi4uL2xpYi9tYXRoL3ZlY3RvcjJcIjtcblxuLyoqXG4gKiBAY2xhc3NcbiAqIEBhbGlhcyBJbWdseUtpdC5DYW52YXNSZW5kZXJlclxuICogQGV4dGVuZHMge0ltZ2x5S2l0LlJlbmRlcmVyfVxuICogQHByaXZhdGVcbiAqL1xuY2xhc3MgQ2FudmFzUmVuZGVyZXIgZXh0ZW5kcyBSZW5kZXJlciB7XG4gIC8qKlxuICAgKiBBIHVuaXF1ZSBzdHJpbmcgdGhhdCBpZGVudGlmaWVzIHRoaXMgcmVuZGVyZXJcbiAgICogQHR5cGUge1N0cmluZ31cbiAgICovXG4gIHN0YXRpYyBnZXQgaWRlbnRpZmllciAoKSB7XG4gICAgcmV0dXJuIFwiY2FudmFzXCI7XG4gIH1cblxuICAvKipcbiAgICogQ2FjaGVzIHRoZSBjdXJyZW50IGNhbnZhcyBjb250ZW50IGZvciB0aGUgZ2l2ZW4gaWRlbnRpZmllclxuICAgKiBAcGFyYW0ge1N0cmluZ30gaWRlbnRpZmllclxuICAgKi9cbiAgY2FjaGUgKGlkZW50aWZpZXIpIHtcbiAgICB0aGlzLl9jYWNoZVtpZGVudGlmaWVyXSA9IHtcbiAgICAgIGRhdGE6IHRoaXMuX2NvbnRleHQuZ2V0SW1hZ2VEYXRhKDAsIDAsIHRoaXMuX2NhbnZhcy53aWR0aCwgdGhpcy5fY2FudmFzLmhlaWdodCksXG4gICAgICBzaXplOiBuZXcgVmVjdG9yMih0aGlzLl9jYW52YXMud2lkdGgsIHRoaXMuX2NhbnZhcy5oZWlnaHQpXG4gICAgfTtcbiAgfVxuXG4gIC8qKlxuICAgKiBEcmF3cyB0aGUgc3RvcmVkIHRleHR1cmUgLyBpbWFnZSBkYXRhIGZvciB0aGUgZ2l2ZW4gaWRlbnRpZmllclxuICAgKiBAcGFyYW0ge1N0cmluZ30gaWRlbnRpZmllclxuICAgKi9cbiAgZHJhd0NhY2hlZCAoaWRlbnRpZmllcikge1xuICAgIGxldCB7IGRhdGEsIHNpemUgfSA9IHRoaXMuX2NhY2hlW2lkZW50aWZpZXJdO1xuICAgIHRoaXMuX2NhbnZhcy53aWR0aCA9IHNpemUueDtcbiAgICB0aGlzLl9jYW52YXMuaGVpZ2h0ID0gc2l6ZS55O1xuICAgIHRoaXMuX2NvbnRleHQucHV0SW1hZ2VEYXRhKGRhdGEsIDAsIDApO1xuICB9XG5cbiAgLyoqXG4gICAqIENoZWNrcyB3aGV0aGVyIHRoaXMgdHlwZSBvZiByZW5kZXJlciBpcyBzdXBwb3J0ZWQgaW4gdGhlIGN1cnJlbnQgZW52aXJvbm1lbnRcbiAgICogQGFic3RyYWN0XG4gICAqIEByZXR1cm5zIHtib29sZWFufVxuICAgKi9cbiAgc3RhdGljIGlzU3VwcG9ydGVkICgpIHtcbiAgICB2YXIgZWxlbSA9IHRoaXMucHJvdG90eXBlLmNyZWF0ZUNhbnZhcygpO1xuICAgIHJldHVybiAhIShlbGVtLmdldENvbnRleHQgJiYgZWxlbS5nZXRDb250ZXh0KFwiMmRcIikpO1xuICB9XG5cbiAgLyoqXG4gICAqIEdldHMgdGhlIHJlbmRlcmluZyBjb250ZXh0IGZyb20gdGhlIENhbnZhXG4gICAqIEByZXR1cm4ge1JlbmRlcmluZ0NvbnRleHR9XG4gICAqIEBhYnN0cmFjdFxuICAgKi9cbiAgX2dldENvbnRleHQgKCkge1xuICAgIC8qIGlzdGFuYnVsIGlnbm9yZSBuZXh0ICovXG4gICAgcmV0dXJuIHRoaXMuX2NhbnZhcy5nZXRDb250ZXh0KFwiMmRcIik7XG4gIH1cblxuICAvKipcbiAgICogRHJhd3MgdGhlIGdpdmVuIGltYWdlIG9uIHRoZSBjYW52YXNcbiAgICogQHBhcmFtICB7SW1hZ2V9IGltYWdlXG4gICAqL1xuICBkcmF3SW1hZ2UgKGltYWdlKSB7XG4gICAgdGhpcy5fY29udGV4dC5kcmF3SW1hZ2UoaW1hZ2UsIDAsIDAsIGltYWdlLndpZHRoLCBpbWFnZS5oZWlnaHQsIDAsIDAsIHRoaXMuX2NhbnZhcy53aWR0aCwgdGhpcy5fY2FudmFzLmhlaWdodCk7XG4gIH1cblxuICAvKipcbiAgICogUmVzaXplcyB0aGUgY3VycmVudCBjYW52YXMgcGljdHVyZSB0byB0aGUgZ2l2ZW4gZGltZW5zaW9uc1xuICAgKiBAcGFyYW0gIHtWZWN0b3IyfSBkaW1lbnNpb25zXG4gICAqIEByZXR1cm4ge1Byb21pc2V9XG4gICAqL1xuICByZXNpemVUbyAoZGltZW5zaW9ucykge1xuICAgIC8vIENyZWF0ZSBhIHRlbXBvcmFyeSBjYW52YXMgdG8gZHJhdyB0b1xuICAgIHZhciBuZXdDYW52YXMgPSB0aGlzLmNyZWF0ZUNhbnZhcygpO1xuICAgIG5ld0NhbnZhcy53aWR0aCA9IGRpbWVuc2lvbnMueDtcbiAgICBuZXdDYW52YXMuaGVpZ2h0ID0gZGltZW5zaW9ucy55O1xuICAgIHZhciBuZXdDb250ZXh0ID0gbmV3Q2FudmFzLmdldENvbnRleHQoXCIyZFwiKTtcblxuICAgIC8vIERyYXcgdGhlIHNvdXJjZSBjYW52YXMgb250byB0aGUgbmV3IG9uZVxuICAgIG5ld0NvbnRleHQuZHJhd0ltYWdlKHRoaXMuX2NhbnZhcyxcbiAgICAgIDAsIDAsXG4gICAgICB0aGlzLl9jYW52YXMud2lkdGgsXG4gICAgICB0aGlzLl9jYW52YXMuaGVpZ2h0LFxuICAgICAgMCwgMCxcbiAgICAgIG5ld0NhbnZhcy53aWR0aCxcbiAgICAgIG5ld0NhbnZhcy5oZWlnaHQpO1xuXG4gICAgLy8gU2V0IHRoZSBuZXcgY2FudmFzIGFuZCBjb250ZXh0XG4gICAgdGhpcy5zZXRDYW52YXMobmV3Q2FudmFzKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBSZXR1cm5zIGEgY2xvbmVkIHZlcnNpb24gb2YgdGhlIGN1cnJlbnQgY2FudmFzXG4gICAqIEByZXR1cm4ge0NhbnZhc31cbiAgICovXG4gIGNsb25lQ2FudmFzICgpIHtcbiAgICB2YXIgY2FudmFzID0gdGhpcy5jcmVhdGVDYW52YXMoKTtcbiAgICB2YXIgY29udGV4dCA9IGNhbnZhcy5nZXRDb250ZXh0KFwiMmRcIik7XG5cbiAgICAvLyBSZXNpemUgdGhlIGNhbnZhc1xuICAgIGNhbnZhcy53aWR0aCA9IHRoaXMuX2NhbnZhcy53aWR0aDtcbiAgICBjYW52YXMuaGVpZ2h0ID0gdGhpcy5fY2FudmFzLmhlaWdodDtcblxuICAgIC8vIERyYXcgdGhlIGN1cnJlbnQgY2FudmFzIG9uIHRoZSBuZXcgb25lXG4gICAgY29udGV4dC5kcmF3SW1hZ2UodGhpcy5fY2FudmFzLCAwLCAwKTtcblxuICAgIHJldHVybiBjYW52YXM7XG4gIH1cbn1cblxuZXhwb3J0IGRlZmF1bHQgQ2FudmFzUmVuZGVyZXI7XG4iLCIvKmpzaGludCB1bnVzZWQ6ZmFsc2UgKi9cblwidXNlIHN0cmljdFwiO1xuLyohXG4gKiBDb3B5cmlnaHQgKGMpIDIwMTMtMjAxNSA5ZWxlbWVudHMgR21iSFxuICpcbiAqIFJlbGVhc2VkIHVuZGVyIEF0dHJpYnV0aW9uLU5vbkNvbW1lcmNpYWwgMy4wIFVucG9ydGVkXG4gKiBodHRwOi8vY3JlYXRpdmVjb21tb25zLm9yZy9saWNlbnNlcy9ieS1uYy8zLjAvXG4gKlxuICogRm9yIGNvbW1lcmNpYWwgdXNlLCBwbGVhc2UgY29udGFjdCB1cyBhdCBjb250YWN0QDllbGVtZW50cy5jb21cbiAqL1xuXG5pbXBvcnQgVmVjdG9yMiBmcm9tIFwiLi4vbGliL21hdGgvdmVjdG9yMlwiO1xuaW1wb3J0IEV2ZW50RW1pdHRlciBmcm9tIFwiLi4vbGliL2V2ZW50LWVtaXR0ZXJcIjtcblxuLyoqXG4gKiBAY2xhc3NcbiAqIEBhbGlhcyBJbWdseUtpdC5SZW5kZXJlclxuICogQHBhcmFtIHtWZWN0b3IyfSBkaW1lbnNpb25zXG4gKiBAcHJpdmF0ZVxuICovXG5jbGFzcyBSZW5kZXJlciBleHRlbmRzIEV2ZW50RW1pdHRlciB7XG4gIGNvbnN0cnVjdG9yIChkaW1lbnNpb25zLCBjYW52YXMpIHtcbiAgICBzdXBlcigpO1xuXG4gICAgLyoqXG4gICAgICogQHR5cGUge0NhbnZhc31cbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqL1xuICAgIHRoaXMuX2NhbnZhcyA9IGNhbnZhcyB8fCB0aGlzLmNyZWF0ZUNhbnZhcygpO1xuXG4gICAgaWYgKCFjYW52YXMpIHtcbiAgICAgIHRoaXMuc2V0U2l6ZShkaW1lbnNpb25zKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBAdHlwZSB7UmVuZGVyaW5nQ29udGV4dH1cbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqL1xuICAgIHRoaXMuX2NvbnRleHQgPSB0aGlzLl9nZXRDb250ZXh0KCk7XG5cbiAgICAvKipcbiAgICAgKiBUaGUgdGV4dHVyZSAvIGltYWdlIGRhdGEgY2FjaGVcbiAgICAgKiBAdHlwZSB7T2JqZWN0LjxTdHJpbmcsICo+fVxuICAgICAqL1xuICAgIHRoaXMuX2NhY2hlID0ge307XG4gIH1cblxuICAvKipcbiAgICogQSB1bmlxdWUgc3RyaW5nIHRoYXQgaWRlbnRpZmllcyB0aGlzIHJlbmRlcmVyXG4gICAqIEB0eXBlIHtTdHJpbmd9XG4gICAqL1xuICBnZXQgaWRlbnRpZmllciAoKSB7XG4gICAgcmV0dXJuIG51bGw7XG4gIH1cblxuICAvKipcbiAgICogQ2hlY2tzIHdoZXRoZXIgdGhpcyB0eXBlIG9mIHJlbmRlcmVyIGlzIHN1cHBvcnRlZCBpbiB0aGUgY3VycmVudCBlbnZpcm9ubWVudFxuICAgKiBAYWJzdHJhY3RcbiAgICogQHJldHVybnMge2Jvb2xlYW59XG4gICAqL1xuICBzdGF0aWMgaXNTdXBwb3J0ZWQgKCkge1xuICAgIC8qIGlzdGFuYnVsIGlnbm9yZSBuZXh0ICovXG4gICAgdGhyb3cgbmV3IEVycm9yKFwiUmVuZGVyZXIjaXNTdXBwb3J0ZWQgaXMgYWJzdHJhY3QgYW5kIG5vdCBpbXBsZW1lbnRlZCBpbiBpbmhlcml0ZWQgY2xhc3MuXCIpO1xuICB9XG5cbiAgLyoqXG4gICAqIENhY2hlcyB0aGUgY3VycmVudCBjYW52YXMgY29udGVudCBmb3IgdGhlIGdpdmVuIGlkZW50aWZpZXJcbiAgICogQHBhcmFtIHtTdHJpbmd9IGlkZW50aWZpZXJcbiAgICovXG4gIGNhY2hlIChpZGVudGlmaWVyKSB7fVxuXG4gIC8qKlxuICAgKiBEcmF3cyB0aGUgc3RvcmVkIHRleHR1cmUgLyBpbWFnZSBkYXRhIGZvciB0aGUgZ2l2ZW4gaWRlbnRpZmllclxuICAgKiBAcGFyYW0ge1N0cmluZ30gaWRlbnRpZmllclxuICAgKi9cbiAgZHJhd0NhY2hlZCAoaWRlbnRpZmllcikge31cblxuICAvKipcbiAgICogQ3JlYXRlcyBhIG5ldyBjYW52YXNcbiAgICogQHBhcmFtIHtOdW1iZXJ9IFt3aWR0aF1cbiAgICogQHBhcmFtIHtOdW1iZXJ9IFtoZWlnaHRdXG4gICAqIEByZXR1cm4ge0NhbnZhc31cbiAgICogQHByaXZhdGVcbiAgICovXG4gIGNyZWF0ZUNhbnZhcyAod2lkdGgsIGhlaWdodCkge1xuICAgIHZhciBpc0Jyb3dzZXIgPSB0eXBlb2Ygd2luZG93ICE9PSBcInVuZGVmaW5lZFwiO1xuICAgIHZhciBjYW52YXM7XG4gICAgaWYgKGlzQnJvd3Nlcikge1xuICAgICAgLyogaXN0YW5idWwgaWdub3JlIG5leHQgKi9cbiAgICAgIGNhbnZhcyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJjYW52YXNcIik7XG4gICAgfSBlbHNlIHtcbiAgICAgIHZhciBDYW52YXMgPSByZXF1aXJlKFwiY2FudmFzXCIpO1xuICAgICAgY2FudmFzID0gbmV3IENhbnZhcygpO1xuICAgIH1cblxuICAgIC8vIEFwcGx5IHdpZHRoXG4gICAgaWYgKHR5cGVvZiB3aWR0aCAhPT0gXCJ1bmRlZmluZWRcIikge1xuICAgICAgY2FudmFzLndpZHRoID0gd2lkdGg7XG4gICAgfVxuXG4gICAgLy8gQXBwbHkgaGVpZ2h0XG4gICAgaWYgKHR5cGVvZiBoZWlnaHQgIT09IFwidW5kZWZpbmVkXCIpIHtcbiAgICAgIGNhbnZhcy5oZWlnaHQgPSBoZWlnaHQ7XG4gICAgfVxuXG4gICAgcmV0dXJuIGNhbnZhcztcbiAgfVxuXG4gIC8qKlxuICAgKiBSZXR1cm5zIHRoZSBjdXJyZW50IHNpemUgb2YgdGhlIGNhbnZhc1xuICAgKiBAcmV0dXJuIHtWZWN0b3IyfVxuICAgKi9cbiAgZ2V0U2l6ZSAoKSB7XG4gICAgcmV0dXJuIG5ldyBWZWN0b3IyKHRoaXMuX2NhbnZhcy53aWR0aCwgdGhpcy5fY2FudmFzLmhlaWdodCk7XG4gIH1cblxuICAvKipcbiAgICogU2V0cyB0aGUgY2FudmFzIGRpbWVuc2lvbnNcbiAgICogQHBhcmFtIHtWZWN0b3IyfSBkaW1lbnNpb25zXG4gICAqL1xuICBzZXRTaXplIChkaW1lbnNpb25zKSB7XG4gICAgdGhpcy5fY2FudmFzLndpZHRoID0gZGltZW5zaW9ucy54O1xuICAgIHRoaXMuX2NhbnZhcy5oZWlnaHQgPSBkaW1lbnNpb25zLnk7XG4gIH1cblxuICAvKipcbiAgICogR2V0cyB0aGUgcmVuZGVyaW5nIGNvbnRleHQgZnJvbSB0aGUgQ2FudmFcbiAgICogQHJldHVybiB7UmVuZGVyaW5nQ29udGV4dH1cbiAgICogQGFic3RyYWN0XG4gICAqL1xuICBfZ2V0Q29udGV4dCAoKSB7XG4gICAgLyogaXN0YW5idWwgaWdub3JlIG5leHQgKi9cbiAgICB0aHJvdyBuZXcgRXJyb3IoXCJSZW5kZXJlciNfZ2V0Q29udGV4dCBpcyBhYnN0cmFjdCBhbmQgbm90IGltcGxlbWVudGVkIGluIGluaGVyaXRlZCBjbGFzcy5cIik7XG4gIH1cblxuICAvKipcbiAgICogUmVzaXplcyB0aGUgY3VycmVudCBjYW52YXMgcGljdHVyZSB0byB0aGUgZ2l2ZW4gZGltZW5zaW9uc1xuICAgKiBAcGFyYW0gIHtWZWN0b3IyfSBkaW1lbnNpb25zXG4gICAqIEByZXR1cm4ge1Byb21pc2V9XG4gICAqIEBhYnN0cmFjdFxuICAgKi9cbiAgcmVzaXplVG8gKGRpbWVuc2lvbnMpIHtcbiAgICAvKiBpc3RhbmJ1bCBpZ25vcmUgbmV4dCAqL1xuICAgIHRocm93IG5ldyBFcnJvcihcIlJlbmRlcmVyI3Jlc2l6ZVRvIGlzIGFic3RyYWN0IGFuZCBub3QgaW1wbGVtZW50ZWQgaW4gaW5oZXJpdGVkIGNsYXNzLlwiKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBEcmF3cyB0aGUgZ2l2ZW4gaW1hZ2Ugb24gdGhlIGNhbnZhc1xuICAgKiBAcGFyYW0gIHtJbWFnZX0gaW1hZ2VcbiAgICogQGFic3RyYWN0XG4gICAqL1xuICBkcmF3SW1hZ2UgKGltYWdlKSB7XG4gICAgLyogaXN0YW5idWwgaWdub3JlIG5leHQgKi9cbiAgICB0aHJvdyBuZXcgRXJyb3IoXCJSZW5kZXJlciNkcmF3SW1hZ2UgaXMgYWJzdHJhY3QgYW5kIG5vdCBpbXBsZW1lbnRlZCBpbiBpbmhlcml0ZWQgY2xhc3MuXCIpO1xuICB9XG5cbiAgLyoqXG4gICAqIEdldHMgY2FsbGVkIGFmdGVyIHRoZSBzdGFjayBoYXMgYmVlbiByZW5kZXJlZFxuICAgKiBAcGFyYW0gIHtJbWFnZX0gaW1hZ2VcbiAgICovXG4gIHJlbmRlckZpbmFsICgpIHt9XG5cbiAgLyoqXG4gICAqIFJldHVybnMgdGhlIGNhbnZhc1xuICAgKiBAcmV0dXJuIHtDYW52YXN9XG4gICAqL1xuICBnZXRDYW52YXMgKCkge1xuICAgIHJldHVybiB0aGlzLl9jYW52YXM7XG4gIH1cblxuICAvKipcbiAgICogUmV0dXJucyB0aGUgY29udGV4dFxuICAgKiBAcmV0dXJuIHtSZW5kZXJpbmdDb250ZXh0fVxuICAgKi9cbiAgZ2V0Q29udGV4dCAoKSB7XG4gICAgcmV0dXJuIHRoaXMuX2NvbnRleHQ7XG4gIH1cblxuICAvKipcbiAgICogU2V0cyB0aGUgY3VycmVudCBjYW52YXMgdG8gdGhlIGdpdmVuIG9uZVxuICAgKiBAcGFyYW0ge0NhbnZhc30gY2FudmFzXG4gICAqL1xuICBzZXRDYW52YXMgKGNhbnZhcykge1xuICAgIHRoaXMuX2NhbnZhcyA9IGNhbnZhcztcbiAgICB0aGlzLl9jb250ZXh0ID0gdGhpcy5fZ2V0Q29udGV4dCgpO1xuXG4gICAgdGhpcy5lbWl0KFwibmV3LWNhbnZhc1wiLCB0aGlzLl9jYW52YXMpO1xuICB9XG5cbiAgLyoqXG4gICAqIFNldHMgdGhlIGN1cnJlbnQgY29udGV4dCB0byB0aGUgZ2l2ZW4gb25lXG4gICAqIEBwYXJhbSB7UmVuZGVyaW5nQ29udGV4dDJEfSBjb250ZXh0XG4gICAqL1xuICBzZXRDb250ZXh0IChjb250ZXh0KSB7XG4gICAgdGhpcy5fY29udGV4dCA9IGNvbnRleHQ7XG4gIH1cblxuICAvKipcbiAgICogUmVzZXRzIHRoZSByZW5kZXJlclxuICAgKi9cbiAgcmVzZXQgKCkge1xuXG4gIH1cbn1cblxuZXhwb3J0IGRlZmF1bHQgUmVuZGVyZXI7XG4iLCJcInVzZSBzdHJpY3RcIjtcbi8qIVxuICogQ29weXJpZ2h0IChjKSAyMDEzLTIwMTUgOWVsZW1lbnRzIEdtYkhcbiAqXG4gKiBSZWxlYXNlZCB1bmRlciBBdHRyaWJ1dGlvbi1Ob25Db21tZXJjaWFsIDMuMCBVbnBvcnRlZFxuICogaHR0cDovL2NyZWF0aXZlY29tbW9ucy5vcmcvbGljZW5zZXMvYnktbmMvMy4wL1xuICpcbiAqIEZvciBjb21tZXJjaWFsIHVzZSwgcGxlYXNlIGNvbnRhY3QgdXMgYXQgY29udGFjdEA5ZWxlbWVudHMuY29tXG4gKi9cblxuaW1wb3J0IFJlbmRlcmVyIGZyb20gXCIuL3JlbmRlcmVyXCI7XG5pbXBvcnQgU3ltYm9sIGZyb20gXCJlczYtc3ltYm9sXCI7XG5pbXBvcnQgVmVjdG9yMiBmcm9tIFwiLi4vbGliL21hdGgvdmVjdG9yMlwiO1xuXG4vKipcbiAqIEBjbGFzc1xuICogQGFsaWFzIEltZ2x5S2l0LldlYkdMUmVuZGVyZXJcbiAqIEBleHRlbmRzIHtJbWdseUtpdC5SZW5kZXJlcn1cbiAqIEBwcml2YXRlXG4gKi9cbmNsYXNzIFdlYkdMUmVuZGVyZXIgZXh0ZW5kcyBSZW5kZXJlciB7XG4gIGNvbnN0cnVjdG9yICguLi5hcmdzKSB7XG4gICAgc3VwZXIoLi4uYXJncyk7XG5cbiAgICB0aGlzLl9kZWZhdWx0UHJvZ3JhbSA9IHRoaXMuc2V0dXBHTFNMUHJvZ3JhbSgpO1xuICAgIHRoaXMucmVzZXQoKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBBIHVuaXF1ZSBzdHJpbmcgdGhhdCBpZGVudGlmaWVzIHRoaXMgcmVuZGVyZXJcbiAgICogQHR5cGUge1N0cmluZ31cbiAgICovXG4gIGdldCBpZGVudGlmaWVyICgpIHtcbiAgICByZXR1cm4gXCJ3ZWJnbFwiO1xuICB9XG5cbiAgLyoqXG4gICAqIENhY2hlcyB0aGUgY3VycmVudCBjYW52YXMgY29udGVudCBmb3IgdGhlIGdpdmVuIGlkZW50aWZpZXJcbiAgICogQHBhcmFtIHtTdHJpbmd9IGlkZW50aWZpZXJcbiAgICovXG4gIGNhY2hlIChpZGVudGlmaWVyKSB7XG4gICAgbGV0IHNpemUgPSBuZXcgVmVjdG9yMih0aGlzLl9jYW52YXMud2lkdGgsIHRoaXMuX2NhbnZhcy5oZWlnaHQpO1xuXG4gICAgLy8gUmUtdXNlIEZCTyBhbmQgdGV4dHVyZXNcbiAgICBsZXQgZmJvLCB0ZXh0dXJlLCBjYWNoZU9iamVjdDtcbiAgICBpZiAoIXRoaXMuX2NhY2hlW2lkZW50aWZpZXJdKSB7XG4gICAgICBjYWNoZU9iamVjdCA9IHRoaXMuX2NyZWF0ZUZyYW1lYnVmZmVyKCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIGNhY2hlT2JqZWN0ID0gdGhpcy5fY2FjaGVbaWRlbnRpZmllcl07XG4gICAgfVxuXG4gICAgLy8gRXh0cmFjdCBGQk8gYW5kIHRleHR1cmVcbiAgICBmYm8gPSBjYWNoZU9iamVjdC5mYm87XG4gICAgdGV4dHVyZSA9IGNhY2hlT2JqZWN0LnRleHR1cmU7XG5cbiAgICAvLyBSZXNpemUgb3V0cHV0IHRleHR1cmVcbiAgICBsZXQgZ2wgPSB0aGlzLl9jb250ZXh0O1xuICAgIGdsLnVzZVByb2dyYW0odGhpcy5fZGVmYXVsdFByb2dyYW0pO1xuXG4gICAgLy8gUmVzaXplIGNhY2hlZCB0ZXh0dXJlXG4gICAgZ2wuYmluZFRleHR1cmUoZ2wuVEVYVFVSRV8yRCwgdGV4dHVyZSk7XG4gICAgZ2wudGV4SW1hZ2UyRChnbC5URVhUVVJFXzJELCAwLCBnbC5SR0JBLCBzaXplLngsIHNpemUueSwgMCwgZ2wuUkdCQSwgZ2wuVU5TSUdORURfQllURSwgbnVsbCk7XG5cbiAgICAvLyBSZW5kZXIgdG8gRkJPXG4gICAgZ2wuYmluZEZyYW1lYnVmZmVyKGdsLkZSQU1FQlVGRkVSLCBmYm8pO1xuICAgIGdsLnZpZXdwb3J0KDAsIDAsIHNpemUueCwgc2l6ZS55KTtcblxuICAgIC8vIFVzZSBsYXN0IGZibyB0ZXh0dXJlIGFzIGlucHV0XG4gICAgZ2wuYmluZFRleHR1cmUoZ2wuVEVYVFVSRV8yRCwgdGhpcy5fbGFzdFRleHR1cmUpO1xuXG4gICAgZ2wuZHJhd0FycmF5cyhnbC5UUklBTkdMRVMsIDAsIDYpO1xuXG4gICAgdGhpcy5fY2FjaGVbaWRlbnRpZmllcl0gPSB7IGZibywgdGV4dHVyZSwgc2l6ZSB9O1xuICB9XG5cbiAgLyoqXG4gICAqIERlYnVnZ2luZyBtZXRob2QgdG8gZHJhdyBhIGNhY2hlZCB0ZXh0dXJlIHRvIHRoZSBjYW52YXMgaW5zdGVhZFxuICAgKiB0byBhbiBGQk9cbiAgICogQHByaXZhdGVcbiAgICovXG4gIF9kcmF3Q2FjaGVkRmluYWwgKGlkZW50aWZpZXIpIHtcbiAgICBsZXQgeyB0ZXh0dXJlLCBzaXplIH0gPSB0aGlzLl9jYWNoZVtpZGVudGlmaWVyXTtcblxuICAgIGxldCBnbCA9IHRoaXMuX2NvbnRleHQ7XG4gICAgZ2wudXNlUHJvZ3JhbSh0aGlzLl9kZWZhdWx0UHJvZ3JhbSk7XG4gICAgZ2wuYmluZEZyYW1lYnVmZmVyKGdsLkZSQU1FQlVGRkVSLCBudWxsKTtcblxuICAgIC8vIFVzZSB0aGUgY2FjaGVkIHRleHR1cmUgYXMgaW5wdXRcbiAgICBnbC5iaW5kVGV4dHVyZShnbC5URVhUVVJFXzJELCB0ZXh0dXJlKTtcblxuICAgIC8vIFJlc2l6ZSB0aGUgY2FudmFzXG4gICAgdGhpcy5fY2FudmFzLndpZHRoID0gc2l6ZS54O1xuICAgIHRoaXMuX2NhbnZhcy5oZWlnaHQgPSBzaXplLnk7XG5cbiAgICBnbC52aWV3cG9ydCgwLCAwLCBzaXplLngsIHNpemUueSk7XG5cbiAgICAvLyBEcmF3IHRoZSByZWN0YW5nbGVcbiAgICBnbC5kcmF3QXJyYXlzKGdsLlRSSUFOR0xFUywgMCwgNik7XG4gIH1cblxuICAvKipcbiAgICogRHJhd3MgdGhlIHN0b3JlZCB0ZXh0dXJlIC8gaW1hZ2UgZGF0YSBmb3IgdGhlIGdpdmVuIGlkZW50aWZpZXJcbiAgICogQHBhcmFtIHtTdHJpbmd9IGlkZW50aWZpZXJcbiAgICovXG4gIGRyYXdDYWNoZWQgKGlkZW50aWZpZXIpIHtcbiAgICBsZXQgeyB0ZXh0dXJlLCBzaXplIH0gPSB0aGlzLl9jYWNoZVtpZGVudGlmaWVyXTtcblxuICAgIGxldCBmYm8gPSB0aGlzLmdldEN1cnJlbnRGcmFtZWJ1ZmZlcigpO1xuICAgIGxldCBjdXJyZW50VGV4dHVyZSA9IHRoaXMuZ2V0Q3VycmVudFRleHR1cmUoKTtcblxuICAgIGxldCBnbCA9IHRoaXMuX2NvbnRleHQ7XG4gICAgZ2wudXNlUHJvZ3JhbSh0aGlzLl9kZWZhdWx0UHJvZ3JhbSk7XG5cbiAgICAvLyBSZXNpemUgdGhlIGNhbnZhc1xuICAgIHRoaXMuX2NhbnZhcy53aWR0aCA9IHNpemUueDtcbiAgICB0aGlzLl9jYW52YXMuaGVpZ2h0ID0gc2l6ZS55O1xuXG4gICAgLy8gUmVzaXplIGFsbCB0ZXh0dXJlc1xuICAgIGZvciAobGV0IG90aGVyVGV4dHVyZSBvZiB0aGlzLl90ZXh0dXJlcykge1xuICAgICAgZ2wuYmluZFRleHR1cmUoZ2wuVEVYVFVSRV8yRCwgb3RoZXJUZXh0dXJlKTtcbiAgICAgIGdsLnRleEltYWdlMkQoZ2wuVEVYVFVSRV8yRCwgMCwgZ2wuUkdCQSwgc2l6ZS54LCBzaXplLnksIDAsIGdsLlJHQkEsIGdsLlVOU0lHTkVEX0JZVEUsIG51bGwpO1xuICAgIH1cblxuICAgIC8vIFNlbGVjdCB0aGUgY3VycmVudCBmcmFtZWJ1ZmZlciB0byBkcmF3IHRvXG4gICAgZ2wuYmluZEZyYW1lYnVmZmVyKGdsLkZSQU1FQlVGRkVSLCBmYm8pO1xuXG4gICAgLy8gUmVzaXplIHRoZSB0ZXh0dXJlIHdlJ3JlIGRyYXdpbmcgdG9cbiAgICBnbC5iaW5kVGV4dHVyZShnbC5URVhUVVJFXzJELCBjdXJyZW50VGV4dHVyZSk7XG4gICAgZ2wudGV4SW1hZ2UyRChnbC5URVhUVVJFXzJELCAwLCBnbC5SR0JBLCBzaXplLngsIHNpemUueSwgMCwgZ2wuUkdCQSwgZ2wuVU5TSUdORURfQllURSwgbnVsbCk7XG5cbiAgICAvLyBVc2UgdGhlIGNhY2hlZCB0ZXh0dXJlIGFzIGlucHV0XG4gICAgZ2wuYmluZFRleHR1cmUoZ2wuVEVYVFVSRV8yRCwgdGV4dHVyZSk7XG5cbiAgICBnbC52aWV3cG9ydCgwLCAwLCBzaXplLngsIHNpemUueSk7XG5cbiAgICAvLyBEcmF3IHRoZSByZWN0YW5nbGVcbiAgICBnbC5kcmF3QXJyYXlzKGdsLlRSSUFOR0xFUywgMCwgNik7XG5cbiAgICB0aGlzLnNldExhc3RUZXh0dXJlKGN1cnJlbnRUZXh0dXJlKTtcbiAgICB0aGlzLnNlbGVjdE5leHRCdWZmZXIoKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBUaGUgZGVmYXVsdCB2ZXJ0ZXggc2hhZGVyIHdoaWNoIGp1c3QgcGFzc2VzIHRoZSB0ZXhDb29yZCB0byB0aGVcbiAgICogZnJhZ21lbnQgc2hhZGVyLlxuICAgKiBAdHlwZSB7U3RyaW5nfVxuICAgKiBAcHJpdmF0ZVxuICAgKi9cbiAgZ2V0IGRlZmF1bHRWZXJ0ZXhTaGFkZXIgKCkge1xuICAgIHZhciBzaGFkZXIgPSBgXG4gICAgICBhdHRyaWJ1dGUgdmVjMiBhX3Bvc2l0aW9uO1xuICAgICAgYXR0cmlidXRlIHZlYzIgYV90ZXhDb29yZDtcbiAgICAgIHZhcnlpbmcgdmVjMiB2X3RleENvb3JkO1xuXG4gICAgICB2b2lkIG1haW4oKSB7XG4gICAgICAgIGdsX1Bvc2l0aW9uID0gdmVjNChhX3Bvc2l0aW9uLCAwLCAxKTtcbiAgICAgICAgdl90ZXhDb29yZCA9IGFfdGV4Q29vcmQ7XG4gICAgICB9XG4gICAgYDtcbiAgICByZXR1cm4gc2hhZGVyO1xuICB9XG5cbiAgLyoqXG4gICAqIFRoZSBkZWZhdWx0IGZyYWdtZW50IHNoYWRlciB3aGljaCB3aWxsIGp1c3QgbG9vayB1cCB0aGUgY29sb3JzIGZyb20gdGhlXG4gICAqIHRleHR1cmUuXG4gICAqIEB0eXBlIHtTdHJpbmd9XG4gICAqIEBwcml2YXRlXG4gICAqL1xuICBnZXQgZGVmYXVsdEZyYWdtZW50U2hhZGVyICgpIHtcbiAgICB2YXIgc2hhZGVyID0gYFxuICAgICAgcHJlY2lzaW9uIG1lZGl1bXAgZmxvYXQ7XG4gICAgICB1bmlmb3JtIHNhbXBsZXIyRCB1X2ltYWdlO1xuICAgICAgdmFyeWluZyB2ZWMyIHZfdGV4Q29vcmQ7XG5cbiAgICAgIHZvaWQgbWFpbigpIHtcbiAgICAgICAgZ2xfRnJhZ0NvbG9yID0gdGV4dHVyZTJEKHVfaW1hZ2UsIHZfdGV4Q29vcmQpO1xuICAgICAgfVxuICAgIGA7XG4gICAgcmV0dXJuIHNoYWRlcjtcbiAgfVxuXG4gIC8qKlxuICAgKiBDaGVja3Mgd2hldGhlciB0aGlzIHR5cGUgb2YgcmVuZGVyZXIgaXMgc3VwcG9ydGVkIGluIHRoZSBjdXJyZW50IGVudmlyb25tZW50XG4gICAqIEBhYnN0cmFjdFxuICAgKiBAcmV0dXJucyB7Ym9vbGVhbn1cbiAgICovXG4gIHN0YXRpYyBpc1N1cHBvcnRlZCAoKSB7XG4gICAgcmV0dXJuICEhKHR5cGVvZiB3aW5kb3cgIT09IFwidW5kZWZpbmVkXCIgJiYgd2luZG93LldlYkdMUmVuZGVyaW5nQ29udGV4dCk7XG4gIH1cblxuICAvKipcbiAgICogR2V0cyB0aGUgcmVuZGVyaW5nIGNvbnRleHQgZnJvbSB0aGUgQ2FudmFzXG4gICAqIEByZXR1cm4ge1JlbmRlcmluZ0NvbnRleHR9XG4gICAqIEBhYnN0cmFjdFxuICAgKi9cbiAgX2dldENvbnRleHQgKCkge1xuICAgIC8qIGlzdGFuYnVsIGlnbm9yZSBuZXh0ICovXG4gICAgcmV0dXJuIHRoaXMuX2NhbnZhcy5nZXRDb250ZXh0KFwid2ViZ2xcIikgfHxcbiAgICAgIHRoaXMuX2NhbnZhcy5nZXRDb250ZXh0KFwid2ViZ2wtZXhwZXJpbWVudGFsXCIpO1xuICB9XG5cbiAgLyoqXG4gICAqIERyYXdzIHRoZSBnaXZlbiBpbWFnZSBvbiB0aGUgY2FudmFzXG4gICAqIEBwYXJhbSAge0ltYWdlfSBpbWFnZVxuICAgKi9cbiAgLyogaXN0YW5idWwgaWdub3JlIG5leHQgKi9cbiAgZHJhd0ltYWdlIChpbWFnZSkge1xuICAgIHZhciBnbCA9IHRoaXMuX2NvbnRleHQ7XG4gICAgZ2wudXNlUHJvZ3JhbSh0aGlzLl9kZWZhdWx0UHJvZ3JhbSk7XG5cbiAgICAvLyBDcmVhdGUgdGhlIHRleHR1cmVcbiAgICB2YXIgdGV4dHVyZSA9IHRoaXMuY3JlYXRlVGV4dHVyZSgpO1xuICAgIGdsLnBpeGVsU3RvcmVpKGdsLlVOUEFDS19GTElQX1lfV0VCR0wsIHRydWUpO1xuICAgIHRoaXMuX2lucHV0VGV4dHVyZSA9IHRleHR1cmU7XG4gICAgdGhpcy5zZXRMYXN0VGV4dHVyZSh0ZXh0dXJlKTtcblxuICAgIC8vIFVwbG9hZCB0aGUgaW1hZ2UgaW50byB0aGUgdGV4dHVyZVxuICAgIGdsLnRleEltYWdlMkQoZ2wuVEVYVFVSRV8yRCwgMCwgZ2wuUkdCQSwgZ2wuUkdCQSwgZ2wuVU5TSUdORURfQllURSwgaW1hZ2UpO1xuXG4gICAgLy8gRHJhdyB0aGUgcmVjdGFuZ2xlXG4gICAgZ2wuZHJhd0FycmF5cyhnbC5UUklBTkdMRVMsIDAsIDYpO1xuICB9XG5cbiAgLyoqXG4gICAqIFJ1bnMgdGhlIGdpdmVuIHNoYWRlclxuICAgKiBAcGFyYW0gIHtTdHJpbmd9IFt2ZXJ0ZXhTaGFkZXJdXG4gICAqIEBwYXJhbSAge1N0cmluZ30gW2ZyYWdtZW50U2hhZGVyXVxuICAgKi9cbiAgLyogaXN0YW5idWwgaWdub3JlIG5leHQgKi9cbiAgcnVuU2hhZGVyICh2ZXJ0ZXhTaGFkZXIsIGZyYWdtZW50U2hhZGVyLCBvcHRpb25zKSB7XG4gICAgaWYgKHR5cGVvZiBvcHRpb25zID09PSBcInVuZGVmaW5lZFwiKSBvcHRpb25zID0ge307XG4gICAgaWYgKHR5cGVvZiBvcHRpb25zLnVuaWZvcm1zID09PSBcInVuZGVmaW5lZFwiKSBvcHRpb25zLnVuaWZvcm1zID0ge307XG5cbiAgICB2YXIgZ2wgPSB0aGlzLl9jb250ZXh0O1xuICAgIHZhciBwcm9ncmFtID0gdGhpcy5zZXR1cEdMU0xQcm9ncmFtKHZlcnRleFNoYWRlciwgZnJhZ21lbnRTaGFkZXIpO1xuICAgIGdsLnVzZVByb2dyYW0ocHJvZ3JhbSk7XG5cbiAgICB2YXIgZmJvID0gdGhpcy5nZXRDdXJyZW50RnJhbWVidWZmZXIoKTtcbiAgICB2YXIgY3VycmVudFRleHR1cmUgPSB0aGlzLmdldEN1cnJlbnRUZXh0dXJlKCk7XG5cbiAgICAvLyBTZWxlY3QgdGhlIGN1cnJlbnQgZnJhbWVidWZmZXJcbiAgICBnbC5iaW5kRnJhbWVidWZmZXIoZ2wuRlJBTUVCVUZGRVIsIGZibyk7XG4gICAgZ2wudmlld3BvcnQoMCwgMCwgdGhpcy5fY2FudmFzLndpZHRoLCB0aGlzLl9jYW52YXMuaGVpZ2h0KTtcblxuICAgIC8vIFJlc2l6ZSB0aGUgdGV4dHVyZSB0byBjYW52YXMgc2l6ZVxuICAgIGdsLmJpbmRUZXh0dXJlKGdsLlRFWFRVUkVfMkQsIGN1cnJlbnRUZXh0dXJlKTtcbiAgICBnbC50ZXhJbWFnZTJEKGdsLlRFWFRVUkVfMkQsIDAsIGdsLlJHQkEsIHRoaXMuX2NhbnZhcy53aWR0aCwgdGhpcy5fY2FudmFzLmhlaWdodCwgMCwgZ2wuUkdCQSwgZ2wuVU5TSUdORURfQllURSwgbnVsbCk7XG5cbiAgICAvLyBNYWtlIHN1cmUgd2Ugc2VsZWN0IHRoZSBjdXJyZW50IHRleHR1cmVcbiAgICBnbC5iaW5kVGV4dHVyZShnbC5URVhUVVJFXzJELCB0aGlzLl9sYXN0VGV4dHVyZSk7XG5cbiAgICAvLyBTZXQgdGhlIHVuaWZvcm1zXG4gICAgZm9yICh2YXIgbmFtZSBpbiBvcHRpb25zLnVuaWZvcm1zKSB7XG4gICAgICB2YXIgbG9jYXRpb24gPSBnbC5nZXRVbmlmb3JtTG9jYXRpb24ocHJvZ3JhbSwgbmFtZSk7XG4gICAgICB2YXIgdW5pZm9ybSA9IG9wdGlvbnMudW5pZm9ybXNbbmFtZV07XG5cbiAgICAgIHN3aXRjaCAodW5pZm9ybS50eXBlKSB7XG4gICAgICAgIGNhc2UgXCJpXCI6XG4gICAgICAgIGNhc2UgXCIxaVwiOlxuICAgICAgICAgIGdsLnVuaWZvcm0xaShsb2NhdGlvbiwgdW5pZm9ybS52YWx1ZSk7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIGNhc2UgXCJmXCI6XG4gICAgICAgIGNhc2UgXCIxZlwiOlxuICAgICAgICAgIGdsLnVuaWZvcm0xZihsb2NhdGlvbiwgdW5pZm9ybS52YWx1ZSk7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIGNhc2UgXCIyZlwiOlxuICAgICAgICAgIGdsLnVuaWZvcm0yZihsb2NhdGlvbiwgdW5pZm9ybS52YWx1ZVswXSwgdW5pZm9ybS52YWx1ZVsxXSk7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIGNhc2UgXCIzZlwiOlxuICAgICAgICAgIGdsLnVuaWZvcm0zZihsb2NhdGlvbiwgdW5pZm9ybS52YWx1ZVswXSwgdW5pZm9ybS52YWx1ZVsxXSwgdW5pZm9ybS52YWx1ZVsyXSk7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIGNhc2UgXCI0ZlwiOlxuICAgICAgICAgIGdsLnVuaWZvcm00Zihsb2NhdGlvbiwgdW5pZm9ybS52YWx1ZVswXSwgdW5pZm9ybS52YWx1ZVsxXSwgdW5pZm9ybS52YWx1ZVsyXSwgdW5pZm9ybS52YWx1ZVszXSk7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIGNhc2UgXCIyZnZcIjpcbiAgICAgICAgICBnbC51bmlmb3JtMmZ2KGxvY2F0aW9uLCB1bmlmb3JtLnZhbHVlKTtcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSBcIm1hdDNmdlwiOlxuICAgICAgICAgIGdsLnVuaWZvcm1NYXRyaXgzZnYobG9jYXRpb24sIGZhbHNlLCB1bmlmb3JtLnZhbHVlKTtcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJVbmtub3duIHVuaWZvcm0gdHlwZTogXCIgKyB1bmlmb3JtLnR5cGUpO1xuICAgICAgfVxuICAgIH1cblxuICAgIC8vIERyYXcgdGhlIHJlY3RhbmdsZVxuICAgIGdsLmRyYXdBcnJheXMoZ2wuVFJJQU5HTEVTLCAwLCA2KTtcblxuICAgIHRoaXMuc2V0TGFzdFRleHR1cmUoY3VycmVudFRleHR1cmUpO1xuICAgIHRoaXMuc2VsZWN0TmV4dEJ1ZmZlcigpO1xuICB9XG5cbiAgLyoqXG4gICAqIERyYXdzIHRoZSBsYXN0IHVzZWQgYnVmZmVyIG9udG8gdGhlIGNhbnZhc1xuICAgKi9cbiAgLyogaXN0YW5idWwgaWdub3JlIG5leHQgKi9cbiAgcmVuZGVyRmluYWwgKCkge1xuICAgIHZhciBnbCA9IHRoaXMuX2NvbnRleHQ7XG4gICAgdmFyIHByb2dyYW0gPSB0aGlzLl9kZWZhdWx0UHJvZ3JhbTtcbiAgICBnbC51c2VQcm9ncmFtKHByb2dyYW0pO1xuXG4gICAgLy8gRG9uJ3QgZHJhdyB0byBmcmFtZWJ1ZmZlclxuICAgIGdsLmJpbmRGcmFtZWJ1ZmZlcihnbC5GUkFNRUJVRkZFUiwgbnVsbCk7XG5cbiAgICAvLyBNYWtlIHN1cmUgdGhlIHZpZXdwb3J0IHNpemUgaXMgY29ycmVjdFxuICAgIGdsLnZpZXdwb3J0KDAsIDAsIHRoaXMuX2NhbnZhcy53aWR0aCwgdGhpcy5fY2FudmFzLmhlaWdodCk7XG5cbiAgICAvLyBTZWxlY3QgdGhlIGxhc3QgdGV4dHVyZSB0aGF0IGhhcyBiZWVuIHJlbmRlcmVkIHRvXG4gICAgZ2wuYmluZFRleHR1cmUoZ2wuVEVYVFVSRV8yRCwgdGhpcy5fbGFzdFRleHR1cmUpO1xuXG4gICAgLy8gRHJhdyB0aGUgcmVjdGFuZ2xlXG4gICAgZ2wuZHJhd0FycmF5cyhnbC5UUklBTkdMRVMsIDAsIDYpO1xuICB9XG5cbiAgLyoqXG4gICAqIFNldHMgdXAgYSBHTFNMIHByb2dyYW0uIFVzZXMgdGhlIGRlZmF1bHQgdmVydGV4IGFuZCBmcmFnbWVudCBzaGFkZXJcbiAgICogaWYgbm9uZSBhcmUgZ2l2ZW4uXG4gICAqIEBwYXJhbSB7U3RyaW5nfSBbdmVydGV4U2hhZGVyXVxuICAgKiBAcGFyYW0ge1N0cmluZ30gW2ZyYWdtZW50U2hhZGVyXVxuICAgKiBAcmV0dXJuIHtXZWJHTFByb2dyYW19XG4gICAqL1xuICAvKiBpc3RhbmJ1bCBpZ25vcmUgbmV4dCAqL1xuICBzZXR1cEdMU0xQcm9ncmFtICh2ZXJ0ZXhTaGFkZXIsIGZyYWdtZW50U2hhZGVyKSB7XG4gICAgdmFyIGdsID0gdGhpcy5fY29udGV4dDtcbiAgICB2YXIgc2hhZGVycyA9IFtdO1xuXG4gICAgLy8gVXNlIGRlZmF1bHQgdmVydGV4IHNoYWRlclxuICAgIHZlcnRleFNoYWRlciA9IHRoaXMuX2NyZWF0ZVNoYWRlcihnbC5WRVJURVhfU0hBREVSLCB2ZXJ0ZXhTaGFkZXIgfHwgV2ViR0xSZW5kZXJlci5wcm90b3R5cGUuZGVmYXVsdFZlcnRleFNoYWRlcik7XG4gICAgc2hhZGVycy5wdXNoKHZlcnRleFNoYWRlcik7XG5cbiAgICAvLyBVc2UgZGVmYXVsdCBmcmFnbWVudCBzaGFkZXJcbiAgICBmcmFnbWVudFNoYWRlciA9IHRoaXMuX2NyZWF0ZVNoYWRlcihnbC5GUkFHTUVOVF9TSEFERVIsIGZyYWdtZW50U2hhZGVyIHx8IFdlYkdMUmVuZGVyZXIucHJvdG90eXBlLmRlZmF1bHRGcmFnbWVudFNoYWRlcik7XG4gICAgc2hhZGVycy5wdXNoKGZyYWdtZW50U2hhZGVyKTtcblxuICAgIC8vIENyZWF0ZSB0aGUgcHJvZ3JhbVxuICAgIHZhciBwcm9ncmFtID0gZ2wuY3JlYXRlUHJvZ3JhbSgpO1xuXG4gICAgLy8gQXR0YWNoIHRoZSBzaGFkZXJzXG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCBzaGFkZXJzLmxlbmd0aDsgaSsrKSB7XG4gICAgICBnbC5hdHRhY2hTaGFkZXIocHJvZ3JhbSwgc2hhZGVyc1tpXSk7XG4gICAgfVxuXG4gICAgLy8gTGluayB0aGUgcHJvZ3JhbVxuICAgIGdsLmxpbmtQcm9ncmFtKHByb2dyYW0pO1xuXG4gICAgLy8gQ2hlY2sgbGlua2luZyBzdGF0dXNcbiAgICB2YXIgbGlua2VkID0gZ2wuZ2V0UHJvZ3JhbVBhcmFtZXRlcihwcm9ncmFtLCBnbC5MSU5LX1NUQVRVUyk7XG4gICAgaWYgKCFsaW5rZWQpIHtcbiAgICAgIHZhciBsYXN0RXJyb3IgPSBnbC5nZXRQcm9ncmFtSW5mb0xvZyhwcm9ncmFtKTtcbiAgICAgIGdsLmRlbGV0ZVByb2dyYW0ocHJvZ3JhbSk7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoXCJXZWJHTCBwcm9ncmFtIGxpbmtpbmcgZXJyb3I6IFwiICsgbGFzdEVycm9yKTtcbiAgICB9XG5cbiAgICAvLyBMb29rdXAgdGV4dHVyZSBjb29yZGluYXRlcyBsb2NhdGlvblxuICAgIHZhciBwb3NpdGlvbkxvY2F0aW9uID0gZ2wuZ2V0QXR0cmliTG9jYXRpb24ocHJvZ3JhbSwgXCJhX3Bvc2l0aW9uXCIpO1xuICAgIHZhciB0ZXhDb29yZExvY2F0aW9uID0gZ2wuZ2V0QXR0cmliTG9jYXRpb24ocHJvZ3JhbSwgXCJhX3RleENvb3JkXCIpO1xuXG4gICAgLy8gUHJvdmlkZSB0ZXh0dXJlIGNvb3JkaW5hdGVzXG4gICAgdmFyIHRleENvb3JkQnVmZmVyID0gZ2wuY3JlYXRlQnVmZmVyKCk7XG4gICAgZ2wuYmluZEJ1ZmZlcihnbC5BUlJBWV9CVUZGRVIsIHRleENvb3JkQnVmZmVyKTtcbiAgICBnbC5idWZmZXJEYXRhKGdsLkFSUkFZX0JVRkZFUiwgbmV3IEZsb2F0MzJBcnJheShbXG4gICAgICAvLyBGaXJzdCB0cmlhbmdsZVxuICAgICAgMC4wLCAwLjAsXG4gICAgICAxLjAsIDAuMCxcbiAgICAgIDAuMCwgMS4wLFxuXG4gICAgICAvLyBTZWNvbmQgdHJpYW5nbGVcbiAgICAgIDAuMCwgMS4wLFxuICAgICAgMS4wLCAwLjAsXG4gICAgICAxLjAsIDEuMFxuICAgIF0pLCBnbC5TVEFUSUNfRFJBVyk7XG4gICAgZ2wuZW5hYmxlVmVydGV4QXR0cmliQXJyYXkodGV4Q29vcmRMb2NhdGlvbik7XG4gICAgZ2wudmVydGV4QXR0cmliUG9pbnRlcih0ZXhDb29yZExvY2F0aW9uLCAyLCBnbC5GTE9BVCwgZmFsc2UsIDAsIDApO1xuXG4gICAgLy8gQ3JlYXRlIGEgYnVmZmVyIGZvciB0aGUgcmVjdGFuZ2xlIHBvc2l0aW9uc1xuICAgIHZhciBidWZmZXIgPSBnbC5jcmVhdGVCdWZmZXIoKTtcbiAgICBnbC5iaW5kQnVmZmVyKGdsLkFSUkFZX0JVRkZFUiwgYnVmZmVyKTtcbiAgICBnbC5lbmFibGVWZXJ0ZXhBdHRyaWJBcnJheShwb3NpdGlvbkxvY2F0aW9uKTtcbiAgICBnbC52ZXJ0ZXhBdHRyaWJQb2ludGVyKHBvc2l0aW9uTG9jYXRpb24sIDIsIGdsLkZMT0FULCBmYWxzZSwgMCwgMCk7XG4gICAgZ2wuYnVmZmVyRGF0YShnbC5BUlJBWV9CVUZGRVIsIG5ldyBGbG9hdDMyQXJyYXkoW1xuICAgICAgLy8gRmlyc3QgdHJpYW5nbGVcbiAgICAgIC0xLjAsIC0xLjAsXG4gICAgICAgMS4wLCAtMS4wLFxuICAgICAgLTEuMCwgIDEuMCxcblxuICAgICAgLy8gU2Vjb25kIHRyaWFuZ2xlXG4gICAgICAtMS4wLCAgMS4wLFxuICAgICAgIDEuMCwgLTEuMCxcbiAgICAgICAxLjAsICAxLjBcbiAgICBdKSwgZ2wuU1RBVElDX0RSQVcpO1xuXG4gICAgcmV0dXJuIHByb2dyYW07XG4gIH1cblxuICAvKipcbiAgICogQ3JlYXRlcyBhIFdlYkdMIHNoYWRlciB3aXRoIHRoZSBnaXZlbiB0eXBlIGFuZCBzb3VyY2UgY29kZVxuICAgKiBAcGFyYW0gIHtXZWJHTFNoYWRlclR5cGV9IHNoYWRlclR5cGVcbiAgICogQHBhcmFtICB7U3RyaW5nfSBzaGFkZXJTb3VyY2VcbiAgICogQHJldHVybiB7V2ViR0xTaGFkZXJ9XG4gICAqIEBwcml2YXRlXG4gICAqL1xuICAvKiBpc3RhbmJ1bCBpZ25vcmUgbmV4dCAqL1xuICBfY3JlYXRlU2hhZGVyIChzaGFkZXJUeXBlLCBzaGFkZXJTb3VyY2UpIHtcbiAgICB2YXIgZ2wgPSB0aGlzLl9jb250ZXh0O1xuXG4gICAgLy8gQ3JlYXRlIHRoZSBzaGFkZXIgYW5kIGNvbXBpbGUgaXRcbiAgICB2YXIgc2hhZGVyID0gZ2wuY3JlYXRlU2hhZGVyKHNoYWRlclR5cGUpO1xuICAgIGdsLnNoYWRlclNvdXJjZShzaGFkZXIsIHNoYWRlclNvdXJjZSk7XG4gICAgZ2wuY29tcGlsZVNoYWRlcihzaGFkZXIpO1xuXG4gICAgLy8gQ2hlY2sgY29tcGlsYXRpb24gc3RhdHVzXG4gICAgdmFyIGNvbXBpbGVkID0gZ2wuZ2V0U2hhZGVyUGFyYW1ldGVyKHNoYWRlciwgZ2wuQ09NUElMRV9TVEFUVVMpO1xuICAgIGlmICghY29tcGlsZWQpIHtcbiAgICAgIHZhciBsYXN0RXJyb3IgPSBnbC5nZXRTaGFkZXJJbmZvTG9nKHNoYWRlcik7XG4gICAgICBnbC5kZWxldGVTaGFkZXIoc2hhZGVyKTtcbiAgICAgIHRocm93IG5ldyBFcnJvcihcIldlYkdMIHNoYWRlciBjb21waWxhdGlvbiBlcnJvcjogXCIgKyBsYXN0RXJyb3IpO1xuICAgIH1cblxuICAgIHJldHVybiBzaGFkZXI7XG4gIH1cblxuICAvKipcbiAgICogQ3JlYXRlcyBhbiBlbXB0eSB0ZXh0dXJlXG4gICAqIEByZXR1cm4ge1dlYkdMVGV4dHVyZX1cbiAgICovXG4gIC8qIGlzdGFuYnVsIGlnbm9yZSBuZXh0ICovXG4gIGNyZWF0ZVRleHR1cmUgKCkge1xuICAgIHZhciBnbCA9IHRoaXMuX2NvbnRleHQ7XG4gICAgdmFyIHRleHR1cmUgPSBnbC5jcmVhdGVUZXh0dXJlKCk7XG5cbiAgICBnbC5iaW5kVGV4dHVyZShnbC5URVhUVVJFXzJELCB0ZXh0dXJlKTtcblxuICAgIGdsLnRleFBhcmFtZXRlcmkoZ2wuVEVYVFVSRV8yRCwgZ2wuVEVYVFVSRV9XUkFQX1MsIGdsLkNMQU1QX1RPX0VER0UpO1xuICAgIGdsLnRleFBhcmFtZXRlcmkoZ2wuVEVYVFVSRV8yRCwgZ2wuVEVYVFVSRV9XUkFQX1QsIGdsLkNMQU1QX1RPX0VER0UpO1xuICAgIGdsLnRleFBhcmFtZXRlcmkoZ2wuVEVYVFVSRV8yRCwgZ2wuVEVYVFVSRV9NSU5fRklMVEVSLCBnbC5ORUFSRVNUKTtcbiAgICBnbC50ZXhQYXJhbWV0ZXJpKGdsLlRFWFRVUkVfMkQsIGdsLlRFWFRVUkVfTUFHX0ZJTFRFUiwgZ2wuTkVBUkVTVCk7XG5cbiAgICByZXR1cm4gdGV4dHVyZTtcbiAgfVxuXG4gIC8qKlxuICAgKiBDcmVhdGVzIHR3byB0ZXh0dXJlcyBhbmQgZnJhbWVidWZmZXJzIHRoYXQgYXJlIHVzZWQgZm9yIHRoZSBzdGFja1xuICAgKiByZW5kZXJpbmdcbiAgICogQHByaXZhdGVcbiAgICovXG4gIC8qIGlzdGFuYnVsIGlnbm9yZSBuZXh0ICovXG4gIF9jcmVhdGVGcmFtZWJ1ZmZlcnMgKCkge1xuICAgIGZvcih2YXIgaSA9IDA7IGkgPCAyOyBpKyspIHtcbiAgICAgIGxldCB7IGZibywgdGV4dHVyZSB9ID0gdGhpcy5fY3JlYXRlRnJhbWVidWZmZXIoKTtcbiAgICAgIHRoaXMuX3RleHR1cmVzLnB1c2godGV4dHVyZSk7XG4gICAgICB0aGlzLl9mcmFtZWJ1ZmZlcnMucHVzaChmYm8pO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBDcmVhdGVzIGFuZCByZXR1cm5zIGEgZnJhbWUgYnVmZmVyIGFuZCB0ZXh0dXJlXG4gICAqIEByZXR1cm4ge09iamVjdH1cbiAgICogQHByaXZhdGVcbiAgICovXG4gIF9jcmVhdGVGcmFtZWJ1ZmZlciAoKSB7XG4gICAgbGV0IGdsID0gdGhpcy5fY29udGV4dDtcblxuICAgIC8vIENyZWF0ZSB0ZXh0dXJlXG4gICAgbGV0IHRleHR1cmUgPSB0aGlzLmNyZWF0ZVRleHR1cmUoKTtcbiAgICBnbC50ZXhJbWFnZTJEKGdsLlRFWFRVUkVfMkQsIDAsIGdsLlJHQkEsIHRoaXMuX2NhbnZhcy53aWR0aCwgdGhpcy5fY2FudmFzLmhlaWdodCwgMCwgZ2wuUkdCQSwgZ2wuVU5TSUdORURfQllURSwgbnVsbCk7XG5cbiAgICAvLyBDcmVhdGUgZnJhbWVidWZmZXJcbiAgICBsZXQgZmJvID0gZ2wuY3JlYXRlRnJhbWVidWZmZXIoKTtcbiAgICBnbC5iaW5kRnJhbWVidWZmZXIoZ2wuRlJBTUVCVUZGRVIsIGZibyk7XG5cbiAgICAvLyBBdHRhY2ggdGhlIHRleHR1cmVcbiAgICBnbC5mcmFtZWJ1ZmZlclRleHR1cmUyRChnbC5GUkFNRUJVRkZFUiwgZ2wuQ09MT1JfQVRUQUNITUVOVDAsIGdsLlRFWFRVUkVfMkQsIHRleHR1cmUsIDApO1xuXG4gICAgcmV0dXJuIHsgZmJvLCB0ZXh0dXJlIH07XG4gIH1cblxuICAvKipcbiAgICogUmVzaXplcyB0aGUgY3VycmVudCBjYW52YXMgcGljdHVyZSB0byB0aGUgZ2l2ZW4gZGltZW5zaW9uc1xuICAgKiBAcGFyYW0gIHtWZWN0b3IyfSBkaW1lbnNpb25zXG4gICAqIEB0b2RvIFVzZSBhIGRvd25zYW1wbGluZyBzaGFkZXIgZm9yIHNtb290aGVyIGltYWdlIHJlc2l6aW5nXG4gICAqL1xuICAvKiBpc3RhbmJ1bCBpZ25vcmUgbmV4dCAqL1xuICByZXNpemVUbyAoZGltZW5zaW9ucykge1xuICAgIHZhciBnbCA9IHRoaXMuX2NvbnRleHQ7XG5cbiAgICAvLyBSZXNpemUgdGhlIGNhbnZhc1xuICAgIHRoaXMuX2NhbnZhcy53aWR0aCA9IGRpbWVuc2lvbnMueDtcbiAgICB0aGlzLl9jYW52YXMuaGVpZ2h0ID0gZGltZW5zaW9ucy55O1xuXG4gICAgLy8gVXBkYXRlIHRoZSB2aWV3cG9ydCBkaW1lbnNpb25zXG4gICAgZ2wudmlld3BvcnQoMCwgMCwgdGhpcy5fY2FudmFzLndpZHRoLCB0aGlzLl9jYW52YXMuaGVpZ2h0KTtcblxuICAgIC8vIERyYXcgdGhlIHJlY3RhbmdsZVxuICAgIGdsLmRyYXdBcnJheXMoZ2wuVFJJQU5HTEVTLCAwLCA2KTtcbiAgfVxuXG4gIC8qKlxuICAgKiBSZXR1cm5zIHRoZSBjdXJyZW50IGZyYW1lYnVmZmVyXG4gICAqIEByZXR1cm4ge1dlYkdMRnJhbWVidWZmZXJ9XG4gICAqL1xuICBnZXRDdXJyZW50RnJhbWVidWZmZXIgKCkge1xuICAgIHJldHVybiB0aGlzLl9mcmFtZWJ1ZmZlcnNbdGhpcy5fYnVmZmVySW5kZXggJSAyXTtcbiAgfVxuXG4gIC8qKlxuICAgKiBSZXR1cm5zIHRoZSBjdXJyZW50IHRleHR1cmVcbiAgICogQHJldHVybiB7V2ViR0xUZXh0dXJlfVxuICAgKi9cbiAgZ2V0Q3VycmVudFRleHR1cmUgKCkge1xuICAgIHJldHVybiB0aGlzLl90ZXh0dXJlc1t0aGlzLl9idWZmZXJJbmRleCAlIDJdO1xuICB9XG5cbiAgLyoqXG4gICAqIEluY3JlYXNlcyB0aGUgYnVmZmVyIGluZGV4XG4gICAqL1xuICBzZWxlY3ROZXh0QnVmZmVyICgpIHtcbiAgICB0aGlzLl9idWZmZXJJbmRleCsrO1xuICB9XG5cbiAgLyoqXG4gICAqIFJldHVybnMgdGhlIGRlZmF1bHQgcHJvZ3JhbVxuICAgKiBAcmV0dXJuIHtXZWJHTFByb2dyYW19XG4gICAqL1xuICBnZXREZWZhdWx0UHJvZ3JhbSAoKSB7XG4gICAgcmV0dXJuIHRoaXMuX2RlZmF1bHRQcm9ncmFtO1xuICB9XG5cbiAgLyoqXG4gICAqIFJldHVybnMgdGhlIGxhc3QgdGV4dHVyZSB0aGF0IGhhcyBiZWVuIGRyYXduIHRvXG4gICAqIEByZXR1cm4ge1dlYkdMVGV4dHVyZX1cbiAgICovXG4gIGdldExhc3RUZXh0dXJlICgpIHtcbiAgICByZXR1cm4gdGhpcy5fbGFzdFRleHR1cmU7XG4gIH1cblxuICAvKipcbiAgICogUmV0dXJucyBhbGwgdGV4dHVyZXNcbiAgICogQHJldHVybiB7QXJyYXkuPFdlYkdMVGV4dHVyZT59XG4gICAqL1xuICBnZXRUZXh0dXJlcyAoKSB7XG4gICAgcmV0dXJuIHRoaXMuX3RleHR1cmVzO1xuICB9XG5cbiAgLyoqXG4gICAqIFNldHMgdGhlIGxhc3QgdGV4dHVyZVxuICAgKiBAcGFyYW0ge1dlYkdMVGV4dHVyZX0gdGV4dHVyZVxuICAgKi9cbiAgc2V0TGFzdFRleHR1cmUgKHRleHR1cmUpIHtcbiAgICB0aGlzLl9sYXN0VGV4dHVyZSA9IHRleHR1cmU7XG4gIH1cblxuICAvKipcbiAgICogUmVzZXRzIHRoZSByZW5kZXJlclxuICAgKiBAb3ZlcnJpZGVcbiAgICovXG4gIHJlc2V0ICgpIHtcbiAgICB0aGlzLl9sYXN0VGV4dHVyZSA9IG51bGw7XG4gICAgdGhpcy5fdGV4dHVyZXMgPSBbXTtcbiAgICB0aGlzLl9mcmFtZWJ1ZmZlcnMgPSBbXTtcbiAgICB0aGlzLl9idWZmZXJJbmRleCA9IDA7XG5cbiAgICB0aGlzLl9jcmVhdGVGcmFtZWJ1ZmZlcnMoKTtcbiAgICB0aGlzLnNldExhc3RUZXh0dXJlKHRoaXMuX2lucHV0VGV4dHVyZSk7XG4gIH1cbn1cblxuZXhwb3J0IGRlZmF1bHQgV2ViR0xSZW5kZXJlcjtcbiIsIlwidXNlIHN0cmljdFwiO1xuLyohXG4gKiBDb3B5cmlnaHQgKGMpIDIwMTMtMjAxNSA5ZWxlbWVudHMgR21iSFxuICpcbiAqIFJlbGVhc2VkIHVuZGVyIEF0dHJpYnV0aW9uLU5vbkNvbW1lcmNpYWwgMy4wIFVucG9ydGVkXG4gKiBodHRwOi8vY3JlYXRpdmVjb21tb25zLm9yZy9saWNlbnNlcy9ieS1uYy8zLjAvXG4gKlxuICogRm9yIGNvbW1lcmNpYWwgdXNlLCBwbGVhc2UgY29udGFjdCB1cyBhdCBjb250YWN0QDllbGVtZW50cy5jb21cbiAqL1xuXG5jbGFzcyBIZWxwZXJzIHtcbiAgY29uc3RydWN0b3IgKGtpdCwgdWksIG9wdGlvbnMpIHtcbiAgICB0aGlzLl9raXQgPSBraXQ7XG4gICAgdGhpcy5fdWkgPSB1aTtcbiAgICB0aGlzLl9vcHRpb25zID0gb3B0aW9ucztcbiAgfVxuXG4gIGFzc2V0UGF0aCAoYXNzZXQpIHtcbiAgICByZXR1cm4gdGhpcy5fb3B0aW9ucy5hc3NldHNVcmwgKyBcIi9cIiArIGFzc2V0O1xuICB9XG59XG5cbmV4cG9ydCBkZWZhdWx0IEhlbHBlcnM7XG4iLCJcInVzZSBzdHJpY3RcIjtcbi8qIVxuICogQ29weXJpZ2h0IChjKSAyMDEzLTIwMTUgOWVsZW1lbnRzIEdtYkhcbiAqXG4gKiBSZWxlYXNlZCB1bmRlciBBdHRyaWJ1dGlvbi1Ob25Db21tZXJjaWFsIDMuMCBVbnBvcnRlZFxuICogaHR0cDovL2NyZWF0aXZlY29tbW9ucy5vcmcvbGljZW5zZXMvYnktbmMvMy4wL1xuICpcbiAqIEZvciBjb21tZXJjaWFsIHVzZSwgcGxlYXNlIGNvbnRhY3QgdXMgYXQgY29udGFjdEA5ZWxlbWVudHMuY29tXG4gKi9cbmltcG9ydCBkb3QgZnJvbSBcImRvdFwiO1xuaW1wb3J0IFV0aWxzIGZyb20gXCIuLi8uLi9saWIvdXRpbHNcIjtcbmltcG9ydCBIZWxwZXJzIGZyb20gXCIuL2hlbHBlcnNcIjtcblxuY2xhc3MgQmFzZVVJIHtcbiAgY29uc3RydWN0b3IgKGtpdCwgb3B0aW9ucykge1xuICAgIHRoaXMuX2tpdCA9IGtpdDtcbiAgICB0aGlzLl9vcHRpb25zID0gb3B0aW9ucztcbiAgICB0aGlzLl9vcGVyYXRpb25zID0gW107XG4gICAgdGhpcy5faGVscGVycyA9IG5ldyBIZWxwZXJzKHRoaXMua2l0LCB0aGlzLCBvcHRpb25zKTtcbiAgICB0aGlzLnNlbGVjdE9wZXJhdGlvbnMobnVsbCk7XG4gIH1cblxuICAvKipcbiAgICogUHJlcGFyZXMgdGhlIFVJIGZvciB1c2VcbiAgICovXG4gIHJ1biAoKSB7XG4gICAgdGhpcy5fYXR0YWNoKCk7XG4gIH1cblxuICAvKipcbiAgICogUmVuZGVycyBhbmQgYXR0YWNoZXMgdGhlIFVJIEhUTUxcbiAgICogQHByaXZhdGVcbiAgICovXG4gIF9hdHRhY2ggKCkge1xuICAgIGlmICh0aGlzLl9vcHRpb25zLmNvbnRhaW5lciA9PT0gbnVsbCkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKFwiQmFzZVVJI2F0dGFjaDogTm8gY29udGFpbmVyIHNldC5cIik7XG4gICAgfVxuXG4gICAgbGV0IGh0bWwgPSB0aGlzLl9yZW5kZXIoKTtcbiAgICB0aGlzLl9vcHRpb25zLmNvbnRhaW5lci5pbm5lckhUTUwgPSBodG1sO1xuXG4gICAgLy8gQ29udGFpbmVyIGhhcyB0byBiZSBwb3NpdGlvbjogcmVsYXRpdmVcbiAgICB0aGlzLl9vcHRpb25zLmNvbnRhaW5lci5zdHlsZS5wb3NpdGlvbiA9IFwicmVsYXRpdmVcIjtcbiAgfVxuXG4gIC8qKlxuICAgKiBSZW5kZXJzIHRoZSB0ZW1wbGF0ZVxuICAgKiBAcHJpdmF0ZVxuICAgKi9cbiAgX3JlbmRlciAoKSB7XG4gICAgaWYgKHR5cGVvZiB0aGlzLl90ZW1wbGF0ZSA9PT0gXCJ1bmRlZmluZWRcIikge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKFwiQmFzZVVJI19yZW5kZXI6IE5vIHRlbXBsYXRlIHNldC5cIik7XG4gICAgfVxuXG4gICAgbGV0IHJlbmRlckZuID0gZG90LnRlbXBsYXRlKHRoaXMuX3RlbXBsYXRlKTtcbiAgICByZXR1cm4gcmVuZGVyRm4odGhpcy5jb250ZXh0KTtcbiAgfVxuXG4gIC8qKlxuICAgKiBTZWxlY3RzIHRoZSBlbmFibGVkIG9wZXJhdGlvbnNcbiAgICogQHBhcmFtIHtJbWdseUtpdC5TZWxlY3Rvcn1cbiAgICovXG4gIHNlbGVjdE9wZXJhdGlvbnMgKHNlbGVjdG9yKSB7XG4gICAgbGV0IHsgcmVnaXN0ZXJlZE9wZXJhdGlvbnMgfSA9IHRoaXMuX2tpdDtcbiAgICBsZXQgb3BlcmF0aW9uSWRlbnRpZmllcnMgPSBPYmplY3Qua2V5cyhyZWdpc3RlcmVkT3BlcmF0aW9ucyk7XG5cbiAgICBsZXQgc2VsZWN0ZWRPcGVyYXRpb25zID0gVXRpbHMuc2VsZWN0KG9wZXJhdGlvbklkZW50aWZpZXJzLCBzZWxlY3Rvcik7XG4gICAgdGhpcy5fb3BlcmF0aW9ucyA9IHNlbGVjdGVkT3BlcmF0aW9ucy5tYXAoKGlkZW50aWZpZXIpID0+IHtcbiAgICAgIHJldHVybiByZWdpc3RlcmVkT3BlcmF0aW9uc1tpZGVudGlmaWVyXTtcbiAgICB9KTtcbiAgfVxuXG4gIC8qKlxuICAgKiBDaGVja3Mgd2hldGhlciB0aGUgb3BlcmF0aW9uIHdpdGggdGhlIGdpdmVuIGlkZW50aWZpZXIgaXMgc2VsZWN0ZWRcbiAgICogQHBhcmFtIHtTdHJpbmd9IGlkZW50aWZpZXJcbiAgICogQHJldHVybnMge0Jvb2xlYW59XG4gICAqL1xuICBpc09wZXJhdGlvblNlbGVjdGVkIChpZGVudGlmaWVyKSB7XG4gICAgbGV0IG9wZXJhdGlvbklkZW50aWZpZXJzID0gdGhpcy5fb3BlcmF0aW9ucy5tYXAoKG9wZXJhdGlvbikgPT4ge1xuICAgICAgcmV0dXJuIG9wZXJhdGlvbi5wcm90b3R5cGUuaWRlbnRpZmllcjtcbiAgICB9KTtcbiAgICByZXR1cm4gb3BlcmF0aW9uSWRlbnRpZmllcnMuaW5kZXhPZihpZGVudGlmaWVyKSAhPT0gLTE7XG4gIH1cblxuICAvKipcbiAgICogVGhlIGRhdGEgdGhhdCBpcyBwYXNzZWQgdG8gdGhlIHRlbXBsYXRlIHJlbmRlcmVyXG4gICAqIEB0eXBlIHtPYmplY3R9XG4gICAqL1xuICBnZXQgY29udGV4dCAoKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgIG9wZXJhdGlvbnM6IHRoaXMuX29wZXJhdGlvbnMsXG4gICAgICBoZWxwZXJzOiB0aGlzLl9oZWxwZXJzXG4gICAgfTtcbiAgfVxuXG4gIC8qKlxuICAgKiBUaGUgRE9NIGNvbnRhaW5lclxuICAgKiBAdHlwZSB7RE9NRWxlbWVudH1cbiAgICovXG4gIGdldCBjb250YWluZXIgKCkge1xuICAgIHJldHVybiB0aGlzLl9vcHRpb25zLmNvbnRhaW5lcjtcbiAgfVxuXG4gIC8qKlxuICAgKiBUaGUgc2VsZWN0ZWQgLyBhY3RpdmUgb3BlcmF0aW9uc1xuICAgKiBAdHlwZSB7QXJyYXkuPEltZ2x5S2l0Lk9wZXJhdGlvbj59XG4gICAqL1xuICBnZXQgb3BlcmF0aW9ucyAoKSB7XG4gICAgcmV0dXJuIHRoaXMuX29wZXJhdGlvbnM7XG4gIH1cblxuICAvKipcbiAgICogVGhlIG9wdGlvbnNcbiAgICogQHR5cGUge09iamVjdH1cbiAgICovXG4gIGdldCBvcHRpb25zICgpIHtcbiAgICByZXR1cm4gdGhpcy5fb3B0aW9ucztcbiAgfVxuXG4gIC8qKlxuICAgKiBUaGUgY2FudmFzIG9iamVjdFxuICAgKiBAdHlwZSB7Q2FudmFzfVxuICAgKi9cbiAgZ2V0IGNhbnZhcyAoKSB7XG4gICAgcmV0dXJuIHRoaXMuX2NhbnZhcztcbiAgfVxuXG4gIC8qKlxuICAgKiBUaGUgaGVscGVyc1xuICAgKiBAdHlwZSB7SGVscGVyc31cbiAgICovXG4gIGdldCBoZWxwZXJzICgpIHtcbiAgICByZXR1cm4gdGhpcy5faGVscGVycztcbiAgfVxuXG4gIC8qKlxuICAgKiBUaGUgaW1hZ2VcbiAgICogQHR5cGUge0ltYWdlfVxuICAgKi9cbiAgZ2V0IGltYWdlICgpIHtcbiAgICByZXR1cm4gdGhpcy5fb3B0aW9ucy5pbWFnZTtcbiAgfVxufVxuXG5leHBvcnQgZGVmYXVsdCBCYXNlVUk7XG4iLCJcInVzZSBzdHJpY3RcIjtcbi8qIVxuICogQ29weXJpZ2h0IChjKSAyMDEzLTIwMTUgOWVsZW1lbnRzIEdtYkhcbiAqXG4gKiBSZWxlYXNlZCB1bmRlciBBdHRyaWJ1dGlvbi1Ob25Db21tZXJjaWFsIDMuMCBVbnBvcnRlZFxuICogaHR0cDovL2NyZWF0aXZlY29tbW9ucy5vcmcvbGljZW5zZXMvYnktbmMvMy4wL1xuICpcbiAqIEZvciBjb21tZXJjaWFsIHVzZSwgcGxlYXNlIGNvbnRhY3QgdXMgYXQgY29udGFjdEA5ZWxlbWVudHMuY29tXG4gKi9cblxuaW1wb3J0IENvbnRyb2wgZnJvbSBcIi4vY29udHJvbFwiO1xuaW1wb3J0IFNsaWRlciBmcm9tIFwiLi4vbGliL3NsaWRlclwiO1xubGV0IGZzID0gcmVxdWlyZShcImZzXCIpO1xuXG5jbGFzcyBCcmlnaHRuZXNzQ29udHJvbHMgZXh0ZW5kcyBDb250cm9sIHtcbiAgLyoqXG4gICAqIEEgdW5pcXVlIHN0cmluZyB0aGF0IGlkZW50aWZpZXMgdGhpcyBjb250cm9sLlxuICAgKiBAdHlwZSB7U3RyaW5nfVxuICAgKi9cbiAgZ2V0IGlkZW50aWZpZXIgKCkge1xuICAgIHJldHVybiBcImJyaWdodG5lc3NcIjtcbiAgfVxuXG4gIC8qKlxuICAgKiBUaGUgZW50cnkgcG9pbnQgZm9yIHRoaXMgY29udHJvbFxuICAgKi9cbiAgaW5pdCAoKSB7XG4gICAgdGhpcy5fb3BlcmF0aW9uID0gdGhpcy5fdWkub3BlcmF0aW9ucy5icmlnaHRuZXNzO1xuXG4gICAgbGV0IGNvbnRyb2xzVGVtcGxhdGUgPSBmcy5yZWFkRmlsZVN5bmMoX19kaXJuYW1lICsgXCIvLi4vLi4vLi4vdGVtcGxhdGVzL25pZ2h0L29wZXJhdGlvbnMvYnJpZ2h0bmVzc19jb250cm9scy5qc3RcIiwgXCJ1dGYtOFwiKTtcbiAgICB0aGlzLl9jb250cm9sc1RlbXBsYXRlID0gY29udHJvbHNUZW1wbGF0ZTtcbiAgICB0aGlzLl9wYXJ0aWFsVGVtcGxhdGVzLnB1c2goU2xpZGVyLnRlbXBsYXRlKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBHZXRzIGNhbGxlZCB3aGVuIHRoaXMgY29udHJvbCBpcyBhY3RpdmF0ZWRcbiAgICogQG92ZXJyaWRlXG4gICAqL1xuICBfb25FbnRlciAoKSB7XG4gICAgc3VwZXIuX29uRW50ZXIoKTtcblxuICAgIGxldCBzbGlkZXJFbGVtZW50ID0gdGhpcy5fY29udHJvbHMucXVlcnlTZWxlY3RvcihcIi5pbWdseWtpdC1zbGlkZXJcIik7XG4gICAgdGhpcy5fc2xpZGVyID0gbmV3IFNsaWRlcihzbGlkZXJFbGVtZW50LCB7XG4gICAgICBtaW5WYWx1ZTogLTEsXG4gICAgICBtYXhWYWx1ZTogMVxuICAgIH0pO1xuICAgIHRoaXMuX3NsaWRlci5vbihcInVwZGF0ZVwiLCB0aGlzLl9vblVwZGF0ZS5iaW5kKHRoaXMpKTtcblxuICAgIC8vIEluaXRpYWxseSBzZXQgdmFsdWVcbiAgICBsZXQgYnJpZ2h0bmVzcyA9IHRoaXMuX29wZXJhdGlvbi5nZXRCcmlnaHRuZXNzKCk7XG4gICAgdGhpcy5faW5pdGlhbEJyaWdodG5lc3MgPSBicmlnaHRuZXNzO1xuICAgIHRoaXMuX3NsaWRlci5zZXRWYWx1ZShicmlnaHRuZXNzKTtcblxuICAgIHRoaXMuX2luaXRpYWxJZGVudGl0eSA9IHRoaXMuX29wZXJhdGlvbi5pc0lkZW50aXR5O1xuICB9XG5cbiAgLyoqXG4gICAqIEdldHMgY2FsbGVkIHdoZW4gdGhlIGJhY2sgYnV0dG9uIGhhcyBiZWVuIGNsaWNrZWRcbiAgICogQG92ZXJyaWRlXG4gICAqL1xuICBfb25CYWNrICgpIHtcbiAgICBzdXBlci5fb25CYWNrKCk7XG4gICAgdGhpcy5fb3BlcmF0aW9uLnNldEJyaWdodG5lc3ModGhpcy5faW5pdGlhbEJyaWdodG5lc3MpO1xuICAgIHRoaXMuX3VpLmNhbnZhcy5yZW5kZXIoKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBHZXRzIGNhbGxlZCB3aGVuIHRoZSB2YWx1ZSBoYXMgYmVlbiB1cGRhdGVkXG4gICAqIEBvdmVycmlkZVxuICAgKi9cbiAgX29uVXBkYXRlICh2YWx1ZSkge1xuICAgIHRoaXMuX29wZXJhdGlvbi5zZXRCcmlnaHRuZXNzKHZhbHVlKTtcbiAgICB0aGlzLl91aS5jYW52YXMucmVuZGVyKCk7XG4gIH1cblxuICAvKipcbiAgICogR2V0cyBjYWxsZWQgd2hlbiB0aGUgZG9uZSBidXR0b24gaGFzIGJlZW4gY2xpY2tlZFxuICAgKiBAb3ZlcnJpZGVcbiAgICovXG4gIF9vbkRvbmUgKCkge1xuICAgIHRoaXMuX3VpLmFkZEhpc3RvcnkodGhpcy5fb3BlcmF0aW9uLCB7XG4gICAgICBicmlnaHRuZXNzOiB0aGlzLl9pbml0aWFsQnJpZ2h0bmVzc1xuICAgIH0sIHRoaXMuX2luaXRpYWxJZGVudGl0eSk7XG4gIH1cbn1cblxuZXhwb3J0IGRlZmF1bHQgQnJpZ2h0bmVzc0NvbnRyb2xzO1xuIiwiXCJ1c2Ugc3RyaWN0XCI7XG4vKiFcbiAqIENvcHlyaWdodCAoYykgMjAxMy0yMDE1IDllbGVtZW50cyBHbWJIXG4gKlxuICogUmVsZWFzZWQgdW5kZXIgQXR0cmlidXRpb24tTm9uQ29tbWVyY2lhbCAzLjAgVW5wb3J0ZWRcbiAqIGh0dHA6Ly9jcmVhdGl2ZWNvbW1vbnMub3JnL2xpY2Vuc2VzL2J5LW5jLzMuMC9cbiAqXG4gKiBGb3IgY29tbWVyY2lhbCB1c2UsIHBsZWFzZSBjb250YWN0IHVzIGF0IGNvbnRhY3RAOWVsZW1lbnRzLmNvbVxuICovXG5cbmltcG9ydCBDb250cm9sIGZyb20gXCIuL2NvbnRyb2xcIjtcbmltcG9ydCBTbGlkZXIgZnJvbSBcIi4uL2xpYi9zbGlkZXJcIjtcbmxldCBmcyA9IHJlcXVpcmUoXCJmc1wiKTtcblxuY2xhc3MgQ29udHJhc3RDb250cm9scyBleHRlbmRzIENvbnRyb2wge1xuICAvKipcbiAgICogQSB1bmlxdWUgc3RyaW5nIHRoYXQgaWRlbnRpZmllcyB0aGlzIGNvbnRyb2wuXG4gICAqIEB0eXBlIHtTdHJpbmd9XG4gICAqL1xuICBnZXQgaWRlbnRpZmllciAoKSB7XG4gICAgcmV0dXJuIFwiY29udHJhc3RcIjtcbiAgfVxuXG4gIC8qKlxuICAgKiBFbnRyeSBwb2ludCBmb3IgdGhpcyBjb250cm9sXG4gICAqL1xuICBpbml0ICgpIHtcbiAgICB0aGlzLl9vcGVyYXRpb24gPSB0aGlzLl91aS5vcGVyYXRpb25zLmNvbnRyYXN0O1xuXG4gICAgbGV0IGNvbnRyb2xzVGVtcGxhdGUgPSBmcy5yZWFkRmlsZVN5bmMoX19kaXJuYW1lICsgXCIvLi4vLi4vLi4vdGVtcGxhdGVzL25pZ2h0L29wZXJhdGlvbnMvY29udHJhc3RfY29udHJvbHMuanN0XCIsIFwidXRmLThcIik7XG4gICAgdGhpcy5fY29udHJvbHNUZW1wbGF0ZSA9IGNvbnRyb2xzVGVtcGxhdGU7XG4gICAgdGhpcy5fcGFydGlhbFRlbXBsYXRlcy5wdXNoKFNsaWRlci50ZW1wbGF0ZSk7XG4gIH1cblxuICAvKipcbiAgICogR2V0cyBjYWxsZWQgd2hlbiB0aGlzIGNvbnRyb2wgaXMgYWN0aXZhdGVkXG4gICAqIEBvdmVycmlkZVxuICAgKi9cbiAgX29uRW50ZXIgKCkge1xuICAgIHN1cGVyLl9vbkVudGVyKCk7XG5cbiAgICBsZXQgc2xpZGVyRWxlbWVudCA9IHRoaXMuX2NvbnRyb2xzLnF1ZXJ5U2VsZWN0b3IoXCIuaW1nbHlraXQtc2xpZGVyXCIpO1xuICAgIHRoaXMuX3NsaWRlciA9IG5ldyBTbGlkZXIoc2xpZGVyRWxlbWVudCwge1xuICAgICAgbWluVmFsdWU6IDAsXG4gICAgICBtYXhWYWx1ZTogMlxuICAgIH0pO1xuICAgIHRoaXMuX3NsaWRlci5vbihcInVwZGF0ZVwiLCB0aGlzLl9vblVwZGF0ZS5iaW5kKHRoaXMpKTtcblxuICAgIC8vIEluaXRpYWxseSBzZXQgdmFsdWVcbiAgICBsZXQgY29udHJhc3QgPSB0aGlzLl9vcGVyYXRpb24uZ2V0Q29udHJhc3QoKTtcbiAgICB0aGlzLl9pbml0aWFsQ29udHJhc3QgPSBjb250cmFzdDtcbiAgICB0aGlzLl9zbGlkZXIuc2V0VmFsdWUoY29udHJhc3QpO1xuXG4gICAgdGhpcy5faW5pdGlhbElkZW50aXR5ID0gdGhpcy5fb3BlcmF0aW9uLmlzSWRlbnRpdHk7XG4gIH1cblxuICAvKipcbiAgICogR2V0cyBjYWxsZWQgd2hlbiB0aGUgYmFjayBidXR0b24gaGFzIGJlZW4gY2xpY2tlZFxuICAgKiBAb3ZlcnJpZGVcbiAgICovXG4gIF9vbkJhY2sgKCkge1xuICAgIHN1cGVyLl9vbkJhY2soKTtcbiAgICB0aGlzLl9vcGVyYXRpb24uc2V0Q29udHJhc3QodGhpcy5faW5pdGlhbENvbnRyYXN0KTtcbiAgICB0aGlzLl91aS5jYW52YXMucmVuZGVyKCk7XG4gIH1cblxuICAvKipcbiAgICogR2V0cyBjYWxsZWQgd2hlbiB0aGUgdmFsdWUgaGFzIGJlZW4gdXBkYXRlZFxuICAgKiBAb3ZlcnJpZGVcbiAgICovXG4gIF9vblVwZGF0ZSAodmFsdWUpIHtcbiAgICB0aGlzLl9vcGVyYXRpb24uc2V0Q29udHJhc3QodmFsdWUpO1xuICAgIHRoaXMuX3VpLmNhbnZhcy5yZW5kZXIoKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBHZXRzIGNhbGxlZCB3aGVuIHRoZSBkb25lIGJ1dHRvbiBoYXMgYmVlbiBjbGlja2VkXG4gICAqIEBvdmVycmlkZVxuICAgKi9cbiAgX29uRG9uZSAoKSB7XG4gICAgdGhpcy5fdWkuYWRkSGlzdG9yeSh0aGlzLl9vcGVyYXRpb24sIHtcbiAgICAgIGNvbnRyYXN0OiB0aGlzLl9pbml0aWFsQ29udHJhc3RcbiAgICB9LCB0aGlzLl9pbml0aWFsSWRlbnRpdHkpO1xuICB9XG59XG5cbmV4cG9ydCBkZWZhdWx0IENvbnRyYXN0Q29udHJvbHM7XG4iLCJcInVzZSBzdHJpY3RcIjtcbi8qIVxuICogQ29weXJpZ2h0IChjKSAyMDEzLTIwMTUgOWVsZW1lbnRzIEdtYkhcbiAqXG4gKiBSZWxlYXNlZCB1bmRlciBBdHRyaWJ1dGlvbi1Ob25Db21tZXJjaWFsIDMuMCBVbnBvcnRlZFxuICogaHR0cDovL2NyZWF0aXZlY29tbW9ucy5vcmcvbGljZW5zZXMvYnktbmMvMy4wL1xuICpcbiAqIEZvciBjb21tZXJjaWFsIHVzZSwgcGxlYXNlIGNvbnRhY3QgdXMgYXQgY29udGFjdEA5ZWxlbWVudHMuY29tXG4gKi9cblxuaW1wb3J0IGRvdCBmcm9tIFwiZG90XCI7XG5pbXBvcnQgSGVscGVycyBmcm9tIFwiLi4vLi4vYmFzZS9oZWxwZXJzXCI7XG5pbXBvcnQgRXZlbnRFbWl0dGVyIGZyb20gXCIuLi8uLi8uLi9saWIvZXZlbnQtZW1pdHRlclwiO1xuXG5jbGFzcyBDb250cm9sIGV4dGVuZHMgRXZlbnRFbWl0dGVyIHtcbiAgY29uc3RydWN0b3IgKGtpdCwgdWksIG9wZXJhdGlvbikge1xuICAgIHN1cGVyKCk7XG5cbiAgICB0aGlzLl9raXQgPSBraXQ7XG4gICAgdGhpcy5fdWkgPSB1aTtcbiAgICB0aGlzLl9vcGVyYXRpb24gPSBvcGVyYXRpb247XG4gICAgdGhpcy5faGVscGVycyA9IG5ldyBIZWxwZXJzKHRoaXMuX2tpdCwgdGhpcy5fdWksIHRoaXMuX3VpLm9wdGlvbnMpO1xuICAgIHRoaXMuX3BhcnRpYWxUZW1wbGF0ZXMgPSBbXTtcbiAgICB0aGlzLl9hY3RpdmUgPSBmYWxzZTtcblxuICAgIHRoaXMuaW5pdCgpO1xuICB9XG5cbiAgLyoqXG4gICAqIEEgdW5pcXVlIHN0cmluZyB0aGF0IGlkZW50aWZpZXMgdGhpcyBjb250cm9sLlxuICAgKiBAdHlwZSB7U3RyaW5nfVxuICAgKi9cbiAgZ2V0IGlkZW50aWZpZXIgKCkge1xuICAgIHJldHVybiBudWxsO1xuICB9XG5cbiAgLyoqXG4gICAqIFNldHMgdGhlIGNvbnRhaW5lcnMgdGhhdCB0aGUgY29udHJvbCB3aWxsIGJlIHJlbmRlcmVkIHRvXG4gICAqIEBwYXJhbSB7RE9NRWxlbWVudH0gY29udHJvbHNDb250YWluZXJcbiAgICogQHBhcmFtIHtET01FbGVtZW50fSBjYW52YXNDb250cm9sc0NvbnRhaW5lclxuICAgKi9cbiAgc2V0Q29udGFpbmVycyAoY29udHJvbHNDb250YWluZXIsIGNhbnZhc0NvbnRyb2xzQ29udGFpbmVyKSB7XG4gICAgdGhpcy5fY29udHJvbHNDb250YWluZXIgPSBjb250cm9sc0NvbnRhaW5lcjtcbiAgICB0aGlzLl9jYW52YXNDb250cm9sc0NvbnRhaW5lciA9IGNhbnZhc0NvbnRyb2xzQ29udGFpbmVyO1xuICB9XG5cbiAgLyoqXG4gICAqIFRoZSBlbnRyeSBwb2ludCBmb3IgdGhpcyBjb250cm9sXG4gICAqL1xuICBpbml0ICgpIHtcblxuICB9XG5cbiAgLyoqXG4gICAqIFJlbmRlcnMgdGhlIGNvbnRyb2xzXG4gICAqIEBwcml2YXRlXG4gICAqL1xuICBfcmVuZGVyQWxsQ29udHJvbHMgKCkge1xuICAgIHRoaXMuX3JlbmRlckNvbnRyb2xzKCk7XG4gICAgdGhpcy5fcmVuZGVyQ2FudmFzQ29udHJvbHMoKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBSZW5kZXJzIHRoZSBjb250cm9sc1xuICAgKiBAcHJpdmF0ZVxuICAgKi9cbiAgX3JlbmRlckNvbnRyb2xzICgpIHtcbiAgICBpZiAodHlwZW9mIHRoaXMuX2NvbnRyb2xzVGVtcGxhdGUgPT09IFwidW5kZWZpbmVkXCIpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcihcIkNvbnRyb2wjX3JlbmRlck92ZXJ2aWV3Q29udHJvbHM6IENvbnRyb2wgbmVlZHMgdG8gZGVmaW5lIHRoaXMuX2NvbnRyb2xzVGVtcGxhdGUuXCIpO1xuICAgIH1cblxuICAgIGxldCB0ZW1wbGF0ZSA9IHRoaXMuX3BhcnRpYWxUZW1wbGF0ZXMuY29uY2F0KFt0aGlzLl9jb250cm9sc1RlbXBsYXRlXSkuam9pbihcIlxcclxcblwiKTtcblxuICAgIC8vIFJlbmRlciB0aGUgdGVtcGxhdGVcbiAgICBsZXQgcmVuZGVyRm4gPSBkb3QudGVtcGxhdGUodGVtcGxhdGUpO1xuICAgIGxldCBodG1sID0gcmVuZGVyRm4odGhpcy5jb250ZXh0KTtcblxuICAgIGlmICh0eXBlb2YgdGhpcy5fY29udHJvbHMgIT09IFwidW5kZWZpbmVkXCIgJiYgdGhpcy5fY29udHJvbHMucGFyZW50Tm9kZSAhPT0gbnVsbCkge1xuICAgICAgICB0aGlzLl9jb250cm9scy5wYXJlbnROb2RlLnJlbW92ZUNoaWxkKHRoaXMuX2NvbnRyb2xzKTtcbiAgICB9XG5cbiAgICAvLyBDcmVhdGUgYSB3cmFwcGVyXG4gICAgdGhpcy5fY29udHJvbHMgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xuICAgIHRoaXMuX2NvbnRyb2xzLmlubmVySFRNTCA9IGh0bWw7XG5cbiAgICAvLyBBcHBlbmQgdG8gRE9NXG4gICAgdGhpcy5fY29udHJvbHNDb250YWluZXIuYXBwZW5kQ2hpbGQodGhpcy5fY29udHJvbHMpO1xuICB9XG5cbiAgLyoqXG4gICAqIFJlbmRlcnMgdGhlIGNhbnZhcyBjb250cm9sc1xuICAgKiBAcHJpdmF0ZVxuICAgKi9cbiAgX3JlbmRlckNhbnZhc0NvbnRyb2xzICgpIHtcbiAgICBpZiAodHlwZW9mIHRoaXMuX2NhbnZhc0NvbnRyb2xzVGVtcGxhdGUgPT09IFwidW5kZWZpbmVkXCIpIHtcbiAgICAgIHJldHVybjsgLy8gQ2FudmFzIGNvbnRyb2xzIGFyZSBvcHRpb25hbFxuICAgIH1cblxuICAgIGxldCB0ZW1wbGF0ZSA9IHRoaXMuX3BhcnRpYWxUZW1wbGF0ZXMuY29uY2F0KFt0aGlzLl9jYW52YXNDb250cm9sc1RlbXBsYXRlXSkuam9pbihcIlxcclxcblwiKTtcblxuICAgIC8vIFJlbmRlciB0aGUgdGVtcGxhdGVcbiAgICBsZXQgcmVuZGVyRm4gPSBkb3QudGVtcGxhdGUodGVtcGxhdGUpO1xuICAgIGxldCBodG1sID0gcmVuZGVyRm4odGhpcy5jb250ZXh0KTtcblxuICAgIC8vIENyZWF0ZSBhIHdyYXBwZXJcbiAgICB0aGlzLl9jYW52YXNDb250cm9scyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XG4gICAgdGhpcy5fY2FudmFzQ29udHJvbHMuaW5uZXJIVE1MID0gaHRtbDtcblxuICAgIC8vIEFwcGVuZCB0byBET01cbiAgICB0aGlzLl9jYW52YXNDb250cm9sc0NvbnRhaW5lci5hcHBlbmRDaGlsZCh0aGlzLl9jYW52YXNDb250cm9scyk7XG4gIH1cblxuICAvKipcbiAgICogUmVtb3ZlcyB0aGUgY29udHJvbHMgZnJvbSB0aGUgRE9NXG4gICAqIEBwcml2YXRlXG4gICAqL1xuICBfcmVtb3ZlQ29udHJvbHMgKCkge1xuICAgIHRoaXMuX2NvbnRyb2xzLnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQodGhpcy5fY29udHJvbHMpO1xuICAgIGlmICh0aGlzLl9jYW52YXNDb250cm9scykge1xuICAgICAgdGhpcy5fY2FudmFzQ29udHJvbHMucGFyZW50Tm9kZS5yZW1vdmVDaGlsZCh0aGlzLl9jYW52YXNDb250cm9scyk7XG4gICAgfVxuICB9XG5cbiAgX2hhbmRsZUJhY2tBbmREb25lQnV0dG9ucyAoKSB7XG4gICAgLy8gQmFjayBidXR0b25cbiAgICBsZXQgYmFja0J1dHRvbiA9IHRoaXMuX2NvbnRyb2xzLnF1ZXJ5U2VsZWN0b3IoXCIuaW1nbHlraXQtY29udHJvbHMtYmFja1wiKTtcbiAgICBiYWNrQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCB0aGlzLl9vbkJhY2tCdXR0b25DbGljay5iaW5kKHRoaXMpKTtcblxuICAgIC8vIERvbmUgYnV0dG9uXG4gICAgbGV0IGRvbmVCdXR0b24gPSB0aGlzLl9jb250cm9scy5xdWVyeVNlbGVjdG9yKFwiLmltZ2x5a2l0LWNvbnRyb2xzLWRvbmVcIik7XG4gICAgZG9uZUJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgdGhpcy5fb25Eb25lQnV0dG9uQ2xpY2suYmluZCh0aGlzKSk7XG4gIH1cblxuICAvKipcbiAgICogR2V0cyBjYWxsZWQgd2hlbiB0aGUgYmFjayBidXR0b24gaGFzIGJlZW4gY2xpY2tlZFxuICAgKiBAcHJpdmF0ZVxuICAgKi9cbiAgX29uQmFja0J1dHRvbkNsaWNrICgpIHtcbiAgICB0aGlzLl9vbkJhY2soKTtcbiAgICB0aGlzLmVtaXQoXCJiYWNrXCIpO1xuICB9XG5cbiAgLyoqXG4gICAqIEdldHMgY2FsbGVkIHdoZW4gdGhlIGRvbmUgYnV0dG9uIGhhcyBiZWVuIGNsaWNrZWRcbiAgICogQHByaXZhdGVcbiAgICovXG4gIF9vbkRvbmVCdXR0b25DbGljayAoKSB7XG4gICAgdGhpcy5fb25Eb25lKCk7XG4gICAgdGhpcy5lbWl0KFwiYmFja1wiKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBHZXRzIGNhbGxlZCB3aGVuIHRoaXMgY29udHJvbCBpcyBhY3RpdmF0ZWRcbiAgICogQGludGVybmFsIFVzZWQgYnkgdGhlIFNESywgZG9uJ3Qgb3ZlcnJpZGUuXG4gICAqL1xuICBlbnRlciAoKSB7XG4gICAgdGhpcy5fYWN0aXZlID0gdHJ1ZTtcblxuICAgIHRoaXMuX3VpLmhpZGVab29tKCk7XG5cbiAgICB0aGlzLl9yZW5kZXJBbGxDb250cm9scygpO1xuICAgIHRoaXMuX2hhbmRsZUJhY2tBbmREb25lQnV0dG9ucygpO1xuICAgIHRoaXMuX2VuYWJsZUNhbnZhc0NvbnRyb2xzKCk7XG4gICAgdGhpcy5fb25FbnRlcigpO1xuICB9XG5cbiAgLyoqXG4gICAqIEdldHMgY2FsbGVkIHdoZW4gdGhpcyBjb250cm9sIGlzIGRlYWN0aXZhdGVkXG4gICAqIEBpbnRlcm5hbCBVc2VkIGJ5IHRoZSBTREssIGRvbid0IG92ZXJyaWRlLlxuICAgKi9cbiAgbGVhdmUgKCkge1xuICAgIHRoaXMuX2FjdGl2ZSA9IGZhbHNlO1xuXG4gICAgdGhpcy5fdWkuc2hvd1pvb20oKTtcblxuICAgIHRoaXMuX3JlbW92ZUNvbnRyb2xzKCk7XG4gICAgdGhpcy5fZGlzYWJsZUNhbnZhc0NvbnRyb2xzKCk7XG4gICAgdGhpcy5fb25MZWF2ZSgpO1xuICB9XG5cbiAgX2VuYWJsZUNhbnZhc0NvbnRyb2xzICgpICB7XG4gICAgdGhpcy5fY2FudmFzQ29udHJvbHNDb250YWluZXIuY2xhc3NMaXN0LnJlbW92ZShcImltZ2x5a2l0LWNhbnZhcy1jb250cm9scy1kaXNhYmxlZFwiKTtcbiAgfVxuXG4gIF9kaXNhYmxlQ2FudmFzQ29udHJvbHMgKCkge1xuICAgIHRoaXMuX2NhbnZhc0NvbnRyb2xzQ29udGFpbmVyLmNsYXNzTGlzdC5hZGQoXCJpbWdseWtpdC1jYW52YXMtY29udHJvbHMtZGlzYWJsZWRcIik7XG4gIH1cblxuICAvLyBQcm90ZWN0ZWQgbWV0aG9kc1xuXG4gIC8qKlxuICAgKiBHZXRzIGNhbGxlZCB3aGVuIHRoaXMgY29udHJvbCBpcyBhY3RpdmF0ZWQuXG4gICAqIEBwcm90ZWN0ZWRcbiAgICovXG4gIF9vbkVudGVyICgpIHt9XG5cbiAgLyoqXG4gICAqIEdldHMgY2FsbGVkIHdoZW4gdGhpcyBjb250cm9sIGlzIGRlYWN0aXZhdGVkXG4gICAqIEBwcm90ZWN0ZWRcbiAgICovXG4gIF9vbkxlYXZlICgpIHt9XG5cbiAgLyoqXG4gICAqIEdldHMgY2FsbGVkIHdoZW4gdGhlIGJhY2sgYnV0dG9uIGhhcyBiZWVuIGNsaWNrZWRcbiAgICogQHByb3RlY3RlZFxuICAgKi9cbiAgX29uQmFjayAoKSB7fVxuXG4gIC8qKlxuICAgKiBHZXRzIGNhbGxlZCB3aGVuIHRoZSBkb25lIGJ1dHRvbiBoYXMgYmVlbiBjbGlja2VkXG4gICAqIEBwcm90ZWN0ZWRcbiAgICovXG4gIF9vbkRvbmUgKCkge31cblxuICAvKipcbiAgICogR2V0cyBjYWxsZWQgd2hlbiB0aGUgem9vbSBsZXZlbCBoYXMgYmVlbiBjaGFuZ2VkIHdoaWxlXG4gICAqIHRoaXMgY29udHJvbCBpcyBhY3RpdmVcbiAgICovXG4gIG9uWm9vbSAoKSB7fVxuXG4gIC8qKlxuICAgKiBUaGUgZGF0YSB0aGF0IGlzIGF2YWlsYWJsZSB0byB0aGUgdGVtcGxhdGVcbiAgICogQHR5cGUge09iamVjdH1cbiAgICovXG4gIGdldCBjb250ZXh0ICgpIHtcbiAgICByZXR1cm4ge1xuICAgICAgaGVscGVyczogdGhpcy5faGVscGVyc1xuICAgIH07XG4gIH1cbn1cblxuZXhwb3J0IGRlZmF1bHQgQ29udHJvbDtcbiIsIlwidXNlIHN0cmljdFwiO1xuLyohXG4gKiBDb3B5cmlnaHQgKGMpIDIwMTMtMjAxNSA5ZWxlbWVudHMgR21iSFxuICpcbiAqIFJlbGVhc2VkIHVuZGVyIEF0dHJpYnV0aW9uLU5vbkNvbW1lcmNpYWwgMy4wIFVucG9ydGVkXG4gKiBodHRwOi8vY3JlYXRpdmVjb21tb25zLm9yZy9saWNlbnNlcy9ieS1uYy8zLjAvXG4gKlxuICogRm9yIGNvbW1lcmNpYWwgdXNlLCBwbGVhc2UgY29udGFjdCB1cyBhdCBjb250YWN0QDllbGVtZW50cy5jb21cbiAqL1xuXG5pbXBvcnQgU3ltYm9sIGZyb20gXCJlczYtc3ltYm9sXCI7XG5pbXBvcnQgQ29udHJvbCBmcm9tIFwiLi9jb250cm9sXCI7XG5pbXBvcnQgVmVjdG9yMiBmcm9tIFwiLi4vLi4vLi4vbGliL21hdGgvdmVjdG9yMlwiO1xuaW1wb3J0IFV0aWxzIGZyb20gXCIuLi8uLi8uLi9saWIvdXRpbHNcIjtcbmxldCBmcyA9IHJlcXVpcmUoXCJmc1wiKTtcblxuY2xhc3MgQ3JvcENvbnRyb2xzIGV4dGVuZHMgQ29udHJvbCB7XG4gIC8qKlxuICAgKiBBIHVuaXF1ZSBzdHJpbmcgdGhhdCBpZGVudGlmaWVzIHRoaXMgY29udHJvbC5cbiAgICogQHR5cGUge1N0cmluZ31cbiAgICovXG4gIGdldCBpZGVudGlmaWVyICgpIHtcbiAgICByZXR1cm4gXCJjcm9wXCI7XG4gIH1cblxuICAvKipcbiAgICogRW50cnkgcG9pbnQgZm9yIHRoaXMgY29udHJvbFxuICAgKi9cbiAgaW5pdCAoKSB7XG4gICAgdGhpcy5fYXZhaWxhYmxlUmF0aW9zID0ge307XG4gICAgdGhpcy5fcmF0aW9zID0ge307XG4gICAgdGhpcy5fb3BlcmF0aW9uID0gdGhpcy5fdWkub3BlcmF0aW9ucy5jcm9wO1xuXG4gICAgbGV0IGNvbnRyb2xzVGVtcGxhdGUgPSBmcy5yZWFkRmlsZVN5bmMoX19kaXJuYW1lICsgXCIvLi4vLi4vLi4vdGVtcGxhdGVzL25pZ2h0L29wZXJhdGlvbnMvY3JvcF9jb250cm9scy5qc3RcIiwgXCJ1dGYtOFwiKTtcbiAgICB0aGlzLl9jb250cm9sc1RlbXBsYXRlID0gY29udHJvbHNUZW1wbGF0ZTtcblxuICAgIGxldCBjYW52YXNDb250cm9sc1RlbXBsYXRlID0gZnMucmVhZEZpbGVTeW5jKF9fZGlybmFtZSArIFwiLy4uLy4uLy4uL3RlbXBsYXRlcy9uaWdodC9vcGVyYXRpb25zL2Nyb3BfY2FudmFzLmpzdFwiLCBcInV0Zi04XCIpO1xuICAgIHRoaXMuX2NhbnZhc0NvbnRyb2xzVGVtcGxhdGUgPSBjYW52YXNDb250cm9sc1RlbXBsYXRlO1xuXG4gICAgdGhpcy5fZGVmYXVsdFN0YXJ0ID0gbmV3IFZlY3RvcjIoMC4xLCAwLjEpO1xuICAgIHRoaXMuX2RlZmF1bHRFbmQgPSBuZXcgVmVjdG9yMigwLjksIDAuOSk7XG5cbiAgICB0aGlzLl9pbml0aWFsT3B0aW9ucyA9IHtcbiAgICAgIHN0YXJ0OiB0aGlzLl9vcGVyYXRpb24uZ2V0U3RhcnQoKSxcbiAgICAgIGVuZDogdGhpcy5fb3BlcmF0aW9uLmdldEVuZCgpXG4gICAgfTtcblxuICAgIHRoaXMuX3N0YXJ0ID0gdGhpcy5faW5pdGlhbE9wdGlvbnMuc3RhcnQgfHwgdGhpcy5fZGVmYXVsdFN0YXJ0O1xuICAgIHRoaXMuX2VuZCA9IHRoaXMuX2luaXRpYWxPcHRpb25zLmVuZCB8fCB0aGlzLl9kZWZhdWx0RW5kO1xuXG4gICAgLy8gTWluaW11bSBzaXplIGluIHBpeGVsc1xuICAgIHRoaXMuX21pbmltdW1TaXplID0gbmV3IFZlY3RvcjIoNTAsIDUwKTtcblxuICAgIC8vIE1vdXNlIGV2ZW50IGNhbGxiYWNrcyBib3VuZCB0byB0aGUgY2xhc3MgY29udGV4dFxuICAgIHRoaXMuX29uS25vYkRvd24gPSB0aGlzLl9vbktub2JEb3duLmJpbmQodGhpcyk7XG4gICAgdGhpcy5fb25Lbm9iRHJhZyA9IHRoaXMuX29uS25vYkRyYWcuYmluZCh0aGlzKTtcbiAgICB0aGlzLl9vbktub2JVcCA9IHRoaXMuX29uS25vYlVwLmJpbmQodGhpcyk7XG4gICAgdGhpcy5fb25DZW50ZXJEb3duID0gdGhpcy5fb25DZW50ZXJEb3duLmJpbmQodGhpcyk7XG4gICAgdGhpcy5fb25DZW50ZXJEcmFnID0gdGhpcy5fb25DZW50ZXJEcmFnLmJpbmQodGhpcyk7XG4gICAgdGhpcy5fb25DZW50ZXJVcCA9IHRoaXMuX29uQ2VudGVyVXAuYmluZCh0aGlzKTtcblxuICAgIHRoaXMuX2FkZERlZmF1bHRSYXRpb3MoKTtcblxuICAgIC8vIFNlbGVjdCBhbGwgcmF0aW9zIHBlciBkZWZhdWx0XG4gICAgdGhpcy5zZWxlY3RSYXRpb3MobnVsbCk7XG4gIH1cblxuICAvKipcbiAgICogU2VsZWN0cyB0aGUgcmF0aW9zXG4gICAqIEBwYXJhbSB7U2VsZWN0b3J9IHNlbGVjdG9yXG4gICAqL1xuICBzZWxlY3RSYXRpb3MgKHNlbGVjdG9yKSB7XG4gICAgdGhpcy5fcmF0aW9zID0ge307XG5cbiAgICBsZXQgcmF0aW9JZGVudGlmaWVycyA9IE9iamVjdC5rZXlzKHRoaXMuX2F2YWlsYWJsZVJhdGlvcyk7XG5cbiAgICBsZXQgc2VsZWN0ZWRSYXRpb3MgPSBVdGlscy5zZWxlY3QocmF0aW9JZGVudGlmaWVycywgc2VsZWN0b3IpO1xuICAgIGZvciAobGV0IGlkZW50aWZpZXIgb2Ygc2VsZWN0ZWRSYXRpb3MpIHtcbiAgICAgIHRoaXMuX3JhdGlvc1tpZGVudGlmaWVyXSA9IHRoaXMuX2F2YWlsYWJsZVJhdGlvc1tpZGVudGlmaWVyXTtcbiAgICB9XG5cbiAgICBpZiAodGhpcy5fYWN0aXZlKSB7XG4gICAgICB0aGlzLl9yZW5kZXJDb250cm9scygpO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBBZGRzIHRoZSBkZWZhdWx0IHJhdGlvc1xuICAgKiBAcHJpdmF0ZVxuICAgKi9cbiAgX2FkZERlZmF1bHRSYXRpb3MgKCkge1xuICAgIHRoaXMuYWRkUmF0aW8oXCJjdXN0b21cIiwgXCIqXCIsIHRydWUpO1xuICAgIHRoaXMuYWRkUmF0aW8oXCJzcXVhcmVcIiwgXCIxXCIpO1xuICAgIHRoaXMuYWRkUmF0aW8oXCI0LTNcIiwgXCIxLjMzXCIpO1xuICAgIHRoaXMuYWRkUmF0aW8oXCIxNi05XCIsIFwiMS43N1wiKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBBZGRzIGEgcmF0aW8gd2l0aCB0aGUgZ2l2ZW4gaWRlbnRpZmllclxuICAgKiBAcGFyYW0ge1N0cmluZ30gaWRlbnRpZmllclxuICAgKiBAcGFyYW0ge051bWJlcn0gcmF0aW9cbiAgICogQHBhcmFtIHtCb29sZWFufSBzZWxlY3RlZFxuICAgKi9cbiAgYWRkUmF0aW8gKGlkZW50aWZpZXIsIHJhdGlvLCBzZWxlY3RlZCkge1xuICAgIHRoaXMuX2F2YWlsYWJsZVJhdGlvc1tpZGVudGlmaWVyXSA9IHsgcmF0aW8sIHNlbGVjdGVkIH07XG4gIH1cblxuICAvKipcbiAgICogR2V0cyBjYWxsZWQgd2hlbiB0aGlzIGNvbnRyb2wgaXMgYWN0aXZhdGVkXG4gICAqIEBvdmVycmlkZVxuICAgKi9cbiAgX29uRW50ZXIgKCkge1xuICAgIHN1cGVyLl9vbkVudGVyKCk7XG5cbiAgICB0aGlzLl9pbml0aWFsWm9vbUxldmVsID0gdGhpcy5fdWkuY2FudmFzLnpvb21MZXZlbDtcbiAgICB0aGlzLl91aS5jYW52YXMuem9vbVRvRml0KGZhbHNlKTtcblxuICAgIGxldCBwcmVmaXggPSBcIi5pbWdseWtpdC1jYW52YXMtY3JvcFwiO1xuICAgIGxldCBjb250YWluZXIgPSB0aGlzLl9jYW52YXNDb250cm9scztcbiAgICBsZXQga25vYnNDb250YWluZXIgPSBjb250YWluZXIucXVlcnlTZWxlY3RvcihgJHtwcmVmaXh9LWtub2JzYCk7XG5cbiAgICAvLyBTdG9yZSBpbml0aWFsIHNldHRpbmdzIGZvciBcImJhY2tcIiBidXR0b25cbiAgICB0aGlzLl9pbml0aWFsU3RhcnQgPSB0aGlzLl9vcGVyYXRpb24uZ2V0U3RhcnQoKS5jbG9uZSgpO1xuICAgIHRoaXMuX2luaXRpYWxFbmQgPSB0aGlzLl9vcGVyYXRpb24uZ2V0RW5kKCkuY2xvbmUoKTtcbiAgICB0aGlzLl9pbml0aWFsSWRlbnRpdHkgPSB0aGlzLl9vcGVyYXRpb24uaXNJZGVudGl0eTtcblxuICAgIC8vIE1ha2Ugc3VyZSB3ZSBzZWUgdGhlIHdob2xlIGlucHV0IGltYWdlXG4gICAgdGhpcy5fb3BlcmF0aW9uLnNldCh7XG4gICAgICBzdGFydDogbmV3IFZlY3RvcjIoMCwgMCksXG4gICAgICBlbmQ6IG5ldyBWZWN0b3IyKDEsIDEpXG4gICAgfSk7XG5cbiAgICAvLyBGaW5kIGFsbCA0IGtub2JzXG4gICAgdGhpcy5fa25vYnMgPSB7XG4gICAgICB0b3BMZWZ0OiBrbm9ic0NvbnRhaW5lci5xdWVyeVNlbGVjdG9yKFwiW2RhdGEtY29ybmVyPXRvcC1sZWZ0XVwiKSxcbiAgICAgIHRvcFJpZ2h0OiBrbm9ic0NvbnRhaW5lci5xdWVyeVNlbGVjdG9yKFwiW2RhdGEtY29ybmVyPXRvcC1yaWdodF1cIiksXG4gICAgICBib3R0b21MZWZ0OiBrbm9ic0NvbnRhaW5lci5xdWVyeVNlbGVjdG9yKFwiW2RhdGEtY29ybmVyPWJvdHRvbS1sZWZ0XVwiKSxcbiAgICAgIGJvdHRvbVJpZ2h0OiBrbm9ic0NvbnRhaW5lci5xdWVyeVNlbGVjdG9yKFwiW2RhdGEtY29ybmVyPWJvdHRvbS1yaWdodF1cIilcbiAgICB9O1xuXG4gICAgLy8gRmluZCB0aGUgZGl2IGFyZWFzIHRoYXQgYWZmZWN0IHRoZSBkaXNwbGF5ZWQgY3JvcCBzaXplXG4gICAgdGhpcy5fYXJlYXMgPSB7XG4gICAgICB0b3BMZWZ0OiB0aGlzLl9jYW52YXNDb250cm9scy5xdWVyeVNlbGVjdG9yKGAke3ByZWZpeH0tdG9wLWxlZnRgKSxcbiAgICAgIHRvcENlbnRlcjogdGhpcy5fY2FudmFzQ29udHJvbHMucXVlcnlTZWxlY3RvcihgJHtwcmVmaXh9LXRvcC1jZW50ZXJgKSxcbiAgICAgIGNlbnRlckxlZnQ6IHRoaXMuX2NhbnZhc0NvbnRyb2xzLnF1ZXJ5U2VsZWN0b3IoYCR7cHJlZml4fS1jZW50ZXItbGVmdGApLFxuICAgICAgY2VudGVyQ2VudGVyOiB0aGlzLl9jYW52YXNDb250cm9scy5xdWVyeVNlbGVjdG9yKGAke3ByZWZpeH0tY2VudGVyLWNlbnRlcmApXG4gICAgfTtcblxuICAgIHRoaXMuX2hhbmRsZUNvbnRyb2xzKCk7XG4gICAgdGhpcy5faGFuZGxlS25vYnMoKTtcbiAgICB0aGlzLl9oYW5kbGVDZW50ZXIoKTtcblxuICAgIC8vIFJlc3VtZSB0aGUgcmVuZGVyaW5nXG4gICAgdGhpcy5fdWkuY2FudmFzLnJlbmRlcigpXG4gICAgICAudGhlbigoKSA9PiB7XG4gICAgICAgIHRoaXMuX3VwZGF0ZURPTSgpO1xuICAgICAgfSk7XG4gIH1cblxuICAvKipcbiAgICogSGFuZGxlcyB0aGUgcmF0aW8gY29udHJvbHNcbiAgICogQHByaXZhdGVcbiAgICovXG4gIF9oYW5kbGVDb250cm9scyAoKSB7XG4gICAgbGV0IGxpc3RJdGVtcyA9IHRoaXMuX2NvbnRyb2xzLnF1ZXJ5U2VsZWN0b3JBbGwoXCJ1bCA+IGxpXCIpO1xuICAgIHRoaXMuX3JhdGlvSXRlbXMgPSBBcnJheS5wcm90b3R5cGUuc2xpY2UuY2FsbChsaXN0SXRlbXMpO1xuXG4gICAgZm9yIChsZXQgaXRlbSBvZiB0aGlzLl9yYXRpb0l0ZW1zKSB7XG4gICAgICBsZXQgeyBzZWxlY3RlZCwgcmF0aW8sIGlkZW50aWZpZXIgfSA9IGl0ZW0uZGF0YXNldDtcbiAgICAgIGlmICh0eXBlb2Ygc2VsZWN0ZWQgIT09IFwidW5kZWZpbmVkXCIgJiYgdGhpcy5faW5pdGlhbElkZW50aXR5KSB7XG4gICAgICAgIHRoaXMuX3NldFJhdGlvKGlkZW50aWZpZXIsIHJhdGlvLCBmYWxzZSk7XG4gICAgICAgIHRoaXMuX3NlbGVjdFJhdGlvKGl0ZW0pO1xuICAgICAgfVxuXG4gICAgICBpdGVtLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoZSkgPT4ge1xuICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgIHRoaXMuX29uUmF0aW9DbGljayhpdGVtKTtcbiAgICAgIH0pO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBHZXRzIGNhbGxlZCB3aGVuIHRoZSBnaXZlbiByYXRpbyBoYXMgYmVlbiBzZWxlY3RlZFxuICAgKiBAcGFyYW0ge0RPTUVsZW1lbnR9IGl0ZW1cbiAgICogQHByaXZhdGVcbiAgICovXG4gIF9vblJhdGlvQ2xpY2sgKGl0ZW0pIHtcbiAgICB0aGlzLl91bnNlbGVjdEFsbFJhdGlvcygpO1xuICAgIHRoaXMuX3NlbGVjdFJhdGlvKGl0ZW0pO1xuICB9XG5cbiAgLyoqXG4gICAqIFVuc2VsZWN0cyBhbGwgcmF0aW8gY29udHJvbCBpdGVtc1xuICAgKiBAcHJpdmF0ZVxuICAgKi9cbiAgX3Vuc2VsZWN0QWxsUmF0aW9zICgpIHtcbiAgICBmb3IgKGxldCBpdGVtIG9mIHRoaXMuX3JhdGlvSXRlbXMpIHtcbiAgICAgIGl0ZW0uY2xhc3NMaXN0LnJlbW92ZShcImltZ2x5a2l0LWNvbnRyb2xzLWl0ZW0tYWN0aXZlXCIpO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBBY3RpdmF0ZXMgdGhlIGdpdmVuIHJhdGlvIGNvbnRyb2wgaXRlbVxuICAgKiBAcGFyYW0ge0RPTUVsZW1lbnR9IGl0ZW1cbiAgICogQHByaXZhdGVcbiAgICovXG4gIF9zZWxlY3RSYXRpbyAoaXRlbSkge1xuICAgIGl0ZW0uY2xhc3NMaXN0LmFkZChcImltZ2x5a2l0LWNvbnRyb2xzLWl0ZW0tYWN0aXZlXCIpO1xuICAgIGxldCB7IHJhdGlvLCBpZGVudGlmaWVyIH0gPSBpdGVtLmRhdGFzZXQ7XG4gICAgdGhpcy5fc2V0UmF0aW8oaWRlbnRpZmllciwgcmF0aW8pO1xuICB9XG5cbiAgLyoqXG4gICAqIFNldHMgdGhlIGdpdmVuIHJhdGlvXG4gICAqIEBwYXJhbSB7U3RyaW5nfSBpZGVudGlmaWVyXG4gICAqIEBwYXJhbSB7U3RyaW5nfSByYXRpb1xuICAgKiBAcGFyYW0ge0Jvb2xlYW59IHJlc2l6ZVxuICAgKiBAcHJpdmF0ZVxuICAgKi9cbiAgX3NldFJhdGlvIChpZGVudGlmaWVyLCByYXRpbywgcmVzaXplPXRydWUpIHtcbiAgICBsZXQgY2FudmFzU2l6ZSA9IHRoaXMuX3VpLmNhbnZhcy5zaXplO1xuICAgIHRoaXMuX3NlbGVjdGVkUmF0aW8gPSBpZGVudGlmaWVyO1xuXG4gICAgaWYgKHJhdGlvID09PSBcIipcIikge1xuICAgICAgdGhpcy5fcmF0aW8gPSBudWxsO1xuICAgICAgdGhpcy5fc3RhcnQgPSBuZXcgVmVjdG9yMigwLjEsIDAuMSk7XG4gICAgICB0aGlzLl9lbmQgPSBuZXcgVmVjdG9yMigwLjksIDAuOSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIGlmIChyYXRpbyA9PT0gXCJvcmlnaW5hbFwiKSB7XG4gICAgICAgIHRoaXMuX3JhdGlvID0gY2FudmFzU2l6ZS54IC8gY2FudmFzU2l6ZS55O1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcmF0aW8gPSBwYXJzZUZsb2F0KHJhdGlvKTtcbiAgICAgICAgdGhpcy5fcmF0aW8gPSByYXRpbztcbiAgICAgIH1cblxuICAgICAgaWYgKHJlc2l6ZSkge1xuICAgICAgICBpZiAoY2FudmFzU2l6ZS54IC8gY2FudmFzU2l6ZS55IDw9IHRoaXMuX3JhdGlvKSB7XG4gICAgICAgICAgdGhpcy5fc3RhcnQueCA9IDAuMTtcbiAgICAgICAgICB0aGlzLl9lbmQueCA9IDAuOTtcbiAgICAgICAgICBsZXQgaGVpZ2h0ID0gMSAvIGNhbnZhc1NpemUueSAqIChjYW52YXNTaXplLnggLyB0aGlzLl9yYXRpbyAqIDAuOCk7XG4gICAgICAgICAgdGhpcy5fc3RhcnQueSA9ICgxIC0gaGVpZ2h0KSAvIDI7XG4gICAgICAgICAgdGhpcy5fZW5kLnkgPSAxIC0gdGhpcy5fc3RhcnQueTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICB0aGlzLl9zdGFydC55ID0gMC4xO1xuICAgICAgICAgIHRoaXMuX2VuZC55ID0gMC45O1xuICAgICAgICAgIGxldCB3aWR0aCA9IDEgLyBjYW52YXNTaXplLnggKiAodGhpcy5fcmF0aW8gKiBjYW52YXNTaXplLnkgKiAwLjgpO1xuICAgICAgICAgIHRoaXMuX3N0YXJ0LnggPSAoMSAtIHdpZHRoKSAvIDI7XG4gICAgICAgICAgdGhpcy5fZW5kLnggPSAxIC0gdGhpcy5fc3RhcnQueDtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cblxuICAgIHRoaXMuX3VwZGF0ZURPTSgpO1xuICB9XG5cbiAgLyoqXG4gICAqIFVwZGF0ZXMgdGhlIGNyb3BwaW5nIGRpdnMgZm9yIHRoZSBjdXJyZW50IG9wZXJhdGlvbiBzZXR0aW5nc1xuICAgKiBAcHJpdmF0ZVxuICAgKi9cbiAgX3VwZGF0ZURPTSAoKSB7XG4gICAgbGV0IGNhbnZhc1NpemUgPSB0aGlzLl91aS5jYW52YXMuc2l6ZTtcbiAgICBsZXQgc3RhcnRBYnNvbHV0ZSA9IHRoaXMuX3N0YXJ0LmNsb25lKClcbiAgICAgIC5tdWx0aXBseShjYW52YXNTaXplKTtcbiAgICBsZXQgZW5kQWJzb2x1dGUgPSB0aGlzLl9lbmQuY2xvbmUoKVxuICAgICAgLm11bHRpcGx5KGNhbnZhc1NpemUpO1xuICAgIGxldCBzaXplID0gZW5kQWJzb2x1dGUuY2xvbmUoKVxuICAgICAgLnN1YnRyYWN0KHN0YXJ0QWJzb2x1dGUpO1xuXG4gICAgbGV0IHRvcCA9IE1hdGgubWF4KDEsIHN0YXJ0QWJzb2x1dGUueSk7XG4gICAgbGV0IGxlZnQgPSBNYXRoLm1heCgxLCBzdGFydEFic29sdXRlLngpO1xuICAgIGxldCB3aWR0aCA9IE1hdGgubWF4KDEsIHNpemUueCk7XG4gICAgbGV0IGhlaWdodCA9IE1hdGgubWF4KDEsIHNpemUueSk7XG5cbiAgICAvLyB3aWR0aHMgYXJlIGRlZmluZWQgYnkgdG9wIGxlZnQgYW5kIHRvcCBjZW50ZXIgYXJlYXNcbiAgICB0aGlzLl9hcmVhcy50b3BMZWZ0LnN0eWxlLndpZHRoID0gYCR7bGVmdH1weGA7XG4gICAgdGhpcy5fYXJlYXMudG9wQ2VudGVyLnN0eWxlLndpZHRoID0gYCR7d2lkdGh9cHhgO1xuXG4gICAgLy8gaGVpZ2h0cyBhcmUgZGVmaW5lZCBieSB0b3AgbGVmdCBhbmQgY2VudGVyIGxlZnQgYXJlYXNcbiAgICB0aGlzLl9hcmVhcy50b3BMZWZ0LnN0eWxlLmhlaWdodCA9IGAke3RvcH1weGA7XG4gICAgdGhpcy5fYXJlYXMuY2VudGVyTGVmdC5zdHlsZS5oZWlnaHQgPSBgJHtoZWlnaHR9cHhgO1xuICB9XG5cbiAgLyoqXG4gICAqIEhhbmRsZXMgdGhlIGtub2IgZHJhZ2dpbmdcbiAgICogQHByaXZhdGVcbiAgICovXG4gIF9oYW5kbGVLbm9icyAoKSB7XG4gICAgZm9yIChsZXQgaWRlbnRpZmllciBpbiB0aGlzLl9rbm9icykge1xuICAgICAgbGV0IGtub2IgPSB0aGlzLl9rbm9ic1tpZGVudGlmaWVyXTtcbiAgICAgIGtub2IuYWRkRXZlbnRMaXN0ZW5lcihcIm1vdXNlZG93blwiLCAoZSkgPT4ge1xuICAgICAgICB0aGlzLl9vbktub2JEb3duKGUsIGtub2IpO1xuICAgICAgfSk7XG4gICAgICBrbm9iLmFkZEV2ZW50TGlzdGVuZXIoXCJ0b3VjaHN0YXJ0XCIsIChlKSA9PiB7XG4gICAgICAgIHRoaXMuX29uS25vYkRvd24oZSwga25vYik7XG4gICAgICB9KTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogR2V0cyBjYWxsZWQgd2hlbiB0aGUgdXNlciBwcmVzc2VzIGEga25vYlxuICAgKiBAcGFyYW0ge0V2ZW50fSBlXG4gICAqIEBwYXJhbSB7RE9NRWxlbWVudH0ga25vYlxuICAgKiBAcHJpdmF0ZVxuICAgKi9cbiAgX29uS25vYkRvd24gKGUsIGtub2IpIHtcbiAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgZS5zdG9wUHJvcGFnYXRpb24oKTtcblxuICAgIHRoaXMuX2N1cnJlbnRLbm9iID0ga25vYjtcbiAgICB0aGlzLl9pbml0aWFsTW91c2VQb3NpdGlvbiA9IFV0aWxzLmdldEV2ZW50UG9zaXRpb24oZSk7XG5cbiAgICAvLyBSZW1lbWJlciB0aGUgY3VycmVudCB2YWx1ZXNcbiAgICB0aGlzLl9zdGFydEJlZm9yZURyYWcgPSB0aGlzLl9zdGFydC5jbG9uZSgpO1xuICAgIHRoaXMuX2VuZEJlZm9yZURyYWcgPSB0aGlzLl9lbmQuY2xvbmUoKTtcblxuICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJtb3VzZW1vdmVcIiwgdGhpcy5fb25Lbm9iRHJhZyk7XG4gICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcInRvdWNobW92ZVwiLCB0aGlzLl9vbktub2JEcmFnKTtcbiAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKFwibW91c2V1cFwiLCB0aGlzLl9vbktub2JVcCk7XG4gICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcInRvdWNoZW5kXCIsIHRoaXMuX29uS25vYlVwKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBHZXRzIGNhbGxlZCB3aGUgdGhlIHVzZXIgZHJhZ3MgYSBrbm9iXG4gICAqIEBwYXJhbSB7RXZlbnR9IGVcbiAgICogQHByaXZhdGVcbiAgICovXG4gIF9vbktub2JEcmFnIChlKSB7XG4gICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuXG4gICAgbGV0IG1vdXNlUG9zaXRpb24gPSBVdGlscy5nZXRFdmVudFBvc2l0aW9uKGUpO1xuICAgIGxldCBtb3VzZURpZmYgPSBtb3VzZVBvc2l0aW9uLnN1YnRyYWN0KHRoaXMuX2luaXRpYWxNb3VzZVBvc2l0aW9uKTtcbiAgICBsZXQgY29ybmVyID0gdGhpcy5fY3VycmVudEtub2IuZGF0YXNldC5jb3JuZXI7XG4gICAgbGV0IGNhbnZhc1NpemUgPSB0aGlzLl91aS5jYW52YXMuc2l6ZTtcblxuICAgIGxldCBhYnNvbHV0ZVN0YXJ0ID0gdGhpcy5fc3RhcnRCZWZvcmVEcmFnLmNsb25lKClcbiAgICAgIC5tdWx0aXBseShjYW52YXNTaXplKTtcbiAgICBsZXQgYWJzb2x1dGVFbmQgPSB0aGlzLl9lbmRCZWZvcmVEcmFnLmNsb25lKClcbiAgICAgIC5tdWx0aXBseShjYW52YXNTaXplKTtcbiAgICBsZXQgbWF4SGVpZ2h0ID0gY2FudmFzU2l6ZS55O1xuXG4gICAgbGV0IHdpZHRoLCBoZWlnaHQsIG1heGltdW0sIG1pbmltdW07XG5cbiAgICBzd2l0Y2ggKGNvcm5lcikge1xuICAgICAgY2FzZSBcInRvcC1sZWZ0XCI6XG4gICAgICAgIGFic29sdXRlU3RhcnQuYWRkKG1vdXNlRGlmZik7XG4gICAgICAgIG1heGltdW0gPSBhYnNvbHV0ZUVuZC5jbG9uZSgpXG4gICAgICAgICAgLnN1YnRyYWN0KHRoaXMuX21pbmltdW1TaXplKTtcbiAgICAgICAgYWJzb2x1dGVTdGFydC5jbGFtcChudWxsLCBtYXhpbXVtKTtcbiAgICAgICAgYnJlYWs7XG4gICAgICBjYXNlIFwidG9wLXJpZ2h0XCI6XG4gICAgICAgIGFic29sdXRlRW5kLnggKz0gbW91c2VEaWZmLng7XG4gICAgICAgIGFic29sdXRlU3RhcnQueSArPSBtb3VzZURpZmYueTtcbiAgICAgICAgYWJzb2x1dGVFbmQueCA9IE1hdGgubWF4KGFic29sdXRlU3RhcnQueCArIHRoaXMuX21pbmltdW1TaXplLngsIGFic29sdXRlRW5kLngpO1xuICAgICAgICBhYnNvbHV0ZVN0YXJ0LnkgPSBNYXRoLm1pbihhYnNvbHV0ZUVuZC55IC0gdGhpcy5fbWluaW11bVNpemUueSwgYWJzb2x1dGVTdGFydC55KTtcbiAgICAgICAgYnJlYWs7XG4gICAgICBjYXNlIFwiYm90dG9tLXJpZ2h0XCI6XG4gICAgICAgIGFic29sdXRlRW5kLmFkZChtb3VzZURpZmYpO1xuICAgICAgICBtaW5pbXVtID0gYWJzb2x1dGVTdGFydC5jbG9uZSgpXG4gICAgICAgICAgLmFkZCh0aGlzLl9taW5pbXVtU2l6ZSk7XG4gICAgICAgIGFic29sdXRlRW5kLmNsYW1wKG1pbmltdW0pO1xuICAgICAgICBtYXhIZWlnaHQgPSBjYW52YXNTaXplLnkgLSBhYnNvbHV0ZVN0YXJ0Lnk7XG4gICAgICAgIGJyZWFrO1xuICAgICAgY2FzZSBcImJvdHRvbS1sZWZ0XCI6XG4gICAgICAgIGFic29sdXRlU3RhcnQueCArPSBtb3VzZURpZmYueDtcbiAgICAgICAgYWJzb2x1dGVFbmQueSArPSBtb3VzZURpZmYueTtcbiAgICAgICAgYWJzb2x1dGVTdGFydC54ID0gTWF0aC5taW4oYWJzb2x1dGVFbmQueCAtIHRoaXMuX21pbmltdW1TaXplLngsIGFic29sdXRlU3RhcnQueCk7XG4gICAgICAgIGFic29sdXRlRW5kLnkgPSBNYXRoLm1heChhYnNvbHV0ZVN0YXJ0LnkgKyB0aGlzLl9taW5pbXVtU2l6ZS55LCBhYnNvbHV0ZUVuZC55KTtcbiAgICAgICAgYnJlYWs7XG4gICAgfVxuXG4gICAgdGhpcy5fc3RhcnQuY29weShhYnNvbHV0ZVN0YXJ0KS5kaXZpZGUoY2FudmFzU2l6ZSk7XG4gICAgdGhpcy5fZW5kLmNvcHkoYWJzb2x1dGVFbmQpLmRpdmlkZShjYW52YXNTaXplKTtcblxuICAgIHRoaXMuX3N0YXJ0LmNsYW1wKDAsIDEpO1xuICAgIHRoaXMuX2VuZC5jbGFtcCgwLCAxKTtcblxuICAgIC8qKlxuICAgICAqIENhbGN1bGF0ZSBib3VuZGFyaWVzXG4gICAgICovXG4gICAgaWYgKHRoaXMuX3JhdGlvICE9PSBudWxsKSB7XG4gICAgICBzd2l0Y2ggKGNvcm5lcikge1xuICAgICAgICBjYXNlIFwidG9wLWxlZnRcIjpcbiAgICAgICAgICB3aWR0aCA9ICh0aGlzLl9lbmQueCAtIHRoaXMuX3N0YXJ0LngpICogY2FudmFzU2l6ZS54O1xuICAgICAgICAgIGhlaWdodCA9IHdpZHRoIC8gdGhpcy5fcmF0aW87XG4gICAgICAgICAgdGhpcy5fc3RhcnQueSA9IHRoaXMuX2VuZC55IC0gaGVpZ2h0IC8gY2FudmFzU2l6ZS55O1xuXG4gICAgICAgICAgaWYgKHRoaXMuX3N0YXJ0LnkgPD0gMCkge1xuICAgICAgICAgICAgdGhpcy5fc3RhcnQueSA9IDA7XG4gICAgICAgICAgICBoZWlnaHQgPSAodGhpcy5fZW5kLnkgLSB0aGlzLl9zdGFydC55KSAqIGNhbnZhc1NpemUueTtcbiAgICAgICAgICAgIHdpZHRoID0gaGVpZ2h0ICogdGhpcy5fcmF0aW87XG4gICAgICAgICAgICB0aGlzLl9zdGFydC54ID0gdGhpcy5fZW5kLnggLSB3aWR0aCAvIGNhbnZhc1NpemUueDtcbiAgICAgICAgICB9XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIGNhc2UgXCJ0b3AtcmlnaHRcIjpcbiAgICAgICAgICB3aWR0aCA9ICh0aGlzLl9lbmQueCAtIHRoaXMuX3N0YXJ0LngpICogY2FudmFzU2l6ZS54O1xuICAgICAgICAgIGhlaWdodCA9IHdpZHRoIC8gdGhpcy5fcmF0aW87XG4gICAgICAgICAgdGhpcy5fc3RhcnQueSA9IHRoaXMuX2VuZC55IC0gaGVpZ2h0IC8gY2FudmFzU2l6ZS55O1xuXG4gICAgICAgICAgaWYgKHRoaXMuX3N0YXJ0LnkgPD0gMCkge1xuICAgICAgICAgICAgdGhpcy5fc3RhcnQueSA9IDA7XG4gICAgICAgICAgICBoZWlnaHQgPSAodGhpcy5fZW5kLnkgLSB0aGlzLl9zdGFydC55KSAqIGNhbnZhc1NpemUueTtcbiAgICAgICAgICAgIHdpZHRoID0gaGVpZ2h0ICogdGhpcy5fcmF0aW87XG4gICAgICAgICAgICB0aGlzLl9lbmQueCA9IHRoaXMuX3N0YXJ0LnggKyB3aWR0aCAvIGNhbnZhc1NpemUueDtcbiAgICAgICAgICB9XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIGNhc2UgXCJib3R0b20tcmlnaHRcIjpcbiAgICAgICAgICB3aWR0aCA9ICh0aGlzLl9lbmQueCAtIHRoaXMuX3N0YXJ0LngpICogY2FudmFzU2l6ZS54O1xuICAgICAgICAgIGhlaWdodCA9IHdpZHRoIC8gdGhpcy5fcmF0aW87XG4gICAgICAgICAgdGhpcy5fZW5kLnkgPSB0aGlzLl9zdGFydC55ICsgaGVpZ2h0IC8gY2FudmFzU2l6ZS55O1xuXG4gICAgICAgICAgLy8gSWYgYm91bmRhcmllcyBhcmUgZXhjZWVkZWQsIGNhbGN1bGF0ZSB3aWR0aCBieSBtYXhpbXVtIGhlaWdodFxuICAgICAgICAgIGlmICh0aGlzLl9lbmQueSA+PSAxKSB7XG4gICAgICAgICAgICB0aGlzLl9lbmQueSA9IDE7XG4gICAgICAgICAgICBoZWlnaHQgPSAodGhpcy5fZW5kLnkgLSB0aGlzLl9zdGFydC55KSAqIGNhbnZhc1NpemUueTtcbiAgICAgICAgICAgIHdpZHRoID0gaGVpZ2h0ICogdGhpcy5fcmF0aW87XG4gICAgICAgICAgICB0aGlzLl9lbmQueCA9IHRoaXMuX3N0YXJ0LnggKyB3aWR0aCAvIGNhbnZhc1NpemUueDtcbiAgICAgICAgICB9XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIGNhc2UgXCJib3R0b20tbGVmdFwiOlxuICAgICAgICAgIHdpZHRoID0gKHRoaXMuX2VuZC54IC0gdGhpcy5fc3RhcnQueCkgKiBjYW52YXNTaXplLng7XG4gICAgICAgICAgaGVpZ2h0ID0gd2lkdGggLyB0aGlzLl9yYXRpbztcbiAgICAgICAgICB0aGlzLl9lbmQueSA9IHRoaXMuX3N0YXJ0LnkgKyBoZWlnaHQgLyBjYW52YXNTaXplLnk7XG5cbiAgICAgICAgICBpZiAodGhpcy5fZW5kLnkgPj0gMSkge1xuICAgICAgICAgICAgdGhpcy5fZW5kLnkgPSAxO1xuICAgICAgICAgICAgaGVpZ2h0ID0gKHRoaXMuX2VuZC55IC0gdGhpcy5fc3RhcnQueSkgKiBjYW52YXNTaXplLnk7XG4gICAgICAgICAgICB3aWR0aCA9IGhlaWdodCAqIHRoaXMuX3JhdGlvO1xuICAgICAgICAgICAgdGhpcy5fc3RhcnQueCA9IHRoaXMuX2VuZC54IC0gd2lkdGggLyBjYW52YXNTaXplLng7XG4gICAgICAgICAgfVxuICAgICAgICAgIGJyZWFrO1xuICAgICAgfVxuICAgIH1cblxuICAgIHRoaXMuX3VwZGF0ZURPTSgpO1xuICB9XG5cbiAgLyoqXG4gICAqIEdldHMgY2FsbGVkIHdoZSB0aGUgdXNlciByZWxlYXNlcyBhIGtub2JcbiAgICogQHBhcmFtIHtFdmVudH0gZVxuICAgKiBAcHJpdmF0ZVxuICAgKi9cbiAgX29uS25vYlVwIChlKSB7XG4gICAgdGhpcy5fY3VycmVudEtub2IgPSBudWxsO1xuICAgIGRvY3VtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJtb3VzZW1vdmVcIiwgdGhpcy5fb25Lbm9iRHJhZyk7XG4gICAgZG9jdW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcihcInRvdWNobW92ZVwiLCB0aGlzLl9vbktub2JEcmFnKTtcbiAgICBkb2N1bWVudC5yZW1vdmVFdmVudExpc3RlbmVyKFwibW91c2V1cFwiLCB0aGlzLl9vbktub2JVcCk7XG4gICAgZG9jdW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcihcInRvdWNoZW5kXCIsIHRoaXMuX29uS25vYlVwKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBIYW5kbGVzIHRoZSBjZW50ZXIgZHJhZ2dpbmdcbiAgICogQHByaXZhdGVcbiAgICovXG4gIF9oYW5kbGVDZW50ZXIgKCkge1xuICAgIHRoaXMuX2FyZWFzLmNlbnRlckNlbnRlci5hZGRFdmVudExpc3RlbmVyKFwibW91c2Vkb3duXCIsIHRoaXMuX29uQ2VudGVyRG93bik7XG4gICAgdGhpcy5fYXJlYXMuY2VudGVyQ2VudGVyLmFkZEV2ZW50TGlzdGVuZXIoXCJ0b3VjaHN0YXJ0XCIsIHRoaXMuX29uQ2VudGVyRG93bik7XG4gIH1cblxuICAvKipcbiAgICogR2V0cyBjYWxsZWQgd2hlbiB0aGUgdXNlciBwcmVzc2VzIHRoZSBjZW50ZXIgYXJlYVxuICAgKiBAcGFyYW0ge0V2ZW50fSBlXG4gICAqIEBwcml2YXRlXG4gICAqL1xuICBfb25DZW50ZXJEb3duIChlKSB7XG4gICAgdGhpcy5faW5pdGlhbE1vdXNlUG9zaXRpb24gPSBVdGlscy5nZXRFdmVudFBvc2l0aW9uKGUpO1xuXG4gICAgLy8gUmVtZW1iZXIgdGhlIGN1cnJlbnQgdmFsdWVzXG4gICAgdGhpcy5fc3RhcnRCZWZvcmVEcmFnID0gdGhpcy5fc3RhcnQuY2xvbmUoKTtcbiAgICB0aGlzLl9lbmRCZWZvcmVEcmFnID0gdGhpcy5fZW5kLmNsb25lKCk7XG5cbiAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKFwibW91c2Vtb3ZlXCIsIHRoaXMuX29uQ2VudGVyRHJhZyk7XG4gICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcInRvdWNobW92ZVwiLCB0aGlzLl9vbkNlbnRlckRyYWcpO1xuICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJtb3VzZXVwXCIsIHRoaXMuX29uQ2VudGVyVXApO1xuICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJ0b3VjaGVuZFwiLCB0aGlzLl9vbkNlbnRlclVwKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBHZXRzIGNhbGxlZCB3aGVuIHRoZSB1c2VyIHByZXNzZXMgdGhlIGNlbnRlciBhcmVhIGFuZCBtb3ZlcyBoaXMgbW91c2VcbiAgICogQHBhcmFtIHtFdmVudH0gZVxuICAgKiBAcHJpdmF0ZVxuICAgKi9cbiAgX29uQ2VudGVyRHJhZyAoZSkge1xuICAgIGxldCBtb3VzZVBvc2l0aW9uID0gVXRpbHMuZ2V0RXZlbnRQb3NpdGlvbihlKTtcbiAgICBsZXQgbW91c2VEaWZmID0gbW91c2VQb3NpdGlvbi5zdWJ0cmFjdCh0aGlzLl9pbml0aWFsTW91c2VQb3NpdGlvbik7XG4gICAgbGV0IGNhbnZhc1NpemUgPSB0aGlzLl91aS5jYW52YXMuc2l6ZTtcblxuICAgIC8vIEdldCB0aGUgY3JvcCBzaXplXG4gICAgbGV0IGNyb3BTaXplID0gdGhpcy5fZW5kQmVmb3JlRHJhZy5jbG9uZSgpXG4gICAgICAuc3VidHJhY3QodGhpcy5fc3RhcnRCZWZvcmVEcmFnKTtcbiAgICBsZXQgYWJzb2x1dGVDcm9wU2l6ZSA9IGNyb3BTaXplLmNsb25lKClcbiAgICAgIC5tdWx0aXBseShjYW52YXNTaXplKTtcblxuICAgIC8vIEdldCB0aGUgYWJzb2x1dGUgaW5pdGlhbCB2YWx1ZXNcbiAgICBsZXQgYWJzb2x1dGVTdGFydCA9IHRoaXMuX3N0YXJ0QmVmb3JlRHJhZy5jbG9uZSgpLm11bHRpcGx5KGNhbnZhc1NpemUpO1xuICAgIGxldCBhYnNvbHV0ZUVuZCA9IHRoaXMuX2VuZEJlZm9yZURyYWcuY2xvbmUoKS5tdWx0aXBseShjYW52YXNTaXplKTtcblxuICAgIC8vIEFkZCB0aGUgbW91c2UgcG9zaXRpb24gZGlmZmVyZW5jZVxuICAgIGFic29sdXRlU3RhcnQuYWRkKG1vdXNlRGlmZik7XG5cbiAgICAvLyBDbGFtcCB0aGUgdmFsdWVcbiAgICBsZXQgbWF4U3RhcnQgPSBjYW52YXNTaXplLmNsb25lKClcbiAgICAgIC5zdWJ0cmFjdChhYnNvbHV0ZUNyb3BTaXplKTtcbiAgICBhYnNvbHV0ZVN0YXJ0LmNsYW1wKG5ldyBWZWN0b3IyKDAsIDApLCBtYXhTdGFydCk7XG5cbiAgICAvLyBFbmQgcG9zaXRpb24gZG9lcyBub3QgY2hhbmdlIChyZWxhdGl2ZSB0byBzdGFydClcbiAgICBhYnNvbHV0ZUVuZC5jb3B5KGFic29sdXRlU3RhcnQpLmFkZChhYnNvbHV0ZUNyb3BTaXplKTtcblxuICAgIC8vIFNldCB0aGUgZmluYWwgdmFsdWVzXG4gICAgdGhpcy5fc3RhcnQuY29weShhYnNvbHV0ZVN0YXJ0KS5kaXZpZGUoY2FudmFzU2l6ZSk7XG4gICAgdGhpcy5fZW5kLmNvcHkoYWJzb2x1dGVFbmQpLmRpdmlkZShjYW52YXNTaXplKTtcblxuICAgIHRoaXMuX3VwZGF0ZURPTSgpO1xuICB9XG5cbiAgLyoqXG4gICAqIEdldHMgY2FsbGVkIHdoZW4gdGhlIHVzZXIgcmVsZWFzZXMgdGhlIGNlbnRlciBhcmVhXG4gICAqIEBwYXJhbSB7RXZlbnR9IGVcbiAgICogQHByaXZhdGVcbiAgICovXG4gIF9vbkNlbnRlclVwIChlKSB7XG4gICAgZG9jdW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcihcIm1vdXNlbW92ZVwiLCB0aGlzLl9vbkNlbnRlckRyYWcpO1xuICAgIGRvY3VtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJ0b3VjaG1vdmVcIiwgdGhpcy5fb25DZW50ZXJEcmFnKTtcbiAgICBkb2N1bWVudC5yZW1vdmVFdmVudExpc3RlbmVyKFwibW91c2V1cFwiLCB0aGlzLl9vbkNlbnRlclVwKTtcbiAgICBkb2N1bWVudC5yZW1vdmVFdmVudExpc3RlbmVyKFwidG91Y2hlbmRcIiwgdGhpcy5fb25DZW50ZXJVcCk7XG4gIH1cblxuICAvKipcbiAgICogR2V0cyBjYWxsZWQgd2hlbiB0aGUgYmFjayBidXR0b24gaGFzIGJlZW4gY2xpY2tlZFxuICAgKiBAb3ZlcnJpZGVcbiAgICovXG4gIF9vbkJhY2sgKCkge1xuICAgIHRoaXMuX3VpLmNhbnZhcy5zZXRab29tTGV2ZWwodGhpcy5faW5pdGlhbFpvb21MZXZlbCwgZmFsc2UpO1xuICAgIHRoaXMuX29wZXJhdGlvbi5zZXQoe1xuICAgICAgc3RhcnQ6IHRoaXMuX2luaXRpYWxTdGFydCxcbiAgICAgIGVuZDogdGhpcy5faW5pdGlhbEVuZFxuICAgIH0pO1xuICAgIHRoaXMuX3VpLmNhbnZhcy5yZW5kZXIoKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBHZXRzIGNhbGxlZCB3aGVuIHRoZSBkb25lIGJ1dHRvbiBoYXMgYmVlbiBjbGlja2VkXG4gICAqIEBwcm90ZWN0ZWRcbiAgICovXG4gIF9vbkRvbmUgKCkge1xuICAgIHRoaXMuX29wZXJhdGlvbi5zZXQoe1xuICAgICAgc3RhcnQ6IHRoaXMuX3N0YXJ0LFxuICAgICAgZW5kOiB0aGlzLl9lbmRcbiAgICB9KTtcbiAgICB0aGlzLl91aS5jYW52YXMuem9vbVRvRml0KHRydWUpO1xuXG4gICAgdGhpcy5fdWkuYWRkSGlzdG9yeSh0aGlzLl9vcGVyYXRpb24sIHtcbiAgICAgIHN0YXJ0OiB0aGlzLl9pbml0aWFsU3RhcnQuY2xvbmUoKSxcbiAgICAgIGVuZDogdGhpcy5faW5pdGlhbEVuZC5jbG9uZSgpXG4gICAgfSwgdGhpcy5faW5pdGlhbElkZW50aXR5KTtcbiAgfVxuXG4gIC8qKlxuICAgKiBUaGUgZGF0YSB0aGF0IGlzIGF2YWlsYWJsZSB0byB0aGUgdGVtcGxhdGVcbiAgICogQHR5cGUge09iamVjdH1cbiAgICogQG92ZXJyaWRlXG4gICAqL1xuICBnZXQgY29udGV4dCAoKSB7XG4gICAgbGV0IGNvbnRleHQgPSBzdXBlci5jb250ZXh0O1xuICAgIGNvbnRleHQucmF0aW9zID0gdGhpcy5fcmF0aW9zO1xuICAgIHJldHVybiBjb250ZXh0O1xuICB9XG5cbiAgLyoqXG4gICAqIFRoZSBzZWxlY3RlZCByYXRpbyBpZGVudGlmaWVyXG4gICAqIEB0eXBlIHtTdHJpbmd9XG4gICAqL1xuICBnZXQgc2VsZWN0ZWRSYXRpbyAoKSB7XG4gICAgcmV0dXJuIHRoaXMuX3NlbGVjdGVkUmF0aW87XG4gIH1cbn1cblxuZXhwb3J0IGRlZmF1bHQgQ3JvcENvbnRyb2xzO1xuIiwiXCJ1c2Ugc3RyaWN0XCI7XG4vKiFcbiAqIENvcHlyaWdodCAoYykgMjAxMy0yMDE1IDllbGVtZW50cyBHbWJIXG4gKlxuICogUmVsZWFzZWQgdW5kZXIgQXR0cmlidXRpb24tTm9uQ29tbWVyY2lhbCAzLjAgVW5wb3J0ZWRcbiAqIGh0dHA6Ly9jcmVhdGl2ZWNvbW1vbnMub3JnL2xpY2Vuc2VzL2J5LW5jLzMuMC9cbiAqXG4gKiBGb3IgY29tbWVyY2lhbCB1c2UsIHBsZWFzZSBjb250YWN0IHVzIGF0IGNvbnRhY3RAOWVsZW1lbnRzLmNvbVxuICovXG5cbmltcG9ydCBTeW1ib2wgZnJvbSBcImVzNi1zeW1ib2xcIjtcbmltcG9ydCBDb250cm9sIGZyb20gXCIuL2NvbnRyb2xcIjtcbmltcG9ydCBVdGlscyBmcm9tIFwiLi4vLi4vLi4vbGliL3V0aWxzXCI7XG5sZXQgZnMgPSByZXF1aXJlKFwiZnNcIik7XG5cbmNsYXNzIEZpbHRlcnNDb250cm9scyBleHRlbmRzIENvbnRyb2wge1xuICAvKipcbiAgICogQSB1bmlxdWUgc3RyaW5nIHRoYXQgaWRlbnRpZmllcyB0aGlzIGNvbnRyb2wuXG4gICAqIEB0eXBlIHtTdHJpbmd9XG4gICAqL1xuICBnZXQgaWRlbnRpZmllciAoKSB7XG4gICAgcmV0dXJuIFwiZmlsdGVyc1wiO1xuICB9XG5cbiAgLyoqXG4gICAqIEVudHJ5IHBvaW50IGZvciB0aGlzIGNvbnRyb2xcbiAgICovXG4gIGluaXQgKCkge1xuICAgIHRoaXMuX29wZXJhdGlvbiA9IHRoaXMuX3VpLm9wZXJhdGlvbnMuZmlsdGVycztcblxuICAgIGxldCBjb250cm9sc1RlbXBsYXRlID0gZnMucmVhZEZpbGVTeW5jKF9fZGlybmFtZSArIFwiLy4uLy4uLy4uL3RlbXBsYXRlcy9uaWdodC9vcGVyYXRpb25zL2ZpbHRlcnNfY29udHJvbHMuanN0XCIsIFwidXRmLThcIik7XG4gICAgdGhpcy5fY29udHJvbHNUZW1wbGF0ZSA9IGNvbnRyb2xzVGVtcGxhdGU7XG5cbiAgICB0aGlzLl9hdmFpbGFibGVGaWx0ZXJzID0ge307XG4gICAgdGhpcy5fZmlsdGVycyA9IHt9O1xuXG4gICAgdGhpcy5fYWRkRGVmYXVsdEZpbHRlcnMoKTtcblxuICAgIC8vIFNlbGVjdCBhbGwgZmlsdGVycyBwZXIgZGVmYXVsdFxuICAgIHRoaXMuc2VsZWN0RmlsdGVycyhudWxsKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBHZXRzIGNhbGxlZCB3aGVuIHRoaXMgY29udHJvbCBpcyBhY3RpdmF0ZWRcbiAgICogQG92ZXJyaWRlXG4gICAqL1xuICBfb25FbnRlciAoKSB7XG4gICAgdGhpcy5faW5pdGlhbEZpbHRlciA9IHRoaXMuX29wZXJhdGlvbi5nZXRGaWx0ZXIoKTtcbiAgICB0aGlzLl9pbml0aWFsSWRlbnRpdHkgPSB0aGlzLl9vcGVyYXRpb24uaXNJZGVudGl0eTtcblxuICAgIGxldCBsaXN0SXRlbXMgPSB0aGlzLl9jb250cm9scy5xdWVyeVNlbGVjdG9yQWxsKFwibGlcIik7XG4gICAgdGhpcy5fbGlzdEl0ZW1zID0gQXJyYXkucHJvdG90eXBlLnNsaWNlLmNhbGwobGlzdEl0ZW1zKTtcblxuICAgIC8vIExpc3RlbiB0byBjbGljayBldmVudHNcbiAgICBmb3IgKGxldCBsaXN0SXRlbSBvZiB0aGlzLl9saXN0SXRlbXMpIHtcbiAgICAgIGxpc3RJdGVtLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XG4gICAgICAgIHRoaXMuX29uTGlzdEl0ZW1DbGljayhsaXN0SXRlbSk7XG4gICAgICB9KTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogR2V0cyBjYWxsZWQgd2hlbiB0aGUgdXNlciBoaXRzIHRoZSBiYWNrIGJ1dHRvblxuICAgKiBAb3ZlcnJpZGVcbiAgICovXG4gIF9vbkJhY2sgKCkge1xuICAgIHRoaXMuX29wZXJhdGlvbi5zZXRGaWx0ZXIodGhpcy5faW5pdGlhbEZpbHRlcik7XG4gICAgdGhpcy5fdWkuY2FudmFzLnJlbmRlcigpO1xuICB9XG5cbiAgLyoqXG4gICAqIEdldHMgY2FsbGVkIHdoZW4gdGhlIGRvbmUgYnV0dG9uIGhhcyBiZWVuIGNsaWNrZWRcbiAgICogQG92ZXJyaWRlXG4gICAqL1xuICBfb25Eb25lICgpIHtcbiAgICB0aGlzLl91aS5hZGRIaXN0b3J5KHRoaXMuX29wZXJhdGlvbiwge1xuICAgICAgZmlsdGVyOiB0aGlzLl9pbml0aWFsRmlsdGVyXG4gICAgfSwgdGhpcy5faW5pdGlhbElkZW50aXR5KTtcbiAgfVxuXG4gIC8qKlxuICAgKiBHZXRzIGNhbGxlZCB3aGVuIHRoZSB1c2VyIGNsaWNrZWQgYSBsaXN0IGl0ZW1cbiAgICogQHByaXZhdGVcbiAgICovXG4gIF9vbkxpc3RJdGVtQ2xpY2sgKGl0ZW0pIHtcbiAgICB0aGlzLl9kZWFjdGl2YXRlQWxsSXRlbXMoKTtcblxuICAgIGxldCB7IGlkZW50aWZpZXIgfSA9IGl0ZW0uZGF0YXNldDtcbiAgICB0aGlzLl9vcGVyYXRpb24uc2V0RmlsdGVyKHRoaXMuX2ZpbHRlcnNbaWRlbnRpZmllcl0pO1xuICAgIHRoaXMuX3VpLmNhbnZhcy5yZW5kZXIoKTtcblxuICAgIGl0ZW0uY2xhc3NMaXN0LmFkZChcImltZ2x5a2l0LWNvbnRyb2xzLWl0ZW0tYWN0aXZlXCIpO1xuICB9XG5cbiAgLyoqXG4gICAqIERlYWN0aXZhdGVzIGFsbCBsaXN0IGl0ZW1zXG4gICAqIEBwcml2YXRlXG4gICAqL1xuICBfZGVhY3RpdmF0ZUFsbEl0ZW1zICgpIHtcbiAgICBmb3IgKGxldCBsaXN0SXRlbSBvZiB0aGlzLl9saXN0SXRlbXMpIHtcbiAgICAgIGxpc3RJdGVtLmNsYXNzTGlzdC5yZW1vdmUoXCJpbWdseWtpdC1jb250cm9scy1pdGVtLWFjdGl2ZVwiKTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogUmVnaXN0ZXJzIGFsbCB0aGUga25vd24gZmlsdGVyc1xuICAgKiBAcHJpdmF0ZVxuICAgKi9cbiAgX2FkZERlZmF1bHRGaWx0ZXJzICgpIHtcbiAgICB0aGlzLmFkZEZpbHRlcihyZXF1aXJlKFwiLi4vLi4vLi4vb3BlcmF0aW9ucy9maWx0ZXJzL2lkZW50aXR5LWZpbHRlclwiKSk7XG4gICAgdGhpcy5hZGRGaWx0ZXIocmVxdWlyZShcIi4uLy4uLy4uL29wZXJhdGlvbnMvZmlsdGVycy9rMS1maWx0ZXJcIikpO1xuICAgIHRoaXMuYWRkRmlsdGVyKHJlcXVpcmUoXCIuLi8uLi8uLi9vcGVyYXRpb25zL2ZpbHRlcnMvazItZmlsdGVyXCIpKTtcbiAgICB0aGlzLmFkZEZpbHRlcihyZXF1aXJlKFwiLi4vLi4vLi4vb3BlcmF0aW9ucy9maWx0ZXJzL2s2LWZpbHRlclwiKSk7XG4gICAgdGhpcy5hZGRGaWx0ZXIocmVxdWlyZShcIi4uLy4uLy4uL29wZXJhdGlvbnMvZmlsdGVycy9rZHluYW1pYy1maWx0ZXJcIikpO1xuICAgIHRoaXMuYWRkRmlsdGVyKHJlcXVpcmUoXCIuLi8uLi8uLi9vcGVyYXRpb25zL2ZpbHRlcnMvZnJpZGdlLWZpbHRlclwiKSk7XG4gICAgdGhpcy5hZGRGaWx0ZXIocmVxdWlyZShcIi4uLy4uLy4uL29wZXJhdGlvbnMvZmlsdGVycy9icmVlemUtZmlsdGVyXCIpKTtcbiAgICB0aGlzLmFkZEZpbHRlcihyZXF1aXJlKFwiLi4vLi4vLi4vb3BlcmF0aW9ucy9maWx0ZXJzL29yY2hpZC1maWx0ZXJcIikpO1xuICAgIHRoaXMuYWRkRmlsdGVyKHJlcXVpcmUoXCIuLi8uLi8uLi9vcGVyYXRpb25zL2ZpbHRlcnMvY2hlc3QtZmlsdGVyXCIpKTtcbiAgICB0aGlzLmFkZEZpbHRlcihyZXF1aXJlKFwiLi4vLi4vLi4vb3BlcmF0aW9ucy9maWx0ZXJzL2Zyb250LWZpbHRlclwiKSk7XG4gICAgdGhpcy5hZGRGaWx0ZXIocmVxdWlyZShcIi4uLy4uLy4uL29wZXJhdGlvbnMvZmlsdGVycy9maXhpZS1maWx0ZXJcIikpO1xuICAgIHRoaXMuYWRkRmlsdGVyKHJlcXVpcmUoXCIuLi8uLi8uLi9vcGVyYXRpb25zL2ZpbHRlcnMveDQwMC1maWx0ZXJcIikpO1xuICAgIHRoaXMuYWRkRmlsdGVyKHJlcXVpcmUoXCIuLi8uLi8uLi9vcGVyYXRpb25zL2ZpbHRlcnMvYnctZmlsdGVyXCIpKTtcbiAgICB0aGlzLmFkZEZpbHRlcihyZXF1aXJlKFwiLi4vLi4vLi4vb3BlcmF0aW9ucy9maWx0ZXJzL2J3aGFyZC1maWx0ZXJcIikpO1xuICAgIHRoaXMuYWRkRmlsdGVyKHJlcXVpcmUoXCIuLi8uLi8uLi9vcGVyYXRpb25zL2ZpbHRlcnMvbGVuaW4tZmlsdGVyXCIpKTtcbiAgICB0aGlzLmFkZEZpbHRlcihyZXF1aXJlKFwiLi4vLi4vLi4vb3BlcmF0aW9ucy9maWx0ZXJzL3F1b3ppLWZpbHRlclwiKSk7XG4gICAgdGhpcy5hZGRGaWx0ZXIocmVxdWlyZShcIi4uLy4uLy4uL29wZXJhdGlvbnMvZmlsdGVycy9wb2xhNjY5LWZpbHRlclwiKSk7XG4gICAgdGhpcy5hZGRGaWx0ZXIocmVxdWlyZShcIi4uLy4uLy4uL29wZXJhdGlvbnMvZmlsdGVycy9wb2xhLWZpbHRlclwiKSk7XG4gICAgdGhpcy5hZGRGaWx0ZXIocmVxdWlyZShcIi4uLy4uLy4uL29wZXJhdGlvbnMvZmlsdGVycy9mb29kLWZpbHRlclwiKSk7XG4gICAgdGhpcy5hZGRGaWx0ZXIocmVxdWlyZShcIi4uLy4uLy4uL29wZXJhdGlvbnMvZmlsdGVycy9nbGFtLWZpbHRlclwiKSk7XG4gICAgdGhpcy5hZGRGaWx0ZXIocmVxdWlyZShcIi4uLy4uLy4uL29wZXJhdGlvbnMvZmlsdGVycy9jZWxzaXVzLWZpbHRlclwiKSk7XG4gICAgdGhpcy5hZGRGaWx0ZXIocmVxdWlyZShcIi4uLy4uLy4uL29wZXJhdGlvbnMvZmlsdGVycy90ZXhhcy1maWx0ZXJcIikpO1xuICAgIHRoaXMuYWRkRmlsdGVyKHJlcXVpcmUoXCIuLi8uLi8uLi9vcGVyYXRpb25zL2ZpbHRlcnMvbW9ybmluZy1maWx0ZXJcIikpO1xuICAgIHRoaXMuYWRkRmlsdGVyKHJlcXVpcmUoXCIuLi8uLi8uLi9vcGVyYXRpb25zL2ZpbHRlcnMvbG9tby1maWx0ZXJcIikpO1xuICAgIHRoaXMuYWRkRmlsdGVyKHJlcXVpcmUoXCIuLi8uLi8uLi9vcGVyYXRpb25zL2ZpbHRlcnMvZ29iYmxpbi1maWx0ZXJcIikpO1xuICAgIHRoaXMuYWRkRmlsdGVyKHJlcXVpcmUoXCIuLi8uLi8uLi9vcGVyYXRpb25zL2ZpbHRlcnMvbWVsbG93LWZpbHRlclwiKSk7XG4gICAgdGhpcy5hZGRGaWx0ZXIocmVxdWlyZShcIi4uLy4uLy4uL29wZXJhdGlvbnMvZmlsdGVycy9zdW5ueS1maWx0ZXJcIikpO1xuICAgIHRoaXMuYWRkRmlsdGVyKHJlcXVpcmUoXCIuLi8uLi8uLi9vcGVyYXRpb25zL2ZpbHRlcnMvYTE1LWZpbHRlclwiKSk7XG4gICAgdGhpcy5hZGRGaWx0ZXIocmVxdWlyZShcIi4uLy4uLy4uL29wZXJhdGlvbnMvZmlsdGVycy9zZW1pcmVkLWZpbHRlclwiKSk7XG4gIH1cblxuICAvKipcbiAgICogUmVnaXN0ZXJzIHRoZSBnaXZlbiBmaWx0ZXJcbiAgICogQHBhcmFtICB7Y2xhc3N9IGZpbHRlclxuICAgKiBAcHJpdmF0ZVxuICAgKi9cbiAgYWRkRmlsdGVyIChmaWx0ZXIpIHtcbiAgICB0aGlzLl9hdmFpbGFibGVGaWx0ZXJzW2ZpbHRlci5pZGVudGlmaWVyXSA9IGZpbHRlcjtcbiAgfVxuXG4gIC8qKlxuICAgKiBTZWxlY3RzIHRoZSBmaWx0ZXJzXG4gICAqIEBwYXJhbSB7U2VsZWN0b3J9IHNlbGVjdG9yXG4gICAqL1xuICBzZWxlY3RGaWx0ZXJzIChzZWxlY3Rvcikge1xuICAgIHRoaXMuX2ZpbHRlcnMgPSB7fTtcblxuICAgIGxldCBmaWx0ZXJJZGVudGlmaWVycyA9IE9iamVjdC5rZXlzKHRoaXMuX2F2YWlsYWJsZUZpbHRlcnMpO1xuXG4gICAgbGV0IHNlbGVjdGVkRmlsdGVycyA9IFV0aWxzLnNlbGVjdChmaWx0ZXJJZGVudGlmaWVycywgc2VsZWN0b3IpO1xuICAgIGZvciAobGV0IGlkZW50aWZpZXIgb2Ygc2VsZWN0ZWRGaWx0ZXJzKSB7XG4gICAgICB0aGlzLl9maWx0ZXJzW2lkZW50aWZpZXJdID0gdGhpcy5fYXZhaWxhYmxlRmlsdGVyc1tpZGVudGlmaWVyXTtcbiAgICB9XG5cbiAgICBpZiAodGhpcy5fYWN0aXZlKSB7XG4gICAgICB0aGlzLl9yZW5kZXJDb250cm9scygpO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBUaGUgZGF0YSB0aGF0IGlzIGF2YWlsYWJsZSB0byB0aGUgdGVtcGxhdGVcbiAgICogQHR5cGUge09iamVjdH1cbiAgICogQG92ZXJyaWRlXG4gICAqL1xuICBnZXQgY29udGV4dCAoKSB7XG4gICAgbGV0IGNvbnRleHQgPSBzdXBlci5jb250ZXh0O1xuICAgIGNvbnRleHQuZmlsdGVycyA9IHRoaXMuX2ZpbHRlcnM7XG4gICAgY29udGV4dC5hY3RpdmVGaWx0ZXIgPSB0aGlzLl9vcGVyYXRpb24uZ2V0RmlsdGVyKCk7XG4gICAgcmV0dXJuIGNvbnRleHQ7XG4gIH1cbn1cblxuZXhwb3J0IGRlZmF1bHQgRmlsdGVyc0NvbnRyb2xzO1xuIiwiXCJ1c2Ugc3RyaWN0XCI7XG4vKiFcbiAqIENvcHlyaWdodCAoYykgMjAxMy0yMDE1IDllbGVtZW50cyBHbWJIXG4gKlxuICogUmVsZWFzZWQgdW5kZXIgQXR0cmlidXRpb24tTm9uQ29tbWVyY2lhbCAzLjAgVW5wb3J0ZWRcbiAqIGh0dHA6Ly9jcmVhdGl2ZWNvbW1vbnMub3JnL2xpY2Vuc2VzL2J5LW5jLzMuMC9cbiAqXG4gKiBGb3IgY29tbWVyY2lhbCB1c2UsIHBsZWFzZSBjb250YWN0IHVzIGF0IGNvbnRhY3RAOWVsZW1lbnRzLmNvbVxuICovXG5cbmltcG9ydCBDb250cm9sIGZyb20gXCIuL2NvbnRyb2xcIjtcbmltcG9ydCBTeW1ib2wgZnJvbSBcImVzNi1zeW1ib2xcIjtcbmxldCBmcyA9IHJlcXVpcmUoXCJmc1wiKTtcblxuY2xhc3MgRmxpcENvbnRyb2xzIGV4dGVuZHMgQ29udHJvbCB7XG4gIC8qKlxuICAgKiBBIHVuaXF1ZSBzdHJpbmcgdGhhdCBpZGVudGlmaWVzIHRoaXMgY29udHJvbC5cbiAgICogQHR5cGUge1N0cmluZ31cbiAgICovXG4gIGdldCBpZGVudGlmaWVyICgpIHtcbiAgICByZXR1cm4gXCJmbGlwXCI7XG4gIH1cblxuICAvKipcbiAgICogRW50cnkgcG9pbnQgZm9yIHRoaXMgY29udHJvbFxuICAgKi9cbiAgaW5pdCAoKSB7XG4gICAgdGhpcy5fb3BlcmF0aW9uID0gdGhpcy5fdWkub3BlcmF0aW9ucy5mbGlwO1xuXG4gICAgbGV0IGNvbnRyb2xzVGVtcGxhdGUgPSBmcy5yZWFkRmlsZVN5bmMoX19kaXJuYW1lICsgXCIvLi4vLi4vLi4vdGVtcGxhdGVzL25pZ2h0L29wZXJhdGlvbnMvZmxpcF9jb250cm9scy5qc3RcIiwgXCJ1dGYtOFwiKTtcbiAgICB0aGlzLl9jb250cm9sc1RlbXBsYXRlID0gY29udHJvbHNUZW1wbGF0ZTtcbiAgfVxuXG4gIC8qKlxuICAgKiBHZXRzIGNhbGxlZCB3aGVuIHRoaXMgY29udHJvbCBpcyBhY3RpdmF0ZWRcbiAgICovXG4gIF9vbkVudGVyICgpIHtcbiAgICB0aGlzLl9pbml0aWFsSG9yaXpvbnRhbCA9IHRoaXMuX29wZXJhdGlvbi5nZXRIb3Jpem9udGFsKCk7XG4gICAgdGhpcy5faW5pdGlhbFZlcnRpY2FsID0gdGhpcy5fb3BlcmF0aW9uLmdldFZlcnRpY2FsKCk7XG4gICAgdGhpcy5faW5pdGlhbElkZW50aXR5ID0gdGhpcy5fb3BlcmF0aW9uLmlzSWRlbnRpdHk7XG5cbiAgICBsZXQgbGlzdEl0ZW1zID0gdGhpcy5fY29udHJvbHMucXVlcnlTZWxlY3RvckFsbChcImxpXCIpO1xuICAgIHRoaXMuX2xpc3RJdGVtcyA9IEFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKGxpc3RJdGVtcyk7XG5cbiAgICAvLyBMaXN0ZW4gdG8gY2xpY2sgZXZlbnRzXG4gICAgZm9yIChsZXQgbGlzdEl0ZW0gb2YgdGhpcy5fbGlzdEl0ZW1zKSB7XG4gICAgICBsaXN0SXRlbS5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xuICAgICAgICB0aGlzLl9vbkxpc3RJdGVtQ2xpY2sobGlzdEl0ZW0pO1xuICAgICAgfSk7XG5cbiAgICAgIGxldCB7IGRpcmVjdGlvbiB9ICA9IGxpc3RJdGVtLmRhdGFzZXQ7XG4gICAgICBpZiAoZGlyZWN0aW9uID09PSBcImhvcml6b250YWxcIiAmJiB0aGlzLl9vcGVyYXRpb24uZ2V0SG9yaXpvbnRhbCgpKSB7XG4gICAgICAgIHRoaXMuX3RvZ2dsZUl0ZW0obGlzdEl0ZW0sIHRydWUpO1xuICAgICAgfSBlbHNlIGlmIChkaXJlY3Rpb24gPT09IFwidmVydGljYWxcIiAmJiB0aGlzLl9vcGVyYXRpb24uZ2V0VmVydGljYWwoKSkge1xuICAgICAgICB0aGlzLl90b2dnbGVJdGVtKGxpc3RJdGVtLCB0cnVlKTtcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogR2V0cyBjYWxsZWQgd2hlbiB0aGUgdXNlciBjbGlja2VkIGEgbGlzdCBpdGVtXG4gICAqIEBwcml2YXRlXG4gICAqL1xuICBfb25MaXN0SXRlbUNsaWNrIChpdGVtKSB7XG4gICAgbGV0IHsgZGlyZWN0aW9uIH0gPSBpdGVtLmRhdGFzZXQ7XG4gICAgbGV0IGFjdGl2ZSA9IGZhbHNlO1xuXG4gICAgaWYgKGRpcmVjdGlvbiA9PT0gXCJob3Jpem9udGFsXCIpIHtcbiAgICAgIGxldCBjdXJyZW50SG9yaXpvbnRhbCA9IHRoaXMuX29wZXJhdGlvbi5nZXRIb3Jpem9udGFsKCk7XG4gICAgICB0aGlzLl9vcGVyYXRpb24uc2V0SG9yaXpvbnRhbCghY3VycmVudEhvcml6b250YWwpO1xuICAgICAgdGhpcy5fdWkuY2FudmFzLnJlbmRlcigpO1xuICAgICAgYWN0aXZlID0gIWN1cnJlbnRIb3Jpem9udGFsO1xuICAgIH0gZWxzZSBpZiAoZGlyZWN0aW9uID09PSBcInZlcnRpY2FsXCIpIHtcbiAgICAgIGxldCBjdXJyZW50VmVydGljYWwgPSB0aGlzLl9vcGVyYXRpb24uZ2V0VmVydGljYWwoKTtcbiAgICAgIHRoaXMuX29wZXJhdGlvbi5zZXRWZXJ0aWNhbCghY3VycmVudFZlcnRpY2FsKTtcbiAgICAgIHRoaXMuX3VpLmNhbnZhcy5yZW5kZXIoKTtcbiAgICAgIGFjdGl2ZSA9ICFjdXJyZW50VmVydGljYWw7XG4gICAgfVxuXG4gICAgdGhpcy5fdG9nZ2xlSXRlbShpdGVtLCBhY3RpdmUpO1xuICB9XG5cbiAgLyoqXG4gICAqIFRvZ2dsZXMgdGhlIGFjdGl2ZSBzdGF0ZSBvZiB0aGUgZ2l2ZW4gaXRlbVxuICAgKiBAcGFyYW0ge0RPTUVsZW1lbnR9IGl0ZW1cbiAgICogQHBhcmFtIHtCb29sZWFufSBhY3RpdmVcbiAgICogQHByaXZhdGVcbiAgICovXG4gIF90b2dnbGVJdGVtIChpdGVtLCBhY3RpdmUpIHtcbiAgICBsZXQgYWN0aXZlQ2xhc3MgPSBcImltZ2x5a2l0LWNvbnRyb2xzLWl0ZW0tYWN0aXZlXCI7XG4gICAgaWYgKGFjdGl2ZSkge1xuICAgICAgaXRlbS5jbGFzc0xpc3QuYWRkKGFjdGl2ZUNsYXNzKTtcbiAgICB9IGVsc2Uge1xuICAgICAgaXRlbS5jbGFzc0xpc3QucmVtb3ZlKGFjdGl2ZUNsYXNzKTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogR2V0cyBjYWxsZWQgd2hlbiB0aGUgYmFjayBidXR0b24gaGFzIGJlZW4gY2xpY2tlZFxuICAgKiBAb3ZlcnJpZGVcbiAgICovXG4gIF9vbkJhY2sgKCkge1xuICAgIHRoaXMuX29wZXJhdGlvbi5zZXRIb3Jpem9udGFsKHRoaXMuX2luaXRpYWxIb3Jpem9udGFsKTtcbiAgICB0aGlzLl9vcGVyYXRpb24uc2V0VmVydGljYWwodGhpcy5faW5pdGlhbFZlcnRpY2FsKTtcbiAgICB0aGlzLl91aS5jYW52YXMucmVuZGVyKCk7XG4gIH1cblxuICAvKipcbiAgICogR2V0cyBjYWxsZWQgd2hlbiB0aGUgZG9uZSBidXR0b24gaGFzIGJlZW4gY2xpY2tlZFxuICAgKiBAb3ZlcnJpZGVcbiAgICovXG4gIF9vbkRvbmUgKCkge1xuICAgIHRoaXMuX3VpLmFkZEhpc3RvcnkodGhpcy5fb3BlcmF0aW9uLCB7XG4gICAgICB2ZXJ0aWNhbDogdGhpcy5faW5pdGlhbFZlcnRpY2FsLFxuICAgICAgaG9yaXpvbnRhbDogdGhpcy5faW5pdGlhbEhvcml6b250YWxcbiAgICB9LCB0aGlzLl9pbml0aWFsSWRlbnRpdHkpO1xuICB9XG59XG5cbmV4cG9ydCBkZWZhdWx0IEZsaXBDb250cm9scztcbiIsIlwidXNlIHN0cmljdFwiO1xuLyohXG4gKiBDb3B5cmlnaHQgKGMpIDIwMTMtMjAxNSA5ZWxlbWVudHMgR21iSFxuICpcbiAqIFJlbGVhc2VkIHVuZGVyIEF0dHJpYnV0aW9uLU5vbkNvbW1lcmNpYWwgMy4wIFVucG9ydGVkXG4gKiBodHRwOi8vY3JlYXRpdmVjb21tb25zLm9yZy9saWNlbnNlcy9ieS1uYy8zLjAvXG4gKlxuICogRm9yIGNvbW1lcmNpYWwgdXNlLCBwbGVhc2UgY29udGFjdCB1cyBhdCBjb250YWN0QDllbGVtZW50cy5jb21cbiAqL1xuXG5pbXBvcnQgQ29udHJvbCBmcm9tIFwiLi9jb250cm9sXCI7XG5pbXBvcnQgU2ltcGxlU2xpZGVyIGZyb20gXCIuLi9saWIvc2ltcGxlLXNsaWRlclwiO1xuaW1wb3J0IENvbG9yUGlja2VyIGZyb20gXCIuLi9saWIvY29sb3ItcGlja2VyXCI7XG5sZXQgZnMgPSByZXF1aXJlKFwiZnNcIik7XG5cbmNsYXNzIEZyYW1lc0NvbnRyb2xzIGV4dGVuZHMgQ29udHJvbCB7XG4gIC8qKlxuICAgKiBBIHVuaXF1ZSBzdHJpbmcgdGhhdCBpZGVudGlmaWVzIHRoaXMgY29udHJvbC5cbiAgICogQHR5cGUge1N0cmluZ31cbiAgICovXG4gIGdldCBpZGVudGlmaWVyICgpIHtcbiAgICByZXR1cm4gXCJmcmFtZXNcIjtcbiAgfVxuXG4gIC8qKlxuICAgKiBFbnRyeSBwb2ludCBmb3IgdGhpcyBjb250cm9sXG4gICAqL1xuICBpbml0ICgpIHtcbiAgICB0aGlzLl9vcGVyYXRpb24gPSB0aGlzLl91aS5vcGVyYXRpb25zLmZyYW1lcztcblxuICAgIGxldCBjb250cm9sc1RlbXBsYXRlID0gZnMucmVhZEZpbGVTeW5jKF9fZGlybmFtZSArIFwiLy4uLy4uLy4uL3RlbXBsYXRlcy9uaWdodC9vcGVyYXRpb25zL2ZyYW1lc19jb250cm9scy5qc3RcIiwgXCJ1dGYtOFwiKTtcbiAgICB0aGlzLl9jb250cm9sc1RlbXBsYXRlID0gY29udHJvbHNUZW1wbGF0ZTtcbiAgICB0aGlzLl9wYXJ0aWFsVGVtcGxhdGVzLnB1c2goU2ltcGxlU2xpZGVyLnRlbXBsYXRlKTtcbiAgICB0aGlzLl9wYXJ0aWFsVGVtcGxhdGVzLnB1c2goQ29sb3JQaWNrZXIudGVtcGxhdGUpO1xuICB9XG5cbiAgLyoqXG4gICAqIEdldHMgY2FsbGVkIHdoZW4gdGhpcyBjb250cm9sIGlzIGFjdGl2YXRlZFxuICAgKiBAb3ZlcnJpZGVcbiAgICovXG4gIF9vbkVudGVyICgpIHtcbiAgICBzdXBlci5fb25FbnRlcigpO1xuXG4gICAgLy8gUmVtZW1iZXIgaW5pdGlhbCBpZGVudGl0eSBzdGF0ZVxuICAgIHRoaXMuX2luaXRpYWxJZGVudGl0eSA9IHRoaXMuX29wZXJhdGlvbi5pc0lkZW50aXR5O1xuXG4gICAgdGhpcy5faW5pdGlhbE9wdGlvbnMgPSB7XG4gICAgICB0aGlja25lc3M6IHRoaXMuX29wZXJhdGlvbi5nZXRUaGlja25lc3MoKSxcbiAgICAgIGNvbG9yOiB0aGlzLl9vcGVyYXRpb24uZ2V0Q29sb3IoKVxuICAgIH07XG5cbiAgICB0aGlzLl9vcGVyYXRpb24uaXNJZGVudGl0eSA9IGZhbHNlO1xuICAgIHRoaXMuX3VpLmNhbnZhcy5yZW5kZXIoKTtcblxuICAgIC8vIEluaXQgc2xpZGVyXG4gICAgbGV0IHNsaWRlckVsZW1lbnQgPSB0aGlzLl9jb250cm9scy5xdWVyeVNlbGVjdG9yKFwiLmltZ2x5a2l0LXNsaWRlclwiKTtcbiAgICB0aGlzLl9zbGlkZXIgPSBuZXcgU2ltcGxlU2xpZGVyKHNsaWRlckVsZW1lbnQsIHtcbiAgICAgIG1pblZhbHVlOiAwLjAsXG4gICAgICBtYXhWYWx1ZTogMC41XG4gICAgfSk7XG4gICAgdGhpcy5fc2xpZGVyLm9uKFwidXBkYXRlXCIsIHRoaXMuX29uVGhpY2tuZXNzVXBkYXRlLmJpbmQodGhpcykpO1xuICAgIHRoaXMuX3NsaWRlci5zZXRWYWx1ZSh0aGlzLl9pbml0aWFsT3B0aW9ucy50aGlja25lc3MpO1xuXG4gICAgLy8gSW5pdCBjb2xvcnBpY2tlclxuICAgIGxldCBjb2xvclBpY2tlckVsZW1lbnQgPSB0aGlzLl9jb250cm9scy5xdWVyeVNlbGVjdG9yKFwiLmltZ2x5a2l0LWNvbG9yLXBpY2tlclwiKTtcbiAgICB0aGlzLl9jb2xvclBpY2tlciA9IG5ldyBDb2xvclBpY2tlcih0aGlzLl91aSwgY29sb3JQaWNrZXJFbGVtZW50KTtcbiAgICB0aGlzLl9jb2xvclBpY2tlci5vbihcInVwZGF0ZVwiLCB0aGlzLl9vbkNvbG9yVXBkYXRlLmJpbmQodGhpcykpO1xuICAgIHRoaXMuX2NvbG9yUGlja2VyLnNldFZhbHVlKHRoaXMuX2luaXRpYWxPcHRpb25zLmNvbG9yKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBHZXRzIGNhbGxlZCB3aGVuIHRoZSBiYWNrIGJ1dHRvbiBoYXMgYmVlbiBjbGlja2VkXG4gICAqIEBvdmVycmlkZVxuICAgKi9cbiAgX29uQmFjayAoKSB7XG4gICAgaWYgKCF0aGlzLl9pbml0aWFsSWRlbnRpdHkpIHtcbiAgICAgIHRoaXMuX29wZXJhdGlvbi5zZXQodGhpcy5faW5pdGlhbE9wdGlvbnMpO1xuICAgICAgdGhpcy5fdWkuY2FudmFzLnJlbmRlcigpO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLl9vcGVyYXRpb24uaXNJZGVudGl0eSA9IHRoaXMuX2luaXRpYWxJZGVudGl0eTtcbiAgICAgIHRoaXMuX3VpLmNhbnZhcy5yZW5kZXIoKTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogR2V0cyBjYWxsZWQgd2hlbiB0aGUgdGhpY2tuZXNzIGhhcyBiZWVuIGNoYW5nZWRcbiAgICogQG92ZXJyaWRlXG4gICAqL1xuICBfb25UaGlja25lc3NVcGRhdGUgKHZhbHVlKSB7XG4gICAgdGhpcy5fb3BlcmF0aW9uLnNldFRoaWNrbmVzcyh2YWx1ZSk7XG4gICAgdGhpcy5fdWkuY2FudmFzLnJlbmRlcigpO1xuICB9XG5cbiAgLyoqXG4gICAqIEdldHMgY2FsbGVkIHdoZW4gdGhlIGNvbG9yIGhhcyBiZWVuIGNoYW5nZWRcbiAgICogQG92ZXJyaWRlXG4gICAqL1xuICBfb25Db2xvclVwZGF0ZSAodmFsdWUpIHtcbiAgICB0aGlzLl9vcGVyYXRpb24uc2V0Q29sb3IodmFsdWUpO1xuICAgIHRoaXMuX3VpLmNhbnZhcy5yZW5kZXIoKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBHZXRzIGNhbGxlZCB3aGVuIHRoZSBkb25lIGJ1dHRvbiBoYXMgYmVlbiBjbGlja2VkXG4gICAqIEBvdmVycmlkZVxuICAgKi9cbiAgX29uRG9uZSAoKSB7XG4gICAgdGhpcy5fdWkuYWRkSGlzdG9yeSh0aGlzLl9vcGVyYXRpb24sIHtcbiAgICAgIGNvbG9yOiB0aGlzLl9pbml0aWFsT3B0aW9ucy5jb2xvcixcbiAgICAgIHRoaWNrbmVzczogdGhpcy5faW5pdGlhbE9wdGlvbnMudGhpY2tuZXNzXG4gICAgfSwgdGhpcy5faW5pdGlhbElkZW50aXR5KTtcbiAgfVxufVxuXG5leHBvcnQgZGVmYXVsdCBGcmFtZXNDb250cm9scztcbiIsIlwidXNlIHN0cmljdFwiO1xuLyohXG4gKiBDb3B5cmlnaHQgKGMpIDIwMTMtMjAxNSA5ZWxlbWVudHMgR21iSFxuICpcbiAqIFJlbGVhc2VkIHVuZGVyIEF0dHJpYnV0aW9uLU5vbkNvbW1lcmNpYWwgMy4wIFVucG9ydGVkXG4gKiBodHRwOi8vY3JlYXRpdmVjb21tb25zLm9yZy9saWNlbnNlcy9ieS1uYy8zLjAvXG4gKlxuICogRm9yIGNvbW1lcmNpYWwgdXNlLCBwbGVhc2UgY29udGFjdCB1cyBhdCBjb250YWN0QDllbGVtZW50cy5jb21cbiAqL1xuXG5pbXBvcnQgQ29udHJvbCBmcm9tIFwiLi9jb250cm9sXCI7XG5pbXBvcnQgVmVjdG9yMiBmcm9tIFwiLi4vLi4vLi4vbGliL21hdGgvdmVjdG9yMlwiO1xuaW1wb3J0IFV0aWxzIGZyb20gXCIuLi8uLi8uLi9saWIvdXRpbHNcIjtcbmltcG9ydCBTaW1wbGVTbGlkZXIgZnJvbSBcIi4uL2xpYi9zaW1wbGUtc2xpZGVyXCI7XG5sZXQgZnMgPSByZXF1aXJlKFwiZnNcIik7XG5cbmNsYXNzIFJhZGlhbEJsdXJDb250cm9scyBleHRlbmRzIENvbnRyb2wge1xuICAvKipcbiAgICogQSB1bmlxdWUgc3RyaW5nIHRoYXQgaWRlbnRpZmllcyB0aGlzIGNvbnRyb2wuXG4gICAqIEB0eXBlIHtTdHJpbmd9XG4gICAqL1xuICBnZXQgaWRlbnRpZmllciAoKSB7XG4gICAgcmV0dXJuIFwicmFkaWFsLWJsdXJcIjtcbiAgfVxuXG4gIC8qKlxuICAgKiBFbnRyeSBwb2ludCBmb3IgdGhpcyBjb250cm9sXG4gICAqL1xuICBpbml0ICgpIHtcbiAgICB0aGlzLl9vcGVyYXRpb24gPSB0aGlzLl91aS5vcGVyYXRpb25zW1wicmFkaWFsLWJsdXJcIl07XG5cbiAgICBsZXQgY29udHJvbHNUZW1wbGF0ZSA9IGZzLnJlYWRGaWxlU3luYyhfX2Rpcm5hbWUgKyBcIi8uLi8uLi8uLi90ZW1wbGF0ZXMvbmlnaHQvb3BlcmF0aW9ucy9yYWRpYWwtYmx1cl9jb250cm9scy5qc3RcIiwgXCJ1dGYtOFwiKTtcbiAgICB0aGlzLl9jb250cm9sc1RlbXBsYXRlID0gY29udHJvbHNUZW1wbGF0ZTtcblxuICAgIGxldCBjYW52YXNDb250cm9sc1RlbXBsYXRlID0gZnMucmVhZEZpbGVTeW5jKF9fZGlybmFtZSArIFwiLy4uLy4uLy4uL3RlbXBsYXRlcy9uaWdodC9vcGVyYXRpb25zL3JhZGlhbC1ibHVyX2NhbnZhcy5qc3RcIiwgXCJ1dGYtOFwiKTtcbiAgICB0aGlzLl9jYW52YXNDb250cm9sc1RlbXBsYXRlID0gY2FudmFzQ29udHJvbHNUZW1wbGF0ZTtcblxuICAgIHRoaXMuX3BhcnRpYWxUZW1wbGF0ZXMucHVzaChTaW1wbGVTbGlkZXIudGVtcGxhdGUpO1xuICB9XG5cbiAgLyoqXG4gICAqIEdldHMgY2FsbGVkIHdoZW4gdGhpcyBjb250cm9sIGlzIGFjdGl2YXRlZFxuICAgKiBAb3ZlcnJpZGVcbiAgICovXG4gIF9vbkVudGVyICgpIHtcbiAgICBzdXBlci5fb25FbnRlcigpO1xuXG4gICAgLy8gUmVtZW1iZXIgaW5pdGlhbCBpZGVudGl0eSBzdGF0ZVxuICAgIHRoaXMuX2luaXRpYWxJZGVudGl0eSA9IHRoaXMuX29wZXJhdGlvbi5pc0lkZW50aXR5O1xuICAgIHRoaXMuX2luaXRpYWxTZXR0aW5ncyA9IHtcbiAgICAgIHBvc2l0aW9uOiB0aGlzLl9vcGVyYXRpb24uZ2V0UG9zaXRpb24oKS5jbG9uZSgpLFxuICAgICAgZ3JhZGllbnRSYWRpdXM6IHRoaXMuX29wZXJhdGlvbi5nZXRHcmFkaWVudFJhZGl1cygpLFxuICAgICAgYmx1clJhZGl1czogdGhpcy5fb3BlcmF0aW9uLmdldEJsdXJSYWRpdXMoKVxuICAgIH07XG5cbiAgICB0aGlzLl9vcGVyYXRpb24uaXNJZGVudGl0eSA9IGZhbHNlO1xuXG4gICAgLy8gTW91c2UgZXZlbnQgY2FsbGJhY2tzIGJvdW5kIHRvIHRoZSBjbGFzcyBjb250ZXh0XG4gICAgdGhpcy5fb25Lbm9iRG93biA9IHRoaXMuX29uS25vYkRvd24uYmluZCh0aGlzKTtcbiAgICB0aGlzLl9vbktub2JEcmFnID0gdGhpcy5fb25Lbm9iRHJhZy5iaW5kKHRoaXMpO1xuICAgIHRoaXMuX29uS25vYlVwID0gdGhpcy5fb25Lbm9iVXAuYmluZCh0aGlzKTtcblxuICAgIHRoaXMuX2tub2IgPSB0aGlzLl9jYW52YXNDb250cm9scy5xdWVyeVNlbGVjdG9yKFwiLmltZ2x5a2l0LWNhbnZhcy1yYWRpYWwtYmx1ci1kb3RcIik7XG4gICAgdGhpcy5fY2lyY2xlID0gdGhpcy5fY2FudmFzQ29udHJvbHMucXVlcnlTZWxlY3RvcihcIi5pbWdseWtpdC1jYW52YXMtcmFkaWFsLWJsdXItY2lyY2xlXCIpO1xuICAgIHRoaXMuX2hhbmRsZUtub2IoKTtcbiAgICB0aGlzLl9pbml0U2xpZGVycygpO1xuXG4gICAgdGhpcy5fdWkuY2FudmFzLnJlbmRlcigpXG4gICAgICAudGhlbigoKSA9PiB7XG4gICAgICAgIHRoaXMuX3VwZGF0ZURPTSgpO1xuICAgICAgfSk7XG4gIH1cblxuICAvKipcbiAgICogSW5pdGlhbGl6ZXMgdGhlIHNsaWRlciBjb250cm9sc1xuICAgKiBAcHJpdmF0ZVxuICAgKi9cbiAgX2luaXRTbGlkZXJzICgpIHtcbiAgICBsZXQgY2FudmFzU2l6ZSA9IHRoaXMuX3VpLmNhbnZhcy5zaXplO1xuXG4gICAgbGV0IGJsdXJSYWRpdXNTbGlkZXIgPSB0aGlzLl9jb250cm9scy5xdWVyeVNlbGVjdG9yKFwiI2ltZ2x5a2l0LWJsdXItcmFkaXVzLXNsaWRlclwiKTtcbiAgICB0aGlzLl9ibHVyUmFkaXVzU2xpZGVyID0gbmV3IFNpbXBsZVNsaWRlcihibHVyUmFkaXVzU2xpZGVyLCB7XG4gICAgICBtaW5WYWx1ZTogMCxcbiAgICAgIG1heFZhbHVlOiA0MFxuICAgIH0pO1xuICAgIHRoaXMuX2JsdXJSYWRpdXNTbGlkZXIub24oXCJ1cGRhdGVcIiwgdGhpcy5fb25CbHVyUmFkaXVzVXBkYXRlLmJpbmQodGhpcykpO1xuICAgIHRoaXMuX2JsdXJSYWRpdXNTbGlkZXIuc2V0VmFsdWUodGhpcy5faW5pdGlhbFNldHRpbmdzLmJsdXJSYWRpdXMpO1xuXG4gICAgbGV0IGdyYWRpZW50UmFkaXVzU2xpZGVyID0gdGhpcy5fY29udHJvbHMucXVlcnlTZWxlY3RvcihcIiNpbWdseWtpdC1ncmFkaWVudC1yYWRpdXMtc2xpZGVyXCIpO1xuICAgIHRoaXMuX2dyYWRpZW50UmFkaXVzU2xpZGVyID0gbmV3IFNpbXBsZVNsaWRlcihncmFkaWVudFJhZGl1c1NsaWRlciwge1xuICAgICAgbWluVmFsdWU6IDEsXG4gICAgICBtYXhWYWx1ZTogTWF0aC5tYXgoY2FudmFzU2l6ZS55LCBjYW52YXNTaXplLngpXG4gICAgfSk7XG4gICAgdGhpcy5fZ3JhZGllbnRSYWRpdXNTbGlkZXIub24oXCJ1cGRhdGVcIiwgdGhpcy5fb25HcmFkaWVudFJhZGl1c1VwZGF0ZS5iaW5kKHRoaXMpKTtcbiAgICB0aGlzLl9ncmFkaWVudFJhZGl1c1NsaWRlci5zZXRWYWx1ZSh0aGlzLl9pbml0aWFsU2V0dGluZ3MuZ3JhZGllbnRSYWRpdXMpO1xuICB9XG5cbiAgLyoqXG4gICAqIEdldHMgY2FsbGVkIHdoZW4gdGhlIHZhbHVlIG9mIHRoZSBibHVyIHJhZGl1cyBzbGlkZXIgaGFzIGJlZW4gdXBkYXRlZFxuICAgKiBAcGFyYW0ge051bWJlcn0gdmFsdWVcbiAgICogQHByaXZhdGVcbiAgICovXG4gIF9vbkJsdXJSYWRpdXNVcGRhdGUgKHZhbHVlKSB7XG4gICAgdGhpcy5fb3BlcmF0aW9uLnNldEJsdXJSYWRpdXModmFsdWUpO1xuICAgIHRoaXMuX3VpLmNhbnZhcy5yZW5kZXIoKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBHZXRzIGNhbGxlZCB3aGVuIHRoZSB2YWx1ZSBvZiB0aGUgZ3JhZGllbnQgcmFkaXVzIHNsaWRlciBoYXMgYmVlbiB1cGRhdGVkXG4gICAqIEBwYXJhbSB7TnVtYmVyfSB2YWx1ZVxuICAgKiBAcHJpdmF0ZVxuICAgKi9cbiAgX29uR3JhZGllbnRSYWRpdXNVcGRhdGUgKHZhbHVlKSB7XG4gICAgdGhpcy5fb3BlcmF0aW9uLnNldEdyYWRpZW50UmFkaXVzKHZhbHVlKTtcbiAgICB0aGlzLl91cGRhdGVET00oKTtcbiAgICB0aGlzLl91aS5jYW52YXMucmVuZGVyKCk7XG4gIH1cblxuICAvKipcbiAgICogSGFuZGxlcyB0aGUga25vYiBkcmFnZ2luZ1xuICAgKiBAcHJpdmF0ZVxuICAgKi9cbiAgX2hhbmRsZUtub2IgKCkge1xuICAgIHRoaXMuX2tub2IuYWRkRXZlbnRMaXN0ZW5lcihcIm1vdXNlZG93blwiLCB0aGlzLl9vbktub2JEb3duKTtcbiAgICB0aGlzLl9rbm9iLmFkZEV2ZW50TGlzdGVuZXIoXCJ0b3VjaHN0YXJ0XCIsIHRoaXMuX29uS25vYkRvd24pO1xuICB9XG5cbiAgLyoqXG4gICAqIEdldHMgY2FsbGVkIHdoZW4gdGhlIHVzZXIgc3RhcnRzIGRyYWdnaW5nIHRoZSBrbm9iXG4gICAqIEBwYXJhbSB7RXZlbnR9IGVcbiAgICogQHByaXZhdGVcbiAgICovXG4gIF9vbktub2JEb3duIChlKSB7XG4gICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuXG4gICAgdGhpcy5faW5pdGlhbE1vdXNlUG9zaXRpb24gPSBVdGlscy5nZXRFdmVudFBvc2l0aW9uKGUpO1xuICAgIHRoaXMuX2luaXRpYWxQb3NpdGlvbiA9IHRoaXMuX29wZXJhdGlvbi5nZXRQb3NpdGlvbigpLmNsb25lKCk7XG5cbiAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKFwibW91c2Vtb3ZlXCIsIHRoaXMuX29uS25vYkRyYWcpO1xuICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJ0b3VjaG1vdmVcIiwgdGhpcy5fb25Lbm9iRHJhZyk7XG5cbiAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKFwibW91c2V1cFwiLCB0aGlzLl9vbktub2JVcCk7XG4gICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcInRvdWNoZW5kXCIsIHRoaXMuX29uS25vYlVwKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBHZXRzIGNhbGxlZCB3aGlsZSB0aGUgdXNlciBzdGFydHMgZHJhZ3MgdGhlIGtub2JcbiAgICogQHBhcmFtIHtFdmVudH0gZVxuICAgKiBAcHJpdmF0ZVxuICAgKi9cbiAgX29uS25vYkRyYWcgKGUpIHtcbiAgICBlLnByZXZlbnREZWZhdWx0KCk7XG5cbiAgICBsZXQgY2FudmFzU2l6ZSA9IHRoaXMuX3VpLmNhbnZhcy5zaXplO1xuICAgIGxldCBtb3VzZVBvc2l0aW9uID0gVXRpbHMuZ2V0RXZlbnRQb3NpdGlvbihlKTtcbiAgICBsZXQgZGlmZiA9IG1vdXNlUG9zaXRpb24uc3VidHJhY3QodGhpcy5faW5pdGlhbE1vdXNlUG9zaXRpb24pO1xuXG4gICAgbGV0IG5ld1Bvc2l0aW9uID0gdGhpcy5faW5pdGlhbFBvc2l0aW9uLmNsb25lKClcbiAgICAgIC5tdWx0aXBseShjYW52YXNTaXplKVxuICAgICAgLmFkZChkaWZmKVxuICAgICAgLmRpdmlkZShjYW52YXNTaXplKTtcblxuICAgIHRoaXMuX29wZXJhdGlvbi5zZXRQb3NpdGlvbihuZXdQb3NpdGlvbik7XG4gICAgdGhpcy5fdXBkYXRlRE9NKCk7XG4gICAgdGhpcy5fdWkuY2FudmFzLnJlbmRlcigpO1xuICB9XG5cbiAgLyoqXG4gICAqIEdldHMgY2FsbGVkIHdoZW4gdGhlIHVzZXIgc3RvcHMgZHJhZ2dpbmcgdGhlIGtub2JcbiAgICogQHBhcmFtIHtFdmVudH0gZVxuICAgKiBAcHJpdmF0ZVxuICAgKi9cbiAgX29uS25vYlVwIChlKSB7XG4gICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuXG4gICAgZG9jdW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcihcIm1vdXNlbW92ZVwiLCB0aGlzLl9vbktub2JEcmFnKTtcbiAgICBkb2N1bWVudC5yZW1vdmVFdmVudExpc3RlbmVyKFwidG91Y2htb3ZlXCIsIHRoaXMuX29uS25vYkRyYWcpO1xuXG4gICAgZG9jdW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcihcIm1vdXNldXBcIiwgdGhpcy5fb25Lbm9iVXApO1xuICAgIGRvY3VtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJ0b3VjaGVuZFwiLCB0aGlzLl9vbktub2JVcCk7XG4gIH1cblxuICAvKipcbiAgICogVXBkYXRlcyB0aGUga25vYlxuICAgKiBAcHJpdmF0ZVxuICAgKi9cbiAgX3VwZGF0ZURPTSAoKSB7XG4gICAgbGV0IGNhbnZhc1NpemUgPSB0aGlzLl91aS5jYW52YXMuc2l6ZTtcbiAgICBsZXQgcG9zaXRpb24gPSB0aGlzLl9vcGVyYXRpb24uZ2V0UG9zaXRpb24oKVxuICAgICAgLmNsb25lKClcbiAgICAgIC5tdWx0aXBseShjYW52YXNTaXplKTtcbiAgICBwb3NpdGlvbi5jbGFtcChuZXcgVmVjdG9yMigwLCAwKSwgY2FudmFzU2l6ZSk7XG5cbiAgICB0aGlzLl9rbm9iLnN0eWxlLmxlZnQgPSBgJHtwb3NpdGlvbi54fXB4YDtcbiAgICB0aGlzLl9rbm9iLnN0eWxlLnRvcCA9IGAke3Bvc2l0aW9uLnl9cHhgO1xuXG4gICAgbGV0IGNpcmNsZVNpemUgPSB0aGlzLl9vcGVyYXRpb24uZ2V0R3JhZGllbnRSYWRpdXMoKSAqIDI7XG4gICAgdGhpcy5fY2lyY2xlLnN0eWxlLmxlZnQgPSBgJHtwb3NpdGlvbi54fXB4YDtcbiAgICB0aGlzLl9jaXJjbGUuc3R5bGUudG9wID0gYCR7cG9zaXRpb24ueX1weGA7XG4gICAgdGhpcy5fY2lyY2xlLnN0eWxlLndpZHRoID0gYCR7Y2lyY2xlU2l6ZX1weGA7XG4gICAgdGhpcy5fY2lyY2xlLnN0eWxlLmhlaWdodCA9IGAke2NpcmNsZVNpemV9cHhgO1xuICAgIHRoaXMuX2NpcmNsZS5zdHlsZS5tYXJnaW5MZWZ0ID0gYC0ke2NpcmNsZVNpemUgLyAyfXB4YDtcbiAgICB0aGlzLl9jaXJjbGUuc3R5bGUubWFyZ2luVG9wID0gYC0ke2NpcmNsZVNpemUgLyAyfXB4YDtcbiAgfVxuXG4gIC8qKlxuICAgKiBHZXRzIGNhbGxlZCB3aGVuIHRoZSBiYWNrIGJ1dHRvbiBoYXMgYmVlbiBjbGlja2VkXG4gICAqIEBvdmVycmlkZVxuICAgKi9cbiAgX29uQmFjayAoKSB7XG4gICAgaWYgKCF0aGlzLl9pbml0aWFsSWRlbnRpdHkpIHtcbiAgICAgIHRoaXMuX29wZXJhdGlvbi5zZXQodGhpcy5faW5pdGlhbFNldHRpbmdzKTtcbiAgICAgIHRoaXMuX3VpLmNhbnZhcy5yZW5kZXIoKTtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5fb3BlcmF0aW9uLmlzSWRlbnRpdHkgPSB0aGlzLl9pbml0aWFsSWRlbnRpdHk7XG4gICAgICB0aGlzLl91aS5jYW52YXMucmVuZGVyKCk7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIEdldHMgY2FsbGVkIHdoZW4gdGhlIGRvbmUgYnV0dG9uIGhhcyBiZWVuIGNsaWNrZWRcbiAgICogQG92ZXJyaWRlXG4gICAqL1xuICBfb25Eb25lICgpIHtcbiAgICB0aGlzLl91aS5hZGRIaXN0b3J5KHRoaXMuX29wZXJhdGlvbiwge1xuICAgICAgcG9zaXRpb246IHRoaXMuX2luaXRpYWxTZXR0aW5ncy5wb3NpdGlvbi5jbG9uZSgpLFxuICAgICAgZ3JhZGllbnRSYWRpdXM6IHRoaXMuX2luaXRpYWxTZXR0aW5ncy5ncmFkaWVudFJhZGl1cyxcbiAgICAgIGJsdXJSYWRpdXM6IHRoaXMuX2luaXRpYWxTZXR0aW5ncy5ibHVyUmFkaXVzXG4gICAgfSwgdGhpcy5faW5pdGlhbElkZW50aXR5KTtcbiAgfVxufVxuXG5leHBvcnQgZGVmYXVsdCBSYWRpYWxCbHVyQ29udHJvbHM7XG4iLCJcInVzZSBzdHJpY3RcIjtcbi8qIVxuICogQ29weXJpZ2h0IChjKSAyMDEzLTIwMTUgOWVsZW1lbnRzIEdtYkhcbiAqXG4gKiBSZWxlYXNlZCB1bmRlciBBdHRyaWJ1dGlvbi1Ob25Db21tZXJjaWFsIDMuMCBVbnBvcnRlZFxuICogaHR0cDovL2NyZWF0aXZlY29tbW9ucy5vcmcvbGljZW5zZXMvYnktbmMvMy4wL1xuICpcbiAqIEZvciBjb21tZXJjaWFsIHVzZSwgcGxlYXNlIGNvbnRhY3QgdXMgYXQgY29udGFjdEA5ZWxlbWVudHMuY29tXG4gKi9cblxuaW1wb3J0IENvbnRyb2wgZnJvbSBcIi4vY29udHJvbFwiO1xuaW1wb3J0IFZlY3RvcjIgZnJvbSBcIi4uLy4uLy4uL2xpYi9tYXRoL3ZlY3RvcjJcIjtcbmltcG9ydCBTeW1ib2wgZnJvbSBcImVzNi1zeW1ib2xcIjtcbmxldCBmcyA9IHJlcXVpcmUoXCJmc1wiKTtcblxuY2xhc3MgUm90YXRpb25Db250cm9scyBleHRlbmRzIENvbnRyb2wge1xuICAvKipcbiAgICogQSB1bmlxdWUgc3RyaW5nIHRoYXQgaWRlbnRpZmllcyB0aGlzIGNvbnRyb2wuXG4gICAqIEB0eXBlIHtTdHJpbmd9XG4gICAqL1xuICBnZXQgaWRlbnRpZmllciAoKSB7XG4gICAgcmV0dXJuIFwicm90YXRpb25cIjtcbiAgfVxuXG4gIC8qKlxuICAgKiBFbnRyeSBwb2ludCBmb3IgdGhpcyBjb250cm9sXG4gICAqL1xuICBpbml0ICgpIHtcbiAgICB0aGlzLl9vcGVyYXRpb24gPSB0aGlzLl91aS5vcGVyYXRpb25zLnJvdGF0aW9uO1xuICAgIHRoaXMuX2Nyb3BPcGVyYXRpb24gPSB0aGlzLl91aS5vcGVyYXRpb25zLmNyb3A7XG5cbiAgICBsZXQgY29udHJvbHNUZW1wbGF0ZSA9IGZzLnJlYWRGaWxlU3luYyhfX2Rpcm5hbWUgKyBcIi8uLi8uLi8uLi90ZW1wbGF0ZXMvbmlnaHQvb3BlcmF0aW9ucy9yb3RhdGlvbl9jb250cm9scy5qc3RcIiwgXCJ1dGYtOFwiKTtcbiAgICB0aGlzLl9jb250cm9sc1RlbXBsYXRlID0gY29udHJvbHNUZW1wbGF0ZTtcblxuICAgIGxldCBjYW52YXNDb250cm9sc1RlbXBsYXRlID0gZnMucmVhZEZpbGVTeW5jKF9fZGlybmFtZSArIFwiLy4uLy4uLy4uL3RlbXBsYXRlcy9uaWdodC9vcGVyYXRpb25zL3JvdGF0aW9uX2NhbnZhcy5qc3RcIiwgXCJ1dGYtOFwiKTtcbiAgICB0aGlzLl9jYW52YXNDb250cm9sc1RlbXBsYXRlID0gY2FudmFzQ29udHJvbHNUZW1wbGF0ZTtcbiAgfVxuXG4gIC8qKlxuICAgKiBHZXRzIGNhbGxlZCB3aGVuIHRoaXMgY29udHJvbCBpcyBhY3RpdmF0ZWRcbiAgICovXG4gIF9vbkVudGVyICgpIHtcbiAgICB0aGlzLl9pbml0aWFsWm9vbUxldmVsID0gdGhpcy5fdWkuY2FudmFzLnpvb21MZXZlbDtcbiAgICB0aGlzLl91aS5jYW52YXMuem9vbVRvRml0KGZhbHNlKTtcblxuICAgIC8vIFN0b3JlIGluaXRpYWwgc2V0dGluZ3MgZm9yIFwiYmFja1wiIGFuZCBcImRvbmVcIiBidXR0b25zXG4gICAgdGhpcy5faW5pdGlhbFN0YXJ0ID0gdGhpcy5fY3JvcE9wZXJhdGlvbi5nZXRTdGFydCgpLmNsb25lKCk7XG4gICAgdGhpcy5faW5pdGlhbEVuZCA9IHRoaXMuX2Nyb3BPcGVyYXRpb24uZ2V0RW5kKCkuY2xvbmUoKTtcbiAgICB0aGlzLl9pbml0aWFsSWRlbnRpdHkgPSB0aGlzLl9vcGVyYXRpb24uaXNJZGVudGl0eTtcblxuICAgIC8vIE1ha2Ugc3VyZSB3ZSBzZWUgdGhlIHdob2xlIGlucHV0IGltYWdlXG4gICAgdGhpcy5fY3JvcE9wZXJhdGlvbi5zZXQoe1xuICAgICAgc3RhcnQ6IG5ldyBWZWN0b3IyKDAsIDApLFxuICAgICAgZW5kOiBuZXcgVmVjdG9yMigxLCAxKVxuICAgIH0pO1xuXG4gICAgdGhpcy5faW5pdGlhbERlZ3JlZXMgPSB0aGlzLl9vcGVyYXRpb24uZ2V0RGVncmVlcygpO1xuXG4gICAgbGV0IGxpc3RJdGVtcyA9IHRoaXMuX2NvbnRyb2xzLnF1ZXJ5U2VsZWN0b3JBbGwoXCJsaVwiKTtcbiAgICB0aGlzLl9saXN0SXRlbXMgPSBBcnJheS5wcm90b3R5cGUuc2xpY2UuY2FsbChsaXN0SXRlbXMpO1xuXG4gICAgLy8gTGlzdGVuIHRvIGNsaWNrIGV2ZW50c1xuICAgIGZvciAobGV0IGxpc3RJdGVtIG9mIHRoaXMuX2xpc3RJdGVtcykge1xuICAgICAgbGlzdEl0ZW0uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcbiAgICAgICAgdGhpcy5fb25MaXN0SXRlbUNsaWNrKGxpc3RJdGVtKTtcbiAgICAgIH0pO1xuICAgIH1cblxuICAgIC8vIEZpbmQgdGhlIGRpdiBhcmVhcyB0aGF0IGFmZmVjdCB0aGUgZGlzcGxheWVkIGNyb3Agc2l6ZVxuICAgIGxldCBwcmVmaXggPSBcIi5pbWdseWtpdC1jYW52YXMtY3JvcFwiO1xuICAgIHRoaXMuX2Nyb3BBcmVhcyA9IHtcbiAgICAgIHRvcExlZnQ6IHRoaXMuX2NhbnZhc0NvbnRyb2xzLnF1ZXJ5U2VsZWN0b3IoYCR7cHJlZml4fS10b3AtbGVmdGApLFxuICAgICAgdG9wQ2VudGVyOiB0aGlzLl9jYW52YXNDb250cm9scy5xdWVyeVNlbGVjdG9yKGAke3ByZWZpeH0tdG9wLWNlbnRlcmApLFxuICAgICAgY2VudGVyTGVmdDogdGhpcy5fY2FudmFzQ29udHJvbHMucXVlcnlTZWxlY3RvcihgJHtwcmVmaXh9LWNlbnRlci1sZWZ0YCksXG4gICAgICBjZW50ZXJDZW50ZXI6IHRoaXMuX2NhbnZhc0NvbnRyb2xzLnF1ZXJ5U2VsZWN0b3IoYCR7cHJlZml4fS1jZW50ZXItY2VudGVyYClcbiAgICB9O1xuXG4gICAgLy8gUmVzdW1lIHRoZSByZW5kZXJpbmdcbiAgICB0aGlzLl91aS5jYW52YXMucmVuZGVyKClcbiAgICAgIC50aGVuKCgpID0+IHtcbiAgICAgICAgdGhpcy5fc2hvd0Nyb3BDb250YWluZXIoKTtcbiAgICAgICAgdGhpcy5fdXBkYXRlQ3JvcERPTSgpO1xuICAgICAgfSk7XG4gIH1cblxuICAvKipcbiAgICogU2hvd3MgdGhlIGNyb3AgY29udGFpbmVyIHdoaWNoIGlzIGhpZGRlbiBpbml0aWFsbHkgdG8gYXZvaWQgZmxpY2tlcmluZ1xuICAgKiB3aGVuIHJlc2l6aW5nIGFmdGVyIHRoZSByZW5kZXJpbmdcbiAgICogQHByaXZhdGVcbiAgICovXG4gIF9zaG93Q3JvcENvbnRhaW5lciAoKSB7XG4gICAgbGV0IGNvbnRhaW5lciA9IHRoaXMuX2NhbnZhc0NvbnRyb2xzLnF1ZXJ5U2VsZWN0b3IoXCIuaW1nbHlraXQtY2FudmFzLWNyb3AtY29udGFpbmVyXCIpO1xuICAgIGNvbnRhaW5lci5jbGFzc0xpc3QucmVtb3ZlKFwiaW1nbHlraXQtY2FudmFzLWNyb3AtY29udGFpbmVyLWhpZGRlblwiKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBHZXRzIGNhbGxlZCB3aGVuIHRoZSBnaXZlbiBpdGVtIGhhcyBiZWVuIGNsaWNrZWRcbiAgICogQHBhcmFtIHtET01PYmplY3R9IGl0ZW1cbiAgICogQHByaXZhdGVcbiAgICovXG4gIF9vbkxpc3RJdGVtQ2xpY2sgKGl0ZW0pIHtcbiAgICBsZXQgeyBkZWdyZWVzIH0gPSBpdGVtLmRhdGFzZXQ7XG4gICAgZGVncmVlcyA9IHBhcnNlSW50KGRlZ3JlZXMpO1xuXG4gICAgbGV0IGN1cnJlbnREZWdyZWVzID0gdGhpcy5fb3BlcmF0aW9uLmdldERlZ3JlZXMoKTtcbiAgICB0aGlzLl9vcGVyYXRpb24uc2V0RGVncmVlcyhjdXJyZW50RGVncmVlcyArIGRlZ3JlZXMpO1xuICAgIHRoaXMuX3VpLmNhbnZhcy56b29tVG9GaXQoKVxuICAgICAgLnRoZW4oKCkgPT4ge1xuICAgICAgICB0aGlzLl91cGRhdGVDcm9wRE9NKCk7XG4gICAgICB9KTtcbiAgfVxuXG4gIC8qKlxuICAgKiBHZXRzIGNhbGxlZCB3aGVuIHRoZSB6b29tIGxldmVsIGhhcyBiZWVuIGNoYW5nZWQgd2hpbGVcbiAgICogdGhpcyBjb250cm9sIGlzIGFjdGl2ZVxuICAgKi9cbiAgb25ab29tICgpIHtcbiAgICB0aGlzLl91cGRhdGVDcm9wRE9NKCk7XG4gIH1cblxuICAvKipcbiAgICogVXBkYXRlcyB0aGUgY3JvcHBpbmcgZGl2cyBmb3IgdGhlIGN1cnJlbnQgb3BlcmF0aW9uIHNldHRpbmdzXG4gICAqIEBwcml2YXRlXG4gICAqL1xuICBfdXBkYXRlQ3JvcERPTSAoKSB7XG4gICAgbGV0IHN0YXJ0ID0gdGhpcy5faW5pdGlhbFN0YXJ0LmNsb25lKCk7XG4gICAgbGV0IGVuZCA9IHRoaXMuX2luaXRpYWxFbmQuY2xvbmUoKTtcbiAgICBsZXQgY2FudmFzU2l6ZSA9IHRoaXMuX3VpLmNhbnZhcy5zaXplO1xuXG4gICAgbGV0IHN0YXJ0QWJzb2x1dGUgPSBzdGFydC5tdWx0aXBseShjYW52YXNTaXplKTtcbiAgICBsZXQgZW5kQWJzb2x1dGUgPSBlbmQubXVsdGlwbHkoY2FudmFzU2l6ZSk7XG4gICAgbGV0IHNpemUgPSBlbmRBYnNvbHV0ZS5jbG9uZSgpLnN1YnRyYWN0KHN0YXJ0QWJzb2x1dGUpO1xuXG4gICAgbGV0IHRvcCA9IE1hdGgubWF4KDEsIHN0YXJ0QWJzb2x1dGUueSk7XG4gICAgbGV0IGxlZnQgPSBNYXRoLm1heCgxLCBzdGFydEFic29sdXRlLngpO1xuICAgIGxldCB3aWR0aCA9IE1hdGgubWF4KDEsIHNpemUueCk7XG4gICAgbGV0IGhlaWdodCA9IE1hdGgubWF4KDEsIHNpemUueSk7XG5cbiAgICAvLyB3aWR0aHMgYXJlIGRlZmluZWQgYnkgdG9wIGxlZnQgYW5kIHRvcCBjZW50ZXIgYXJlYXNcbiAgICB0aGlzLl9jcm9wQXJlYXMudG9wTGVmdC5zdHlsZS53aWR0aCA9IGAke2xlZnR9cHhgO1xuICAgIHRoaXMuX2Nyb3BBcmVhcy50b3BDZW50ZXIuc3R5bGUud2lkdGggPSBgJHt3aWR0aH1weGA7XG5cbiAgICAvLyBoZWlnaHRzIGFyZSBkZWZpbmVkIGJ5IHRvcCBsZWZ0IGFuZCBjZW50ZXIgbGVmdCBhcmVhc1xuICAgIHRoaXMuX2Nyb3BBcmVhcy50b3BMZWZ0LnN0eWxlLmhlaWdodCA9IGAke3RvcH1weGA7XG4gICAgdGhpcy5fY3JvcEFyZWFzLmNlbnRlckxlZnQuc3R5bGUuaGVpZ2h0ID0gYCR7aGVpZ2h0fXB4YDtcbiAgfVxuXG4gIC8qKlxuICAgKiBHZXRzIGNhbGxlZCB3aGVuIHRoZSBiYWNrIGJ1dHRvbiBoYXMgYmVlbiBjbGlja2VkXG4gICAqIEBvdmVycmlkZVxuICAgKi9cbiAgX29uQmFjayAoKSB7XG4gICAgdGhpcy5fb3BlcmF0aW9uLnNldERlZ3JlZXModGhpcy5faW5pdGlhbERlZ3JlZXMpO1xuICAgIHRoaXMuX2Nyb3BPcGVyYXRpb24uc2V0KHtcbiAgICAgIHN0YXJ0OiB0aGlzLl9pbml0aWFsU3RhcnQsXG4gICAgICBlbmQ6IHRoaXMuX2luaXRpYWxFbmRcbiAgICB9KTtcbiAgICB0aGlzLl91aS5jYW52YXMucmVuZGVyKCk7XG4gIH1cblxuICAvKipcbiAgICogR2V0cyBjYWxsZWQgd2hlbiB0aGUgZG9uZSBidXR0b24gaGFzIGJlZW4gY2xpY2tlZFxuICAgKiBAb3ZlcnJpZGVcbiAgICovXG4gIF9vbkRvbmUgKCkge1xuICAgIHRoaXMuX2Nyb3BPcGVyYXRpb24uc2V0KHtcbiAgICAgIHN0YXJ0OiB0aGlzLl9pbml0aWFsU3RhcnQsXG4gICAgICBlbmQ6IHRoaXMuX2luaXRpYWxFbmRcbiAgICB9KTtcbiAgICB0aGlzLl91aS5jYW52YXMucmVuZGVyKCk7XG5cbiAgICB0aGlzLl91aS5hZGRIaXN0b3J5KHRoaXMuX29wZXJhdGlvbiwge1xuICAgICAgZGVncmVlczogdGhpcy5faW5pdGlhbERlZ3JlZXNcbiAgICB9LCB0aGlzLl9pbml0aWFsSWRlbnRpdHkpO1xuICB9XG59XG5cbmV4cG9ydCBkZWZhdWx0IFJvdGF0aW9uQ29udHJvbHM7XG4iLCJcInVzZSBzdHJpY3RcIjtcbi8qIVxuICogQ29weXJpZ2h0IChjKSAyMDEzLTIwMTUgOWVsZW1lbnRzIEdtYkhcbiAqXG4gKiBSZWxlYXNlZCB1bmRlciBBdHRyaWJ1dGlvbi1Ob25Db21tZXJjaWFsIDMuMCBVbnBvcnRlZFxuICogaHR0cDovL2NyZWF0aXZlY29tbW9ucy5vcmcvbGljZW5zZXMvYnktbmMvMy4wL1xuICpcbiAqIEZvciBjb21tZXJjaWFsIHVzZSwgcGxlYXNlIGNvbnRhY3QgdXMgYXQgY29udGFjdEA5ZWxlbWVudHMuY29tXG4gKi9cblxuaW1wb3J0IFNsaWRlciBmcm9tIFwiLi4vbGliL3NsaWRlclwiO1xuaW1wb3J0IENvbnRyb2wgZnJvbSBcIi4vY29udHJvbFwiO1xubGV0IGZzID0gcmVxdWlyZShcImZzXCIpO1xuXG5jbGFzcyBTYXR1cmF0aW9uQ29udHJvbHMgZXh0ZW5kcyBDb250cm9sIHtcbiAgLyoqXG4gICAqIEEgdW5pcXVlIHN0cmluZyB0aGF0IGlkZW50aWZpZXMgdGhpcyBjb250cm9sLlxuICAgKiBAdHlwZSB7U3RyaW5nfVxuICAgKi9cbiAgZ2V0IGlkZW50aWZpZXIgKCkge1xuICAgIHJldHVybiBcInNhdHVyYXRpb25cIjtcbiAgfVxuXG4gIC8qKlxuICAgKiBFbnRyeSBwb2ludCBmb3IgdGhpcyBjb250cm9sXG4gICAqL1xuICBpbml0ICgpIHtcbiAgICB0aGlzLl9vcGVyYXRpb24gPSB0aGlzLl91aS5vcGVyYXRpb25zLnNhdHVyYXRpb247XG5cbiAgICBsZXQgY29udHJvbHNUZW1wbGF0ZSA9IGZzLnJlYWRGaWxlU3luYyhfX2Rpcm5hbWUgKyBcIi8uLi8uLi8uLi90ZW1wbGF0ZXMvbmlnaHQvb3BlcmF0aW9ucy9zYXR1cmF0aW9uX2NvbnRyb2xzLmpzdFwiLCBcInV0Zi04XCIpO1xuICAgIHRoaXMuX2NvbnRyb2xzVGVtcGxhdGUgPSBjb250cm9sc1RlbXBsYXRlO1xuICAgIHRoaXMuX3BhcnRpYWxUZW1wbGF0ZXMucHVzaChTbGlkZXIudGVtcGxhdGUpO1xuICB9XG5cbiAgLyoqXG4gICAqIEdldHMgY2FsbGVkIHdoZW4gdGhpcyBjb250cm9sIGlzIGFjdGl2YXRlZFxuICAgKiBAb3ZlcnJpZGVcbiAgICovXG4gIF9vbkVudGVyICgpIHtcbiAgICBzdXBlci5fb25FbnRlcigpO1xuXG4gICAgbGV0IHNsaWRlckVsZW1lbnQgPSB0aGlzLl9jb250cm9scy5xdWVyeVNlbGVjdG9yKFwiLmltZ2x5a2l0LXNsaWRlclwiKTtcbiAgICB0aGlzLl9zbGlkZXIgPSBuZXcgU2xpZGVyKHNsaWRlckVsZW1lbnQsIHtcbiAgICAgIG1pblZhbHVlOiAwLFxuICAgICAgbWF4VmFsdWU6IDJcbiAgICB9KTtcbiAgICB0aGlzLl9zbGlkZXIub24oXCJ1cGRhdGVcIiwgdGhpcy5fb25VcGRhdGUuYmluZCh0aGlzKSk7XG5cbiAgICAvLyBJbml0aWFsbHkgc2V0IHZhbHVlXG4gICAgbGV0IHNhdHVyYXRpb24gPSB0aGlzLl9vcGVyYXRpb24uZ2V0U2F0dXJhdGlvbigpO1xuICAgIHRoaXMuX2luaXRpYWxTYXR1cmF0aW9uID0gc2F0dXJhdGlvbjtcbiAgICB0aGlzLl9zbGlkZXIuc2V0VmFsdWUoc2F0dXJhdGlvbik7XG5cbiAgICB0aGlzLl9pbml0aWFsSWRlbnRpdHkgPSB0aGlzLl9vcGVyYXRpb24uaXNJZGVudGl0eTtcbiAgfVxuXG4gIC8qKlxuICAgKiBHZXRzIGNhbGxlZCB3aGVuIHRoZSBiYWNrIGJ1dHRvbiBoYXMgYmVlbiBjbGlja2VkXG4gICAqIEBvdmVycmlkZVxuICAgKi9cbiAgX29uQmFjayAoKSB7XG4gICAgc3VwZXIuX29uQmFjaygpO1xuICAgIHRoaXMuX29wZXJhdGlvbi5zZXRTYXR1cmF0aW9uKHRoaXMuX2luaXRpYWxTYXR1cmF0aW9uKTtcbiAgICB0aGlzLl91aS5jYW52YXMucmVuZGVyKCk7XG4gIH1cblxuICAvKipcbiAgICogR2V0cyBjYWxsZWQgd2hlbiB0aGUgdmFsdWUgaGFzIGJlZW4gdXBkYXRlZFxuICAgKiBAb3ZlcnJpZGVcbiAgICovXG4gIF9vblVwZGF0ZSAodmFsdWUpIHtcbiAgICB0aGlzLl9vcGVyYXRpb24uc2V0U2F0dXJhdGlvbih2YWx1ZSk7XG4gICAgdGhpcy5fdWkuY2FudmFzLnJlbmRlcigpO1xuICB9XG5cbiAgLyoqXG4gICAqIEdldHMgY2FsbGVkIHdoZW4gdGhlIGRvbmUgYnV0dG9uIGhhcyBiZWVuIGNsaWNrZWRcbiAgICogQG92ZXJyaWRlXG4gICAqL1xuICBfb25Eb25lICgpIHtcbiAgICB0aGlzLl91aS5hZGRIaXN0b3J5KHRoaXMuX29wZXJhdGlvbiwge1xuICAgICAgc2F0dXJhdGlvbjogdGhpcy5faW5pdGlhbFNhdHVyYXRpb25cbiAgICB9LCB0aGlzLl9pbml0aWFsSWRlbnRpdHkpO1xuICB9XG59XG5cbmV4cG9ydCBkZWZhdWx0IFNhdHVyYXRpb25Db250cm9scztcbiIsIlwidXNlIHN0cmljdFwiO1xuLyohXG4gKiBDb3B5cmlnaHQgKGMpIDIwMTMtMjAxNSA5ZWxlbWVudHMgR21iSFxuICpcbiAqIFJlbGVhc2VkIHVuZGVyIEF0dHJpYnV0aW9uLU5vbkNvbW1lcmNpYWwgMy4wIFVucG9ydGVkXG4gKiBodHRwOi8vY3JlYXRpdmVjb21tb25zLm9yZy9saWNlbnNlcy9ieS1uYy8zLjAvXG4gKlxuICogRm9yIGNvbW1lcmNpYWwgdXNlLCBwbGVhc2UgY29udGFjdCB1cyBhdCBjb250YWN0QDllbGVtZW50cy5jb21cbiAqL1xuXG5pbXBvcnQgQ29udHJvbCBmcm9tIFwiLi9jb250cm9sXCI7XG5pbXBvcnQgVmVjdG9yMiBmcm9tIFwiLi4vLi4vLi4vbGliL21hdGgvdmVjdG9yMlwiO1xuaW1wb3J0IFV0aWxzIGZyb20gXCIuLi8uLi8uLi9saWIvdXRpbHNcIjtcbmltcG9ydCBTeW1ib2wgZnJvbSBcImVzNi1zeW1ib2xcIjtcbmxldCBmcyA9IHJlcXVpcmUoXCJmc1wiKTtcblxuY2xhc3MgU3RpY2tlcnNDb250cm9sIGV4dGVuZHMgQ29udHJvbCB7XG4gIC8qKlxuICAgKiBBIHVuaXF1ZSBzdHJpbmcgdGhhdCBpZGVudGlmaWVzIHRoaXMgY29udHJvbC5cbiAgICogQHR5cGUge1N0cmluZ31cbiAgICovXG4gIGdldCBpZGVudGlmaWVyICgpIHtcbiAgICByZXR1cm4gXCJzdGlja2Vyc1wiO1xuICB9XG5cbiAgLyoqXG4gICAqIEVudHJ5IHBvaW50IGZvciB0aGlzIGNvbnRyb2xcbiAgICovXG4gIGluaXQgKCkge1xuICAgIHRoaXMuX29wZXJhdGlvbiA9IHRoaXMuX3VpLm9wZXJhdGlvbnMuc3RpY2tlcnM7XG5cbiAgICBsZXQgY29udHJvbHNUZW1wbGF0ZSA9IGZzLnJlYWRGaWxlU3luYyhfX2Rpcm5hbWUgKyBcIi8uLi8uLi8uLi90ZW1wbGF0ZXMvbmlnaHQvb3BlcmF0aW9ucy9zdGlja2Vyc19jb250cm9scy5qc3RcIiwgXCJ1dGYtOFwiKTtcbiAgICB0aGlzLl9jb250cm9sc1RlbXBsYXRlID0gY29udHJvbHNUZW1wbGF0ZTtcblxuICAgIGxldCBjYW52YXNDb250cm9sc1RlbXBsYXRlID0gZnMucmVhZEZpbGVTeW5jKF9fZGlybmFtZSArIFwiLy4uLy4uLy4uL3RlbXBsYXRlcy9uaWdodC9vcGVyYXRpb25zL3N0aWNrZXJzX2NhbnZhcy5qc3RcIiwgXCJ1dGYtOFwiKTtcbiAgICB0aGlzLl9jYW52YXNDb250cm9sc1RlbXBsYXRlID0gY2FudmFzQ29udHJvbHNUZW1wbGF0ZTtcblxuICAgIC8qKlxuICAgICAqIFRoZSByZWdpc3RlcmVkIHN0aWNrZXJzXG4gICAgICogQHR5cGUge09iamVjdC48c3RyaW5nLCBjbGFzcz59XG4gICAgICovXG4gICAgdGhpcy5fYXZhaWxhYmxlU3RpY2tlcnMgPSB7fTtcbiAgICB0aGlzLl9zdGlja2VycyA9IHt9O1xuICAgIHRoaXMuX2FkZERlZmF1bHRTdGlja2VycygpO1xuICAgIHRoaXMuc2VsZWN0U3RpY2tlcnMobnVsbCk7XG4gIH1cblxuICAvKipcbiAgICogUmVnaXN0ZXJzIHRoZSBkZWZhdWx0IHN0aWNrZXJzXG4gICAqIEBwcml2YXRlXG4gICAqL1xuICBfYWRkRGVmYXVsdFN0aWNrZXJzICgpIHtcbiAgICB0aGlzLmFkZFN0aWNrZXIoXCJnbGFzc2VzLW5lcmRcIiwgXCJzdGlja2Vycy9zdGlja2VyLWdsYXNzZXMtbmVyZC5wbmdcIik7XG4gICAgdGhpcy5hZGRTdGlja2VyKFwiZ2xhc3Nlcy1ub3JtYWxcIiwgXCJzdGlja2Vycy9zdGlja2VyLWdsYXNzZXMtbm9ybWFsLnBuZ1wiKTtcbiAgICB0aGlzLmFkZFN0aWNrZXIoXCJnbGFzc2VzLXNodXR0ZXItZ3JlZW5cIiwgXCJzdGlja2Vycy9zdGlja2VyLWdsYXNzZXMtc2h1dHRlci1ncmVlbi5wbmdcIik7XG4gICAgdGhpcy5hZGRTdGlja2VyKFwiZ2xhc3Nlcy1zaHV0dGVyLXllbGxvd1wiLCBcInN0aWNrZXJzL3N0aWNrZXItZ2xhc3Nlcy1zaHV0dGVyLXllbGxvdy5wbmdcIik7XG4gICAgdGhpcy5hZGRTdGlja2VyKFwiZ2xhc3Nlcy1zdW5cIiwgXCJzdGlja2Vycy9zdGlja2VyLWdsYXNzZXMtc3VuLnBuZ1wiKTtcbiAgICB0aGlzLmFkZFN0aWNrZXIoXCJoYXQtY2FwXCIsIFwic3RpY2tlcnMvc3RpY2tlci1oYXQtY2FwLnBuZ1wiKTtcbiAgICB0aGlzLmFkZFN0aWNrZXIoXCJoYXQtY3lsaW5kZXJcIiwgXCJzdGlja2Vycy9zdGlja2VyLWhhdC1jeWxpbmRlci5wbmdcIik7XG4gICAgdGhpcy5hZGRTdGlja2VyKFwiaGF0LXBhcnR5XCIsIFwic3RpY2tlcnMvc3RpY2tlci1oYXQtcGFydHkucG5nXCIpO1xuICAgIHRoaXMuYWRkU3RpY2tlcihcImhhdC1zaGVyaWZmXCIsIFwic3RpY2tlcnMvc3RpY2tlci1oYXQtc2hlcmlmZi5wbmdcIik7XG4gICAgdGhpcy5hZGRTdGlja2VyKFwiaGVhcnRcIiwgXCJzdGlja2Vycy9zdGlja2VyLWhlYXJ0LnBuZ1wiKTtcbiAgICB0aGlzLmFkZFN0aWNrZXIoXCJtdXN0YWNoZS1sb25nXCIsIFwic3RpY2tlcnMvc3RpY2tlci1tdXN0YWNoZS1sb25nLnBuZ1wiKTtcbiAgICB0aGlzLmFkZFN0aWNrZXIoXCJtdXN0YWNoZTFcIiwgXCJzdGlja2Vycy9zdGlja2VyLW11c3RhY2hlMS5wbmdcIik7XG4gICAgdGhpcy5hZGRTdGlja2VyKFwibXVzdGFjaGUyXCIsIFwic3RpY2tlcnMvc3RpY2tlci1tdXN0YWNoZTIucG5nXCIpO1xuICAgIHRoaXMuYWRkU3RpY2tlcihcIm11c3RhY2hlM1wiLCBcInN0aWNrZXJzL3N0aWNrZXItbXVzdGFjaGUzLnBuZ1wiKTtcbiAgICB0aGlzLmFkZFN0aWNrZXIoXCJwaXBlXCIsIFwic3RpY2tlcnMvc3RpY2tlci1waXBlLnBuZ1wiKTtcbiAgICB0aGlzLmFkZFN0aWNrZXIoXCJzbm93Zmxha2VcIiwgXCJzdGlja2Vycy9zdGlja2VyLXNub3dmbGFrZS5wbmdcIik7XG4gICAgdGhpcy5hZGRTdGlja2VyKFwic3RhclwiLCBcInN0aWNrZXJzL3N0aWNrZXItc3Rhci5wbmdcIik7XG4gIH1cblxuICAvKipcbiAgICogUmVnaXN0ZXJzIHRoZSBzdGlja2VyIHdpdGggdGhlIGdpdmVuIGlkZW50aWZpZXIgYW5kIHBhdGhcbiAgICogQHByaXZhdGVcbiAgICovXG4gIGFkZFN0aWNrZXIgKGlkZW50aWZpZXIsIHBhdGgpIHtcbiAgICB0aGlzLl9hdmFpbGFibGVTdGlja2Vyc1tpZGVudGlmaWVyXSA9IHBhdGg7XG4gIH1cblxuICAvKipcbiAgICogU2VsZWN0cyB0aGUgc3RpY2tlcnNcbiAgICogQHBhcmFtIHtTZWxlY3Rvcn0gc2VsZWN0b3JcbiAgICovXG4gIHNlbGVjdFN0aWNrZXJzIChzZWxlY3Rvcikge1xuICAgIHRoaXMuX3N0aWNrZXJzID0ge307XG5cbiAgICBsZXQgc3RpY2tlcklkZW50aWZpZXJzID0gT2JqZWN0LmtleXModGhpcy5fYXZhaWxhYmxlU3RpY2tlcnMpO1xuXG4gICAgbGV0IHNlbGVjdGVkU3RpY2tlcnMgPSBVdGlscy5zZWxlY3Qoc3RpY2tlcklkZW50aWZpZXJzLCBzZWxlY3Rvcik7XG4gICAgZm9yIChsZXQgaWRlbnRpZmllciBvZiBzZWxlY3RlZFN0aWNrZXJzKSB7XG4gICAgICB0aGlzLl9zdGlja2Vyc1tpZGVudGlmaWVyXSA9IHRoaXMuX2F2YWlsYWJsZVN0aWNrZXJzW2lkZW50aWZpZXJdO1xuICAgIH1cblxuICAgIGlmICh0aGlzLl9hY3RpdmUpIHtcbiAgICAgIHRoaXMuX3JlbmRlckNvbnRyb2xzKCk7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIEdldHMgY2FsbGVkIHdoZW4gdGhpcyBjb250cm9sIGlzIGFjdGl2YXRlZFxuICAgKiBAb3ZlcnJpZGVcbiAgICovXG4gIF9vbkVudGVyICgpIHtcbiAgICB0aGlzLl9pbml0aWFsSWRlbnRpdHkgPSB0aGlzLl9vcGVyYXRpb24uaXNJZGVudGl0eTtcbiAgICB0aGlzLl9pbml0aWFsU2V0dGluZ3MgPSB7XG4gICAgICBzdGlja2VyOiB0aGlzLl9vcGVyYXRpb24uZ2V0U3RpY2tlcigpLFxuICAgICAgcG9zaXRpb246IHRoaXMuX29wZXJhdGlvbi5nZXRQb3NpdGlvbigpLmNsb25lKCksXG4gICAgICBzaXplOiB0aGlzLl9vcGVyYXRpb24uZ2V0U2l6ZSgpLmNsb25lKClcbiAgICB9O1xuXG4gICAgdGhpcy5fc2l6ZSA9IHRoaXMuX2luaXRpYWxTZXR0aW5ncy5zaXplLmNsb25lKCk7XG4gICAgdGhpcy5fcG9zaXRpb24gPSB0aGlzLl9pbml0aWFsU2V0dGluZ3MucG9zaXRpb24uY2xvbmUoKTtcblxuICAgIC8vIERvbid0IHJlbmRlciBhbiBhbHJlYWR5IGV4aXN0aW5nIHN0aWNrZXIgYXMgbG9uZyBhc1xuICAgIC8vIHdlJ3JlIGVkaXRpbmdcbiAgICB0aGlzLl9vcGVyYXRpb24uaXNJZGVudGl0eSA9IHRydWU7XG5cbiAgICAvLyBSZW1lbWJlciB6b29tIGxldmVsIGFuZCB6b29tIHRvIGZpdCB0aGUgY2FudmFzXG4gICAgdGhpcy5faW5pdGlhbFpvb21MZXZlbCA9IHRoaXMuX3VpLmNhbnZhcy56b29tTGV2ZWw7XG4gICAgdGhpcy5fdWkuY2FudmFzLnpvb21Ub0ZpdChmYWxzZSk7XG5cbiAgICAvLyBGaW5kIERPTSBlbGVtZW50c1xuICAgIHRoaXMuX2NvbnRhaW5lciA9IHRoaXMuX2NhbnZhc0NvbnRyb2xzLnF1ZXJ5U2VsZWN0b3IoXCIuaW1nbHlraXQtY2FudmFzLXN0aWNrZXJzXCIpO1xuICAgIHRoaXMuX3N0aWNrZXJJbWFnZSA9IHRoaXMuX2NhbnZhc0NvbnRyb2xzLnF1ZXJ5U2VsZWN0b3IoXCJpbWdcIik7XG4gICAgdGhpcy5fc3RpY2tlckltYWdlLmFkZEV2ZW50TGlzdGVuZXIoXCJsb2FkXCIsICgpID0+IHtcbiAgICAgIHRoaXMuX3N0aWNrZXJTaXplID0gbmV3IFZlY3RvcjIodGhpcy5fc3RpY2tlckltYWdlLndpZHRoLCB0aGlzLl9zdGlja2VySW1hZ2UuaGVpZ2h0KTtcbiAgICAgIHRoaXMuX29uU3RpY2tlckxvYWQoKTtcbiAgICB9KTtcbiAgICB0aGlzLl9rbm9iID0gdGhpcy5fY2FudmFzQ29udHJvbHMucXVlcnlTZWxlY3RvcihcImRpdi5pbWdseWtpdC1rbm9iXCIpO1xuXG4gICAgLy8gTW91c2UgZXZlbnQgY2FsbGJhY2tzIGJvdW5kIHRvIHRoZSBjbGFzcyBjb250ZXh0XG4gICAgdGhpcy5fb25JbWFnZURvd24gPSB0aGlzLl9vbkltYWdlRG93bi5iaW5kKHRoaXMpO1xuICAgIHRoaXMuX29uSW1hZ2VEcmFnID0gdGhpcy5fb25JbWFnZURyYWcuYmluZCh0aGlzKTtcbiAgICB0aGlzLl9vbkltYWdlVXAgPSB0aGlzLl9vbkltYWdlVXAuYmluZCh0aGlzKTtcbiAgICB0aGlzLl9vbktub2JEb3duID0gdGhpcy5fb25Lbm9iRG93bi5iaW5kKHRoaXMpO1xuICAgIHRoaXMuX29uS25vYkRyYWcgPSB0aGlzLl9vbktub2JEcmFnLmJpbmQodGhpcyk7XG4gICAgdGhpcy5fb25Lbm9iVXAgPSB0aGlzLl9vbktub2JVcC5iaW5kKHRoaXMpO1xuXG4gICAgdGhpcy5fdWkuY2FudmFzLnJlbmRlcigpXG4gICAgICAudGhlbigoKSA9PiB7XG4gICAgICAgIGxldCBjYW52YXNTaXplID0gdGhpcy5fdWkuY2FudmFzLnNpemU7XG4gICAgICAgIHRoaXMuX3NpemUubXVsdGlwbHkoY2FudmFzU2l6ZSk7XG4gICAgICAgIHRoaXMuX3Bvc2l0aW9uLm11bHRpcGx5KGNhbnZhc1NpemUpO1xuICAgICAgICBpZiAoIXRoaXMuX2luaXRpYWxJZGVudGl0eSkge1xuICAgICAgICAgIHRoaXMuX2FwcGx5U2V0dGluZ3MoKTtcbiAgICAgICAgfVxuICAgICAgfSk7XG5cbiAgICB0aGlzLl9oYW5kbGVMaXN0SXRlbXMoKTtcbiAgICB0aGlzLl9oYW5kbGVJbWFnZSgpO1xuICAgIHRoaXMuX2hhbmRsZUtub2IoKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBIYW5kbGVzIHRoZSBsaXN0IGl0ZW0gY2xpY2sgZXZlbnRzXG4gICAqIEBwcml2YXRlXG4gICAqL1xuICBfaGFuZGxlTGlzdEl0ZW1zICgpIHtcbiAgICBsZXQgbGlzdEl0ZW1zID0gdGhpcy5fY29udHJvbHMucXVlcnlTZWxlY3RvckFsbChcImxpXCIpO1xuICAgIHRoaXMuX2xpc3RJdGVtcyA9IEFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKGxpc3RJdGVtcyk7XG5cbiAgICAvLyBMaXN0ZW4gdG8gY2xpY2sgZXZlbnRzXG4gICAgbGV0IGkgPSAwO1xuICAgIGZvciAobGV0IGxpc3RJdGVtIG9mIHRoaXMuX2xpc3RJdGVtcykge1xuICAgICAgbGV0IHsgaWRlbnRpZmllciB9ID0gbGlzdEl0ZW0uZGF0YXNldDtcbiAgICAgIGxpc3RJdGVtLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XG4gICAgICAgIHRoaXMuX29uTGlzdEl0ZW1DbGljayhsaXN0SXRlbSk7XG4gICAgICB9KTtcblxuICAgICAgaWYgKCh0aGlzLl9pbml0aWFsSWRlbnRpdHkgJiYgaSA9PT0gMCkgfHxcbiAgICAgICAgKCF0aGlzLl9pbml0aWFsSWRlbnRpdHkgJiYgdGhpcy5fc3RpY2tlcnNbaWRlbnRpZmllcl0gPT09IHRoaXMuX2luaXRpYWxTZXR0aW5ncy5zdGlja2VyKSkge1xuICAgICAgICAgIHRoaXMuX29uTGlzdEl0ZW1DbGljayhsaXN0SXRlbSk7XG4gICAgICB9XG4gICAgICBpKys7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIFJlc2l6ZXMgYW5kIHBvc2l0aW9ucyB0aGUgc3RpY2tlciBhY2NvcmRpbmcgdG8gdGhlIGN1cnJlbnQgc2V0dGluZ3NcbiAgICogQHByaXZhdGVcbiAgICovXG4gIF9hcHBseVNldHRpbmdzICgpIHtcbiAgICBsZXQgcmF0aW8gPSB0aGlzLl9zdGlja2VyU2l6ZS55IC8gdGhpcy5fc3RpY2tlclNpemUueDtcbiAgICB0aGlzLl9zaXplLnkgPSB0aGlzLl9zaXplLnggKiByYXRpbztcblxuICAgIHRoaXMuX3N0aWNrZXJJbWFnZS5zdHlsZS53aWR0aCA9IGAke3RoaXMuX3NpemUueH1weGA7XG4gICAgdGhpcy5fc3RpY2tlckltYWdlLnN0eWxlLmhlaWdodCA9IGAke3RoaXMuX3NpemUueX1weGA7XG4gICAgdGhpcy5fY29udGFpbmVyLnN0eWxlLmxlZnQgPSBgJHt0aGlzLl9wb3NpdGlvbi54fXB4YDtcbiAgICB0aGlzLl9jb250YWluZXIuc3R5bGUudG9wID0gYCR7dGhpcy5fcG9zaXRpb24ueX1weGA7XG4gIH1cblxuICAvKipcbiAgICogR2V0cyBjYWxsZWQgd2hlbiB0aGUgdXNlciBoaXRzIHRoZSBiYWNrIGJ1dHRvblxuICAgKiBAb3ZlcnJpZGVcbiAgICovXG4gIF9vbkJhY2sgKCkge1xuICAgIGlmICghdGhpcy5faW5pdGlhbElkZW50aXR5KSB7XG4gICAgICB0aGlzLl9vcGVyYXRpb24uc2V0KHRoaXMuX2luaXRpYWxTZXR0aW5ncyk7XG4gICAgICB0aGlzLl91aS5jYW52YXMucmVuZGVyKCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMuX29wZXJhdGlvbi5pc0lkZW50aXR5ID0gdGhpcy5faW5pdGlhbElkZW50aXR5O1xuICAgICAgdGhpcy5fdWkuY2FudmFzLnJlbmRlcigpO1xuICAgIH1cblxuICAgIHRoaXMuX3VpLmNhbnZhcy5zZXRab29tTGV2ZWwodGhpcy5faW5pdGlhbFpvb21MZXZlbCwgZmFsc2UpO1xuICB9XG5cbiAgLyoqXG4gICAqIEdldHMgY2FsbGVkIHdoZW4gdGhlIGRvbmUgYnV0dG9uIGhhcyBiZWVuIGNsaWNrZWRcbiAgICogQHByb3RlY3RlZFxuICAgKi9cbiAgX29uRG9uZSAoKSB7XG4gICAgLy8gTWFwIHRoZSBwb3NpdGlvbiBhbmQgc2l6ZSBvcHRpb25zIHRvIDAuLi4xIHZhbHVlc1xuICAgIGxldCBjYW52YXNTaXplID0gdGhpcy5fdWkuY2FudmFzLnNpemU7XG4gICAgbGV0IHBvc2l0aW9uID0gdGhpcy5fcG9zaXRpb24uY2xvbmUoKS5kaXZpZGUoY2FudmFzU2l6ZSk7XG4gICAgbGV0IHNpemUgPSB0aGlzLl9zaXplLmNsb25lKCkuZGl2aWRlKGNhbnZhc1NpemUpO1xuXG4gICAgdGhpcy5fdWkuY2FudmFzLnNldFpvb21MZXZlbCh0aGlzLl9pbml0aWFsWm9vbUxldmVsLCBmYWxzZSk7XG5cbiAgICB0aGlzLl9vcGVyYXRpb24uc2V0KHtcbiAgICAgIHN0aWNrZXI6IHRoaXMuX2F2YWlsYWJsZVN0aWNrZXJzW3RoaXMuX3N0aWNrZXJdLFxuICAgICAgcG9zaXRpb246IHBvc2l0aW9uLFxuICAgICAgc2l6ZTogc2l6ZVxuICAgIH0pO1xuICAgIHRoaXMuX3VpLmNhbnZhcy5yZW5kZXIoKTtcblxuICAgIHRoaXMuX3VpLmFkZEhpc3RvcnkodGhpcywge1xuICAgICAgc3RpY2tlcjogdGhpcy5faW5pdGlhbFNldHRpbmdzLnN0aWNrZXIsXG4gICAgICBwb3NpdGlvbjogdGhpcy5faW5pdGlhbFNldHRpbmdzLnBvc2l0aW9uLmNsb25lKCksXG4gICAgICBzaXplOiB0aGlzLl9pbml0aWFsU2V0dGluZ3Muc2l6ZS5jbG9uZSgpXG4gICAgfSwgdGhpcy5faW5pdGlhbElkZW50aXR5KTtcbiAgfVxuXG4gIC8qKlxuICAgKiBIYW5kbGVzIHRoZSBrbm9iIGRyYWdnaW5nXG4gICAqIEBwcml2YXRlXG4gICAqL1xuICBfaGFuZGxlS25vYiAoKSB7XG4gICAgdGhpcy5fa25vYi5hZGRFdmVudExpc3RlbmVyKFwibW91c2Vkb3duXCIsIHRoaXMuX29uS25vYkRvd24pO1xuICAgIHRoaXMuX2tub2IuYWRkRXZlbnRMaXN0ZW5lcihcInRvdWNoc3RhcnRcIiwgdGhpcy5fb25Lbm9iRG93bik7XG4gIH1cblxuICAvKipcbiAgICogR2V0cyBjYWxsZWQgd2hlbiB0aGUgdXNlciBjbGlja3MgdGhlIGtub2JcbiAgICogQHBhcmFtIHtFdmVudH0gZVxuICAgKiBAcHJpdmF0ZVxuICAgKi9cbiAgX29uS25vYkRvd24gKGUpIHtcbiAgICBlLnByZXZlbnREZWZhdWx0KCk7XG5cbiAgICB0aGlzLl9pbml0aWFsTW91c2VQb3NpdGlvbiA9IFV0aWxzLmdldEV2ZW50UG9zaXRpb24oZSk7XG4gICAgdGhpcy5faW5pdGlhbFNpemUgPSB0aGlzLl9zaXplLmNsb25lKCk7XG5cbiAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKFwibW91c2Vtb3ZlXCIsIHRoaXMuX29uS25vYkRyYWcpO1xuICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJ0b3VjaG1vdmVcIiwgdGhpcy5fb25Lbm9iRHJhZyk7XG5cbiAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKFwibW91c2V1cFwiLCB0aGlzLl9vbktub2JVcCk7XG4gICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcInRvdWNoZW5kXCIsIHRoaXMuX29uS25vYlVwKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBHZXRzIGNhbGxlZCB3aGVuIHRoZSB1c2VyIGRyYWdzIHRoZSBrbm9iXG4gICAqIEBwYXJhbSB7RXZlbnR9IGVcbiAgICogQHByaXZhdGVcbiAgICovXG4gIF9vbktub2JEcmFnIChlKSB7XG4gICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuXG4gICAgbGV0IG1vdXNlUG9zaXRpb24gPSBVdGlscy5nZXRFdmVudFBvc2l0aW9uKGUpO1xuICAgIGxldCBkaWZmID0gbW91c2VQb3NpdGlvbi5jbG9uZSgpXG4gICAgICAuc3VidHJhY3QodGhpcy5faW5pdGlhbE1vdXNlUG9zaXRpb24pO1xuXG4gICAgbGV0IHNpemUgPSB0aGlzLl9pbml0aWFsU2l6ZS5jbG9uZSgpO1xuICAgIGxldCByYXRpbyA9IHRoaXMuX3N0aWNrZXJJbWFnZS5oZWlnaHQgLyB0aGlzLl9zdGlja2VySW1hZ2Uud2lkdGg7XG4gICAgc2l6ZS54ICs9IGRpZmYueDtcbiAgICBzaXplLnkgPSBzaXplLnggKiByYXRpbztcblxuICAgIHRoaXMuX3NpemUuY29weShzaXplKTtcblxuICAgIHRoaXMuX2FwcGx5U2V0dGluZ3MoKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBHZXRzIGNhbGxlZCB3aGVuIHRoZSB1c2VyIHJlbGVhc2VzIHRoZSBrbm9iXG4gICAqIEBwYXJhbSB7RXZlbnR9IGVcbiAgICogQHByaXZhdGVcbiAgICovXG4gIF9vbktub2JVcCAoZSkge1xuICAgIGRvY3VtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJtb3VzZW1vdmVcIiwgdGhpcy5fb25Lbm9iRHJhZyk7XG4gICAgZG9jdW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcihcInRvdWNobW92ZVwiLCB0aGlzLl9vbktub2JEcmFnKTtcblxuICAgIGRvY3VtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJtb3VzZXVwXCIsIHRoaXMuX29uS25vYlVwKTtcbiAgICBkb2N1bWVudC5yZW1vdmVFdmVudExpc3RlbmVyKFwidG91Y2hlbmRcIiwgdGhpcy5fb25Lbm9iVXApO1xuICB9XG5cbiAgLyoqXG4gICAqIEhhbmRsZXMgdGhlIGltYWdlIGRyYWdnaW5nXG4gICAqIEBwcml2YXRlXG4gICAqL1xuICBfaGFuZGxlSW1hZ2UgKCkge1xuICAgIHRoaXMuX3N0aWNrZXJJbWFnZS5hZGRFdmVudExpc3RlbmVyKFwibW91c2Vkb3duXCIsIHRoaXMuX29uSW1hZ2VEb3duKTtcbiAgICB0aGlzLl9zdGlja2VySW1hZ2UuYWRkRXZlbnRMaXN0ZW5lcihcInRvdWNoc3RhcnRcIiwgdGhpcy5fb25JbWFnZURvd24pO1xuICB9XG5cbiAgLyoqXG4gICAqIEdldHMgY2FsbGVkIHdoZW4gdGhlIHVzZXIgY2xpY2tzIHRoZSBpbWFnZVxuICAgKiBAcGFyYW0ge0V2ZW50fSBlXG4gICAqIEBwcml2YXRlXG4gICAqL1xuICBfb25JbWFnZURvd24gKGUpIHtcbiAgICBlLnByZXZlbnREZWZhdWx0KCk7XG5cbiAgICB0aGlzLl9pbml0aWFsTW91c2VQb3NpdGlvbiA9IFV0aWxzLmdldEV2ZW50UG9zaXRpb24oZSk7XG4gICAgdGhpcy5faW5pdGlhbFBvc2l0aW9uID0gdGhpcy5fcG9zaXRpb24uY2xvbmUoKTtcblxuICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJtb3VzZW1vdmVcIiwgdGhpcy5fb25JbWFnZURyYWcpO1xuICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJ0b3VjaG1vdmVcIiwgdGhpcy5fb25JbWFnZURyYWcpO1xuXG4gICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcIm1vdXNldXBcIiwgdGhpcy5fb25JbWFnZVVwKTtcbiAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKFwidG91Y2hlbmRcIiwgdGhpcy5fb25JbWFnZVVwKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBHZXRzIGNhbGxlZCB3aGVuIHRoZSB1c2VyIGRyYWdzIHRoZSBpbWFnZVxuICAgKiBAcGFyYW0ge0V2ZW50fSBlXG4gICAqIEBwcml2YXRlXG4gICAqL1xuICBfb25JbWFnZURyYWcgKGUpIHtcbiAgICBlLnByZXZlbnREZWZhdWx0KCk7XG5cbiAgICBsZXQgbW91c2VQb3NpdGlvbiA9IFV0aWxzLmdldEV2ZW50UG9zaXRpb24oZSk7XG4gICAgbGV0IGRpZmYgPSBtb3VzZVBvc2l0aW9uLmNsb25lKClcbiAgICAgIC5zdWJ0cmFjdCh0aGlzLl9pbml0aWFsTW91c2VQb3NpdGlvbik7XG5cbiAgICBsZXQgcG9zaXRpb24gPSB0aGlzLl9pbml0aWFsUG9zaXRpb24uY2xvbmUoKTtcbiAgICBwb3NpdGlvbi5hZGQoZGlmZik7XG5cbiAgICB0aGlzLl9wb3NpdGlvbi5jb3B5KHBvc2l0aW9uKTtcblxuICAgIHRoaXMuX2FwcGx5U2V0dGluZ3MoKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBHZXRzIGNhbGxlZCB3aGVuIHRoZSB1c2VyIHJlbGVhc2VzIHRoZSBpbWFnZVxuICAgKiBAcGFyYW0ge0V2ZW50fSBlXG4gICAqIEBwcml2YXRlXG4gICAqL1xuICBfb25JbWFnZVVwIChlKSB7XG4gICAgZG9jdW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcihcIm1vdXNlbW92ZVwiLCB0aGlzLl9vbkltYWdlRHJhZyk7XG4gICAgZG9jdW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcihcInRvdWNobW92ZVwiLCB0aGlzLl9vbkltYWdlRHJhZyk7XG5cbiAgICBkb2N1bWVudC5yZW1vdmVFdmVudExpc3RlbmVyKFwibW91c2V1cFwiLCB0aGlzLl9vbkltYWdlVXApO1xuICAgIGRvY3VtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJ0b3VjaGVuZFwiLCB0aGlzLl9vbkltYWdlVXApO1xuICB9XG5cbiAgLyoqXG4gICAqIEdldHMgY2FsbGVkIGFzIHNvb24gYXMgdGhlIHN0aWNrZXIgaW1hZ2UgaGFzIGJlZW4gbG9hZGVkXG4gICAqIEBwcml2YXRlXG4gICAqL1xuICBfb25TdGlja2VyTG9hZCAoKSB7XG4gICAgdGhpcy5fc2l6ZSA9IG5ldyBWZWN0b3IyKHRoaXMuX3N0aWNrZXJJbWFnZS53aWR0aCwgdGhpcy5fc3RpY2tlckltYWdlLmhlaWdodCk7XG5cbiAgICBpZiAodHlwZW9mIHRoaXMuX3Bvc2l0aW9uID09PSBcInVuZGVmaW5lZFwiKSB7XG4gICAgICB0aGlzLl9wb3NpdGlvbiA9IG5ldyBWZWN0b3IyKDAsIDApO1xuICAgIH1cblxuICAgIGlmICh0aGlzLl9pbml0aWFsSWRlbnRpdHkpIHtcbiAgICAgIHRoaXMuX2FwcGx5U2V0dGluZ3MoKTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogR2V0cyBjYWxsZWQgd2hlbiB0aGUgdXNlciBjbGlja2VkIGEgbGlzdCBpdGVtXG4gICAqIEBwcml2YXRlXG4gICAqL1xuICBfb25MaXN0SXRlbUNsaWNrIChpdGVtKSB7XG4gICAgdGhpcy5fZGVhY3RpdmF0ZUFsbEl0ZW1zKCk7XG5cbiAgICBsZXQgeyBpZGVudGlmaWVyIH0gPSBpdGVtLmRhdGFzZXQ7XG4gICAgbGV0IHN0aWNrZXJQYXRoID0gdGhpcy5fYXZhaWxhYmxlU3RpY2tlcnNbaWRlbnRpZmllcl07XG4gICAgc3RpY2tlclBhdGggPSB0aGlzLl9raXQuZ2V0QXNzZXRQYXRoKHN0aWNrZXJQYXRoKTtcblxuICAgIHRyeSB7XG4gICAgICB0aGlzLl9zdGlja2VySW1hZ2UuYXR0cmlidXRlcy5yZW1vdmVOYW1lZEl0ZW0oXCJzdHlsZVwiKTtcbiAgICB9IGNhdGNoIChlKSB7fVxuXG4gICAgdGhpcy5fc3RpY2tlciA9IGlkZW50aWZpZXI7XG4gICAgdGhpcy5fc3RpY2tlckltYWdlLnNyYyA9IHN0aWNrZXJQYXRoO1xuXG4gICAgaXRlbS5jbGFzc0xpc3QuYWRkKFwiaW1nbHlraXQtY29udHJvbHMtaXRlbS1hY3RpdmVcIik7XG4gIH1cblxuICAvKipcbiAgICogRGVhY3RpdmF0ZXMgYWxsIGxpc3QgaXRlbXNcbiAgICogQHByaXZhdGVcbiAgICovXG4gIF9kZWFjdGl2YXRlQWxsSXRlbXMgKCkge1xuICAgIGZvciAobGV0IGxpc3RJdGVtIG9mIHRoaXMuX2xpc3RJdGVtcykge1xuICAgICAgbGlzdEl0ZW0uY2xhc3NMaXN0LnJlbW92ZShcImltZ2x5a2l0LWNvbnRyb2xzLWl0ZW0tYWN0aXZlXCIpO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBUaGUgZGF0YSB0aGF0IGlzIGF2YWlsYWJsZSB0byB0aGUgdGVtcGxhdGVcbiAgICogQHR5cGUge09iamVjdH1cbiAgICogQG92ZXJyaWRlXG4gICAqL1xuICBnZXQgY29udGV4dCAoKSB7XG4gICAgbGV0IGNvbnRleHQgPSBzdXBlci5jb250ZXh0O1xuICAgIGNvbnRleHQuc3RpY2tlcnMgPSB0aGlzLl9zdGlja2VycztcbiAgICByZXR1cm4gY29udGV4dDtcbiAgfVxufVxuXG5leHBvcnQgZGVmYXVsdCBTdGlja2Vyc0NvbnRyb2w7XG4iLCJcInVzZSBzdHJpY3RcIjtcbi8qIVxuICogQ29weXJpZ2h0IChjKSAyMDEzLTIwMTUgOWVsZW1lbnRzIEdtYkhcbiAqXG4gKiBSZWxlYXNlZCB1bmRlciBBdHRyaWJ1dGlvbi1Ob25Db21tZXJjaWFsIDMuMCBVbnBvcnRlZFxuICogaHR0cDovL2NyZWF0aXZlY29tbW9ucy5vcmcvbGljZW5zZXMvYnktbmMvMy4wL1xuICpcbiAqIEZvciBjb21tZXJjaWFsIHVzZSwgcGxlYXNlIGNvbnRhY3QgdXMgYXQgY29udGFjdEA5ZWxlbWVudHMuY29tXG4gKi9cblxuaW1wb3J0IENvbnRyb2wgZnJvbSBcIi4vY29udHJvbFwiO1xuaW1wb3J0IENvbG9yUGlja2VyIGZyb20gXCIuLi9saWIvY29sb3ItcGlja2VyXCI7XG5pbXBvcnQgVmVjdG9yMiBmcm9tIFwiLi4vLi4vLi4vbGliL21hdGgvdmVjdG9yMlwiO1xuaW1wb3J0IFV0aWxzIGZyb20gXCIuLi8uLi8uLi9saWIvdXRpbHNcIjtcbmltcG9ydCBTeW1ib2wgZnJvbSBcImVzNi1zeW1ib2xcIjtcbmxldCBmcyA9IHJlcXVpcmUoXCJmc1wiKTtcblxuY2xhc3MgVGV4dENvbnRyb2wgZXh0ZW5kcyBDb250cm9sIHtcbiAgLyoqXG4gICAqIEEgdW5pcXVlIHN0cmluZyB0aGF0IGlkZW50aWZpZXMgdGhpcyBjb250cm9sLlxuICAgKiBAdHlwZSB7U3RyaW5nfVxuICAgKi9cbiAgZ2V0IGlkZW50aWZpZXIgKCkge1xuICAgIHJldHVybiBcInRleHRcIjtcbiAgfVxuXG4gIC8qKlxuICAgKiBFbnRyeSBwb2ludCBmb3IgdGhpcyBjb250cm9sXG4gICAqL1xuICBpbml0ICgpIHtcbiAgICB0aGlzLl9vcGVyYXRpb24gPSB0aGlzLl91aS5vcGVyYXRpb25zLnRleHQ7XG5cbiAgICBsZXQgY29udHJvbHNUZW1wbGF0ZSA9IGZzLnJlYWRGaWxlU3luYyhfX2Rpcm5hbWUgKyBcIi8uLi8uLi8uLi90ZW1wbGF0ZXMvbmlnaHQvb3BlcmF0aW9ucy90ZXh0X2NvbnRyb2xzLmpzdFwiLCBcInV0Zi04XCIpO1xuICAgIHRoaXMuX2NvbnRyb2xzVGVtcGxhdGUgPSBjb250cm9sc1RlbXBsYXRlO1xuXG4gICAgbGV0IGNhbnZhc0NvbnRyb2xzVGVtcGxhdGUgPSBmcy5yZWFkRmlsZVN5bmMoX19kaXJuYW1lICsgXCIvLi4vLi4vLi4vdGVtcGxhdGVzL25pZ2h0L29wZXJhdGlvbnMvdGV4dF9jYW52YXMuanN0XCIsIFwidXRmLThcIik7XG4gICAgdGhpcy5fY2FudmFzQ29udHJvbHNUZW1wbGF0ZSA9IGNhbnZhc0NvbnRyb2xzVGVtcGxhdGU7XG5cbiAgICB0aGlzLl9wYXJ0aWFsVGVtcGxhdGVzLnB1c2goQ29sb3JQaWNrZXIudGVtcGxhdGUpO1xuXG4gICAgdGhpcy5fZm9udHMgPSBbXTtcbiAgICB0aGlzLl9hZGRGb250cygpO1xuICB9XG5cbiAgLyoqXG4gICAqIEdldHMgY2FsbGVkIHdoZW4gdGhpcyBjb250cm9sIGlzIGFjdGl2YXRlZFxuICAgKiBAb3ZlcnJpZGVcbiAgICovXG4gIF9vbkVudGVyICgpIHtcbiAgICBsZXQgY2FudmFzU2l6ZSA9IHRoaXMuX3VpLmNhbnZhcy5zaXplO1xuXG4gICAgdGhpcy5faW5pdGlhbElkZW50aXR5ID0gdGhpcy5fb3BlcmF0aW9uLmlzSWRlbnRpdHk7XG4gICAgdGhpcy5faW5pdGlhbFNldHRpbmdzID0ge1xuICAgICAgbGluZUhlaWdodDogdGhpcy5fb3BlcmF0aW9uLmdldExpbmVIZWlnaHQoKSxcbiAgICAgIGZvbnRTaXplOiB0aGlzLl9vcGVyYXRpb24uZ2V0Rm9udFNpemUoKSxcbiAgICAgIGZvbnRGYW1pbHk6IHRoaXMuX29wZXJhdGlvbi5nZXRGb250RmFtaWx5KCksXG4gICAgICBmb250V2VpZ2h0OiB0aGlzLl9vcGVyYXRpb24uZ2V0Rm9udFdlaWdodCgpLFxuICAgICAgY29sb3I6IHRoaXMuX29wZXJhdGlvbi5nZXRDb2xvcigpLFxuICAgICAgcG9zaXRpb246IHRoaXMuX29wZXJhdGlvbi5nZXRQb3NpdGlvbigpLFxuICAgICAgdGV4dDogdGhpcy5fb3BlcmF0aW9uLmdldFRleHQoKSB8fCBcIlwiLFxuICAgICAgbWF4V2lkdGg6IHRoaXMuX29wZXJhdGlvbi5nZXRNYXhXaWR0aCgpLFxuICAgICAgYmFja2dyb3VuZENvbG9yOiB0aGlzLl9vcGVyYXRpb24uZ2V0QmFja2dyb3VuZENvbG9yKClcbiAgICB9O1xuXG4gICAgdGhpcy5fc2V0dGluZ3MgPSB7XG4gICAgICBsaW5lSGVpZ2h0OiB0aGlzLl9pbml0aWFsU2V0dGluZ3MubGluZUhlaWdodCxcbiAgICAgIGZvbnRTaXplOiB0aGlzLl9pbml0aWFsU2V0dGluZ3MuZm9udFNpemUsXG4gICAgICBmb250RmFtaWx5OiB0aGlzLl9pbml0aWFsU2V0dGluZ3MuZm9udEZhbWlseSxcbiAgICAgIGZvbnRXZWlnaHQ6IHRoaXMuX2luaXRpYWxTZXR0aW5ncy5mb250V2VpZ2h0LFxuICAgICAgY29sb3I6IHRoaXMuX2luaXRpYWxTZXR0aW5ncy5jb2xvci5jbG9uZSgpLFxuICAgICAgcG9zaXRpb246IHRoaXMuX2luaXRpYWxTZXR0aW5ncy5wb3NpdGlvbi5jbG9uZSgpLm11bHRpcGx5KGNhbnZhc1NpemUpLFxuICAgICAgdGV4dDogdGhpcy5faW5pdGlhbFNldHRpbmdzLnRleHQsXG4gICAgICBtYXhXaWR0aDogdGhpcy5faW5pdGlhbFNldHRpbmdzLm1heFdpZHRoICogY2FudmFzU2l6ZS54LFxuICAgICAgYmFja2dyb3VuZENvbG9yOiB0aGlzLl9pbml0aWFsU2V0dGluZ3MuYmFja2dyb3VuZENvbG9yLmNsb25lKClcbiAgICB9O1xuXG4gICAgLy8gRG9uJ3QgcmVuZGVyIGFuIGFscmVhZHkgZXhpc3RpbmcgdGV4dCBhcyBsb25nIGFzXG4gICAgLy8gd2UncmUgZWRpdGluZ1xuICAgIHRoaXMuX29wZXJhdGlvbi5pc0lkZW50aXR5ID0gdHJ1ZTtcblxuICAgIC8vIFJlbWVtYmVyIHpvb20gbGV2ZWwgYW5kIHpvb20gdG8gZml0IHRoZSBjYW52YXNcbiAgICB0aGlzLl9pbml0aWFsWm9vbUxldmVsID0gdGhpcy5fdWkuY2FudmFzLnpvb21MZXZlbDtcblxuICAgIHRoaXMuX2NvbnRhaW5lciA9IHRoaXMuX2NhbnZhc0NvbnRyb2xzLnF1ZXJ5U2VsZWN0b3IoXCIuaW1nbHlraXQtY2FudmFzLXRleHRcIik7XG4gICAgdGhpcy5fdGV4dGFyZWEgPSB0aGlzLl9jYW52YXNDb250cm9scy5xdWVyeVNlbGVjdG9yKFwidGV4dGFyZWFcIik7XG4gICAgdGhpcy5fdGV4dGFyZWEuZm9jdXMoKTtcblxuICAgIHRoaXMuX21vdmVLbm9iID0gdGhpcy5fY2FudmFzQ29udHJvbHMucXVlcnlTZWxlY3RvcihcIi5pbWdseWtpdC1jcm9zc2hhaXJcIik7XG4gICAgdGhpcy5fcmVzaXplS25vYiA9IHRoaXMuX2NhbnZhc0NvbnRyb2xzLnF1ZXJ5U2VsZWN0b3IoXCIuaW1nbHlraXQta25vYlwiKTtcblxuICAgIC8vIElmIHRoZSB0ZXh0IGhhcyBiZWVuIGVkaXRlZCBiZWZvcmUsIHN1YnRyYWN0IHRoZSBrbm9iIHdpZHRoIGFuZCBwYWRkaW5nXG4gICAgaWYgKCF0aGlzLl9pbml0aWFsSWRlbnRpdHkpIHtcbiAgICAgIHRoaXMuX3NldHRpbmdzLnBvc2l0aW9uLnggLT0gMjtcbiAgICAgIHRoaXMuX3NldHRpbmdzLnBvc2l0aW9uLnkgLT0gMjtcbiAgICB9XG5cbiAgICB0aGlzLl9vblRleHRhcmVhS2V5VXAgPSB0aGlzLl9vblRleHRhcmVhS2V5VXAuYmluZCh0aGlzKTtcbiAgICB0aGlzLl9vblJlc2l6ZUtub2JEb3duID0gdGhpcy5fb25SZXNpemVLbm9iRG93bi5iaW5kKHRoaXMpO1xuICAgIHRoaXMuX29uUmVzaXplS25vYkRyYWcgPSB0aGlzLl9vblJlc2l6ZUtub2JEcmFnLmJpbmQodGhpcyk7XG4gICAgdGhpcy5fb25SZXNpemVLbm9iVXAgPSB0aGlzLl9vblJlc2l6ZUtub2JVcC5iaW5kKHRoaXMpO1xuICAgIHRoaXMuX29uTW92ZUtub2JEb3duID0gdGhpcy5fb25Nb3ZlS25vYkRvd24uYmluZCh0aGlzKTtcbiAgICB0aGlzLl9vbk1vdmVLbm9iRHJhZyA9IHRoaXMuX29uTW92ZUtub2JEcmFnLmJpbmQodGhpcyk7XG4gICAgdGhpcy5fb25Nb3ZlS25vYlVwID0gdGhpcy5fb25Nb3ZlS25vYlVwLmJpbmQodGhpcyk7XG4gICAgdGhpcy5fb25Gb3JlZ3JvdW5kQ29sb3JVcGRhdGUgPSB0aGlzLl9vbkZvcmVncm91bmRDb2xvclVwZGF0ZS5iaW5kKHRoaXMpO1xuICAgIHRoaXMuX29uQmFja2dyb3VuZENvbG9yVXBkYXRlID0gdGhpcy5fb25CYWNrZ3JvdW5kQ29sb3JVcGRhdGUuYmluZCh0aGlzKTtcblxuICAgIHRoaXMuX2luaXRDb2xvclBpY2tlcnMoKTtcbiAgICB0aGlzLl9oYW5kbGVMaXN0SXRlbXMoKTtcbiAgICB0aGlzLl9oYW5kbGVUZXh0YXJlYSgpO1xuICAgIHRoaXMuX2hhbmRsZVJlc2l6ZUtub2IoKTtcbiAgICB0aGlzLl9oYW5kbGVNb3ZlS25vYigpO1xuICAgIHRoaXMuX3Jlc2l6ZVRleHRhcmVhKCk7XG5cbiAgICB0aGlzLl91aS5jYW52YXMuem9vbVRvRml0KClcbiAgICAgIC50aGVuKCgpID0+IHtcbiAgICAgICAgdGhpcy5fYXBwbHlTZXR0aW5ncygpO1xuICAgICAgfSk7XG4gIH1cblxuICAvKipcbiAgICogSW5pdGlhbGl6ZXMgdGhlIGNvbG9yIHBpY2tlcnNcbiAgICogQHByaXZhdGVcbiAgICovXG4gIF9pbml0Q29sb3JQaWNrZXJzICgpIHtcbiAgICBsZXQgZm9yZWdyb3VuZENvbG9yUGlja2VyID0gdGhpcy5fY29udHJvbHMucXVlcnlTZWxlY3RvcihcIiNpbWdseWtpdC10ZXh0LWZvcmVncm91bmQtY29sb3ItcGlja2VyXCIpO1xuICAgIHRoaXMuX2ZvcmVncm91bmRDb2xvclBpY2tlciA9IG5ldyBDb2xvclBpY2tlcih0aGlzLl91aSwgZm9yZWdyb3VuZENvbG9yUGlja2VyKTtcbiAgICB0aGlzLl9mb3JlZ3JvdW5kQ29sb3JQaWNrZXIuc2V0VmFsdWUodGhpcy5fb3BlcmF0aW9uLmdldENvbG9yKCkpO1xuICAgIHRoaXMuX2ZvcmVncm91bmRDb2xvclBpY2tlci5vbihcInVwZGF0ZVwiLCB0aGlzLl9vbkZvcmVncm91bmRDb2xvclVwZGF0ZSk7XG5cbiAgICBsZXQgYmFja2dyb3VuZENvbG9yUGlja2VyID0gdGhpcy5fY29udHJvbHMucXVlcnlTZWxlY3RvcihcIiNpbWdseWtpdC10ZXh0LWJhY2tncm91bmQtY29sb3ItcGlja2VyXCIpO1xuICAgIHRoaXMuX2JhY2tncm91bmRDb2xvclBpY2tlciA9IG5ldyBDb2xvclBpY2tlcih0aGlzLl91aSwgYmFja2dyb3VuZENvbG9yUGlja2VyKTtcbiAgICB0aGlzLl9iYWNrZ3JvdW5kQ29sb3JQaWNrZXIuc2V0VmFsdWUodGhpcy5fb3BlcmF0aW9uLmdldEJhY2tncm91bmRDb2xvcigpKTtcbiAgICB0aGlzLl9iYWNrZ3JvdW5kQ29sb3JQaWNrZXIub24oXCJ1cGRhdGVcIiwgdGhpcy5fb25CYWNrZ3JvdW5kQ29sb3JVcGRhdGUpO1xuICB9XG5cbiAgLyoqXG4gICAqIEhhbmRsZXMgdGhlIGxpc3QgaXRlbSBjbGljayBldmVudHNcbiAgICogQHByaXZhdGVcbiAgICovXG4gIF9oYW5kbGVMaXN0SXRlbXMgKCkge1xuICAgIGxldCBsaXN0SXRlbXMgPSB0aGlzLl9jb250cm9scy5xdWVyeVNlbGVjdG9yQWxsKFwibGlcIik7XG4gICAgdGhpcy5fbGlzdEl0ZW1zID0gQXJyYXkucHJvdG90eXBlLnNsaWNlLmNhbGwobGlzdEl0ZW1zKTtcblxuICAgIC8vIExpc3RlbiB0byBjbGljayBldmVudHNcbiAgICBsZXQgaSA9IDA7XG4gICAgZm9yIChsZXQgbGlzdEl0ZW0gb2YgdGhpcy5fbGlzdEl0ZW1zKSB7XG4gICAgICBsaXN0SXRlbS5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xuICAgICAgICB0aGlzLl9vbkxpc3RJdGVtQ2xpY2sobGlzdEl0ZW0pO1xuICAgICAgfSk7XG5cbiAgICAgIGlmICgodGhpcy5faW5pdGlhbElkZW50aXR5ICYmIGkgPT09IDApIHx8XG4gICAgICAgICghdGhpcy5faW5pdGlhbElkZW50aXR5ICYmIG5hbWUgPT09IHRoaXMuX2luaXRpYWxTZXR0aW5ncy5mb250RmFtaWx5KSkge1xuICAgICAgICAgIHRoaXMuX29uTGlzdEl0ZW1DbGljayhsaXN0SXRlbSk7XG4gICAgICB9XG4gICAgICBpKys7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIEhhbmRsZXMgdGhlIHRleHQgYXJlYSBrZXkgZXZlbnRzXG4gICAqIEBwcml2YXRlXG4gICAqL1xuICBfaGFuZGxlVGV4dGFyZWEgKCkge1xuICAgIHRoaXMuX3RleHRhcmVhLmFkZEV2ZW50TGlzdGVuZXIoXCJrZXl1cFwiLCB0aGlzLl9vblRleHRhcmVhS2V5VXApO1xuICB9XG5cbiAgLyoqXG4gICAqIEdldHMgY2FsbGVkIHdoZW4gdGhlIHVzZXIgcmVsZWFzZXMgYSBrZXkgaW5zaWRlIHRoZSB0ZXh0IGFyZWFcbiAgICogQHByaXZhdGVcbiAgICovXG4gIF9vblRleHRhcmVhS2V5VXAgKCkge1xuICAgIHRoaXMuX3Jlc2l6ZVRleHRhcmVhKCk7XG4gICAgdGhpcy5fc2V0dGluZ3MudGV4dCA9IHRoaXMuX3RleHRhcmVhLnZhbHVlO1xuICB9XG5cbiAgLyoqXG4gICAqIFJlc2l6ZXMgdGhlIHRleHQgYXJlYSB0byBmaXQgdGhlIHRleHQgaW5zaWRlIG9mIGl0XG4gICAqIEBwcml2YXRlXG4gICAqL1xuICBfcmVzaXplVGV4dGFyZWEgKCkge1xuICAgIGxldCBzY3JvbGxUb3AgPSB0aGlzLl90ZXh0YXJlYS5zY3JvbGxUb3A7XG5cbiAgICBpZiAoIXNjcm9sbFRvcCkge1xuICAgICAgbGV0IHNjcm9sbEhlaWdodCwgaGVpZ2h0O1xuICAgICAgZG8ge1xuICAgICAgICBzY3JvbGxIZWlnaHQgPSB0aGlzLl90ZXh0YXJlYS5zY3JvbGxIZWlnaHQ7XG4gICAgICAgIGhlaWdodCA9IHRoaXMuX3RleHRhcmVhLm9mZnNldEhlaWdodDtcbiAgICAgICAgdGhpcy5fdGV4dGFyZWEuc3R5bGUuaGVpZ2h0ID0gYCR7aGVpZ2h0IC0gNX1weGA7XG4gICAgICB9XG4gICAgICB3aGlsZSAoc2Nyb2xsSGVpZ2h0ICYmIChzY3JvbGxIZWlnaHQgIT0gdGhpcy5fdGV4dGFyZWEuc2Nyb2xsSGVpZ2h0KSk7XG4gICAgfVxuXG4gICAgbGV0IHNjcm9sbEhlaWdodCA9IHRoaXMuX3RleHRhcmVhLnNjcm9sbEhlaWdodDtcbiAgICB0aGlzLl90ZXh0YXJlYS5zdHlsZS5oZWlnaHQgPSBgJHtzY3JvbGxIZWlnaHQgKyAyMH1weGA7XG4gIH1cblxuICAvKipcbiAgICogSGFuZGxlcyB0aGUgbW92ZSBrbm9iIGRyYWdnaW5nXG4gICAqIEBwcml2YXRlXG4gICAqL1xuICBfaGFuZGxlTW92ZUtub2IgKCkge1xuICAgIHRoaXMuX21vdmVLbm9iLmFkZEV2ZW50TGlzdGVuZXIoXCJtb3VzZWRvd25cIiwgdGhpcy5fb25Nb3ZlS25vYkRvd24pO1xuICAgIHRoaXMuX21vdmVLbm9iLmFkZEV2ZW50TGlzdGVuZXIoXCJ0b3VjaHN0YXJ0XCIsIHRoaXMuX29uTW92ZUtub2JEb3duKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBHZXRzIGNhbGxlZCB3aGVuIHRoZSB1c2VyIGNsaWNrcyB0aGUgbW92ZSBrbm9iXG4gICAqIEBwcml2YXRlXG4gICAqL1xuICBfb25Nb3ZlS25vYkRvd24gKGUpIHtcbiAgICBlLnByZXZlbnREZWZhdWx0KCk7XG5cbiAgICB0aGlzLl9pbml0aWFsTW91c2VQb3NpdGlvbiA9IFV0aWxzLmdldEV2ZW50UG9zaXRpb24oZSk7XG4gICAgdGhpcy5faW5pdGlhbFBvc2l0aW9uID0gdGhpcy5fc2V0dGluZ3MucG9zaXRpb24uY2xvbmUoKTtcblxuICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJtb3VzZW1vdmVcIiwgdGhpcy5fb25Nb3ZlS25vYkRyYWcpO1xuICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJ0b3VjaG1vdmVcIiwgdGhpcy5fb25Nb3ZlS25vYkRyYWcpO1xuXG4gICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcIm1vdXNldXBcIiwgdGhpcy5fb25Nb3ZlS25vYlVwKTtcbiAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKFwidG9jaGVuZFwiLCB0aGlzLl9vbk1vdmVLbm9iVXApO1xuICB9XG5cbiAgLyoqXG4gICAqIEdldHMgY2FsbGVkIHdoZW4gdGhlIHVzZXIgZHJhZ3MgdGhlIG1vdmUga25vYlxuICAgKiBAcHJpdmF0ZVxuICAgKi9cbiAgX29uTW92ZUtub2JEcmFnIChlKSB7XG4gICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuXG4gICAgbGV0IGNhbnZhc1NpemUgPSB0aGlzLl91aS5jYW52YXMuc2l6ZTtcblxuICAgIGxldCBtb3VzZVBvc2l0aW9uID0gVXRpbHMuZ2V0RXZlbnRQb3NpdGlvbihlKTtcbiAgICBsZXQgZGlmZiA9IG1vdXNlUG9zaXRpb24uY2xvbmUoKVxuICAgICAgLnN1YnRyYWN0KHRoaXMuX2luaXRpYWxNb3VzZVBvc2l0aW9uKTtcblxuICAgIGxldCBtaW5Qb3NpdGlvbiA9IG5ldyBWZWN0b3IyKDAsIDApO1xuICAgIGxldCBjb250YWluZXJTaXplID0gbmV3IFZlY3RvcjIoXG4gICAgICB0aGlzLl9jb250YWluZXIub2Zmc2V0V2lkdGgsXG4gICAgICB0aGlzLl9jb250YWluZXIub2Zmc2V0SGVpZ2h0XG4gICAgKTtcbiAgICBsZXQgbWF4UG9zaXRpb24gPSBjYW52YXNTaXplLmNsb25lKCkuc3VidHJhY3QoY29udGFpbmVyU2l6ZSk7XG4gICAgbGV0IHBvc2l0aW9uID0gdGhpcy5faW5pdGlhbFBvc2l0aW9uLmNsb25lKClcbiAgICAgIC5hZGQoZGlmZilcbiAgICAgIC5jbGFtcChtaW5Qb3NpdGlvbiwgbWF4UG9zaXRpb24pO1xuXG4gICAgdGhpcy5fc2V0dGluZ3MucG9zaXRpb24gPSBwb3NpdGlvbjtcblxuICAgIHRoaXMuX2NvbnRhaW5lci5zdHlsZS5sZWZ0ID0gYCR7cG9zaXRpb24ueH1weGA7XG4gICAgdGhpcy5fY29udGFpbmVyLnN0eWxlLnRvcCA9IGAke3Bvc2l0aW9uLnl9cHhgO1xuICB9XG5cbiAgLyoqXG4gICAqIEdldHMgY2FsbGVkIHdoZW4gdGhlIHVzZXIgcmVsZWFzZXMgdGhlIG1vdmUga25vYlxuICAgKiBAcHJpdmF0ZVxuICAgKi9cbiAgX29uTW92ZUtub2JVcCAoKSB7XG4gICAgZG9jdW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcihcIm1vdXNlbW92ZVwiLCB0aGlzLl9vbk1vdmVLbm9iRHJhZyk7XG4gICAgZG9jdW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcihcInRvdWNobW92ZVwiLCB0aGlzLl9vbk1vdmVLbm9iRHJhZyk7XG5cbiAgICBkb2N1bWVudC5yZW1vdmVFdmVudExpc3RlbmVyKFwibW91c2V1cFwiLCB0aGlzLl9vbk1vdmVLbm9iVXApO1xuICAgIGRvY3VtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJ0b3VjaGVuZFwiLCB0aGlzLl9vbk1vdmVLbm9iVXApO1xuICB9XG5cbiAgLyoqXG4gICAqIEhhbmRsZXMgdGhlIHJlc2l6ZSBrbm9iIGRyYWdnaW5nXG4gICAqIEBwcml2YXRlXG4gICAqL1xuICBfaGFuZGxlUmVzaXplS25vYiAoKSB7XG4gICAgdGhpcy5fcmVzaXplS25vYi5hZGRFdmVudExpc3RlbmVyKFwibW91c2Vkb3duXCIsIHRoaXMuX29uUmVzaXplS25vYkRvd24pO1xuICAgIHRoaXMuX3Jlc2l6ZUtub2IuYWRkRXZlbnRMaXN0ZW5lcihcInRvdWNoc3RhcnRcIiwgdGhpcy5fb25SZXNpemVLbm9iRG93bik7XG4gIH1cblxuICAvKipcbiAgICogR2V0cyBjYWxsZWQgd2hlbiB0aGUgdXNlciBjbGlja3MgdGhlIHJlc2l6ZSBrbm9iXG4gICAqIEBwYXJhbSB7RXZlbnR9IGVcbiAgICogQHByaXZhdGVcbiAgICovXG4gIF9vblJlc2l6ZUtub2JEb3duIChlKSB7XG4gICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuXG4gICAgdGhpcy5faW5pdGlhbE1vdXNlUG9zaXRpb24gPSBVdGlscy5nZXRFdmVudFBvc2l0aW9uKGUpO1xuICAgIHRoaXMuX2luaXRpYWxNYXhXaWR0aCA9IHRoaXMuX3NldHRpbmdzLm1heFdpZHRoO1xuXG4gICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcIm1vdXNlbW92ZVwiLCB0aGlzLl9vblJlc2l6ZUtub2JEcmFnKTtcbiAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKFwidG91Y2htb3ZlXCIsIHRoaXMuX29uUmVzaXplS25vYkRyYWcpO1xuXG4gICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcIm1vdXNldXBcIiwgdGhpcy5fb25SZXNpemVLbm9iVXApO1xuICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJ0b3VjaGVuZFwiLCB0aGlzLl9vblJlc2l6ZUtub2JVcCk7XG4gIH1cblxuICAvKipcbiAgICogR2V0cyBjYWxsZWQgd2hlbiB0aGUgdXNlciBkcmFncyB0aGUgcmVzaXplIGtub2JcbiAgICogQHBhcmFtIHtFdmVudH0gZVxuICAgKiBAcHJpdmF0ZVxuICAgKi9cbiAgX29uUmVzaXplS25vYkRyYWcgKGUpIHtcbiAgICBlLnByZXZlbnREZWZhdWx0KCk7XG5cbiAgICBsZXQgY2FudmFzU2l6ZSA9IHRoaXMuX3VpLmNhbnZhcy5zaXplO1xuICAgIGxldCBtb3VzZVBvc2l0aW9uID0gVXRpbHMuZ2V0RXZlbnRQb3NpdGlvbihlKTtcbiAgICBsZXQgZGlmZiA9IG1vdXNlUG9zaXRpb24uc3VidHJhY3QodGhpcy5faW5pdGlhbE1vdXNlUG9zaXRpb24pO1xuXG4gICAgbGV0IHBvc2l0aW9uID0gdGhpcy5fc2V0dGluZ3MucG9zaXRpb24uY2xvbmUoKTtcbiAgICBsZXQgbWF4V2lkdGhBbGxvd2VkID0gY2FudmFzU2l6ZS54IC0gcG9zaXRpb24ueDtcblxuICAgIGxldCBtYXhXaWR0aCA9IHRoaXMuX2luaXRpYWxNYXhXaWR0aCArIGRpZmYueDtcbiAgICBtYXhXaWR0aCA9IE1hdGgubWF4KDEwMCwgTWF0aC5taW4obWF4V2lkdGhBbGxvd2VkLCBtYXhXaWR0aCkpO1xuICAgIHRoaXMuX3NldHRpbmdzLm1heFdpZHRoID0gbWF4V2lkdGg7XG4gICAgdGhpcy5fdGV4dGFyZWEuc3R5bGUud2lkdGggPSBgJHttYXhXaWR0aH1weGA7XG5cbiAgICB0aGlzLl9yZXNpemVUZXh0YXJlYSgpO1xuICB9XG5cbiAgLyoqXG4gICAqIEdldHMgY2FsbGVkIHdoZW4gdGhlIHVzZXIgcmVsZWFzZXMgdGhlIHJlc2l6ZSBrbm9iXG4gICAqIEBwYXJhbSB7RXZlbnR9IGVcbiAgICogQHByaXZhdGVcbiAgICovXG4gIF9vblJlc2l6ZUtub2JVcCAoZSkge1xuICAgIGRvY3VtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJtb3VzZW1vdmVcIiwgdGhpcy5fb25SZXNpemVLbm9iRHJhZyk7XG4gICAgZG9jdW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcihcInRvdWNobW92ZVwiLCB0aGlzLl9vblJlc2l6ZUtub2JEcmFnKTtcblxuICAgIGRvY3VtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJtb3VzZXVwXCIsIHRoaXMuX29uUmVzaXplS25vYlVwKTtcbiAgICBkb2N1bWVudC5yZW1vdmVFdmVudExpc3RlbmVyKFwidG91Y2hlbmRcIiwgdGhpcy5fb25SZXNpemVLbm9iVXApO1xuICB9XG5cbiAgLyoqXG4gICAqIEdldHMgY2FsbGVkIHdoZW4gdGhlIHVzZXIgc2VsZWN0cyBhbm90aGVyIGNvbG9yIHVzaW5nXG4gICAqIHRoZSBjb2xvciBwaWNrZXIuXG4gICAqIEBwYXJhbSB7Q29sb3J9IHZhbHVlXG4gICAqIEBwcml2YXRlXG4gICAqL1xuICBfb25Gb3JlZ3JvdW5kQ29sb3JVcGRhdGUgKHZhbHVlKSB7XG4gICAgdGhpcy5fc2V0dGluZ3MuY29sb3IgPSB2YWx1ZTtcbiAgICB0aGlzLl9hcHBseVNldHRpbmdzKCk7XG4gIH1cblxuICAvKipcbiAgICogR2V0cyBjYWxsZWQgd2hlbiB0aGUgdXNlciBzZWxlY3RzIGFub3RoZXIgY29sb3IgdXNpbmdcbiAgICogdGhlIGNvbG9yIHBpY2tlci5cbiAgICogQHBhcmFtIHtDb2xvcn0gdmFsdWVcbiAgICogQHByaXZhdGVcbiAgICovXG4gIF9vbkJhY2tncm91bmRDb2xvclVwZGF0ZSAodmFsdWUpIHtcbiAgICB0aGlzLl9zZXR0aW5ncy5iYWNrZ3JvdW5kQ29sb3IgPSB2YWx1ZTtcbiAgICB0aGlzLl9hcHBseVNldHRpbmdzKCk7XG4gIH1cblxuICAvKipcbiAgICogU3R5bGVzIHRoZSB0ZXh0YXJlYSB0byByZXByZXNlbnQgdGhlIGN1cnJlbnQgc2V0dGluZ3NcbiAgICogQHByaXZhdGVcbiAgICovXG4gIF9hcHBseVNldHRpbmdzICgpIHtcbiAgICBsZXQgdGV4dGFyZWEgPSB0aGlzLl90ZXh0YXJlYTtcbiAgICBsZXQgc2V0dGluZ3MgPSB0aGlzLl9zZXR0aW5ncztcblxuICAgIGxldCBjYW52YXNTaXplID0gdGhpcy5fdWkuY2FudmFzLnNpemU7XG4gICAgbGV0IGFjdHVhbEZvbnRTaXplID0gc2V0dGluZ3MuZm9udFNpemUgKiBjYW52YXNTaXplLnk7XG5cbiAgICB0aGlzLl9jb250YWluZXIuc3R5bGUubGVmdCA9IGAke3NldHRpbmdzLnBvc2l0aW9uLnh9cHhgO1xuICAgIHRoaXMuX2NvbnRhaW5lci5zdHlsZS50b3AgPSBgJHtzZXR0aW5ncy5wb3NpdGlvbi55fXB4YDtcblxuICAgIHRleHRhcmVhLnZhbHVlID0gc2V0dGluZ3MudGV4dDtcbiAgICB0ZXh0YXJlYS5zdHlsZS5mb250RmFtaWx5ID0gc2V0dGluZ3MuZm9udEZhbWlseTtcbiAgICB0ZXh0YXJlYS5zdHlsZS5mb250U2l6ZSA9IGAke2FjdHVhbEZvbnRTaXplfXB4YDtcbiAgICB0ZXh0YXJlYS5zdHlsZS5mb250V2VpZ2h0ID0gc2V0dGluZ3MuZm9udFdlaWdodDtcbiAgICB0ZXh0YXJlYS5zdHlsZS5saW5lSGVpZ2h0ID0gc2V0dGluZ3MubGluZUhlaWdodDtcbiAgICB0ZXh0YXJlYS5zdHlsZS5jb2xvciA9IHNldHRpbmdzLmNvbG9yLnRvUkdCQSgpO1xuICAgIHRleHRhcmVhLnN0eWxlLmJhY2tncm91bmRDb2xvciA9IHNldHRpbmdzLmJhY2tncm91bmRDb2xvci50b1JHQkEoKTtcbiAgICB0ZXh0YXJlYS5zdHlsZS53aWR0aCA9IGAke3NldHRpbmdzLm1heFdpZHRofXB4YDtcbiAgfVxuXG4gIC8qKlxuICAgKiBHZXRzIGNhbGxlZCB3aGVuIHRoZSB1c2VyIGNsaWNrZWQgYSBsaXN0IGl0ZW1cbiAgICogQHByaXZhdGVcbiAgICovXG4gIF9vbkxpc3RJdGVtQ2xpY2sgKGl0ZW0pIHtcbiAgICB0aGlzLl9kZWFjdGl2YXRlQWxsSXRlbXMoKTtcblxuICAgIGxldCB7IG5hbWUsIHdlaWdodCB9ID0gaXRlbS5kYXRhc2V0O1xuICAgIHRoaXMuX3NldHRpbmdzLmZvbnRGYW1pbHkgPSBuYW1lO1xuICAgIHRoaXMuX3NldHRpbmdzLmZvbnRXZWlnaHQgPSB3ZWlnaHQ7XG5cbiAgICB0aGlzLl9hcHBseVNldHRpbmdzKCk7XG5cbiAgICBpdGVtLmNsYXNzTGlzdC5hZGQoXCJpbWdseWtpdC1jb250cm9scy1pdGVtLWFjdGl2ZVwiKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBEZWFjdGl2YXRlcyBhbGwgbGlzdCBpdGVtc1xuICAgKiBAcHJpdmF0ZVxuICAgKi9cbiAgX2RlYWN0aXZhdGVBbGxJdGVtcyAoKSB7XG4gICAgZm9yIChsZXQgbGlzdEl0ZW0gb2YgdGhpcy5fbGlzdEl0ZW1zKSB7XG4gICAgICBsaXN0SXRlbS5jbGFzc0xpc3QucmVtb3ZlKFwiaW1nbHlraXQtY29udHJvbHMtaXRlbS1hY3RpdmVcIik7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIEFkZHMgdGhlIGRlZmF1bHQgZm9udHNcbiAgICogQHByaXZhdGVcbiAgICovXG4gIF9hZGRGb250cyAoKSB7XG4gICAgdGhpcy5hZGRGb250KFwiSGVsdmV0aWNhXCIsIFwibm9ybWFsXCIpO1xuICAgIHRoaXMuYWRkRm9udChcIkx1Y2lkYSBHcmFuZGVcIiwgXCJub3JtYWxcIik7XG4gICAgdGhpcy5hZGRGb250KFwiVGltZXMgTmV3IFJvbWFuXCIsIFwibm9ybWFsXCIpO1xuICB9XG5cbiAgLyoqXG4gICAqIEFkZHMgYSBmb250IHdpdGggdGhlIGdpdmVuIG5hbWUgYW5kIHdlaWdodFxuICAgKiBAcGFyYW0ge1N0cmluZ30gbmFtZVxuICAgKiBAcGFyYW0ge1N0cmluZ30gd2VpZ2h0XG4gICAqL1xuICBhZGRGb250IChuYW1lLCB3ZWlnaHQpIHtcbiAgICB0aGlzLl9mb250cy5wdXNoKHsgbmFtZSwgd2VpZ2h0IH0pO1xuICB9XG5cbiAgLyoqXG4gICAqIEdldHMgY2FsbGVkIHdoZW4gdGhlIGRvbmUgYnV0dG9uIGhhcyBiZWVuIGNsaWNrZWRcbiAgICogQG92ZXJyaWRlXG4gICAqL1xuICBfb25Eb25lICgpIHtcbiAgICBsZXQgY2FudmFzU2l6ZSA9IHRoaXMuX3VpLmNhbnZhcy5zaXplO1xuICAgIGxldCBwYWRkaW5nID0gbmV3IFZlY3RvcjIoMiwgMik7XG4gICAgbGV0IHBvc2l0aW9uID0gdGhpcy5fc2V0dGluZ3MucG9zaXRpb24uY2xvbmUoKVxuICAgICAgLmFkZChwYWRkaW5nKVxuICAgICAgLmRpdmlkZShjYW52YXNTaXplKTtcblxuICAgIHRoaXMuX3VpLmNhbnZhcy5zZXRab29tTGV2ZWwodGhpcy5faW5pdGlhbFpvb21MZXZlbCwgZmFsc2UpO1xuXG4gICAgdGhpcy5fb3BlcmF0aW9uLnNldCh7XG4gICAgICBmb250U2l6ZTogdGhpcy5fc2V0dGluZ3MuZm9udFNpemUsXG4gICAgICBmb250RmFtaWx5OiB0aGlzLl9zZXR0aW5ncy5mb250RmFtaWx5LFxuICAgICAgZm9udFdlaWdodDogdGhpcy5fc2V0dGluZ3MuZm9udFdlaWdodCxcbiAgICAgIGNvbG9yOiB0aGlzLl9zZXR0aW5ncy5jb2xvcixcbiAgICAgIGJhY2tncm91bmRDb2xvcjogdGhpcy5fc2V0dGluZ3MuYmFja2dyb3VuZENvbG9yLFxuICAgICAgcG9zaXRpb246IHBvc2l0aW9uLFxuICAgICAgdGV4dDogdGhpcy5fc2V0dGluZ3MudGV4dCxcbiAgICAgIG1heFdpZHRoOiB0aGlzLl9zZXR0aW5ncy5tYXhXaWR0aCAvIGNhbnZhc1NpemUueFxuICAgIH0pO1xuICAgIHRoaXMuX3VpLmNhbnZhcy5yZW5kZXIoKTtcblxuICAgIHRoaXMuX3VpLmFkZEhpc3RvcnkodGhpcywge1xuICAgICAgZm9udEZhbWlseTogdGhpcy5faW5pdGlhbFNldHRpbmdzLmZvbnRGYW1pbHksXG4gICAgICBmb250V2VpZ2h0OiB0aGlzLl9pbml0aWFsU2V0dGluZ3MuZm9udFdlaWdodCxcbiAgICAgIGNvbG9yOiB0aGlzLl9pbml0aWFsU2V0dGluZ3MuY29sb3IuY2xvbmUoKSxcbiAgICAgIGJhY2tncm91bmRDb2xvcjogdGhpcy5faW5pdGlhbFNldHRpbmdzLmJhY2tncm91bmRDb2xvci5jbG9uZSgpLFxuICAgICAgcG9zaXRpb246IHRoaXMuX2luaXRpYWxTZXR0aW5ncy5wb3NpdGlvbi5jbG9uZSgpLFxuICAgICAgdGV4dDogdGhpcy5faW5pdGlhbFNldHRpbmdzLnRleHQsXG4gICAgICBtYXhXaWR0aDogdGhpcy5faW5pdGlhbFNldHRpbmdzLm1heFdpZHRoXG4gICAgfSwgdGhpcy5faW5pdGlhbElkZW50aXR5KTtcbiAgfVxuXG4gIC8qKlxuICAgKiBHZXRzIGNhbGxlZCB3aGVuIHRoZSBiYWNrIGJ1dHRvbiBoYXMgYmVlbiBjbGlja2VkXG4gICAqIEBvdmVycmlkZVxuICAgKi9cbiAgX29uQmFjayAoKSB7XG4gICAgaWYgKCF0aGlzLl9pbml0aWFsSWRlbnRpdHkpIHtcbiAgICAgIHRoaXMuX29wZXJhdGlvbi5zZXQodGhpcy5faW5pdGlhbFNldHRpbmdzKTtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5fb3BlcmF0aW9uLmlzSWRlbnRpdHkgPSB0aGlzLl9pbml0aWFsSWRlbnRpdHk7XG4gICAgICB0aGlzLl91aS5jYW52YXMucmVuZGVyKCk7XG4gICAgfVxuXG4gICAgdGhpcy5fdWkuY2FudmFzLnNldFpvb21MZXZlbCh0aGlzLl9pbml0aWFsWm9vbUxldmVsLCBmYWxzZSk7XG4gIH1cblxuICAvKipcbiAgICogVGhlIGRhdGEgdGhhdCBpcyBhdmFpbGFibGUgdG8gdGhlIHRlbXBsYXRlXG4gICAqIEB0eXBlIHtPYmplY3R9XG4gICAqIEBvdmVycmlkZVxuICAgKi9cbiAgZ2V0IGNvbnRleHQgKCkge1xuICAgIGxldCBjb250ZXh0ID0gc3VwZXIuY29udGV4dDtcbiAgICBjb250ZXh0LmZvbnRzID0gdGhpcy5fZm9udHM7XG4gICAgcmV0dXJuIGNvbnRleHQ7XG4gIH1cbn1cblxuZXhwb3J0IGRlZmF1bHQgVGV4dENvbnRyb2w7XG4iLCJcInVzZSBzdHJpY3RcIjtcbi8qIVxuICogQ29weXJpZ2h0IChjKSAyMDEzLTIwMTUgOWVsZW1lbnRzIEdtYkhcbiAqXG4gKiBSZWxlYXNlZCB1bmRlciBBdHRyaWJ1dGlvbi1Ob25Db21tZXJjaWFsIDMuMCBVbnBvcnRlZFxuICogaHR0cDovL2NyZWF0aXZlY29tbW9ucy5vcmcvbGljZW5zZXMvYnktbmMvMy4wL1xuICpcbiAqIEZvciBjb21tZXJjaWFsIHVzZSwgcGxlYXNlIGNvbnRhY3QgdXMgYXQgY29udGFjdEA5ZWxlbWVudHMuY29tXG4gKi9cblxuaW1wb3J0IENvbnRyb2wgZnJvbSBcIi4vY29udHJvbFwiO1xuaW1wb3J0IFZlY3RvcjIgZnJvbSBcIi4uLy4uLy4uL2xpYi9tYXRoL3ZlY3RvcjJcIjtcbmltcG9ydCBVdGlscyBmcm9tIFwiLi4vLi4vLi4vbGliL3V0aWxzXCI7XG5pbXBvcnQgU2ltcGxlU2xpZGVyIGZyb20gXCIuLi9saWIvc2ltcGxlLXNsaWRlclwiO1xuaW1wb3J0IFN5bWJvbCBmcm9tIFwiZXM2LXN5bWJvbFwiO1xubGV0IGZzID0gcmVxdWlyZShcImZzXCIpO1xuXG5jbGFzcyBUaWx0U2hpZnRDb250cm9scyBleHRlbmRzIENvbnRyb2wge1xuICAvKipcbiAgICogQSB1bmlxdWUgc3RyaW5nIHRoYXQgaWRlbnRpZmllcyB0aGlzIGNvbnRyb2wuXG4gICAqIEB0eXBlIHtTdHJpbmd9XG4gICAqL1xuICBnZXQgaWRlbnRpZmllciAoKSB7XG4gICAgcmV0dXJuIFwidGlsdC1zaGlmdFwiO1xuICB9XG5cbiAgLyoqXG4gICAqIEVudHJ5IHBvaW50IGZvciB0aGlzIGNvbnRyb2xcbiAgICovXG4gIGluaXQgKCkge1xuICAgIHRoaXMuX29wZXJhdGlvbiA9IHRoaXMuX3VpLm9wZXJhdGlvbnNbXCJ0aWx0LXNoaWZ0XCJdO1xuXG4gICAgbGV0IGNvbnRyb2xzVGVtcGxhdGUgPSBmcy5yZWFkRmlsZVN5bmMoX19kaXJuYW1lICsgXCIvLi4vLi4vLi4vdGVtcGxhdGVzL25pZ2h0L29wZXJhdGlvbnMvdGlsdC1zaGlmdF9jb250cm9scy5qc3RcIiwgXCJ1dGYtOFwiKTtcbiAgICB0aGlzLl9jb250cm9sc1RlbXBsYXRlID0gY29udHJvbHNUZW1wbGF0ZTtcblxuICAgIGxldCBjYW52YXNDb250cm9sc1RlbXBsYXRlID0gZnMucmVhZEZpbGVTeW5jKF9fZGlybmFtZSArIFwiLy4uLy4uLy4uL3RlbXBsYXRlcy9uaWdodC9vcGVyYXRpb25zL3RpbHQtc2hpZnRfY2FudmFzLmpzdFwiLCBcInV0Zi04XCIpO1xuICAgIHRoaXMuX2NhbnZhc0NvbnRyb2xzVGVtcGxhdGUgPSBjYW52YXNDb250cm9sc1RlbXBsYXRlO1xuXG4gICAgdGhpcy5fcGFydGlhbFRlbXBsYXRlcy5wdXNoKFNpbXBsZVNsaWRlci50ZW1wbGF0ZSk7XG4gICAgdGhpcy5fY3VycmVudEtub2IgPSBudWxsO1xuICB9XG5cbiAgLyoqXG4gICAqIEdldHMgY2FsbGVkIHdoZW4gdGhpcyBjb250cm9sIGlzIGFjdGl2YXRlZFxuICAgKiBAb3ZlcnJpZGVcbiAgICovXG4gIF9vbkVudGVyICgpIHtcbiAgICBzdXBlci5fb25FbnRlcigpO1xuXG4gICAgLy8gUmVtZW1iZXIgaW5pdGlhbCBpZGVudGl0eSBzdGF0ZVxuICAgIHRoaXMuX2luaXRpYWxJZGVudGl0eSA9IHRoaXMuX29wZXJhdGlvbi5pc0lkZW50aXR5O1xuICAgIHRoaXMuX2luaXRpYWxTZXR0aW5ncyA9IHtcbiAgICAgIHN0YXJ0OiB0aGlzLl9vcGVyYXRpb24uZ2V0U3RhcnQoKS5jbG9uZSgpLFxuICAgICAgZW5kOiB0aGlzLl9vcGVyYXRpb24uZ2V0RW5kKCkuY2xvbmUoKSxcbiAgICAgIGdyYWRpZW50UmFkaXVzOiB0aGlzLl9vcGVyYXRpb24uZ2V0R3JhZGllbnRSYWRpdXMoKSxcbiAgICAgIGJsdXJSYWRpdXM6IHRoaXMuX29wZXJhdGlvbi5nZXRCbHVyUmFkaXVzKClcbiAgICB9O1xuXG4gICAgdGhpcy5fb3BlcmF0aW9uLmlzSWRlbnRpdHkgPSBmYWxzZTtcblxuICAgIC8vIE1vdXNlIGV2ZW50IGNhbGxiYWNrcyBib3VuZCB0byB0aGUgY2xhc3MgY29udGV4dFxuICAgIHRoaXMuX29uS25vYkRvd24gPSB0aGlzLl9vbktub2JEb3duLmJpbmQodGhpcyk7XG4gICAgdGhpcy5fb25Lbm9iRHJhZyA9IHRoaXMuX29uS25vYkRyYWcuYmluZCh0aGlzKTtcbiAgICB0aGlzLl9vbktub2JVcCA9IHRoaXMuX29uS25vYlVwLmJpbmQodGhpcyk7XG5cbiAgICBsZXQgc2VsZWN0b3IgPSBcIi5pbWdseWtpdC1jYW52YXMtdGlsdC1zaGlmdC1kb3RcIjtcbiAgICB0aGlzLl9zdGFydEtub2IgPSB0aGlzLl9jYW52YXNDb250cm9scy5xdWVyeVNlbGVjdG9yKGAke3NlbGVjdG9yfVtkYXRhLW9wdGlvbj1cInN0YXJ0XCJdYCk7XG4gICAgdGhpcy5fZW5kS25vYiA9IHRoaXMuX2NhbnZhc0NvbnRyb2xzLnF1ZXJ5U2VsZWN0b3IoYCR7c2VsZWN0b3J9W2RhdGEtb3B0aW9uPVwiZW5kXCJdYCk7XG4gICAgdGhpcy5fa25vYnMgPSBbdGhpcy5fc3RhcnRLbm9iLCB0aGlzLl9lbmRLbm9iXTtcblxuICAgIHRoaXMuX2hhbmRsZUtub2JzKCk7XG4gICAgdGhpcy5faW5pdFNsaWRlcnMoKTtcblxuICAgIHRoaXMuX3VpLmNhbnZhcy5yZW5kZXIoKS50aGVuKCgpID0+IHtcbiAgICAgIHRoaXMuX3VwZGF0ZURPTSgpO1xuICAgIH0pO1xuICB9XG5cbiAgLyoqXG4gICAqIEluaXRpYWxpemVzIHRoZSBzbGlkZXIgY29udHJvbHNcbiAgICogQHByaXZhdGVcbiAgICovXG4gIF9pbml0U2xpZGVycyAoKSB7XG4gICAgbGV0IGNhbnZhc1NpemUgPSB0aGlzLl91aS5jYW52YXMuc2l6ZTtcblxuICAgIGxldCBibHVyUmFkaXVzU2xpZGVyID0gdGhpcy5fY29udHJvbHMucXVlcnlTZWxlY3RvcihcIiNpbWdseWtpdC1ibHVyLXJhZGl1cy1zbGlkZXJcIik7XG4gICAgdGhpcy5fYmx1clJhZGl1c1NsaWRlciA9IG5ldyBTaW1wbGVTbGlkZXIoYmx1clJhZGl1c1NsaWRlciwge1xuICAgICAgbWluVmFsdWU6IDAsXG4gICAgICBtYXhWYWx1ZTogNDBcbiAgICB9KTtcbiAgICB0aGlzLl9ibHVyUmFkaXVzU2xpZGVyLm9uKFwidXBkYXRlXCIsIHRoaXMuX29uQmx1clJhZGl1c1VwZGF0ZS5iaW5kKHRoaXMpKTtcbiAgICB0aGlzLl9ibHVyUmFkaXVzU2xpZGVyLnNldFZhbHVlKHRoaXMuX2luaXRpYWxTZXR0aW5ncy5ibHVyUmFkaXVzKTtcblxuICAgIGxldCBncmFkaWVudFJhZGl1c1NsaWRlciA9IHRoaXMuX2NvbnRyb2xzLnF1ZXJ5U2VsZWN0b3IoXCIjaW1nbHlraXQtZ3JhZGllbnQtcmFkaXVzLXNsaWRlclwiKTtcbiAgICB0aGlzLl9ncmFkaWVudFJhZGl1c1NsaWRlciA9IG5ldyBTaW1wbGVTbGlkZXIoZ3JhZGllbnRSYWRpdXNTbGlkZXIsIHtcbiAgICAgIG1pblZhbHVlOiAxLFxuICAgICAgbWF4VmFsdWU6IE1hdGgubWF4KGNhbnZhc1NpemUueSwgY2FudmFzU2l6ZS54KVxuICAgIH0pO1xuICAgIHRoaXMuX2dyYWRpZW50UmFkaXVzU2xpZGVyLm9uKFwidXBkYXRlXCIsIHRoaXMuX29uR3JhZGllbnRSYWRpdXNVcGRhdGUuYmluZCh0aGlzKSk7XG4gICAgdGhpcy5fZ3JhZGllbnRSYWRpdXNTbGlkZXIuc2V0VmFsdWUodGhpcy5faW5pdGlhbFNldHRpbmdzLmdyYWRpZW50UmFkaXVzKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBHZXRzIGNhbGxlZCB3aGVuIHRoZSB2YWx1ZSBvZiB0aGUgYmx1ciByYWRpdXMgc2xpZGVyIGhhcyBiZWVuIHVwZGF0ZWRcbiAgICogQHBhcmFtIHtOdW1iZXJ9IHZhbHVlXG4gICAqIEBwcml2YXRlXG4gICAqL1xuICBfb25CbHVyUmFkaXVzVXBkYXRlICh2YWx1ZSkge1xuICAgIHRoaXMuX29wZXJhdGlvbi5zZXRCbHVyUmFkaXVzKHZhbHVlKTtcbiAgICB0aGlzLl91aS5jYW52YXMucmVuZGVyKCk7XG4gIH1cblxuICAvKipcbiAgICogR2V0cyBjYWxsZWQgd2hlbiB0aGUgdmFsdWUgb2YgdGhlIGdyYWRpZW50IHJhZGl1cyBzbGlkZXIgaGFzIGJlZW4gdXBkYXRlZFxuICAgKiBAcGFyYW0ge051bWJlcn0gdmFsdWVcbiAgICogQHByaXZhdGVcbiAgICovXG4gIF9vbkdyYWRpZW50UmFkaXVzVXBkYXRlICh2YWx1ZSkge1xuICAgIHRoaXMuX29wZXJhdGlvbi5zZXRHcmFkaWVudFJhZGl1cyh2YWx1ZSk7XG4gICAgdGhpcy5fdXBkYXRlRE9NKCk7XG4gICAgdGhpcy5fdWkuY2FudmFzLnJlbmRlcigpO1xuICB9XG5cbiAgLyoqXG4gICAqIEhhbmRsZXMgdGhlIGtub2IgZHJhZ2dpbmdcbiAgICogQHByaXZhdGVcbiAgICovXG4gIF9oYW5kbGVLbm9icyAoKSB7XG4gICAgZm9yIChsZXQga25vYiBvZiB0aGlzLl9rbm9icykge1xuICAgICAga25vYi5hZGRFdmVudExpc3RlbmVyKFwibW91c2Vkb3duXCIsIChlKSA9PiB7XG4gICAgICAgIHRoaXMuX29uS25vYkRvd24oa25vYiwgZSk7XG4gICAgICB9KTtcbiAgICAgIGtub2IuYWRkRXZlbnRMaXN0ZW5lcihcInRvdWNoc3RhcnRcIiwgKGUpID0+IHtcbiAgICAgICAgdGhpcy5fb25Lbm9iRG93bihrbm9iLCBlKTtcbiAgICAgIH0pO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBHZXRzIGNhbGxlZCB3aGVuIHRoZSB1c2VyIHN0YXJ0cyBkcmFnZ2luZyB0aGUga25vYlxuICAgKiBAcGFyYW0ge0RPTUVsZW1lbnR9IGtub2JcbiAgICogQHBhcmFtIHtFdmVudH0gZVxuICAgKiBAcHJpdmF0ZVxuICAgKi9cbiAgX29uS25vYkRvd24gKGtub2IsIGUpIHtcbiAgICBlLnByZXZlbnREZWZhdWx0KCk7XG5cbiAgICB0aGlzLl9jdXJyZW50S25vYiA9IGtub2I7XG4gICAgdGhpcy5faW5pdGlhbE1vdXNlUG9zaXRpb24gPSBVdGlscy5nZXRFdmVudFBvc2l0aW9uKGUpO1xuXG4gICAgbGV0IHsgb3B0aW9uIH0gPSBrbm9iLmRhdGFzZXQ7XG4gICAgbGV0IGNhcGl0YWxpemVkID0gb3B0aW9uLmNoYXJBdCgwKS50b1VwcGVyQ2FzZSgpICsgb3B0aW9uLnNsaWNlKDEpO1xuICAgIHRoaXMuX3ZhbHVlQmVmb3JlRHJhZyA9IHRoaXMuX29wZXJhdGlvbltgZ2V0JHtjYXBpdGFsaXplZH1gXSgpO1xuXG4gICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcIm1vdXNlbW92ZVwiLCB0aGlzLl9vbktub2JEcmFnKTtcbiAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKFwidG91Y2htb3ZlXCIsIHRoaXMuX29uS25vYkRyYWcpO1xuXG4gICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcIm1vdXNldXBcIiwgdGhpcy5fb25Lbm9iVXApO1xuICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJ0b3VjaGVuZFwiLCB0aGlzLl9vbktub2JVcCk7XG4gIH1cblxuICAvKipcbiAgICogR2V0cyBjYWxsZWQgd2hpbGUgdGhlIHVzZXIgc3RhcnRzIGRyYWdzIHRoZSBrbm9iXG4gICAqIEBwYXJhbSB7RXZlbnR9IGVcbiAgICogQHByaXZhdGVcbiAgICovXG4gIF9vbktub2JEcmFnIChlKSB7XG4gICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuXG4gICAgbGV0IGNhbnZhc1NpemUgPSB0aGlzLl91aS5jYW52YXMuc2l6ZTtcbiAgICBsZXQgbW91c2VQb3NpdGlvbiA9IFV0aWxzLmdldEV2ZW50UG9zaXRpb24oZSk7XG4gICAgbGV0IGRpZmYgPSBtb3VzZVBvc2l0aW9uLnN1YnRyYWN0KHRoaXMuX2luaXRpYWxNb3VzZVBvc2l0aW9uKTtcblxuICAgIGxldCB7IG9wdGlvbiB9ID0gdGhpcy5fY3VycmVudEtub2IuZGF0YXNldDtcblxuICAgIGxldCBjYXBpdGFsaXplZCA9IG9wdGlvbi5jaGFyQXQoMCkudG9VcHBlckNhc2UoKSArIG9wdGlvbi5zbGljZSgxKTtcblxuICAgIGxldCBuZXdQb3NpdGlvbiA9IHRoaXMuX3ZhbHVlQmVmb3JlRHJhZy5jbG9uZSgpXG4gICAgICAubXVsdGlwbHkoY2FudmFzU2l6ZSlcbiAgICAgIC5hZGQoZGlmZilcbiAgICAgIC5kaXZpZGUoY2FudmFzU2l6ZSk7XG4gICAgdGhpcy5fb3BlcmF0aW9uW2BzZXQke2NhcGl0YWxpemVkfWBdKG5ld1Bvc2l0aW9uKTtcbiAgICB0aGlzLl91cGRhdGVET00oKTtcbiAgICB0aGlzLl91aS5jYW52YXMucmVuZGVyKCk7XG4gIH1cblxuICAvKipcbiAgICogR2V0cyBjYWxsZWQgd2hlbiB0aGUgdXNlciBzdG9wcyBkcmFnZ2luZyB0aGUga25vYlxuICAgKiBAcGFyYW0ge0V2ZW50fSBlXG4gICAqIEBwcml2YXRlXG4gICAqL1xuICBfb25Lbm9iVXAgKGUpIHtcbiAgICBlLnByZXZlbnREZWZhdWx0KCk7XG5cbiAgICBkb2N1bWVudC5yZW1vdmVFdmVudExpc3RlbmVyKFwibW91c2Vtb3ZlXCIsIHRoaXMuX29uS25vYkRyYWcpO1xuICAgIGRvY3VtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJ0b3VjaG1vdmVcIiwgdGhpcy5fb25Lbm9iRHJhZyk7XG5cbiAgICBkb2N1bWVudC5yZW1vdmVFdmVudExpc3RlbmVyKFwibW91c2V1cFwiLCB0aGlzLl9vbktub2JVcCk7XG4gICAgZG9jdW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcihcInRvdWNoZW5kXCIsIHRoaXMuX29uS25vYlVwKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBVcGRhdGVzIHRoZSBrbm9iXG4gICAqIEBwcml2YXRlXG4gICAqL1xuICBfdXBkYXRlRE9NICgpIHtcbiAgICBsZXQgY2FudmFzU2l6ZSA9IHRoaXMuX3VpLmNhbnZhcy5zaXplO1xuICAgIGxldCBzdGFydCA9IHRoaXMuX29wZXJhdGlvbi5nZXRTdGFydCgpXG4gICAgICAuY2xvbmUoKVxuICAgICAgLm11bHRpcGx5KGNhbnZhc1NpemUpO1xuICAgIHN0YXJ0LmNsYW1wKG5ldyBWZWN0b3IyKDAsIDApLCBjYW52YXNTaXplKTtcblxuICAgIHRoaXMuX3N0YXJ0S25vYi5zdHlsZS5sZWZ0ID0gYCR7c3RhcnQueH1weGA7XG4gICAgdGhpcy5fc3RhcnRLbm9iLnN0eWxlLnRvcCA9IGAke3N0YXJ0Lnl9cHhgO1xuXG4gICAgbGV0IGVuZCA9IHRoaXMuX29wZXJhdGlvbi5nZXRFbmQoKVxuICAgICAgLmNsb25lKClcbiAgICAgIC5tdWx0aXBseShjYW52YXNTaXplKTtcbiAgICBlbmQuY2xhbXAobmV3IFZlY3RvcjIoMCwgMCksIGNhbnZhc1NpemUpO1xuXG4gICAgdGhpcy5fZW5kS25vYi5zdHlsZS5sZWZ0ID0gYCR7ZW5kLnh9cHhgO1xuICAgIHRoaXMuX2VuZEtub2Iuc3R5bGUudG9wID0gYCR7ZW5kLnl9cHhgO1xuICB9XG5cbiAgLyoqXG4gICAqIEdldHMgY2FsbGVkIHdoZW4gdGhlIGJhY2sgYnV0dG9uIGhhcyBiZWVuIGNsaWNrZWRcbiAgICogQG92ZXJyaWRlXG4gICAqL1xuICBfb25CYWNrICgpIHtcbiAgICBpZiAoIXRoaXMuX2luaXRpYWxJZGVudGl0eSkge1xuICAgICAgdGhpcy5fb3BlcmF0aW9uLnNldCh0aGlzLl9pbml0aWFsU2V0dGluZ3MpO1xuICAgICAgdGhpcy5fdWkuY2FudmFzLnJlbmRlcigpO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLl9vcGVyYXRpb24uaXNJZGVudGl0eSA9IHRoaXMuX2luaXRpYWxJZGVudGl0eTtcbiAgICAgIHRoaXMuX3VpLmNhbnZhcy5yZW5kZXIoKTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogR2V0cyBjYWxsZWQgd2hlbiB0aGUgZG9uZSBidXR0b24gaGFzIGJlZW4gY2xpY2tlZFxuICAgKiBAb3ZlcnJpZGVcbiAgICovXG4gIF9vbkRvbmUgKCkge1xuICAgIHRoaXMuX3VpLmFkZEhpc3RvcnkodGhpcy5fb3BlcmF0aW9uLCB7XG4gICAgICBzdGFydDogdGhpcy5faW5pdGlhbFNldHRpbmdzLnN0YXJ0LmNsb25lKCksXG4gICAgICBlbmQ6IHRoaXMuX2luaXRpYWxTZXR0aW5ncy5lbmQuY2xvbmUoKSxcbiAgICAgIGJsdXJSYWRpdXM6IHRoaXMuX2luaXRpYWxTZXR0aW5ncy5ibHVyUmFkaXVzLFxuICAgICAgZ3JhZGllbnRSYWRpdXM6IHRoaXMuX2luaXRpYWxTZXR0aW5ncy5ncmFkaWVudFJhZGl1c1xuICAgIH0sIHRoaXMuX2luaXRpYWxJZGVudGl0eSk7XG4gIH1cbn1cblxuZXhwb3J0IGRlZmF1bHQgVGlsdFNoaWZ0Q29udHJvbHM7XG4iLCJcInVzZSBzdHJpY3RcIjtcbi8qIVxuICogQ29weXJpZ2h0IChjKSAyMDEzLTIwMTUgOWVsZW1lbnRzIEdtYkhcbiAqXG4gKiBSZWxlYXNlZCB1bmRlciBBdHRyaWJ1dGlvbi1Ob25Db21tZXJjaWFsIDMuMCBVbnBvcnRlZFxuICogaHR0cDovL2NyZWF0aXZlY29tbW9ucy5vcmcvbGljZW5zZXMvYnktbmMvMy4wL1xuICpcbiAqIEZvciBjb21tZXJjaWFsIHVzZSwgcGxlYXNlIGNvbnRhY3QgdXMgYXQgY29udGFjdEA5ZWxlbWVudHMuY29tXG4gKi9cblxuaW1wb3J0IGJsdWViaXJkIGZyb20gXCJibHVlYmlyZFwiO1xuaW1wb3J0IFdlYkdMUmVuZGVyZXIgZnJvbSBcIi4uLy4uLy4uL3JlbmRlcmVycy93ZWJnbC1yZW5kZXJlclwiO1xuaW1wb3J0IENhbnZhc1JlbmRlcmVyIGZyb20gXCIuLi8uLi8uLi9yZW5kZXJlcnMvY2FudmFzLXJlbmRlcmVyXCI7XG5pbXBvcnQgVmVjdG9yMiBmcm9tIFwiLi4vLi4vLi4vbGliL21hdGgvdmVjdG9yMlwiO1xuaW1wb3J0IEV2ZW50RW1pdHRlciBmcm9tIFwiLi4vLi4vLi4vbGliL2V2ZW50LWVtaXR0ZXJcIjtcbmltcG9ydCBTeW1ib2wgZnJvbSBcImVzNi1zeW1ib2xcIjtcblxuY2xhc3MgQ2FudmFzIGV4dGVuZHMgRXZlbnRFbWl0dGVyIHtcbiAgY29uc3RydWN0b3IgKGtpdCwgdWksIG9wdGlvbnMpIHtcbiAgICBzdXBlcigpO1xuXG4gICAgdGhpcy5fa2l0ID0ga2l0O1xuICAgIHRoaXMuX3VpID0gdWk7XG4gICAgdGhpcy5fb3B0aW9ucyA9IG9wdGlvbnM7XG5cbiAgICBsZXQgeyBjb250YWluZXIgfSA9IHRoaXMuX3VpO1xuICAgIHRoaXMuX2NhbnZhc0NvbnRhaW5lciA9IGNvbnRhaW5lci5xdWVyeVNlbGVjdG9yKFwiLmltZ2x5a2l0LWNhbnZhcy1jb250YWluZXJcIik7XG4gICAgdGhpcy5fY2FudmFzSW5uZXJDb250YWluZXIgPSBjb250YWluZXIucXVlcnlTZWxlY3RvcihcIi5pbWdseWtpdC1jYW52YXMtaW5uZXItY29udGFpbmVyXCIpO1xuICAgIHRoaXMuX2NhbnZhcyA9IHRoaXMuX2NhbnZhc0NvbnRhaW5lci5xdWVyeVNlbGVjdG9yKFwiY2FudmFzXCIpO1xuICAgIHRoaXMuX2ltYWdlID0gdGhpcy5fb3B0aW9ucy5pbWFnZTtcbiAgICB0aGlzLl9yb3VuZFpvb21CeSA9IDAuMTtcbiAgICB0aGlzLl9pc0ZpcnN0UmVuZGVyID0gdHJ1ZTtcblxuICAgIC8vIE1vdXNlIGV2ZW50IGNhbGxiYWNrcyBib3VuZCB0byB0aGUgY2xhc3MgY29udGV4dFxuICAgIHRoaXMuX2RyYWdPbk1vdXNlZG93biA9IHRoaXMuX2RyYWdPbk1vdXNlZG93bi5iaW5kKHRoaXMpO1xuICAgIHRoaXMuX2RyYWdPbk1vdXNlbW92ZSA9IHRoaXMuX2RyYWdPbk1vdXNlbW92ZS5iaW5kKHRoaXMpO1xuICAgIHRoaXMuX2RyYWdPbk1vdXNldXAgPSB0aGlzLl9kcmFnT25Nb3VzZXVwLmJpbmQodGhpcyk7XG4gIH1cblxuICAvKipcbiAgICogSW5pdGlhbGl6ZXMgdGhlIHJlbmRlcmVyLCBzZXRzIHRoZSB6b29tIGxldmVsIGFuZCBpbml0aWFsbHlcbiAgICogcmVuZGVycyB0aGUgb3BlcmF0aW9ucyBzdGFja1xuICAgKi9cbiAgcnVuICgpIHtcbiAgICB0aGlzLl9pbml0UmVuZGVyZXIoKTtcblxuICAgIC8vIENhbGN1bGF0ZSB0aGUgaW5pdGlhbCB6b29tIGxldmVsXG4gICAgdGhpcy5fem9vbUxldmVsID0gdGhpcy5fZ2V0SW5pdGlhbFpvb21MZXZlbCgpO1xuICAgIHRoaXMuX2luaXRpYWxab29tTGV2ZWwgPSB0aGlzLl96b29tTGV2ZWw7XG4gICAgdGhpcy5faXNJbml0aWFsWm9vbSA9IHRydWU7XG4gICAgdGhpcy5fc2l6ZSA9IG51bGw7XG5cbiAgICB0aGlzLnJlbmRlcigpO1xuICAgIHRoaXMuX2NlbnRlckNhbnZhcygpO1xuICAgIHRoaXMuX2hhbmRsZURyYWcoKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBSZW5kZXJzIHRoZSBjdXJyZW50IG9wZXJhdGlvbnMgc3RhY2tcbiAgICovXG4gIHJlbmRlciAoKSB7XG4gICAgdGhpcy5faW5pdGlhbFpvb21MZXZlbCA9IHRoaXMuX2dldEluaXRpYWxab29tTGV2ZWwoKTtcblxuICAgIC8vIFJlc2V0IHRoZSB6b29tIGxldmVsIHRvIGluaXRpYWxcbiAgICAvLyBTb21lIG9wZXJhdGlvbnMgY2hhbmdlIHRoZSB0ZXh0dXJlIHJlc29sdXRpb24gKGUuZy4gcm90YXRpb24pXG4gICAgLy8gSWYgd2UncmUgb24gaW5pdGlhbCB6b29tIGxldmVsLCB3ZSBzdGlsbCB3YW50IHRvIG1ha2UgdGhlIGNhbnZhc1xuICAgIC8vIGZpdCBpbnRvIHRoZSBjb250YWluZXIuIEZpbmQgdGhlIG5ldyBpbml0aWFsIHpvb20gbGV2ZWwgYW5kIHNldCBpdC5cbiAgICBpZiAodGhpcy5faXNJbml0aWFsWm9vbSkge1xuICAgICAgdGhpcy5zZXRab29tTGV2ZWwodGhpcy5faW5pdGlhbFpvb21MZXZlbCwgZmFsc2UpO1xuICAgIH1cblxuICAgIC8vIENhbGN1bGF0ZSB0aGUgaW5pdGlhbCBzaXplXG4gICAgbGV0IGltYWdlU2l6ZSA9IG5ldyBWZWN0b3IyKHRoaXMuX2ltYWdlLndpZHRoLCB0aGlzLl9pbWFnZS5oZWlnaHQpO1xuICAgIGxldCBpbml0aWFsU2l6ZSA9IGltYWdlU2l6ZS5tdWx0aXBseSh0aGlzLl96b29tTGV2ZWwpO1xuICAgIHRoaXMuX3NldENhbnZhc1NpemUoaW5pdGlhbFNpemUpO1xuXG4gICAgLy8gUmVzZXQgZnJhbWVidWZmZXJzXG4gICAgdGhpcy5fcmVuZGVyZXIucmVzZXQoKTtcblxuICAgIC8vIE9uIGZpcnN0IHJlbmRlciwgZHJhdyB0aGUgaW1hZ2UgdG8gdGhlIGlucHV0IHRleHR1cmVcbiAgICBpZiAodGhpcy5faXNGaXJzdFJlbmRlciB8fCB0aGlzLl9yZW5kZXJlci5jb25zdHJ1Y3Rvci5pZGVudGlmaWVyID09PSBcImNhbnZhc1wiKSB7XG4gICAgICB0aGlzLl9yZW5kZXJlci5kcmF3SW1hZ2UodGhpcy5faW1hZ2UpO1xuICAgICAgdGhpcy5faXNGaXJzdFJlbmRlciA9IGZhbHNlO1xuICAgIH1cblxuICAgIC8vIFJ1biB0aGUgb3BlcmF0aW9ucyBzdGFja1xuICAgIGxldCBzdGFjayA9IHRoaXMuX2FjdHVhbFN0YWNrO1xuICAgIHRoaXMuX3VwZGF0ZVN0YWNrRGlydHlTdGF0ZXMoc3RhY2spO1xuXG4gICAgcmV0dXJuIGJsdWViaXJkXG4gICAgICAvLyBWYWxpZGF0ZSBhbGwgc2V0dGluZ3NcbiAgICAgIC5tYXAoc3RhY2ssIChvcGVyYXRpb24pID0+IHtcbiAgICAgICAgcmV0dXJuIG9wZXJhdGlvbi52YWxpZGF0ZVNldHRpbmdzKCk7XG4gICAgICB9KVxuICAgICAgLy8gUmVuZGVyIHRoZSBvcGVyYXRpb25zIHN0YWNrXG4gICAgICAudGhlbigoKSA9PiB7XG4gICAgICAgIHJldHVybiBibHVlYmlyZC5tYXAoc3RhY2ssIChvcGVyYXRpb24pID0+IHtcbiAgICAgICAgICByZXR1cm4gb3BlcmF0aW9uLnJlbmRlcih0aGlzLl9yZW5kZXJlcik7XG4gICAgICAgIH0sIHsgY29uY3VycmVuY3k6IDEgfSk7XG4gICAgICB9KVxuICAgICAgLy8gUmVuZGVyIHRoZSBmaW5hbCBpbWFnZVxuICAgICAgLnRoZW4oKCkgPT4ge1xuICAgICAgICByZXR1cm4gdGhpcy5fcmVuZGVyZXIucmVuZGVyRmluYWwoKTtcbiAgICAgIH0pXG4gICAgICAvLyBVcGRhdGUgdGhlIG1hcmdpbnMgYW5kIGJvdW5kYXJpZXNcbiAgICAgIC50aGVuKCgpID0+IHtcbiAgICAgICAgdGhpcy5fc3RvcmVDYW52YXNTaXplKCk7XG4gICAgICAgIHRoaXMuX3VwZGF0ZUNvbnRhaW5lclNpemUoKTtcbiAgICAgICAgdGhpcy5fdXBkYXRlQ2FudmFzTWFyZ2lucygpO1xuICAgICAgICB0aGlzLl9hcHBseUJvdW5kYXJpZXMoKTtcbiAgICAgIH0pO1xuICB9XG5cbiAgLyoqXG4gICAqIEluY3JlYXNlIHpvb20gbGV2ZWxcbiAgICovXG4gIHpvb21JbiAoKSB7XG4gICAgdGhpcy5faXNJbml0aWFsWm9vbSA9IGZhbHNlO1xuXG4gICAgbGV0IHpvb21MZXZlbCA9IE1hdGgucm91bmQodGhpcy5fem9vbUxldmVsICogMTAwKTtcbiAgICBsZXQgcm91bmRab29tQnkgPSBNYXRoLnJvdW5kKHRoaXMuX3JvdW5kWm9vbUJ5ICogMTAwKTtcbiAgICBsZXQgaW5pdGlhbFpvb21MZXZlbCA9IE1hdGgucm91bmQodGhpcy5faW5pdGlhbFpvb21MZXZlbCAqIDEwMCk7XG5cbiAgICAvLyBSb3VuZCB1cCBpZiBuZWVkZWRcbiAgICBpZiAoem9vbUxldmVsICUgcm91bmRab29tQnkgIT09IDApIHtcbiAgICAgIHpvb21MZXZlbCA9IE1hdGguY2VpbCh6b29tTGV2ZWwgLyByb3VuZFpvb21CeSkgKiByb3VuZFpvb21CeTtcbiAgICB9IGVsc2Uge1xuICAgICAgem9vbUxldmVsICs9IHJvdW5kWm9vbUJ5O1xuICAgIH1cblxuICAgIHpvb21MZXZlbCA9IE1hdGgubWluKGluaXRpYWxab29tTGV2ZWwgKiAyLCB6b29tTGV2ZWwpO1xuICAgIHJldHVybiB0aGlzLnNldFpvb21MZXZlbCh6b29tTGV2ZWwgLyAxMDApO1xuICB9XG5cbiAgLyoqXG4gICAqIERlY3JlYXNlIHpvb20gbGV2ZWxcbiAgICovXG4gIHpvb21PdXQgKCkge1xuICAgIHRoaXMuX2lzSW5pdGlhbFpvb20gPSBmYWxzZTtcblxuICAgIGxldCB6b29tTGV2ZWwgPSBNYXRoLnJvdW5kKHRoaXMuX3pvb21MZXZlbCAqIDEwMCk7XG4gICAgbGV0IHJvdW5kWm9vbUJ5ID0gTWF0aC5yb3VuZCh0aGlzLl9yb3VuZFpvb21CeSAqIDEwMCk7XG4gICAgbGV0IGluaXRpYWxab29tTGV2ZWwgPSBNYXRoLnJvdW5kKHRoaXMuX2luaXRpYWxab29tTGV2ZWwgKiAxMDApO1xuXG4gICAgLy8gUm91bmQgdXAgaWYgbmVlZGVkXG4gICAgaWYgKHpvb21MZXZlbCAlIHJvdW5kWm9vbUJ5ICE9PSAwKSB7XG4gICAgICB6b29tTGV2ZWwgPSBNYXRoLmZsb29yKHpvb21MZXZlbCAvIHJvdW5kWm9vbUJ5KSAqIHJvdW5kWm9vbUJ5O1xuICAgIH0gZWxzZSB7XG4gICAgICB6b29tTGV2ZWwgLT0gcm91bmRab29tQnk7XG4gICAgfVxuXG4gICAgem9vbUxldmVsID0gTWF0aC5tYXgoaW5pdGlhbFpvb21MZXZlbCwgem9vbUxldmVsKTtcbiAgICByZXR1cm4gdGhpcy5zZXRab29tTGV2ZWwoem9vbUxldmVsIC8gMTAwKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBSZXNpemVzIGFuZCBwb3NpdGlvbnMgdGhlIGNhbnZhc1xuICAgKiBAcGFyYW0ge1ZlY3RvcjJ9IFtzaXplXVxuICAgKiBAcHJpdmF0ZVxuICAgKi9cbiAgX3NldENhbnZhc1NpemUgKHNpemUpIHtcbiAgICBzaXplID0gc2l6ZSB8fCBuZXcgVmVjdG9yMih0aGlzLl9jYW52YXMud2lkdGgsIHRoaXMuX2NhbnZhcy5oZWlnaHQpO1xuXG4gICAgdGhpcy5fY2FudmFzLndpZHRoID0gc2l6ZS54O1xuICAgIHRoaXMuX2NhbnZhcy5oZWlnaHQgPSBzaXplLnk7XG5cbiAgICB0aGlzLl9zdG9yZUNhbnZhc1NpemUoKTtcbiAgICB0aGlzLl91cGRhdGVDb250YWluZXJTaXplKCk7XG4gIH1cblxuICAvKipcbiAgICogVXBkYXRlcyB0aGUgY2FudmFzIGNvbnRhaW5lciBzaXplXG4gICAqIEBwcml2YXRlXG4gICAqL1xuICBfdXBkYXRlQ29udGFpbmVyU2l6ZSAoKSB7XG4gICAgbGV0IHNpemUgPSB0aGlzLl9zaXplO1xuICAgIHRoaXMuX2NhbnZhc0lubmVyQ29udGFpbmVyLnN0eWxlLndpZHRoID0gYCR7c2l6ZS54fXB4YDtcbiAgICB0aGlzLl9jYW52YXNJbm5lckNvbnRhaW5lci5zdHlsZS5oZWlnaHQgPSBgJHtzaXplLnl9cHhgO1xuICB9XG5cbiAgLyoqXG4gICAqIFJlbWVtYmVycyB0aGUgY2FudmFzIHNpemVcbiAgICogQGNvbW1lbnQgVGhpcyB3YXMgaW50cm9kdWNlZCBiZWNhdXNlIHRoZSBjYW52YXMgc2l6ZSB3YXMgbm90IGFsd2F5c1xuICAgKiAgICAgICAgICBjb3JyZWN0IGR1ZSB0byBzb21lIHJhY2UgY29uZGl0aW9ucy4gTm93IHRoYXQgcHJvbWlzZXMgd29ya1xuICAgKiAgICAgICAgICBwcm9wZXJseSwgZG8gd2Ugc3RpbGwgbmVlZCB0aGlzP1xuICAgKiBAcHJpdmF0ZVxuICAgKi9cbiAgX3N0b3JlQ2FudmFzU2l6ZSAoKSB7XG4gICAgdGhpcy5fc2l6ZSA9IG5ldyBWZWN0b3IyKHRoaXMuX2NhbnZhcy53aWR0aCwgdGhpcy5fY2FudmFzLmhlaWdodCk7XG4gIH1cblxuICAvKipcbiAgICogQ2VudGVycyB0aGUgY2FudmFzIGluc2lkZSB0aGUgY29udGFpbmVyXG4gICAqIEBwcml2YXRlXG4gICAqL1xuICBfY2VudGVyQ2FudmFzICgpIHtcbiAgICBsZXQgcG9zaXRpb24gPSB0aGlzLl9tYXhTaXplXG4gICAgICAuZGl2aWRlKDIpO1xuXG4gICAgdGhpcy5fY2FudmFzSW5uZXJDb250YWluZXIuc3R5bGUubGVmdCA9IGAke3Bvc2l0aW9uLnh9cHhgO1xuICAgIHRoaXMuX2NhbnZhc0lubmVyQ29udGFpbmVyLnN0eWxlLnRvcCA9IGAke3Bvc2l0aW9uLnl9cHhgO1xuXG4gICAgdGhpcy5fdXBkYXRlQ2FudmFzTWFyZ2lucygpO1xuICB9XG5cbiAgLyoqXG4gICAqIFVwZGF0ZXMgdGhlIGNhbnZhcyBtYXJnaW5zIHNvIHRoYXQgdGhleSBhcmUgdGhlIG5lZ2F0aXZlIGhhbGYgd2lkdGhcbiAgICogYW5kIGhlaWdodCBvZiB0aGUgY2FudmFzXG4gICAqIEBwcml2YXRlXG4gICAqL1xuICBfdXBkYXRlQ2FudmFzTWFyZ2lucyAoKSB7XG4gICAgbGV0IGNhbnZhc1NpemUgPSBuZXcgVmVjdG9yMih0aGlzLl9jYW52YXMud2lkdGgsIHRoaXMuX2NhbnZhcy5oZWlnaHQpO1xuICAgIGxldCBtYXJnaW4gPSBjYW52YXNTaXplXG4gICAgICAuZGl2aWRlKDIpXG4gICAgICAubXVsdGlwbHkoLTEpO1xuICAgIHRoaXMuX2NhbnZhc0lubmVyQ29udGFpbmVyLnN0eWxlLm1hcmdpbkxlZnQgPSBgJHttYXJnaW4ueH1weGA7XG4gICAgdGhpcy5fY2FudmFzSW5uZXJDb250YWluZXIuc3R5bGUubWFyZ2luVG9wID0gYCR7bWFyZ2luLnl9cHhgO1xuICB9XG5cbiAgLyoqXG4gICAqIFNldHMgdGhlIHpvb20gbGV2ZWwsIHJlLXJlbmRlcnMgdGhlIGNhbnZhcyBhbmRcbiAgICogcmVwb3NpdGlvbnMgaXRcbiAgICogQHBhcmFtIHtOdW1iZXJ9IHpvb21MZXZlbFxuICAgKiBAcGFyYW0ge0Jvb2xlYW59IHJlbmRlclxuICAgKiBAcHJpdmF0ZVxuICAgKi9cbiAgc2V0Wm9vbUxldmVsICh6b29tTGV2ZWwsIHJlbmRlcj10cnVlKSB7XG4gICAgdGhpcy5fem9vbUxldmVsID0gem9vbUxldmVsO1xuICAgIGlmIChyZW5kZXIpIHtcbiAgICAgIHRoaXMuc2V0QWxsT3BlcmF0aW9uc1RvRGlydHkoKTtcbiAgICAgIHJldHVybiB0aGlzLnJlbmRlcigpXG4gICAgICAgIC50aGVuKCgpID0+IHtcbiAgICAgICAgICB0aGlzLl91cGRhdGVDYW52YXNNYXJnaW5zKCk7XG4gICAgICAgICAgdGhpcy5fYXBwbHlCb3VuZGFyaWVzKCk7XG4gICAgICAgICAgdGhpcy5lbWl0KFwiem9vbVwiKTsgLy8gd2lsbCBiZSByZWRpcmVjdGVkIHRvIHRvcCBjb250cm9sc1xuICAgICAgICB9KTtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5fdXBkYXRlQ2FudmFzTWFyZ2lucygpO1xuICAgICAgdGhpcy5fYXBwbHlCb3VuZGFyaWVzKCk7XG4gICAgICB0aGlzLmVtaXQoXCJ6b29tXCIpOyAvLyB3aWxsIGJlIHJlZGlyZWN0ZWQgdG8gdG9wIGNvbnRyb2xzXG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIFNldHMgYWxsIG9wZXJhdGlvbnMgdG8gZGlydHlcbiAgICovXG4gIHNldEFsbE9wZXJhdGlvbnNUb0RpcnR5ICgpIHtcbiAgICBmb3IgKGxldCBvcGVyYXRpb24gb2YgdGhpcy5fa2l0Lm9wZXJhdGlvbnNTdGFjaykge1xuICAgICAgb3BlcmF0aW9uLmRpcnR5ID0gdHJ1ZTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogR2V0cyB0aGUgaW5pdGlhbCB6b29tIGxldmVsIHNvIHRoYXQgdGhlIGltYWdlIGZpdHMgdGhlIG1heGltdW1cbiAgICogY2FudmFzIHNpemVcbiAgICogQHByaXZhdGVcbiAgICovXG4gIF9nZXRJbml0aWFsWm9vbUxldmVsICgpIHtcbiAgICBsZXQgY3JvcE9wZXJhdGlvbiA9IHRoaXMuX3VpLm9wZXJhdGlvbnMuY3JvcDtcbiAgICBsZXQgcm90YXRpb25PcGVyYXRpb24gPSB0aGlzLl91aS5vcGVyYXRpb25zLnJvdGF0aW9uO1xuICAgIGxldCBjcm9wU2l6ZSA9IGNyb3BPcGVyYXRpb24uZ2V0RW5kKCkuY2xvbmUoKVxuICAgICAgLnN1YnRyYWN0KGNyb3BPcGVyYXRpb24uZ2V0U3RhcnQoKSk7XG5cbiAgICBpZiAoY3JvcE9wZXJhdGlvbi5pc0lkZW50aXR5KSB7XG4gICAgICBjcm9wU2l6ZS5zZXQoMSwgMSk7XG4gICAgfVxuXG4gICAgbGV0IGlucHV0U2l6ZSA9IG5ldyBWZWN0b3IyKHRoaXMuX2ltYWdlLndpZHRoLCB0aGlzLl9pbWFnZS5oZWlnaHQpO1xuICAgIGxldCBjcm9wcGVkU2l6ZSA9IGlucHV0U2l6ZS5jbG9uZSgpLm11bHRpcGx5KGNyb3BTaXplKTtcblxuICAgIC8vIEhhcyB0aGUgaW1hZ2UgYmVlbiByb3RhdGVkP1xuICAgIGlmIChyb3RhdGlvbk9wZXJhdGlvbiAmJlxuICAgICAgIXJvdGF0aW9uT3BlcmF0aW9uLmlzSWRlbnRpdHkgJiZcbiAgICAgIHJvdGF0aW9uT3BlcmF0aW9uLmdldERlZ3JlZXMoKSAlIDE4MCAhPT0gMCkge1xuICAgICAgICBsZXQgdGVtcFggPSBjcm9wcGVkU2l6ZS54O1xuICAgICAgICBjcm9wcGVkU2l6ZS54ID0gY3JvcHBlZFNpemUueTtcbiAgICAgICAgY3JvcHBlZFNpemUueSA9IHRlbXBYO1xuICAgIH1cblxuICAgIGxldCBmaW5hbFNpemUgPSB0aGlzLl9yZXNpemVWZWN0b3JUb0ZpdChjcm9wcGVkU2l6ZSk7XG5cbiAgICAvLyBSb3RhdGUgYmFjayB0byBiZSBhYmxlIHRvIGZpbmQgdGhlIGZpbmFsIHNpemVcbiAgICBpZiAocm90YXRpb25PcGVyYXRpb24gJiZcbiAgICAgICFyb3RhdGlvbk9wZXJhdGlvbi5pc0lkZW50aXR5ICYmXG4gICAgICByb3RhdGlvbk9wZXJhdGlvbi5nZXREZWdyZWVzKCkgJSAxODAgIT09IDApIHtcbiAgICAgICAgbGV0IHRlbXBYID0gZmluYWxTaXplLng7XG4gICAgICAgIGZpbmFsU2l6ZS54ID0gZmluYWxTaXplLnk7XG4gICAgICAgIGZpbmFsU2l6ZS55ID0gdGVtcFg7XG4gICAgfVxuXG4gICAgbGV0IGluaXRpYWxTaXplID0gZmluYWxTaXplLmNsb25lKCkuZGl2aWRlKGNyb3BTaXplKTtcbiAgICByZXR1cm4gaW5pdGlhbFNpemUueCAvIGlucHV0U2l6ZS54O1xuICB9XG5cbiAgLyoqXG4gICAqIFJlc2l6ZXMgdGhlIGdpdmVuIHR3by1kaW1lbnNpb25hbCB2ZWN0b3Igc28gdGhhdCBpdCBmaXRzXG4gICAqIHRoZSBtYXhpbXVtIHNpemUuXG4gICAqIEBwcml2YXRlXG4gICAqL1xuICBfcmVzaXplVmVjdG9yVG9GaXQgKHNpemUpIHtcbiAgICBsZXQgbWF4U2l6ZSA9IHRoaXMuX21heFNpemU7XG4gICAgbGV0IHNjYWxlID0gTWF0aC5taW4obWF4U2l6ZS54IC8gc2l6ZS54LCBtYXhTaXplLnkgLyBzaXplLnkpO1xuXG4gICAgbGV0IG5ld1NpemUgPSBzaXplLmNsb25lKClcbiAgICAgIC5tdWx0aXBseShzY2FsZSk7XG5cbiAgICByZXR1cm4gbmV3U2l6ZTtcbiAgfVxuXG4gIC8qKlxuICAgKiBJbml0aWFsaXplcyB0aGUgcmVuZGVyZXJcbiAgICogQHByaXZhdGVcbiAgICovXG4gIF9pbml0UmVuZGVyZXIgKCkge1xuICAgIGlmIChXZWJHTFJlbmRlcmVyLmlzU3VwcG9ydGVkKCkgJiYgdGhpcy5fb3B0aW9ucy5yZW5kZXJlciAhPT0gXCJjYW52YXNcIikge1xuICAgICAgdGhpcy5fcmVuZGVyZXIgPSBuZXcgV2ViR0xSZW5kZXJlcihudWxsLCB0aGlzLl9jYW52YXMpO1xuICAgICAgdGhpcy5fd2ViZ2xFbmFibGVkID0gdHJ1ZTtcbiAgICB9IGVsc2UgaWYgKENhbnZhc1JlbmRlcmVyLmlzU3VwcG9ydGVkKCkpIHtcbiAgICAgIHRoaXMuX3JlbmRlcmVyID0gbmV3IENhbnZhc1JlbmRlcmVyKG51bGwsIHRoaXMuX2NhbnZhcyk7XG4gICAgICB0aGlzLl93ZWJnbEVuYWJsZWQgPSBmYWxzZTtcbiAgICB9XG5cbiAgICBpZiAodGhpcy5fcmVuZGVyZXIgPT09IG51bGwpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcihcIk5laXRoZXIgQ2FudmFzIG5vciBXZWJHTCByZW5kZXJlciBhcmUgc3VwcG9ydGVkLlwiKTtcbiAgICB9XG5cbiAgICB0aGlzLl9yZW5kZXJlci5vbihcIm5ldy1jYW52YXNcIiwgKGNhbnZhcykgPT4ge1xuICAgICAgdGhpcy5fc2V0Q2FudmFzKGNhbnZhcyk7XG4gICAgfSk7XG4gIH1cblxuICAvKipcbiAgICogUmVwbGFjZXMgdGhlIGNhbnZhcyB3aXRoIHRoZSBnaXZlbiBjYW52YXMsIHVwZGF0ZXMgbWFyZ2lucyBldGNcbiAgICogQHBhcmFtIHtET01FbGVtZW50fSBjYW52YXNcbiAgICogQHByaXZhdGVcbiAgICovXG4gIF9zZXRDYW52YXMgKGNhbnZhcykge1xuICAgIGxldCBjYW52YXNQYXJlbnQgPSB0aGlzLl9jYW52YXMucGFyZW50Tm9kZTtcbiAgICBjYW52YXNQYXJlbnQucmVtb3ZlQ2hpbGQodGhpcy5fY2FudmFzKTtcbiAgICB0aGlzLl9jYW52YXMgPSBjYW52YXM7XG4gICAgY2FudmFzUGFyZW50LmFwcGVuZENoaWxkKHRoaXMuX2NhbnZhcyk7XG5cbiAgICB0aGlzLl91cGRhdGVDYW52YXNNYXJnaW5zKCk7XG4gICAgdGhpcy5fYXBwbHlCb3VuZGFyaWVzKCk7XG4gICAgdGhpcy5fdXBkYXRlQ29udGFpbmVyU2l6ZSgpO1xuICB9XG5cbiAgLyoqXG4gICAqIEhhbmRsZXMgdGhlIGRyYWdnaW5nXG4gICAqIEBwcml2YXRlXG4gICAqL1xuICBfaGFuZGxlRHJhZyAoKSB7XG4gICAgdGhpcy5fY2FudmFzLmFkZEV2ZW50TGlzdGVuZXIoXCJtb3VzZWRvd25cIiwgdGhpcy5fZHJhZ09uTW91c2Vkb3duKTtcbiAgICB0aGlzLl9jYW52YXMuYWRkRXZlbnRMaXN0ZW5lcihcInRvdWNoc3RhcnRcIiwgdGhpcy5fZHJhZ09uTW91c2Vkb3duKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBHZXRzIGNhbGxlZCB3aGVuIHRoZSB1c2VyIHN0YXJ0ZWQgdG91Y2hpbmcgLyBjbGlja2luZyB0aGUgY2FudmFzXG4gICAqIEBwYXJhbSB7RXZlbnR9IGVcbiAgICogQHByaXZhdGVcbiAgICovXG4gIF9kcmFnT25Nb3VzZWRvd24gKGUpIHtcbiAgICBpZiAoZS50eXBlID09PSBcIm1vdXNlZG93blwiICYmIGUuYnV0dG9uICE9PSAwKSByZXR1cm47XG4gICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuXG4gICAgbGV0IHggPSBlLnBhZ2VYLCB5ID0gZS5wYWdlWTtcbiAgICBpZiAoZS50eXBlID09PSBcInRvdWNoc3RhcnRcIikge1xuICAgICAgeCA9IGUudG91Y2hlc1swXS5wYWdlWDtcbiAgICAgIHkgPSBlLnRvdWNoZXNbMF0ucGFnZVk7XG4gICAgfVxuXG4gICAgbGV0IGNhbnZhc1ggPSBwYXJzZUludCh0aGlzLl9jYW52YXNJbm5lckNvbnRhaW5lci5zdHlsZS5sZWZ0KTtcbiAgICBsZXQgY2FudmFzWSA9IHBhcnNlSW50KHRoaXMuX2NhbnZhc0lubmVyQ29udGFpbmVyLnN0eWxlLnRvcCk7XG5cbiAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKFwibW91c2Vtb3ZlXCIsIHRoaXMuX2RyYWdPbk1vdXNlbW92ZSk7XG4gICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcInRvdWNobW92ZVwiLCB0aGlzLl9kcmFnT25Nb3VzZW1vdmUpO1xuXG4gICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcIm1vdXNldXBcIiwgdGhpcy5fZHJhZ09uTW91c2V1cCk7XG4gICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcInRvdWNoZW5kXCIsIHRoaXMuX2RyYWdPbk1vdXNldXApO1xuXG4gICAgLy8gUmVtZW1iZXIgaW5pdGlhbCBwb3NpdGlvblxuICAgIHRoaXMuX2luaXRpYWxNb3VzZVBvc2l0aW9uID0gbmV3IFZlY3RvcjIoeCwgeSk7XG4gICAgdGhpcy5faW5pdGlhbENhbnZhc1Bvc2l0aW9uID0gbmV3IFZlY3RvcjIoY2FudmFzWCwgY2FudmFzWSk7XG4gIH1cblxuICAvKipcbiAgICogR2V0cyBjYWxsZWQgd2hlbiB0aGUgdXNlciBkcmFncyB0aGUgY2FudmFzXG4gICAqIEBwYXJhbSB7RXZlbnR9IGVcbiAgICogQHByaXZhdGVcbiAgICovXG4gIF9kcmFnT25Nb3VzZW1vdmUgKGUpIHtcbiAgICBlLnByZXZlbnREZWZhdWx0KCk7XG5cbiAgICBsZXQgeCA9IGUucGFnZVgsIHkgPSBlLnBhZ2VZO1xuICAgIGlmIChlLnR5cGUgPT09IFwidG91Y2htb3ZlXCIpIHtcbiAgICAgIHggPSBlLnRvdWNoZXNbMF0ucGFnZVg7XG4gICAgICB5ID0gZS50b3VjaGVzWzBdLnBhZ2VZO1xuICAgIH1cblxuICAgIGxldCBuZXdNb3VzZVBvc2l0aW9uID0gbmV3IFZlY3RvcjIoeCwgeSk7XG4gICAgbGV0IG1vdXNlRGlmZiA9IG5ld01vdXNlUG9zaXRpb25cbiAgICAgIC5jbG9uZSgpXG4gICAgICAuc3VidHJhY3QodGhpcy5faW5pdGlhbE1vdXNlUG9zaXRpb24pO1xuICAgIGxldCBuZXdQb3NpdGlvbiA9IHRoaXMuX2luaXRpYWxDYW52YXNQb3NpdGlvblxuICAgICAgLmNsb25lKClcbiAgICAgIC5hZGQobW91c2VEaWZmKTtcblxuICAgIHRoaXMuX2NhbnZhc0lubmVyQ29udGFpbmVyLnN0eWxlLmxlZnQgPSBgJHtuZXdQb3NpdGlvbi54fXB4YDtcbiAgICB0aGlzLl9jYW52YXNJbm5lckNvbnRhaW5lci5zdHlsZS50b3AgPSBgJHtuZXdQb3NpdGlvbi55fXB4YDtcblxuICAgIHRoaXMuX2FwcGx5Qm91bmRhcmllcygpO1xuICB9XG5cbiAgLyoqXG4gICAqIE1ha2VzIHN1cmUgdGhlIGNhbnZhcyBwb3NpdGlvbnMgYXJlIHdpdGhpbiB0aGUgYm91bmRhcmllc1xuICAgKiBAcHJpdmF0ZVxuICAgKi9cbiAgX2FwcGx5Qm91bmRhcmllcyAoKSB7XG4gICAgbGV0IHggPSBwYXJzZUludCh0aGlzLl9jYW52YXNJbm5lckNvbnRhaW5lci5zdHlsZS5sZWZ0KTtcbiAgICBsZXQgeSA9IHBhcnNlSW50KHRoaXMuX2NhbnZhc0lubmVyQ29udGFpbmVyLnN0eWxlLnRvcCk7XG4gICAgbGV0IGNhbnZhc1Bvc2l0aW9uID0gbmV3IFZlY3RvcjIoeCwgeSk7XG5cbiAgICAvLyBCb3VuZGFyaWVzXG4gICAgbGV0IGJvdW5kYXJpZXMgPSB0aGlzLl9ib3VuZGFyaWVzO1xuICAgIGNhbnZhc1Bvc2l0aW9uLnggPSBNYXRoLm1pbihib3VuZGFyaWVzLm1heC54LCBNYXRoLm1heChib3VuZGFyaWVzLm1pbi54LCBjYW52YXNQb3NpdGlvbi54KSk7XG4gICAgY2FudmFzUG9zaXRpb24ueSA9IE1hdGgubWluKGJvdW5kYXJpZXMubWF4LnksIE1hdGgubWF4KGJvdW5kYXJpZXMubWluLnksIGNhbnZhc1Bvc2l0aW9uLnkpKTtcblxuICAgIHRoaXMuX2NhbnZhc0lubmVyQ29udGFpbmVyLnN0eWxlLmxlZnQgPSBgJHtjYW52YXNQb3NpdGlvbi54fXB4YDtcbiAgICB0aGlzLl9jYW52YXNJbm5lckNvbnRhaW5lci5zdHlsZS50b3AgPSBgJHtjYW52YXNQb3NpdGlvbi55fXB4YDtcbiAgfVxuXG4gIC8qKlxuICAgKiBHZXRzIGNhbGxlZCB3aGVuIHRoZSB1c2VyIHN0b3BwZWQgZHJhZ2dpbmcgdGhlIGNhbnZzYVxuICAgKiBAcGFyYW0ge0V2ZW50fSBlXG4gICAqIEBwcml2YXRlXG4gICAqL1xuICBfZHJhZ09uTW91c2V1cCAoZSkge1xuICAgIGUucHJldmVudERlZmF1bHQoKTtcblxuICAgIGRvY3VtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJtb3VzZW1vdmVcIiwgdGhpcy5fZHJhZ09uTW91c2Vtb3ZlKTtcbiAgICBkb2N1bWVudC5yZW1vdmVFdmVudExpc3RlbmVyKFwidG91Y2htb3ZlXCIsIHRoaXMuX2RyYWdPbk1vdXNlbW92ZSk7XG5cbiAgICBkb2N1bWVudC5yZW1vdmVFdmVudExpc3RlbmVyKFwibW91c2V1cFwiLCB0aGlzLl9kcmFnT25Nb3VzZXVwKTtcbiAgICBkb2N1bWVudC5yZW1vdmVFdmVudExpc3RlbmVyKFwidG91Y2hlbmRcIiwgdGhpcy5fZHJhZ09uTW91c2V1cCk7XG4gIH1cblxuICAvKipcbiAgICogVGhlIHBvc2l0aW9uIGJvdW5kYXJpZXMgZm9yIHRoZSBjYW52YXMgaW5zaWRlIHRoZSBjb250YWluZXJcbiAgICogQHR5cGUge09iamVjdC48VmVjdG9yMj59XG4gICAqIEBwcml2YXRlXG4gICAqL1xuICBnZXQgX2JvdW5kYXJpZXMgKCkge1xuICAgIGxldCBjYW52YXNTaXplID0gbmV3IFZlY3RvcjIodGhpcy5fY2FudmFzLndpZHRoLCB0aGlzLl9jYW52YXMuaGVpZ2h0KTtcbiAgICBsZXQgbWF4U2l6ZSA9IHRoaXMuX21heFNpemU7XG5cbiAgICBsZXQgZGlmZiA9IGNhbnZhc1NpemUuY2xvbmUoKS5zdWJ0cmFjdChtYXhTaXplKS5tdWx0aXBseSgtMSk7XG5cblxuICAgIGxldCBib3VuZGFyaWVzID0ge1xuICAgICAgbWluOiBuZXcgVmVjdG9yMihkaWZmLngsIGRpZmYueSksXG4gICAgICBtYXg6IG5ldyBWZWN0b3IyKDAsIDApXG4gICAgfTtcblxuICAgIGlmIChjYW52YXNTaXplLnggPCBtYXhTaXplLngpIHtcbiAgICAgIGJvdW5kYXJpZXMubWluLnggPSBkaWZmLnggLyAyO1xuICAgICAgYm91bmRhcmllcy5tYXgueCA9IGRpZmYueCAvIDI7XG4gICAgfVxuXG4gICAgaWYgKGNhbnZhc1NpemUueSA8IG1heFNpemUueSkge1xuICAgICAgYm91bmRhcmllcy5taW4ueSA9IGRpZmYueSAvIDI7XG4gICAgICBib3VuZGFyaWVzLm1heC55ID0gZGlmZi55IC8gMjtcbiAgICB9XG5cbiAgICBsZXQgaGFsZkNhbnZhc1NpemUgPSBjYW52YXNTaXplLmNsb25lKCkuZGl2aWRlKDIpO1xuICAgIGJvdW5kYXJpZXMubWluLmFkZChoYWxmQ2FudmFzU2l6ZSk7XG4gICAgYm91bmRhcmllcy5tYXguYWRkKGhhbGZDYW52YXNTaXplKTtcbiAgICByZXR1cm4gYm91bmRhcmllcztcbiAgfVxuXG4gIC8qKlxuICAgKiBUaGUgbWF4aW11bSBjYW52YXMgc2l6ZVxuICAgKiBAcHJpdmF0ZVxuICAgKi9cbiAgZ2V0IF9tYXhTaXplICgpIHtcbiAgICBsZXQgY29tcHV0ZWRTdHlsZSA9IGdldENvbXB1dGVkU3R5bGUodGhpcy5fY2FudmFzQ29udGFpbmVyKTtcbiAgICBsZXQgc2l6ZSA9IG5ldyBWZWN0b3IyKHRoaXMuX2NhbnZhc0NvbnRhaW5lci5vZmZzZXRXaWR0aCwgdGhpcy5fY2FudmFzQ29udGFpbmVyLm9mZnNldEhlaWdodCk7XG5cbiAgICBsZXQgcGFkZGluZ1ggPSBwYXJzZUludChjb21wdXRlZFN0eWxlLmdldFByb3BlcnR5VmFsdWUoXCJwYWRkaW5nLWxlZnRcIikpO1xuICAgIHBhZGRpbmdYICs9IHBhcnNlSW50KGNvbXB1dGVkU3R5bGUuZ2V0UHJvcGVydHlWYWx1ZShcInBhZGRpbmctcmlnaHRcIikpO1xuXG4gICAgbGV0IHBhZGRpbmdZID0gcGFyc2VJbnQoY29tcHV0ZWRTdHlsZS5nZXRQcm9wZXJ0eVZhbHVlKFwicGFkZGluZy10b3BcIikpO1xuICAgIHBhZGRpbmdZICs9IHBhcnNlSW50KGNvbXB1dGVkU3R5bGUuZ2V0UHJvcGVydHlWYWx1ZShcInBhZGRpbmctYm90dG9tXCIpKTtcblxuICAgIHNpemUueCAtPSBwYWRkaW5nWDtcbiAgICBzaXplLnkgLT0gcGFkZGluZ1k7XG5cbiAgICBsZXQgY29udHJvbHNIZWlnaHQgPSB0aGlzLl91aS5fY29udHJvbHNDb250YWluZXIub2Zmc2V0SGVpZ2h0O1xuICAgIHNpemUueSAtPSBjb250cm9sc0hlaWdodDtcblxuICAgIHJldHVybiBzaXplO1xuICB9XG5cbiAgLyoqXG4gICAqIEZpbHRlcnMgdGhlIG9wZXJhdGlvbiBzdGFjayBzbyB0aGF0IG9ubHkgdGhlIG9wZXJhdGlvbnMgdGhhdCBhcmUgbm90XG4gICAqIHNldCB0byB0aGUgZGVmYXVsdCBzZXR0aW5ncyBhcmUgdXNlZC5cbiAgICogQHByaXZhdGVcbiAgICovXG4gIGdldCBfYWN0dWFsU3RhY2sgKCkge1xuICAgIGxldCBzdGFjayA9IHRoaXMuX2tpdC5vcGVyYXRpb25zU3RhY2suZmlsdGVyKChvcCkgPT4ge1xuICAgICAgcmV0dXJuICFvcC5pc0lkZW50aXR5O1xuICAgIH0pO1xuICAgIHJldHVybiBzdGFjaztcbiAgfVxuXG4gIC8qKlxuICAgKiBGaW5kIHRoZSBmaXJzdCBkaXJ0eSBvcGVyYXRpb24gb2YgdGhlIHN0YWNrIGFuZCBzZXRzIGFsbCBmb2xsb3dpbmdcbiAgICogb3BlcmF0aW9ucyB0byBkaXJ0eVxuICAgKiBAcGFyYW0ge0FycmF5LjxPcGVyYXRpb24+fSBzdGFja1xuICAgKiBAcHJpdmF0ZVxuICAgKi9cbiAgX3VwZGF0ZVN0YWNrRGlydHlTdGF0ZXMgKHN0YWNrKSB7XG4gICAgbGV0IGRpcnR5Rm91bmQgPSBmYWxzZTtcbiAgICBmb3IgKGxldCBvcGVyYXRpb24gb2Ygc3RhY2spIHtcbiAgICAgIGlmIChvcGVyYXRpb24uZGlydHkpIHtcbiAgICAgICAgZGlydHlGb3VuZCA9IHRydWU7XG4gICAgICB9XG5cbiAgICAgIGlmIChkaXJ0eUZvdW5kKSB7XG4gICAgICAgIG9wZXJhdGlvbi5kaXJ0eSA9IHRydWU7XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIFpvb21zIHRoZSBjYW52YXMgc28gdGhhdCBpdCBmaXRzIHRoZSBjb250YWluZXJcbiAgICogQHBhcmFtIHtCb29sZWFufSByZW5kZXJcbiAgICovXG4gIHpvb21Ub0ZpdCAocmVuZGVyPXRydWUpIHtcbiAgICBsZXQgaW5pdGlhbFpvb21MZXZlbCA9IHRoaXMuX2dldEluaXRpYWxab29tTGV2ZWwoKTtcbiAgICByZXR1cm4gdGhpcy5zZXRab29tTGV2ZWwoaW5pdGlhbFpvb21MZXZlbCwgcmVuZGVyKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBUaGUgY3VycmVudCB6b29tIGxldmVsXG4gICAqIEB0eXBlIHtOdW1iZXJ9XG4gICAqL1xuICBnZXQgem9vbUxldmVsICgpIHtcbiAgICByZXR1cm4gdGhpcy5fem9vbUxldmVsO1xuICB9XG5cbiAgLyoqXG4gICAqIFRoZSBjYW52YXMgc2l6ZSBpbiBwaXhlbHNcbiAgICogQHR5cGUge1ZlY3RvcjJ9XG4gICAqL1xuICBnZXQgc2l6ZSAoKSB7XG4gICAgcmV0dXJuIHRoaXMuX3NpemU7XG4gIH1cbn1cblxuZXhwb3J0IGRlZmF1bHQgQ2FudmFzO1xuIiwiXCJ1c2Ugc3RyaWN0XCI7XG4vKiFcbiAqIENvcHlyaWdodCAoYykgMjAxMy0yMDE1IDllbGVtZW50cyBHbWJIXG4gKlxuICogUmVsZWFzZWQgdW5kZXIgQXR0cmlidXRpb24tTm9uQ29tbWVyY2lhbCAzLjAgVW5wb3J0ZWRcbiAqIGh0dHA6Ly9jcmVhdGl2ZWNvbW1vbnMub3JnL2xpY2Vuc2VzL2J5LW5jLzMuMC9cbiAqXG4gKiBGb3IgY29tbWVyY2lhbCB1c2UsIHBsZWFzZSBjb250YWN0IHVzIGF0IGNvbnRhY3RAOWVsZW1lbnRzLmNvbVxuICovXG5cbmltcG9ydCBFdmVudEVtaXR0ZXIgZnJvbSBcIi4uLy4uLy4uL2xpYi9ldmVudC1lbWl0dGVyXCI7XG5pbXBvcnQgVXRpbHMgZnJvbSBcIi4uLy4uLy4uL2xpYi91dGlsc1wiO1xuaW1wb3J0IENvbG9yIGZyb20gXCIuLi8uLi8uLi9saWIvY29sb3JcIjtcbmltcG9ydCBWZWN0b3IyIGZyb20gXCIuLi8uLi8uLi9saWIvbWF0aC92ZWN0b3IyXCI7XG5pbXBvcnQgXyBmcm9tIFwibG9kYXNoXCI7XG5cbmxldCBmcyA9IHJlcXVpcmUoXCJmc1wiKTtcblxuY2xhc3MgQ29sb3JQaWNrZXIgZXh0ZW5kcyBFdmVudEVtaXR0ZXIge1xuICBjb25zdHJ1Y3RvciAodWksIGVsZW1lbnQpIHtcbiAgICBzdXBlcigpO1xuXG4gICAgdGhpcy5fdWkgPSB1aTtcbiAgICB0aGlzLl9lbGVtZW50ID0gZWxlbWVudDtcbiAgICB0aGlzLl92aXNpYmxlID0gZmFsc2U7XG4gICAgdGhpcy5fbG9hZGVkID0gZmFsc2U7XG5cbiAgICB0aGlzLl9vdmVybGF5ID0gdGhpcy5fZWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLmltZ2x5a2l0LWNvbG9yLXBpY2tlci1vdmVybGF5XCIpO1xuICAgIHRoaXMuX2N1cnJlbnRDb2xvckNhbnZhcyA9IHRoaXMuX2VsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5pbWdseWtpdC1jb2xvci1waWNrZXItY29sb3JcIik7XG5cbiAgICB0aGlzLl9hbHBoYUNhbnZhcyA9IHRoaXMuX2VsZW1lbnQucXVlcnlTZWxlY3RvcihcImNhbnZhcy5pbWdseWtpdC1jb2xvci1waWNrZXItYWxwaGFcIik7XG4gICAgdGhpcy5fYWxwaGFLbm9iID0gdGhpcy5fZWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLmltZ2x5a2l0LWNvbG9yLXBpY2tlci1hbHBoYS1jb250YWluZXIgLmltZ2x5a2l0LXRyYW5zcGFyZW50LWtub2JcIik7XG5cbiAgICB0aGlzLl9odWVDYW52YXMgPSB0aGlzLl9lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCJjYW52YXMuaW1nbHlraXQtY29sb3ItcGlja2VyLWh1ZVwiKTtcbiAgICB0aGlzLl9odWVLbm9iID0gdGhpcy5fZWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLmltZ2x5a2l0LWNvbG9yLXBpY2tlci1odWUtY29udGFpbmVyIC5pbWdseWtpdC10cmFuc3BhcmVudC1rbm9iXCIpO1xuXG4gICAgdGhpcy5fc2F0dXJhdGlvbkNhbnZhcyA9IHRoaXMuX2VsZW1lbnQucXVlcnlTZWxlY3RvcihcImNhbnZhcy5pbWdseWtpdC1jb2xvci1waWNrZXItc2F0dXJhdGlvblwiKTtcbiAgICB0aGlzLl9zYXR1cmF0aW9uS25vYiA9IHRoaXMuX2VsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5pbWdseWtpdC1jb2xvci1waWNrZXItc2F0dXJhdGlvbi1jb250YWluZXIgLmltZ2x5a2l0LXRyYW5zcGFyZW50LWtub2JcIik7XG5cbiAgICB0aGlzLl90cmFuc3BhcmVuY3lJbWFnZSA9IG5ldyBJbWFnZSgpO1xuICAgIHRoaXMuX3RyYW5zcGFyZW5jeUltYWdlLnNyYyA9IHVpLmhlbHBlcnMuYXNzZXRQYXRoKFwidWkvbmlnaHQvdHJhbnNwYXJlbmN5LnBuZ1wiKTtcbiAgICB0aGlzLl90cmFuc3BhcmVuY3lJbWFnZS5hZGRFdmVudExpc3RlbmVyKFwibG9hZFwiLCB0aGlzLl9vblRyYW5zcGFyZW5jeUltYWdlTG9hZC5iaW5kKHRoaXMpKTtcblxuICAgIHRoaXMuX29uQWxwaGFDYW52YXNEb3duID0gdGhpcy5fb25BbHBoYUNhbnZhc0Rvd24uYmluZCh0aGlzKTtcbiAgICB0aGlzLl9vbkFscGhhQ2FudmFzRHJhZyA9IHRoaXMuX29uQWxwaGFDYW52YXNEcmFnLmJpbmQodGhpcyk7XG4gICAgdGhpcy5fb25BbHBoYUNhbnZhc1VwID0gdGhpcy5fb25BbHBoYUNhbnZhc1VwLmJpbmQodGhpcyk7XG4gICAgdGhpcy5fb25IdWVDYW52YXNEb3duID0gdGhpcy5fb25IdWVDYW52YXNEb3duLmJpbmQodGhpcyk7XG4gICAgdGhpcy5fb25IdWVDYW52YXNEcmFnID0gdGhpcy5fb25IdWVDYW52YXNEcmFnLmJpbmQodGhpcyk7XG4gICAgdGhpcy5fb25IdWVDYW52YXNVcCA9IHRoaXMuX29uSHVlQ2FudmFzVXAuYmluZCh0aGlzKTtcblxuICAgIHRoaXMuX29uU2F0dXJhdGlvbkNhbnZhc0Rvd24gPSB0aGlzLl9vblNhdHVyYXRpb25DYW52YXNEb3duLmJpbmQodGhpcyk7XG4gICAgdGhpcy5fb25TYXR1cmF0aW9uQ2FudmFzRHJhZyA9IHRoaXMuX29uU2F0dXJhdGlvbkNhbnZhc0RyYWcuYmluZCh0aGlzKTtcbiAgICB0aGlzLl9vblNhdHVyYXRpb25DYW52YXNVcCA9IHRoaXMuX29uU2F0dXJhdGlvbkNhbnZhc1VwLmJpbmQodGhpcyk7XG5cbiAgICB0aGlzLl9vbkVsZW1lbnRDbGljayA9IHRoaXMuX29uRWxlbWVudENsaWNrLmJpbmQodGhpcyk7XG5cbiAgICB0aGlzLl9oYW5kbGVUb2dnbGUoKTtcbiAgICB0aGlzLl9oYW5kbGVBbHBoYUtub2IoKTtcbiAgICB0aGlzLl9oYW5kbGVIdWVLbm9iKCk7XG4gICAgdGhpcy5faGFuZGxlU2F0dXJhdGlvbktub2IoKTtcbiAgfVxuXG4gIF9vblRyYW5zcGFyZW5jeUltYWdlTG9hZCAoKSB7XG4gICAgdGhpcy5fbG9hZGVkID0gdHJ1ZTtcbiAgICB0aGlzLl9yZW5kZXIoKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBUaGUgcGFydGlhbCB0ZW1wbGF0ZSBzdHJpbmdcbiAgICogQHR5cGUge1N0cmluZ31cbiAgICovXG4gIHN0YXRpYyBnZXQgdGVtcGxhdGUgKCkge1xuICAgIHJldHVybiBmcy5yZWFkRmlsZVN5bmMoX19kaXJuYW1lICsgXCIvLi4vLi4vLi4vdGVtcGxhdGVzL25pZ2h0L2dlbmVyaWNzL2NvbG9yLXBpY2tlcl9jb250cm9sLmpzdFwiLCBcInV0Zi04XCIpO1xuICB9XG5cbiAgLyoqXG4gICAqIEhhbmRsZXMgdGhlIHRvZ2dsaW5nIG9mIHRoZSBvdmVybGF5XG4gICAqIEBwcml2YXRlXG4gICAqL1xuICBfaGFuZGxlVG9nZ2xlICgpIHtcbiAgICB0aGlzLl9lbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCB0aGlzLl9vbkVsZW1lbnRDbGljayk7XG4gIH1cblxuICAvKipcbiAgICogR2V0cyBjYWxsZWQgd2hlbiB0aGUgZWxlbWVudCBoYXMgYmVlbiBjbGlja2VkXG4gICAqIEBwYXJhbSB7RXZlbnR9IGVcbiAgICogQHByaXZhdGVcbiAgICovXG4gIF9vbkVsZW1lbnRDbGljayAoZSkge1xuICAgIGlmIChlLnRhcmdldCA9PT0gdGhpcy5fZWxlbWVudCB8fFxuICAgICAgZS50YXJnZXQgPT09IHRoaXMuX2N1cnJlbnRDb2xvckNhbnZhcykge1xuICAgICAgICBpZiAodGhpcy5fdmlzaWJsZSkge1xuICAgICAgICAgIHRoaXMuX292ZXJsYXkuY2xhc3NMaXN0LnJlbW92ZShcImltZ2x5a2l0LXZpc2libGVcIik7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgdGhpcy5fb3ZlcmxheS5jbGFzc0xpc3QuYWRkKFwiaW1nbHlraXQtdmlzaWJsZVwiKTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLl92aXNpYmxlID0gIXRoaXMuX3Zpc2libGU7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIFNldHMgdGhlIGdpdmVuIHZhbHVlXG4gICAqIEBwYXJhbSB7TnVtYmVyfSB2YWx1ZVxuICAgKi9cbiAgc2V0VmFsdWUgKHZhbHVlKSB7XG4gICAgdGhpcy5fdmFsdWUgPSB2YWx1ZS5jbG9uZSgpO1xuICAgIGxldCBbaCwgcywgdl0gPSB0aGlzLl92YWx1ZS50b0hTVigpO1xuICAgIHRoaXMuX2hzdkNvbG9yID0ge2gsIHMsIHZ9O1xuICAgIHRoaXMuX3Bvc2l0aW9uS25vYnMoKTtcbiAgICB0aGlzLl9yZW5kZXIoKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBVcGRhdGVzIHRoZSBrbm9iIHBvc2l0aW9ucyB0byByZXByZXNlbnQgdGhlIGN1cnJlbnQgSFNWIGNvbG9yXG4gICAqIEBwcml2YXRlXG4gICAqL1xuICBfcG9zaXRpb25Lbm9icyAoKSB7XG4gICAgdGhpcy5fcG9zaXRpb25BbHBoYUtub2IoKTtcbiAgICB0aGlzLl9wb3NpdGlvbkh1ZUtub2IoKTtcbiAgICB0aGlzLl9wb3NpdGlvblNhdHVyYXRpb25Lbm9iKCk7XG4gIH1cblxuICAvKipcbiAgICogUG9zaXRpb25zIHRoZSBhbHBoYSBrbm9iIGFjY29yZGluZyB0byB0aGUgY3VycmVudCBhbHBoYSB2YWx1ZVxuICAgKiBAcHJpdmF0ZVxuICAgKi9cbiAgX3Bvc2l0aW9uQWxwaGFLbm9iICgpIHtcbiAgICBsZXQgY2FudmFzID0gdGhpcy5fYWxwaGFDYW52YXM7XG4gICAgbGV0IGNhbnZhc1NpemUgPSBuZXcgVmVjdG9yMihjYW52YXMud2lkdGgsIGNhbnZhcy5oZWlnaHQpO1xuXG4gICAgbGV0IGxlZnQgPSB0aGlzLl92YWx1ZS5hICogY2FudmFzU2l6ZS54O1xuICAgIHRoaXMuX2FscGhhS25vYi5zdHlsZS5sZWZ0ID0gYCR7bGVmdH1weGA7XG4gIH1cblxuICAvKipcbiAgICogUG9zaXRpb25zIHRoZSBodWUga25vYiBhY2NvcmRpbmcgdG8gdGhlIGN1cnJlbnQgaHVlIHZhbHVlXG4gICAqIEBwcml2YXRlXG4gICAqL1xuICBfcG9zaXRpb25IdWVLbm9iICgpIHtcbiAgICBsZXQgY2FudmFzID0gdGhpcy5faHVlQ2FudmFzO1xuICAgIGxldCBjYW52YXNTaXplID0gbmV3IFZlY3RvcjIoY2FudmFzLndpZHRoLCBjYW52YXMuaGVpZ2h0KTtcblxuICAgIGxldCB0b3AgPSB0aGlzLl9oc3ZDb2xvci5oICogY2FudmFzU2l6ZS55O1xuICAgIHRoaXMuX2h1ZUtub2Iuc3R5bGUudG9wID0gYCR7dG9wfXB4YDtcbiAgfVxuXG4gIC8qKlxuICAgKiBQb3NpdGlvbnMgdGhlIHNhdHVyYXRpb24ga25vYiBhY2NvcmRpbmcgdG8gdGhlIGN1cnJlbnQgc2F0dXJhdGlvbiB2YWx1ZVxuICAgKiBAcHJpdmF0ZVxuICAgKi9cbiAgX3Bvc2l0aW9uU2F0dXJhdGlvbktub2IgKCkge1xuICAgIGxldCBjYW52YXMgPSB0aGlzLl9zYXR1cmF0aW9uQ2FudmFzO1xuICAgIGxldCBjYW52YXNTaXplID0gbmV3IFZlY3RvcjIoY2FudmFzLndpZHRoLCBjYW52YXMuaGVpZ2h0KTtcblxuICAgIGxldCBsZWZ0ID0gdGhpcy5faHN2Q29sb3IucyAqIGNhbnZhc1NpemUueDtcbiAgICB0aGlzLl9zYXR1cmF0aW9uS25vYi5zdHlsZS5sZWZ0ID0gYCR7bGVmdH1weGA7XG4gICAgbGV0IHRvcCA9ICgxIC0gdGhpcy5faHN2Q29sb3IudikgKiBjYW52YXNTaXplLnk7XG4gICAgdGhpcy5fc2F0dXJhdGlvbktub2Iuc3R5bGUudG9wID0gYCR7dG9wfXB4YDtcbiAgfVxuXG4gIC8qKlxuICAgKiBVcGRhdGVzIGFuZCByZW5kZXJzIGFsbCBjb250cm9scyB0byByZXByZXNlbnQgdGhlIGN1cnJlbnQgdmFsdWVcbiAgICogQHByaXZhdGVcbiAgICovXG4gIF9yZW5kZXIgKCkge1xuICAgIGlmICghdGhpcy5fbG9hZGVkKSByZXR1cm47XG4gICAgdGhpcy5fcmVuZGVyQ3VycmVudENvbG9yKCk7XG4gICAgdGhpcy5fcmVuZGVyQWxwaGEoKTtcbiAgICB0aGlzLl9yZW5kZXJIdWUoKTtcbiAgICB0aGlzLl9yZW5kZXJTYXR1cmF0aW9uKCk7XG4gIH1cblxuICAvKipcbiAgICogUmVuZGVycyB0aGUgY3VycmVudGx5IHNlbGVjdGVkIGNvbG9yIG9uIHRoZSBjb250cm9scyBjYW52YXNcbiAgICogQHByaXZhdGVcbiAgICovXG4gIF9yZW5kZXJDdXJyZW50Q29sb3IgKCkge1xuICAgIGxldCBjYW52YXMgPSB0aGlzLl9jdXJyZW50Q29sb3JDYW52YXM7XG4gICAgbGV0IGNvbnRleHQgPSBjYW52YXMuZ2V0Q29udGV4dChcIjJkXCIpO1xuXG4gICAgbGV0IHBhdHRlcm4gPSBjb250ZXh0LmNyZWF0ZVBhdHRlcm4odGhpcy5fdHJhbnNwYXJlbmN5SW1hZ2UsIFwicmVwZWF0XCIpO1xuICAgIGNvbnRleHQucmVjdCgwLCAwLCBjYW52YXMud2lkdGgsIGNhbnZhcy5oZWlnaHQpO1xuICAgIGNvbnRleHQuZmlsbFN0eWxlID0gcGF0dGVybjtcbiAgICBjb250ZXh0LmZpbGwoKTtcblxuICAgIGNvbnRleHQuZmlsbFN0eWxlID0gdGhpcy5fdmFsdWUudG9SR0JBKCk7XG4gICAgY29udGV4dC5maWxsKCk7XG4gIH1cblxuICAvKipcbiAgICogUmVuZGVycyB0aGUgdHJhbnNwYXJlbmN5IGNhbnZhcyB3aXRoIHRoZSBjdXJyZW50IGNvbG9yXG4gICAqIEBwcml2YXRlXG4gICAqL1xuICBfcmVuZGVyQWxwaGEgKCkge1xuICAgIGxldCBjYW52YXMgPSB0aGlzLl9hbHBoYUNhbnZhcztcbiAgICBsZXQgY29udGV4dCA9IGNhbnZhcy5nZXRDb250ZXh0KFwiMmRcIik7XG5cbiAgICBsZXQgcGF0dGVybiA9IGNvbnRleHQuY3JlYXRlUGF0dGVybih0aGlzLl90cmFuc3BhcmVuY3lJbWFnZSwgXCJyZXBlYXRcIik7XG4gICAgY29udGV4dC5yZWN0KDAsIDAsIGNhbnZhcy53aWR0aCwgY2FudmFzLmhlaWdodCk7XG4gICAgY29udGV4dC5maWxsU3R5bGUgPSBwYXR0ZXJuO1xuICAgIGNvbnRleHQuZmlsbCgpO1xuXG4gICAgbGV0IGdyYWRpZW50ID0gY29udGV4dC5jcmVhdGVMaW5lYXJHcmFkaWVudCgwLCAwLCBjYW52YXMud2lkdGgsIGNhbnZhcy5oZWlnaHQpO1xuXG4gICAgbGV0IGNvbG9yID0gdGhpcy5fdmFsdWUuY2xvbmUoKTtcbiAgICBjb2xvci5hID0gMDtcbiAgICBncmFkaWVudC5hZGRDb2xvclN0b3AoMCwgY29sb3IudG9SR0JBKCkpO1xuICAgIGdyYWRpZW50LmFkZENvbG9yU3RvcCgxLCB0aGlzLl92YWx1ZS50b0hleCgpKTtcbiAgICBjb250ZXh0LmZpbGxTdHlsZSA9IGdyYWRpZW50O1xuICAgIGNvbnRleHQuZmlsbCgpO1xuICB9XG5cbiAgLyoqXG4gICAqIFJlbmRlcnMgdGhlIGh1ZSBjYW52YXNcbiAgICogQHByaXZhdGVcbiAgICovXG4gIF9yZW5kZXJIdWUgKCkge1xuICAgIGxldCBjYW52YXMgPSB0aGlzLl9odWVDYW52YXM7XG4gICAgbGV0IGNvbnRleHQgPSBjYW52YXMuZ2V0Q29udGV4dChcIjJkXCIpO1xuXG4gICAgbGV0IGNvbG9yID0gbmV3IENvbG9yKCk7XG4gICAgZm9yIChsZXQgeSA9IDA7IHkgPCBjYW52YXMuaGVpZ2h0OyB5KyspIHtcbiAgICAgIGxldCByYXRpbyA9IHkgLyBjYW52YXMuaGVpZ2h0O1xuICAgICAgY29sb3IuZnJvbUhTVihyYXRpbywgMSwgMSk7XG5cbiAgICAgIGNvbnRleHQuc3Ryb2tlU3R5bGUgPSBjb2xvci50b1JHQkEoKTtcbiAgICAgIGNvbnRleHQuYmVnaW5QYXRoKCk7XG4gICAgICBjb250ZXh0Lm1vdmVUbygwLCB5KTtcbiAgICAgIGNvbnRleHQubGluZVRvKGNhbnZhcy53aWR0aCwgeSk7XG4gICAgICBjb250ZXh0LnN0cm9rZSgpO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBSZW5kZXJzIHRoZSBzYXR1cmF0aW9uIGNhbnZhc1xuICAgKiBAcHJpdmF0ZVxuICAgKi9cbiAgX3JlbmRlclNhdHVyYXRpb24gKCkge1xuICAgIGxldCBjYW52YXMgPSB0aGlzLl9zYXR1cmF0aW9uQ2FudmFzO1xuICAgIGxldCBjb250ZXh0ID0gY2FudmFzLmdldENvbnRleHQoXCIyZFwiKTtcblxuICAgIGxldCBpbWFnZURhdGEgPSBjb250ZXh0LmdldEltYWdlRGF0YSgwLCAwLCBjYW52YXMud2lkdGgsIGNhbnZhcy5oZWlnaHQpO1xuXG4gICAgbGV0IGNvbG9yID0gbmV3IENvbG9yKDEsIDAsIDAsIDEpO1xuICAgIGZvciAobGV0IHkgPSAwOyB5IDwgY2FudmFzLmhlaWdodDsgeSsrKSB7XG4gICAgICBsZXQgdmFsdWUgPSAoY2FudmFzLmhlaWdodCAtIHkpIC8gY2FudmFzLmhlaWdodDtcbiAgICAgIGZvciAobGV0IHggPSAwOyB4IDwgY2FudmFzLndpZHRoOyB4KyspIHtcbiAgICAgICAgbGV0IHNhdHVyYXRpb24gPSB4IC8gY2FudmFzLndpZHRoO1xuICAgICAgICBjb2xvci5mcm9tSFNWKHRoaXMuX2hzdkNvbG9yLmgsIHNhdHVyYXRpb24sIHZhbHVlKTtcbiAgICAgICAgbGV0IHtyLCBnLCBiLCBhfSA9IGNvbG9yO1xuXG4gICAgICAgIGxldCBpbmRleCA9ICh5ICogY2FudmFzLndpZHRoICsgeCkgKiA0O1xuXG4gICAgICAgIGltYWdlRGF0YS5kYXRhW2luZGV4XSA9IHIgKiAyNTU7XG4gICAgICAgIGltYWdlRGF0YS5kYXRhW2luZGV4ICsgMV0gPSBnICogMjU1O1xuICAgICAgICBpbWFnZURhdGEuZGF0YVtpbmRleCArIDJdID0gYiAqIDI1NTtcbiAgICAgICAgaW1hZ2VEYXRhLmRhdGFbaW5kZXggKyAzXSA9IGEgKiAyNTU7XG4gICAgICB9XG4gICAgfVxuXG4gICAgY29udGV4dC5wdXRJbWFnZURhdGEoaW1hZ2VEYXRhLCAwLCAwKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBIYW5kbGVzIHRoZSBkcmFnZ2luZyBvZiB0aGUgYWxwaGEga25vYlxuICAgKiBAcHJpdmF0ZVxuICAgKi9cbiAgX2hhbmRsZUFscGhhS25vYiAoKSB7XG4gICAgdGhpcy5fYWxwaGFDYW52YXMuYWRkRXZlbnRMaXN0ZW5lcihcIm1vdXNlZG93blwiLCB0aGlzLl9vbkFscGhhQ2FudmFzRG93bik7XG4gICAgdGhpcy5fYWxwaGFDYW52YXMuYWRkRXZlbnRMaXN0ZW5lcihcInRvdWNoc3RhcnRcIiwgdGhpcy5fb25BbHBoYUNhbnZhc0Rvd24pO1xuICB9XG5cbiAgLyoqXG4gICAqIEdldHMgY2FsbGVkIHdoZW4gdGhlIHVzZXIgY2xpY2tzIHRoZSBhbHBoYSBrbm9iXG4gICAqIEBwYXJhbSB7RXZlbnR9IGVcbiAgICogQHByaXZhdGVcbiAgICovXG4gIF9vbkFscGhhQ2FudmFzRG93biAoZSkge1xuICAgIGUucHJldmVudERlZmF1bHQoKTtcblxuICAgIHRoaXMuX29uQWxwaGFDYW52YXNEcmFnKGUpO1xuXG4gICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcIm1vdXNlbW92ZVwiLCB0aGlzLl9vbkFscGhhQ2FudmFzRHJhZyk7XG4gICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcInRvdWNobW92ZVwiLCB0aGlzLl9vbkFscGhhQ2FudmFzRHJhZyk7XG5cbiAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKFwibW91c2V1cFwiLCB0aGlzLl9vbkFscGhhQ2FudmFzVXApO1xuICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJ0b3VjaGVuZFwiLCB0aGlzLl9vbkFscGhhQ2FudmFzVXApO1xuICB9XG5cbiAgLyoqXG4gICAqIEdldHMgY2FsbGVkIHdoZW4gdGhlIHVzZXIgZHJhZ3MgdGhlIGFscGhhIGtub2JcbiAgICogQHBhcmFtIHtFdmVudH0gZVxuICAgKiBAcHJpdmF0ZVxuICAgKi9cbiAgX29uQWxwaGFDYW52YXNEcmFnIChlKSB7XG4gICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuXG4gICAgLy8gQ2FsY3VsYXRlIHJlbGF0aXZlIG1vdXNlIHBvc2l0aW9uIG9uIGNhbnZhc1xuICAgIGxldCBjYW52YXMgPSB0aGlzLl9hbHBoYUNhbnZhcztcbiAgICBsZXQgY2FudmFzU2l6ZSA9IG5ldyBWZWN0b3IyKGNhbnZhcy53aWR0aCwgY2FudmFzLmhlaWdodCk7XG4gICAgbGV0IG1vdXNlUG9zaXRpb24gPSBVdGlscy5nZXRFdmVudFBvc2l0aW9uKGUpO1xuICAgIGxldCB7IGxlZnQsIHRvcCB9ID0gY2FudmFzLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpO1xuICAgIGxldCBvZmZzZXQgPSBuZXcgVmVjdG9yMihsZWZ0LCB0b3ApO1xuICAgIGxldCByZWxhdGl2ZVBvc2l0aW9uID0gbW91c2VQb3NpdGlvbi5zdWJ0cmFjdChvZmZzZXQpO1xuICAgIHJlbGF0aXZlUG9zaXRpb24uY2xhbXAobmV3IFZlY3RvcjIoMCwgMCksIGNhbnZhc1NpemUpO1xuXG4gICAgLy8gVXBkYXRlIGtub2IgY3NzIHBvc2l0aW9uaW5nXG4gICAgdGhpcy5fYWxwaGFLbm9iLnN0eWxlLmxlZnQgPSBgJHtyZWxhdGl2ZVBvc2l0aW9uLnh9cHhgO1xuXG4gICAgLy8gVXBkYXRlIGFscGhhIHZhbHVlXG4gICAgdGhpcy5fdmFsdWUuYSA9IHJlbGF0aXZlUG9zaXRpb24ueCAvIGNhbnZhc1NpemUueDtcbiAgICB0aGlzLl91cGRhdGVDb2xvcigpO1xuICB9XG5cbiAgLyoqXG4gICAqIEdldHMgY2FsbGVkIHdoZW4gdGhlIHVzZXIgc3RvcHMgZHJhZ2dpbmcgdGhlIGFscGhhIGtub2JcbiAgICogQHBhcmFtIHtFdmVudH0gZVxuICAgKiBAcHJpdmF0ZVxuICAgKi9cbiAgX29uQWxwaGFDYW52YXNVcCAoZSkge1xuICAgIGRvY3VtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJtb3VzZW1vdmVcIiwgdGhpcy5fb25BbHBoYUNhbnZhc0RyYWcpO1xuICAgIGRvY3VtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJ0b3VjaG1vdmVcIiwgdGhpcy5fb25BbHBoYUNhbnZhc0RyYWcpO1xuXG4gICAgZG9jdW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcihcIm1vdXNldXBcIiwgdGhpcy5fb25BbHBoYUNhbnZhc1VwKTtcbiAgICBkb2N1bWVudC5yZW1vdmVFdmVudExpc3RlbmVyKFwidG91Y2hlbmRcIiwgdGhpcy5fb25BbHBoYUNhbnZhc1VwKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBIYW5kbGVzIHRoZSBkcmFnZ2luZyBvZiB0aGUgaHVlIGtub2JcbiAgICogQHByaXZhdGVcbiAgICovXG4gIF9oYW5kbGVIdWVLbm9iICgpIHtcbiAgICB0aGlzLl9odWVDYW52YXMuYWRkRXZlbnRMaXN0ZW5lcihcIm1vdXNlZG93blwiLCB0aGlzLl9vbkh1ZUNhbnZhc0Rvd24pO1xuICAgIHRoaXMuX2h1ZUNhbnZhcy5hZGRFdmVudExpc3RlbmVyKFwidG91Y2hzdGFydFwiLCB0aGlzLl9vbkh1ZUNhbnZhc0Rvd24pO1xuICB9XG5cbiAgLyoqXG4gICAqIEdldHMgY2FsbGVkIHdoZW4gdGhlIHVzZXIgY2xpY2tzIHRoZSBjYW52YXMga25vYlxuICAgKiBAcGFyYW0ge0V2ZW50fSBlXG4gICAqIEBwcml2YXRlXG4gICAqL1xuICBfb25IdWVDYW52YXNEb3duIChlKSB7XG4gICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuXG4gICAgdGhpcy5fb25IdWVDYW52YXNEcmFnKGUpO1xuXG4gICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcIm1vdXNlbW92ZVwiLCB0aGlzLl9vbkh1ZUNhbnZhc0RyYWcpO1xuICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJ0b3VjaG1vdmVcIiwgdGhpcy5fb25IdWVDYW52YXNEcmFnKTtcblxuICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJtb3VzZXVwXCIsIHRoaXMuX29uSHVlQ2FudmFzVXApO1xuICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJ0b3VjaGVuZFwiLCB0aGlzLl9vbkh1ZUNhbnZhc1VwKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBHZXRzIGNhbGxlZCB3aGVuIHRoZSB1c2VyIGRyYWdzIHRoZSBodWUga25vYlxuICAgKiBAcGFyYW0ge0V2ZW50fSBlXG4gICAqIEBwcml2YXRlXG4gICAqL1xuICBfb25IdWVDYW52YXNEcmFnIChlKSB7XG4gICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuXG4gICAgbGV0IGNhbnZhcyA9IHRoaXMuX2h1ZUNhbnZhcztcbiAgICBsZXQgY2FudmFzU2l6ZSA9IG5ldyBWZWN0b3IyKGNhbnZhcy53aWR0aCwgY2FudmFzLmhlaWdodCk7XG5cbiAgICAvLyBDYWxjdWxhdGUgcmVsYXRpdmUgbW91c2UgcG9zaXRpb24gb24gY2FudmFzXG4gICAgbGV0IG1vdXNlUG9zaXRpb24gPSBVdGlscy5nZXRFdmVudFBvc2l0aW9uKGUpO1xuICAgIGxldCB7IGxlZnQsIHRvcCB9ID0gY2FudmFzLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpO1xuICAgIGxldCBvZmZzZXQgPSBuZXcgVmVjdG9yMihsZWZ0LCB0b3ApO1xuICAgIGxldCByZWxhdGl2ZVBvc2l0aW9uID0gbW91c2VQb3NpdGlvbi5zdWJ0cmFjdChvZmZzZXQpO1xuICAgIHJlbGF0aXZlUG9zaXRpb24uY2xhbXAobmV3IFZlY3RvcjIoMCwgMCksIGNhbnZhc1NpemUpO1xuXG4gICAgLy8gVXBkYXRlIHNhdHVyYWl0b24ga25vYiBjc3MgcG9zaXRpb25pbmdcbiAgICB0aGlzLl9odWVLbm9iLnN0eWxlLnRvcCA9IGAke3JlbGF0aXZlUG9zaXRpb24ueX1weGA7XG5cbiAgICAvLyBVcGRhdGUgc2F0dXJhdGlvbiBhbmQgdmFsdWVcbiAgICByZWxhdGl2ZVBvc2l0aW9uLmRpdmlkZShjYW52YXNTaXplKTtcbiAgICB0aGlzLl9oc3ZDb2xvci5oID0gcmVsYXRpdmVQb3NpdGlvbi55O1xuICAgIHRoaXMuX3VwZGF0ZUNvbG9yKCk7XG4gIH1cblxuICAvKipcbiAgICogR2V0cyBjYWxsZWQgd2hlbiB0aGUgdXNlciBzdG9wcyBkcmFnZ2luZyB0aGUgYWxwaGEga25vYlxuICAgKiBAcGFyYW0ge0V2ZW50fSBlXG4gICAqIEBwcml2YXRlXG4gICAqL1xuICBfb25IdWVDYW52YXNVcCAoZSkge1xuICAgIGRvY3VtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJtb3VzZW1vdmVcIiwgdGhpcy5fb25IdWVDYW52YXNEcmFnKTtcbiAgICBkb2N1bWVudC5yZW1vdmVFdmVudExpc3RlbmVyKFwidG91Y2htb3ZlXCIsIHRoaXMuX29uSHVlQ2FudmFzRHJhZyk7XG5cbiAgICBkb2N1bWVudC5yZW1vdmVFdmVudExpc3RlbmVyKFwibW91c2V1cFwiLCB0aGlzLl9vbkh1ZUNhbnZhc1VwKTtcbiAgICBkb2N1bWVudC5yZW1vdmVFdmVudExpc3RlbmVyKFwidG91Y2hlbmRcIiwgdGhpcy5fb25IdWVDYW52YXNVcCk7XG4gIH1cblxuICAvKipcbiAgICogSGFuZGxlcyB0aGUgZHJhZ2dpbmcgb2YgdGhlIHNhdHVyYXRpb24ga25vYlxuICAgKiBAcHJpdmF0ZVxuICAgKi9cbiAgX2hhbmRsZVNhdHVyYXRpb25Lbm9iICgpIHtcbiAgICB0aGlzLl9zYXR1cmF0aW9uQ2FudmFzLmFkZEV2ZW50TGlzdGVuZXIoXCJtb3VzZWRvd25cIiwgdGhpcy5fb25TYXR1cmF0aW9uQ2FudmFzRG93bik7XG4gICAgdGhpcy5fc2F0dXJhdGlvbkNhbnZhcy5hZGRFdmVudExpc3RlbmVyKFwidG91Y2hzdGFydFwiLCB0aGlzLl9vblNhdHVyYXRpb25DYW52YXNEb3duKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBHZXRzIGNhbGxlZCB3aGVuIHRoZSB1c2VyIGNsaWNrcyB0aGUgc2F0dXJhdGlvbiBjYW52YXNcbiAgICogQHBhcmFtIHtFdmVudH0gZVxuICAgKiBAcHJpdmF0ZVxuICAgKi9cbiAgX29uU2F0dXJhdGlvbkNhbnZhc0Rvd24gKGUpIHtcbiAgICBlLnByZXZlbnREZWZhdWx0KCk7XG5cbiAgICB0aGlzLl9vblNhdHVyYXRpb25DYW52YXNEcmFnKGUpO1xuXG4gICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcIm1vdXNlbW92ZVwiLCB0aGlzLl9vblNhdHVyYXRpb25DYW52YXNEcmFnKTtcbiAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKFwidG91Y2htb3ZlXCIsIHRoaXMuX29uU2F0dXJhdGlvbkNhbnZhc0RyYWcpO1xuXG4gICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcIm1vdXNldXBcIiwgdGhpcy5fb25TYXR1cmF0aW9uQ2FudmFzVXApO1xuICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJ0b3VjaGVuZFwiLCB0aGlzLl9vblNhdHVyYXRpb25DYW52YXNVcCk7XG4gIH1cblxuICAvKipcbiAgICogR2V0cyBjYWxsZWQgd2hlbiB0aGUgdXNlciBkcmFncyB0aGUgc2F0dXJhdGlvbiBrbm9iXG4gICAqIEBwYXJhbSB7RXZlbnR9IGVcbiAgICogQHByaXZhdGVcbiAgICovXG4gIF9vblNhdHVyYXRpb25DYW52YXNEcmFnIChlKSB7XG4gICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuXG4gICAgbGV0IGNhbnZhcyA9IHRoaXMuX3NhdHVyYXRpb25DYW52YXM7XG4gICAgbGV0IGNhbnZhc1NpemUgPSBuZXcgVmVjdG9yMihjYW52YXMud2lkdGgsIGNhbnZhcy5oZWlnaHQpO1xuXG4gICAgLy8gQ2FsY3VsYXRlIHJlbGF0aXZlIG1vdXNlIHBvc2l0aW9uIG9uIGNhbnZhc1xuICAgIGxldCBtb3VzZVBvc2l0aW9uID0gVXRpbHMuZ2V0RXZlbnRQb3NpdGlvbihlKTtcbiAgICBsZXQgeyBsZWZ0LCB0b3AgfSA9IGNhbnZhcy5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTtcbiAgICBsZXQgb2Zmc2V0ID0gbmV3IFZlY3RvcjIobGVmdCwgdG9wKTtcbiAgICBsZXQgcmVsYXRpdmVQb3NpdGlvbiA9IG1vdXNlUG9zaXRpb24uc3VidHJhY3Qob2Zmc2V0KTtcbiAgICByZWxhdGl2ZVBvc2l0aW9uLmNsYW1wKDAsIGNhbnZhcy53aWR0aCk7XG5cbiAgICAvLyBVcGRhdGUgc2F0dXJhaXRvbiBrbm9iIGNzcyBwb3NpdGlvbmluZ1xuICAgIHRoaXMuX3NhdHVyYXRpb25Lbm9iLnN0eWxlLmxlZnQgPSBgJHtyZWxhdGl2ZVBvc2l0aW9uLnh9cHhgO1xuICAgIHRoaXMuX3NhdHVyYXRpb25Lbm9iLnN0eWxlLnRvcCA9IGAke3JlbGF0aXZlUG9zaXRpb24ueX1weGA7XG5cbiAgICAvLyBVcGRhdGUgc2F0dXJhdGlvbiBhbmQgdmFsdWVcbiAgICByZWxhdGl2ZVBvc2l0aW9uLmRpdmlkZShjYW52YXNTaXplKTtcbiAgICB0aGlzLl9oc3ZDb2xvci5zID0gcmVsYXRpdmVQb3NpdGlvbi54O1xuICAgIHRoaXMuX2hzdkNvbG9yLnYgPSAxIC0gcmVsYXRpdmVQb3NpdGlvbi55O1xuICAgIHRoaXMuX3VwZGF0ZUNvbG9yKCk7XG4gIH1cblxuICAvKipcbiAgICogR2V0cyBjYWxsZWQgd2hlbiB0aGUgdXNlciBzdG9wcyBkcmFnZ2luZyB0aGUgc2F0dXJhdGlvbiBrbm9iXG4gICAqIEBwYXJhbSB7RXZlbnR9IGVcbiAgICogQHByaXZhdGVcbiAgICovXG4gIF9vblNhdHVyYXRpb25DYW52YXNVcCAoZSkge1xuICAgIGRvY3VtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJtb3VzZW1vdmVcIiwgdGhpcy5fb25TYXR1cmF0aW9uQ2FudmFzRHJhZyk7XG4gICAgZG9jdW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcihcInRvdWNobW92ZVwiLCB0aGlzLl9vblNhdHVyYXRpb25DYW52YXNEcmFnKTtcblxuICAgIGRvY3VtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJtb3VzZXVwXCIsIHRoaXMuX29uU2F0dXJhdGlvbkNhbnZhc1VwKTtcbiAgICBkb2N1bWVudC5yZW1vdmVFdmVudExpc3RlbmVyKFwidG91Y2hlbmRcIiwgdGhpcy5fb25TYXR1cmF0aW9uQ2FudmFzVXApO1xuICB9XG5cbiAgLyoqXG4gICAqIFVwZGF0ZXMgdGhlIGF0dGFjaGVkIGNvbG9yLCBlbWl0cyB0aGUgYHVwZGF0ZWAgZXZlbnQgYW5kIHRyaWdnZXJzXG4gICAqIGEgcmVuZGVyXG4gICAqIEBwcml2YXRlXG4gICAqL1xuICBfdXBkYXRlQ29sb3IgKCkge1xuICAgIHRoaXMuX3ZhbHVlLmZyb21IU1YodGhpcy5faHN2Q29sb3IuaCwgdGhpcy5faHN2Q29sb3IucywgdGhpcy5faHN2Q29sb3Iudik7XG4gICAgdGhpcy5lbWl0KFwidXBkYXRlXCIsIHRoaXMuX3ZhbHVlKTtcbiAgICB0aGlzLl9yZW5kZXIoKTtcbiAgfVxufVxuXG5leHBvcnQgZGVmYXVsdCBDb2xvclBpY2tlcjtcbiIsIlwidXNlIHN0cmljdFwiO1xuLyohXG4gKiBDb3B5cmlnaHQgKGMpIDIwMTMtMjAxNSA5ZWxlbWVudHMgR21iSFxuICpcbiAqIFJlbGVhc2VkIHVuZGVyIEF0dHJpYnV0aW9uLU5vbkNvbW1lcmNpYWwgMy4wIFVucG9ydGVkXG4gKiBodHRwOi8vY3JlYXRpdmVjb21tb25zLm9yZy9saWNlbnNlcy9ieS1uYy8zLjAvXG4gKlxuICogRm9yIGNvbW1lcmNpYWwgdXNlLCBwbGVhc2UgY29udGFjdCB1cyBhdCBjb250YWN0QDllbGVtZW50cy5jb21cbiAqL1xuXG5pbXBvcnQgU2xpZGVyIGZyb20gXCIuL3NsaWRlclwiO1xubGV0IGZzID0gcmVxdWlyZShcImZzXCIpO1xuXG5jbGFzcyBTaW1wbGVTbGlkZXIgZXh0ZW5kcyBTbGlkZXIge1xuICAvKipcbiAgICogVGhlIHBhcnRpYWwgdGVtcGxhdGUgc3RyaW5nXG4gICAqIEB0eXBlIHtTdHJpbmd9XG4gICAqL1xuICBzdGF0aWMgZ2V0IHRlbXBsYXRlICgpIHtcbiAgICByZXR1cm4gZnMucmVhZEZpbGVTeW5jKF9fZGlybmFtZSArIFwiLy4uLy4uLy4uL3RlbXBsYXRlcy9uaWdodC9nZW5lcmljcy9zaW1wbGUtc2xpZGVyX2NvbnRyb2wuanN0XCIsIFwidXRmLThcIik7XG4gIH1cblxuICAvKipcbiAgICogU2V0cyB0aGUgc2xpZGVyIHBvc2l0aW9uIHRvIHRoZSBnaXZlbiBYIHZhbHVlIGFuZCByZXNpemVzXG4gICAqIHRoZSBmaWxsIGRpdlxuICAgKiBAcHJpdmF0ZVxuICAgKi9cbiAgX3NldFggKHgpIHtcbiAgICB0aGlzLl9kb3RFbGVtZW50LnN0eWxlLmxlZnQgPSBgJHt4fXB4YDtcbiAgICB0aGlzLl9maWxsRWxlbWVudC5zdHlsZS53aWR0aCA9IGAke3h9cHhgO1xuICB9XG59XG5cbmV4cG9ydCBkZWZhdWx0IFNpbXBsZVNsaWRlcjtcbiIsIlwidXNlIHN0cmljdFwiO1xuLyohXG4gKiBDb3B5cmlnaHQgKGMpIDIwMTMtMjAxNSA5ZWxlbWVudHMgR21iSFxuICpcbiAqIFJlbGVhc2VkIHVuZGVyIEF0dHJpYnV0aW9uLU5vbkNvbW1lcmNpYWwgMy4wIFVucG9ydGVkXG4gKiBodHRwOi8vY3JlYXRpdmVjb21tb25zLm9yZy9saWNlbnNlcy9ieS1uYy8zLjAvXG4gKlxuICogRm9yIGNvbW1lcmNpYWwgdXNlLCBwbGVhc2UgY29udGFjdCB1cyBhdCBjb250YWN0QDllbGVtZW50cy5jb21cbiAqL1xuXG5pbXBvcnQgRXZlbnRFbWl0dGVyIGZyb20gXCIuLi8uLi8uLi9saWIvZXZlbnQtZW1pdHRlclwiO1xuaW1wb3J0IFV0aWxzIGZyb20gXCIuLi8uLi8uLi9saWIvdXRpbHNcIjtcbmltcG9ydCBfIGZyb20gXCJsb2Rhc2hcIjtcblxubGV0IGZzID0gcmVxdWlyZShcImZzXCIpO1xuXG5jbGFzcyBTbGlkZXIgZXh0ZW5kcyBFdmVudEVtaXR0ZXIge1xuICBjb25zdHJ1Y3RvciAoZWxlbWVudCwgb3B0aW9ucykge1xuICAgIHN1cGVyKCk7XG5cbiAgICB0aGlzLl9lbGVtZW50ID0gZWxlbWVudDtcbiAgICB0aGlzLl9vcHRpb25zID0gXy5kZWZhdWx0cyhvcHRpb25zLCB7XG4gICAgICBtaW5WYWx1ZTogMCxcbiAgICAgIG1heFZhbHVlOiAxXG4gICAgfSk7XG5cbiAgICB0aGlzLl92YWx1ZSA9IDA7XG5cbiAgICB0aGlzLl9zbGlkZXJFbGVtZW50ID0gdGhpcy5fZWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLmltZ2x5a2l0LXNsaWRlci1zbGlkZXJcIik7XG4gICAgdGhpcy5fZG90RWxlbWVudCA9IHRoaXMuX2VsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5pbWdseWtpdC1zbGlkZXItZG90XCIpO1xuICAgIHRoaXMuX2ZpbGxFbGVtZW50ID0gdGhpcy5fZWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLmltZ2x5a2l0LXNsaWRlci1maWxsXCIpO1xuXG4gICAgLy8gTW91c2UgZXZlbnQgY2FsbGJhY2tzIGJvdW5kIHRvIGNsYXNzIGNvbnRleHRcbiAgICB0aGlzLl9vbk1vdXNlRG93biA9IHRoaXMuX29uTW91c2VEb3duLmJpbmQodGhpcyk7XG4gICAgdGhpcy5fb25Nb3VzZU1vdmUgPSB0aGlzLl9vbk1vdXNlTW92ZS5iaW5kKHRoaXMpO1xuICAgIHRoaXMuX29uTW91c2VVcCA9IHRoaXMuX29uTW91c2VVcC5iaW5kKHRoaXMpO1xuXG4gICAgdGhpcy5faGFuZGxlRG90KCk7XG4gIH1cblxuICAvKipcbiAgICogVGhlIHBhcnRpYWwgdGVtcGxhdGUgc3RyaW5nXG4gICAqIEB0eXBlIHtTdHJpbmd9XG4gICAqL1xuICBzdGF0aWMgZ2V0IHRlbXBsYXRlICgpIHtcbiAgICByZXR1cm4gZnMucmVhZEZpbGVTeW5jKF9fZGlybmFtZSArIFwiLy4uLy4uLy4uL3RlbXBsYXRlcy9uaWdodC9nZW5lcmljcy9zbGlkZXJfY29udHJvbC5qc3RcIiwgXCJ1dGYtOFwiKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBTZXRzIHRoZSBnaXZlbiB2YWx1ZVxuICAgKiBAcGFyYW0ge051bWJlcn0gdmFsdWVcbiAgICovXG4gIHNldFZhbHVlICh2YWx1ZSkge1xuICAgIHRoaXMuX3ZhbHVlID0gdmFsdWU7XG5cbiAgICBsZXQgeyBtYXhWYWx1ZSwgbWluVmFsdWUgfSA9IHRoaXMuX29wdGlvbnM7XG5cbiAgICAvLyBDYWxjdWxhdGUgdGhlIFggcG9zaXRpb25cbiAgICBsZXQgdmFsdWVSYW5nZSA9IG1heFZhbHVlIC0gbWluVmFsdWU7XG4gICAgbGV0IHBlcmNlbnRhZ2UgPSAodmFsdWUgLSBtaW5WYWx1ZSkgLyB2YWx1ZVJhbmdlO1xuICAgIGxldCBzbGlkZXJXaWR0aCA9IHRoaXMuX3NsaWRlckVsZW1lbnQub2Zmc2V0V2lkdGg7XG4gICAgdGhpcy5fc2V0WChzbGlkZXJXaWR0aCAqIHBlcmNlbnRhZ2UpO1xuICB9XG5cbiAgLyoqXG4gICAqIFNldHMgdGhlIHNsaWRlciBwb3NpdGlvbiB0byB0aGUgZ2l2ZW4gWCB2YWx1ZSBhbmQgcmVzaXplc1xuICAgKiB0aGUgZmlsbCBkaXZcbiAgICogQHByaXZhdGVcbiAgICovXG4gIF9zZXRYICh4KSB7XG4gICAgdGhpcy5fZG90RWxlbWVudC5zdHlsZS5sZWZ0ID0gYCR7eH1weGA7XG5cbiAgICAvLyBYIHBvc2l0aW9uIHJlbGF0aXZlIHRvIGNlbnRlciB0byBzaW1wbGlmeSBjYWxjdWxhdGlvbnNcbiAgICBsZXQgaGFsZlNsaWRlcldpZHRoID0gdGhpcy5fc2xpZGVyRWxlbWVudC5vZmZzZXRXaWR0aCAvIDI7XG4gICAgbGV0IHJlbGF0aXZlWCA9IHggLSBoYWxmU2xpZGVyV2lkdGg7XG5cbiAgICAvLyBVcGRhdGUgc3R5bGVcbiAgICB0aGlzLl9maWxsRWxlbWVudC5zdHlsZS53aWR0aCA9IGAke01hdGguYWJzKHJlbGF0aXZlWCl9cHhgO1xuICAgIGlmIChyZWxhdGl2ZVggPCAwKSB7XG4gICAgICB0aGlzLl9maWxsRWxlbWVudC5zdHlsZS5sZWZ0ID0gaGFsZlNsaWRlcldpZHRoIC0gTWF0aC5hYnMocmVsYXRpdmVYKSArIFwicHhcIjtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5fZmlsbEVsZW1lbnQuc3R5bGUubGVmdCA9IGhhbGZTbGlkZXJXaWR0aCArIFwicHhcIjtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogSGFuZGxlcyB0aGUgZG90IGRyYWdnaW5nXG4gICAqIEBwcml2YXRlXG4gICAqL1xuICBfaGFuZGxlRG90ICgpIHtcbiAgICB0aGlzLl9kb3RFbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJtb3VzZWRvd25cIiwgdGhpcy5fb25Nb3VzZURvd24pO1xuICAgIHRoaXMuX2RvdEVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcInRvdWNoc3RhcnRcIiwgdGhpcy5fb25Nb3VzZURvd24pO1xuICB9XG5cbiAgLyoqXG4gICAqIEdldHMgY2FsbGVkIHdoZW4gdGhlIHVzZXIgcHJlc3NlcyBhIG1vdXNlIGJ1dHRvbiBvbiB0aGUgc2xpZGVyIGRvdFxuICAgKiBAcHJpdmF0ZVxuICAgKi9cbiAgX29uTW91c2VEb3duIChlKSB7XG4gICAgaWYgKGUudHlwZSA9PT0gXCJtb3VzZWRvd25cIiAmJiBlLmJ1dHRvbiAhPT0gMCkgcmV0dXJuO1xuICAgIGUucHJldmVudERlZmF1bHQoKTtcblxuICAgIGxldCBtb3VzZVBvc2l0aW9uID0gVXRpbHMuZ2V0RXZlbnRQb3NpdGlvbihlKTtcblxuICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJtb3VzZW1vdmVcIiwgdGhpcy5fb25Nb3VzZU1vdmUpO1xuICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJ0b3VjaG1vdmVcIiwgdGhpcy5fb25Nb3VzZU1vdmUpO1xuXG4gICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcIm1vdXNldXBcIiwgdGhpcy5fb25Nb3VzZVVwKTtcbiAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKFwidG91Y2hlbmRcIiwgdGhpcy5fb25Nb3VzZVVwKTtcblxuICAgIC8vIFJlbWVtYmVyIGluaXRpYWwgcG9zaXRpb25cbiAgICBsZXQgZG90UG9zaXRpb24gPSB0aGlzLl9kb3RFbGVtZW50LmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpO1xuICAgIGxldCBzbGlkZXJQb3NpdGlvbiA9IHRoaXMuX3NsaWRlckVsZW1lbnQuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7XG5cbiAgICB0aGlzLl9pbml0aWFsU2xpZGVyWCA9IGRvdFBvc2l0aW9uLmxlZnQgLSBzbGlkZXJQb3NpdGlvbi5sZWZ0O1xuICAgIHRoaXMuX2luaXRpYWxNb3VzZVBvc2l0aW9uID0gbW91c2VQb3NpdGlvbjtcbiAgfVxuXG4gIC8qKlxuICAgKiBHZXRzIGNhbGxlZCB3aGVuIHRoZSB1c2VyIGRyYWdzIHRoZSBtb3VzZVxuICAgKiBAcHJpdmF0ZVxuICAgKi9cbiAgX29uTW91c2VNb3ZlIChlKSB7XG4gICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuXG4gICAgbGV0IG1vdXNlUG9zaXRpb24gPSBVdGlscy5nZXRFdmVudFBvc2l0aW9uKGUpO1xuICAgIGxldCBtb3VzZURpZmYgPSBtb3VzZVBvc2l0aW9uLnN1YnRyYWN0KHRoaXMuX2luaXRpYWxNb3VzZVBvc2l0aW9uKTtcblxuICAgIC8vIEFkZCBoYWxmIHdpZHRoIG9mIHRoZSBkb3QgZm9yIG5lZ2F0aXZlIG1hcmdpbiBjb21wZW5zYXRpb25cbiAgICBsZXQgaGFsZkRvdFdpZHRoID0gdGhpcy5fZG90RWxlbWVudC5vZmZzZXRXaWR0aCAqIDAuNTtcbiAgICBsZXQgbmV3U2xpZGVyWCA9IHRoaXMuX2luaXRpYWxTbGlkZXJYICsgbW91c2VEaWZmLnggKyBoYWxmRG90V2lkdGg7XG5cbiAgICAvLyBYIGJvdW5kYXJpZXNcbiAgICBsZXQgc2xpZGVyV2lkdGggPSB0aGlzLl9zbGlkZXJFbGVtZW50Lm9mZnNldFdpZHRoO1xuICAgIG5ld1NsaWRlclggPSBNYXRoLm1heCgwLCBNYXRoLm1pbihuZXdTbGlkZXJYLCBzbGlkZXJXaWR0aCkpO1xuXG4gICAgdGhpcy5fc2V0WChuZXdTbGlkZXJYKTtcblxuICAgIC8vIENhbGN1bGF0ZSB0aGUgbmV3IHZhbHVlXG4gICAgbGV0IHsgbWluVmFsdWUsIG1heFZhbHVlIH0gPSB0aGlzLl9vcHRpb25zO1xuICAgIGxldCBwZXJjZW50YWdlID0gbmV3U2xpZGVyWCAvIHNsaWRlcldpZHRoO1xuICAgIGxldCB2YWx1ZSA9IG1pblZhbHVlICsgKG1heFZhbHVlIC0gbWluVmFsdWUpICogcGVyY2VudGFnZTtcbiAgICB0aGlzLmVtaXQoXCJ1cGRhdGVcIiwgdmFsdWUpO1xuICB9XG5cbiAgLyoqXG4gICAqIEdldHMgY2FsbGVkIHdoZW4gdGhlIHVzZXIgZG9lcyBub3QgcHJlc3MgdGhlIG1vdXNlIGJ1dHRvbiBhbnltb3JlXG4gICAqIEBwcml2YXRlXG4gICAqL1xuICBfb25Nb3VzZVVwICgpIHtcbiAgICBkb2N1bWVudC5yZW1vdmVFdmVudExpc3RlbmVyKFwibW91c2Vtb3ZlXCIsIHRoaXMuX29uTW91c2VNb3ZlKTtcbiAgICBkb2N1bWVudC5yZW1vdmVFdmVudExpc3RlbmVyKFwidG91Y2htb3ZlXCIsIHRoaXMuX29uTW91c2VNb3ZlKTtcblxuICAgIGRvY3VtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJtb3VzZXVwXCIsIHRoaXMuX29uTW91c2VVcCk7XG4gICAgZG9jdW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcihcInRvdWNoZW5kXCIsIHRoaXMuX29uTW91c2VVcCk7XG4gIH1cbn1cblxuZXhwb3J0IGRlZmF1bHQgU2xpZGVyO1xuIiwiXCJ1c2Ugc3RyaWN0XCI7XG4vKiFcbiAqIENvcHlyaWdodCAoYykgMjAxMy0yMDE1IDllbGVtZW50cyBHbWJIXG4gKlxuICogUmVsZWFzZWQgdW5kZXIgQXR0cmlidXRpb24tTm9uQ29tbWVyY2lhbCAzLjAgVW5wb3J0ZWRcbiAqIGh0dHA6Ly9jcmVhdGl2ZWNvbW1vbnMub3JnL2xpY2Vuc2VzL2J5LW5jLzMuMC9cbiAqXG4gKiBGb3IgY29tbWVyY2lhbCB1c2UsIHBsZWFzZSBjb250YWN0IHVzIGF0IGNvbnRhY3RAOWVsZW1lbnRzLmNvbVxuICovXG5cbmltcG9ydCBFdmVudEVtaXR0ZXIgZnJvbSBcIi4uLy4uLy4uL2xpYi9ldmVudC1lbWl0dGVyXCI7XG5cbmNsYXNzIFRvcENvbnRyb2xzIGV4dGVuZHMgRXZlbnRFbWl0dGVyIHtcbiAgY29uc3RydWN0b3IgKGtpdCwgdWkpIHtcbiAgICBzdXBlcigpO1xuXG4gICAgdGhpcy5fa2l0ID0ga2l0O1xuICAgIHRoaXMuX3VpID0gdWk7XG4gICAgdGhpcy5fY2FudmFzID0gdGhpcy5fdWkuY2FudmFzO1xuICB9XG5cbiAgLyoqXG4gICAqIEluaXRpYWxpemVzIHRoZSBjb250cm9sc1xuICAgKi9cbiAgcnVuICgpIHtcbiAgICBsZXQgeyBjb250YWluZXIgfSA9IHRoaXMuX3VpO1xuXG4gICAgdGhpcy5fcmlnaHRDb250cm9scyA9IGNvbnRhaW5lci5xdWVyeVNlbGVjdG9yKFwiLmltZ2x5a2l0LXRvcC1jb250cm9scy1yaWdodFwiKTtcbiAgICB0aGlzLl9sZWZ0Q29udHJvbHMgPSBjb250YWluZXIucXVlcnlTZWxlY3RvcihcIi5pbWdseWtpdC10b3AtY29udHJvbHMtbGVmdFwiKTtcblxuICAgIHRoaXMuX3VuZG9CdXR0b24gPSBjb250YWluZXIucXVlcnlTZWxlY3RvcihcIi5pbWdseWtpdC11bmRvXCIpO1xuICAgIHRoaXMuX3pvb21JbiA9IGNvbnRhaW5lci5xdWVyeVNlbGVjdG9yKFwiLmltZ2x5a2l0LXpvb20taW5cIik7XG4gICAgdGhpcy5fem9vbU91dCA9IGNvbnRhaW5lci5xdWVyeVNlbGVjdG9yKFwiLmltZ2x5a2l0LXpvb20tb3V0XCIpO1xuICAgIHRoaXMuX3pvb21MZXZlbCA9IGNvbnRhaW5lci5xdWVyeVNlbGVjdG9yKFwiLmltZ2x5a2l0LXpvb20tbGV2ZWwtbnVtXCIpO1xuICAgIHRoaXMuX2hhbmRsZVpvb20oKTtcbiAgICB0aGlzLl9oYW5kbGVVbmRvKCk7XG4gIH1cblxuICAvKipcbiAgICogSGFuZGxlcyB0aGUgem9vbSBjb250cm9sc1xuICAgKiBAcHJpdmF0ZVxuICAgKi9cbiAgX2hhbmRsZVpvb20gKCkge1xuICAgIHRoaXMuX3pvb21Jbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgdGhpcy5fb25ab29tSW5DbGljay5iaW5kKHRoaXMpKTtcbiAgICB0aGlzLl96b29tT3V0LmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCB0aGlzLl9vblpvb21PdXRDbGljay5iaW5kKHRoaXMpKTtcbiAgICB0aGlzLnVwZGF0ZVpvb21MZXZlbCgpO1xuICB9XG5cbiAgLyoqXG4gICAqIEhhbmRsZXMgdGhlIHVuZG8gY29udHJvbFxuICAgKiBAcHJpdmF0ZVxuICAgKi9cbiAgX2hhbmRsZVVuZG8gKCkge1xuICAgIHRoaXMuX3VuZG9CdXR0b24uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIHRoaXMuX3VuZG8uYmluZCh0aGlzKSk7XG4gICAgdGhpcy5fdW5kbygpO1xuICB9XG5cbiAgLyoqXG4gICAqIEdldHMgY2FsbGVkIHdoZW4gdGhlIHVzZXIgY2xpY2tzIHRoZSB1bmRvIGJ1dHRvblxuICAgKiBAcHJpdmF0ZVxuICAgKi9cbiAgX3VuZG8gKCkge1xuICAgIHRoaXMuZW1pdChcInVuZG9cIik7XG4gIH1cblxuICAvKipcbiAgICogVXBkYXRlcyB0aGUgdW5kbyBidXR0b24gYWN0aXZlIHN0YXRlXG4gICAqL1xuICB1cGRhdGVVbmRvQnV0dG9uICgpIHtcbiAgICBsZXQgeyBoaXN0b3J5IH0gPSB0aGlzLl91aTtcbiAgICBpZiAoaGlzdG9yeS5sZW5ndGggPT09IDApIHtcbiAgICAgIHRoaXMuX2xlZnRDb250cm9scy5zdHlsZS5kaXNwbGF5ID0gXCJub25lXCI7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMuX2xlZnRDb250cm9scy5zdHlsZS5kaXNwbGF5ID0gXCJibG9ja1wiO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBHZXRzIGNhbGxlZCB3aGVuIHRoZSB1c2VyIGNsaWNrZWQgdGhlIHpvb20gaW4gYnV0dG9uXG4gICAqIEBwYXJhbSB7RXZlbnR9XG4gICAqIEBwcml2YXRlXG4gICAqL1xuICBfb25ab29tSW5DbGljayAoZSkge1xuICAgIGUucHJldmVudERlZmF1bHQoKTtcblxuICAgIHRoaXMuZW1pdChcInpvb20taW5cIik7XG4gICAgdGhpcy51cGRhdGVab29tTGV2ZWwoKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBHZXRzIGNhbGxlZCB3aGVuIHRoZSB1c2VyIGNsaWNrZWQgdGhlIHpvb20gb3V0IGJ1dHRvblxuICAgKiBAcGFyYW0ge0V2ZW50fVxuICAgKiBAcHJpdmF0ZVxuICAgKi9cbiAgX29uWm9vbU91dENsaWNrIChlKSB7XG4gICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuXG4gICAgdGhpcy5lbWl0KFwiem9vbS1vdXRcIik7XG4gICAgdGhpcy51cGRhdGVab29tTGV2ZWwoKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBTaG93cyB0aGUgem9vbSBjb250cm9sXG4gICAqL1xuICBzaG93Wm9vbSAoKSB7XG4gICAgdGhpcy5fcmlnaHRDb250cm9scy5zdHlsZS5kaXNwbGF5ID0gXCJibG9ja1wiO1xuICB9XG5cbiAgLyoqXG4gICAqIEhpZGVzIHRoZSB6b29tIGNvbnRyb2xcbiAgICovXG4gIGhpZGVab29tICgpIHtcbiAgICB0aGlzLl9yaWdodENvbnRyb2xzLnN0eWxlLmRpc3BsYXkgPSBcIm5vbmVcIjtcbiAgfVxuXG4gIC8qKlxuICAgKiBVcGRhdGVzIHRoZSB6b29tIGxldmVsIGRpc3BsYXlcbiAgICovXG4gIHVwZGF0ZVpvb21MZXZlbCAoKSB7XG4gICAgbGV0IHsgem9vbUxldmVsIH0gPSB0aGlzLl9jYW52YXM7XG4gICAgdGhpcy5fem9vbUxldmVsLmlubmVySFRNTCA9IE1hdGgucm91bmQoem9vbUxldmVsICogMTAwKTtcbiAgfVxufVxuXG5leHBvcnQgZGVmYXVsdCBUb3BDb250cm9scztcbiIsIlwidXNlIHN0cmljdFwiO1xuLyohXG4gKiBDb3B5cmlnaHQgKGMpIDIwMTMtMjAxNSA5ZWxlbWVudHMgR21iSFxuICpcbiAqIFJlbGVhc2VkIHVuZGVyIEF0dHJpYnV0aW9uLU5vbkNvbW1lcmNpYWwgMy4wIFVucG9ydGVkXG4gKiBodHRwOi8vY3JlYXRpdmVjb21tb25zLm9yZy9saWNlbnNlcy9ieS1uYy8zLjAvXG4gKlxuICogRm9yIGNvbW1lcmNpYWwgdXNlLCBwbGVhc2UgY29udGFjdCB1cyBhdCBjb250YWN0QDllbGVtZW50cy5jb21cbiAqL1xuXG5sZXQgZnMgPSByZXF1aXJlKFwiZnNcIik7XG5pbXBvcnQgU3ltYm9sIGZyb20gXCJlczYtc3ltYm9sXCI7XG5pbXBvcnQgVUkgZnJvbSBcIi4uL2Jhc2UvdWlcIjtcbmltcG9ydCBDYW52YXMgZnJvbSBcIi4vbGliL2NhbnZhc1wiO1xuaW1wb3J0IFRvcENvbnRyb2xzIGZyb20gXCIuL2xpYi90b3AtY29udHJvbHNcIjtcblxuY2xhc3MgTmlnaHRVSSBleHRlbmRzIFVJIHtcbiAgY29uc3RydWN0b3IgKC4uLmFyZ3MpIHtcbiAgICB0aGlzLl9vcGVyYXRpb25zTWFwID0ge307XG4gICAgdGhpcy5fdGVtcGxhdGUgPSBmcy5yZWFkRmlsZVN5bmMoX19kaXJuYW1lICsgXCIvLi4vLi4vdGVtcGxhdGVzL25pZ2h0L3RlbXBsYXRlLmpzdFwiLCBcInV0Zi04XCIpO1xuICAgIHRoaXMuX3JlZ2lzdGVyZWRDb250cm9scyA9IHt9O1xuICAgIHRoaXMuX2hpc3RvcnkgPSBbXTtcblxuICAgIC8vIFRoZSBgTmlnaHRgIFVJIGhhcyBhIGZpeGVkIG9wZXJhdGlvbiBvcmRlclxuICAgIHRoaXMuX3ByZWZlcnJlZE9wZXJhdGlvbk9yZGVyID0gW1xuICAgICAgLy8gRmlyc3QsIGFsbCBvcGVyYXRpb25zIHRoYXQgYWZmZWN0IHRoZSBpbWFnZSBkaW1lbnNpb25zXG4gICAgICBcInJvdGF0aW9uXCIsXG4gICAgICBcImNyb3BcIixcbiAgICAgIFwiZmxpcFwiLFxuXG4gICAgICAvLyBUaGVuIGNvbG9yIG9wZXJhdGlvbnMgKGZpcnN0IGZpbHRlcnMsIHRoZW4gZmluZS10dW5pbmcpXG4gICAgICBcImZpbHRlcnNcIixcbiAgICAgIFwiY29udHJhc3RcIixcbiAgICAgIFwiYnJpZ2h0bmVzc1wiLFxuICAgICAgXCJzYXR1cmF0aW9uXCIsXG5cbiAgICAgIC8vIFRoZW4gcG9zdC1wcm9jZXNzaW5nXG4gICAgICBcInJhZGlhbC1ibHVyXCIsXG4gICAgICBcInRpbHQtc2hpZnRcIixcbiAgICAgIFwiZnJhbWVzXCIsXG4gICAgICBcInN0aWNrZXJzXCIsXG4gICAgICBcInRleHRcIlxuICAgIF07XG5cbiAgICB0aGlzLl9wYXVzZWQgPSBmYWxzZTtcblxuICAgIHN1cGVyKC4uLmFyZ3MpO1xuICB9XG5cbiAgcnVuICgpIHtcbiAgICB0aGlzLl9yZWdpc3RlckNvbnRyb2xzKCk7XG5cbiAgICBzdXBlci5ydW4oKTtcblxuICAgIGxldCB7IGNvbnRhaW5lciB9ID0gdGhpcy5fb3B0aW9ucztcblxuICAgIHRoaXMuX2NvbnRyb2xzQ29udGFpbmVyID0gY29udGFpbmVyLnF1ZXJ5U2VsZWN0b3IoXCIuaW1nbHlraXQtY29udHJvbHNcIik7XG4gICAgdGhpcy5fY2FudmFzQ29udHJvbHNDb250YWluZXIgPSBjb250YWluZXIucXVlcnlTZWxlY3RvcihcIi5pbWdseWtpdC1jYW52YXMtY29udHJvbHNcIik7XG4gICAgdGhpcy5fb3ZlcnZpZXdDb250cm9sc0NvbnRhaW5lciA9IGNvbnRhaW5lci5xdWVyeVNlbGVjdG9yKFwiLmltZ2x5a2l0LWNvbnRyb2xzLW92ZXJ2aWV3XCIpO1xuXG4gICAgdGhpcy5faW5pdE9wZXJhdGlvbnMoKTtcbiAgICB0aGlzLl9oYW5kbGVPdmVydmlldygpO1xuXG4gICAgdGhpcy5faW5pdENhbnZhcygpO1xuICAgIHRoaXMuX2luaXRUb3BDb250cm9scygpO1xuICAgIHRoaXMuX2luaXRDb250cm9scygpO1xuICB9XG5cbiAgLyoqXG4gICAqIEluaXRpYWxpemVzIHRoZSB0b3AgY29udHJvbHNcbiAgICogQHByaXZhdGVcbiAgICovXG4gIF9pbml0VG9wQ29udHJvbHMgKCkge1xuICAgIHRoaXMuX3RvcENvbnRyb2xzID0gbmV3IFRvcENvbnRyb2xzKHRoaXMuX2tpdCwgdGhpcyk7XG4gICAgdGhpcy5fdG9wQ29udHJvbHMucnVuKCk7XG5cbiAgICB0aGlzLl90b3BDb250cm9scy5vbihcInVuZG9cIiwgKCkgPT4ge1xuICAgICAgdGhpcy51bmRvKCk7XG4gICAgfSk7XG5cbiAgICAvLyBQYXNzIHpvb20gaW4gZXZlbnRcbiAgICB0aGlzLl90b3BDb250cm9scy5vbihcInpvb20taW5cIiwgKCkgPT4ge1xuICAgICAgdGhpcy5fY2FudmFzLnpvb21JbigpXG4gICAgICAgIC50aGVuKCgpID0+IHtcbiAgICAgICAgICBpZiAodGhpcy5fY3VycmVudENvbnRyb2wpIHtcbiAgICAgICAgICAgIHRoaXMuX2N1cnJlbnRDb250cm9sLm9uWm9vbSgpO1xuICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgfSk7XG5cbiAgICAvLyBQYXNzIHpvb20gb3V0IGV2ZW50XG4gICAgdGhpcy5fdG9wQ29udHJvbHMub24oXCJ6b29tLW91dFwiLCAoKSA9PiB7XG4gICAgICB0aGlzLl9jYW52YXMuem9vbU91dCgpXG4gICAgICAgIC50aGVuKCgpID0+IHtcbiAgICAgICAgICBpZiAodGhpcy5fY3VycmVudENvbnRyb2wpIHtcbiAgICAgICAgICAgIHRoaXMuX2N1cnJlbnRDb250cm9sLm9uWm9vbSgpO1xuICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgfSk7XG4gIH1cblxuICAvKipcbiAgICogSW5pdGl0aWFsaXplcyB0aGUgY2FudmFzXG4gICAqIEBwcml2YXRlXG4gICAqL1xuICBfaW5pdENhbnZhcyAoKSB7XG4gICAgdGhpcy5fY2FudmFzID0gbmV3IENhbnZhcyh0aGlzLl9raXQsIHRoaXMsIHRoaXMuX29wdGlvbnMpO1xuICAgIHRoaXMuX2NhbnZhcy5ydW4oKTtcbiAgICB0aGlzLl9jYW52YXMub24oXCJ6b29tXCIsICgpID0+IHtcbiAgICAgIHRoaXMuX3RvcENvbnRyb2xzLnVwZGF0ZVpvb21MZXZlbCgpO1xuICAgIH0pO1xuICB9XG5cbiAgLyoqXG4gICAqIFNlbGVjdHMgdGhlIGVuYWJsZWQgb3BlcmF0aW9uc1xuICAgKiBAcGFyYW0ge0ltZ2x5S2l0LlNlbGVjdG9yfVxuICAgKi9cbiAgc2VsZWN0T3BlcmF0aW9ucyAoc2VsZWN0b3IpIHtcbiAgICBzdXBlci5zZWxlY3RPcGVyYXRpb25zKHNlbGVjdG9yKTtcblxuICAgIHRoaXMuX2luaXRPcGVyYXRpb25zKCk7XG4gIH1cblxuICAvKipcbiAgICogSW5pdGlhbGl6ZXMgYWxsIG9wZXJhdGlvbnNcbiAgICogQHByaXZhdGVcbiAgICovXG4gIF9pbml0T3BlcmF0aW9ucyAoKSB7XG4gICAgbGV0IHsgb3BlcmF0aW9uc1N0YWNrLCByZWdpc3RlcmVkT3BlcmF0aW9ucyB9ID0gdGhpcy5fa2l0O1xuICAgIG9wZXJhdGlvbnNTdGFjay5zcGxpY2UoMCwgb3BlcmF0aW9uc1N0YWNrLmxlbmd0aCk7IC8vIENsZWFyIHRoZSBhcnJheSBpbi1wbGFjZVxuICAgIGZvciAobGV0IG9wZXJhdGlvbklkZW50aWZpZXIgb2YgdGhpcy5fcHJlZmVycmVkT3BlcmF0aW9uT3JkZXIpIHtcbiAgICAgIGlmICghdGhpcy5pc09wZXJhdGlvblNlbGVjdGVkKG9wZXJhdGlvbklkZW50aWZpZXIpKSB7XG4gICAgICAgIGNvbnRpbnVlO1xuICAgICAgfVxuXG4gICAgICBsZXQgT3BlcmF0aW9uID0gcmVnaXN0ZXJlZE9wZXJhdGlvbnNbb3BlcmF0aW9uSWRlbnRpZmllcl07XG4gICAgICBsZXQgb3BlcmF0aW9uSW5zdGFuY2UgPSBuZXcgT3BlcmF0aW9uKHRoaXMuX2tpdCk7XG5cbiAgICAgIC8vIFNraXAgcGVyIGRlZmF1bHRcbiAgICAgIC8vIFRoaXMgYWRkaXRpb25hbCBhdHRyaWJ1dGUgaXMgbm90IHBhcnQgb2YgdGhlIGltZy5seSBTREssXG4gICAgICAvLyB3ZSBvbmx5IHVzZSBpdCBmb3IgdGhlIE5pZ2h0IFVJIHRvIGNoZWNrIHdoZXRoZXIgYW4gb3BlcmF0aW9uXG4gICAgICAvLyBuZWVkcyB0byBiZSByZW5kZXJlZFxuICAgICAgb3BlcmF0aW9uSW5zdGFuY2UuaXNJZGVudGl0eSA9IHRydWU7XG5cbiAgICAgIG9wZXJhdGlvbkluc3RhbmNlLm9uKFwidXBkYXRlXCIsICgpID0+IHtcbiAgICAgICAgb3BlcmF0aW9uSW5zdGFuY2UuaXNJZGVudGl0eSA9IGZhbHNlO1xuICAgICAgfSk7XG5cbiAgICAgIHRoaXMuX29wZXJhdGlvbnNNYXBbb3BlcmF0aW9uSWRlbnRpZmllcl0gPSBvcGVyYXRpb25JbnN0YW5jZTtcbiAgICAgIG9wZXJhdGlvbnNTdGFjay5wdXNoKG9wZXJhdGlvbkluc3RhbmNlKTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogUmVnaXN0ZXJzIGFsbCBkZWZhdWx0IG9wZXJhdGlvbiBjb250cm9sc1xuICAgKiBAcHJpdmF0ZVxuICAgKi9cbiAgX3JlZ2lzdGVyQ29udHJvbHMgKCkge1xuICAgIHRoaXMucmVnaXN0ZXJDb250cm9sKFwiZmlsdGVyc1wiLCBcImZpbHRlcnNcIiwgcmVxdWlyZShcIi4vY29udHJvbHMvZmlsdGVyc1wiKSk7XG4gICAgdGhpcy5yZWdpc3RlckNvbnRyb2woXCJyb3RhdGlvblwiLCBcInJvdGF0aW9uXCIsIHJlcXVpcmUoXCIuL2NvbnRyb2xzL3JvdGF0aW9uXCIpKTtcbiAgICB0aGlzLnJlZ2lzdGVyQ29udHJvbChcImZsaXBcIiwgXCJmbGlwXCIsIHJlcXVpcmUoXCIuL2NvbnRyb2xzL2ZsaXBcIikpO1xuICAgIHRoaXMucmVnaXN0ZXJDb250cm9sKFwiYnJpZ2h0bmVzc1wiLCBcImJyaWdodG5lc3NcIiwgcmVxdWlyZShcIi4vY29udHJvbHMvYnJpZ2h0bmVzc1wiKSk7XG4gICAgdGhpcy5yZWdpc3RlckNvbnRyb2woXCJjb250cmFzdFwiLCBcImNvbnRyYXN0XCIsIHJlcXVpcmUoXCIuL2NvbnRyb2xzL2NvbnRyYXN0XCIpKTtcbiAgICB0aGlzLnJlZ2lzdGVyQ29udHJvbChcInNhdHVyYXRpb25cIiwgXCJzYXR1cmF0aW9uXCIsIHJlcXVpcmUoXCIuL2NvbnRyb2xzL3NhdHVyYXRpb25cIikpO1xuICAgIHRoaXMucmVnaXN0ZXJDb250cm9sKFwiY3JvcFwiLCBcImNyb3BcIiwgcmVxdWlyZShcIi4vY29udHJvbHMvY3JvcFwiKSk7XG4gICAgdGhpcy5yZWdpc3RlckNvbnRyb2woXCJyYWRpYWwtYmx1clwiLCBcInJhZGlhbC1ibHVyXCIsIHJlcXVpcmUoXCIuL2NvbnRyb2xzL3JhZGlhbC1ibHVyXCIpKTtcbiAgICB0aGlzLnJlZ2lzdGVyQ29udHJvbChcInRpbHQtc2hpZnRcIiwgXCJ0aWx0LXNoaWZ0XCIsIHJlcXVpcmUoXCIuL2NvbnRyb2xzL3RpbHQtc2hpZnRcIikpO1xuICAgIHRoaXMucmVnaXN0ZXJDb250cm9sKFwiZnJhbWVzXCIsIFwiZnJhbWVzXCIsIHJlcXVpcmUoXCIuL2NvbnRyb2xzL2ZyYW1lc1wiKSk7XG4gICAgdGhpcy5yZWdpc3RlckNvbnRyb2woXCJzdGlja2Vyc1wiLCBcInN0aWNrZXJzXCIsIHJlcXVpcmUoXCIuL2NvbnRyb2xzL3N0aWNrZXJzXCIpKTtcbiAgICB0aGlzLnJlZ2lzdGVyQ29udHJvbChcInRleHRcIiwgXCJ0ZXh0XCIsIHJlcXVpcmUoXCIuL2NvbnRyb2xzL3RleHRcIikpO1xuICB9XG5cbiAgLyoqXG4gICAqIEhhbmRsZXMgdGhlIG92ZXJ2aWV3IGJ1dHRvbiBjbGljayBldmVudHNcbiAgICogQHByaXZhdGVcbiAgICovXG4gIF9oYW5kbGVPdmVydmlldyAoKSB7XG4gICAgbGV0IGxpc3RJdGVtcyA9IHRoaXMuX292ZXJ2aWV3Q29udHJvbHNDb250YWluZXIucXVlcnlTZWxlY3RvckFsbChcIjpzY29wZSA+IHVsID4gbGlcIik7XG5cbiAgICAvLyBUdXJuIE5vZGVMaXN0IGludG8gYW4gQXJyYXlcbiAgICBsaXN0SXRlbXMgPSBBcnJheS5wcm90b3R5cGUuc2xpY2UuY2FsbChsaXN0SXRlbXMpO1xuXG4gICAgLy8gQWRkIGNsaWNrIGV2ZW50cyB0byBhbGwgaXRlbXNcbiAgICBmb3IgKGxldCBsaXN0SXRlbSBvZiBsaXN0SXRlbXMpIHtcbiAgICAgIGxldCB7IGlkZW50aWZpZXIgfSA9IGxpc3RJdGVtLmRhdGFzZXQ7XG4gICAgICBsaXN0SXRlbS5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xuICAgICAgICB0aGlzLl9vbk92ZXJ2aWV3QnV0dG9uQ2xpY2soaWRlbnRpZmllcik7XG4gICAgICB9KTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogR2V0cyBjYWxsZWQgd2hlbiBhbiBvdmVydmlldyBidXR0b24gaGFzIGJlZW4gY2xpY2tlZFxuICAgKiBAcHJpdmF0ZVxuICAgKi9cbiAgX29uT3ZlcnZpZXdCdXR0b25DbGljayAoaWRlbnRpZmllcikge1xuICAgIHRoaXMuX292ZXJ2aWV3Q29udHJvbHNDb250YWluZXIuc3R5bGUuZGlzcGxheSA9IFwibm9uZVwiO1xuXG4gICAgaWYgKHRoaXMuX2N1cnJlbnRDb250cm9sKSB7XG4gICAgICB0aGlzLl9jdXJyZW50Q29udHJvbC5sZWF2ZSgpO1xuICAgIH1cblxuICAgIHRoaXMuX2N1cnJlbnRDb250cm9sID0gdGhpcy5fcmVnaXN0ZXJlZENvbnRyb2xzW2lkZW50aWZpZXJdO1xuICAgIHRoaXMuX2N1cnJlbnRDb250cm9sLmVudGVyKCk7XG4gICAgdGhpcy5fY3VycmVudENvbnRyb2wub25jZShcImJhY2tcIiwgdGhpcy5fc3dpdGNoVG9PdmVydmlldy5iaW5kKHRoaXMpKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBTd2l0Y2hlcyBiYWNrIHRvIHRoZSBvdmVydmlldyBjb250cm9sc1xuICAgKiBAcHJpdmF0ZVxuICAgKi9cbiAgX3N3aXRjaFRvT3ZlcnZpZXcgKCkge1xuICAgIGlmICh0aGlzLl9jdXJyZW50Q29udHJvbCkge1xuICAgICAgdGhpcy5fY3VycmVudENvbnRyb2wubGVhdmUoKTtcbiAgICB9XG5cbiAgICB0aGlzLl9jdXJyZW50Q29udHJvbCA9IG51bGw7XG4gICAgdGhpcy5fb3ZlcnZpZXdDb250cm9sc0NvbnRhaW5lci5zdHlsZS5kaXNwbGF5ID0gXCJcIjtcbiAgfVxuXG4gIC8qKlxuICAgKiBSZWdpc3RlcnMgdGhlIGNvbnRyb2xzIGZvciBhbiBvcGVyYXRpb25cbiAgICogQHBhcmFtIHtTdHJpbmd9IGlkZW50aWZpZXJcbiAgICogQHBhcmFtIHtTdHJpbmd9IG9wZXJhdGlvbklkZW50aWZpZXJcbiAgICogQHBhcmFtIHtDb250cm9sfSBDb250cm9sQ2xhc3NcbiAgICovXG4gIHJlZ2lzdGVyQ29udHJvbCAoaWRlbnRpZmllciwgb3BlcmF0aW9uSWRlbnRpZmllciwgQ29udHJvbENsYXNzKSB7XG4gICAgaWYgKCF0aGlzLmlzT3BlcmF0aW9uU2VsZWN0ZWQob3BlcmF0aW9uSWRlbnRpZmllcikpIHJldHVybjtcblxuICAgIGxldCBpbnN0YW5jZSA9IG5ldyBDb250cm9sQ2xhc3ModGhpcy5fa2l0LCB0aGlzKTtcbiAgICB0aGlzLl9yZWdpc3RlcmVkQ29udHJvbHNbaWRlbnRpZmllcl0gPSBpbnN0YW5jZTtcbiAgfVxuXG4gIC8qKlxuICAgKiBJbml0aWFsaXplcyB0aGUgcmVnaXN0ZXJlZCBjb250cm9sc1xuICAgKiBAcHJpdmF0ZVxuICAgKi9cbiAgX2luaXRDb250cm9scyAoKSB7XG4gICAgZm9yIChsZXQgaWRlbnRpZmllciBpbiB0aGlzLl9yZWdpc3RlcmVkQ29udHJvbHMpIHtcbiAgICAgIGxldCBjb250cm9sID0gdGhpcy5fcmVnaXN0ZXJlZENvbnRyb2xzW2lkZW50aWZpZXJdO1xuICAgICAgY29udHJvbC5zZXRDb250YWluZXJzKHRoaXMuX2NvbnRyb2xzQ29udGFpbmVyLCB0aGlzLl9jYW52YXNDb250cm9sc0NvbnRhaW5lcik7XG4gICAgICBjb250cm9sLmluaXQoKTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogUmUtcmVuZGVycyB0aGUgY2FudmFzXG4gICAqL1xuICByZW5kZXIgKCkge1xuICAgIHRoaXMuX2NhbnZhcy5yZW5kZXIoKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBBbiBvYmplY3QgY29udGFpbmluZyBhbGwgYWN0aXZlIG9wZXJhdGlvbnNcbiAgICogQHR5cGUge09iamVjdC48U3RyaW5nLE9wZXJhdGlvbj59XG4gICAqL1xuICBnZXQgb3BlcmF0aW9ucyAoKSB7XG4gICAgcmV0dXJuIHRoaXMuX29wZXJhdGlvbnNNYXA7XG4gIH1cblxuICAvKipcbiAgICogQW4gb2JqZWN0IGNvbnRhaW5pbmcgYWxsIHJlZ2lzdGVyZWQgY29udHJvbHNcbiAgICogQHR5cGUge09iamVjdC48U3RyaW5nLENvbnRyb2w+fVxuICAgKi9cbiAgZ2V0IGNvbnRyb2xzICgpIHtcbiAgICByZXR1cm4gdGhpcy5fcmVnaXN0ZXJlZENvbnRyb2xzO1xuICB9XG5cbiAgLyoqXG4gICAqIFRoZSBkYXRhIHRoYXQgaXMgcGFzc2VkIHRvIHRoZSB0ZW1wbGF0ZSByZW5kZXJlclxuICAgKiBAdHlwZSB7T2JqZWN0fVxuICAgKi9cbiAgZ2V0IGNvbnRleHQgKCkge1xuICAgIGxldCBjb250ZXh0ID0gc3VwZXIuY29udGV4dDtcbiAgICBjb250ZXh0LmNvbnRyb2xzID0gdGhpcy5fcmVnaXN0ZXJlZENvbnRyb2xzO1xuICAgIHJldHVybiBjb250ZXh0O1xuICB9XG5cbiAgLyoqXG4gICAqIFBhdXNlcyB0aGUgVUkuIE9wZXJhdGlvbiB1cGRhdGVzIHdpbGwgbm90IGNhdXNlIGEgcmUtcmVuZGVyaW5nXG4gICAqIG9mIHRoZSBjYW52YXMuXG4gICAqL1xuICBwYXVzZSAoKSB7XG4gICAgdGhpcy5fcGF1c2VkID0gdHJ1ZTtcbiAgfVxuXG4gIC8qKlxuICAgKiBSZXN1bWVzIHRoZSBVSSBhbmQgcmUtcmVuZGVycyB0aGUgY2FudmFzXG4gICAqIEBwYXJhbSB7Qm9vbGVhbn0gcmVyZW5kZXIgPSB0cnVlXG4gICAqL1xuICByZXN1bWUgKHJlcmVuZGVyPXRydWUpIHtcbiAgICB0aGlzLl9wYXVzZWQgPSBmYWxzZTtcbiAgICBpZiAocmVyZW5kZXIpIHtcbiAgICAgIHRoaXMucmVuZGVyKCk7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIEFkZHMgdGhlIGdpdmVuIG9wZXJhdGlvbiBhbmQgb3B0aW9ucyB0byB0aGUgaGlzdG9yeSBzdGFja1xuICAgKiBAcGFyYW0ge09wZXJhdGlvbn0gb3BlcmF0aW9uXG4gICAqIEBwYXJhbSB7T2JqZWN0LjxTdHJpbmcsICo+fSBvcHRpb25zXG4gICAqIEBwYXJhbSB7Qm9vbGVhbn0gaWRlbnRpdHlcbiAgICovXG4gIGFkZEhpc3RvcnkgKG9wZXJhdGlvbiwgb3B0aW9ucywgaWRlbnRpdHkpIHtcbiAgICB0aGlzLl9oaXN0b3J5LnB1c2goeyBvcGVyYXRpb24sIG9wdGlvbnMsIGlkZW50aXR5IH0pO1xuICAgIHRoaXMuX3RvcENvbnRyb2xzLnVwZGF0ZVVuZG9CdXR0b24oKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBIaWRlcyB0aGUgem9vbSBjb250cm9sXG4gICAqL1xuICBoaWRlWm9vbSAoKSB7XG4gICAgdGhpcy5fdG9wQ29udHJvbHMuaGlkZVpvb20oKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBIaWRlcyB0aGUgem9vbSBjb250cm9sXG4gICAqL1xuICBzaG93Wm9vbSAoKSB7XG4gICAgdGhpcy5fdG9wQ29udHJvbHMuc2hvd1pvb20oKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBUYWtlcyB0aGUgbGFzdCBoaXN0b3J5IGl0ZW0gYW5kIGFwcGxpZXMgaXRzIG9wdGlvbnNcbiAgICovXG4gIHVuZG8gKCkge1xuICAgIGxldCBsYXN0SXRlbSA9IHRoaXMuX2hpc3RvcnkucG9wKCk7XG4gICAgaWYgKGxhc3RJdGVtKSB7XG4gICAgICBsZXQgeyBvcGVyYXRpb24sIGlkZW50aXR5LCBvcHRpb25zIH0gPSBsYXN0SXRlbTtcbiAgICAgIGxldCBvcGVyYXRpb25JbnN0YW5jZSA9IHRoaXMub3BlcmF0aW9uc1tvcGVyYXRpb24uaWRlbnRpZmllcl07XG4gICAgICBpZiAoIWlkZW50aXR5KSB7XG4gICAgICAgIG9wZXJhdGlvbkluc3RhbmNlLnNldChvcHRpb25zKTtcbiAgICAgIH1cbiAgICAgIG9wZXJhdGlvbkluc3RhbmNlLmlzSWRlbnRpdHkgPSBpZGVudGl0eTtcblxuICAgICAgdGhpcy5jYW52YXMuem9vbVRvRml0KHRydWUpO1xuICAgIH1cbiAgICB0aGlzLl90b3BDb250cm9scy51cGRhdGVVbmRvQnV0dG9uKCk7XG4gIH1cblxuICAvKipcbiAgICogVGhlIHVuZG8gaGlzdG9yeVxuICAgKiBAdHlwZSB7QXJyYXkuPE9iamVjdD59XG4gICAqL1xuICBnZXQgaGlzdG9yeSAoKSB7XG4gICAgcmV0dXJuIHRoaXMuX2hpc3Rvcnk7XG4gIH1cbn1cblxuZXhwb3J0IGRlZmF1bHQgTmlnaHRVSTtcbiIsIlwidXNlIHN0cmljdFwiO1xuLypcblxuU3RhY2tCbHVyIC0gYSBmYXN0IGFsbW9zdCBHYXVzc2lhbiBCbHVyIEZvciBDYW52YXNcblxuVmVyc2lvbjogIDAuNVxuQXV0aG9yOiAgIE1hcmlvIEtsaW5nZW1hbm5cbkNvbnRhY3Q6ICBtYXJpb0BxdWFzaW1vbmRvLmNvbVxuV2Vic2l0ZTogIGh0dHA6Ly93d3cucXVhc2ltb25kby5jb20vU3RhY2tCbHVyRm9yQ2FudmFzXG5Ud2l0dGVyOiAgQHF1YXNpbW9uZG9cblxuSW4gY2FzZSB5b3UgZmluZCB0aGlzIGNsYXNzIHVzZWZ1bCAtIGVzcGVjaWFsbHkgaW4gY29tbWVyY2lhbCBwcm9qZWN0cyAtXG5JIGFtIG5vdCB0b3RhbGx5IHVuaGFwcHkgZm9yIGEgc21hbGwgZG9uYXRpb24gdG8gbXkgUGF5UGFsIGFjY291bnRcbm1hcmlvQHF1YXNpbW9uZG8uZGVcblxuT3Igc3VwcG9ydCBtZSBvbiBmbGF0dHI6XG5odHRwczovL2ZsYXR0ci5jb20vdGhpbmcvNzI3OTEvU3RhY2tCbHVyLWEtZmFzdC1hbG1vc3QtR2F1c3NpYW4tQmx1ci1FZmZlY3QtZm9yLUNhbnZhc0phdmFzY3JpcHRcblxuQ29weXJpZ2h0IChjKSAyMDEwIE1hcmlvIEtsaW5nZW1hbm5cblxuUGVybWlzc2lvbiBpcyBoZXJlYnkgZ3JhbnRlZCwgZnJlZSBvZiBjaGFyZ2UsIHRvIGFueSBwZXJzb25cbm9idGFpbmluZyBhIGNvcHkgb2YgdGhpcyBzb2Z0d2FyZSBhbmQgYXNzb2NpYXRlZCBkb2N1bWVudGF0aW9uXG5maWxlcyAodGhlIFwiU29mdHdhcmVcIiksIHRvIGRlYWwgaW4gdGhlIFNvZnR3YXJlIHdpdGhvdXRcbnJlc3RyaWN0aW9uLCBpbmNsdWRpbmcgd2l0aG91dCBsaW1pdGF0aW9uIHRoZSByaWdodHMgdG8gdXNlLFxuY29weSwgbW9kaWZ5LCBtZXJnZSwgcHVibGlzaCwgZGlzdHJpYnV0ZSwgc3VibGljZW5zZSwgYW5kL29yIHNlbGxcbmNvcGllcyBvZiB0aGUgU29mdHdhcmUsIGFuZCB0byBwZXJtaXQgcGVyc29ucyB0byB3aG9tIHRoZVxuU29mdHdhcmUgaXMgZnVybmlzaGVkIHRvIGRvIHNvLCBzdWJqZWN0IHRvIHRoZSBmb2xsb3dpbmdcbmNvbmRpdGlvbnM6XG5cblRoZSBhYm92ZSBjb3B5cmlnaHQgbm90aWNlIGFuZCB0aGlzIHBlcm1pc3Npb24gbm90aWNlIHNoYWxsIGJlXG5pbmNsdWRlZCBpbiBhbGwgY29waWVzIG9yIHN1YnN0YW50aWFsIHBvcnRpb25zIG9mIHRoZSBTb2Z0d2FyZS5cblxuVEhFIFNPRlRXQVJFIElTIFBST1ZJREVEIFwiQVMgSVNcIiwgV0lUSE9VVCBXQVJSQU5UWSBPRiBBTlkgS0lORCxcbkVYUFJFU1MgT1IgSU1QTElFRCwgSU5DTFVESU5HIEJVVCBOT1QgTElNSVRFRCBUTyBUSEUgV0FSUkFOVElFU1xuT0YgTUVSQ0hBTlRBQklMSVRZLCBGSVRORVNTIEZPUiBBIFBBUlRJQ1VMQVIgUFVSUE9TRSBBTkRcbk5PTklORlJJTkdFTUVOVC4gSU4gTk8gRVZFTlQgU0hBTEwgVEhFIEFVVEhPUlMgT1IgQ09QWVJJR0hUXG5IT0xERVJTIEJFIExJQUJMRSBGT1IgQU5ZIENMQUlNLCBEQU1BR0VTIE9SIE9USEVSIExJQUJJTElUWSxcbldIRVRIRVIgSU4gQU4gQUNUSU9OIE9GIENPTlRSQUNULCBUT1JUIE9SIE9USEVSV0lTRSwgQVJJU0lOR1xuRlJPTSwgT1VUIE9GIE9SIElOIENPTk5FQ1RJT04gV0lUSCBUSEUgU09GVFdBUkUgT1IgVEhFIFVTRSBPUlxuT1RIRVIgREVBTElOR1MgSU4gVEhFIFNPRlRXQVJFLlxuKi9cblxudmFyIG11bF90YWJsZSA9IFtcbiAgICAgICAgNTEyLDUxMiw0NTYsNTEyLDMyOCw0NTYsMzM1LDUxMiw0MDUsMzI4LDI3MSw0NTYsMzg4LDMzNSwyOTIsNTEyLFxuICAgICAgICA0NTQsNDA1LDM2NCwzMjgsMjk4LDI3MSw0OTYsNDU2LDQyMCwzODgsMzYwLDMzNSwzMTIsMjkyLDI3Myw1MTIsXG4gICAgICAgIDQ4Miw0NTQsNDI4LDQwNSwzODMsMzY0LDM0NSwzMjgsMzEyLDI5OCwyODQsMjcxLDI1OSw0OTYsNDc1LDQ1NixcbiAgICAgICAgNDM3LDQyMCw0MDQsMzg4LDM3NCwzNjAsMzQ3LDMzNSwzMjMsMzEyLDMwMiwyOTIsMjgyLDI3MywyNjUsNTEyLFxuICAgICAgICA0OTcsNDgyLDQ2OCw0NTQsNDQxLDQyOCw0MTcsNDA1LDM5NCwzODMsMzczLDM2NCwzNTQsMzQ1LDMzNywzMjgsXG4gICAgICAgIDMyMCwzMTIsMzA1LDI5OCwyOTEsMjg0LDI3OCwyNzEsMjY1LDI1OSw1MDcsNDk2LDQ4NSw0NzUsNDY1LDQ1NixcbiAgICAgICAgNDQ2LDQzNyw0MjgsNDIwLDQxMiw0MDQsMzk2LDM4OCwzODEsMzc0LDM2NywzNjAsMzU0LDM0NywzNDEsMzM1LFxuICAgICAgICAzMjksMzIzLDMxOCwzMTIsMzA3LDMwMiwyOTcsMjkyLDI4NywyODIsMjc4LDI3MywyNjksMjY1LDI2MSw1MTIsXG4gICAgICAgIDUwNSw0OTcsNDg5LDQ4Miw0NzUsNDY4LDQ2MSw0NTQsNDQ3LDQ0MSw0MzUsNDI4LDQyMiw0MTcsNDExLDQwNSxcbiAgICAgICAgMzk5LDM5NCwzODksMzgzLDM3OCwzNzMsMzY4LDM2NCwzNTksMzU0LDM1MCwzNDUsMzQxLDMzNywzMzIsMzI4LFxuICAgICAgICAzMjQsMzIwLDMxNiwzMTIsMzA5LDMwNSwzMDEsMjk4LDI5NCwyOTEsMjg3LDI4NCwyODEsMjc4LDI3NCwyNzEsXG4gICAgICAgIDI2OCwyNjUsMjYyLDI1OSwyNTcsNTA3LDUwMSw0OTYsNDkxLDQ4NSw0ODAsNDc1LDQ3MCw0NjUsNDYwLDQ1NixcbiAgICAgICAgNDUxLDQ0Niw0NDIsNDM3LDQzMyw0MjgsNDI0LDQyMCw0MTYsNDEyLDQwOCw0MDQsNDAwLDM5NiwzOTIsMzg4LFxuICAgICAgICAzODUsMzgxLDM3NywzNzQsMzcwLDM2NywzNjMsMzYwLDM1NywzNTQsMzUwLDM0NywzNDQsMzQxLDMzOCwzMzUsXG4gICAgICAgIDMzMiwzMjksMzI2LDMyMywzMjAsMzE4LDMxNSwzMTIsMzEwLDMwNywzMDQsMzAyLDI5OSwyOTcsMjk0LDI5MixcbiAgICAgICAgMjg5LDI4NywyODUsMjgyLDI4MCwyNzgsMjc1LDI3MywyNzEsMjY5LDI2NywyNjUsMjYzLDI2MSwyNTldO1xuXG5cbnZhciBzaGdfdGFibGUgPSBbXG4gICAgICAgOSwgMTEsIDEyLCAxMywgMTMsIDE0LCAxNCwgMTUsIDE1LCAxNSwgMTUsIDE2LCAxNiwgMTYsIDE2LCAxNyxcbiAgICAxNywgMTcsIDE3LCAxNywgMTcsIDE3LCAxOCwgMTgsIDE4LCAxOCwgMTgsIDE4LCAxOCwgMTgsIDE4LCAxOSxcbiAgICAxOSwgMTksIDE5LCAxOSwgMTksIDE5LCAxOSwgMTksIDE5LCAxOSwgMTksIDE5LCAxOSwgMjAsIDIwLCAyMCxcbiAgICAyMCwgMjAsIDIwLCAyMCwgMjAsIDIwLCAyMCwgMjAsIDIwLCAyMCwgMjAsIDIwLCAyMCwgMjAsIDIwLCAyMSxcbiAgICAyMSwgMjEsIDIxLCAyMSwgMjEsIDIxLCAyMSwgMjEsIDIxLCAyMSwgMjEsIDIxLCAyMSwgMjEsIDIxLCAyMSxcbiAgICAyMSwgMjEsIDIxLCAyMSwgMjEsIDIxLCAyMSwgMjEsIDIxLCAyMSwgMjIsIDIyLCAyMiwgMjIsIDIyLCAyMixcbiAgICAyMiwgMjIsIDIyLCAyMiwgMjIsIDIyLCAyMiwgMjIsIDIyLCAyMiwgMjIsIDIyLCAyMiwgMjIsIDIyLCAyMixcbiAgICAyMiwgMjIsIDIyLCAyMiwgMjIsIDIyLCAyMiwgMjIsIDIyLCAyMiwgMjIsIDIyLCAyMiwgMjIsIDIyLCAyMyxcbiAgICAyMywgMjMsIDIzLCAyMywgMjMsIDIzLCAyMywgMjMsIDIzLCAyMywgMjMsIDIzLCAyMywgMjMsIDIzLCAyMyxcbiAgICAyMywgMjMsIDIzLCAyMywgMjMsIDIzLCAyMywgMjMsIDIzLCAyMywgMjMsIDIzLCAyMywgMjMsIDIzLCAyMyxcbiAgICAyMywgMjMsIDIzLCAyMywgMjMsIDIzLCAyMywgMjMsIDIzLCAyMywgMjMsIDIzLCAyMywgMjMsIDIzLCAyMyxcbiAgICAyMywgMjMsIDIzLCAyMywgMjMsIDI0LCAyNCwgMjQsIDI0LCAyNCwgMjQsIDI0LCAyNCwgMjQsIDI0LCAyNCxcbiAgICAyNCwgMjQsIDI0LCAyNCwgMjQsIDI0LCAyNCwgMjQsIDI0LCAyNCwgMjQsIDI0LCAyNCwgMjQsIDI0LCAyNCxcbiAgICAyNCwgMjQsIDI0LCAyNCwgMjQsIDI0LCAyNCwgMjQsIDI0LCAyNCwgMjQsIDI0LCAyNCwgMjQsIDI0LCAyNCxcbiAgICAyNCwgMjQsIDI0LCAyNCwgMjQsIDI0LCAyNCwgMjQsIDI0LCAyNCwgMjQsIDI0LCAyNCwgMjQsIDI0LCAyNCxcbiAgICAyNCwgMjQsIDI0LCAyNCwgMjQsIDI0LCAyNCwgMjQsIDI0LCAyNCwgMjQsIDI0LCAyNCwgMjQsIDI0IF07XG5cbmZ1bmN0aW9uIHN0YWNrQmx1ckNhbnZhc1JHQkEoIGltYWdlRGF0YSwgdG9wX3gsIHRvcF95LCB3aWR0aCwgaGVpZ2h0LCByYWRpdXMgKVxue1xuICBpZiAoIGlzTmFOKHJhZGl1cykgfHwgcmFkaXVzIDwgMSApIHJldHVybjtcbiAgcmFkaXVzIHw9IDA7XG5cbiAgdmFyIHBpeGVscyA9IGltYWdlRGF0YS5kYXRhO1xuXG4gIHZhciB4LCB5LCBpLCBwLCB5cCwgeWksIHl3LCByX3N1bSwgZ19zdW0sIGJfc3VtLCBhX3N1bSxcbiAgcl9vdXRfc3VtLCBnX291dF9zdW0sIGJfb3V0X3N1bSwgYV9vdXRfc3VtLFxuICByX2luX3N1bSwgZ19pbl9zdW0sIGJfaW5fc3VtLCBhX2luX3N1bSxcbiAgcHIsIHBnLCBwYiwgcGEsIHJicztcblxuICB2YXIgZGl2ID0gcmFkaXVzICsgcmFkaXVzICsgMTtcbiAgdmFyIHdpZHRoTWludXMxICA9IHdpZHRoIC0gMTtcbiAgdmFyIGhlaWdodE1pbnVzMSA9IGhlaWdodCAtIDE7XG4gIHZhciByYWRpdXNQbHVzMSAgPSByYWRpdXMgKyAxO1xuICB2YXIgc3VtRmFjdG9yID0gcmFkaXVzUGx1czEgKiAoIHJhZGl1c1BsdXMxICsgMSApIC8gMjtcblxuICB2YXIgc3RhY2tTdGFydCA9IG5ldyBCbHVyU3RhY2soKTtcbiAgdmFyIHN0YWNrRW5kO1xuICB2YXIgc3RhY2sgPSBzdGFja1N0YXJ0O1xuICBmb3IgKCBpID0gMTsgaSA8IGRpdjsgaSsrIClcbiAge1xuICAgIHN0YWNrID0gc3RhY2submV4dCA9IG5ldyBCbHVyU3RhY2soKTtcbiAgICBpZiAoIGkgPT0gcmFkaXVzUGx1czEgKSBzdGFja0VuZCA9IHN0YWNrO1xuICB9XG4gIHN0YWNrLm5leHQgPSBzdGFja1N0YXJ0O1xuICB2YXIgc3RhY2tJbiA9IG51bGw7XG4gIHZhciBzdGFja091dCA9IG51bGw7XG5cbiAgeXcgPSB5aSA9IDA7XG5cbiAgdmFyIG11bF9zdW0gPSBtdWxfdGFibGVbcmFkaXVzXTtcbiAgdmFyIHNoZ19zdW0gPSBzaGdfdGFibGVbcmFkaXVzXTtcblxuICBmb3IgKCB5ID0gMDsgeSA8IGhlaWdodDsgeSsrIClcbiAge1xuICAgIHJfaW5fc3VtID0gZ19pbl9zdW0gPSBiX2luX3N1bSA9IGFfaW5fc3VtID0gcl9zdW0gPSBnX3N1bSA9IGJfc3VtID0gYV9zdW0gPSAwO1xuXG4gICAgcl9vdXRfc3VtID0gcmFkaXVzUGx1czEgKiAoIHByID0gcGl4ZWxzW3lpXSApO1xuICAgIGdfb3V0X3N1bSA9IHJhZGl1c1BsdXMxICogKCBwZyA9IHBpeGVsc1t5aSsxXSApO1xuICAgIGJfb3V0X3N1bSA9IHJhZGl1c1BsdXMxICogKCBwYiA9IHBpeGVsc1t5aSsyXSApO1xuICAgIGFfb3V0X3N1bSA9IHJhZGl1c1BsdXMxICogKCBwYSA9IHBpeGVsc1t5aSszXSApO1xuXG4gICAgcl9zdW0gKz0gc3VtRmFjdG9yICogcHI7XG4gICAgZ19zdW0gKz0gc3VtRmFjdG9yICogcGc7XG4gICAgYl9zdW0gKz0gc3VtRmFjdG9yICogcGI7XG4gICAgYV9zdW0gKz0gc3VtRmFjdG9yICogcGE7XG5cbiAgICBzdGFjayA9IHN0YWNrU3RhcnQ7XG5cbiAgICBmb3IoIGkgPSAwOyBpIDwgcmFkaXVzUGx1czE7IGkrKyApXG4gICAge1xuICAgICAgc3RhY2suciA9IHByO1xuICAgICAgc3RhY2suZyA9IHBnO1xuICAgICAgc3RhY2suYiA9IHBiO1xuICAgICAgc3RhY2suYSA9IHBhO1xuICAgICAgc3RhY2sgPSBzdGFjay5uZXh0O1xuICAgIH1cblxuICAgIGZvciggaSA9IDE7IGkgPCByYWRpdXNQbHVzMTsgaSsrIClcbiAgICB7XG4gICAgICBwID0geWkgKyAoKCB3aWR0aE1pbnVzMSA8IGkgPyB3aWR0aE1pbnVzMSA6IGkgKSA8PCAyICk7XG4gICAgICByX3N1bSArPSAoIHN0YWNrLnIgPSAoIHByID0gcGl4ZWxzW3BdKSkgKiAoIHJicyA9IHJhZGl1c1BsdXMxIC0gaSApO1xuICAgICAgZ19zdW0gKz0gKCBzdGFjay5nID0gKCBwZyA9IHBpeGVsc1twKzFdKSkgKiByYnM7XG4gICAgICBiX3N1bSArPSAoIHN0YWNrLmIgPSAoIHBiID0gcGl4ZWxzW3ArMl0pKSAqIHJicztcbiAgICAgIGFfc3VtICs9ICggc3RhY2suYSA9ICggcGEgPSBwaXhlbHNbcCszXSkpICogcmJzO1xuXG4gICAgICByX2luX3N1bSArPSBwcjtcbiAgICAgIGdfaW5fc3VtICs9IHBnO1xuICAgICAgYl9pbl9zdW0gKz0gcGI7XG4gICAgICBhX2luX3N1bSArPSBwYTtcblxuICAgICAgc3RhY2sgPSBzdGFjay5uZXh0O1xuICAgIH1cblxuXG4gICAgc3RhY2tJbiA9IHN0YWNrU3RhcnQ7XG4gICAgc3RhY2tPdXQgPSBzdGFja0VuZDtcbiAgICBmb3IgKCB4ID0gMDsgeCA8IHdpZHRoOyB4KysgKVxuICAgIHtcbiAgICAgIHBpeGVsc1t5aSszXSA9IHBhID0gKGFfc3VtICogbXVsX3N1bSkgPj4gc2hnX3N1bTtcbiAgICAgIGlmICggcGEgIT09IDAgKVxuICAgICAge1xuICAgICAgICBwYSA9IDI1NSAvIHBhO1xuICAgICAgICBwaXhlbHNbeWldICAgPSAoKHJfc3VtICogbXVsX3N1bSkgPj4gc2hnX3N1bSkgKiBwYTtcbiAgICAgICAgcGl4ZWxzW3lpKzFdID0gKChnX3N1bSAqIG11bF9zdW0pID4+IHNoZ19zdW0pICogcGE7XG4gICAgICAgIHBpeGVsc1t5aSsyXSA9ICgoYl9zdW0gKiBtdWxfc3VtKSA+PiBzaGdfc3VtKSAqIHBhO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcGl4ZWxzW3lpXSA9IHBpeGVsc1t5aSsxXSA9IHBpeGVsc1t5aSsyXSA9IDA7XG4gICAgICB9XG5cbiAgICAgIHJfc3VtIC09IHJfb3V0X3N1bTtcbiAgICAgIGdfc3VtIC09IGdfb3V0X3N1bTtcbiAgICAgIGJfc3VtIC09IGJfb3V0X3N1bTtcbiAgICAgIGFfc3VtIC09IGFfb3V0X3N1bTtcblxuICAgICAgcl9vdXRfc3VtIC09IHN0YWNrSW4ucjtcbiAgICAgIGdfb3V0X3N1bSAtPSBzdGFja0luLmc7XG4gICAgICBiX291dF9zdW0gLT0gc3RhY2tJbi5iO1xuICAgICAgYV9vdXRfc3VtIC09IHN0YWNrSW4uYTtcblxuICAgICAgcCA9ICAoIHl3ICsgKCAoIHAgPSB4ICsgcmFkaXVzICsgMSApIDwgd2lkdGhNaW51czEgPyBwIDogd2lkdGhNaW51czEgKSApIDw8IDI7XG5cbiAgICAgIHJfaW5fc3VtICs9ICggc3RhY2tJbi5yID0gcGl4ZWxzW3BdKTtcbiAgICAgIGdfaW5fc3VtICs9ICggc3RhY2tJbi5nID0gcGl4ZWxzW3ArMV0pO1xuICAgICAgYl9pbl9zdW0gKz0gKCBzdGFja0luLmIgPSBwaXhlbHNbcCsyXSk7XG4gICAgICBhX2luX3N1bSArPSAoIHN0YWNrSW4uYSA9IHBpeGVsc1twKzNdKTtcblxuICAgICAgcl9zdW0gKz0gcl9pbl9zdW07XG4gICAgICBnX3N1bSArPSBnX2luX3N1bTtcbiAgICAgIGJfc3VtICs9IGJfaW5fc3VtO1xuICAgICAgYV9zdW0gKz0gYV9pbl9zdW07XG5cbiAgICAgIHN0YWNrSW4gPSBzdGFja0luLm5leHQ7XG5cbiAgICAgIHJfb3V0X3N1bSArPSAoIHByID0gc3RhY2tPdXQuciApO1xuICAgICAgZ19vdXRfc3VtICs9ICggcGcgPSBzdGFja091dC5nICk7XG4gICAgICBiX291dF9zdW0gKz0gKCBwYiA9IHN0YWNrT3V0LmIgKTtcbiAgICAgIGFfb3V0X3N1bSArPSAoIHBhID0gc3RhY2tPdXQuYSApO1xuXG4gICAgICByX2luX3N1bSAtPSBwcjtcbiAgICAgIGdfaW5fc3VtIC09IHBnO1xuICAgICAgYl9pbl9zdW0gLT0gcGI7XG4gICAgICBhX2luX3N1bSAtPSBwYTtcblxuICAgICAgc3RhY2tPdXQgPSBzdGFja091dC5uZXh0O1xuXG4gICAgICB5aSArPSA0O1xuICAgIH1cbiAgICB5dyArPSB3aWR0aDtcbiAgfVxuXG5cbiAgZm9yICggeCA9IDA7IHggPCB3aWR0aDsgeCsrIClcbiAge1xuICAgIGdfaW5fc3VtID0gYl9pbl9zdW0gPSBhX2luX3N1bSA9IHJfaW5fc3VtID0gZ19zdW0gPSBiX3N1bSA9IGFfc3VtID0gcl9zdW0gPSAwO1xuXG4gICAgeWkgPSB4IDw8IDI7XG4gICAgcl9vdXRfc3VtID0gcmFkaXVzUGx1czEgKiAoIHByID0gcGl4ZWxzW3lpXSk7XG4gICAgZ19vdXRfc3VtID0gcmFkaXVzUGx1czEgKiAoIHBnID0gcGl4ZWxzW3lpKzFdKTtcbiAgICBiX291dF9zdW0gPSByYWRpdXNQbHVzMSAqICggcGIgPSBwaXhlbHNbeWkrMl0pO1xuICAgIGFfb3V0X3N1bSA9IHJhZGl1c1BsdXMxICogKCBwYSA9IHBpeGVsc1t5aSszXSk7XG5cbiAgICByX3N1bSArPSBzdW1GYWN0b3IgKiBwcjtcbiAgICBnX3N1bSArPSBzdW1GYWN0b3IgKiBwZztcbiAgICBiX3N1bSArPSBzdW1GYWN0b3IgKiBwYjtcbiAgICBhX3N1bSArPSBzdW1GYWN0b3IgKiBwYTtcblxuICAgIHN0YWNrID0gc3RhY2tTdGFydDtcblxuICAgIGZvciggaSA9IDA7IGkgPCByYWRpdXNQbHVzMTsgaSsrIClcbiAgICB7XG4gICAgICBzdGFjay5yID0gcHI7XG4gICAgICBzdGFjay5nID0gcGc7XG4gICAgICBzdGFjay5iID0gcGI7XG4gICAgICBzdGFjay5hID0gcGE7XG4gICAgICBzdGFjayA9IHN0YWNrLm5leHQ7XG4gICAgfVxuXG4gICAgeXAgPSB3aWR0aDtcblxuICAgIGZvciggaSA9IDE7IGkgPD0gcmFkaXVzOyBpKysgKVxuICAgIHtcbiAgICAgIHlpID0gKCB5cCArIHggKSA8PCAyO1xuXG4gICAgICByX3N1bSArPSAoIHN0YWNrLnIgPSAoIHByID0gcGl4ZWxzW3lpXSkpICogKCByYnMgPSByYWRpdXNQbHVzMSAtIGkgKTtcbiAgICAgIGdfc3VtICs9ICggc3RhY2suZyA9ICggcGcgPSBwaXhlbHNbeWkrMV0pKSAqIHJicztcbiAgICAgIGJfc3VtICs9ICggc3RhY2suYiA9ICggcGIgPSBwaXhlbHNbeWkrMl0pKSAqIHJicztcbiAgICAgIGFfc3VtICs9ICggc3RhY2suYSA9ICggcGEgPSBwaXhlbHNbeWkrM10pKSAqIHJicztcblxuICAgICAgcl9pbl9zdW0gKz0gcHI7XG4gICAgICBnX2luX3N1bSArPSBwZztcbiAgICAgIGJfaW5fc3VtICs9IHBiO1xuICAgICAgYV9pbl9zdW0gKz0gcGE7XG5cbiAgICAgIHN0YWNrID0gc3RhY2submV4dDtcblxuICAgICAgaWYoIGkgPCBoZWlnaHRNaW51czEgKVxuICAgICAge1xuICAgICAgICB5cCArPSB3aWR0aDtcbiAgICAgIH1cbiAgICB9XG5cbiAgICB5aSA9IHg7XG4gICAgc3RhY2tJbiA9IHN0YWNrU3RhcnQ7XG4gICAgc3RhY2tPdXQgPSBzdGFja0VuZDtcbiAgICBmb3IgKCB5ID0gMDsgeSA8IGhlaWdodDsgeSsrIClcbiAgICB7XG4gICAgICBwID0geWkgPDwgMjtcbiAgICAgIHBpeGVsc1twKzNdID0gcGEgPSAoYV9zdW0gKiBtdWxfc3VtKSA+PiBzaGdfc3VtO1xuICAgICAgaWYgKCBwYSA+IDAgKVxuICAgICAge1xuICAgICAgICBwYSA9IDI1NSAvIHBhO1xuICAgICAgICBwaXhlbHNbcF0gICA9ICgocl9zdW0gKiBtdWxfc3VtKSA+PiBzaGdfc3VtICkgKiBwYTtcbiAgICAgICAgcGl4ZWxzW3ArMV0gPSAoKGdfc3VtICogbXVsX3N1bSkgPj4gc2hnX3N1bSApICogcGE7XG4gICAgICAgIHBpeGVsc1twKzJdID0gKChiX3N1bSAqIG11bF9zdW0pID4+IHNoZ19zdW0gKSAqIHBhO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcGl4ZWxzW3BdID0gcGl4ZWxzW3ArMV0gPSBwaXhlbHNbcCsyXSA9IDA7XG4gICAgICB9XG5cbiAgICAgIHJfc3VtIC09IHJfb3V0X3N1bTtcbiAgICAgIGdfc3VtIC09IGdfb3V0X3N1bTtcbiAgICAgIGJfc3VtIC09IGJfb3V0X3N1bTtcbiAgICAgIGFfc3VtIC09IGFfb3V0X3N1bTtcblxuICAgICAgcl9vdXRfc3VtIC09IHN0YWNrSW4ucjtcbiAgICAgIGdfb3V0X3N1bSAtPSBzdGFja0luLmc7XG4gICAgICBiX291dF9zdW0gLT0gc3RhY2tJbi5iO1xuICAgICAgYV9vdXRfc3VtIC09IHN0YWNrSW4uYTtcblxuICAgICAgcCA9ICggeCArICgoICggcCA9IHkgKyByYWRpdXNQbHVzMSkgPCBoZWlnaHRNaW51czEgPyBwIDogaGVpZ2h0TWludXMxICkgKiB3aWR0aCApKSA8PCAyO1xuXG4gICAgICByX3N1bSArPSAoIHJfaW5fc3VtICs9ICggc3RhY2tJbi5yID0gcGl4ZWxzW3BdKSk7XG4gICAgICBnX3N1bSArPSAoIGdfaW5fc3VtICs9ICggc3RhY2tJbi5nID0gcGl4ZWxzW3ArMV0pKTtcbiAgICAgIGJfc3VtICs9ICggYl9pbl9zdW0gKz0gKCBzdGFja0luLmIgPSBwaXhlbHNbcCsyXSkpO1xuICAgICAgYV9zdW0gKz0gKCBhX2luX3N1bSArPSAoIHN0YWNrSW4uYSA9IHBpeGVsc1twKzNdKSk7XG5cbiAgICAgIHN0YWNrSW4gPSBzdGFja0luLm5leHQ7XG5cbiAgICAgIHJfb3V0X3N1bSArPSAoIHByID0gc3RhY2tPdXQuciApO1xuICAgICAgZ19vdXRfc3VtICs9ICggcGcgPSBzdGFja091dC5nICk7XG4gICAgICBiX291dF9zdW0gKz0gKCBwYiA9IHN0YWNrT3V0LmIgKTtcbiAgICAgIGFfb3V0X3N1bSArPSAoIHBhID0gc3RhY2tPdXQuYSApO1xuXG4gICAgICByX2luX3N1bSAtPSBwcjtcbiAgICAgIGdfaW5fc3VtIC09IHBnO1xuICAgICAgYl9pbl9zdW0gLT0gcGI7XG4gICAgICBhX2luX3N1bSAtPSBwYTtcblxuICAgICAgc3RhY2tPdXQgPSBzdGFja091dC5uZXh0O1xuXG4gICAgICB5aSArPSB3aWR0aDtcbiAgICB9XG4gIH1cbn1cblxuZnVuY3Rpb24gQmx1clN0YWNrKClcbntcbiAgdGhpcy5yID0gMDtcbiAgdGhpcy5nID0gMDtcbiAgdGhpcy5iID0gMDtcbiAgdGhpcy5hID0gMDtcbiAgdGhpcy5uZXh0ID0gbnVsbDtcbn1cblxubW9kdWxlLmV4cG9ydHMgPSB7XG4gIHN0YWNrQmx1ckNhbnZhc1JHQkE6IHN0YWNrQmx1ckNhbnZhc1JHQkFcbn07XG4iLCIvKipcbiAqIEBsaWNlbnNlXG4gKiBMby1EYXNoIDIuNC4xIChDdXN0b20gQnVpbGQpIDxodHRwOi8vbG9kYXNoLmNvbS8+XG4gKiBCdWlsZDogYGxvZGFzaCBpbmNsdWRlPVwiZGVmYXVsdHMsZXh0ZW5kXCJgXG4gKiBDb3B5cmlnaHQgMjAxMi0yMDEzIFRoZSBEb2pvIEZvdW5kYXRpb24gPGh0dHA6Ly9kb2pvZm91bmRhdGlvbi5vcmcvPlxuICogQmFzZWQgb24gVW5kZXJzY29yZS5qcyAxLjUuMiA8aHR0cDovL3VuZGVyc2NvcmVqcy5vcmcvTElDRU5TRT5cbiAqIENvcHlyaWdodCAyMDA5LTIwMTMgSmVyZW15IEFzaGtlbmFzLCBEb2N1bWVudENsb3VkIGFuZCBJbnZlc3RpZ2F0aXZlIFJlcG9ydGVycyAmIEVkaXRvcnNcbiAqIEF2YWlsYWJsZSB1bmRlciBNSVQgbGljZW5zZSA8aHR0cDovL2xvZGFzaC5jb20vbGljZW5zZT5cbiAqL1xuOyhmdW5jdGlvbigpIHtcblxuICAvKiogVXNlZCBpbnRlcm5hbGx5IHRvIGluZGljYXRlIHZhcmlvdXMgdGhpbmdzICovXG4gIHZhciBpbmRpY2F0b3JPYmplY3QgPSB7fTtcblxuICAvKiogVXNlZCB0byBkZXRlY3RlZCBuYW1lZCBmdW5jdGlvbnMgKi9cbiAgdmFyIHJlRnVuY05hbWUgPSAvXlxccypmdW5jdGlvblsgXFxuXFxyXFx0XStcXHcvO1xuXG4gIC8qKiBVc2VkIHRvIGRldGVjdCBmdW5jdGlvbnMgY29udGFpbmluZyBhIGB0aGlzYCByZWZlcmVuY2UgKi9cbiAgdmFyIHJlVGhpcyA9IC9cXGJ0aGlzXFxiLztcblxuICAvKiogVXNlZCB0byBmaXggdGhlIEpTY3JpcHQgW1tEb250RW51bV1dIGJ1ZyAqL1xuICB2YXIgc2hhZG93ZWRQcm9wcyA9IFtcbiAgICAnY29uc3RydWN0b3InLCAnaGFzT3duUHJvcGVydHknLCAnaXNQcm90b3R5cGVPZicsICdwcm9wZXJ0eUlzRW51bWVyYWJsZScsXG4gICAgJ3RvTG9jYWxlU3RyaW5nJywgJ3RvU3RyaW5nJywgJ3ZhbHVlT2YnXG4gIF07XG5cbiAgLyoqIGBPYmplY3QjdG9TdHJpbmdgIHJlc3VsdCBzaG9ydGN1dHMgKi9cbiAgdmFyIGFyZ3NDbGFzcyA9ICdbb2JqZWN0IEFyZ3VtZW50c10nLFxuICAgICAgYXJyYXlDbGFzcyA9ICdbb2JqZWN0IEFycmF5XScsXG4gICAgICBib29sQ2xhc3MgPSAnW29iamVjdCBCb29sZWFuXScsXG4gICAgICBkYXRlQ2xhc3MgPSAnW29iamVjdCBEYXRlXScsXG4gICAgICBlcnJvckNsYXNzID0gJ1tvYmplY3QgRXJyb3JdJyxcbiAgICAgIGZ1bmNDbGFzcyA9ICdbb2JqZWN0IEZ1bmN0aW9uXScsXG4gICAgICBudW1iZXJDbGFzcyA9ICdbb2JqZWN0IE51bWJlcl0nLFxuICAgICAgb2JqZWN0Q2xhc3MgPSAnW29iamVjdCBPYmplY3RdJyxcbiAgICAgIHJlZ2V4cENsYXNzID0gJ1tvYmplY3QgUmVnRXhwXScsXG4gICAgICBzdHJpbmdDbGFzcyA9ICdbb2JqZWN0IFN0cmluZ10nO1xuXG4gIC8qKiBVc2VkIGFzIHRoZSBwcm9wZXJ0eSBkZXNjcmlwdG9yIGZvciBgX19iaW5kRGF0YV9fYCAqL1xuICB2YXIgZGVzY3JpcHRvciA9IHtcbiAgICAnY29uZmlndXJhYmxlJzogZmFsc2UsXG4gICAgJ2VudW1lcmFibGUnOiBmYWxzZSxcbiAgICAndmFsdWUnOiBudWxsLFxuICAgICd3cml0YWJsZSc6IGZhbHNlXG4gIH07XG5cbiAgLyoqIFVzZWQgYXMgdGhlIGRhdGEgb2JqZWN0IGZvciBgaXRlcmF0b3JUZW1wbGF0ZWAgKi9cbiAgdmFyIGl0ZXJhdG9yRGF0YSA9IHtcbiAgICAnYXJncyc6ICcnLFxuICAgICdhcnJheSc6IG51bGwsXG4gICAgJ2JvdHRvbSc6ICcnLFxuICAgICdmaXJzdEFyZyc6ICcnLFxuICAgICdpbml0JzogJycsXG4gICAgJ2tleXMnOiBudWxsLFxuICAgICdsb29wJzogJycsXG4gICAgJ3NoYWRvd2VkUHJvcHMnOiBudWxsLFxuICAgICdzdXBwb3J0JzogbnVsbCxcbiAgICAndG9wJzogJycsXG4gICAgJ3VzZUhhcyc6IGZhbHNlXG4gIH07XG5cbiAgLyoqIFVzZWQgdG8gZGV0ZXJtaW5lIGlmIHZhbHVlcyBhcmUgb2YgdGhlIGxhbmd1YWdlIHR5cGUgT2JqZWN0ICovXG4gIHZhciBvYmplY3RUeXBlcyA9IHtcbiAgICAnYm9vbGVhbic6IGZhbHNlLFxuICAgICdmdW5jdGlvbic6IHRydWUsXG4gICAgJ29iamVjdCc6IHRydWUsXG4gICAgJ251bWJlcic6IGZhbHNlLFxuICAgICdzdHJpbmcnOiBmYWxzZSxcbiAgICAndW5kZWZpbmVkJzogZmFsc2VcbiAgfTtcblxuICAvKiogVXNlZCBhcyBhIHJlZmVyZW5jZSB0byB0aGUgZ2xvYmFsIG9iamVjdCAqL1xuICB2YXIgcm9vdCA9IChvYmplY3RUeXBlc1t0eXBlb2Ygd2luZG93XSAmJiB3aW5kb3cpIHx8IHRoaXM7XG5cbiAgLyoqIERldGVjdCBmcmVlIHZhcmlhYmxlIGBleHBvcnRzYCAqL1xuICB2YXIgZnJlZUV4cG9ydHMgPSBvYmplY3RUeXBlc1t0eXBlb2YgZXhwb3J0c10gJiYgZXhwb3J0cyAmJiAhZXhwb3J0cy5ub2RlVHlwZSAmJiBleHBvcnRzO1xuXG4gIC8qKiBEZXRlY3QgZnJlZSB2YXJpYWJsZSBgbW9kdWxlYCAqL1xuICB2YXIgZnJlZU1vZHVsZSA9IG9iamVjdFR5cGVzW3R5cGVvZiBtb2R1bGVdICYmIG1vZHVsZSAmJiAhbW9kdWxlLm5vZGVUeXBlICYmIG1vZHVsZTtcblxuICAvKiogRGV0ZWN0IHRoZSBwb3B1bGFyIENvbW1vbkpTIGV4dGVuc2lvbiBgbW9kdWxlLmV4cG9ydHNgICovXG4gIHZhciBtb2R1bGVFeHBvcnRzID0gZnJlZU1vZHVsZSAmJiBmcmVlTW9kdWxlLmV4cG9ydHMgPT09IGZyZWVFeHBvcnRzICYmIGZyZWVFeHBvcnRzO1xuXG4gIC8qKiBEZXRlY3QgZnJlZSB2YXJpYWJsZSBgZ2xvYmFsYCBmcm9tIE5vZGUuanMgb3IgQnJvd3NlcmlmaWVkIGNvZGUgYW5kIHVzZSBpdCBhcyBgcm9vdGAgKi9cbiAgdmFyIGZyZWVHbG9iYWwgPSBvYmplY3RUeXBlc1t0eXBlb2YgZ2xvYmFsXSAmJiBnbG9iYWw7XG4gIGlmIChmcmVlR2xvYmFsICYmIChmcmVlR2xvYmFsLmdsb2JhbCA9PT0gZnJlZUdsb2JhbCB8fCBmcmVlR2xvYmFsLndpbmRvdyA9PT0gZnJlZUdsb2JhbCkpIHtcbiAgICByb290ID0gZnJlZUdsb2JhbDtcbiAgfVxuXG4gIC8qLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0qL1xuXG4gIC8qKlxuICAgKiBTbGljZXMgdGhlIGBjb2xsZWN0aW9uYCBmcm9tIHRoZSBgc3RhcnRgIGluZGV4IHVwIHRvLCBidXQgbm90IGluY2x1ZGluZyxcbiAgICogdGhlIGBlbmRgIGluZGV4LlxuICAgKlxuICAgKiBOb3RlOiBUaGlzIGZ1bmN0aW9uIGlzIHVzZWQgaW5zdGVhZCBvZiBgQXJyYXkjc2xpY2VgIHRvIHN1cHBvcnQgbm9kZSBsaXN0c1xuICAgKiBpbiBJRSA8IDkgYW5kIHRvIGVuc3VyZSBkZW5zZSBhcnJheXMgYXJlIHJldHVybmVkLlxuICAgKlxuICAgKiBAcHJpdmF0ZVxuICAgKiBAcGFyYW0ge0FycmF5fE9iamVjdHxzdHJpbmd9IGNvbGxlY3Rpb24gVGhlIGNvbGxlY3Rpb24gdG8gc2xpY2UuXG4gICAqIEBwYXJhbSB7bnVtYmVyfSBzdGFydCBUaGUgc3RhcnQgaW5kZXguXG4gICAqIEBwYXJhbSB7bnVtYmVyfSBlbmQgVGhlIGVuZCBpbmRleC5cbiAgICogQHJldHVybnMge0FycmF5fSBSZXR1cm5zIHRoZSBuZXcgYXJyYXkuXG4gICAqL1xuICBmdW5jdGlvbiBzbGljZShhcnJheSwgc3RhcnQsIGVuZCkge1xuICAgIHN0YXJ0IHx8IChzdGFydCA9IDApO1xuICAgIGlmICh0eXBlb2YgZW5kID09ICd1bmRlZmluZWQnKSB7XG4gICAgICBlbmQgPSBhcnJheSA/IGFycmF5Lmxlbmd0aCA6IDA7XG4gICAgfVxuICAgIHZhciBpbmRleCA9IC0xLFxuICAgICAgICBsZW5ndGggPSBlbmQgLSBzdGFydCB8fCAwLFxuICAgICAgICByZXN1bHQgPSBBcnJheShsZW5ndGggPCAwID8gMCA6IGxlbmd0aCk7XG5cbiAgICB3aGlsZSAoKytpbmRleCA8IGxlbmd0aCkge1xuICAgICAgcmVzdWx0W2luZGV4XSA9IGFycmF5W3N0YXJ0ICsgaW5kZXhdO1xuICAgIH1cbiAgICByZXR1cm4gcmVzdWx0O1xuICB9XG5cbiAgLyotLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSovXG5cbiAgLyoqXG4gICAqIFVzZWQgZm9yIGBBcnJheWAgbWV0aG9kIHJlZmVyZW5jZXMuXG4gICAqXG4gICAqIE5vcm1hbGx5IGBBcnJheS5wcm90b3R5cGVgIHdvdWxkIHN1ZmZpY2UsIGhvd2V2ZXIsIHVzaW5nIGFuIGFycmF5IGxpdGVyYWxcbiAgICogYXZvaWRzIGlzc3VlcyBpbiBOYXJ3aGFsLlxuICAgKi9cbiAgdmFyIGFycmF5UmVmID0gW107XG5cbiAgLyoqIFVzZWQgZm9yIG5hdGl2ZSBtZXRob2QgcmVmZXJlbmNlcyAqL1xuICB2YXIgZXJyb3JQcm90byA9IEVycm9yLnByb3RvdHlwZSxcbiAgICAgIG9iamVjdFByb3RvID0gT2JqZWN0LnByb3RvdHlwZSxcbiAgICAgIHN0cmluZ1Byb3RvID0gU3RyaW5nLnByb3RvdHlwZTtcblxuICAvKiogVXNlZCB0byByZXNvbHZlIHRoZSBpbnRlcm5hbCBbW0NsYXNzXV0gb2YgdmFsdWVzICovXG4gIHZhciB0b1N0cmluZyA9IG9iamVjdFByb3RvLnRvU3RyaW5nO1xuXG4gIC8qKiBVc2VkIHRvIGRldGVjdCBpZiBhIG1ldGhvZCBpcyBuYXRpdmUgKi9cbiAgdmFyIHJlTmF0aXZlID0gUmVnRXhwKCdeJyArXG4gICAgU3RyaW5nKHRvU3RyaW5nKVxuICAgICAgLnJlcGxhY2UoL1suKis/XiR7fSgpfFtcXF1cXFxcXS9nLCAnXFxcXCQmJylcbiAgICAgIC5yZXBsYWNlKC90b1N0cmluZ3wgZm9yIFteXFxdXSsvZywgJy4qPycpICsgJyQnXG4gICk7XG5cbiAgLyoqIE5hdGl2ZSBtZXRob2Qgc2hvcnRjdXRzICovXG4gIHZhciBmblRvU3RyaW5nID0gRnVuY3Rpb24ucHJvdG90eXBlLnRvU3RyaW5nLFxuICAgICAgaGFzT3duUHJvcGVydHkgPSBvYmplY3RQcm90by5oYXNPd25Qcm9wZXJ0eSxcbiAgICAgIHB1c2ggPSBhcnJheVJlZi5wdXNoLFxuICAgICAgcHJvcGVydHlJc0VudW1lcmFibGUgPSBvYmplY3RQcm90by5wcm9wZXJ0eUlzRW51bWVyYWJsZSxcbiAgICAgIHVuc2hpZnQgPSBhcnJheVJlZi51bnNoaWZ0O1xuXG4gIC8qKiBVc2VkIHRvIHNldCBtZXRhIGRhdGEgb24gZnVuY3Rpb25zICovXG4gIHZhciBkZWZpbmVQcm9wZXJ0eSA9IChmdW5jdGlvbigpIHtcbiAgICAvLyBJRSA4IG9ubHkgYWNjZXB0cyBET00gZWxlbWVudHNcbiAgICB0cnkge1xuICAgICAgdmFyIG8gPSB7fSxcbiAgICAgICAgICBmdW5jID0gaXNOYXRpdmUoZnVuYyA9IE9iamVjdC5kZWZpbmVQcm9wZXJ0eSkgJiYgZnVuYyxcbiAgICAgICAgICByZXN1bHQgPSBmdW5jKG8sIG8sIG8pICYmIGZ1bmM7XG4gICAgfSBjYXRjaChlKSB7IH1cbiAgICByZXR1cm4gcmVzdWx0O1xuICB9KCkpO1xuXG4gIC8qIE5hdGl2ZSBtZXRob2Qgc2hvcnRjdXRzIGZvciBtZXRob2RzIHdpdGggdGhlIHNhbWUgbmFtZSBhcyBvdGhlciBgbG9kYXNoYCBtZXRob2RzICovXG4gIHZhciBuYXRpdmVDcmVhdGUgPSBpc05hdGl2ZShuYXRpdmVDcmVhdGUgPSBPYmplY3QuY3JlYXRlKSAmJiBuYXRpdmVDcmVhdGUsXG4gICAgICBuYXRpdmVJc0FycmF5ID0gaXNOYXRpdmUobmF0aXZlSXNBcnJheSA9IEFycmF5LmlzQXJyYXkpICYmIG5hdGl2ZUlzQXJyYXksXG4gICAgICBuYXRpdmVLZXlzID0gaXNOYXRpdmUobmF0aXZlS2V5cyA9IE9iamVjdC5rZXlzKSAmJiBuYXRpdmVLZXlzO1xuXG4gIC8qKiBVc2VkIHRvIGF2b2lkIGl0ZXJhdGluZyBub24tZW51bWVyYWJsZSBwcm9wZXJ0aWVzIGluIElFIDwgOSAqL1xuICB2YXIgbm9uRW51bVByb3BzID0ge307XG4gIG5vbkVudW1Qcm9wc1thcnJheUNsYXNzXSA9IG5vbkVudW1Qcm9wc1tkYXRlQ2xhc3NdID0gbm9uRW51bVByb3BzW251bWJlckNsYXNzXSA9IHsgJ2NvbnN0cnVjdG9yJzogdHJ1ZSwgJ3RvTG9jYWxlU3RyaW5nJzogdHJ1ZSwgJ3RvU3RyaW5nJzogdHJ1ZSwgJ3ZhbHVlT2YnOiB0cnVlIH07XG4gIG5vbkVudW1Qcm9wc1tib29sQ2xhc3NdID0gbm9uRW51bVByb3BzW3N0cmluZ0NsYXNzXSA9IHsgJ2NvbnN0cnVjdG9yJzogdHJ1ZSwgJ3RvU3RyaW5nJzogdHJ1ZSwgJ3ZhbHVlT2YnOiB0cnVlIH07XG4gIG5vbkVudW1Qcm9wc1tlcnJvckNsYXNzXSA9IG5vbkVudW1Qcm9wc1tmdW5jQ2xhc3NdID0gbm9uRW51bVByb3BzW3JlZ2V4cENsYXNzXSA9IHsgJ2NvbnN0cnVjdG9yJzogdHJ1ZSwgJ3RvU3RyaW5nJzogdHJ1ZSB9O1xuICBub25FbnVtUHJvcHNbb2JqZWN0Q2xhc3NdID0geyAnY29uc3RydWN0b3InOiB0cnVlIH07XG5cbiAgKGZ1bmN0aW9uKCkge1xuICAgIHZhciBsZW5ndGggPSBzaGFkb3dlZFByb3BzLmxlbmd0aDtcbiAgICB3aGlsZSAobGVuZ3RoLS0pIHtcbiAgICAgIHZhciBrZXkgPSBzaGFkb3dlZFByb3BzW2xlbmd0aF07XG4gICAgICBmb3IgKHZhciBjbGFzc05hbWUgaW4gbm9uRW51bVByb3BzKSB7XG4gICAgICAgIGlmIChoYXNPd25Qcm9wZXJ0eS5jYWxsKG5vbkVudW1Qcm9wcywgY2xhc3NOYW1lKSAmJiAhaGFzT3duUHJvcGVydHkuY2FsbChub25FbnVtUHJvcHNbY2xhc3NOYW1lXSwga2V5KSkge1xuICAgICAgICAgIG5vbkVudW1Qcm9wc1tjbGFzc05hbWVdW2tleV0gPSBmYWxzZTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgfSgpKTtcblxuICAvKi0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tKi9cblxuICAvKipcbiAgICogQ3JlYXRlcyBhIGBsb2Rhc2hgIG9iamVjdCB3aGljaCB3cmFwcyB0aGUgZ2l2ZW4gdmFsdWUgdG8gZW5hYmxlIGludHVpdGl2ZVxuICAgKiBtZXRob2QgY2hhaW5pbmcuXG4gICAqXG4gICAqIEluIGFkZGl0aW9uIHRvIExvLURhc2ggbWV0aG9kcywgd3JhcHBlcnMgYWxzbyBoYXZlIHRoZSBmb2xsb3dpbmcgYEFycmF5YCBtZXRob2RzOlxuICAgKiBgY29uY2F0YCwgYGpvaW5gLCBgcG9wYCwgYHB1c2hgLCBgcmV2ZXJzZWAsIGBzaGlmdGAsIGBzbGljZWAsIGBzb3J0YCwgYHNwbGljZWAsXG4gICAqIGFuZCBgdW5zaGlmdGBcbiAgICpcbiAgICogQ2hhaW5pbmcgaXMgc3VwcG9ydGVkIGluIGN1c3RvbSBidWlsZHMgYXMgbG9uZyBhcyB0aGUgYHZhbHVlYCBtZXRob2QgaXNcbiAgICogaW1wbGljaXRseSBvciBleHBsaWNpdGx5IGluY2x1ZGVkIGluIHRoZSBidWlsZC5cbiAgICpcbiAgICogVGhlIGNoYWluYWJsZSB3cmFwcGVyIGZ1bmN0aW9ucyBhcmU6XG4gICAqIGBhZnRlcmAsIGBhc3NpZ25gLCBgYmluZGAsIGBiaW5kQWxsYCwgYGJpbmRLZXlgLCBgY2hhaW5gLCBgY29tcGFjdGAsXG4gICAqIGBjb21wb3NlYCwgYGNvbmNhdGAsIGBjb3VudEJ5YCwgYGNyZWF0ZWAsIGBjcmVhdGVDYWxsYmFja2AsIGBjdXJyeWAsXG4gICAqIGBkZWJvdW5jZWAsIGBkZWZhdWx0c2AsIGBkZWZlcmAsIGBkZWxheWAsIGBkaWZmZXJlbmNlYCwgYGZpbHRlcmAsIGBmbGF0dGVuYCxcbiAgICogYGZvckVhY2hgLCBgZm9yRWFjaFJpZ2h0YCwgYGZvckluYCwgYGZvckluUmlnaHRgLCBgZm9yT3duYCwgYGZvck93blJpZ2h0YCxcbiAgICogYGZ1bmN0aW9uc2AsIGBncm91cEJ5YCwgYGluZGV4QnlgLCBgaW5pdGlhbGAsIGBpbnRlcnNlY3Rpb25gLCBgaW52ZXJ0YCxcbiAgICogYGludm9rZWAsIGBrZXlzYCwgYG1hcGAsIGBtYXhgLCBgbWVtb2l6ZWAsIGBtZXJnZWAsIGBtaW5gLCBgb2JqZWN0YCwgYG9taXRgLFxuICAgKiBgb25jZWAsIGBwYWlyc2AsIGBwYXJ0aWFsYCwgYHBhcnRpYWxSaWdodGAsIGBwaWNrYCwgYHBsdWNrYCwgYHB1bGxgLCBgcHVzaGAsXG4gICAqIGByYW5nZWAsIGByZWplY3RgLCBgcmVtb3ZlYCwgYHJlc3RgLCBgcmV2ZXJzZWAsIGBzaHVmZmxlYCwgYHNsaWNlYCwgYHNvcnRgLFxuICAgKiBgc29ydEJ5YCwgYHNwbGljZWAsIGB0YXBgLCBgdGhyb3R0bGVgLCBgdGltZXNgLCBgdG9BcnJheWAsIGB0cmFuc2Zvcm1gLFxuICAgKiBgdW5pb25gLCBgdW5pcWAsIGB1bnNoaWZ0YCwgYHVuemlwYCwgYHZhbHVlc2AsIGB3aGVyZWAsIGB3aXRob3V0YCwgYHdyYXBgLFxuICAgKiBhbmQgYHppcGBcbiAgICpcbiAgICogVGhlIG5vbi1jaGFpbmFibGUgd3JhcHBlciBmdW5jdGlvbnMgYXJlOlxuICAgKiBgY2xvbmVgLCBgY2xvbmVEZWVwYCwgYGNvbnRhaW5zYCwgYGVzY2FwZWAsIGBldmVyeWAsIGBmaW5kYCwgYGZpbmRJbmRleGAsXG4gICAqIGBmaW5kS2V5YCwgYGZpbmRMYXN0YCwgYGZpbmRMYXN0SW5kZXhgLCBgZmluZExhc3RLZXlgLCBgaGFzYCwgYGlkZW50aXR5YCxcbiAgICogYGluZGV4T2ZgLCBgaXNBcmd1bWVudHNgLCBgaXNBcnJheWAsIGBpc0Jvb2xlYW5gLCBgaXNEYXRlYCwgYGlzRWxlbWVudGAsXG4gICAqIGBpc0VtcHR5YCwgYGlzRXF1YWxgLCBgaXNGaW5pdGVgLCBgaXNGdW5jdGlvbmAsIGBpc05hTmAsIGBpc051bGxgLCBgaXNOdW1iZXJgLFxuICAgKiBgaXNPYmplY3RgLCBgaXNQbGFpbk9iamVjdGAsIGBpc1JlZ0V4cGAsIGBpc1N0cmluZ2AsIGBpc1VuZGVmaW5lZGAsIGBqb2luYCxcbiAgICogYGxhc3RJbmRleE9mYCwgYG1peGluYCwgYG5vQ29uZmxpY3RgLCBgcGFyc2VJbnRgLCBgcG9wYCwgYHJhbmRvbWAsIGByZWR1Y2VgLFxuICAgKiBgcmVkdWNlUmlnaHRgLCBgcmVzdWx0YCwgYHNoaWZ0YCwgYHNpemVgLCBgc29tZWAsIGBzb3J0ZWRJbmRleGAsIGBydW5JbkNvbnRleHRgLFxuICAgKiBgdGVtcGxhdGVgLCBgdW5lc2NhcGVgLCBgdW5pcXVlSWRgLCBhbmQgYHZhbHVlYFxuICAgKlxuICAgKiBUaGUgd3JhcHBlciBmdW5jdGlvbnMgYGZpcnN0YCBhbmQgYGxhc3RgIHJldHVybiB3cmFwcGVkIHZhbHVlcyB3aGVuIGBuYCBpc1xuICAgKiBwcm92aWRlZCwgb3RoZXJ3aXNlIHRoZXkgcmV0dXJuIHVud3JhcHBlZCB2YWx1ZXMuXG4gICAqXG4gICAqIEV4cGxpY2l0IGNoYWluaW5nIGNhbiBiZSBlbmFibGVkIGJ5IHVzaW5nIHRoZSBgXy5jaGFpbmAgbWV0aG9kLlxuICAgKlxuICAgKiBAbmFtZSBfXG4gICAqIEBjb25zdHJ1Y3RvclxuICAgKiBAY2F0ZWdvcnkgQ2hhaW5pbmdcbiAgICogQHBhcmFtIHsqfSB2YWx1ZSBUaGUgdmFsdWUgdG8gd3JhcCBpbiBhIGBsb2Rhc2hgIGluc3RhbmNlLlxuICAgKiBAcmV0dXJucyB7T2JqZWN0fSBSZXR1cm5zIGEgYGxvZGFzaGAgaW5zdGFuY2UuXG4gICAqIEBleGFtcGxlXG4gICAqXG4gICAqIHZhciB3cmFwcGVkID0gXyhbMSwgMiwgM10pO1xuICAgKlxuICAgKiAvLyByZXR1cm5zIGFuIHVud3JhcHBlZCB2YWx1ZVxuICAgKiB3cmFwcGVkLnJlZHVjZShmdW5jdGlvbihzdW0sIG51bSkge1xuICAgKiAgIHJldHVybiBzdW0gKyBudW07XG4gICAqIH0pO1xuICAgKiAvLyA9PiA2XG4gICAqXG4gICAqIC8vIHJldHVybnMgYSB3cmFwcGVkIHZhbHVlXG4gICAqIHZhciBzcXVhcmVzID0gd3JhcHBlZC5tYXAoZnVuY3Rpb24obnVtKSB7XG4gICAqICAgcmV0dXJuIG51bSAqIG51bTtcbiAgICogfSk7XG4gICAqXG4gICAqIF8uaXNBcnJheShzcXVhcmVzKTtcbiAgICogLy8gPT4gZmFsc2VcbiAgICpcbiAgICogXy5pc0FycmF5KHNxdWFyZXMudmFsdWUoKSk7XG4gICAqIC8vID0+IHRydWVcbiAgICovXG4gIGZ1bmN0aW9uIGxvZGFzaCgpIHtcbiAgICAvLyBubyBvcGVyYXRpb24gcGVyZm9ybWVkXG4gIH1cblxuICAvKipcbiAgICogQW4gb2JqZWN0IHVzZWQgdG8gZmxhZyBlbnZpcm9ubWVudHMgZmVhdHVyZXMuXG4gICAqXG4gICAqIEBzdGF0aWNcbiAgICogQG1lbWJlck9mIF9cbiAgICogQHR5cGUgT2JqZWN0XG4gICAqL1xuICB2YXIgc3VwcG9ydCA9IGxvZGFzaC5zdXBwb3J0ID0ge307XG5cbiAgKGZ1bmN0aW9uKCkge1xuICAgIHZhciBjdG9yID0gZnVuY3Rpb24oKSB7IHRoaXMueCA9IDE7IH0sXG4gICAgICAgIG9iamVjdCA9IHsgJzAnOiAxLCAnbGVuZ3RoJzogMSB9LFxuICAgICAgICBwcm9wcyA9IFtdO1xuXG4gICAgY3Rvci5wcm90b3R5cGUgPSB7ICd2YWx1ZU9mJzogMSwgJ3knOiAxIH07XG4gICAgZm9yICh2YXIga2V5IGluIG5ldyBjdG9yKSB7IHByb3BzLnB1c2goa2V5KTsgfVxuICAgIGZvciAoa2V5IGluIGFyZ3VtZW50cykgeyB9XG5cbiAgICAvKipcbiAgICAgKiBEZXRlY3QgaWYgYW4gYGFyZ3VtZW50c2Agb2JqZWN0J3MgW1tDbGFzc11dIGlzIHJlc29sdmFibGUgKGFsbCBidXQgRmlyZWZveCA8IDQsIElFIDwgOSkuXG4gICAgICpcbiAgICAgKiBAbWVtYmVyT2YgXy5zdXBwb3J0XG4gICAgICogQHR5cGUgYm9vbGVhblxuICAgICAqL1xuICAgIHN1cHBvcnQuYXJnc0NsYXNzID0gdG9TdHJpbmcuY2FsbChhcmd1bWVudHMpID09IGFyZ3NDbGFzcztcblxuICAgIC8qKlxuICAgICAqIERldGVjdCBpZiBgYXJndW1lbnRzYCBvYmplY3RzIGFyZSBgT2JqZWN0YCBvYmplY3RzIChhbGwgYnV0IE5hcndoYWwgYW5kIE9wZXJhIDwgMTAuNSkuXG4gICAgICpcbiAgICAgKiBAbWVtYmVyT2YgXy5zdXBwb3J0XG4gICAgICogQHR5cGUgYm9vbGVhblxuICAgICAqL1xuICAgIHN1cHBvcnQuYXJnc09iamVjdCA9IGFyZ3VtZW50cy5jb25zdHJ1Y3RvciA9PSBPYmplY3QgJiYgIShhcmd1bWVudHMgaW5zdGFuY2VvZiBBcnJheSk7XG5cbiAgICAvKipcbiAgICAgKiBEZXRlY3QgaWYgYG5hbWVgIG9yIGBtZXNzYWdlYCBwcm9wZXJ0aWVzIG9mIGBFcnJvci5wcm90b3R5cGVgIGFyZVxuICAgICAqIGVudW1lcmFibGUgYnkgZGVmYXVsdC4gKElFIDwgOSwgU2FmYXJpIDwgNS4xKVxuICAgICAqXG4gICAgICogQG1lbWJlck9mIF8uc3VwcG9ydFxuICAgICAqIEB0eXBlIGJvb2xlYW5cbiAgICAgKi9cbiAgICBzdXBwb3J0LmVudW1FcnJvclByb3BzID0gcHJvcGVydHlJc0VudW1lcmFibGUuY2FsbChlcnJvclByb3RvLCAnbWVzc2FnZScpIHx8IHByb3BlcnR5SXNFbnVtZXJhYmxlLmNhbGwoZXJyb3JQcm90bywgJ25hbWUnKTtcblxuICAgIC8qKlxuICAgICAqIERldGVjdCBpZiBgcHJvdG90eXBlYCBwcm9wZXJ0aWVzIGFyZSBlbnVtZXJhYmxlIGJ5IGRlZmF1bHQuXG4gICAgICpcbiAgICAgKiBGaXJlZm94IDwgMy42LCBPcGVyYSA+IDkuNTAgLSBPcGVyYSA8IDExLjYwLCBhbmQgU2FmYXJpIDwgNS4xXG4gICAgICogKGlmIHRoZSBwcm90b3R5cGUgb3IgYSBwcm9wZXJ0eSBvbiB0aGUgcHJvdG90eXBlIGhhcyBiZWVuIHNldClcbiAgICAgKiBpbmNvcnJlY3RseSBzZXRzIGEgZnVuY3Rpb24ncyBgcHJvdG90eXBlYCBwcm9wZXJ0eSBbW0VudW1lcmFibGVdXVxuICAgICAqIHZhbHVlIHRvIGB0cnVlYC5cbiAgICAgKlxuICAgICAqIEBtZW1iZXJPZiBfLnN1cHBvcnRcbiAgICAgKiBAdHlwZSBib29sZWFuXG4gICAgICovXG4gICAgc3VwcG9ydC5lbnVtUHJvdG90eXBlcyA9IHByb3BlcnR5SXNFbnVtZXJhYmxlLmNhbGwoY3RvciwgJ3Byb3RvdHlwZScpO1xuXG4gICAgLyoqXG4gICAgICogRGV0ZWN0IGlmIGZ1bmN0aW9ucyBjYW4gYmUgZGVjb21waWxlZCBieSBgRnVuY3Rpb24jdG9TdHJpbmdgXG4gICAgICogKGFsbCBidXQgUFMzIGFuZCBvbGRlciBPcGVyYSBtb2JpbGUgYnJvd3NlcnMgJiBhdm9pZGVkIGluIFdpbmRvd3MgOCBhcHBzKS5cbiAgICAgKlxuICAgICAqIEBtZW1iZXJPZiBfLnN1cHBvcnRcbiAgICAgKiBAdHlwZSBib29sZWFuXG4gICAgICovXG4gICAgc3VwcG9ydC5mdW5jRGVjb21wID0gIWlzTmF0aXZlKHJvb3QuV2luUlRFcnJvcikgJiYgcmVUaGlzLnRlc3QoZnVuY3Rpb24oKSB7IHJldHVybiB0aGlzOyB9KTtcblxuICAgIC8qKlxuICAgICAqIERldGVjdCBpZiBgRnVuY3Rpb24jbmFtZWAgaXMgc3VwcG9ydGVkIChhbGwgYnV0IElFKS5cbiAgICAgKlxuICAgICAqIEBtZW1iZXJPZiBfLnN1cHBvcnRcbiAgICAgKiBAdHlwZSBib29sZWFuXG4gICAgICovXG4gICAgc3VwcG9ydC5mdW5jTmFtZXMgPSB0eXBlb2YgRnVuY3Rpb24ubmFtZSA9PSAnc3RyaW5nJztcblxuICAgIC8qKlxuICAgICAqIERldGVjdCBpZiBgYXJndW1lbnRzYCBvYmplY3QgaW5kZXhlcyBhcmUgbm9uLWVudW1lcmFibGVcbiAgICAgKiAoRmlyZWZveCA8IDQsIElFIDwgOSwgUGhhbnRvbUpTLCBTYWZhcmkgPCA1LjEpLlxuICAgICAqXG4gICAgICogQG1lbWJlck9mIF8uc3VwcG9ydFxuICAgICAqIEB0eXBlIGJvb2xlYW5cbiAgICAgKi9cbiAgICBzdXBwb3J0Lm5vbkVudW1BcmdzID0ga2V5ICE9IDA7XG5cbiAgICAvKipcbiAgICAgKiBEZXRlY3QgaWYgcHJvcGVydGllcyBzaGFkb3dpbmcgdGhvc2Ugb24gYE9iamVjdC5wcm90b3R5cGVgIGFyZSBub24tZW51bWVyYWJsZS5cbiAgICAgKlxuICAgICAqIEluIElFIDwgOSBhbiBvYmplY3RzIG93biBwcm9wZXJ0aWVzLCBzaGFkb3dpbmcgbm9uLWVudW1lcmFibGUgb25lcywgYXJlXG4gICAgICogbWFkZSBub24tZW51bWVyYWJsZSBhcyB3ZWxsIChhLmsuYSB0aGUgSlNjcmlwdCBbW0RvbnRFbnVtXV0gYnVnKS5cbiAgICAgKlxuICAgICAqIEBtZW1iZXJPZiBfLnN1cHBvcnRcbiAgICAgKiBAdHlwZSBib29sZWFuXG4gICAgICovXG4gICAgc3VwcG9ydC5ub25FbnVtU2hhZG93cyA9ICEvdmFsdWVPZi8udGVzdChwcm9wcyk7XG5cbiAgICAvKipcbiAgICAgKiBEZXRlY3QgaWYgYEFycmF5I3NoaWZ0YCBhbmQgYEFycmF5I3NwbGljZWAgYXVnbWVudCBhcnJheS1saWtlIG9iamVjdHMgY29ycmVjdGx5LlxuICAgICAqXG4gICAgICogRmlyZWZveCA8IDEwLCBJRSBjb21wYXRpYmlsaXR5IG1vZGUsIGFuZCBJRSA8IDkgaGF2ZSBidWdneSBBcnJheSBgc2hpZnQoKWBcbiAgICAgKiBhbmQgYHNwbGljZSgpYCBmdW5jdGlvbnMgdGhhdCBmYWlsIHRvIHJlbW92ZSB0aGUgbGFzdCBlbGVtZW50LCBgdmFsdWVbMF1gLFxuICAgICAqIG9mIGFycmF5LWxpa2Ugb2JqZWN0cyBldmVuIHRob3VnaCB0aGUgYGxlbmd0aGAgcHJvcGVydHkgaXMgc2V0IHRvIGAwYC5cbiAgICAgKiBUaGUgYHNoaWZ0KClgIG1ldGhvZCBpcyBidWdneSBpbiBJRSA4IGNvbXBhdGliaWxpdHkgbW9kZSwgd2hpbGUgYHNwbGljZSgpYFxuICAgICAqIGlzIGJ1Z2d5IHJlZ2FyZGxlc3Mgb2YgbW9kZSBpbiBJRSA8IDkgYW5kIGJ1Z2d5IGluIGNvbXBhdGliaWxpdHkgbW9kZSBpbiBJRSA5LlxuICAgICAqXG4gICAgICogQG1lbWJlck9mIF8uc3VwcG9ydFxuICAgICAqIEB0eXBlIGJvb2xlYW5cbiAgICAgKi9cbiAgICBzdXBwb3J0LnNwbGljZU9iamVjdHMgPSAoYXJyYXlSZWYuc3BsaWNlLmNhbGwob2JqZWN0LCAwLCAxKSwgIW9iamVjdFswXSk7XG5cbiAgICAvKipcbiAgICAgKiBEZXRlY3QgbGFjayBvZiBzdXBwb3J0IGZvciBhY2Nlc3Npbmcgc3RyaW5nIGNoYXJhY3RlcnMgYnkgaW5kZXguXG4gICAgICpcbiAgICAgKiBJRSA8IDggY2FuJ3QgYWNjZXNzIGNoYXJhY3RlcnMgYnkgaW5kZXggYW5kIElFIDggY2FuIG9ubHkgYWNjZXNzXG4gICAgICogY2hhcmFjdGVycyBieSBpbmRleCBvbiBzdHJpbmcgbGl0ZXJhbHMuXG4gICAgICpcbiAgICAgKiBAbWVtYmVyT2YgXy5zdXBwb3J0XG4gICAgICogQHR5cGUgYm9vbGVhblxuICAgICAqL1xuICAgIHN1cHBvcnQudW5pbmRleGVkQ2hhcnMgPSAoJ3gnWzBdICsgT2JqZWN0KCd4JylbMF0pICE9ICd4eCc7XG4gIH0oMSkpO1xuXG4gIC8qLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0qL1xuXG4gIC8qKlxuICAgKiBUaGUgdGVtcGxhdGUgdXNlZCB0byBjcmVhdGUgaXRlcmF0b3IgZnVuY3Rpb25zLlxuICAgKlxuICAgKiBAcHJpdmF0ZVxuICAgKiBAcGFyYW0ge09iamVjdH0gZGF0YSBUaGUgZGF0YSBvYmplY3QgdXNlZCB0byBwb3B1bGF0ZSB0aGUgdGV4dC5cbiAgICogQHJldHVybnMge3N0cmluZ30gUmV0dXJucyB0aGUgaW50ZXJwb2xhdGVkIHRleHQuXG4gICAqL1xuICB2YXIgaXRlcmF0b3JUZW1wbGF0ZSA9IGZ1bmN0aW9uKG9iaikge1xuXG4gICAgdmFyIF9fcCA9ICd2YXIgaW5kZXgsIGl0ZXJhYmxlID0gJyArXG4gICAgKG9iai5maXJzdEFyZykgK1xuICAgICcsIHJlc3VsdCA9ICcgK1xuICAgIChvYmouaW5pdCkgK1xuICAgICc7XFxuaWYgKCFpdGVyYWJsZSkgcmV0dXJuIHJlc3VsdDtcXG4nICtcbiAgICAob2JqLnRvcCkgK1xuICAgICc7JztcbiAgICAgaWYgKG9iai5hcnJheSkge1xuICAgIF9fcCArPSAnXFxudmFyIGxlbmd0aCA9IGl0ZXJhYmxlLmxlbmd0aDsgaW5kZXggPSAtMTtcXG5pZiAoJyArXG4gICAgKG9iai5hcnJheSkgK1xuICAgICcpIHsgICc7XG4gICAgIGlmIChzdXBwb3J0LnVuaW5kZXhlZENoYXJzKSB7XG4gICAgX19wICs9ICdcXG4gIGlmIChpc1N0cmluZyhpdGVyYWJsZSkpIHtcXG4gICAgaXRlcmFibGUgPSBpdGVyYWJsZS5zcGxpdChcXCdcXCcpXFxuICB9ICAnO1xuICAgICB9XG4gICAgX19wICs9ICdcXG4gIHdoaWxlICgrK2luZGV4IDwgbGVuZ3RoKSB7XFxuICAgICcgK1xuICAgIChvYmoubG9vcCkgK1xuICAgICc7XFxuICB9XFxufVxcbmVsc2UgeyAgJztcbiAgICAgfSBlbHNlIGlmIChzdXBwb3J0Lm5vbkVudW1BcmdzKSB7XG4gICAgX19wICs9ICdcXG4gIHZhciBsZW5ndGggPSBpdGVyYWJsZS5sZW5ndGg7IGluZGV4ID0gLTE7XFxuICBpZiAobGVuZ3RoICYmIGlzQXJndW1lbnRzKGl0ZXJhYmxlKSkge1xcbiAgICB3aGlsZSAoKytpbmRleCA8IGxlbmd0aCkge1xcbiAgICAgIGluZGV4ICs9IFxcJ1xcJztcXG4gICAgICAnICtcbiAgICAob2JqLmxvb3ApICtcbiAgICAnO1xcbiAgICB9XFxuICB9IGVsc2UgeyAgJztcbiAgICAgfVxuXG4gICAgIGlmIChzdXBwb3J0LmVudW1Qcm90b3R5cGVzKSB7XG4gICAgX19wICs9ICdcXG4gIHZhciBza2lwUHJvdG8gPSB0eXBlb2YgaXRlcmFibGUgPT0gXFwnZnVuY3Rpb25cXCc7XFxuICAnO1xuICAgICB9XG5cbiAgICAgaWYgKHN1cHBvcnQuZW51bUVycm9yUHJvcHMpIHtcbiAgICBfX3AgKz0gJ1xcbiAgdmFyIHNraXBFcnJvclByb3BzID0gaXRlcmFibGUgPT09IGVycm9yUHJvdG8gfHwgaXRlcmFibGUgaW5zdGFuY2VvZiBFcnJvcjtcXG4gICc7XG4gICAgIH1cblxuICAgICAgICB2YXIgY29uZGl0aW9ucyA9IFtdOyAgICBpZiAoc3VwcG9ydC5lbnVtUHJvdG90eXBlcykgeyBjb25kaXRpb25zLnB1c2goJyEoc2tpcFByb3RvICYmIGluZGV4ID09IFwicHJvdG90eXBlXCIpJyk7IH0gICAgaWYgKHN1cHBvcnQuZW51bUVycm9yUHJvcHMpICB7IGNvbmRpdGlvbnMucHVzaCgnIShza2lwRXJyb3JQcm9wcyAmJiAoaW5kZXggPT0gXCJtZXNzYWdlXCIgfHwgaW5kZXggPT0gXCJuYW1lXCIpKScpOyB9XG5cbiAgICAgaWYgKG9iai51c2VIYXMgJiYgb2JqLmtleXMpIHtcbiAgICBfX3AgKz0gJ1xcbiAgdmFyIG93bkluZGV4ID0gLTEsXFxuICAgICAgb3duUHJvcHMgPSBvYmplY3RUeXBlc1t0eXBlb2YgaXRlcmFibGVdICYmIGtleXMoaXRlcmFibGUpLFxcbiAgICAgIGxlbmd0aCA9IG93blByb3BzID8gb3duUHJvcHMubGVuZ3RoIDogMDtcXG5cXG4gIHdoaWxlICgrK293bkluZGV4IDwgbGVuZ3RoKSB7XFxuICAgIGluZGV4ID0gb3duUHJvcHNbb3duSW5kZXhdO1xcbic7XG4gICAgICAgIGlmIChjb25kaXRpb25zLmxlbmd0aCkge1xuICAgIF9fcCArPSAnICAgIGlmICgnICtcbiAgICAoY29uZGl0aW9ucy5qb2luKCcgJiYgJykpICtcbiAgICAnKSB7XFxuICAnO1xuICAgICB9XG4gICAgX19wICs9XG4gICAgKG9iai5sb29wKSArXG4gICAgJzsgICAgJztcbiAgICAgaWYgKGNvbmRpdGlvbnMubGVuZ3RoKSB7XG4gICAgX19wICs9ICdcXG4gICAgfSc7XG4gICAgIH1cbiAgICBfX3AgKz0gJ1xcbiAgfSAgJztcbiAgICAgfSBlbHNlIHtcbiAgICBfX3AgKz0gJ1xcbiAgZm9yIChpbmRleCBpbiBpdGVyYWJsZSkge1xcbic7XG4gICAgICAgIGlmIChvYmoudXNlSGFzKSB7IGNvbmRpdGlvbnMucHVzaChcImhhc093blByb3BlcnR5LmNhbGwoaXRlcmFibGUsIGluZGV4KVwiKTsgfSAgICBpZiAoY29uZGl0aW9ucy5sZW5ndGgpIHtcbiAgICBfX3AgKz0gJyAgICBpZiAoJyArXG4gICAgKGNvbmRpdGlvbnMuam9pbignICYmICcpKSArXG4gICAgJykge1xcbiAgJztcbiAgICAgfVxuICAgIF9fcCArPVxuICAgIChvYmoubG9vcCkgK1xuICAgICc7ICAgICc7XG4gICAgIGlmIChjb25kaXRpb25zLmxlbmd0aCkge1xuICAgIF9fcCArPSAnXFxuICAgIH0nO1xuICAgICB9XG4gICAgX19wICs9ICdcXG4gIH0gICAgJztcbiAgICAgaWYgKHN1cHBvcnQubm9uRW51bVNoYWRvd3MpIHtcbiAgICBfX3AgKz0gJ1xcblxcbiAgaWYgKGl0ZXJhYmxlICE9PSBvYmplY3RQcm90bykge1xcbiAgICB2YXIgY3RvciA9IGl0ZXJhYmxlLmNvbnN0cnVjdG9yLFxcbiAgICAgICAgaXNQcm90byA9IGl0ZXJhYmxlID09PSAoY3RvciAmJiBjdG9yLnByb3RvdHlwZSksXFxuICAgICAgICBjbGFzc05hbWUgPSBpdGVyYWJsZSA9PT0gc3RyaW5nUHJvdG8gPyBzdHJpbmdDbGFzcyA6IGl0ZXJhYmxlID09PSBlcnJvclByb3RvID8gZXJyb3JDbGFzcyA6IHRvU3RyaW5nLmNhbGwoaXRlcmFibGUpLFxcbiAgICAgICAgbm9uRW51bSA9IG5vbkVudW1Qcm9wc1tjbGFzc05hbWVdO1xcbiAgICAgICc7XG4gICAgIGZvciAoayA9IDA7IGsgPCA3OyBrKyspIHtcbiAgICBfX3AgKz0gJ1xcbiAgICBpbmRleCA9IFxcJycgK1xuICAgIChvYmouc2hhZG93ZWRQcm9wc1trXSkgK1xuICAgICdcXCc7XFxuICAgIGlmICgoIShpc1Byb3RvICYmIG5vbkVudW1baW5kZXhdKSAmJiBoYXNPd25Qcm9wZXJ0eS5jYWxsKGl0ZXJhYmxlLCBpbmRleCkpJztcbiAgICAgICAgICAgIGlmICghb2JqLnVzZUhhcykge1xuICAgIF9fcCArPSAnIHx8ICghbm9uRW51bVtpbmRleF0gJiYgaXRlcmFibGVbaW5kZXhdICE9PSBvYmplY3RQcm90b1tpbmRleF0pJztcbiAgICAgfVxuICAgIF9fcCArPSAnKSB7XFxuICAgICAgJyArXG4gICAgKG9iai5sb29wKSArXG4gICAgJztcXG4gICAgfSAgICAgICc7XG4gICAgIH1cbiAgICBfX3AgKz0gJ1xcbiAgfSAgICAnO1xuICAgICB9XG5cbiAgICAgfVxuXG4gICAgIGlmIChvYmouYXJyYXkgfHwgc3VwcG9ydC5ub25FbnVtQXJncykge1xuICAgIF9fcCArPSAnXFxufSc7XG4gICAgIH1cbiAgICBfX3AgKz1cbiAgICAob2JqLmJvdHRvbSkgK1xuICAgICc7XFxucmV0dXJuIHJlc3VsdCc7XG5cbiAgICByZXR1cm4gX19wXG4gIH07XG5cbiAgLyotLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSovXG5cbiAgLyoqXG4gICAqIFRoZSBiYXNlIGltcGxlbWVudGF0aW9uIG9mIGBfLmJpbmRgIHRoYXQgY3JlYXRlcyB0aGUgYm91bmQgZnVuY3Rpb24gYW5kXG4gICAqIHNldHMgaXRzIG1ldGEgZGF0YS5cbiAgICpcbiAgICogQHByaXZhdGVcbiAgICogQHBhcmFtIHtBcnJheX0gYmluZERhdGEgVGhlIGJpbmQgZGF0YSBhcnJheS5cbiAgICogQHJldHVybnMge0Z1bmN0aW9ufSBSZXR1cm5zIHRoZSBuZXcgYm91bmQgZnVuY3Rpb24uXG4gICAqL1xuICBmdW5jdGlvbiBiYXNlQmluZChiaW5kRGF0YSkge1xuICAgIHZhciBmdW5jID0gYmluZERhdGFbMF0sXG4gICAgICAgIHBhcnRpYWxBcmdzID0gYmluZERhdGFbMl0sXG4gICAgICAgIHRoaXNBcmcgPSBiaW5kRGF0YVs0XTtcblxuICAgIGZ1bmN0aW9uIGJvdW5kKCkge1xuICAgICAgLy8gYEZ1bmN0aW9uI2JpbmRgIHNwZWNcbiAgICAgIC8vIGh0dHA6Ly9lczUuZ2l0aHViLmlvLyN4MTUuMy40LjVcbiAgICAgIGlmIChwYXJ0aWFsQXJncykge1xuICAgICAgICAvLyBhdm9pZCBgYXJndW1lbnRzYCBvYmplY3QgZGVvcHRpbWl6YXRpb25zIGJ5IHVzaW5nIGBzbGljZWAgaW5zdGVhZFxuICAgICAgICAvLyBvZiBgQXJyYXkucHJvdG90eXBlLnNsaWNlLmNhbGxgIGFuZCBub3QgYXNzaWduaW5nIGBhcmd1bWVudHNgIHRvIGFcbiAgICAgICAgLy8gdmFyaWFibGUgYXMgYSB0ZXJuYXJ5IGV4cHJlc3Npb25cbiAgICAgICAgdmFyIGFyZ3MgPSBzbGljZShwYXJ0aWFsQXJncyk7XG4gICAgICAgIHB1c2guYXBwbHkoYXJncywgYXJndW1lbnRzKTtcbiAgICAgIH1cbiAgICAgIC8vIG1pbWljIHRoZSBjb25zdHJ1Y3RvcidzIGByZXR1cm5gIGJlaGF2aW9yXG4gICAgICAvLyBodHRwOi8vZXM1LmdpdGh1Yi5pby8jeDEzLjIuMlxuICAgICAgaWYgKHRoaXMgaW5zdGFuY2VvZiBib3VuZCkge1xuICAgICAgICAvLyBlbnN1cmUgYG5ldyBib3VuZGAgaXMgYW4gaW5zdGFuY2Ugb2YgYGZ1bmNgXG4gICAgICAgIHZhciB0aGlzQmluZGluZyA9IGJhc2VDcmVhdGUoZnVuYy5wcm90b3R5cGUpLFxuICAgICAgICAgICAgcmVzdWx0ID0gZnVuYy5hcHBseSh0aGlzQmluZGluZywgYXJncyB8fCBhcmd1bWVudHMpO1xuICAgICAgICByZXR1cm4gaXNPYmplY3QocmVzdWx0KSA/IHJlc3VsdCA6IHRoaXNCaW5kaW5nO1xuICAgICAgfVxuICAgICAgcmV0dXJuIGZ1bmMuYXBwbHkodGhpc0FyZywgYXJncyB8fCBhcmd1bWVudHMpO1xuICAgIH1cbiAgICBzZXRCaW5kRGF0YShib3VuZCwgYmluZERhdGEpO1xuICAgIHJldHVybiBib3VuZDtcbiAgfVxuXG4gIC8qKlxuICAgKiBUaGUgYmFzZSBpbXBsZW1lbnRhdGlvbiBvZiBgXy5jcmVhdGVgIHdpdGhvdXQgc3VwcG9ydCBmb3IgYXNzaWduaW5nXG4gICAqIHByb3BlcnRpZXMgdG8gdGhlIGNyZWF0ZWQgb2JqZWN0LlxuICAgKlxuICAgKiBAcHJpdmF0ZVxuICAgKiBAcGFyYW0ge09iamVjdH0gcHJvdG90eXBlIFRoZSBvYmplY3QgdG8gaW5oZXJpdCBmcm9tLlxuICAgKiBAcmV0dXJucyB7T2JqZWN0fSBSZXR1cm5zIHRoZSBuZXcgb2JqZWN0LlxuICAgKi9cbiAgZnVuY3Rpb24gYmFzZUNyZWF0ZShwcm90b3R5cGUsIHByb3BlcnRpZXMpIHtcbiAgICByZXR1cm4gaXNPYmplY3QocHJvdG90eXBlKSA/IG5hdGl2ZUNyZWF0ZShwcm90b3R5cGUpIDoge307XG4gIH1cbiAgLy8gZmFsbGJhY2sgZm9yIGJyb3dzZXJzIHdpdGhvdXQgYE9iamVjdC5jcmVhdGVgXG4gIGlmICghbmF0aXZlQ3JlYXRlKSB7XG4gICAgYmFzZUNyZWF0ZSA9IChmdW5jdGlvbigpIHtcbiAgICAgIGZ1bmN0aW9uIE9iamVjdCgpIHt9XG4gICAgICByZXR1cm4gZnVuY3Rpb24ocHJvdG90eXBlKSB7XG4gICAgICAgIGlmIChpc09iamVjdChwcm90b3R5cGUpKSB7XG4gICAgICAgICAgT2JqZWN0LnByb3RvdHlwZSA9IHByb3RvdHlwZTtcbiAgICAgICAgICB2YXIgcmVzdWx0ID0gbmV3IE9iamVjdDtcbiAgICAgICAgICBPYmplY3QucHJvdG90eXBlID0gbnVsbDtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gcmVzdWx0IHx8IHJvb3QuT2JqZWN0KCk7XG4gICAgICB9O1xuICAgIH0oKSk7XG4gIH1cblxuICAvKipcbiAgICogVGhlIGJhc2UgaW1wbGVtZW50YXRpb24gb2YgYF8uY3JlYXRlQ2FsbGJhY2tgIHdpdGhvdXQgc3VwcG9ydCBmb3IgY3JlYXRpbmdcbiAgICogXCJfLnBsdWNrXCIgb3IgXCJfLndoZXJlXCIgc3R5bGUgY2FsbGJhY2tzLlxuICAgKlxuICAgKiBAcHJpdmF0ZVxuICAgKiBAcGFyYW0geyp9IFtmdW5jPWlkZW50aXR5XSBUaGUgdmFsdWUgdG8gY29udmVydCB0byBhIGNhbGxiYWNrLlxuICAgKiBAcGFyYW0geyp9IFt0aGlzQXJnXSBUaGUgYHRoaXNgIGJpbmRpbmcgb2YgdGhlIGNyZWF0ZWQgY2FsbGJhY2suXG4gICAqIEBwYXJhbSB7bnVtYmVyfSBbYXJnQ291bnRdIFRoZSBudW1iZXIgb2YgYXJndW1lbnRzIHRoZSBjYWxsYmFjayBhY2NlcHRzLlxuICAgKiBAcmV0dXJucyB7RnVuY3Rpb259IFJldHVybnMgYSBjYWxsYmFjayBmdW5jdGlvbi5cbiAgICovXG4gIGZ1bmN0aW9uIGJhc2VDcmVhdGVDYWxsYmFjayhmdW5jLCB0aGlzQXJnLCBhcmdDb3VudCkge1xuICAgIGlmICh0eXBlb2YgZnVuYyAhPSAnZnVuY3Rpb24nKSB7XG4gICAgICByZXR1cm4gaWRlbnRpdHk7XG4gICAgfVxuICAgIC8vIGV4aXQgZWFybHkgZm9yIG5vIGB0aGlzQXJnYCBvciBhbHJlYWR5IGJvdW5kIGJ5IGBGdW5jdGlvbiNiaW5kYFxuICAgIGlmICh0eXBlb2YgdGhpc0FyZyA9PSAndW5kZWZpbmVkJyB8fCAhKCdwcm90b3R5cGUnIGluIGZ1bmMpKSB7XG4gICAgICByZXR1cm4gZnVuYztcbiAgICB9XG4gICAgdmFyIGJpbmREYXRhID0gZnVuYy5fX2JpbmREYXRhX187XG4gICAgaWYgKHR5cGVvZiBiaW5kRGF0YSA9PSAndW5kZWZpbmVkJykge1xuICAgICAgaWYgKHN1cHBvcnQuZnVuY05hbWVzKSB7XG4gICAgICAgIGJpbmREYXRhID0gIWZ1bmMubmFtZTtcbiAgICAgIH1cbiAgICAgIGJpbmREYXRhID0gYmluZERhdGEgfHwgIXN1cHBvcnQuZnVuY0RlY29tcDtcbiAgICAgIGlmICghYmluZERhdGEpIHtcbiAgICAgICAgdmFyIHNvdXJjZSA9IGZuVG9TdHJpbmcuY2FsbChmdW5jKTtcbiAgICAgICAgaWYgKCFzdXBwb3J0LmZ1bmNOYW1lcykge1xuICAgICAgICAgIGJpbmREYXRhID0gIXJlRnVuY05hbWUudGVzdChzb3VyY2UpO1xuICAgICAgICB9XG4gICAgICAgIGlmICghYmluZERhdGEpIHtcbiAgICAgICAgICAvLyBjaGVja3MgaWYgYGZ1bmNgIHJlZmVyZW5jZXMgdGhlIGB0aGlzYCBrZXl3b3JkIGFuZCBzdG9yZXMgdGhlIHJlc3VsdFxuICAgICAgICAgIGJpbmREYXRhID0gcmVUaGlzLnRlc3Qoc291cmNlKTtcbiAgICAgICAgICBzZXRCaW5kRGF0YShmdW5jLCBiaW5kRGF0YSk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gICAgLy8gZXhpdCBlYXJseSBpZiB0aGVyZSBhcmUgbm8gYHRoaXNgIHJlZmVyZW5jZXMgb3IgYGZ1bmNgIGlzIGJvdW5kXG4gICAgaWYgKGJpbmREYXRhID09PSBmYWxzZSB8fCAoYmluZERhdGEgIT09IHRydWUgJiYgYmluZERhdGFbMV0gJiAxKSkge1xuICAgICAgcmV0dXJuIGZ1bmM7XG4gICAgfVxuICAgIHN3aXRjaCAoYXJnQ291bnQpIHtcbiAgICAgIGNhc2UgMTogcmV0dXJuIGZ1bmN0aW9uKHZhbHVlKSB7XG4gICAgICAgIHJldHVybiBmdW5jLmNhbGwodGhpc0FyZywgdmFsdWUpO1xuICAgICAgfTtcbiAgICAgIGNhc2UgMjogcmV0dXJuIGZ1bmN0aW9uKGEsIGIpIHtcbiAgICAgICAgcmV0dXJuIGZ1bmMuY2FsbCh0aGlzQXJnLCBhLCBiKTtcbiAgICAgIH07XG4gICAgICBjYXNlIDM6IHJldHVybiBmdW5jdGlvbih2YWx1ZSwgaW5kZXgsIGNvbGxlY3Rpb24pIHtcbiAgICAgICAgcmV0dXJuIGZ1bmMuY2FsbCh0aGlzQXJnLCB2YWx1ZSwgaW5kZXgsIGNvbGxlY3Rpb24pO1xuICAgICAgfTtcbiAgICAgIGNhc2UgNDogcmV0dXJuIGZ1bmN0aW9uKGFjY3VtdWxhdG9yLCB2YWx1ZSwgaW5kZXgsIGNvbGxlY3Rpb24pIHtcbiAgICAgICAgcmV0dXJuIGZ1bmMuY2FsbCh0aGlzQXJnLCBhY2N1bXVsYXRvciwgdmFsdWUsIGluZGV4LCBjb2xsZWN0aW9uKTtcbiAgICAgIH07XG4gICAgfVxuICAgIHJldHVybiBiaW5kKGZ1bmMsIHRoaXNBcmcpO1xuICB9XG5cbiAgLyoqXG4gICAqIFRoZSBiYXNlIGltcGxlbWVudGF0aW9uIG9mIGBjcmVhdGVXcmFwcGVyYCB0aGF0IGNyZWF0ZXMgdGhlIHdyYXBwZXIgYW5kXG4gICAqIHNldHMgaXRzIG1ldGEgZGF0YS5cbiAgICpcbiAgICogQHByaXZhdGVcbiAgICogQHBhcmFtIHtBcnJheX0gYmluZERhdGEgVGhlIGJpbmQgZGF0YSBhcnJheS5cbiAgICogQHJldHVybnMge0Z1bmN0aW9ufSBSZXR1cm5zIHRoZSBuZXcgZnVuY3Rpb24uXG4gICAqL1xuICBmdW5jdGlvbiBiYXNlQ3JlYXRlV3JhcHBlcihiaW5kRGF0YSkge1xuICAgIHZhciBmdW5jID0gYmluZERhdGFbMF0sXG4gICAgICAgIGJpdG1hc2sgPSBiaW5kRGF0YVsxXSxcbiAgICAgICAgcGFydGlhbEFyZ3MgPSBiaW5kRGF0YVsyXSxcbiAgICAgICAgcGFydGlhbFJpZ2h0QXJncyA9IGJpbmREYXRhWzNdLFxuICAgICAgICB0aGlzQXJnID0gYmluZERhdGFbNF0sXG4gICAgICAgIGFyaXR5ID0gYmluZERhdGFbNV07XG5cbiAgICB2YXIgaXNCaW5kID0gYml0bWFzayAmIDEsXG4gICAgICAgIGlzQmluZEtleSA9IGJpdG1hc2sgJiAyLFxuICAgICAgICBpc0N1cnJ5ID0gYml0bWFzayAmIDQsXG4gICAgICAgIGlzQ3VycnlCb3VuZCA9IGJpdG1hc2sgJiA4LFxuICAgICAgICBrZXkgPSBmdW5jO1xuXG4gICAgZnVuY3Rpb24gYm91bmQoKSB7XG4gICAgICB2YXIgdGhpc0JpbmRpbmcgPSBpc0JpbmQgPyB0aGlzQXJnIDogdGhpcztcbiAgICAgIGlmIChwYXJ0aWFsQXJncykge1xuICAgICAgICB2YXIgYXJncyA9IHNsaWNlKHBhcnRpYWxBcmdzKTtcbiAgICAgICAgcHVzaC5hcHBseShhcmdzLCBhcmd1bWVudHMpO1xuICAgICAgfVxuICAgICAgaWYgKHBhcnRpYWxSaWdodEFyZ3MgfHwgaXNDdXJyeSkge1xuICAgICAgICBhcmdzIHx8IChhcmdzID0gc2xpY2UoYXJndW1lbnRzKSk7XG4gICAgICAgIGlmIChwYXJ0aWFsUmlnaHRBcmdzKSB7XG4gICAgICAgICAgcHVzaC5hcHBseShhcmdzLCBwYXJ0aWFsUmlnaHRBcmdzKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoaXNDdXJyeSAmJiBhcmdzLmxlbmd0aCA8IGFyaXR5KSB7XG4gICAgICAgICAgYml0bWFzayB8PSAxNiAmIH4zMjtcbiAgICAgICAgICByZXR1cm4gYmFzZUNyZWF0ZVdyYXBwZXIoW2Z1bmMsIChpc0N1cnJ5Qm91bmQgPyBiaXRtYXNrIDogYml0bWFzayAmIH4zKSwgYXJncywgbnVsbCwgdGhpc0FyZywgYXJpdHldKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgYXJncyB8fCAoYXJncyA9IGFyZ3VtZW50cyk7XG4gICAgICBpZiAoaXNCaW5kS2V5KSB7XG4gICAgICAgIGZ1bmMgPSB0aGlzQmluZGluZ1trZXldO1xuICAgICAgfVxuICAgICAgaWYgKHRoaXMgaW5zdGFuY2VvZiBib3VuZCkge1xuICAgICAgICB0aGlzQmluZGluZyA9IGJhc2VDcmVhdGUoZnVuYy5wcm90b3R5cGUpO1xuICAgICAgICB2YXIgcmVzdWx0ID0gZnVuYy5hcHBseSh0aGlzQmluZGluZywgYXJncyk7XG4gICAgICAgIHJldHVybiBpc09iamVjdChyZXN1bHQpID8gcmVzdWx0IDogdGhpc0JpbmRpbmc7XG4gICAgICB9XG4gICAgICByZXR1cm4gZnVuYy5hcHBseSh0aGlzQmluZGluZywgYXJncyk7XG4gICAgfVxuICAgIHNldEJpbmREYXRhKGJvdW5kLCBiaW5kRGF0YSk7XG4gICAgcmV0dXJuIGJvdW5kO1xuICB9XG5cbiAgLyoqXG4gICAqIENyZWF0ZXMgYSBmdW5jdGlvbiB0aGF0LCB3aGVuIGNhbGxlZCwgZWl0aGVyIGN1cnJpZXMgb3IgaW52b2tlcyBgZnVuY2BcbiAgICogd2l0aCBhbiBvcHRpb25hbCBgdGhpc2AgYmluZGluZyBhbmQgcGFydGlhbGx5IGFwcGxpZWQgYXJndW1lbnRzLlxuICAgKlxuICAgKiBAcHJpdmF0ZVxuICAgKiBAcGFyYW0ge0Z1bmN0aW9ufHN0cmluZ30gZnVuYyBUaGUgZnVuY3Rpb24gb3IgbWV0aG9kIG5hbWUgdG8gcmVmZXJlbmNlLlxuICAgKiBAcGFyYW0ge251bWJlcn0gYml0bWFzayBUaGUgYml0bWFzayBvZiBtZXRob2QgZmxhZ3MgdG8gY29tcG9zZS5cbiAgICogIFRoZSBiaXRtYXNrIG1heSBiZSBjb21wb3NlZCBvZiB0aGUgZm9sbG93aW5nIGZsYWdzOlxuICAgKiAgMSAtIGBfLmJpbmRgXG4gICAqICAyIC0gYF8uYmluZEtleWBcbiAgICogIDQgLSBgXy5jdXJyeWBcbiAgICogIDggLSBgXy5jdXJyeWAgKGJvdW5kKVxuICAgKiAgMTYgLSBgXy5wYXJ0aWFsYFxuICAgKiAgMzIgLSBgXy5wYXJ0aWFsUmlnaHRgXG4gICAqIEBwYXJhbSB7QXJyYXl9IFtwYXJ0aWFsQXJnc10gQW4gYXJyYXkgb2YgYXJndW1lbnRzIHRvIHByZXBlbmQgdG8gdGhvc2VcbiAgICogIHByb3ZpZGVkIHRvIHRoZSBuZXcgZnVuY3Rpb24uXG4gICAqIEBwYXJhbSB7QXJyYXl9IFtwYXJ0aWFsUmlnaHRBcmdzXSBBbiBhcnJheSBvZiBhcmd1bWVudHMgdG8gYXBwZW5kIHRvIHRob3NlXG4gICAqICBwcm92aWRlZCB0byB0aGUgbmV3IGZ1bmN0aW9uLlxuICAgKiBAcGFyYW0geyp9IFt0aGlzQXJnXSBUaGUgYHRoaXNgIGJpbmRpbmcgb2YgYGZ1bmNgLlxuICAgKiBAcGFyYW0ge251bWJlcn0gW2FyaXR5XSBUaGUgYXJpdHkgb2YgYGZ1bmNgLlxuICAgKiBAcmV0dXJucyB7RnVuY3Rpb259IFJldHVybnMgdGhlIG5ldyBmdW5jdGlvbi5cbiAgICovXG4gIGZ1bmN0aW9uIGNyZWF0ZVdyYXBwZXIoZnVuYywgYml0bWFzaywgcGFydGlhbEFyZ3MsIHBhcnRpYWxSaWdodEFyZ3MsIHRoaXNBcmcsIGFyaXR5KSB7XG4gICAgdmFyIGlzQmluZCA9IGJpdG1hc2sgJiAxLFxuICAgICAgICBpc0JpbmRLZXkgPSBiaXRtYXNrICYgMixcbiAgICAgICAgaXNDdXJyeSA9IGJpdG1hc2sgJiA0LFxuICAgICAgICBpc0N1cnJ5Qm91bmQgPSBiaXRtYXNrICYgOCxcbiAgICAgICAgaXNQYXJ0aWFsID0gYml0bWFzayAmIDE2LFxuICAgICAgICBpc1BhcnRpYWxSaWdodCA9IGJpdG1hc2sgJiAzMjtcblxuICAgIGlmICghaXNCaW5kS2V5ICYmICFpc0Z1bmN0aW9uKGZ1bmMpKSB7XG4gICAgICB0aHJvdyBuZXcgVHlwZUVycm9yO1xuICAgIH1cbiAgICBpZiAoaXNQYXJ0aWFsICYmICFwYXJ0aWFsQXJncy5sZW5ndGgpIHtcbiAgICAgIGJpdG1hc2sgJj0gfjE2O1xuICAgICAgaXNQYXJ0aWFsID0gcGFydGlhbEFyZ3MgPSBmYWxzZTtcbiAgICB9XG4gICAgaWYgKGlzUGFydGlhbFJpZ2h0ICYmICFwYXJ0aWFsUmlnaHRBcmdzLmxlbmd0aCkge1xuICAgICAgYml0bWFzayAmPSB+MzI7XG4gICAgICBpc1BhcnRpYWxSaWdodCA9IHBhcnRpYWxSaWdodEFyZ3MgPSBmYWxzZTtcbiAgICB9XG4gICAgdmFyIGJpbmREYXRhID0gZnVuYyAmJiBmdW5jLl9fYmluZERhdGFfXztcbiAgICBpZiAoYmluZERhdGEgJiYgYmluZERhdGEgIT09IHRydWUpIHtcbiAgICAgIC8vIGNsb25lIGBiaW5kRGF0YWBcbiAgICAgIGJpbmREYXRhID0gc2xpY2UoYmluZERhdGEpO1xuICAgICAgaWYgKGJpbmREYXRhWzJdKSB7XG4gICAgICAgIGJpbmREYXRhWzJdID0gc2xpY2UoYmluZERhdGFbMl0pO1xuICAgICAgfVxuICAgICAgaWYgKGJpbmREYXRhWzNdKSB7XG4gICAgICAgIGJpbmREYXRhWzNdID0gc2xpY2UoYmluZERhdGFbM10pO1xuICAgICAgfVxuICAgICAgLy8gc2V0IGB0aGlzQmluZGluZ2AgaXMgbm90IHByZXZpb3VzbHkgYm91bmRcbiAgICAgIGlmIChpc0JpbmQgJiYgIShiaW5kRGF0YVsxXSAmIDEpKSB7XG4gICAgICAgIGJpbmREYXRhWzRdID0gdGhpc0FyZztcbiAgICAgIH1cbiAgICAgIC8vIHNldCBpZiBwcmV2aW91c2x5IGJvdW5kIGJ1dCBub3QgY3VycmVudGx5IChzdWJzZXF1ZW50IGN1cnJpZWQgZnVuY3Rpb25zKVxuICAgICAgaWYgKCFpc0JpbmQgJiYgYmluZERhdGFbMV0gJiAxKSB7XG4gICAgICAgIGJpdG1hc2sgfD0gODtcbiAgICAgIH1cbiAgICAgIC8vIHNldCBjdXJyaWVkIGFyaXR5IGlmIG5vdCB5ZXQgc2V0XG4gICAgICBpZiAoaXNDdXJyeSAmJiAhKGJpbmREYXRhWzFdICYgNCkpIHtcbiAgICAgICAgYmluZERhdGFbNV0gPSBhcml0eTtcbiAgICAgIH1cbiAgICAgIC8vIGFwcGVuZCBwYXJ0aWFsIGxlZnQgYXJndW1lbnRzXG4gICAgICBpZiAoaXNQYXJ0aWFsKSB7XG4gICAgICAgIHB1c2guYXBwbHkoYmluZERhdGFbMl0gfHwgKGJpbmREYXRhWzJdID0gW10pLCBwYXJ0aWFsQXJncyk7XG4gICAgICB9XG4gICAgICAvLyBhcHBlbmQgcGFydGlhbCByaWdodCBhcmd1bWVudHNcbiAgICAgIGlmIChpc1BhcnRpYWxSaWdodCkge1xuICAgICAgICB1bnNoaWZ0LmFwcGx5KGJpbmREYXRhWzNdIHx8IChiaW5kRGF0YVszXSA9IFtdKSwgcGFydGlhbFJpZ2h0QXJncyk7XG4gICAgICB9XG4gICAgICAvLyBtZXJnZSBmbGFnc1xuICAgICAgYmluZERhdGFbMV0gfD0gYml0bWFzaztcbiAgICAgIHJldHVybiBjcmVhdGVXcmFwcGVyLmFwcGx5KG51bGwsIGJpbmREYXRhKTtcbiAgICB9XG4gICAgLy8gZmFzdCBwYXRoIGZvciBgXy5iaW5kYFxuICAgIHZhciBjcmVhdGVyID0gKGJpdG1hc2sgPT0gMSB8fCBiaXRtYXNrID09PSAxNykgPyBiYXNlQmluZCA6IGJhc2VDcmVhdGVXcmFwcGVyO1xuICAgIHJldHVybiBjcmVhdGVyKFtmdW5jLCBiaXRtYXNrLCBwYXJ0aWFsQXJncywgcGFydGlhbFJpZ2h0QXJncywgdGhpc0FyZywgYXJpdHldKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBDcmVhdGVzIGNvbXBpbGVkIGl0ZXJhdGlvbiBmdW5jdGlvbnMuXG4gICAqXG4gICAqIEBwcml2YXRlXG4gICAqIEBwYXJhbSB7Li4uT2JqZWN0fSBbb3B0aW9uc10gVGhlIGNvbXBpbGUgb3B0aW9ucyBvYmplY3QocykuXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBbb3B0aW9ucy5hcnJheV0gQ29kZSB0byBkZXRlcm1pbmUgaWYgdGhlIGl0ZXJhYmxlIGlzIGFuIGFycmF5IG9yIGFycmF5LWxpa2UuXG4gICAqIEBwYXJhbSB7Ym9vbGVhbn0gW29wdGlvbnMudXNlSGFzXSBTcGVjaWZ5IHVzaW5nIGBoYXNPd25Qcm9wZXJ0eWAgY2hlY2tzIGluIHRoZSBvYmplY3QgbG9vcC5cbiAgICogQHBhcmFtIHtGdW5jdGlvbn0gW29wdGlvbnMua2V5c10gQSByZWZlcmVuY2UgdG8gYF8ua2V5c2AgZm9yIHVzZSBpbiBvd24gcHJvcGVydHkgaXRlcmF0aW9uLlxuICAgKiBAcGFyYW0ge3N0cmluZ30gW29wdGlvbnMuYXJnc10gQSBjb21tYSBzZXBhcmF0ZWQgc3RyaW5nIG9mIGl0ZXJhdGlvbiBmdW5jdGlvbiBhcmd1bWVudHMuXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBbb3B0aW9ucy50b3BdIENvZGUgdG8gZXhlY3V0ZSBiZWZvcmUgdGhlIGl0ZXJhdGlvbiBicmFuY2hlcy5cbiAgICogQHBhcmFtIHtzdHJpbmd9IFtvcHRpb25zLmxvb3BdIENvZGUgdG8gZXhlY3V0ZSBpbiB0aGUgb2JqZWN0IGxvb3AuXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBbb3B0aW9ucy5ib3R0b21dIENvZGUgdG8gZXhlY3V0ZSBhZnRlciB0aGUgaXRlcmF0aW9uIGJyYW5jaGVzLlxuICAgKiBAcmV0dXJucyB7RnVuY3Rpb259IFJldHVybnMgdGhlIGNvbXBpbGVkIGZ1bmN0aW9uLlxuICAgKi9cbiAgZnVuY3Rpb24gY3JlYXRlSXRlcmF0b3IoKSB7XG4gICAgLy8gZGF0YSBwcm9wZXJ0aWVzXG4gICAgaXRlcmF0b3JEYXRhLnNoYWRvd2VkUHJvcHMgPSBzaGFkb3dlZFByb3BzO1xuXG4gICAgLy8gaXRlcmF0b3Igb3B0aW9uc1xuICAgIGl0ZXJhdG9yRGF0YS5hcnJheSA9IGl0ZXJhdG9yRGF0YS5ib3R0b20gPSBpdGVyYXRvckRhdGEubG9vcCA9IGl0ZXJhdG9yRGF0YS50b3AgPSAnJztcbiAgICBpdGVyYXRvckRhdGEuaW5pdCA9ICdpdGVyYWJsZSc7XG4gICAgaXRlcmF0b3JEYXRhLnVzZUhhcyA9IHRydWU7XG5cbiAgICAvLyBtZXJnZSBvcHRpb25zIGludG8gYSB0ZW1wbGF0ZSBkYXRhIG9iamVjdFxuICAgIGZvciAodmFyIG9iamVjdCwgaW5kZXggPSAwOyBvYmplY3QgPSBhcmd1bWVudHNbaW5kZXhdOyBpbmRleCsrKSB7XG4gICAgICBmb3IgKHZhciBrZXkgaW4gb2JqZWN0KSB7XG4gICAgICAgIGl0ZXJhdG9yRGF0YVtrZXldID0gb2JqZWN0W2tleV07XG4gICAgICB9XG4gICAgfVxuICAgIHZhciBhcmdzID0gaXRlcmF0b3JEYXRhLmFyZ3M7XG4gICAgaXRlcmF0b3JEYXRhLmZpcnN0QXJnID0gL15bXixdKy8uZXhlYyhhcmdzKVswXTtcblxuICAgIC8vIGNyZWF0ZSB0aGUgZnVuY3Rpb24gZmFjdG9yeVxuICAgIHZhciBmYWN0b3J5ID0gRnVuY3Rpb24oXG4gICAgICAgICdiYXNlQ3JlYXRlQ2FsbGJhY2ssIGVycm9yQ2xhc3MsIGVycm9yUHJvdG8sIGhhc093blByb3BlcnR5LCAnICtcbiAgICAgICAgJ2luZGljYXRvck9iamVjdCwgaXNBcmd1bWVudHMsIGlzQXJyYXksIGlzU3RyaW5nLCBrZXlzLCBvYmplY3RQcm90bywgJyArXG4gICAgICAgICdvYmplY3RUeXBlcywgbm9uRW51bVByb3BzLCBzdHJpbmdDbGFzcywgc3RyaW5nUHJvdG8sIHRvU3RyaW5nJyxcbiAgICAgICdyZXR1cm4gZnVuY3Rpb24oJyArIGFyZ3MgKyAnKSB7XFxuJyArIGl0ZXJhdG9yVGVtcGxhdGUoaXRlcmF0b3JEYXRhKSArICdcXG59J1xuICAgICk7XG5cbiAgICAvLyByZXR1cm4gdGhlIGNvbXBpbGVkIGZ1bmN0aW9uXG4gICAgcmV0dXJuIGZhY3RvcnkoXG4gICAgICBiYXNlQ3JlYXRlQ2FsbGJhY2ssIGVycm9yQ2xhc3MsIGVycm9yUHJvdG8sIGhhc093blByb3BlcnR5LFxuICAgICAgaW5kaWNhdG9yT2JqZWN0LCBpc0FyZ3VtZW50cywgaXNBcnJheSwgaXNTdHJpbmcsIGl0ZXJhdG9yRGF0YS5rZXlzLCBvYmplY3RQcm90byxcbiAgICAgIG9iamVjdFR5cGVzLCBub25FbnVtUHJvcHMsIHN0cmluZ0NsYXNzLCBzdHJpbmdQcm90bywgdG9TdHJpbmdcbiAgICApO1xuICB9XG5cbiAgLyoqXG4gICAqIENoZWNrcyBpZiBgdmFsdWVgIGlzIGEgbmF0aXZlIGZ1bmN0aW9uLlxuICAgKlxuICAgKiBAcHJpdmF0ZVxuICAgKiBAcGFyYW0geyp9IHZhbHVlIFRoZSB2YWx1ZSB0byBjaGVjay5cbiAgICogQHJldHVybnMge2Jvb2xlYW59IFJldHVybnMgYHRydWVgIGlmIHRoZSBgdmFsdWVgIGlzIGEgbmF0aXZlIGZ1bmN0aW9uLCBlbHNlIGBmYWxzZWAuXG4gICAqL1xuICBmdW5jdGlvbiBpc05hdGl2ZSh2YWx1ZSkge1xuICAgIHJldHVybiB0eXBlb2YgdmFsdWUgPT0gJ2Z1bmN0aW9uJyAmJiByZU5hdGl2ZS50ZXN0KHZhbHVlKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBTZXRzIGB0aGlzYCBiaW5kaW5nIGRhdGEgb24gYSBnaXZlbiBmdW5jdGlvbi5cbiAgICpcbiAgICogQHByaXZhdGVcbiAgICogQHBhcmFtIHtGdW5jdGlvbn0gZnVuYyBUaGUgZnVuY3Rpb24gdG8gc2V0IGRhdGEgb24uXG4gICAqIEBwYXJhbSB7QXJyYXl9IHZhbHVlIFRoZSBkYXRhIGFycmF5IHRvIHNldC5cbiAgICovXG4gIHZhciBzZXRCaW5kRGF0YSA9ICFkZWZpbmVQcm9wZXJ0eSA/IG5vb3AgOiBmdW5jdGlvbihmdW5jLCB2YWx1ZSkge1xuICAgIGRlc2NyaXB0b3IudmFsdWUgPSB2YWx1ZTtcbiAgICBkZWZpbmVQcm9wZXJ0eShmdW5jLCAnX19iaW5kRGF0YV9fJywgZGVzY3JpcHRvcik7XG4gIH07XG5cbiAgLyotLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSovXG5cbiAgLyoqXG4gICAqIENoZWNrcyBpZiBgdmFsdWVgIGlzIGFuIGBhcmd1bWVudHNgIG9iamVjdC5cbiAgICpcbiAgICogQHN0YXRpY1xuICAgKiBAbWVtYmVyT2YgX1xuICAgKiBAY2F0ZWdvcnkgT2JqZWN0c1xuICAgKiBAcGFyYW0geyp9IHZhbHVlIFRoZSB2YWx1ZSB0byBjaGVjay5cbiAgICogQHJldHVybnMge2Jvb2xlYW59IFJldHVybnMgYHRydWVgIGlmIHRoZSBgdmFsdWVgIGlzIGFuIGBhcmd1bWVudHNgIG9iamVjdCwgZWxzZSBgZmFsc2VgLlxuICAgKiBAZXhhbXBsZVxuICAgKlxuICAgKiAoZnVuY3Rpb24oKSB7IHJldHVybiBfLmlzQXJndW1lbnRzKGFyZ3VtZW50cyk7IH0pKDEsIDIsIDMpO1xuICAgKiAvLyA9PiB0cnVlXG4gICAqXG4gICAqIF8uaXNBcmd1bWVudHMoWzEsIDIsIDNdKTtcbiAgICogLy8gPT4gZmFsc2VcbiAgICovXG4gIGZ1bmN0aW9uIGlzQXJndW1lbnRzKHZhbHVlKSB7XG4gICAgcmV0dXJuIHZhbHVlICYmIHR5cGVvZiB2YWx1ZSA9PSAnb2JqZWN0JyAmJiB0eXBlb2YgdmFsdWUubGVuZ3RoID09ICdudW1iZXInICYmXG4gICAgICB0b1N0cmluZy5jYWxsKHZhbHVlKSA9PSBhcmdzQ2xhc3MgfHwgZmFsc2U7XG4gIH1cbiAgLy8gZmFsbGJhY2sgZm9yIGJyb3dzZXJzIHRoYXQgY2FuJ3QgZGV0ZWN0IGBhcmd1bWVudHNgIG9iamVjdHMgYnkgW1tDbGFzc11dXG4gIGlmICghc3VwcG9ydC5hcmdzQ2xhc3MpIHtcbiAgICBpc0FyZ3VtZW50cyA9IGZ1bmN0aW9uKHZhbHVlKSB7XG4gICAgICByZXR1cm4gdmFsdWUgJiYgdHlwZW9mIHZhbHVlID09ICdvYmplY3QnICYmIHR5cGVvZiB2YWx1ZS5sZW5ndGggPT0gJ251bWJlcicgJiZcbiAgICAgICAgaGFzT3duUHJvcGVydHkuY2FsbCh2YWx1ZSwgJ2NhbGxlZScpICYmICFwcm9wZXJ0eUlzRW51bWVyYWJsZS5jYWxsKHZhbHVlLCAnY2FsbGVlJykgfHwgZmFsc2U7XG4gICAgfTtcbiAgfVxuXG4gIC8qKlxuICAgKiBDaGVja3MgaWYgYHZhbHVlYCBpcyBhbiBhcnJheS5cbiAgICpcbiAgICogQHN0YXRpY1xuICAgKiBAbWVtYmVyT2YgX1xuICAgKiBAdHlwZSBGdW5jdGlvblxuICAgKiBAY2F0ZWdvcnkgT2JqZWN0c1xuICAgKiBAcGFyYW0geyp9IHZhbHVlIFRoZSB2YWx1ZSB0byBjaGVjay5cbiAgICogQHJldHVybnMge2Jvb2xlYW59IFJldHVybnMgYHRydWVgIGlmIHRoZSBgdmFsdWVgIGlzIGFuIGFycmF5LCBlbHNlIGBmYWxzZWAuXG4gICAqIEBleGFtcGxlXG4gICAqXG4gICAqIChmdW5jdGlvbigpIHsgcmV0dXJuIF8uaXNBcnJheShhcmd1bWVudHMpOyB9KSgpO1xuICAgKiAvLyA9PiBmYWxzZVxuICAgKlxuICAgKiBfLmlzQXJyYXkoWzEsIDIsIDNdKTtcbiAgICogLy8gPT4gdHJ1ZVxuICAgKi9cbiAgdmFyIGlzQXJyYXkgPSBuYXRpdmVJc0FycmF5IHx8IGZ1bmN0aW9uKHZhbHVlKSB7XG4gICAgcmV0dXJuIHZhbHVlICYmIHR5cGVvZiB2YWx1ZSA9PSAnb2JqZWN0JyAmJiB0eXBlb2YgdmFsdWUubGVuZ3RoID09ICdudW1iZXInICYmXG4gICAgICB0b1N0cmluZy5jYWxsKHZhbHVlKSA9PSBhcnJheUNsYXNzIHx8IGZhbHNlO1xuICB9O1xuXG4gIC8qKlxuICAgKiBBIGZhbGxiYWNrIGltcGxlbWVudGF0aW9uIG9mIGBPYmplY3Qua2V5c2Agd2hpY2ggcHJvZHVjZXMgYW4gYXJyYXkgb2YgdGhlXG4gICAqIGdpdmVuIG9iamVjdCdzIG93biBlbnVtZXJhYmxlIHByb3BlcnR5IG5hbWVzLlxuICAgKlxuICAgKiBAcHJpdmF0ZVxuICAgKiBAdHlwZSBGdW5jdGlvblxuICAgKiBAcGFyYW0ge09iamVjdH0gb2JqZWN0IFRoZSBvYmplY3QgdG8gaW5zcGVjdC5cbiAgICogQHJldHVybnMge0FycmF5fSBSZXR1cm5zIGFuIGFycmF5IG9mIHByb3BlcnR5IG5hbWVzLlxuICAgKi9cbiAgdmFyIHNoaW1LZXlzID0gY3JlYXRlSXRlcmF0b3Ioe1xuICAgICdhcmdzJzogJ29iamVjdCcsXG4gICAgJ2luaXQnOiAnW10nLFxuICAgICd0b3AnOiAnaWYgKCEob2JqZWN0VHlwZXNbdHlwZW9mIG9iamVjdF0pKSByZXR1cm4gcmVzdWx0JyxcbiAgICAnbG9vcCc6ICdyZXN1bHQucHVzaChpbmRleCknXG4gIH0pO1xuXG4gIC8qKlxuICAgKiBDcmVhdGVzIGFuIGFycmF5IGNvbXBvc2VkIG9mIHRoZSBvd24gZW51bWVyYWJsZSBwcm9wZXJ0eSBuYW1lcyBvZiBhbiBvYmplY3QuXG4gICAqXG4gICAqIEBzdGF0aWNcbiAgICogQG1lbWJlck9mIF9cbiAgICogQGNhdGVnb3J5IE9iamVjdHNcbiAgICogQHBhcmFtIHtPYmplY3R9IG9iamVjdCBUaGUgb2JqZWN0IHRvIGluc3BlY3QuXG4gICAqIEByZXR1cm5zIHtBcnJheX0gUmV0dXJucyBhbiBhcnJheSBvZiBwcm9wZXJ0eSBuYW1lcy5cbiAgICogQGV4YW1wbGVcbiAgICpcbiAgICogXy5rZXlzKHsgJ29uZSc6IDEsICd0d28nOiAyLCAndGhyZWUnOiAzIH0pO1xuICAgKiAvLyA9PiBbJ29uZScsICd0d28nLCAndGhyZWUnXSAocHJvcGVydHkgb3JkZXIgaXMgbm90IGd1YXJhbnRlZWQgYWNyb3NzIGVudmlyb25tZW50cylcbiAgICovXG4gIHZhciBrZXlzID0gIW5hdGl2ZUtleXMgPyBzaGltS2V5cyA6IGZ1bmN0aW9uKG9iamVjdCkge1xuICAgIGlmICghaXNPYmplY3Qob2JqZWN0KSkge1xuICAgICAgcmV0dXJuIFtdO1xuICAgIH1cbiAgICBpZiAoKHN1cHBvcnQuZW51bVByb3RvdHlwZXMgJiYgdHlwZW9mIG9iamVjdCA9PSAnZnVuY3Rpb24nKSB8fFxuICAgICAgICAoc3VwcG9ydC5ub25FbnVtQXJncyAmJiBvYmplY3QubGVuZ3RoICYmIGlzQXJndW1lbnRzKG9iamVjdCkpKSB7XG4gICAgICByZXR1cm4gc2hpbUtleXMob2JqZWN0KTtcbiAgICB9XG4gICAgcmV0dXJuIG5hdGl2ZUtleXMob2JqZWN0KTtcbiAgfTtcblxuICAvKiogUmV1c2FibGUgaXRlcmF0b3Igb3B0aW9ucyBmb3IgYGFzc2lnbmAgYW5kIGBkZWZhdWx0c2AgKi9cbiAgdmFyIGRlZmF1bHRzSXRlcmF0b3JPcHRpb25zID0ge1xuICAgICdhcmdzJzogJ29iamVjdCwgc291cmNlLCBndWFyZCcsXG4gICAgJ3RvcCc6XG4gICAgICAndmFyIGFyZ3MgPSBhcmd1bWVudHMsXFxuJyArXG4gICAgICAnICAgIGFyZ3NJbmRleCA9IDAsXFxuJyArXG4gICAgICBcIiAgICBhcmdzTGVuZ3RoID0gdHlwZW9mIGd1YXJkID09ICdudW1iZXInID8gMiA6IGFyZ3MubGVuZ3RoO1xcblwiICtcbiAgICAgICd3aGlsZSAoKythcmdzSW5kZXggPCBhcmdzTGVuZ3RoKSB7XFxuJyArXG4gICAgICAnICBpdGVyYWJsZSA9IGFyZ3NbYXJnc0luZGV4XTtcXG4nICtcbiAgICAgICcgIGlmIChpdGVyYWJsZSAmJiBvYmplY3RUeXBlc1t0eXBlb2YgaXRlcmFibGVdKSB7JyxcbiAgICAna2V5cyc6IGtleXMsXG4gICAgJ2xvb3AnOiBcImlmICh0eXBlb2YgcmVzdWx0W2luZGV4XSA9PSAndW5kZWZpbmVkJykgcmVzdWx0W2luZGV4XSA9IGl0ZXJhYmxlW2luZGV4XVwiLFxuICAgICdib3R0b20nOiAnICB9XFxufSdcbiAgfTtcblxuICAvKi0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tKi9cblxuICAvKipcbiAgICogQXNzaWducyBvd24gZW51bWVyYWJsZSBwcm9wZXJ0aWVzIG9mIHNvdXJjZSBvYmplY3QocykgdG8gdGhlIGRlc3RpbmF0aW9uXG4gICAqIG9iamVjdC4gU3Vic2VxdWVudCBzb3VyY2VzIHdpbGwgb3ZlcndyaXRlIHByb3BlcnR5IGFzc2lnbm1lbnRzIG9mIHByZXZpb3VzXG4gICAqIHNvdXJjZXMuIElmIGEgY2FsbGJhY2sgaXMgcHJvdmlkZWQgaXQgd2lsbCBiZSBleGVjdXRlZCB0byBwcm9kdWNlIHRoZVxuICAgKiBhc3NpZ25lZCB2YWx1ZXMuIFRoZSBjYWxsYmFjayBpcyBib3VuZCB0byBgdGhpc0FyZ2AgYW5kIGludm9rZWQgd2l0aCB0d29cbiAgICogYXJndW1lbnRzOyAob2JqZWN0VmFsdWUsIHNvdXJjZVZhbHVlKS5cbiAgICpcbiAgICogQHN0YXRpY1xuICAgKiBAbWVtYmVyT2YgX1xuICAgKiBAdHlwZSBGdW5jdGlvblxuICAgKiBAYWxpYXMgZXh0ZW5kXG4gICAqIEBjYXRlZ29yeSBPYmplY3RzXG4gICAqIEBwYXJhbSB7T2JqZWN0fSBvYmplY3QgVGhlIGRlc3RpbmF0aW9uIG9iamVjdC5cbiAgICogQHBhcmFtIHsuLi5PYmplY3R9IFtzb3VyY2VdIFRoZSBzb3VyY2Ugb2JqZWN0cy5cbiAgICogQHBhcmFtIHtGdW5jdGlvbn0gW2NhbGxiYWNrXSBUaGUgZnVuY3Rpb24gdG8gY3VzdG9taXplIGFzc2lnbmluZyB2YWx1ZXMuXG4gICAqIEBwYXJhbSB7Kn0gW3RoaXNBcmddIFRoZSBgdGhpc2AgYmluZGluZyBvZiBgY2FsbGJhY2tgLlxuICAgKiBAcmV0dXJucyB7T2JqZWN0fSBSZXR1cm5zIHRoZSBkZXN0aW5hdGlvbiBvYmplY3QuXG4gICAqIEBleGFtcGxlXG4gICAqXG4gICAqIF8uYXNzaWduKHsgJ25hbWUnOiAnZnJlZCcgfSwgeyAnZW1wbG95ZXInOiAnc2xhdGUnIH0pO1xuICAgKiAvLyA9PiB7ICduYW1lJzogJ2ZyZWQnLCAnZW1wbG95ZXInOiAnc2xhdGUnIH1cbiAgICpcbiAgICogdmFyIGRlZmF1bHRzID0gXy5wYXJ0aWFsUmlnaHQoXy5hc3NpZ24sIGZ1bmN0aW9uKGEsIGIpIHtcbiAgICogICByZXR1cm4gdHlwZW9mIGEgPT0gJ3VuZGVmaW5lZCcgPyBiIDogYTtcbiAgICogfSk7XG4gICAqXG4gICAqIHZhciBvYmplY3QgPSB7ICduYW1lJzogJ2Jhcm5leScgfTtcbiAgICogZGVmYXVsdHMob2JqZWN0LCB7ICduYW1lJzogJ2ZyZWQnLCAnZW1wbG95ZXInOiAnc2xhdGUnIH0pO1xuICAgKiAvLyA9PiB7ICduYW1lJzogJ2Jhcm5leScsICdlbXBsb3llcic6ICdzbGF0ZScgfVxuICAgKi9cbiAgdmFyIGFzc2lnbiA9IGNyZWF0ZUl0ZXJhdG9yKGRlZmF1bHRzSXRlcmF0b3JPcHRpb25zLCB7XG4gICAgJ3RvcCc6XG4gICAgICBkZWZhdWx0c0l0ZXJhdG9yT3B0aW9ucy50b3AucmVwbGFjZSgnOycsXG4gICAgICAgICc7XFxuJyArXG4gICAgICAgIFwiaWYgKGFyZ3NMZW5ndGggPiAzICYmIHR5cGVvZiBhcmdzW2FyZ3NMZW5ndGggLSAyXSA9PSAnZnVuY3Rpb24nKSB7XFxuXCIgK1xuICAgICAgICAnICB2YXIgY2FsbGJhY2sgPSBiYXNlQ3JlYXRlQ2FsbGJhY2soYXJnc1stLWFyZ3NMZW5ndGggLSAxXSwgYXJnc1thcmdzTGVuZ3RoLS1dLCAyKTtcXG4nICtcbiAgICAgICAgXCJ9IGVsc2UgaWYgKGFyZ3NMZW5ndGggPiAyICYmIHR5cGVvZiBhcmdzW2FyZ3NMZW5ndGggLSAxXSA9PSAnZnVuY3Rpb24nKSB7XFxuXCIgK1xuICAgICAgICAnICBjYWxsYmFjayA9IGFyZ3NbLS1hcmdzTGVuZ3RoXTtcXG4nICtcbiAgICAgICAgJ30nXG4gICAgICApLFxuICAgICdsb29wJzogJ3Jlc3VsdFtpbmRleF0gPSBjYWxsYmFjayA/IGNhbGxiYWNrKHJlc3VsdFtpbmRleF0sIGl0ZXJhYmxlW2luZGV4XSkgOiBpdGVyYWJsZVtpbmRleF0nXG4gIH0pO1xuXG4gIC8qKlxuICAgKiBBc3NpZ25zIG93biBlbnVtZXJhYmxlIHByb3BlcnRpZXMgb2Ygc291cmNlIG9iamVjdChzKSB0byB0aGUgZGVzdGluYXRpb25cbiAgICogb2JqZWN0IGZvciBhbGwgZGVzdGluYXRpb24gcHJvcGVydGllcyB0aGF0IHJlc29sdmUgdG8gYHVuZGVmaW5lZGAuIE9uY2UgYVxuICAgKiBwcm9wZXJ0eSBpcyBzZXQsIGFkZGl0aW9uYWwgZGVmYXVsdHMgb2YgdGhlIHNhbWUgcHJvcGVydHkgd2lsbCBiZSBpZ25vcmVkLlxuICAgKlxuICAgKiBAc3RhdGljXG4gICAqIEBtZW1iZXJPZiBfXG4gICAqIEB0eXBlIEZ1bmN0aW9uXG4gICAqIEBjYXRlZ29yeSBPYmplY3RzXG4gICAqIEBwYXJhbSB7T2JqZWN0fSBvYmplY3QgVGhlIGRlc3RpbmF0aW9uIG9iamVjdC5cbiAgICogQHBhcmFtIHsuLi5PYmplY3R9IFtzb3VyY2VdIFRoZSBzb3VyY2Ugb2JqZWN0cy5cbiAgICogQHBhcmFtLSB7T2JqZWN0fSBbZ3VhcmRdIEFsbG93cyB3b3JraW5nIHdpdGggYF8ucmVkdWNlYCB3aXRob3V0IHVzaW5nIGl0c1xuICAgKiAgYGtleWAgYW5kIGBvYmplY3RgIGFyZ3VtZW50cyBhcyBzb3VyY2VzLlxuICAgKiBAcmV0dXJucyB7T2JqZWN0fSBSZXR1cm5zIHRoZSBkZXN0aW5hdGlvbiBvYmplY3QuXG4gICAqIEBleGFtcGxlXG4gICAqXG4gICAqIHZhciBvYmplY3QgPSB7ICduYW1lJzogJ2Jhcm5leScgfTtcbiAgICogXy5kZWZhdWx0cyhvYmplY3QsIHsgJ25hbWUnOiAnZnJlZCcsICdlbXBsb3llcic6ICdzbGF0ZScgfSk7XG4gICAqIC8vID0+IHsgJ25hbWUnOiAnYmFybmV5JywgJ2VtcGxveWVyJzogJ3NsYXRlJyB9XG4gICAqL1xuICB2YXIgZGVmYXVsdHMgPSBjcmVhdGVJdGVyYXRvcihkZWZhdWx0c0l0ZXJhdG9yT3B0aW9ucyk7XG5cbiAgLyoqXG4gICAqIENoZWNrcyBpZiBgdmFsdWVgIGlzIGEgZnVuY3Rpb24uXG4gICAqXG4gICAqIEBzdGF0aWNcbiAgICogQG1lbWJlck9mIF9cbiAgICogQGNhdGVnb3J5IE9iamVjdHNcbiAgICogQHBhcmFtIHsqfSB2YWx1ZSBUaGUgdmFsdWUgdG8gY2hlY2suXG4gICAqIEByZXR1cm5zIHtib29sZWFufSBSZXR1cm5zIGB0cnVlYCBpZiB0aGUgYHZhbHVlYCBpcyBhIGZ1bmN0aW9uLCBlbHNlIGBmYWxzZWAuXG4gICAqIEBleGFtcGxlXG4gICAqXG4gICAqIF8uaXNGdW5jdGlvbihfKTtcbiAgICogLy8gPT4gdHJ1ZVxuICAgKi9cbiAgZnVuY3Rpb24gaXNGdW5jdGlvbih2YWx1ZSkge1xuICAgIHJldHVybiB0eXBlb2YgdmFsdWUgPT0gJ2Z1bmN0aW9uJztcbiAgfVxuICAvLyBmYWxsYmFjayBmb3Igb2xkZXIgdmVyc2lvbnMgb2YgQ2hyb21lIGFuZCBTYWZhcmlcbiAgaWYgKGlzRnVuY3Rpb24oL3gvKSkge1xuICAgIGlzRnVuY3Rpb24gPSBmdW5jdGlvbih2YWx1ZSkge1xuICAgICAgcmV0dXJuIHR5cGVvZiB2YWx1ZSA9PSAnZnVuY3Rpb24nICYmIHRvU3RyaW5nLmNhbGwodmFsdWUpID09IGZ1bmNDbGFzcztcbiAgICB9O1xuICB9XG5cbiAgLyoqXG4gICAqIENoZWNrcyBpZiBgdmFsdWVgIGlzIHRoZSBsYW5ndWFnZSB0eXBlIG9mIE9iamVjdC5cbiAgICogKGUuZy4gYXJyYXlzLCBmdW5jdGlvbnMsIG9iamVjdHMsIHJlZ2V4ZXMsIGBuZXcgTnVtYmVyKDApYCwgYW5kIGBuZXcgU3RyaW5nKCcnKWApXG4gICAqXG4gICAqIEBzdGF0aWNcbiAgICogQG1lbWJlck9mIF9cbiAgICogQGNhdGVnb3J5IE9iamVjdHNcbiAgICogQHBhcmFtIHsqfSB2YWx1ZSBUaGUgdmFsdWUgdG8gY2hlY2suXG4gICAqIEByZXR1cm5zIHtib29sZWFufSBSZXR1cm5zIGB0cnVlYCBpZiB0aGUgYHZhbHVlYCBpcyBhbiBvYmplY3QsIGVsc2UgYGZhbHNlYC5cbiAgICogQGV4YW1wbGVcbiAgICpcbiAgICogXy5pc09iamVjdCh7fSk7XG4gICAqIC8vID0+IHRydWVcbiAgICpcbiAgICogXy5pc09iamVjdChbMSwgMiwgM10pO1xuICAgKiAvLyA9PiB0cnVlXG4gICAqXG4gICAqIF8uaXNPYmplY3QoMSk7XG4gICAqIC8vID0+IGZhbHNlXG4gICAqL1xuICBmdW5jdGlvbiBpc09iamVjdCh2YWx1ZSkge1xuICAgIC8vIGNoZWNrIGlmIHRoZSB2YWx1ZSBpcyB0aGUgRUNNQVNjcmlwdCBsYW5ndWFnZSB0eXBlIG9mIE9iamVjdFxuICAgIC8vIGh0dHA6Ly9lczUuZ2l0aHViLmlvLyN4OFxuICAgIC8vIGFuZCBhdm9pZCBhIFY4IGJ1Z1xuICAgIC8vIGh0dHA6Ly9jb2RlLmdvb2dsZS5jb20vcC92OC9pc3N1ZXMvZGV0YWlsP2lkPTIyOTFcbiAgICByZXR1cm4gISEodmFsdWUgJiYgb2JqZWN0VHlwZXNbdHlwZW9mIHZhbHVlXSk7XG4gIH1cblxuICAvKipcbiAgICogQ2hlY2tzIGlmIGB2YWx1ZWAgaXMgYSBzdHJpbmcuXG4gICAqXG4gICAqIEBzdGF0aWNcbiAgICogQG1lbWJlck9mIF9cbiAgICogQGNhdGVnb3J5IE9iamVjdHNcbiAgICogQHBhcmFtIHsqfSB2YWx1ZSBUaGUgdmFsdWUgdG8gY2hlY2suXG4gICAqIEByZXR1cm5zIHtib29sZWFufSBSZXR1cm5zIGB0cnVlYCBpZiB0aGUgYHZhbHVlYCBpcyBhIHN0cmluZywgZWxzZSBgZmFsc2VgLlxuICAgKiBAZXhhbXBsZVxuICAgKlxuICAgKiBfLmlzU3RyaW5nKCdmcmVkJyk7XG4gICAqIC8vID0+IHRydWVcbiAgICovXG4gIGZ1bmN0aW9uIGlzU3RyaW5nKHZhbHVlKSB7XG4gICAgcmV0dXJuIHR5cGVvZiB2YWx1ZSA9PSAnc3RyaW5nJyB8fFxuICAgICAgdmFsdWUgJiYgdHlwZW9mIHZhbHVlID09ICdvYmplY3QnICYmIHRvU3RyaW5nLmNhbGwodmFsdWUpID09IHN0cmluZ0NsYXNzIHx8IGZhbHNlO1xuICB9XG5cbiAgLyotLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSovXG5cbiAgLyoqXG4gICAqIENyZWF0ZXMgYSBmdW5jdGlvbiB0aGF0LCB3aGVuIGNhbGxlZCwgaW52b2tlcyBgZnVuY2Agd2l0aCB0aGUgYHRoaXNgXG4gICAqIGJpbmRpbmcgb2YgYHRoaXNBcmdgIGFuZCBwcmVwZW5kcyBhbnkgYWRkaXRpb25hbCBgYmluZGAgYXJndW1lbnRzIHRvIHRob3NlXG4gICAqIHByb3ZpZGVkIHRvIHRoZSBib3VuZCBmdW5jdGlvbi5cbiAgICpcbiAgICogQHN0YXRpY1xuICAgKiBAbWVtYmVyT2YgX1xuICAgKiBAY2F0ZWdvcnkgRnVuY3Rpb25zXG4gICAqIEBwYXJhbSB7RnVuY3Rpb259IGZ1bmMgVGhlIGZ1bmN0aW9uIHRvIGJpbmQuXG4gICAqIEBwYXJhbSB7Kn0gW3RoaXNBcmddIFRoZSBgdGhpc2AgYmluZGluZyBvZiBgZnVuY2AuXG4gICAqIEBwYXJhbSB7Li4uKn0gW2FyZ10gQXJndW1lbnRzIHRvIGJlIHBhcnRpYWxseSBhcHBsaWVkLlxuICAgKiBAcmV0dXJucyB7RnVuY3Rpb259IFJldHVybnMgdGhlIG5ldyBib3VuZCBmdW5jdGlvbi5cbiAgICogQGV4YW1wbGVcbiAgICpcbiAgICogdmFyIGZ1bmMgPSBmdW5jdGlvbihncmVldGluZykge1xuICAgKiAgIHJldHVybiBncmVldGluZyArICcgJyArIHRoaXMubmFtZTtcbiAgICogfTtcbiAgICpcbiAgICogZnVuYyA9IF8uYmluZChmdW5jLCB7ICduYW1lJzogJ2ZyZWQnIH0sICdoaScpO1xuICAgKiBmdW5jKCk7XG4gICAqIC8vID0+ICdoaSBmcmVkJ1xuICAgKi9cbiAgZnVuY3Rpb24gYmluZChmdW5jLCB0aGlzQXJnKSB7XG4gICAgcmV0dXJuIGFyZ3VtZW50cy5sZW5ndGggPiAyXG4gICAgICA/IGNyZWF0ZVdyYXBwZXIoZnVuYywgMTcsIHNsaWNlKGFyZ3VtZW50cywgMiksIG51bGwsIHRoaXNBcmcpXG4gICAgICA6IGNyZWF0ZVdyYXBwZXIoZnVuYywgMSwgbnVsbCwgbnVsbCwgdGhpc0FyZyk7XG4gIH1cblxuICAvKi0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tKi9cblxuICAvKipcbiAgICogVGhpcyBtZXRob2QgcmV0dXJucyB0aGUgZmlyc3QgYXJndW1lbnQgcHJvdmlkZWQgdG8gaXQuXG4gICAqXG4gICAqIEBzdGF0aWNcbiAgICogQG1lbWJlck9mIF9cbiAgICogQGNhdGVnb3J5IFV0aWxpdGllc1xuICAgKiBAcGFyYW0geyp9IHZhbHVlIEFueSB2YWx1ZS5cbiAgICogQHJldHVybnMgeyp9IFJldHVybnMgYHZhbHVlYC5cbiAgICogQGV4YW1wbGVcbiAgICpcbiAgICogdmFyIG9iamVjdCA9IHsgJ25hbWUnOiAnZnJlZCcgfTtcbiAgICogXy5pZGVudGl0eShvYmplY3QpID09PSBvYmplY3Q7XG4gICAqIC8vID0+IHRydWVcbiAgICovXG4gIGZ1bmN0aW9uIGlkZW50aXR5KHZhbHVlKSB7XG4gICAgcmV0dXJuIHZhbHVlO1xuICB9XG5cbiAgLyoqXG4gICAqIEEgbm8tb3BlcmF0aW9uIGZ1bmN0aW9uLlxuICAgKlxuICAgKiBAc3RhdGljXG4gICAqIEBtZW1iZXJPZiBfXG4gICAqIEBjYXRlZ29yeSBVdGlsaXRpZXNcbiAgICogQGV4YW1wbGVcbiAgICpcbiAgICogdmFyIG9iamVjdCA9IHsgJ25hbWUnOiAnZnJlZCcgfTtcbiAgICogXy5ub29wKG9iamVjdCkgPT09IHVuZGVmaW5lZDtcbiAgICogLy8gPT4gdHJ1ZVxuICAgKi9cbiAgZnVuY3Rpb24gbm9vcCgpIHtcbiAgICAvLyBubyBvcGVyYXRpb24gcGVyZm9ybWVkXG4gIH1cblxuICAvKi0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tKi9cblxuICBsb2Rhc2guYXNzaWduID0gYXNzaWduO1xuICBsb2Rhc2guYmluZCA9IGJpbmQ7XG4gIGxvZGFzaC5kZWZhdWx0cyA9IGRlZmF1bHRzO1xuICBsb2Rhc2gua2V5cyA9IGtleXM7XG5cbiAgbG9kYXNoLmV4dGVuZCA9IGFzc2lnbjtcblxuICAvKi0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tKi9cblxuICBsb2Rhc2guaWRlbnRpdHkgPSBpZGVudGl0eTtcbiAgbG9kYXNoLmlzQXJndW1lbnRzID0gaXNBcmd1bWVudHM7XG4gIGxvZGFzaC5pc0FycmF5ID0gaXNBcnJheTtcbiAgbG9kYXNoLmlzRnVuY3Rpb24gPSBpc0Z1bmN0aW9uO1xuICBsb2Rhc2guaXNPYmplY3QgPSBpc09iamVjdDtcbiAgbG9kYXNoLmlzU3RyaW5nID0gaXNTdHJpbmc7XG4gIGxvZGFzaC5ub29wID0gbm9vcDtcblxuICAvKi0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tKi9cblxuICAvKipcbiAgICogVGhlIHNlbWFudGljIHZlcnNpb24gbnVtYmVyLlxuICAgKlxuICAgKiBAc3RhdGljXG4gICAqIEBtZW1iZXJPZiBfXG4gICAqIEB0eXBlIHN0cmluZ1xuICAgKi9cbiAgbG9kYXNoLlZFUlNJT04gPSAnMi40LjEnO1xuXG4gIC8qLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0qL1xuXG4gIC8vIHNvbWUgQU1EIGJ1aWxkIG9wdGltaXplcnMgbGlrZSByLmpzIGNoZWNrIGZvciBjb25kaXRpb24gcGF0dGVybnMgbGlrZSB0aGUgZm9sbG93aW5nOlxuICBpZiAodHlwZW9mIGRlZmluZSA9PSAnZnVuY3Rpb24nICYmIHR5cGVvZiBkZWZpbmUuYW1kID09ICdvYmplY3QnICYmIGRlZmluZS5hbWQpIHtcbiAgICAvLyBFeHBvc2UgTG8tRGFzaCB0byB0aGUgZ2xvYmFsIG9iamVjdCBldmVuIHdoZW4gYW4gQU1EIGxvYWRlciBpcyBwcmVzZW50IGluXG4gICAgLy8gY2FzZSBMby1EYXNoIGlzIGxvYWRlZCB3aXRoIGEgUmVxdWlyZUpTIHNoaW0gY29uZmlnLlxuICAgIC8vIFNlZSBodHRwOi8vcmVxdWlyZWpzLm9yZy9kb2NzL2FwaS5odG1sI2NvbmZpZy1zaGltXG4gICAgcm9vdC5fID0gbG9kYXNoO1xuXG4gICAgLy8gZGVmaW5lIGFzIGFuIGFub255bW91cyBtb2R1bGUgc28sIHRocm91Z2ggcGF0aCBtYXBwaW5nLCBpdCBjYW4gYmVcbiAgICAvLyByZWZlcmVuY2VkIGFzIHRoZSBcInVuZGVyc2NvcmVcIiBtb2R1bGVcbiAgICBkZWZpbmUoZnVuY3Rpb24oKSB7XG4gICAgICByZXR1cm4gbG9kYXNoO1xuICAgIH0pO1xuICB9XG4gIC8vIGNoZWNrIGZvciBgZXhwb3J0c2AgYWZ0ZXIgYGRlZmluZWAgaW4gY2FzZSBhIGJ1aWxkIG9wdGltaXplciBhZGRzIGFuIGBleHBvcnRzYCBvYmplY3RcbiAgZWxzZSBpZiAoZnJlZUV4cG9ydHMgJiYgZnJlZU1vZHVsZSkge1xuICAgIC8vIGluIE5vZGUuanMgb3IgUmluZ29KU1xuICAgIGlmIChtb2R1bGVFeHBvcnRzKSB7XG4gICAgICAoZnJlZU1vZHVsZS5leHBvcnRzID0gbG9kYXNoKS5fID0gbG9kYXNoO1xuICAgIH1cbiAgICAvLyBpbiBOYXJ3aGFsIG9yIFJoaW5vIC1yZXF1aXJlXG4gICAgZWxzZSB7XG4gICAgICBmcmVlRXhwb3J0cy5fID0gbG9kYXNoO1xuICAgIH1cbiAgfVxuICBlbHNlIHtcbiAgICAvLyBpbiBhIGJyb3dzZXIgb3IgUmhpbm9cbiAgICByb290Ll8gPSBsb2Rhc2g7XG4gIH1cbn0uY2FsbCh0aGlzKSk7XG4iXX0=
